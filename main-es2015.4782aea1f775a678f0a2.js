(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{0:function(t,e,n){t.exports=n("zUnb")},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("mrSG"),r=n("wj3C"),o=n("q/0M"),s=n("zVF4"),a=n("x7I3"),l=n("S+S0"),c=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(r),u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},h=function(t){function e(e,n){var i=this;return(i=t.call(this,n)||this).code=e,i.message=n,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return i.__extends(e,t),e}(Error),d=new o.Logger("@firebase/firestore");function p(){return d.logLevel}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(d.logLevel<=o.LogLevel.DEBUG){var r=e.map(v);d.debug.apply(d,i.__spreadArrays(["Firestore (7.24.0): "+t],r))}}function m(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(d.logLevel<=o.LogLevel.ERROR){var r=e.map(v);d.error.apply(d,i.__spreadArrays(["Firestore (7.24.0): "+t],r))}}function g(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(d.logLevel<=o.LogLevel.WARN){var r=e.map(v);d.warn.apply(d,i.__spreadArrays(["Firestore (7.24.0): "+t],r))}}function v(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(r){return t}}function y(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (7.24.0) INTERNAL ASSERTION FAILED: "+t;throw m(e),new Error(e)}function b(t,e){t||y()}function _(t,e){return t}function w(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function A(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function x(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var C=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&y(),void 0===n?n=t.length-e:n>t.length-e&&y(),this.segments=t,this.offset=e,this.t=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.i(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.o(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.u=function(t){return this.o(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},t.prototype.l=function(){return this.segments[this.offset]},t.prototype._=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.m=function(){return 0===this.length},t.prototype.T=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.I=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},t.i=function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++){var r=t.get(i),o=e.get(i);if(r<o)return-1;if(r>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.o=function(t,n,i){return new e(t,n,i)},e.prototype.R=function(){return this.A().join("/")},e.prototype.toString=function(){return this.R()},e.g=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=[],r=0,o=t;r<o.length;r++){var s=o[r];if(s.indexOf("//")>=0)throw new h(u.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");i.push.apply(i,s.split("/").filter((function(t){return t.length>0})))}return new e(i)},e.P=function(){return new e([])},e}(C),S=/^[_a-zA-Z][_a-zA-Z0-9]*$/,M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.o=function(t,n,i){return new e(t,n,i)},e.V=function(t){return S.test(t)},e.prototype.R=function(){return this.A().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.V(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.R()},e.prototype.p=function(){return 1===this.length&&"__name__"===this.get(0)},e.v=function(){return new e(["__name__"])},e.S=function(t){for(var n=[],i="",r=0,o=function(){if(0===i.length)throw new h(u.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(i),i=""},s=!1;r<t.length;){var a=t[r];if("\\"===a){if(r+1===t.length)throw new h(u.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var l=t[r+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new h(u.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else"`"===a?(s=!s,r++):"."!==a||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new h(u.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.P=function(){return new e([])},e}(C),T=function(){function t(t){this.path=t}return t.D=function(e){return new t(E.g(e))},t.C=function(e){return new t(E.g(e).u(5))},t.prototype.N=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===E.i(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.i=function(t,e){return E.i(t.path,e.path)},t.F=function(t){return t.length%2==0},t.$=function(e){return new t(new E(e.slice()))},t}();function P(t,e){if(0!==e.length)throw new h(u.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+$(e.length,"argument")+".")}function k(t,e,n){if(e.length!==n)throw new h(u.INVALID_ARGUMENT,"Function "+t+"() requires "+$(n,"argument")+", but was called with "+$(e.length,"argument")+".")}function D(t,e,n){if(e.length<n)throw new h(u.INVALID_ARGUMENT,"Function "+t+"() requires at least "+$(n,"argument")+", but was called with "+$(e.length,"argument")+".")}function O(t,e,n,i){if(e.length<n||e.length>i)throw new h(u.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+i+" arguments, but was called with "+$(e.length,"argument")+".")}function R(t,e,n,i){U(t,e,q(n)+" argument",i)}function I(t,e,n,i){void 0!==i&&R(t,e,n,i)}function L(t,e,n,i){U(t,e,n+" option",i)}function F(t,e,n,i){void 0!==i&&L(t,e,n,i)}function N(t,e,n,i,r){void 0!==i&&function(t,e,n,i,r){for(var o=[],s=0,a=r;s<a.length;s++){var l=a[s];if(l===i)return;o.push(j(l))}var c=j(i);throw new h(u.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,i,r)}function B(t,e,n,i){if(!e.some((function(t){return t===i})))throw new h(u.INVALID_ARGUMENT,"Invalid value "+j(i)+" provided to function "+t+"() for its "+q(n)+" argument. Acceptable values: "+e.join(", "));return i}function U(t,e,n,i){if(!("object"===e?V(i):"non-empty string"===e?"string"==typeof i&&""!==i:typeof i===e)){var r=j(i);throw new h(u.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+r)}}function V(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function j(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":y()}function z(t,e,n){if(void 0===n)throw new h(u.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+q(e)+" argument, but it was undefined.")}function H(t,e,n){A(e,(function(e,i){if(n.indexOf(e)<0)throw new h(u.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function G(t,e,n,i){var r=j(i);return new h(u.INVALID_ARGUMENT,"Function "+t+"() requires its "+q(n)+" argument to be a "+e+", but it was: "+r)}function W(t,e,n){if(n<=0)throw new h(u.INVALID_ARGUMENT,"Function "+t+"() requires its "+q(e)+" argument to be a positive number, but it was: "+n+".")}function q(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function $(t,e){return t+" "+e+(1===t?"":"s")}function Y(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var Q=function(){function t(){}return t.k=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var i=Y(40),r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length));return n},t}();function X(t,e){return t<e?-1:t>e?1:0}function K(t,e,n){return t.length===e.length&&t.every((function(t,i){return n(t,e[i])}))}function Z(t){return t+"\0"}var J=function(){function t(t){this.M=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.M)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.M)},t.prototype.O=function(){return 2*this.M.length},t.prototype.L=function(t){return X(this.M,t.M)},t.prototype.isEqual=function(t){return this.M===t.M},t}();J.B=new J("");var tt=function(){function t(t){this.q=t}return t.fromBase64String=function(e){try{return new t(J.fromBase64String(e))}catch(e){throw new h(u.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(J.fromUint8Array(e))},t.prototype.toBase64=function(){return this.q.toBase64()},t.prototype.toUint8Array=function(){return this.q.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.q.isEqual(t.q)},t}();function et(){if("undefined"==typeof Uint8Array)throw new h(u.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function nt(){if("undefined"==typeof atob)throw new h(u.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.fromBase64String=function(t){k("Blob.fromBase64String",arguments,1),R("Blob.fromBase64String","string",1,t),nt();try{return new e(J.fromBase64String(t))}catch(t){throw new h(u.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){if(k("Blob.fromUint8Array",arguments,1),et(),!(t instanceof Uint8Array))throw G("Blob.fromUint8Array","Uint8Array",1,t);return new e(J.fromUint8Array(t))},e.prototype.toBase64=function(){return k("Blob.toBase64",arguments,0),nt(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return k("Blob.toUint8Array",arguments,0),et(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(tt),rt=function(t,e,n,i,r,o){this.U=t,this.persistenceKey=e,this.host=n,this.ssl=i,this.forceLongPolling=r,this.W=o},ot=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"j",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.L=function(t){return X(this.projectId,t.projectId)||X(this.database,t.database)},t}(),st=function(){function t(t,e){this.K=t,this.G=e,this.H={}}return t.prototype.get=function(t){var e=this.K(t),n=this.H[e];if(void 0!==n)for(var i=0,r=n;i<r.length;i++){var o=r[i],s=o[1];if(this.G(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.K(t),i=this.H[n];if(void 0!==i){for(var r=0;r<i.length;r++)if(this.G(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e])}else this.H[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.K(t),n=this.H[e];if(void 0===n)return!1;for(var i=0;i<n.length;i++)if(this.G(n[i][0],t))return 1===n.length?delete this.H[e]:n.splice(i,1),!0;return!1},t.prototype.forEach=function(t){A(this.H,(function(e,n){for(var i=0,r=n;i<r.length;i++){var o=r[i];t(o[0],o[1])}}))},t.prototype.m=function(){return x(this.H)},t}(),at=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new h(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new h(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new h(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new h(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.Y=function(t){return this.seconds===t.seconds?X(this.nanoseconds,t.nanoseconds):X(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),lt=function(){function t(t){this.timestamp=t}return t.J=function(e){return new t(e)},t.min=function(){return new t(new at(0,0))},t.prototype.L=function(t){return this.timestamp.Y(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.X=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.Z=function(){return this.timestamp},t}();function ct(t){return null==t}function ut(t){return 0===t&&1/t==-1/0}function ht(t){return"number"==typeof t&&Number.isInteger(t)&&!ut(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var dt=function(t,e,n,i,r,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=o,this.endAt=s,this.tt=null};function pt(t,e,n,i,r,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===o&&(o=null),void 0===s&&(s=null),new dt(t,e,n,i,r,o,s)}function ft(t){var e=_(t);if(null===e.tt){var n=e.path.R();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.R()+t.op.toString()+re(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.R()+e.dir;var e})).join(","),ct(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=si(e.startAt)),e.endAt&&(n+="|ub:",n+=si(e.endAt)),e.tt=n}return e.tt}function mt(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!hi(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var i=0;i<t.filters.length;i++)if((r=t.filters[i]).op!==(o=e.filters[i]).op||!r.field.isEqual(o.field)||!te(r.value,o.value))return!1;var r,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!li(t.startAt,e.startAt)&&li(t.endAt,e.endAt)}function gt(t){return T.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}var vt,yt,bt=function(){function t(t,e,n,i,r,o,s){void 0===r&&(r=lt.min()),void 0===o&&(o=lt.min()),void 0===s&&(s=J.B),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=i,this.nt=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.st=function(e){return new t(this.target,this.targetId,this.et,e,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.it=function(e,n){return new t(this.target,this.targetId,this.et,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.rt=function(e){return new t(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,e,this.resumeToken)},t}(),_t=function(t){this.count=t};function wt(t){switch(t){case u.OK:return y();case u.CANCELLED:case u.UNKNOWN:case u.DEADLINE_EXCEEDED:case u.RESOURCE_EXHAUSTED:case u.INTERNAL:case u.UNAVAILABLE:case u.UNAUTHENTICATED:return!1;case u.INVALID_ARGUMENT:case u.NOT_FOUND:case u.ALREADY_EXISTS:case u.PERMISSION_DENIED:case u.FAILED_PRECONDITION:case u.ABORTED:case u.OUT_OF_RANGE:case u.UNIMPLEMENTED:case u.DATA_LOSS:return!0;default:return y()}}function At(t){if(void 0===t)return m("GRPC error has no .code"),u.UNKNOWN;switch(t){case vt.OK:return u.OK;case vt.CANCELLED:return u.CANCELLED;case vt.UNKNOWN:return u.UNKNOWN;case vt.DEADLINE_EXCEEDED:return u.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return u.RESOURCE_EXHAUSTED;case vt.INTERNAL:return u.INTERNAL;case vt.UNAVAILABLE:return u.UNAVAILABLE;case vt.UNAUTHENTICATED:return u.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return u.INVALID_ARGUMENT;case vt.NOT_FOUND:return u.NOT_FOUND;case vt.ALREADY_EXISTS:return u.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return u.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return u.FAILED_PRECONDITION;case vt.ABORTED:return u.ABORTED;case vt.OUT_OF_RANGE:return u.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return u.UNIMPLEMENTED;case vt.DATA_LOSS:return u.DATA_LOSS;default:return y()}}(yt=vt||(vt={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";var xt=function(){function t(t,e){this.i=t,this.root=e||Et.EMPTY}return t.prototype.ot=function(e,n){return new t(this.i,this.root.ot(e,n,this.i).copy(null,null,Et.at,null,null))},t.prototype.remove=function(e){return new t(this.i,this.root.remove(e,this.i).copy(null,null,Et.at,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.m();){var n=this.i(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.m();){var i=this.i(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.m=function(){return this.root.m()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(){return this.root.ut()},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.forEach=function(t){this.ht((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ht((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.lt=function(t){return this.root.lt(t)},t.prototype._t=function(){return new Ct(this.root,null,this.i,!1)},t.prototype.ft=function(t){return new Ct(this.root,t,this.i,!1)},t.prototype.dt=function(){return new Ct(this.root,null,this.i,!0)},t.prototype.wt=function(t){return new Ct(this.root,t,this.i,!0)},t}(),Ct=function(){function t(t,e,n,i){this.Tt=i,this.Et=[];for(var r=1;!t.m();)if(r=e?n(t.key,e):1,i&&(r*=-1),r<0)t=this.Tt?t.left:t.right;else{if(0===r){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}return t.prototype.It=function(){var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.m();)this.Et.push(t),t=t.right;else for(t=t.right;!t.m();)this.Et.push(t),t=t.left;return e},t.prototype.At=function(){return this.Et.length>0},t.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},t}(),Et=function(){function t(e,n,i,r,o){this.key=e,this.value=n,this.color=null!=i?i:t.RED,this.left=null!=r?r:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,i,r,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=o?o:this.right)},t.prototype.m=function(){return!1},t.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},t.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},t.prototype.min=function(){return this.left.m()?this:this.left.min()},t.prototype.ct=function(){return this.min().key},t.prototype.ut=function(){return this.right.m()?this.key:this.right.ut()},t.prototype.ot=function(t,e,n){var i=this,r=n(t,i.key);return(i=r<0?i.copy(null,null,null,i.left.ot(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.ot(t,e,n))).gt()},t.prototype.Pt=function(){if(this.left.m())return t.EMPTY;var e=this;return e.left.yt()||e.left.left.yt()||(e=e.Vt()),(e=e.copy(null,null,null,e.left.Pt(),null)).gt()},t.prototype.remove=function(e,n){var i,r=this;if(n(e,r.key)<0)r.left.m()||r.left.yt()||r.left.left.yt()||(r=r.Vt()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.yt()&&(r=r.bt()),r.right.m()||r.right.yt()||r.right.left.yt()||(r=r.vt()),0===n(e,r.key)){if(r.right.m())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.Pt())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.gt()},t.prototype.yt=function(){return this.color},t.prototype.gt=function(){var t=this;return t.right.yt()&&!t.left.yt()&&(t=t.St()),t.left.yt()&&t.left.left.yt()&&(t=t.bt()),t.left.yt()&&t.right.yt()&&(t=t.Dt()),t},t.prototype.Vt=function(){var t=this.Dt();return t.right.left.yt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},t.prototype.vt=function(){var t=this.Dt();return t.left.left.yt()&&(t=(t=t.bt()).Dt()),t},t.prototype.St=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},t.prototype.Nt=function(){if(this.yt()&&this.left.yt())throw y();if(this.right.yt())throw y();var t=this.left.Nt();if(t!==this.right.Nt())throw y();return t+(this.yt()?0:1)},t}();Et.EMPTY=null,Et.RED=!0,Et.at=!1,Et.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw y()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,i,r){return this},t.prototype.ot=function(t,e,n){return new Et(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.m=function(){return!0},t.prototype.ht=function(t){return!1},t.prototype.lt=function(t){return!1},t.prototype.ct=function(){return null},t.prototype.ut=function(){return null},t.prototype.yt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Nt=function(){return 0},t}());var St=function(){function t(t){this.i=t,this.data=new xt(this.i)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ct()},t.prototype.last=function(){return this.data.ut()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ht((function(e,n){return t(e),!1}))},t.prototype.Ft=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var i=n.It();if(this.i(i.key,t[1])>=0)return;e(i.key)}},t.prototype.xt=function(t,e){var n;for(n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},t.prototype.$t=function(t){var e=this.data.ft(t);return e.At()?e.It().key:null},t.prototype._t=function(){return new Mt(this.data._t())},t.prototype.ft=function(t){return new Mt(this.data.ft(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.m=function(){return this.data.m()},t.prototype.kt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),i=e.data._t();n.At();){var r=n.It().key,o=i.It().key;if(0!==this.i(r,o))return!1}return!0},t.prototype.A=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.i);return n.data=e,n},t}(),Mt=function(){function t(t){this.Mt=t}return t.prototype.It=function(){return this.Mt.It().key},t.prototype.At=function(){return this.Mt.At()},t}(),Tt=new xt(T.i);function Pt(){return Tt}function kt(){return Pt()}var Dt=new xt(T.i);function Ot(){return Dt}var Rt=new xt(T.i),It=new St(T.i);function Lt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=It,i=0,r=t;i<r.length;i++){var o=r[i];n=n.add(o)}return n}var Ft=new St(X);function Nt(){return Ft}var Bt=function(){function t(t){this.i=t?function(e,n){return t(e,n)||T.i(e.key,n.key)}:function(t,e){return T.i(t.key,e.key)},this.Ot=Ot(),this.Lt=new xt(this.i)}return t.Bt=function(e){return new t(e.i)},t.prototype.has=function(t){return null!=this.Ot.get(t)},t.prototype.get=function(t){return this.Ot.get(t)},t.prototype.first=function(){return this.Lt.ct()},t.prototype.last=function(){return this.Lt.ut()},t.prototype.m=function(){return this.Lt.m()},t.prototype.indexOf=function(t){var e=this.Ot.get(t);return e?this.Lt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Lt.ht((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ot.ot(t.key,t),e.Lt.ot(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ot.remove(t),this.Lt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Lt._t(),i=e.Lt._t();n.At();){var r=n.It().key,o=i.It().key;if(!r.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var i=new t;return i.i=this.i,i.Ot=e,i.Lt=n,i},t}(),Ut=function(){function t(){this.qt=new xt(T.i)}return t.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);n?0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):y():this.qt=this.qt.ot(e,t)},t.prototype.Ut=function(){var t=[];return this.qt.ht((function(e,n){t.push(n)})),t},t}(),Vt=function(){function t(t,e,n,i,r,o,s,a){this.query=t,this.docs=e,this.Qt=n,this.docChanges=i,this.Wt=r,this.fromCache=o,this.jt=s,this.Kt=a}return t.Gt=function(e,n,i,r){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Bt.Bt(n),o,i,r,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Wt.m()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.jt===t.jt&&this.Wt.isEqual(t.Wt)&&Wn(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Qt.isEqual(t.Qt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0},t}(),jt=function(){function t(t,e,n,i,r){this.nt=t,this.zt=e,this.Ht=n,this.Yt=i,this.Jt=r}return t.Xt=function(e,n){var i=new Map;return i.set(e,zt.Zt(e,n)),new t(lt.min(),i,Nt(),Pt(),Lt())},t}(),zt=function(){function t(t,e,n,i,r){this.resumeToken=t,this.te=e,this.ee=n,this.ne=i,this.se=r}return t.Zt=function(e,n){return new t(J.B,n,Lt(),Lt(),Lt())},t}(),Ht=function(t,e,n,i){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=i},Gt=function(t,e){this.targetId=t,this.oe=e},Wt=function(t,e,n,i){void 0===n&&(n=J.B),void 0===i&&(i=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i},qt=function(){function t(){this.ae=0,this.ce=Qt(),this.ue=J.B,this.he=!1,this.le=!0}return Object.defineProperty(t.prototype,"te",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),t.prototype.de=function(t){t.O()>0&&(this.le=!0,this.ue=t)},t.prototype.we=function(){var t=Lt(),e=Lt(),n=Lt();return this.ce.forEach((function(i,r){switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:y()}})),new zt(this.ue,this.he,t,e,n)},t.prototype.me=function(){this.le=!1,this.ce=Qt()},t.prototype.Te=function(t,e){this.le=!0,this.ce=this.ce.ot(t,e)},t.prototype.Ee=function(t){this.le=!0,this.ce=this.ce.remove(t)},t.prototype.Ie=function(){this.ae+=1},t.prototype.Ae=function(){this.ae-=1},t.prototype.Re=function(){this.le=!0,this.he=!0},t}(),$t=function(){function t(t){this.ge=t,this.Pe=new Map,this.ye=Pt(),this.Ve=Yt(),this.pe=new St(X)}return t.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var i=n[e];t.re instanceof Pn?this.ve(i,t.re):t.re instanceof kn&&this.Se(i,t.key,t.re)}for(var r=0,o=t.removedTargetIds;r<o.length;r++)this.Se(o[r],t.key,t.re)},t.prototype.De=function(t){var e=this;this.Ce(t,(function(n){var i=e.Ne(n);switch(t.state){case 0:e.Fe(n)&&i.de(t.resumeToken);break;case 1:i.Ae(),i._e||i.me(),i.de(t.resumeToken);break;case 2:i.Ae(),i._e||e.removeTarget(n);break;case 3:e.Fe(n)&&(i.Re(),i.de(t.resumeToken));break;case 4:e.Fe(n)&&(e.xe(n),i.de(t.resumeToken));break;default:y()}}))},t.prototype.Ce=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Pe.forEach((function(t,i){n.Fe(i)&&e(i)}))},t.prototype.$e=function(t){var e=t.targetId,n=t.oe.count,i=this.ke(e);if(i){var r=i.target;if(gt(r))if(0===n){var o=new T(r.path);this.Se(e,o,new kn(o,lt.min()))}else b(1===n);else this.Me(e)!==n&&(this.xe(e),this.pe=this.pe.add(e))}},t.prototype.Oe=function(t){var e=this,n=new Map;this.Pe.forEach((function(i,r){var o=e.ke(r);if(o){if(i.te&&gt(o.target)){var s=new T(o.target.path);null!==e.ye.get(s)||e.Le(r,s)||e.Se(r,s,new kn(s,t))}i.fe&&(n.set(r,i.we()),i.me())}}));var i=Lt();this.Ve.forEach((function(t,n){var r=!0;n.xt((function(t){var n=e.ke(t);return!n||2===n.et||(r=!1,!1)})),r&&(i=i.add(t))}));var r=new jt(t,n,this.pe,this.ye,i);return this.ye=Pt(),this.Ve=Yt(),this.pe=new St(X),r},t.prototype.ve=function(t,e){if(this.Fe(t)){var n=this.Le(t,e.key)?2:0;this.Ne(t).Te(e.key,n),this.ye=this.ye.ot(e.key,e),this.Ve=this.Ve.ot(e.key,this.Be(e.key).add(t))}},t.prototype.Se=function(t,e,n){if(this.Fe(t)){var i=this.Ne(t);this.Le(t,e)?i.Te(e,1):i.Ee(e),this.Ve=this.Ve.ot(e,this.Be(e).delete(t)),n&&(this.ye=this.ye.ot(e,n))}},t.prototype.removeTarget=function(t){this.Pe.delete(t)},t.prototype.Me=function(t){var e=this.Ne(t).we();return this.ge.qe(t).size+e.ee.size-e.se.size},t.prototype.Ie=function(t){this.Ne(t).Ie()},t.prototype.Ne=function(t){var e=this.Pe.get(t);return e||(e=new qt,this.Pe.set(t,e)),e},t.prototype.Be=function(t){var e=this.Ve.get(t);return e||(e=new St(X),this.Ve=this.Ve.ot(t,e)),e},t.prototype.Fe=function(t){var e=null!==this.ke(t);return e||f("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ke=function(t){var e=this.Pe.get(t);return e&&e._e?null:this.ge.Ue(t)},t.prototype.xe=function(t){var e=this;this.Pe.set(t,new qt),this.ge.qe(t).forEach((function(n){e.Se(t,n,null)}))},t.prototype.Le=function(t,e){return this.ge.qe(t).has(e)},t}();function Yt(){return new xt(T.i)}function Qt(){return new xt(T.i)}function Xt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kt(t){var e=oe(t.mapValue.fields.__local_write_time__.timestampValue);return new at(e.seconds,e.nanos)}var Zt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xt(t)?4:10:y()}function te(t,e){var n=Jt(t);if(n!==Jt(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kt(t).isEqual(Kt(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=oe(t.timestampValue),i=oe(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ae(t.bytesValue).isEqual(ae(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return se(t.geoPointValue.latitude)===se(e.geoPointValue.latitude)&&se(t.geoPointValue.longitude)===se(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return se(t.integerValue)===se(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=se(t.doubleValue),i=se(e.doubleValue);return n===i?ut(n)===ut(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return K(t.arrayValue.values||[],e.arrayValue.values||[],te);case 10:return function(t,e){var n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(w(n)!==w(i))return!1;for(var r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!te(n[r],i[r])))return!1;return!0}(t,e);default:return y()}}function ee(t,e){return void 0!==(t.values||[]).find((function(t){return te(t,e)}))}function ne(t,e){var n=Jt(t),i=Jt(e);if(n!==i)return X(n,i);switch(n){case 0:return 0;case 1:return X(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=se(t.integerValue||t.doubleValue),i=se(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return ie(t.timestampValue,e.timestampValue);case 4:return ie(Kt(t),Kt(e));case 5:return X(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ae(t),i=ae(e);return n.L(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),i=e.split("/"),r=0;r<n.length&&r<i.length;r++){var o=X(n[r],i[r]);if(0!==o)return o}return X(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=X(se(t.latitude),se(e.latitude));return 0!==n?n:X(se(t.longitude),se(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],i=e.values||[],r=0;r<n.length&&r<i.length;++r){var o=ne(n[r],i[r]);if(o)return o}return X(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},i=Object.keys(n),r=e.fields||{},o=Object.keys(r);i.sort(),o.sort();for(var s=0;s<i.length&&s<o.length;++s){var a=X(i[s],o[s]);if(0!==a)return a;var l=ne(n[i[s]],r[o[s]]);if(0!==l)return l}return X(i.length,o.length)}(t.mapValue,e.mapValue);default:throw y()}}function ie(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return X(t,e);var n=oe(t),i=oe(e),r=X(n.seconds,i.seconds);return 0!==r?r:X(n.nanos,i.nanos)}function re(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=oe(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ae(e.bytesValue).toBase64():"referenceValue"in e?T.C(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",i=!0,r=0,o=e.values||[];r<o.length;r++)i?i=!1:n+=",",n+=t(o[r]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",i=!0,r=0,o=Object.keys(e.fields||{}).sort();r<o.length;r++){var s=o[r];i?i=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):y();var n}(t)}function oe(t){if(b(!!t),"string"==typeof t){var e=0,n=Zt.exec(t);if(b(!!n),n[1]){var i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}var r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:se(t.seconds),nanos:se(t.nanos)}}function se(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ae(t){return"string"==typeof t?J.fromBase64String(t):J.fromUint8Array(t)}function le(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.R()}}function ce(t){return!!t&&"integerValue"in t}function ue(t){return!!t&&"arrayValue"in t}function he(t){return!!t&&"nullValue"in t}function de(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pe(t){return!!t&&"mapValue"in t}var fe={asc:"ASCENDING",desc:"DESCENDING"},me={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ge=function(t,e){this.U=t,this.Qe=e};function ve(t){return{integerValue:""+t}}function ye(t,e){if(t.Qe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ut(e)?"-0":e}}function be(t,e){return ht(e)?ve(e):ye(t,e)}function _e(t,e){return t.Qe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function we(t,e){return t.Qe?e.toBase64():e.toUint8Array()}function Ae(t,e){return _e(t,e.Z())}function xe(t){return b(!!t),lt.J(function(t){var e=oe(t);return new at(e.seconds,e.nanos)}(t))}function Ce(t,e){return function(t){return new E(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).R()}function Ee(t){var e=E.g(t);return b(qe(e)),e}function Se(t,e){return Ce(t.U,e.path)}function Me(t,e){var n=Ee(e);return b(n.get(1)===t.U.projectId),b(!n.get(3)&&!t.U.database||n.get(3)===t.U.database),new T(De(n))}function Te(t,e){return Ce(t.U,e)}function Pe(t){var e=Ee(t);return 4===e.length?E.P():De(e)}function ke(t){return new E(["projects",t.U.projectId,"databases",t.U.database]).R()}function De(t){return b(t.length>4&&"documents"===t.get(4)),t.u(5)}function Oe(t,e,n){return{name:Se(t,e),fields:n.proto.mapValue.fields}}function Re(t,e){var n;if(e instanceof vn)n={update:Oe(t,e.key,e.value)};else if(e instanceof xn)n={delete:Se(t,e.key)};else if(e instanceof yn)n={update:Oe(t,e.key,e.data),updateMask:We(e.We)};else if(e instanceof _n)n={transform:{document:Se(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ke)return{fieldPath:e.field.R(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ze)return{fieldPath:e.field.R(),appendMissingElements:{values:n.elements}};if(n instanceof tn)return{fieldPath:e.field.R(),removeAllFromArray:{values:n.elements}};if(n instanceof nn)return{fieldPath:e.field.R(),increment:n.je};throw y()}(0,t)}))}};else{if(!(e instanceof Cn))return y();n={verify:Se(t,e.key)}}return e.Ge.Ke||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ae(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:y()}(t,e.Ge)),n}function Ie(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?cn.updateTime(xe(t.updateTime)):void 0!==t.exists?cn.exists(t.exists):cn.ze()}(e.currentDocument):cn.ze();if(e.update){var i=Me(t,e.update.name),r=new En({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new sn((t.fieldPaths||[]).map((function(t){return M.S(t)})))}(e.updateMask);return new yn(i,r,o,n)}return new vn(i,r,n)}if(e.delete){var s=Me(t,e.delete);return new xn(s,n)}if(e.transform){var a=Me(t,e.transform.document),l=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(b("REQUEST_TIME"===e.setToServerValue),n=new Ke):"appendMissingElements"in e?n=new Ze(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new tn(e.removeAllFromArray.values||[]):"increment"in e?n=new nn(t,e.increment):y();var i=M.S(e.fieldPath);return new an(i,n)}(t,e)}));return b(!0===n.exists),new _n(a,l)}if(e.verify){var c=Me(t,e.verify);return new Cn(c,n)}return y()}function Le(t,e){return{documents:[Te(t,e.path)]}}function Fe(t,e){var n={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(n.parent=Te(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Te(t,i.h()),n.structuredQuery.from=[{collectionId:i._()}]);var r=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(de(t.value))return{unaryFilter:{field:je(t.field),op:"IS_NAN"}};if(he(t.value))return{unaryFilter:{field:je(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(de(t.value))return{unaryFilter:{field:je(t.field),op:"IS_NOT_NAN"}};if(he(t.value))return{unaryFilter:{field:je(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:je(t.field),op:Ve(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);r&&(n.structuredQuery.where=r);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:je(t.field),direction:Ue(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Qe||ct(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ne(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ne(e.endAt)),n}function Ne(t){return{before:t.before,values:t.position}}function Be(t){return new oi(t.values||[],!!t.before)}function Ue(t){return fe[t]}function Ve(t){return me[t]}function je(t){return{fieldPath:t.R()}}function ze(t){return M.S(t.fieldPath)}function He(t){return Xn.create(ze(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return y()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ge(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ze(t.unaryFilter.field);return Xn.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ze(t.unaryFilter.field);return Xn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var i=ze(t.unaryFilter.field);return Xn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var r=ze(t.unaryFilter.field);return Xn.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return y()}}function We(t){var e=[];return t.fields.forEach((function(t){return e.push(t.R())})),{fieldPaths:e}}function qe(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var $e=function(){this.He=void 0};function Ye(t,e,n){return t instanceof Ke?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ze?Je(t,e):t instanceof tn?en(t,e):function(t,e){var n=Xe(t,e),i=rn(n)+rn(t.je);return ce(n)&&ce(t.je)?ve(i):ye(t.serializer,i)}(t,e)}function Qe(t,e,n){return t instanceof Ze?Je(t,e):t instanceof tn?en(t,e):n}function Xe(t,e){return t instanceof nn?ce(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ke=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e}($e),Ze=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return i.__extends(e,t),e}($e);function Je(t,e){for(var n=on(e),i=function(t){n.some((function(e){return te(e,t)}))||n.push(t)},r=0,o=t.elements;r<o.length;r++)i(o[r]);return{arrayValue:{values:n}}}var tn=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return i.__extends(e,t),e}($e);function en(t,e){for(var n=on(e),i=function(t){n=n.filter((function(e){return!te(e,t)}))},r=0,o=t.elements;r<o.length;r++)i(o[r]);return{arrayValue:{values:n}}}var nn=function(t){function e(e,n){var i=this;return(i=t.call(this)||this).serializer=e,i.je=n,i}return i.__extends(e,t),e}($e);function rn(t){return se(t.integerValue||t.doubleValue)}function on(t){return ue(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var sn=function(){function t(t){this.fields=t,t.sort(M.i)}return t.prototype.Ye=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].T(t))return!0;return!1},t.prototype.isEqual=function(t){return K(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),an=function(t,e){this.field=t,this.transform=e},ln=function(t,e){this.version=t,this.transformResults=e},cn=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ze=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Ke",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function un(t,e){return void 0!==t.updateTime?e instanceof Pn&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Pn}var hn=function(){};function dn(t,e,n){return t instanceof vn?function(t,e,n){return new Pn(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof yn?function(t,e,n){if(!un(t.Ge,e))return new Dn(t.key,n.version);var i=bn(t,e);return new Pn(t.key,n.version,i,{hasCommittedMutations:!0})}(t,e,n):t instanceof _n?function(t,e,n){if(b(null!=n.transformResults),!un(t.Ge,e))return new Dn(t.key,n.version);var i=wn(0,e),r=function(t,e,n){var i=[];b(t.length===n.length);for(var r=0;r<n.length;r++){var o=t[r],s=o.transform,a=null;e instanceof Pn&&(a=e.field(o.field)),i.push(Qe(s,a,n[r]))}return i}(t.fieldTransforms,e,n.transformResults),o=n.version,s=An(t,i.data(),r);return new Pn(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new kn(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function pn(t,e,n,i){return t instanceof vn?function(t,e){if(!un(t.Ge,e))return e;var n=gn(e);return new Pn(t.key,n,t.value,{Je:!0})}(t,e):t instanceof yn?function(t,e){if(!un(t.Ge,e))return e;var n=gn(e),i=bn(t,e);return new Pn(t.key,n,i,{Je:!0})}(t,e):t instanceof _n?function(t,e,n,i){if(!un(t.Ge,e))return e;var r=wn(0,e),o=function(t,e,n,i){for(var r=[],o=0,s=t;o<s.length;o++){var a=s[o],l=a.transform,c=null;n instanceof Pn&&(c=n.field(a.field)),null===c&&i instanceof Pn&&(c=i.field(a.field)),r.push(Ye(l,c,e))}return r}(t.fieldTransforms,n,e,i),s=An(t,r.data(),o);return new Pn(t.key,r.version,s,{Je:!0})}(t,e,i,n):function(t,e){return un(t.Ge,e)?new kn(t.key,lt.min()):e}(t,e)}function fn(t,e){return t instanceof _n?function(t,e){for(var n=null,i=0,r=t.fieldTransforms;i<r.length;i++){var o=r[i],s=e instanceof Pn?e.field(o.field):void 0,a=Xe(o.transform,s||null);null!=a&&(n=null==n?(new Sn).set(o.field,a):n.set(o.field,a))}return n?n.Xe():null}(t,e):null}function mn(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.We.isEqual(e.We):2!==t.type||K(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ze&&e instanceof Ze||t instanceof tn&&e instanceof tn?K(t.elements,e.elements,te):t instanceof nn&&e instanceof nn?te(t.je,e.je):t instanceof Ke&&e instanceof Ke}(t.transform,e.transform)}(t,e)})))}function gn(t){return t instanceof Pn?t.version:lt.min()}var vn=function(t){function e(e,n,i){var r=this;return(r=t.call(this)||this).key=e,r.value=n,r.Ge=i,r.type=0,r}return i.__extends(e,t),e}(hn),yn=function(t){function e(e,n,i,r){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.We=i,o.Ge=r,o.type=1,o}return i.__extends(e,t),e}(hn);function bn(t,e){return function(t,e){var n=new Sn(e);return t.We.fields.forEach((function(e){if(!e.m()){var i=t.data.field(e);null!==i?n.set(e,i):n.delete(e)}})),n.Xe()}(t,e instanceof Pn?e.data():En.empty())}var _n=function(t){function e(e,n){var i=this;return(i=t.call(this)||this).key=e,i.fieldTransforms=n,i.type=2,i.Ge=cn.exists(!0),i}return i.__extends(e,t),e}(hn);function wn(t,e){return e}function An(t,e,n){for(var i=new Sn(e),r=0;r<t.fieldTransforms.length;r++)i.set(t.fieldTransforms[r].field,n[r]);return i.Xe()}var xn=function(t){function e(e,n){var i=this;return(i=t.call(this)||this).key=e,i.Ge=n,i.type=3,i}return i.__extends(e,t),e}(hn),Cn=function(t){function e(e,n){var i=this;return(i=t.call(this)||this).key=e,i.Ge=n,i.type=4,i}return i.__extends(e,t),e}(hn),En=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.m())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!pe(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t._()])||null},t.prototype.isEqual=function(t){return te(this.proto,t.proto)},t}(),Sn=function(){function t(t){void 0===t&&(t=En.empty()),this.Ze=t,this.tn=new Map}return t.prototype.set=function(t,e){return this.en(t,e),this},t.prototype.delete=function(t){return this.en(t,null),this},t.prototype.en=function(t,e){for(var n=this.tn,i=0;i<t.length-1;++i){var r=t.get(i),o=n.get(r);o instanceof Map?n=o:o&&10===Jt(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(r,o),n=o):(o=new Map,n.set(r,o),n=o)}n.set(t._(),e)},t.prototype.Xe=function(){var t=this.nn(M.P(),this.tn);return null!=t?new En(t):this.Ze},t.prototype.nn=function(t,e){var n=this,i=!1,r=this.Ze.field(t),o=pe(r)?Object.assign({},r.mapValue.fields):{};return e.forEach((function(e,r){if(e instanceof Map){var s=n.nn(t.child(r),e);null!=s&&(o[r]=s,i=!0)}else null!==e?(o[r]=e,i=!0):o.hasOwnProperty(r)&&(delete o[r],i=!0)})),i?{mapValue:{fields:o}}:null},t}();function Mn(t){var e=[];return A(t.fields||{},(function(t,n){var i=new M([t]);if(pe(n)){var r=Mn(n.mapValue).fields;if(0===r.length)e.push(i);else for(var o=0,s=r;o<s.length;o++)e.push(i.child(s[o]))}else e.push(i)})),new sn(e)}var Tn=function(t,e){this.key=t,this.version=e},Pn=function(t){function e(e,n,i,r){var o=this;return(o=t.call(this,e,n)||this).sn=i,o.Je=!!r.Je,o.hasCommittedMutations=!!r.hasCommittedMutations,o}return i.__extends(e,t),e.prototype.field=function(t){return this.sn.field(t)},e.prototype.data=function(){return this.sn},e.prototype.rn=function(){return this.sn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Tn),kn=function(t){function e(e,n,i){var r=this;return(r=t.call(this,e,n)||this).hasCommittedMutations=!(!i||!i.hasCommittedMutations),r}return i.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Tn),Dn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Tn),On=function(t,e,n,i,r,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===i&&(i=[]),void 0===r&&(r=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=i,this.limit=r,this.an=o,this.startAt=s,this.endAt=a,this.cn=null,this.un=null};function Rn(t,e,n,i,r,o,s,a){return new On(t,e,n,i,r,o,s,a)}function In(t){return new On(t)}function Ln(t){return!ct(t.limit)&&"F"===t.an}function Fn(t){return!ct(t.limit)&&"L"===t.an}function Nn(t){return t.on.length>0?t.on[0].field:null}function Bn(t){for(var e=0,n=t.filters;e<n.length;e++){var i=n[e];if(i.hn())return i.field}return null}function Un(t){return null!==t.collectionGroup}function Vn(t){var e=_(t);if(null===e.cn){e.cn=[];var n=Bn(e),i=Nn(e);if(null!==n&&null===i)n.p()||e.cn.push(new ci(n)),e.cn.push(new ci(M.v(),"asc"));else{for(var r=!1,o=0,s=e.on;o<s.length;o++){var a=s[o];e.cn.push(a),a.field.p()&&(r=!0)}if(!r){var l=e.on.length>0?e.on[e.on.length-1].dir:"asc";e.cn.push(new ci(M.v(),l))}}}return e.cn}function jn(t){var e=_(t);if(!e.un)if("F"===e.an)e.un=pt(e.path,e.collectionGroup,Vn(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],i=0,r=Vn(e);i<r.length;i++){var o=r[i];n.push(new ci(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new oi(e.endAt.position,!e.endAt.before):null,a=e.startAt?new oi(e.startAt.position,!e.startAt.before):null;e.un=pt(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.un}function zn(t,e,n){return new On(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hn(t,e){return new On(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function Gn(t,e){return new On(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function Wn(t,e){return mt(jn(t),jn(e))&&t.an===e.an}function qn(t){return ft(jn(t))+"|lt:"+t.an}function $n(t){return"Query(target="+function(t){var e=t.path.R();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.R()+" "+e.op+" "+re(e.value);var e})).join(", ")+"]"),ct(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.R()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+si(t.startAt)),t.endAt&&(e+=", endAt: "+si(t.endAt)),"Target("+e+")"}(jn(t))+"; limitType="+t.an+")"}function Yn(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.N(t.collectionGroup)&&t.path.T(n):T.F(t.path)?t.path.isEqual(n):t.path.I(n)}(t,e)&&function(t,e){for(var n=0,i=t.on;n<i.length;n++){var r=i[n];if(!r.field.p()&&null===e.field(r.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,i=t.filters;n<i.length;n++)if(!i[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ai(t.startAt,Vn(t),e)||t.endAt&&ai(t.endAt,Vn(t),e))}(t,e)}function Qn(t){return function(e,n){for(var i=!1,r=0,o=Vn(t);r<o.length;r++){var s=o[r],a=ui(s,e,n);if(0!==a)return a;i=i||s.field.p()}return 0}}var Xn=function(t){function e(e,n,i){var r=this;return(r=t.call(this)||this).field=e,r.op=n,r.value=i,r}return i.__extends(e,t),e.create=function(t,n,i){if(t.p())return"in"===n||"not-in"===n?this.ln(t,n,i):new Kn(t,n,i);if(he(i)){if("=="!==n&&"!="!==n)throw new h(u.INVALID_ARGUMENT,"Invalid query. Null only supports '==' and '!=' comparisons.");return new e(t,n,i)}if(de(i)){if("=="!==n&&"!="!==n)throw new h(u.INVALID_ARGUMENT,"Invalid query. NaN only supports '==' and '!=' comparisons.");return new e(t,n,i)}return"array-contains"===n?new ei(t,i):"in"===n?new ni(t,i):"not-in"===n?new ii(t,i):"array-contains-any"===n?new ri(t,i):new e(t,n,i)},e.ln=function(t,e,n){return"in"===e?new Zn(t,n):new Jn(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this._n(ne(e,this.value)):null!==e&&Jt(this.value)===Jt(e)&&this._n(ne(e,this.value))},e.prototype._n=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return y()}},e.prototype.hn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Kn=function(t){function e(e,n,i){var r=this;return(r=t.call(this,e,n,i)||this).key=T.C(i.referenceValue),r}return i.__extends(e,t),e.prototype.matches=function(t){var e=T.i(t.key,this.key);return this._n(e)},e}(Xn),Zn=function(t){function e(e,n){var i=this;return(i=t.call(this,e,"in",n)||this).keys=ti(0,n),i}return i.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Xn),Jn=function(t){function e(e,n){var i=this;return(i=t.call(this,e,"not-in",n)||this).keys=ti(0,n),i}return i.__extends(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Xn);function ti(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return T.C(t.referenceValue)}))}var ei=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return ue(e)&&ee(e.arrayValue,this.value)},e}(Xn),ni=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ee(this.value.arrayValue,e)},e}(Xn),ii=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){if(ee(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!ee(this.value.arrayValue,e)},e}(Xn),ri=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ue(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ee(e.value.arrayValue,t)}))},e}(Xn),oi=function(t,e){this.position=t,this.before=e};function si(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return re(t)})).join(",")}function ai(t,e,n){for(var i=0,r=0;r<t.position.length;r++){var o=e[r],s=t.position[r];if(i=o.field.p()?T.i(T.C(s.referenceValue),n.key):ne(s,n.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return t.before?i<=0:i<0}function li(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!te(t.position[n],e.position[n]))return!1;return!0}var ci=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ui(t,e,n){var i=t.field.p()?T.i(e.key,n.key):function(t,e,n){var i=e.field(t),r=n.field(t);return null!==i&&null!==r?ne(i,r):y()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return y()}}function hi(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var di=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},pi=function(){function t(t,e,n,i,r){void 0===n&&(n=1e3),void 0===i&&(i=1.5),void 0===r&&(r=6e4),this.fn=t,this.dn=e,this.wn=n,this.mn=i,this.Tn=r,this.En=0,this.In=null,this.An=Date.now(),this.reset()}return t.prototype.reset=function(){this.En=0},t.prototype.Rn=function(){this.En=this.Tn},t.prototype.gn=function(t){var e=this;this.cancel();var n=Math.floor(this.En+this.Pn()),i=Math.max(0,Date.now()-this.An),r=Math.max(0,n-i);r>0&&f("ExponentialBackoff","Backing off for "+r+" ms (base delay: "+this.En+" ms, delay with jitter: "+n+" ms, last attempt: "+i+" ms ago)"),this.In=this.fn.yn(this.dn,r,(function(){return e.An=Date.now(),t()})),this.En*=this.mn,this.En<this.wn&&(this.En=this.wn),this.En>this.Tn&&(this.En=this.Tn)},t.prototype.Vn=function(){null!==this.In&&(this.In.pn(),this.In=null)},t.prototype.cancel=function(){null!==this.In&&(this.In.cancel(),this.In=null)},t.prototype.Pn=function(){return(Math.random()-.5)*this.En},t}(),fi=function(){function t(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t((function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)}),(function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var i=this;return this.Dn&&y(),this.Dn=!0,this.Sn?this.error?this.Cn(n,this.error):this.Nn(e,this.result):new t((function(t,r){i.bn=function(n){i.Nn(e,n).next(t,r)},i.vn=function(e){i.Cn(n,e).next(t,r)}}))},t.prototype.Fn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.xn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Nn=function(e,n){return e?this.xn((function(){return e(n)})):t.resolve(n)},t.prototype.Cn=function(e,n){return e?this.xn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var i=0,r=0,o=!1;e.forEach((function(e){++i,e.next((function(){++r,o&&r===i&&t()}),(function(t){return n(t)}))})),o=!0,r===i&&t()}))},t.kn=function(e){for(var n=t.resolve(!1),i=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},r=0,o=e;r<o.length;r++)i(o[r]);return n},t.forEach=function(t,e){var n=this,i=[];return t.forEach((function(t,r){i.push(e.call(n,t,r))})),this.$n(i)},t}(),mi=function(){function t(e,n,i){this.name=e,this.version=n,this.Mn=i,12.2===t.On(s.getUA())&&m("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return f("SimpleDb","Removing database:",t),wi(window.indexedDB.deleteDatabase(t)).Fn()},t.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(t.Bn())return!0;var e=s.getUA(),n=t.On(e),i=0<n&&n<10,r=t.qn(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)},t.Bn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Un)},t.Qn=function(t,e){return t.store(e)},t.On=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.qn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Wn=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.db?[3,2]:(f("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,i){var r=indexedDB.open(n.name,n.version);r.onsuccess=function(t){e(t.target.result)},r.onblocked=function(){i(new vi(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(e){var n=e.target.error;i("VersionError"===n.name?new h(u.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new vi(t,n))},r.onupgradeneeded=function(t){f("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Mn.createOrUpgrade(t.target.result,r.transaction,t.oldVersion,n.version).next((function(){f("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=i.sent(),i.label=2;case 2:return[2,(this.jn&&(this.db.onversionchange=function(t){return n.jn(t)}),this.db)]}}))}))},t.prototype.Kn=function(t){this.jn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return i.__awaiter(this,void 0,void 0,(function(){var o,s,a,l,c;return i.__generator(this,(function(u){switch(u.label){case 0:o="readonly"===e,s=0,a=function(){var e,a,c,u,h;return i.__generator(this,(function(i){switch(i.label){case 0:++s,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,l.Wn(t)];case 2:return l.db=i.sent(),e=bi.open(l.db,t,o?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),fi.reject(t)})).Fn(),c={},a.catch((function(){})),[4,e.Gn];case 3:return[2,(c.value=(i.sent(),a),c)];case 4:return f("SimpleDb","Transaction failed with error:",(u=i.sent()).message,"Retrying:",h="FirebaseError"!==u.name&&s<3),l.close(),h?[3,5]:[2,{value:Promise.reject(u)}];case 5:return[2]}}))},l=this,u.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=u.sent()))return[2,c.value];u.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),gi=function(){function t(t){this.zn=t,this.Hn=!1,this.Yn=null}return Object.defineProperty(t.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Jn",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Hn=!0},t.prototype.Xn=function(t){this.Yn=t},t.prototype.delete=function(){return wi(this.zn.delete())},t}(),vi=function(t){function e(e,n){var i=this;return(i=t.call(this,u.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",i}return i.__extends(e,t),e}(h);function yi(t){return"IndexedDbTransactionError"===t.name}var bi=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Zn=new di,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){e.error?n.Zn.reject(new vi(t,e.error)):n.Zn.resolve()},this.transaction.onerror=function(e){var i=xi(e.target.error);n.Zn.reject(new vi(t,i))}}return t.open=function(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(e){throw new vi(n,e)}},Object.defineProperty(t.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(f("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new _i(e)},t}(),_i=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(f("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),wi(n)},t.prototype.add=function(t){return f("SimpleDb","ADD",this.store.name,t,t),wi(this.store.add(t))},t.prototype.get=function(t){var e=this;return wi(this.store.get(t)).next((function(n){return void 0===n&&(n=null),f("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return f("SimpleDb","DELETE",this.store.name,t),wi(this.store.delete(t))},t.prototype.count=function(){return f("SimpleDb","COUNT",this.store.name),wi(this.store.count())},t.prototype.ts=function(t,e){var n=this.cursor(this.options(t,e)),i=[];return this.es(n,(function(t,e){i.push(e)})).next((function(){return i}))},t.prototype.ns=function(t,e){f("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ss=!1;var i=this.cursor(n);return this.es(i,(function(t,e,n){return n.delete()}))},t.prototype.rs=function(t,e){var n;e?n=t:(n={},e=t);var i=this.cursor(n);return this.es(i,e)},t.prototype.os=function(t){var e=this.cursor({});return new fi((function(n,i){e.onerror=function(t){var e=xi(t.target.error);i(e)},e.onsuccess=function(e){var i=e.target.result;i?t(i.primaryKey,i.value).next((function(t){t?i.continue():n()})):n()}}))},t.prototype.es=function(t,e){var n=[];return new fi((function(i,r){t.onerror=function(t){r(t.target.error)},t.onsuccess=function(t){var r=t.target.result;if(r){var o=new gi(r),s=e(r.primaryKey,r.value,o);if(s instanceof fi){var a=s.catch((function(t){return o.done(),fi.reject(t)}));n.push(a)}o.Sn?i():null===o.Jn?r.continue():r.continue(o.Jn)}else i()}})).next((function(){return fi.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function wi(t){return new fi((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=xi(t.target.error);n(e)}}))}var Ai=!1;function xi(t){var e=mi.On(s.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var i=new h("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ai||(Ai=!0,setTimeout((function(){throw i}),0)),i}}return t}function Ci(){return"undefined"!=typeof window?window:null}function Ei(){return"undefined"!=typeof document?document:null}var Si=function(){function t(t,e,n,i,r){this.cs=t,this.dn=e,this.us=n,this.op=i,this.hs=r,this.ls=new di,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch((function(t){}))}return t._s=function(e,n,i,r,o){var s=new t(e,n,Date.now()+i,r,o);return s.start(i),s},t.prototype.start=function(t){var e=this;this.fs=setTimeout((function(){return e.ds()}),t)},t.prototype.pn=function(){return this.ds()},t.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new h(u.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.ds=function(){var t=this;this.cs.ws((function(){return null!==t.fs?(t.clearTimeout(),t.op().then((function(e){return t.ls.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},t}(),Mi=function(){function t(){var t=this;this.Ts=Promise.resolve(),this.Es=[],this.Is=!1,this.As=[],this.Rs=null,this.gs=!1,this.Ps=[],this.ys=new pi(this,"async_queue_retry"),this.Vs=function(){var e=Ei();e&&f("AsyncQueue","Visibility state changed to  ",e.visibilityState),t.ys.Vn()};var e=Ei();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Vs)}return Object.defineProperty(t.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),t.prototype.ws=function(t){this.enqueue(t)},t.prototype.bs=function(t){this.vs(),this.Ss(t)},t.prototype.Ds=function(){if(!this.Is){this.Is=!0;var t=Ei();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vs)}},t.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise((function(t){})):this.Ss(t)},t.prototype.Cs=function(t){var e=this;this.ws((function(){return e.Es.push(t),e.Ns()}))},t.prototype.Ns=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){switch(n.label){case 0:if(0===this.Es.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Es[0]()];case 2:return n.sent(),this.Es.shift(),this.ys.reset(),[3,4];case 3:if(!yi(t=n.sent()))throw t;return f("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Es.length>0&&this.ys.gn((function(){return e.Ns()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ss=function(t){var e=this,n=this.Ts.then((function(){return e.gs=!0,t().catch((function(t){throw e.Rs=t,e.gs=!1,m("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gs=!1,t}))}));return this.Ts=n,n},t.prototype.yn=function(t,e,n){var i=this;this.vs(),this.Ps.indexOf(t)>-1&&(e=0);var r=Si._s(this,t,e,n,(function(t){return i.Fs(t)}));return this.As.push(r),r},t.prototype.vs=function(){this.Rs&&y()},t.prototype.xs=function(){},t.prototype.$s=function(){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.Ts];case 1:e.sent(),e.label=2;case 2:if(t!==this.Ts)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.ks=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},t.prototype.Ms=function(t){var e=this;return this.$s().then((function(){e.As.sort((function(t,e){return t.us-e.us}));for(var n=0,i=e.As;n<i.length;n++){var r=i[n];if(r.pn(),"all"!==t&&r.dn===t)break}return e.$s()}))},t.prototype.Os=function(t){this.Ps.push(t)},t.prototype.Fs=function(t){var e=this.As.indexOf(t);this.As.splice(e,1)},t}();function Ti(t,e){if(m("AsyncQueue",e+": "+t),yi(t))return new h(u.UNAVAILABLE,e+": "+t);throw t}var Pi=function(){this.Ls=void 0,this.listeners=[]},ki=function(){this.Bs=new st((function(t){return qn(t)}),Wn),this.onlineState="Unknown",this.qs=new Set};function Di(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a,l,c;return i.__generator(this,(function(i){switch(i.label){case 0:if(n=_(t),o=!1,(s=n.Bs.get(r=e.query))||(o=!0,s=new Pi),!o)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),a=s,[4,n.Us(r)];case 2:return a.Ls=i.sent(),[3,4];case 3:return l=i.sent(),c=Ti(l,"Initialization of query '"+$n(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.Bs.set(r,s),s.listeners.push(e),e.Qs(n.onlineState),s.Ls&&e.Ws(s.Ls)&&Li(n),[2]}}))}))}function Oi(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a;return i.__generator(this,(function(i){return n=_(t),o=!1,(s=n.Bs.get(r=e.query))&&(a=s.listeners.indexOf(e))>=0&&(s.listeners.splice(a,1),o=0===s.listeners.length),o?[2,(n.Bs.delete(r),n.js(r))]:[2]}))}))}function Ri(t,e){for(var n=_(t),i=!1,r=0,o=e;r<o.length;r++){var s=o[r],a=n.Bs.get(s.query);if(a){for(var l=0,c=a.listeners;l<c.length;l++)c[l].Ws(s)&&(i=!0);a.Ls=s}}i&&Li(n)}function Ii(t,e,n){var i=_(t),r=i.Bs.get(e);if(r)for(var o=0,s=r.listeners;o<s.length;o++)s[o].onError(n);i.Bs.delete(e)}function Li(t){t.qs.forEach((function(t){t.next()}))}var Fi=function(){function t(t,e,n){this.query=t,this.Ks=e,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Ws=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,i=t.docChanges;n<i.length;n++){var r=i[n];3!==r.type&&e.push(r)}t=new Vt(t.query,t.docs,t.Qt,e,t.Wt,t.fromCache,t.jt,!0)}var o=!1;return this.Gs?this.Hs(t)&&(this.Ks.next(t),o=!0):this.Ys(t,this.onlineState)&&(this.Js(t),o=!0),this.zs=t,o},t.prototype.onError=function(t){this.Ks.error(t)},t.prototype.Qs=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,t)&&(this.Js(this.zs),e=!0),e},t.prototype.Ys=function(t,e){return!t.fromCache||!(this.options.Xs&&"Offline"!==e||t.docs.m()&&"Offline"!==e)},t.prototype.Hs=function(t){return t.docChanges.length>0||!!(t.jt||this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.Js=function(t){t=Vt.Gt(t.query,t.docs,t.Wt,t.fromCache),this.Gs=!0,this.Ks.next(t)},t}(),Ni=function(){function t(t){this.uid=t}return t.prototype.Zs=function(){return null!=this.uid},t.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Ni.UNAUTHENTICATED=new Ni(null),Ni.ei=new Ni("google-credentials-uid"),Ni.ni=new Ni("first-party-uid");var Bi=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.si=function(t){return n.ii(t)},this.ri=function(t){return e.oi(t)})}return t.prototype.ii=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.ri&&this.ri(t),t},t}();function Ui(t,e){return"firestore_clients_"+t+"_"+e}function Vi(t,e,n){var i="firestore_mutations_"+t+"_"+n;return e.Zs()&&(i+="_"+e.uid),i}function ji(t,e){return"firestore_targets_"+t+"_"+e}Bi.ai=-1;var zi=function(){function t(t,e,n,i){this.user=t,this.batchId=e,this.state=n,this.error=i}return t.ci=function(e,n,i){var r=JSON.parse(i),o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),s=void 0;return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(s=new h(r.error.code,r.error.message)),o?new t(e,n,r.state,s):(m("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+i),null)},t.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Hi=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ci=function(e,n){var i=JSON.parse(n),r="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),o=void 0;return r&&i.error&&(r="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(o=new h(i.error.code,i.error.message)),r?new t(e,i.state,o):(m("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Gi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ci=function(e,n){for(var i=JSON.parse(n),r="object"==typeof i&&i.activeTargetIds instanceof Array,o=Nt(),s=0;r&&s<i.activeTargetIds.length;++s)r=ht(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new t(e,o):(m("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Wi=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ci=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(m("SharedClientState","Failed to parse online state: "+e),null)},t}(),qi=function(){function t(){this.activeTargetIds=Nt()}return t.prototype.hi=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.li=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ui=function(){var t={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),$i=function(){function t(t,e,n,i,r){this.window=t,this.fn=e,this.persistenceKey=n,this._i=i,this.fi=null,this.di=null,this.si=null,this.wi=this.mi.bind(this),this.Ti=new xt(X),this.Ei=!1,this.Ii=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.Ai=Ui(this.persistenceKey,this._i),this.Ri=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ti=this.Ti.ot(this._i,new qi),this.gi=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pi=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.yi=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Vi=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wi)}return t.Ln=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,o,s,a,l,c,u,h=this;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.fi.pi()];case 1:for(t=i.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._i&&(o=this.getItem(Ui(this.persistenceKey,r)))&&(s=Gi.ci(r,o))&&(this.Ti=this.Ti.ot(s.clientId,s));for(this.bi(),(a=this.storage.getItem(this.Vi))&&(l=this.vi(a))&&this.Si(l),c=0,u=this.Ii;c<u.length;c++)this.mi(u[c]);return this.Ii=[],this.window.addEventListener("unload",(function(){return h.Di()})),this.Ei=!0,[2]}}))}))},t.prototype.oi=function(t){this.setItem(this.Ri,JSON.stringify(t))},t.prototype.Ci=function(){return this.Ni(this.Ti)},t.prototype.Fi=function(t){var e=!1;return this.Ti.forEach((function(n,i){i.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xi=function(t){this.$i(t,"pending")},t.prototype.ki=function(t,e,n){this.$i(t,e,n),this.Mi(t)},t.prototype.Oi=function(t){var e="not-current";if(this.Fi(t)){var n=this.storage.getItem(ji(this.persistenceKey,t));if(n){var i=Hi.ci(t,n);i&&(e=i.state)}}return this.Li.hi(t),this.bi(),e},t.prototype.Bi=function(t){this.Li.li(t),this.bi()},t.prototype.qi=function(t){return this.Li.activeTargetIds.has(t)},t.prototype.Ui=function(t){this.removeItem(ji(this.persistenceKey,t))},t.prototype.Qi=function(t,e,n){this.Wi(t,e,n)},t.prototype.ji=function(t,e,n){var i=this;e.forEach((function(t){i.Mi(t)})),this.currentUser=t,n.forEach((function(t){i.xi(t)}))},t.prototype.Ki=function(t){this.Gi(t)},t.prototype.Di=function(){this.Ei&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ei=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return f("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){f("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){f("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.mi=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(f("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ai)return void m("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs((function(){return i.__awaiter(e,void 0,void 0,(function(){var t,e,r,o,s,a;return i.__generator(this,(function(i){if(this.Ei){if(null!==n.key)if(this.gi.test(n.key)){if(null==n.newValue)return t=this.zi(n.key),[2,this.Hi(t,null)];if(e=this.Yi(n.key,n.newValue))return[2,this.Hi(e.clientId,e)]}else if(this.Pi.test(n.key)){if(null!==n.newValue&&(r=this.Ji(n.key,n.newValue)))return[2,this.Xi(r)]}else if(this.yi.test(n.key)){if(null!==n.newValue&&(o=this.Zi(n.key,n.newValue)))return[2,this.tr(o)]}else if(n.key===this.Vi){if(null!==n.newValue&&(s=this.vi(n.newValue)))return[2,this.Si(s)]}else n.key===this.Ri&&(a=function(t){var e=Bi.ai;if(null!=t)try{var n=JSON.parse(t);b("number"==typeof n),e=n}catch(t){m("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Bi.ai&&this.si(a)}else this.Ii.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),t.prototype.bi=function(){this.setItem(this.Ai,this.Li.ui())},t.prototype.$i=function(t,e,n){var i=new zi(this.currentUser,t,e,n),r=Vi(this.persistenceKey,this.currentUser,t);this.setItem(r,i.ui())},t.prototype.Mi=function(t){var e=Vi(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Gi=function(t){this.storage.setItem(this.Vi,JSON.stringify({clientId:this._i,onlineState:t}))},t.prototype.Wi=function(t,e,n){var i=ji(this.persistenceKey,t),r=new Hi(t,e,n);this.setItem(i,r.ui())},t.prototype.zi=function(t){var e=this.gi.exec(t);return e?e[1]:null},t.prototype.Yi=function(t,e){var n=this.zi(t);return Gi.ci(n,e)},t.prototype.Ji=function(t,e){var n=this.Pi.exec(t),i=Number(n[1]);return zi.ci(new Ni(void 0!==n[2]?n[2]:null),i,e)},t.prototype.Zi=function(t,e){var n=this.yi.exec(t),i=Number(n[1]);return Hi.ci(i,e)},t.prototype.vi=function(t){return Wi.ci(t)},t.prototype.Xi=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fi.er(t.batchId,t.state,t.error)]:(f("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tr=function(t){return this.fi.nr(t.targetId,t.state,t.error)},t.prototype.Hi=function(t,e){var n=this,i=e?this.Ti.ot(t,e):this.Ti.remove(t),r=this.Ni(this.Ti),o=this.Ni(i),s=[],a=[];return o.forEach((function(t){r.has(t)||s.push(t)})),r.forEach((function(t){o.has(t)||a.push(t)})),this.fi.sr(s,a).then((function(){n.Ti=i}))},t.prototype.Si=function(t){this.Ti.get(t.clientId)&&this.di(t.onlineState)},t.prototype.Ni=function(t){var e=Nt();return t.forEach((function(t,n){e=e.kt(n.activeTargetIds)})),e},t}(),Yi=function(){function t(){this.ir=new qi,this.rr={},this.di=null,this.si=null}return t.prototype.xi=function(t){},t.prototype.ki=function(t,e,n){},t.prototype.Oi=function(t){return this.ir.hi(t),this.rr[t]||"not-current"},t.prototype.Qi=function(t,e,n){this.rr[t]=e},t.prototype.Bi=function(t){this.ir.li(t)},t.prototype.qi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.Ui=function(t){delete this.rr[t]},t.prototype.Ci=function(){return this.ir.activeTargetIds},t.prototype.Fi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.start=function(){return this.ir=new qi,Promise.resolve()},t.prototype.ji=function(t,e,n){},t.prototype.Ki=function(t){},t.prototype.Di=function(){},t.prototype.oi=function(t){},t}(),Qi=function(){function t(t,e,n,i){this.batchId=t,this.ar=e,this.baseMutations=n,this.mutations=i}return t.prototype.cr=function(t,e,n){for(var i=n.ur,r=0;r<this.mutations.length;r++){var o=this.mutations[r];o.key.isEqual(t)&&(e=dn(o,e,i[r]))}return e},t.prototype.hr=function(t,e){for(var n=0,i=this.baseMutations;n<i.length;n++){var r=i[n];r.key.isEqual(t)&&(e=pn(r,e,e,this.ar))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var l=a[s];l.key.isEqual(t)&&(e=pn(l,e,o,this.ar))}return e},t.prototype.lr=function(t){var e=this,n=t;return this.mutations.forEach((function(i){var r=e.hr(i.key,t.get(i.key));r&&(n=n.ot(i.key,r))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Lt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&K(this.mutations,t.mutations,(function(t,e){return mn(t,e)}))&&K(this.baseMutations,t.baseMutations,(function(t,e){return mn(t,e)}))},t}(),Xi=function(){function t(t,e,n,i){this.batch=t,this._r=e,this.ur=n,this.dr=i}return t.from=function(e,n,i){b(e.mutations.length===i.length);for(var r=Rt,o=e.mutations,s=0;s<o.length;s++)r=r.ot(o[s].key,i[s].version);return new t(e,n,i,r)},t}(),Ki=function(){function t(){this.wr=new st((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.mr=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Tr},set:function(t){this.Tr=t},enumerable:!1,configurable:!0}),t.prototype.Er=function(t,e){this.Ir(),this.readTime=e,this.wr.set(t.key,t)},t.prototype.Ar=function(t,e){this.Ir(),e&&(this.readTime=e),this.wr.set(t,null)},t.prototype.Rr=function(t,e){this.Ir();var n=this.wr.get(e);return void 0!==n?fi.resolve(n):this.gr(t,e)},t.prototype.getEntries=function(t,e){return this.Pr(t,e)},t.prototype.apply=function(t){return this.Ir(),this.mr=!0,this.yr(t)},t.prototype.Ir=function(){},t}(),Zi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ji=function(){function t(){this.Vr=[]}return t.prototype.pr=function(t){this.Vr.push(t)},t.prototype.br=function(){this.Vr.forEach((function(t){return t()}))},t}(),tr=function(){function t(t,e,n){this.vr=t,this.Sr=e,this.Dr=n}return t.prototype.Cr=function(t,e){var n=this;return this.Sr.Nr(t,e).next((function(i){return n.Fr(t,e,i)}))},t.prototype.Fr=function(t,e,n){return this.vr.Rr(t,e).next((function(t){for(var i=0,r=n;i<r.length;i++)t=r[i].hr(e,t);return t}))},t.prototype.$r=function(t,e,n){var i=kt();return e.forEach((function(t,e){for(var r=0,o=n;r<o.length;r++)e=o[r].hr(t,e);i=i.ot(t,e)})),i},t.prototype.kr=function(t,e){var n=this;return this.vr.getEntries(t,e).next((function(e){return n.Mr(t,e)}))},t.prototype.Mr=function(t,e){var n=this;return this.Sr.Or(t,e).next((function(i){var r=n.$r(t,e,i),o=Pt();return r.forEach((function(t,e){e||(e=new kn(t,lt.min())),o=o.ot(t,e)})),o}))},t.prototype.Lr=function(t,e,n){return function(t){return T.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Br(t,e.path):Un(e)?this.qr(t,e,n):this.Ur(t,e,n)},t.prototype.Br=function(t,e){return this.Cr(t,new T(e)).next((function(t){var e=Ot();return t instanceof Pn&&(e=e.ot(t.key,t)),e}))},t.prototype.qr=function(t,e,n){var i=this,r=e.collectionGroup,o=Ot();return this.Dr.Qr(t,r).next((function(s){return fi.forEach(s,(function(s){var a=function(t,e){return new On(e,null,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(e,s.child(r));return i.Ur(t,a,n).next((function(t){t.forEach((function(t,e){o=o.ot(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Ur=function(t,e,n){var i,r,o=this;return this.vr.Lr(t,e,n).next((function(n){return i=n,o.Sr.Wr(t,e)})).next((function(e){return o.jr(t,r=e,i).next((function(t){i=t;for(var e=0,n=r;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var l=a[s],c=l.key,u=i.get(c),h=pn(l,u,u,o.ar);i=h instanceof Pn?i.ot(c,h):i.remove(c)}}))})).next((function(){return i.forEach((function(t,n){Yn(e,n)||(i=i.remove(t))})),i}))},t.prototype.jr=function(t,e,n){for(var i=Lt(),r=0,o=e;r<o.length;r++)for(var s=0,a=o[r].mutations;s<a.length;s++){var l=a[s];l instanceof yn&&null===n.get(l.key)&&(i=i.add(l.key))}var c=n;return this.vr.getEntries(t,i).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Pn&&(c=c.ot(t,e))})),c}))},t}(),er=function(){function t(t,e,n,i){this.targetId=t,this.fromCache=e,this.Kr=n,this.Gr=i}return t.zr=function(e,n){for(var i=Lt(),r=Lt(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}}return new t(e,n.fromCache,i,r)},t}();function nr(t,e){var n=t[1],i=e[1],r=X(t[0],e[0]);return 0===r?X(n,i):r}var ir=function(){function t(t){this.Hr=t,this.buffer=new St(nr),this.Yr=0}return t.prototype.Jr=function(){return++this.Yr},t.prototype.Xr=function(t){var e=[t,this.Jr()];if(this.buffer.size<this.Hr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();nr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),rr={Zr:!1,eo:0,no:0,so:0},or=function(){function t(t,e,n){this.io=t,this.ro=e,this.oo=n}return t.ao=function(e){return new t(e,t.co,t.uo)},t}();or.ho=-1,or.lo=1048576,or._o=41943040,or.co=10,or.uo=1e3,or.fo=new or(or._o,or.co,or.uo),or.do=new or(or.ho,0,0);var sr=function(){function t(t,e){this.wo=t,this.cs=e,this.mo=!1,this.To=null}return t.prototype.start=function(t){this.wo.params.io!==or.ho&&this.Eo(t)},t.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(t.prototype,"Ei",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),t.prototype.Eo=function(t){var e=this,n=this.mo?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.To=this.cs.yn("lru_garbage_collection",n,(function(){return i.__awaiter(e,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:this.To=null,this.mo=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Io(this.wo)];case 2:return n.sent(),[3,7];case 3:return yi(e=n.sent())?(f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,So(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Eo(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),ar=function(){function t(t,e){this.Ao=t,this.params=e}return t.prototype.Ro=function(t,e){return this.Ao.Po(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.yo=function(t,e){var n=this;if(0===e)return fi.resolve(Bi.ai);var i=new ir(e);return this.Ao.Ce(t,(function(t){return i.Xr(t.sequenceNumber)})).next((function(){return n.Ao.Vo(t,(function(t){return i.Xr(t)}))})).next((function(){return i.maxValue}))},t.prototype.po=function(t,e,n){return this.Ao.po(t,e,n)},t.prototype.bo=function(t,e){return this.Ao.bo(t,e)},t.prototype.vo=function(t,e){var n=this;return this.params.io===or.ho?(f("LruGarbageCollector","Garbage collection skipped; disabled"),fi.resolve(rr)):this.So(t).next((function(i){return i<n.params.io?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+n.params.io),rr):n.Do(t,e)}))},t.prototype.So=function(t){return this.Ao.So(t)},t.prototype.Do=function(t,e){var n,i,r,s,a,l,c,u=this,h=Date.now();return this.Ro(t,this.params.ro).next((function(e){return e>u.params.oo?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+u.params.oo+" from "+e),i=u.params.oo):i=e,s=Date.now(),u.yo(t,i)})).next((function(i){return n=i,a=Date.now(),u.po(t,n,e)})).next((function(e){return r=e,l=Date.now(),u.bo(t,n)})).next((function(t){return c=Date.now(),p()<=o.LogLevel.DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-h)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+r+" targets in "+(l-a)+"ms\n\tRemoved "+t+" documents in "+(c-l)+"ms\nTotal Duration: "+(c-h)+"ms"),fi.resolve({Zr:!0,eo:i,no:r,so:t})}))},t}();function lr(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ur(e)),e=cr(t.get(n),e);return ur(e)}function cr(t,e){for(var n=e,i=t.length,r=0;r<i;r++){var o=t.charAt(r);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function ur(t){return t+"\x01\x01"}function hr(t){var e=t.length;if(b(e>=2),2===e)return b("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),E.P();for(var n=e-2,i=[],r="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&y(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),l=void 0;0===r.length?l=a:(l=r+=a,r=""),i.push(l);break;case"\x10":r+=t.substring(o,s),r+="\0";break;case"\x11":r+=t.substring(o,s+1);break;default:y()}o=s+2}return new E(i)}var dr=function(t){this.Co=t};function pr(t,e){if(e.document)return function(t,e,n){var i=Me(t,e.name),r=xe(e.updateTime),o=new En({mapValue:{fields:e.fields}});return new Pn(i,r,o,{hasCommittedMutations:!!n})}(t.Co,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=T.$(e.noDocument.path),i=yr(e.noDocument.readTime);return new kn(n,i,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var r=T.$(e.unknownDocument.path),o=yr(e.unknownDocument.version);return new Dn(r,o)}return y()}function fr(t,e,n){var i=mr(n),r=e.key.path.h().A();if(e instanceof Pn){var o=function(t,e){return{name:Se(t,e.key),fields:e.rn().mapValue.fields,updateTime:_e(t,e.version.Z())}}(t.Co,e);return new Gr(null,null,o,e.hasCommittedMutations,i,r)}if(e instanceof kn){var s=e.key.path.A(),a=vr(e.version),l=e.hasCommittedMutations;return new Gr(null,new zr(s,a),null,l,i,r)}if(e instanceof Dn){var c=e.key.path.A(),u=vr(e.version);return new Gr(new Hr(c,u),null,null,!0,i,r)}return y()}function mr(t){var e=t.Z();return[e.seconds,e.nanoseconds]}function gr(t){var e=new at(t[0],t[1]);return lt.J(e)}function vr(t){var e=t.Z();return new Nr(e.seconds,e.nanoseconds)}function yr(t){var e=new at(t.seconds,t.nanoseconds);return lt.J(e)}function br(t,e){var n=(e.baseMutations||[]).map((function(e){return Ie(t.Co,e)})),i=e.mutations.map((function(e){return Ie(t.Co,e)})),r=at.fromMillis(e.localWriteTimeMs);return new Qi(e.batchId,r,n,i)}function _r(t){var e,n,i=yr(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?yr(t.lastLimboFreeSnapshotVersion):lt.min();return void 0!==t.query.documents?(b(1===(n=t.query).documents.length),e=jn(In(Pe(n.documents[0])))):e=function(t){var e=Pe(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){b(1===i);var o=n.from[0];o.allDescendants?r=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[Ge(e)]:void 0!==e.fieldFilter?[He(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):y():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new ci(ze(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var l=null;n.limit&&(l=function(t){var e;return ct(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Be(n.startAt));var u=null;return n.endAt&&(u=Be(n.endAt)),jn(Rn(e,r,a,s,l,"F",c,u))}(t.query),new bt(e,t.targetId,0,t.lastListenSequenceNumber,i,r,J.fromBase64String(t.resumeToken))}function wr(t,e){var n,i=vr(e.nt),r=vr(e.lastLimboFreeSnapshotVersion);n=gt(e.target)?Le(t.Co,e.target):Fe(t.Co,e.target);var o=e.resumeToken.toBase64();return new qr(e.targetId,ft(e.target),i,o,e.sequenceNumber,r,n)}var Ar=function(){function t(t,e,n,i){this.userId=t,this.serializer=e,this.Dr=n,this.No=i,this.Fo={}}return t.xo=function(e,n,i,r){return b(""!==e.uid),new t(e.Zs()?e.uid:"",n,i,r)},t.prototype.$o=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Er(t).rs({index:Vr.userMutationsIndex,range:n},(function(t,n,i){e=!1,i.done()})).next((function(){return e}))},t.prototype.ko=function(t,e,n,i){var r=this,o=Sr(t),s=Er(t);return s.add({}).next((function(a){b("number"==typeof a);for(var l=new Qi(a,e,n,i),c=function(t,e,n){var i=n.baseMutations.map((function(e){return Re(t.Co,e)})),r=n.mutations.map((function(e){return Re(t.Co,e)}));return new Vr(e,n.batchId,n.ar.toMillis(),i,r)}(r.serializer,r.userId,l),u=[],h=new St((function(t,e){return X(t.R(),e.R())})),d=0,p=i;d<p.length;d++){var f=p[d],m=jr.key(r.userId,f.key.path,a);h=h.add(f.key.path.h()),u.push(s.put(c)),u.push(o.put(m,jr.PLACEHOLDER))}return h.forEach((function(e){u.push(r.Dr.Mo(t,e))})),t.pr((function(){r.Fo[a]=l.keys()})),fi.$n(u).next((function(){return l}))}))},t.prototype.Oo=function(t,e){var n=this;return Er(t).get(e).next((function(t){return t?(b(t.userId===n.userId),br(n.serializer,t)):null}))},t.prototype.Lo=function(t,e){var n=this;return this.Fo[e]?fi.resolve(this.Fo[e]):this.Oo(t,e).next((function(t){if(t){var i=t.keys();return n.Fo[e]=i,i}return null}))},t.prototype.Bo=function(t,e){var n=this,i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Er(t).rs({index:Vr.userMutationsIndex,range:r},(function(t,e,r){e.userId===n.userId&&(b(e.batchId>=i),o=br(n.serializer,e)),r.done()})).next((function(){return o}))},t.prototype.qo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Er(t).rs({index:Vr.userMutationsIndex,range:e,reverse:!0},(function(t,e,i){n=e.batchId,i.done()})).next((function(){return n}))},t.prototype.Uo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Er(t).ts(Vr.userMutationsIndex,n).next((function(t){return t.map((function(t){return br(e.serializer,t)}))}))},t.prototype.Nr=function(t,e){var n=this,i=jr.prefixForPath(this.userId,e.path),r=IDBKeyRange.lowerBound(i),o=[];return Sr(t).rs({range:r},(function(i,r,s){var a=i[0],l=i[2],c=hr(i[1]);if(a===n.userId&&e.path.isEqual(c))return Er(t).get(l).next((function(t){if(!t)throw y();b(t.userId===n.userId),o.push(br(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.Or=function(t,e){var n=this,i=new St(X),r=[];return e.forEach((function(e){var o=jr.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Sr(t).rs({range:s},(function(t,r,o){var s=t[0],a=t[2],l=hr(t[1]);s===n.userId&&e.path.isEqual(l)?i=i.add(a):o.done()}));r.push(a)})),fi.$n(r).next((function(){return n.Qo(t,i)}))},t.prototype.Wr=function(t,e){var n=this,i=e.path,r=i.length+1,o=jr.prefixForPath(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new St(X);return Sr(t).rs({range:s},(function(t,e,o){var s=t[0],l=t[2],c=hr(t[1]);s===n.userId&&i.T(c)?c.length===r&&(a=a.add(l)):o.done()})).next((function(){return n.Qo(t,a)}))},t.prototype.Qo=function(t,e){var n=this,i=[],r=[];return e.forEach((function(e){r.push(Er(t).get(e).next((function(t){if(null===t)throw y();b(t.userId===n.userId),i.push(br(n.serializer,t))})))})),fi.$n(r).next((function(){return i}))},t.prototype.Wo=function(t,e){var n=this;return Cr(t.jo,this.userId,e).next((function(i){return t.pr((function(){n.Ko(e.batchId)})),fi.forEach(i,(function(e){return n.No.Go(t,e)}))}))},t.prototype.Ko=function(t){delete this.Fo[t]},t.prototype.zo=function(t){var e=this;return this.$o(t).next((function(n){if(!n)return fi.resolve();var i=IDBKeyRange.lowerBound(jr.prefixForUser(e.userId)),r=[];return Sr(t).rs({range:i},(function(t,n,i){if(t[0]===e.userId){var o=hr(t[1]);r.push(o)}else i.done()})).next((function(){b(0===r.length)}))}))},t.prototype.Ho=function(t,e){return xr(t,this.userId,e)},t.prototype.Yo=function(t){var e=this;return Mr(t).get(this.userId).next((function(t){return t||new Ur(e.userId,-1,"")}))},t}();function xr(t,e,n){var i=jr.prefixForPath(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return Sr(t).rs({range:o,ss:!0},(function(t,n,i){t[0]===e&&t[1]===r&&(s=!0),i.done()})).next((function(){return s}))}function Cr(t,e,n){var i=t.store(Vr.store),r=t.store(jr.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,l=i.rs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(l.next((function(){b(1===a)})));for(var c=[],u=0,h=n.mutations;u<h.length;u++){var d=h[u],p=jr.key(e,d.key.path,n.batchId);o.push(r.delete(p)),c.push(d.key)}return fi.$n(o).next((function(){return c}))}function Er(t){return lo.Qn(t,Vr.store)}function Sr(t){return lo.Qn(t,jr.store)}function Mr(t){return lo.Qn(t,Ur.store)}var Tr=function(){function t(t,e){this.serializer=t,this.Dr=e}return t.prototype.Er=function(t,e,n){return Dr(t).put(Or(e),n)},t.prototype.Ar=function(t,e){var n=Dr(t),i=Or(e);return n.delete(i)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(i){return i.byteSize+=e,n.Jo(t,i)}))},t.prototype.Rr=function(t,e){var n=this;return Dr(t).get(Or(e)).next((function(t){return n.Xo(t)}))},t.prototype.Zo=function(t,e){var n=this;return Dr(t).get(Or(e)).next((function(t){var e=n.Xo(t);return e?{ta:e,size:Rr(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,i=kt();return this.ea(t,e,(function(t,e){var r=n.Xo(e);i=i.ot(t,r)})).next((function(){return i}))},t.prototype.na=function(t,e){var n=this,i=kt(),r=new xt(T.i);return this.ea(t,e,(function(t,e){var o=n.Xo(e);o?(i=i.ot(t,o),r=r.ot(t,Rr(e))):(i=i.ot(t,null),r=r.ot(t,0))})).next((function(){return{sa:i,ia:r}}))},t.prototype.ea=function(t,e,n){if(e.m())return fi.resolve();var i=IDBKeyRange.bound(e.first().path.A(),e.last().path.A()),r=e._t(),o=r.It();return Dr(t).rs({range:i},(function(t,e,i){for(var s=T.$(t);o&&T.i(o,s)<0;)n(o,null),o=r.It();o&&o.isEqual(s)&&(n(o,e),o=r.At()?r.It():null),o?i.Xn(o.path.A()):i.done()})).next((function(){for(;o;)n(o,null),o=r.At()?r.It():null}))},t.prototype.Lr=function(t,e,n){var i=this,r=Ot(),o=e.path.length+1,s={};if(n.isEqual(lt.min())){var a=e.path.A();s.range=IDBKeyRange.lowerBound(a)}else{var l=e.path.A(),c=mr(n);s.range=IDBKeyRange.lowerBound([l,c],!0),s.index=Gr.collectionReadTimeIndex}return Dr(t).rs(s,(function(t,n,s){if(t.length===o){var a=pr(i.serializer,n);e.path.T(a.key.path)?a instanceof Pn&&Yn(e,a)&&(r=r.ot(a.key,a)):s.done()}})).next((function(){return r}))},t.prototype.ra=function(t){return new Pr(this,!!t&&t.oa)},t.prototype.aa=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return kr(t).get(Wr.key).next((function(t){return b(!!t),t}))},t.prototype.Jo=function(t,e){return kr(t).put(Wr.key,e)},t.prototype.Xo=function(t){if(t){var e=pr(this.serializer,t);return e instanceof kn&&e.version.isEqual(lt.min())?null:e}return null},t}(),Pr=function(t){function e(e,n){var i=this;return(i=t.call(this)||this).ca=e,i.oa=n,i.ua=new st((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),i}return i.__extends(e,t),e.prototype.yr=function(t){var e=this,n=[],i=0,r=new St((function(t,e){return X(t.R(),e.R())}));return this.wr.forEach((function(o,s){var a=e.ua.get(o);if(s){var l=fr(e.ca.serializer,s,e.readTime);r=r.add(o.path.h());var c=Rr(l);i+=c-a,n.push(e.ca.Er(t,o,l))}else if(i-=a,e.oa){var u=fr(e.ca.serializer,new kn(o,lt.min()),e.readTime);n.push(e.ca.Er(t,o,u))}else n.push(e.ca.Ar(t,o))})),r.forEach((function(i){n.push(e.ca.Dr.Mo(t,i))})),n.push(this.ca.updateMetadata(t,i)),fi.$n(n)},e.prototype.gr=function(t,e){var n=this;return this.ca.Zo(t,e).next((function(t){return null===t?(n.ua.set(e,0),null):(n.ua.set(e,t.size),t.ta)}))},e.prototype.Pr=function(t,e){var n=this;return this.ca.na(t,e).next((function(t){var e=t.sa;return t.ia.forEach((function(t,e){n.ua.set(t,e)})),e}))},e}(Ki);function kr(t){return lo.Qn(t,Wr.store)}function Dr(t){return lo.Qn(t,Gr.store)}function Or(t){return t.path.A()}function Rr(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw y();e=t.noDocument}return JSON.stringify(e).length}var Ir=function(){function t(){this.ha=new Lr}return t.prototype.Mo=function(t,e){return this.ha.add(e),fi.resolve()},t.prototype.Qr=function(t,e){return fi.resolve(this.ha.getEntries(e))},t}(),Lr=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t._(),n=t.h(),i=this.index[e]||new St(E.i),r=!i.has(n);return this.index[e]=i.add(n),r},t.prototype.has=function(t){var e=t._(),n=t.h(),i=this.index[e];return i&&i.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new St(E.i)).A()},t}(),Fr=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,i){var r=this;b(n<i&&n>=0&&i<=10);var o=new bi("createOrUpgrade",e);n<1&&i>=1&&(function(t){t.createObjectStore(Br.store)}(t),function(t){t.createObjectStore(Ur.store,{keyPath:Ur.keyPath}),t.createObjectStore(Vr.store,{keyPath:Vr.keyPath,autoIncrement:!0}).createIndex(Vr.userMutationsIndex,Vr.userMutationsKeyPath,{unique:!0}),t.createObjectStore(jr.store)}(t),Xr(t),function(t){t.createObjectStore(Gr.store)}(t));var s=fi.resolve();return n<3&&i>=3&&(0!==n&&(function(t){t.deleteObjectStore($r.store),t.deleteObjectStore(qr.store),t.deleteObjectStore(Yr.store)}(t),Xr(t)),s=s.next((function(){return function(t){var e=t.store(Yr.store),n=new Yr(0,0,lt.min().Z(),0);return e.put(Yr.key,n)}(o)}))),n<4&&i>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Vr.store).ts().next((function(n){t.deleteObjectStore(Vr.store),t.createObjectStore(Vr.store,{keyPath:Vr.keyPath,autoIncrement:!0}).createIndex(Vr.userMutationsIndex,Vr.userMutationsKeyPath,{unique:!0});var i=e.store(Vr.store),r=n.map((function(t){return i.put(t)}));return fi.$n(r)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Kr.store,{keyPath:Kr.keyPath})}(t)}))),n<5&&i>=5&&(s=s.next((function(){return r.removeAcknowledgedMutations(o)}))),n<6&&i>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Wr.store)}(t),r.addDocumentGlobal(o)}))),n<7&&i>=7&&(s=s.next((function(){return r.ensureSequenceNumbers(o)}))),n<8&&i>=8&&(s=s.next((function(){return r.createCollectionParentIndex(t,o)}))),n<9&&i>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Gr.store);e.createIndex(Gr.readTimeIndex,Gr.readTimeIndexPath,{unique:!1}),e.createIndex(Gr.collectionReadTimeIndex,Gr.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&i>=10&&(s=s.next((function(){return r.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Gr.store).rs((function(t,n){e+=Rr(n)})).next((function(){var n=new Wr(e);return t.store(Wr.store).put(Wr.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Ur.store),i=t.store(Vr.store);return n.ts().next((function(n){return fi.forEach(n,(function(n){var r=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return i.ts(Vr.userMutationsIndex,r).next((function(i){return fi.forEach(i,(function(i){b(i.userId===n.userId);var r=br(e.serializer,i);return Cr(t,n.userId,r).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store($r.store),n=t.store(Gr.store);return t.store(Yr.store).get(Yr.key).next((function(t){var i=[];return n.rs((function(n,r){var o=new E(n),s=function(t){return[0,lr(t)]}(o);i.push(e.get(s).next((function(n){return n?fi.resolve():function(n){return e.put(new $r(0,lr(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return fi.$n(i)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Qr.store,{keyPath:Qr.keyPath});var n=e.store(Qr.store),i=new Lr,r=function(t){if(i.add(t)){var e=t._(),r=t.h();return n.put({collectionId:e,parent:lr(r)})}};return e.store(Gr.store).rs({ss:!0},(function(t,e){var n=new E(t);return r(n.h())})).next((function(){return e.store(jr.store).rs({ss:!0},(function(t,e){var n=hr(t[1]);return r(n.h())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(qr.store);return n.rs((function(t,i){var r=_r(i),o=wr(e.serializer,r);return n.put(o)}))},t}(),Nr=function(t,e){this.seconds=t,this.nanoseconds=e},Br=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Br.store="owner",Br.key="owner";var Ur=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Ur.store="mutationQueues",Ur.keyPath="userId";var Vr=function(t,e,n,i,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=i,this.mutations=r};Vr.store="mutations",Vr.keyPath="batchId",Vr.userMutationsIndex="userMutationsIndex",Vr.userMutationsKeyPath=["userId","batchId"];var jr=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,lr(e)]},t.key=function(t,e,n){return[t,lr(e),n]},t}();jr.store="documentMutations",jr.PLACEHOLDER=new jr;var zr=function(t,e){this.path=t,this.readTime=e},Hr=function(t,e){this.path=t,this.version=e},Gr=function(t,e,n,i,r,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=i,this.readTime=r,this.parentPath=o};Gr.store="remoteDocuments",Gr.readTimeIndex="readTimeIndex",Gr.readTimeIndexPath="readTime",Gr.collectionReadTimeIndex="collectionReadTimeIndex",Gr.collectionReadTimeIndexPath=["parentPath","readTime"];var Wr=function(t){this.byteSize=t};Wr.store="remoteDocumentGlobal",Wr.key="remoteDocumentGlobalKey";var qr=function(t,e,n,i,r,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=i,this.lastListenSequenceNumber=r,this.lastLimboFreeSnapshotVersion=o,this.query=s};qr.store="targets",qr.keyPath="targetId",qr.queryTargetsIndexName="queryTargetsIndex",qr.queryTargetsKeyPath=["canonicalId","targetId"];var $r=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};$r.store="targetDocuments",$r.keyPath=["targetId","path"],$r.documentTargetsIndex="documentTargetsIndex",$r.documentTargetsKeyPath=["path","targetId"];var Yr=function(t,e,n,i){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=i};Yr.key="targetGlobalKey",Yr.store="targetGlobal";var Qr=function(t,e){this.collectionId=t,this.parent=e};function Xr(t){t.createObjectStore($r.store,{keyPath:$r.keyPath}).createIndex($r.documentTargetsIndex,$r.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(qr.store,{keyPath:qr.keyPath}).createIndex(qr.queryTargetsIndexName,qr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Yr.store)}Qr.store="collectionParents",Qr.keyPath=["collectionId","parent"];var Kr=function(t,e,n,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=i};Kr.store="clientMetadata",Kr.keyPath="clientId";var Zr=i.__spreadArrays(i.__spreadArrays(i.__spreadArrays([Ur.store,Vr.store,jr.store,Gr.store,qr.store,Br.store,Yr.store,$r.store],[Kr.store]),[Wr.store]),[Qr.store]),Jr=function(){function t(){this.la=new Lr}return t.prototype.Mo=function(t,e){var n=this;if(!this.la.has(e)){var i=e._(),r=e.h();t.pr((function(){n.la.add(e)}));var o={collectionId:i,parent:lr(r)};return to(t).put(o)}return fi.resolve()},t.prototype.Qr=function(t,e){var n=[],i=IDBKeyRange.bound([e,""],[Z(e),""],!1,!0);return to(t).ts(i).next((function(t){for(var i=0,r=t;i<r.length;i++){var o=r[i];if(o.collectionId!==e)break;n.push(hr(o.parent))}return n}))},t}();function to(t){return lo.Qn(t,Qr.store)}var eo=function(){function t(t){this._a=t}return t.prototype.next=function(){return this._a+=2,this._a},t.fa=function(){return new t(0)},t.da=function(){return new t(-1)},t}(),no=function(){function t(t,e){this.No=t,this.serializer=e}return t.prototype.wa=function(t){var e=this;return this.ma(t).next((function(n){var i=new eo(n.highestTargetId);return n.highestTargetId=i.next(),e.Ta(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ea=function(t){return this.ma(t).next((function(t){return lt.J(new at(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ia=function(t){return this.ma(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Aa=function(t,e,n){var i=this;return this.ma(t).next((function(r){return r.highestListenSequenceNumber=e,n&&(r.lastRemoteSnapshotVersion=n.Z()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),i.Ta(t,r)}))},t.prototype.Ra=function(t,e){var n=this;return this.ga(t,e).next((function(){return n.ma(t).next((function(i){return i.targetCount+=1,n.Pa(e,i),n.Ta(t,i)}))}))},t.prototype.ya=function(t,e){return this.ga(t,e)},t.prototype.Va=function(t,e){var n=this;return this.pa(t,e.targetId).next((function(){return io(t).delete(e.targetId)})).next((function(){return n.ma(t)})).next((function(e){return b(e.targetCount>0),e.targetCount-=1,n.Ta(t,e)}))},t.prototype.po=function(t,e,n){var i=this,r=0,o=[];return io(t).rs((function(s,a){var l=_r(a);l.sequenceNumber<=e&&null===n.get(l.targetId)&&(r++,o.push(i.Va(t,l)))})).next((function(){return fi.$n(o)})).next((function(){return r}))},t.prototype.Ce=function(t,e){return io(t).rs((function(t,n){var i=_r(n);e(i)}))},t.prototype.ma=function(t){return ro(t).get(Yr.key).next((function(t){return b(null!==t),t}))},t.prototype.Ta=function(t,e){return ro(t).put(Yr.key,e)},t.prototype.ga=function(t,e){return io(t).put(wr(this.serializer,e))},t.prototype.Pa=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.ba=function(t){return this.ma(t).next((function(t){return t.targetCount}))},t.prototype.va=function(t,e){var n=ft(e),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),r=null;return io(t).rs({range:i,index:qr.queryTargetsIndexName},(function(t,n,i){var o=_r(n);mt(e,o.target)&&(r=o,i.done())})).next((function(){return r}))},t.prototype.Sa=function(t,e,n){var i=this,r=[],o=oo(t);return e.forEach((function(e){var s=lr(e.path);r.push(o.put(new $r(n,s))),r.push(i.No.Da(t,n,e))})),fi.$n(r)},t.prototype.Ca=function(t,e,n){var i=this,r=oo(t);return fi.forEach(e,(function(e){var o=lr(e.path);return fi.$n([r.delete([n,o]),i.No.Na(t,n,e)])}))},t.prototype.pa=function(t,e){var n=oo(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(i)},t.prototype.Fa=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),i=oo(t),r=Lt();return i.rs({range:n,ss:!0},(function(t,e,n){var i=hr(t[1]),o=new T(i);r=r.add(o)})).next((function(){return r}))},t.prototype.Ho=function(t,e){var n=lr(e.path),i=IDBKeyRange.bound([n],[Z(n)],!1,!0),r=0;return oo(t).rs({index:$r.documentTargetsIndex,ss:!0,range:i},(function(t,e,n){0!==t[0]&&(r++,n.done())})).next((function(){return r>0}))},t.prototype.Ue=function(t,e){return io(t).get(e).next((function(t){return t?_r(t):null}))},t}();function io(t){return lo.Qn(t,qr.store)}function ro(t){return lo.Qn(t,Yr.store)}function oo(t){return lo.Qn(t,$r.store)}var so="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ao=function(t){function e(e,n){var i=this;return(i=t.call(this)||this).jo=e,i.xa=n,i}return i.__extends(e,t),e}(Ji),lo=function(){function t(e,n,i,r,o,s,a,l,c,d){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.fn=o,this.window=s,this.document=a,this.$a=c,this.ka=d,this.Ma=null,this.Oa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Qa=function(t){return Promise.resolve()},!t.Ln())throw new h(u.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new ho(this,r),this.Wa=n+"main",this.serializer=new dr(l),this.ja=new mi(this.Wa,10,new Fr(this.serializer)),this.Ka=new no(this.No,this.serializer),this.Dr=new Jr,this.vr=function(t,e){return new Tr(t,e)}(this.serializer,this.Dr),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===d&&m("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Qn=function(t,e){if(t instanceof ao)return mi.Qn(t.jo,e);throw y()},t.prototype.start=function(){var t=this;return this.za().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new h(u.FAILED_PRECONDITION,so);return t.Ha(),t.Ya(),t.Ja(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Ka.Ia(e)}))})).then((function(e){t.Ma=new Bi(e,t.$a)})).then((function(){t.Oa=!0})).catch((function(e){return t.ja&&t.ja.close(),Promise.reject(e)}))},t.prototype.Xa=function(t){var e=this;return this.Qa=function(n){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){return this.Ei?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Za=function(t){var e=this;this.ja.Kn((function(n){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.tc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws((function(){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Ei?[4,this.za()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.za=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return uo(e).put(new Kr(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.ec(e).next((function(e){e||(t.isPrimary=!1,t.fn.Cs((function(){return t.Qa(!1)})))}))})).next((function(){return t.nc(e)})).next((function(n){return t.isPrimary&&!n?t.sc(e).next((function(){return!1})):!!n&&t.ic(e).next((function(){return!0}))}))})).catch((function(e){if(yi(e))return f("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.fn.Cs((function(){return t.Qa(e)})),t.isPrimary=e}))},t.prototype.ec=function(t){var e=this;return co(t).get(Br.key).next((function(t){return fi.resolve(e.rc(t))}))},t.prototype.oc=function(t){return uo(t).delete(this.clientId)},t.prototype.ac=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o=this;return i.__generator(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.cc(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Qn(e,Kr.store);return n.ts().next((function(t){var e=o.uc(t,18e5),i=t.filter((function(t){return-1===e.indexOf(t)}));return fi.forEach(i,(function(t){return n.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(e=i.sent(),this.Ga)for(n=0,r=e;n<r.length;n++)this.Ga.removeItem(this.hc(r[n].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.Ja=function(){var t=this;this.qa=this.fn.yn("client_metadata_refresh",4e3,(function(){return t.za().then((function(){return t.ac()})).then((function(){return t.Ja()}))}))},t.prototype.rc=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.nc=function(t){var e=this;return this.ka?fi.resolve(!0):co(t).get(Br.key).next((function(n){if(null!==n&&e.cc(n.leaseTimestampMs,5e3)&&!e.lc(n.ownerId)){if(e.rc(n)&&e.networkEnabled)return!0;if(!e.rc(n)){if(!n.allowTabSynchronization)throw new h(u.FAILED_PRECONDITION,so);return!1}}return!(!e.networkEnabled||!e.inForeground)||uo(t).ts().next((function(t){return void 0===e.uc(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&f("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Di=function(){return i.__awaiter(this,void 0,void 0,(function(){var t=this;return i.__generator(this,(function(e){switch(e.label){case 0:return this.Oa=!1,this._c(),this.qa&&(this.qa.cancel(),this.qa=null),this.fc(),this.dc(),[4,this.ja.runTransaction("shutdown","readwrite",[Br.store,Kr.store],(function(e){var n=new ao(e,Bi.ai);return t.sc(n).next((function(){return t.oc(n)}))}))];case 1:return e.sent(),this.ja.close(),this.wc(),[2]}}))}))},t.prototype.uc=function(t,e){var n=this;return t.filter((function(t){return n.cc(t.updateTimeMs,e)&&!n.lc(t.clientId)}))},t.prototype.pi=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return uo(e).ts().next((function(e){return t.uc(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),t.prototype.mc=function(t){return Ar.xo(t,this.serializer,this.Dr,this.No)},t.prototype.Tc=function(){return this.Ka},t.prototype.Ec=function(){return this.vr},t.prototype.Ic=function(){return this.Dr},t.prototype.runTransaction=function(t,e,n){var i,r=this;return f("IndexedDbPersistence","Starting transaction:",t),this.ja.runTransaction(t,"readonly"===e?"readonly":"readwrite",Zr,(function(o){return i=new ao(o,r.Ma?r.Ma.next():Bi.ai),"readwrite-primary"===e?r.ec(i).next((function(t){return!!t||r.nc(i)})).next((function(e){if(!e)throw m("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.fn.Cs((function(){return r.Qa(!1)})),new h(u.FAILED_PRECONDITION,Zi);return n(i)})).next((function(t){return r.ic(i).next((function(){return t}))})):r.Ac(i).next((function(){return n(i)}))})).then((function(t){return i.br(),t}))},t.prototype.Ac=function(t){var e=this;return co(t).get(Br.key).next((function(t){if(null!==t&&e.cc(t.leaseTimestampMs,5e3)&&!e.lc(t.ownerId)&&!e.rc(t)&&!(e.ka||e.allowTabSynchronization&&t.allowTabSynchronization))throw new h(u.FAILED_PRECONDITION,so)}))},t.prototype.ic=function(t){var e=new Br(this.clientId,this.allowTabSynchronization,Date.now());return co(t).put(Br.key,e)},t.Ln=function(){return mi.Ln()},t.prototype.sc=function(t){var e=this,n=co(t);return n.get(Br.key).next((function(t){return e.rc(t)?(f("IndexedDbPersistence","Releasing primary lease."),n.delete(Br.key)):fi.resolve()}))},t.prototype.cc=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(m("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ha=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){t.fn.ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.za()}))},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},t.prototype.fc=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},t.prototype.Ya=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.La=function(){e._c(),e.fn.ws((function(){return e.Di()}))},this.window.addEventListener("unload",this.La))},t.prototype.dc=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},t.prototype.lc=function(t){var e;try{var n=null!==(null===(e=this.Ga)||void 0===e?void 0:e.getItem(this.hc(t)));return f("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return m("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype._c=function(){if(this.Ga)try{this.Ga.setItem(this.hc(this.clientId),String(Date.now()))}catch(i){m("Failed to set zombie client id.",i)}},t.prototype.wc=function(){if(this.Ga)try{this.Ga.removeItem(this.hc(this.clientId))}catch(i){}},t.prototype.hc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function co(t){return lo.Qn(t,Br.store)}function uo(t){return lo.Qn(t,Kr.store)}var ho=function(){function t(t,e){this.db=t,this.wo=new ar(this,e)}return t.prototype.Po=function(t){var e=this.Rc(t);return this.db.Tc().ba(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Rc=function(t){var e=0;return this.Vo(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ce=function(t,e){return this.db.Tc().Ce(t,e)},t.prototype.Vo=function(t,e){return this.gc(t,(function(t,n){return e(n)}))},t.prototype.Da=function(t,e,n){return po(t,n)},t.prototype.Na=function(t,e,n){return po(t,n)},t.prototype.po=function(t,e,n){return this.db.Tc().po(t,e,n)},t.prototype.Go=function(t,e){return po(t,e)},t.prototype.Pc=function(t,e){return function(t,e){var n=!1;return Mr(t).os((function(i){return xr(t,i,e).next((function(t){return t&&(n=!0),fi.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.bo=function(t,e){var n=this,i=this.db.Ec().ra(),r=[],o=0;return this.gc(t,(function(s,a){if(a<=e){var l=n.Pc(t,s).next((function(e){if(!e)return o++,i.Rr(t,s).next((function(){return i.Ar(s),oo(t).delete([0,lr(s.path)])}))}));r.push(l)}})).next((function(){return fi.$n(r)})).next((function(){return i.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.st(t.xa);return this.db.Tc().ya(t,n)},t.prototype.yc=function(t,e){return po(t,e)},t.prototype.gc=function(t,e){var n,i=oo(t),r=Bi.ai;return i.rs({index:$r.documentTargetsIndex},(function(t,i){var o=i.path,s=i.sequenceNumber;0===t[0]?(r!==Bi.ai&&e(new T(hr(n)),r),r=s,n=o):r=Bi.ai})).next((function(){r!==Bi.ai&&e(new T(hr(n)),r)}))},t.prototype.So=function(t){return this.db.Ec().aa(t)},t}();function po(t,e){return oo(t).put(function(t,e){return new $r(0,lr(t.path),e)}(e,t.xa))}function fo(t,e){var n=t.projectId;return t.j||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var mo=function(){function t(t,e,n){this.persistence=t,this.Vc=e,this.bc=new xt(X),this.vc=new st((function(t){return ft(t)}),mt),this.Sc=lt.min(),this.Sr=t.mc(n),this.Dc=t.Ec(),this.Ka=t.Tc(),this.Cc=new tr(this.Dc,this.Sr,this.persistence.Ic()),this.Vc.Nc(this.Cc)}return t.prototype.Io=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.vo(n,e.bc)}))},t}();function go(t,e){var n=_(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var i=e.batch.keys(),r=n.Dc.ra({oa:!0});return function(t,e,n,i){var r=n.batch,o=r.keys(),s=fi.resolve();return o.forEach((function(t){s=s.next((function(){return i.Rr(e,t)})).next((function(e){var o=e,s=n.dr.get(t);b(null!==s),(!o||o.version.L(s)<0)&&(o=r.cr(t,o,n))&&i.Er(o,n._r)}))})),s.next((function(){return t.Sr.Wo(e,r)}))}(n,t,e,r).next((function(){return r.apply(t)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Cc.kr(t,i)}))}))}function vo(t){var e=_(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Ka.Ea(t)}))}function yo(t,e){var n=_(t),i=e.nt,r=n.bc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Dc.ra({oa:!0});r=n.bc;var s=[];e.zt.forEach((function(e,o){var a=r.get(o);if(a){s.push(n.Ka.Ca(t,e.se,o).next((function(){return n.Ka.Sa(t,e.ee,o)})));var l=e.resumeToken;if(l.O()>0){var c=a.it(l,i).st(t.xa);r=r.ot(o,c),function(t,e,n){return b(e.resumeToken.O()>0),0===t.resumeToken.O()||e.nt.X()-t.nt.X()>=3e8||n.ee.size+n.ne.size+n.se.size>0}(a,c,e)&&s.push(n.Ka.ya(t,c))}}}));var a=Pt(),l=Lt();if(e.Yt.forEach((function(t,e){l=l.add(t)})),s.push(o.getEntries(t,l).next((function(r){e.Yt.forEach((function(l,c){var u=r.get(l);c instanceof kn&&c.version.isEqual(lt.min())?(o.Ar(l,i),a=a.ot(l,c)):null==u||c.version.L(u.version)>0||0===c.version.L(u.version)&&u.hasPendingWrites?(o.Er(c,i),a=a.ot(l,c)):f("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version),e.Jt.has(l)&&s.push(n.persistence.No.yc(t,l))}))}))),!i.isEqual(lt.min())){var c=n.Ka.Ea(t).next((function(e){return n.Ka.Aa(t,t.xa,i)}));s.push(c)}return fi.$n(s).next((function(){return o.apply(t)})).next((function(){return n.Cc.Mr(t,a)}))})).then((function(t){return n.bc=r,t}))}function bo(t,e){var n=_(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Sr.Bo(t,e)}))}function _o(t,e){var n=_(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var i;return n.Ka.va(t,e).next((function(r){return r?fi.resolve(i=r):n.Ka.wa(t).next((function(r){return i=new bt(e,r,0,t.xa),n.Ka.Ra(t,i).next((function(){return i}))}))}))})).then((function(t){var i=n.bc.get(t.targetId);return(null===i||t.nt.L(i.nt)>0)&&(n.bc=n.bc.ot(t.targetId,t),n.vc.set(e,t.targetId)),t}))}function wo(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,s,a;return i.__generator(this,(function(i){switch(i.label){case 0:r=_(t),o=r.bc.get(e),s=n?"readwrite":"readwrite-primary",i.label=1;case 1:return i.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,(function(t){return r.persistence.No.removeTarget(t,o)}))];case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:if(!yi(a=i.sent()))throw a;return f("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.bc=r.bc.remove(e),r.vc.delete(o.target),[2]}}))}))}function Ao(t,e,n){var i=_(t),r=lt.min(),o=Lt();return i.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var i=_(t),r=i.vc.get(n);return void 0!==r?fi.resolve(i.bc.get(r)):i.Ka.va(e,n)}(i,t,jn(e)).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,i.Ka.Fa(t,e.targetId).next((function(t){o=t}))})).next((function(){return i.Vc.Lr(t,e,n?r:lt.min(),n?o:Lt())})).next((function(t){return{documents:t,Fc:o}}))}))}function xo(t,e){var n=_(t),i=_(n.Ka),r=n.bc.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return i.Ue(t,e).next((function(t){return t?t.target:null}))}))}function Co(t){var e=_(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var i=_(t),r=Pt(),o=mr(n),s=Dr(e),a=IDBKeyRange.lowerBound(o,!0);return s.rs({index:Gr.readTimeIndex,range:a},(function(t,e){var n=pr(i.serializer,e);r=r.ot(n.key,n),o=e.readTime})).next((function(){return{xc:r,readTime:gr(o)}}))}(e.Dc,t,e.Sc)})).then((function(t){var n=t.xc;return e.Sc=t.readTime,n}))}function Eo(t){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){return[2,(e=_(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Dr(t),n=lt.min();return e.rs({index:Gr.readTimeIndex,reverse:!0},(function(t,e,i){e.readTime&&(n=gr(e.readTime)),i.done()})).next((function(){return n}))}(t)})).then((function(t){e.Sc=t}))]}))}))}function So(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){if(t.code!==u.FAILED_PRECONDITION||t.message!==Zi)throw t;return f("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var Mo=function(){function t(){this.$c=new St(To.kc),this.Mc=new St(To.Oc)}return t.prototype.m=function(){return this.$c.m()},t.prototype.Da=function(t,e){var n=new To(t,e);this.$c=this.$c.add(n),this.Mc=this.Mc.add(n)},t.prototype.Lc=function(t,e){var n=this;t.forEach((function(t){return n.Da(t,e)}))},t.prototype.Na=function(t,e){this.Bc(new To(t,e))},t.prototype.qc=function(t,e){var n=this;t.forEach((function(t){return n.Na(t,e)}))},t.prototype.Uc=function(t){var e=this,n=new T(new E([])),i=new To(n,t),r=new To(n,t+1),o=[];return this.Mc.Ft([i,r],(function(t){e.Bc(t),o.push(t.key)})),o},t.prototype.Qc=function(){var t=this;this.$c.forEach((function(e){return t.Bc(e)}))},t.prototype.Bc=function(t){this.$c=this.$c.delete(t),this.Mc=this.Mc.delete(t)},t.prototype.Wc=function(t){var e=new T(new E([])),n=new To(e,t),i=new To(e,t+1),r=Lt();return this.Mc.Ft([n,i],(function(t){r=r.add(t.key)})),r},t.prototype.Ho=function(t){var e=new To(t,0),n=this.$c.$t(e);return null!==n&&t.isEqual(n.key)},t}(),To=function(){function t(t,e){this.key=t,this.jc=e}return t.kc=function(t,e){return T.i(t.key,e.key)||X(t.jc,e.jc)},t.Oc=function(t,e){return X(t.jc,e.jc)||T.i(t.key,e.key)},t}(),Po=function(t,e){this.user=e,this.type="OAuth",this.Kc={},this.Kc.Authorization="Bearer "+t},ko=function(){function t(){this.Gc=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.zc=function(){},t.prototype.Hc=function(t){this.Gc=t,t(Ni.UNAUTHENTICATED)},t.prototype.Yc=function(){this.Gc=null},t}(),Do=function(){function t(t){var e=this;this.Jc=null,this.currentUser=Ni.UNAUTHENTICATED,this.Xc=!1,this.Zc=0,this.Gc=null,this.forceRefresh=!1,this.Jc=function(){e.Zc++,e.currentUser=e.tu(),e.Xc=!0,e.Gc&&e.Gc(e.currentUser)},this.Zc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Jc):(this.Jc(null),t.get().then((function(t){e.auth=t,e.Jc&&e.auth.addAuthTokenListener(e.Jc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.Zc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.Zc!==e?(f("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(b("string"==typeof n.accessToken),new Po(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.zc=function(){this.forceRefresh=!0},t.prototype.Hc=function(t){this.Gc=t,this.Xc&&t(this.currentUser)},t.prototype.Yc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Jc),this.Jc=null,this.Gc=null},t.prototype.tu=function(){var t=this.auth&&this.auth.getUid();return b(null===t||"string"==typeof t),new Ni(t)},t}(),Oo=function(){function t(t,e){this.eu=t,this.nu=e,this.type="FirstParty",this.user=Ni.ni}return Object.defineProperty(t.prototype,"Kc",{get:function(){var t={"X-Goog-AuthUser":this.nu},e=this.eu.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Ro=function(){function t(t,e){this.eu=t,this.nu=e}return t.prototype.getToken=function(){return Promise.resolve(new Oo(this.eu,this.nu))},t.prototype.Hc=function(t){t(Ni.ni)},t.prototype.Yc=function(){},t.prototype.zc=function(){},t}(),Io=function(){function t(t,e,n,i,r,o){this.fn=t,this.su=n,this.iu=i,this.ru=r,this.listener=o,this.state=0,this.ou=0,this.au=null,this.stream=null,this.ys=new pi(t,e)}return t.prototype.cu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.uu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.hu()},t.prototype.stop=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.cu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.lu=function(){this.state=0,this.ys.reset()},t.prototype._u=function(){var t=this;this.uu()&&null===this.au&&(this.au=this.fn.yn(this.su,6e4,(function(){return t.fu()})))},t.prototype.du=function(t){this.wu(),this.stream.send(t)},t.prototype.fu=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.uu()?[2,this.close(0)]:[2]}))}))},t.prototype.wu=function(){this.au&&(this.au.cancel(),this.au=null)},t.prototype.close=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return this.wu(),this.ys.cancel(),this.ou++,3!==t?this.ys.reset():e&&e.code===u.RESOURCE_EXHAUSTED?(m(e.toString()),m("Using maximum backoff delay to prevent overloading the backend."),this.ys.Rn()):e&&e.code===u.UNAUTHENTICATED&&this.ru.zc(),null!==this.stream&&(this.mu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.mu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.Eu(this.ou),n=this.ou;this.ru.getToken().then((function(e){t.ou===n&&t.Iu(e)}),(function(n){e((function(){var e=new h(u.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Au(e)}))}))},t.prototype.Iu=function(t){var e=this,n=this.Eu(this.ou);this.stream=this.Ru(t),this.stream.gu((function(){n((function(){return e.state=2,e.listener.gu()}))})),this.stream.Tu((function(t){n((function(){return e.Au(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.hu=function(){var t=this;this.state=4,this.ys.gn((function(){return i.__awaiter(t,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Au=function(t){return f("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.Eu=function(t){var e=this;return function(n){e.fn.ws((function(){return e.ou===t?n():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Lo=function(t){function e(e,n,i,r,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,i,o)||this).serializer=r,s}return i.__extends(e,t),e.prototype.Ru=function(t){return this.iu.Pu("Listen",t)},e.prototype.onMessage=function(t){this.ys.reset();var e=function(t,e){var n;if("targetChange"in e){var i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:y()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(t,e){return t.Qe?(b(void 0===e||"string"==typeof e),J.fromBase64String(e||"")):(b(void 0===e||e instanceof Uint8Array),J.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?u.UNKNOWN:At(t.code);return new h(e,t.message||"")}(s);n=new Wt(i,r,o,a||null)}else if("documentChange"in e){var l=e.documentChange,c=Me(t,l.document.name),d=xe(l.document.updateTime),p=new En({mapValue:{fields:l.document.fields}}),f=new Pn(c,d,p,{});n=new Ht(l.targetIds||[],l.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){var m=e.documentDelete,g=Me(t,m.document),v=m.readTime?xe(m.readTime):lt.min(),_=new kn(g,v);n=new Ht([],m.removedTargetIds||[],_.key,_)}else if("documentRemove"in e){var w=e.documentRemove,A=Me(t,w.document);n=new Ht([],w.removedTargetIds||[],A,null)}else{if(!("filter"in e))return y();var x=e.filter,C=new _t(x.count||0);n=new Gt(x.targetId,C)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return lt.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?lt.min():e.readTime?xe(e.readTime):lt.min()}(t);return this.listener.yu(e,n)},e.prototype.Vu=function(t){var e={};e.database=ke(this.serializer),e.addTarget=function(t,e){var n,i=e.target;return(n=gt(i)?{documents:Le(t,i)}:{query:Fe(t,i)}).targetId=e.targetId,e.resumeToken.O()>0&&(n.resumeToken=we(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return y()}}(0,e.et);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.du(e)},e.prototype.pu=function(t){var e={};e.database=ke(this.serializer),e.removeTarget=t,this.du(e)},e}(Io),Fo=function(t){function e(e,n,i,r,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,i,o)||this).serializer=r,s.bu=!1,s}return i.__extends(e,t),Object.defineProperty(e.prototype,"vu",{get:function(){return this.bu},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.bu=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mu=function(){this.bu&&this.Su([])},e.prototype.Ru=function(t){return this.iu.Pu("Write",t)},e.prototype.onMessage=function(t){if(b(!!t.streamToken),this.lastStreamToken=t.streamToken,this.bu){this.ys.reset();var e=function(t,e){return t&&t.length>0?(b(void 0!==e),t.map((function(t){return function(t,e){var n=xe(t.updateTime?t.updateTime:e);n.isEqual(lt.min())&&(n=xe(e));var i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults),new ln(n,i)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=xe(t.commitTime);return this.listener.Du(n,e)}return b(!t.writeResults||0===t.writeResults.length),this.bu=!0,this.listener.Cu()},e.prototype.Nu=function(){var t={};t.database=ke(this.serializer),this.du(t)},e.prototype.Su=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Re(e.serializer,t)}))};this.du(n)},e}(Io),No=function(t){function e(e,n,i){var r=this;return(r=t.call(this)||this).credentials=e,r.iu=n,r.serializer=i,r.Fu=!1,r}return i.__extends(e,t),e.prototype.xu=function(){if(this.Fu)throw new h(u.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.$u=function(t,e,n){var i=this;return this.xu(),this.credentials.getToken().then((function(r){return i.iu.$u(t,e,n,r)})).catch((function(t){throw t.code===u.UNAUTHENTICATED&&i.credentials.zc(),t}))},e.prototype.ku=function(t,e,n){var i=this;return this.xu(),this.credentials.getToken().then((function(r){return i.iu.ku(t,e,n,r)})).catch((function(t){throw t.code===u.UNAUTHENTICATED&&i.credentials.zc(),t}))},e.prototype.terminate=function(){this.Fu=!1},e}((function(){})),Bo=function(){function t(t,e){this.cs=t,this.di=e,this.state="Unknown",this.Mu=0,this.Ou=null,this.Lu=!0}return t.prototype.Bu=function(){var t=this;0===this.Mu&&(this.qu("Unknown"),this.Ou=this.cs.yn("online_state_timeout",1e4,(function(){return t.Ou=null,t.Uu("Backend didn't respond within 10 seconds."),t.qu("Offline"),Promise.resolve()})))},t.prototype.Qu=function(t){"Online"===this.state?this.qu("Unknown"):(this.Mu++,this.Mu>=1&&(this.Wu(),this.Uu("Connection failed 1 times. Most recent error: "+t.toString()),this.qu("Offline")))},t.prototype.set=function(t){this.Wu(),this.Mu=0,"Online"===t&&(this.Lu=!1),this.qu(t)},t.prototype.qu=function(t){t!==this.state&&(this.state=t,this.di(t))},t.prototype.Uu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Lu?(m(e),this.Lu=!1):f("OnlineStateTracker",e)},t.prototype.Wu=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t}(),Uo=function(t,e,n,r,o){var s=this;this.ju=t,this.Ku=e,this.cs=n,this.Gu={},this.zu=[],this.Hu=new Map,this.Yu=new Set,this.Ju=[],this.Xu=o,this.Xu.Zu((function(t){n.ws((function(){return i.__awaiter(s,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return Qo(this)?(f("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:return(e=_(t)).Yu.add(4),[4,jo(e)];case 1:return n.sent(),e.th.set("Unknown"),e.Yu.delete(4),[4,Vo(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.th=new Bo(n,r)};function Vo(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(i){switch(i.label){case 0:if(!Qo(t))return[3,4];e=0,n=t.Ju,i.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:i.sent(),i.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function jo(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(i){switch(i.label){case 0:e=0,n=t.Ju,i.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:i.sent(),i.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function zo(t){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:return e=_(t),f("RemoteStore","RemoteStore shutting down."),e.Yu.add(5),[4,jo(e)];case 1:return n.sent(),e.Xu.Di(),e.th.set("Unknown"),[2]}}))}))}function Ho(t,e){var n=_(t);n.Hu.has(e.targetId)||(n.Hu.set(e.targetId,e),Yo(n)?$o(n):us(n).uu()&&Wo(n,e))}function Go(t,e){var n=_(t),i=us(n);n.Hu.delete(e),i.uu()&&qo(n,e),0===n.Hu.size&&(i.uu()?i._u():Qo(n)&&n.th.set("Unknown"))}function Wo(t,e){t.eh.Ie(e.targetId),us(t).Vu(e)}function qo(t,e){t.eh.Ie(e),us(t).pu(e)}function $o(t){t.eh=new $t({qe:function(e){return t.Gu.qe(e)},Ue:function(e){return t.Hu.get(e)||null}}),us(t).start(),t.th.Bu()}function Yo(t){return Qo(t)&&!us(t).cu()&&t.Hu.size>0}function Qo(t){return 0===_(t).Yu.size}function Xo(t){t.eh=void 0}function Ko(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return t.Hu.forEach((function(e,n){Wo(t,e)})),[2]}))}))}function Zo(t,e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){return Xo(t),Yo(t)?(t.th.Qu(e),$o(t)):t.th.set("Unknown"),[2]}))}))}function Jo(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,s;return i.__generator(this,(function(a){switch(a.label){case 0:if(t.th.set("Online"),!(e instanceof Wt&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s;return i.__generator(this,(function(i){switch(i.label){case 0:n=e.cause,r=0,o=e.targetIds,i.label=1;case 1:return r<o.length?t.Hu.has(s=o[r])?[4,t.Gu.nh(s,n)]:[3,3]:[3,5];case 2:i.sent(),t.Hu.delete(s),t.eh.removeTarget(s),i.label=3;case 3:i.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),f("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ts(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ht?t.eh.be(e):e instanceof Gt?t.eh.$e(e):t.eh.De(e),n.isEqual(lt.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,vo(t.ju)];case 8:return o=a.sent(),n.L(o)>=0?[4,function(t,e){var n=t.eh.Oe(e);return n.zt.forEach((function(n,i){if(n.resumeToken.O()>0){var r=t.Hu.get(i);r&&t.Hu.set(i,r.it(n.resumeToken,e))}})),n.Ht.forEach((function(e){var n=t.Hu.get(e);if(n){t.Hu.set(e,n.it(J.B,n.nt)),qo(t,e);var i=new bt(n.target,e,1,n.sequenceNumber);Wo(t,i)}})),t.Gu.sh(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return f("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,ts(t,s)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function ts(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r=this;return i.__generator(this,(function(o){switch(o.label){case 0:if(!yi(e))throw e;return t.Yu.add(1),[4,jo(t)];case 1:return o.sent(),t.th.set("Offline"),n||(n=function(){return vo(t.ju)}),t.cs.Cs((function(){return i.__awaiter(r,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return f("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Yu.delete(1),[4,Vo(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function es(t,e){return e().catch((function(n){return ts(t,n,e)}))}function ns(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,s;return i.__generator(this,(function(i){switch(i.label){case 0:e=_(t),n=hs(e),r=e.zu.length>0?e.zu[e.zu.length-1].batchId:-1,i.label=1;case 1:if(!function(t){return Qo(t)&&t.zu.length<10}(e))return[3,7];i.label=2;case 2:return i.trys.push([2,4,,6]),[4,bo(e.ju,r)];case 3:return null===(o=i.sent())?(0===e.zu.length&&n._u(),[3,7]):(r=o.batchId,function(t,e){t.zu.push(e);var n=hs(t);n.uu()&&n.vu&&n.Su(e.mutations)}(e,o),[3,6]);case 4:return s=i.sent(),[4,ts(e,s)];case 5:return i.sent(),[3,6];case 6:return[3,1];case 7:return is(e)&&rs(e),[2]}}))}))}function is(t){return Qo(t)&&!hs(t).cu()&&t.zu.length>0}function rs(t){hs(t).start()}function os(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return hs(t).Nu(),[2]}))}))}function ss(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r;return i.__generator(this,(function(i){for(e=hs(t),n=0,r=t.zu;n<r.length;n++)e.Su(r[n].mutations);return[2]}))}))}function as(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o;return i.__generator(this,(function(i){switch(i.label){case 0:return r=t.zu.shift(),o=Xi.from(r,e,n),[4,es(t,(function(){return t.Gu.ih(o)}))];case 1:return i.sent(),[4,ns(t)];case 2:return i.sent(),[2]}}))}))}function ls(t,e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return e&&hs(t).vu?[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r;return i.__generator(this,(function(i){switch(i.label){case 0:return wt(r=e.code)&&r!==u.ABORTED?(n=t.zu.shift(),hs(t).lu(),[4,es(t,(function(){return t.Gu.rh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,ns(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return is(t)&&rs(t),[2]}}))}))}function cs(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n;return i.__generator(this,(function(i){switch(i.label){case 0:return n=_(t),e?(n.Yu.delete(2),[4,Vo(n)]):[3,2];case 1:return i.sent(),[3,5];case 2:return e?[3,4]:(n.Yu.add(2),[4,jo(n)]);case 3:i.sent(),n.th.set("Unknown"),i.label=4;case 4:i.label=5;case 5:return[2]}}))}))}function us(t){var e=this;return t.oh||(t.oh=function(t,e,n){var i=_(t);return i.xu(),new Lo(e,i.iu,i.credentials,i.serializer,n)}(t.Ku,t.cs,{gu:Ko.bind(null,t),Tu:Zo.bind(null,t),yu:Jo.bind(null,t)}),t.Ju.push((function(n){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return n?(t.oh.lu(),Yo(t)?$o(t):t.th.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.oh.stop()];case 2:e.sent(),Xo(t),e.label=3;case 3:return[2]}}))}))}))),t.oh}function hs(t){var e=this;return t.ah||(t.ah=function(t,e,n){var i=_(t);return i.xu(),new Fo(e,i.iu,i.credentials,i.serializer,n)}(t.Ku,t.cs,{gu:os.bind(null,t),Tu:ls.bind(null,t),Cu:ss.bind(null,t),Du:as.bind(null,t)}),t.Ju.push((function(n){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return n?(t.ah.lu(),[4,ns(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.ah.stop()];case 3:e.sent(),t.zu.length>0&&(f("RemoteStore","Stopping write stream with "+t.zu.length+" pending writes"),t.zu=[]),e.label=4;case 4:return[2]}}))}))}))),t.ah}var ds=function(t){this.key=t},ps=function(t){this.key=t},fs=function(){function t(t,e){this.query=t,this.uh=e,this.hh=null,this.te=!1,this.lh=Lt(),this.Wt=Lt(),this._h=Qn(t),this.fh=new Bt(this._h)}return Object.defineProperty(t.prototype,"dh",{get:function(){return this.uh},enumerable:!1,configurable:!0}),t.prototype.wh=function(t,e){var n=this,i=e?e.mh:new Ut,r=e?e.fh:this.fh,o=e?e.Wt:this.Wt,s=r,a=!1,l=Ln(this.query)&&r.size===this.query.limit?r.last():null,c=Fn(this.query)&&r.size===this.query.limit?r.first():null;if(t.ht((function(t,e){var u=r.get(t),h=e instanceof Pn?e:null;h&&(h=Yn(n.query,h)?h:null);var d=!!u&&n.Wt.has(u.key),p=!!h&&(h.Je||n.Wt.has(h.key)&&h.hasCommittedMutations),f=!1;u&&h?u.data().isEqual(h.data())?d!==p&&(i.track({type:3,doc:h}),f=!0):n.Th(u,h)||(i.track({type:2,doc:h}),f=!0,(l&&n._h(h,l)>0||c&&n._h(h,c)<0)&&(a=!0)):!u&&h?(i.track({type:0,doc:h}),f=!0):u&&!h&&(i.track({type:1,doc:u}),f=!0,(l||c)&&(a=!0)),f&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Ln(this.query)||Fn(this.query))for(;s.size>this.query.limit;){var u=Ln(this.query)?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),i.track({type:1,doc:u})}return{fh:s,mh:i,Eh:a,Wt:o}},t.prototype.Th=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},t.prototype.yr=function(t,e,n){var i=this,r=this.fh;this.fh=t.fh,this.Wt=t.Wt;var o=t.mh.Ut();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return y()}};return n(t)-n(e)}(t.type,e.type)||i._h(t.doc,e.doc)})),this.Ih(n);var s=e?this.Ah():[],a=0===this.lh.size&&this.te?1:0,l=a!==this.hh;return this.hh=a,0!==o.length||l?{snapshot:new Vt(this.query,t.fh,r,o,t.Wt,0===a,l,!1),Rh:s}:{Rh:s}},t.prototype.Qs=function(t){return this.te&&"Offline"===t?(this.te=!1,this.yr({fh:this.fh,mh:new Ut,Wt:this.Wt,Eh:!1},!1)):{Rh:[]}},t.prototype.gh=function(t){return!this.uh.has(t)&&!!this.fh.has(t)&&!this.fh.get(t).Je},t.prototype.Ih=function(t){var e=this;t&&(t.ee.forEach((function(t){return e.uh=e.uh.add(t)})),t.ne.forEach((function(t){})),t.se.forEach((function(t){return e.uh=e.uh.delete(t)})),this.te=t.te)},t.prototype.Ah=function(){var t=this;if(!this.te)return[];var e=this.lh;this.lh=Lt(),this.fh.forEach((function(e){t.gh(e.key)&&(t.lh=t.lh.add(e.key))}));var n=[];return e.forEach((function(e){t.lh.has(e)||n.push(new ps(e))})),this.lh.forEach((function(t){e.has(t)||n.push(new ds(t))})),n},t.prototype.Ph=function(t){this.uh=t.Fc,this.lh=Lt();var e=this.wh(t.documents);return this.yr(e,!0)},t.prototype.yh=function(){return Vt.Gt(this.query,this.fh,this.Wt,0===this.hh)},t}(),ms=function(t,e,n){this.query=t,this.targetId=e,this.view=n},gs=function(t){this.key=t,this.Vh=!1},vs=function(){function t(t,e,n,i,r,o){this.ju=t,this.ph=e,this.bh=n,this.Sh=i,this.currentUser=r,this.Dh=o,this.Ch={},this.Nh=new st((function(t){return qn(t)}),Wn),this.Fh=new Map,this.xh=[],this.$h=new xt(T.i),this.kh=new Map,this.Mh=new Mo,this.Oh={},this.Lh=new Map,this.Bh=eo.da(),this.onlineState="Unknown",this.qh=void 0}return Object.defineProperty(t.prototype,"Uh",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),t}();function ys(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a;return i.__generator(this,(function(i){switch(i.label){case 0:return n=Gs(t),(o=n.Nh.get(e))?(n.Sh.Oi(o.targetId),r=o.view.yh(),[3,4]):[3,1];case 1:return[4,_o(n.ju,jn(e))];case 2:return s=i.sent(),a=n.Sh.Oi(s.targetId),[4,bs(n,e,s.targetId,"current"===a)];case 3:r=i.sent(),n.Uh&&Ho(n.ph,s),i.label=4;case 4:return[2,r]}}))}))}function bs(t,e,n,r){return i.__awaiter(this,void 0,void 0,(function(){var o,s,a,l,c,u;return i.__generator(this,(function(h){switch(h.label){case 0:return t.Qh=function(e,n,r){return function(t,e,n,r){return i.__awaiter(this,void 0,void 0,(function(){var o,s,a;return i.__generator(this,(function(i){switch(i.label){case 0:return(o=e.view.wh(n)).Eh?[4,Ao(t.ju,e.query,!1).then((function(t){return e.view.wh(t.documents,o)}))]:[3,2];case 1:o=i.sent(),i.label=2;case 2:return s=r&&r.zt.get(e.targetId),a=e.view.yr(o,t.Uh,s),[2,(ks(t,e.targetId,a.Rh),a.snapshot)]}}))}))}(t,e,n,r)},[4,Ao(t.ju,e,!0)];case 1:return o=h.sent(),s=new fs(e,o.Fc),a=s.wh(o.documents),l=zt.Zt(n,r&&"Offline"!==t.onlineState),c=s.yr(a,t.Uh,l),ks(t,n,c.Rh),u=new ms(e,n,s),[2,(t.Nh.set(e,u),t.Fh.has(n)?t.Fh.get(n).push(e):t.Fh.set(n,[e]),c.snapshot)]}}))}))}function _s(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:return n=_(t),r=n.Nh.get(e),(o=n.Fh.get(r.targetId)).length>1?[2,(n.Fh.set(r.targetId,o.filter((function(t){return!Wn(t,e)}))),void n.Nh.delete(e))]:n.Uh?(n.Sh.Bi(r.targetId),n.Sh.Fi(r.targetId)?[3,2]:[4,wo(n.ju,r.targetId,!1).then((function(){n.Sh.Ui(r.targetId),Go(n.ph,r.targetId),Ts(n,r.targetId)})).catch(So)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return Ts(n,r.targetId),[4,wo(n.ju,r.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))}function ws(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r;return i.__generator(this,(function(i){switch(i.label){case 0:n=_(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,yo(n.ju,e)];case 2:return r=i.sent(),e.zt.forEach((function(t,e){var i=n.kh.get(e);i&&(b(t.ee.size+t.ne.size+t.se.size<=1),t.ee.size>0?i.Vh=!0:t.ne.size>0?b(i.Vh):t.se.size>0&&(b(i.Vh),i.Vh=!1))})),[4,Rs(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,So(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function As(t,e,n){var i=_(t);if(i.Uh&&0===n||!i.Uh&&1===n){var r=[];i.Nh.forEach((function(t,n){var i=n.view.Qs(e);i.snapshot&&r.push(i.snapshot)})),function(t,e){var n=_(t);n.onlineState=e;var i=!1;n.Bs.forEach((function(t,n){for(var r=0,o=n.listeners;r<o.length;r++)o[r].Qs(e)&&(i=!0)})),i&&Li(n)}(i.bh,e),r.length&&i.Ch.yu(r),i.onlineState=e,i.Uh&&i.Sh.Ki(e)}}function xs(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,s,a,l,c;return i.__generator(this,(function(i){switch(i.label){case 0:return(r=_(t)).Sh.Qi(e,"rejected",n),o=r.kh.get(e),(s=o&&o.key)?(a=(a=new xt(T.i)).ot(s,new kn(s,lt.min())),l=Lt().add(s),c=new jt(lt.min(),new Map,new St(X),a,l),[4,ws(r,c)]):[3,2];case 1:return i.sent(),r.$h=r.$h.remove(s),r.kh.delete(e),Os(r),[3,4];case 2:return[4,wo(r.ju,e,!1).then((function(){return Ts(r,e,n)})).catch(So)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))}function Cs(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:n=_(t),r=e.batch.batchId,i.label=1;case 1:return i.trys.push([1,4,,6]),[4,go(n.ju,e)];case 2:return o=i.sent(),Ms(n,r,null),Ss(n,r),n.Sh.ki(r,"acknowledged"),[4,Rs(n,o)];case 3:return i.sent(),[3,6];case 4:return[4,So(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Es(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o;return i.__generator(this,(function(i){switch(i.label){case 0:r=_(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,function(t,e){var n=_(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var i;return n.Sr.Oo(t,e).next((function(e){return b(null!==e),i=e.keys(),n.Sr.Wo(t,e)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Cc.kr(t,i)}))}))}(r.ju,e)];case 2:return o=i.sent(),Ms(r,e,n),Ss(r,e),r.Sh.ki(e,"rejected",n),[4,Rs(r,o)];case 3:return i.sent(),[3,6];case 4:return[4,So(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Ss(t,e){(t.Lh.get(e)||[]).forEach((function(t){t.resolve()})),t.Lh.delete(e)}function Ms(t,e,n){var i=_(t),r=i.Oh[i.currentUser.ti()];if(r){var o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Oh[i.currentUser.ti()]=r}}function Ts(t,e,n){void 0===n&&(n=null),t.Sh.Bi(e);for(var i=0,r=t.Fh.get(e);i<r.length;i++){var o=r[i];t.Nh.delete(o),n&&t.Ch.Wh(o,n)}t.Fh.delete(e),t.Uh&&t.Mh.Uc(e).forEach((function(e){t.Mh.Ho(e)||Ps(t,e)}))}function Ps(t,e){var n=t.$h.get(e);null!==n&&(Go(t.ph,n),t.$h=t.$h.remove(e),t.kh.delete(n),Os(t))}function ks(t,e,n){for(var i=0,r=n;i<r.length;i++){var o=r[i];o instanceof ds?(t.Mh.Da(o.key,e),Ds(t,o)):o instanceof ps?(f("SyncEngine","Document no longer in limbo: "+o.key),t.Mh.Na(o.key,e),t.Mh.Ho(o.key)||Ps(t,o.key)):y()}}function Ds(t,e){var n=e.key;t.$h.get(n)||(f("SyncEngine","New document in limbo: "+n),t.xh.push(n),Os(t))}function Os(t){for(;t.xh.length>0&&t.$h.size<t.Dh;){var e=t.xh.shift(),n=t.Bh.next();t.kh.set(n,new gs(e)),t.$h=t.$h.ot(e,n),Ho(t.ph,new bt(jn(In(e.path)),n,2,Bi.ai))}}function Rs(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,s,a;return i.__generator(this,(function(l){switch(l.label){case 0:return r=_(t),o=[],s=[],a=[],r.Nh.m()?[3,3]:(r.Nh.forEach((function(t,i){a.push(r.Qh(i,e,n).then((function(t){if(t){r.Uh&&r.Sh.Qi(i.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=er.zr(i.targetId,t);s.push(e)}})))})),[4,Promise.all(a)]);case 1:return l.sent(),r.Ch.yu(o),[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a,l,c,u;return i.__generator(this,(function(i){switch(i.label){case 0:n=_(t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return fi.forEach(e,(function(e){return fi.forEach(e.Kr,(function(i){return n.persistence.No.Da(t,e.targetId,i)})).next((function(){return fi.forEach(e.Gr,(function(i){return n.persistence.No.Na(t,e.targetId,i)}))}))}))}))];case 2:return i.sent(),[3,4];case 3:if(!yi(r=i.sent()))throw r;return f("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(o=0,s=e;o<s.length;o++)l=(a=s[o]).targetId,a.fromCache||(c=n.bc.get(l),u=c.rt(c.nt),n.bc=n.bc.ot(l,u));return[2]}}))}))}(r.ju,s)];case 2:l.sent(),l.label=3;case 3:return[2]}}))}))}function Is(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r;return i.__generator(this,(function(o){switch(o.label){case 0:return(n=_(t)).currentUser.isEqual(e)?[3,3]:(f("SyncEngine","User change. New user:",e.ti()),[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s;return i.__generator(this,(function(i){switch(i.label){case 0:return n=_(t),r=n.Sr,o=n.Cc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var i;return n.Sr.Uo(t).next((function(s){return i=s,r=n.persistence.mc(e),o=new tr(n.Dc,r,n.persistence.Ic()),r.Uo(t)})).next((function(e){for(var n=[],r=[],s=Lt(),a=0,l=i;a<l.length;a++){var c=l[a];n.push(c.batchId);for(var u=0,h=c.mutations;u<h.length;u++)s=s.add(h[u].key)}for(var d=0,p=e;d<p.length;d++){var f=p[d];r.push(f.batchId);for(var m=0,g=f.mutations;m<g.length;m++)s=s.add(g[m].key)}return o.kr(t,s).next((function(t){return{jh:t,Kh:n,Gh:r}}))}))}))];case 1:return s=i.sent(),[2,(n.Sr=r,n.Cc=o,n.Vc.Nc(n.Cc),s)]}}))}))}(n.ju,e)]);case 1:return r=o.sent(),n.currentUser=e,function(t,e){t.Lh.forEach((function(t){t.forEach((function(t){t.reject(new h(u.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Lh.clear()}(n),n.Sh.ji(e,r.Kh,r.Gh),[4,Rs(n,r.jh)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}function Ls(t,e){var n=_(t),i=n.kh.get(e);if(i&&i.Vh)return Lt().add(i.key);var r=Lt(),o=n.Fh.get(e);if(!o)return r;for(var s=0,a=o;s<a.length;s++){var l=n.Nh.get(a[s]);r=r.kt(l.view.dh)}return r}function Fs(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,Ao((n=_(t)).ju,e.query,!0)];case 1:return r=i.sent(),o=e.view.Ph(r),[2,(n.Uh&&ks(n,e.targetId,o.Rh),o)]}}))}))}function Ns(t,e,n,r){return i.__awaiter(this,void 0,void 0,(function(){var o,s;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,function(t,e){var n=_(t),i=_(n.Sr);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return i.Lo(t,e).next((function(e){return e?n.Cc.kr(t,e):fi.resolve(null)}))}))}((o=_(t)).ju,e)];case 1:return null===(s=i.sent())?[3,6]:"pending"!==n?[3,3]:[4,ns(o.ph)];case 2:return i.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ms(o,e,r||null),Ss(o,e),function(t,e){_(_(t).Sr).Ko(e)}(o.ju,e)):y(),i.label=4;case 4:return[4,Rs(o,s)];case 5:return i.sent(),[3,7];case 6:f("SyncEngine","Cannot apply mutation batch with id: "+e),i.label=7;case 7:return[2]}}))}))}function Bs(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a,l,c;return i.__generator(this,(function(i){switch(i.label){case 0:return Gs(n=_(t)),Ws(n),!0!==e||!0===n.qh?[3,3]:(r=n.Sh.Ci(),[4,Us(n,r.A())]);case 1:return o=i.sent(),n.qh=!0,[4,cs(n.ph,!0)];case 2:for(i.sent(),s=0,a=o;s<a.length;s++)Ho(n.ph,a[s]);return[3,7];case 3:return!1!==e||!1===n.qh?[3,7]:(l=[],c=Promise.resolve(),n.Fh.forEach((function(t,e){n.Sh.qi(e)?l.push(e):c=c.then((function(){return Ts(n,e),wo(n.ju,e,!0)})),Go(n.ph,e)})),[4,c]);case 4:return i.sent(),[4,Us(n,l)];case 5:return i.sent(),function(t){var e=_(t);e.kh.forEach((function(t,n){Go(e.ph,n)})),e.Mh.Qc(),e.kh=new Map,e.$h=new xt(T.i)}(n),n.qh=!1,[4,cs(n.ph,!1)];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))}function Us(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a,l,c,u,h,d,p,f,m;return i.__generator(this,(function(i){switch(i.label){case 0:n=_(t),r=[],o=[],s=0,a=e,i.label=1;case 1:return s<a.length?(c=void 0,(u=n.Fh.get(l=a[s]))&&0!==u.length?[4,_o(n.ju,jn(u[0]))]:[3,7]):[3,13];case 2:c=i.sent(),h=0,d=u,i.label=3;case 3:return h<d.length?(p=n.Nh.get(d[h]),[4,Fs(n,p)]):[3,6];case 4:(f=i.sent()).snapshot&&o.push(f.snapshot),i.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,xo(n.ju,l)];case 8:return m=i.sent(),[4,_o(n.ju,m)];case 9:return c=i.sent(),[4,bs(n,Vs(m),l,!1)];case 10:i.sent(),i.label=11;case 11:r.push(c),i.label=12;case 12:return s++,[3,1];case 13:return[2,(n.Ch.yu(o),r)]}}))}))}function Vs(t){return Rn(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function js(t){var e=_(t);return _(_(e.ju).persistence).pi()}function zs(t,e,n,r){return i.__awaiter(this,void 0,void 0,(function(){var o,s,a;return i.__generator(this,(function(i){switch(i.label){case 0:return(o=_(t)).qh?(f("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Fh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Co(o.ju)];case 3:return s=i.sent(),a=jt.Xt(e,"current"===n),[4,Rs(o,s,a)];case 4:return i.sent(),[3,8];case 5:return[4,wo(o.ju,e,!0)];case 6:return i.sent(),Ts(o,e,r),[3,8];case 7:y(),i.label=8;case 8:return[2]}}))}))}function Hs(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,s,a,l,c,u,h,d;return i.__generator(this,(function(p){switch(p.label){case 0:if(!(r=Gs(t)).qh)return[3,10];o=0,s=e,p.label=1;case 1:return o<s.length?r.Fh.has(a=s[o])?(f("SyncEngine","Adding an already active target "+a),[3,5]):[4,xo(r.ju,a)]:[3,6];case 2:return l=p.sent(),[4,_o(r.ju,l)];case 3:return c=p.sent(),[4,bs(r,Vs(l),c.targetId,!1)];case 4:p.sent(),Ho(r.ph,c),p.label=5;case 5:return o++,[3,1];case 6:u=function(t){return i.__generator(this,(function(e){switch(e.label){case 0:return r.Fh.has(t)?[4,wo(r.ju,t,!1).then((function(){Go(r.ph,t),Ts(r,t)})).catch(So)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,d=n,p.label=7;case 7:return h<d.length?[5,u(d[h])]:[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Gs(t){var e=_(t);return e.ph.Gu.sh=ws.bind(null,e),e.ph.Gu.qe=Ls.bind(null,e),e.ph.Gu.nh=xs.bind(null,e),e.Ch.yu=Ri.bind(null,e.bh),e.Ch.Wh=Ii.bind(null,e.bh),e}function Ws(t){var e=_(t);return e.ph.Gu.ih=Cs.bind(null,e),e.ph.Gu.rh=Es.bind(null,e),e}var qs=function(){function t(){}return t.prototype.Nc=function(t){this.zh=t},t.prototype.Lr=function(t,e,n,i){var r=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.on.length||1===t.on.length&&t.on[0].field.p())}(e)||n.isEqual(lt.min())?this.Hh(t,e):this.zh.kr(t,i).next((function(s){var a=r.Yh(e,s);return(Ln(e)||Fn(e))&&r.Eh(e.an,a,i,n)?r.Hh(t,e):(p()<=o.LogLevel.DEBUG&&f("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),$n(e)),r.zh.Lr(t,e,n).next((function(t){return a.forEach((function(e){t=t.ot(e.key,e)})),t})))}))},t.prototype.Yh=function(t,e){var n=new St(Qn(t));return e.forEach((function(e,i){i instanceof Pn&&Yn(t,i)&&(n=n.add(i))})),n},t.prototype.Eh=function(t,e,n,i){if(n.size!==e.size)return!0;var r="F"===t?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.L(i)>0)},t.prototype.Hh=function(t,e){return p()<=o.LogLevel.DEBUG&&f("IndexFreeQueryEngine","Using full collection scan to execute query:",$n(e)),this.zh.Lr(t,e,lt.min())},t}(),$s=function(){function t(t,e){this.Dr=t,this.No=e,this.Sr=[],this.Jh=1,this.Xh=new St(To.kc)}return t.prototype.$o=function(t){return fi.resolve(0===this.Sr.length)},t.prototype.ko=function(t,e,n,i){var r=this.Jh;this.Jh++;var o=new Qi(r,e,n,i);this.Sr.push(o);for(var s=0,a=i;s<a.length;s++){var l=a[s];this.Xh=this.Xh.add(new To(l.key,r)),this.Dr.Mo(t,l.key.path.h())}return fi.resolve(o)},t.prototype.Oo=function(t,e){return fi.resolve(this.Zh(e))},t.prototype.Bo=function(t,e){var n=this.tl(e+1),i=n<0?0:n;return fi.resolve(this.Sr.length>i?this.Sr[i]:null)},t.prototype.qo=function(){return fi.resolve(0===this.Sr.length?-1:this.Jh-1)},t.prototype.Uo=function(t){return fi.resolve(this.Sr.slice())},t.prototype.Nr=function(t,e){var n=this,i=new To(e,0),r=new To(e,Number.POSITIVE_INFINITY),o=[];return this.Xh.Ft([i,r],(function(t){var e=n.Zh(t.jc);o.push(e)})),fi.resolve(o)},t.prototype.Or=function(t,e){var n=this,i=new St(X);return e.forEach((function(t){var e=new To(t,0),r=new To(t,Number.POSITIVE_INFINITY);n.Xh.Ft([e,r],(function(t){i=i.add(t.jc)}))})),fi.resolve(this.el(i))},t.prototype.Wr=function(t,e){var n=e.path,i=n.length+1,r=n;T.F(r)||(r=r.child(""));var o=new To(new T(r),0),s=new St(X);return this.Xh.xt((function(t){var e=t.key.path;return!!n.T(e)&&(e.length===i&&(s=s.add(t.jc)),!0)}),o),fi.resolve(this.el(s))},t.prototype.el=function(t){var e=this,n=[];return t.forEach((function(t){var i=e.Zh(t);null!==i&&n.push(i)})),n},t.prototype.Wo=function(t,e){var n=this;b(0===this.nl(e.batchId,"removed")),this.Sr.shift();var i=this.Xh;return fi.forEach(e.mutations,(function(r){var o=new To(r.key,e.batchId);return i=i.delete(o),n.No.Go(t,r.key)})).next((function(){n.Xh=i}))},t.prototype.Ko=function(t){},t.prototype.Ho=function(t,e){var n=new To(e,0),i=this.Xh.$t(n);return fi.resolve(e.isEqual(i&&i.key))},t.prototype.zo=function(t){return fi.resolve()},t.prototype.nl=function(t,e){return this.tl(t)},t.prototype.tl=function(t){return 0===this.Sr.length?0:t-this.Sr[0].batchId},t.prototype.Zh=function(t){var e=this.tl(t);return e<0||e>=this.Sr.length?null:this.Sr[e]},t}(),Ys=function(){function t(t,e){this.Dr=t,this.sl=e,this.docs=new xt(T.i),this.size=0}return t.prototype.Er=function(t,e,n){var i=e.key,r=this.docs.get(i),o=r?r.size:0,s=this.sl(e);return this.docs=this.docs.ot(i,{ta:e,size:s,readTime:n}),this.size+=s-o,this.Dr.Mo(t,i.path.h())},t.prototype.Ar=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Rr=function(t,e){var n=this.docs.get(e);return fi.resolve(n?n.ta:null)},t.prototype.getEntries=function(t,e){var n=this,i=kt();return e.forEach((function(t){var e=n.docs.get(t);i=i.ot(t,e?e.ta:null)})),fi.resolve(i)},t.prototype.Lr=function(t,e,n){for(var i=Ot(),r=new T(e.path.child("")),o=this.docs.ft(r);o.At();){var s=o.It(),a=s.value,l=a.ta,c=a.readTime;if(!e.path.T(s.key.path))break;c.L(n)<=0||l instanceof Pn&&Yn(e,l)&&(i=i.ot(l.key,l))}return fi.resolve(i)},t.prototype.il=function(t,e){return fi.forEach(this.docs,(function(t){return e(t)}))},t.prototype.ra=function(t){return new Qs(this)},t.prototype.aa=function(t){return fi.resolve(this.size)},t}(),Qs=function(t){function e(e){var n=this;return(n=t.call(this)||this).ca=e,n}return i.__extends(e,t),e.prototype.yr=function(t){var e=this,n=[];return this.wr.forEach((function(i,r){r?n.push(e.ca.Er(t,r,e.readTime)):e.ca.Ar(i)})),fi.$n(n)},e.prototype.gr=function(t,e){return this.ca.Rr(t,e)},e.prototype.Pr=function(t,e){return this.ca.getEntries(t,e)},e}(Ki),Xs=function(){function t(t){this.persistence=t,this.rl=new st((function(t){return ft(t)}),mt),this.lastRemoteSnapshotVersion=lt.min(),this.highestTargetId=0,this.ol=0,this.al=new Mo,this.targetCount=0,this.cl=eo.fa()}return t.prototype.Ce=function(t,e){return this.rl.forEach((function(t,n){return e(n)})),fi.resolve()},t.prototype.Ea=function(t){return fi.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ia=function(t){return fi.resolve(this.ol)},t.prototype.wa=function(t){return this.highestTargetId=this.cl.next(),fi.resolve(this.highestTargetId)},t.prototype.Aa=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ol&&(this.ol=e),fi.resolve()},t.prototype.ga=function(t){this.rl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.cl=new eo(e),this.highestTargetId=e),t.sequenceNumber>this.ol&&(this.ol=t.sequenceNumber)},t.prototype.Ra=function(t,e){return this.ga(e),this.targetCount+=1,fi.resolve()},t.prototype.ya=function(t,e){return this.ga(e),fi.resolve()},t.prototype.Va=function(t,e){return this.rl.delete(e.target),this.al.Uc(e.targetId),this.targetCount-=1,fi.resolve()},t.prototype.po=function(t,e,n){var i=this,r=0,o=[];return this.rl.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i.rl.delete(s),o.push(i.pa(t,a.targetId)),r++)})),fi.$n(o).next((function(){return r}))},t.prototype.ba=function(t){return fi.resolve(this.targetCount)},t.prototype.va=function(t,e){var n=this.rl.get(e)||null;return fi.resolve(n)},t.prototype.Sa=function(t,e,n){return this.al.Lc(e,n),fi.resolve()},t.prototype.Ca=function(t,e,n){this.al.qc(e,n);var i=this.persistence.No,r=[];return i&&e.forEach((function(e){r.push(i.Go(t,e))})),fi.$n(r)},t.prototype.pa=function(t,e){return this.al.Uc(e),fi.resolve()},t.prototype.Fa=function(t,e){var n=this.al.Wc(e);return fi.resolve(n)},t.prototype.Ho=function(t,e){return fi.resolve(this.al.Ho(e))},t}(),Ks=function(){function t(t){var e=this;this.ul={},this.Ma=new Bi(0),this.Oa=!1,this.Oa=!0,this.No=t(this),this.Ka=new Xs(this),this.Dr=new Ir,this.vr=function(t,n){return new Ys(t,(function(t){return e.No.hl(t)}))}(this.Dr)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Di=function(){return this.Oa=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),t.prototype.Za=function(){},t.prototype.tc=function(){},t.prototype.Ic=function(){return this.Dr},t.prototype.mc=function(t){var e=this.ul[t.ti()];return e||(e=new $s(this.Dr,this.No),this.ul[t.ti()]=e),e},t.prototype.Tc=function(){return this.Ka},t.prototype.Ec=function(){return this.vr},t.prototype.runTransaction=function(t,e,n){var i=this;f("MemoryPersistence","Starting transaction:",t);var r=new Zs(this.Ma.next());return this.No.ll(),n(r).next((function(t){return i.No._l(r).next((function(){return t}))})).Fn().then((function(t){return r.br(),t}))},t.prototype.fl=function(t,e){return fi.kn(Object.values(this.ul).map((function(n){return function(){return n.Ho(t,e)}})))},t}(),Zs=function(t){function e(e){var n=this;return(n=t.call(this)||this).xa=e,n}return i.__extends(e,t),e}(Ji),Js=function(){function t(t){this.persistence=t,this.dl=new Mo,this.wl=null}return t.ml=function(e){return new t(e)},Object.defineProperty(t.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw y()},enumerable:!1,configurable:!0}),t.prototype.Da=function(t,e,n){return this.dl.Da(n,e),this.Tl.delete(n.toString()),fi.resolve()},t.prototype.Na=function(t,e,n){return this.dl.Na(n,e),this.Tl.add(n.toString()),fi.resolve()},t.prototype.Go=function(t,e){return this.Tl.add(e.toString()),fi.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.dl.Uc(e.targetId).forEach((function(t){return n.Tl.add(t.toString())}));var i=this.persistence.Tc();return i.Fa(t,e.targetId).next((function(t){t.forEach((function(t){return n.Tl.add(t.toString())}))})).next((function(){return i.Va(t,e)}))},t.prototype.ll=function(){this.wl=new Set},t.prototype._l=function(t){var e=this,n=this.persistence.Ec().ra();return fi.forEach(this.Tl,(function(i){var r=T.D(i);return e.El(t,r).next((function(t){t||n.Ar(r)}))})).next((function(){return e.wl=null,n.apply(t)}))},t.prototype.yc=function(t,e){var n=this;return this.El(t,e).next((function(t){t?n.Tl.delete(e.toString()):n.Tl.add(e.toString())}))},t.prototype.hl=function(t){return 0},t.prototype.El=function(t,e){var n=this;return fi.kn([function(){return fi.resolve(n.dl.Ho(e))},function(){return n.persistence.Tc().Ho(t,e)},function(){return n.persistence.fl(t,e)}])},t}(),ta=function(){function t(t){this.Il=t.Il,this.Al=t.Al}return t.prototype.gu=function(t){this.Rl=t},t.prototype.Tu=function(t){this.gl=t},t.prototype.onMessage=function(t){this.Pl=t},t.prototype.close=function(){this.Al()},t.prototype.send=function(t){this.Il(t)},t.prototype.yl=function(){this.Rl()},t.prototype.Vl=function(t){this.gl(t)},t.prototype.pl=function(t){this.Pl(t)},t}(),ea={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},na=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.W=e.W,n}return i.__extends(e,t),e.prototype.Nl=function(t,e,n,i){return new Promise((function(r,o){var s=new a.XhrIo;s.listenOnce(a.EventType.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case a.ErrorCode.NO_ERROR:var e=s.getResponseJson();f("Connection","XHR received:",JSON.stringify(e)),r(e);break;case a.ErrorCode.TIMEOUT:f("Connection",'RPC "'+t+'" timed out'),o(new h(u.DEADLINE_EXCEEDED,"Request time out"));break;case a.ErrorCode.HTTP_ERROR:var n=s.getStatus();if(f("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var i=s.getResponseJson().error;if(i&&i.status&&i.message){var l=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(u).indexOf(e)>=0?e:u.UNKNOWN}(i.status);o(new h(l,i.message))}else o(new h(u.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new h(u.UNAVAILABLE,"Connection failed."));break;default:y()}}finally{f("Connection",'RPC "'+t+'" completed.')}}));var l=JSON.stringify(i);s.send(e,"POST",l,n,15)}))},e.prototype.Pu=function(t,e){var n=[this.vl,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=a.createWebChannelTransport(),r={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.U.projectId+"/databases/"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.W};this.Cl(r.initMessageHeaders,e),s.isMobileCordova()||s.isReactNative()||s.isElectron()||s.isIE()||s.isUWP()||s.isBrowserExtension()||(r.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");f("Connection","Creating WebChannel: "+o,r);var l=i.createWebChannel(o,r),c=!1,d=!1,p=new ta({Il:function(t){d?f("Connection","Not sending because WebChannel is closed:",t):(c||(f("Connection","Opening WebChannel transport."),l.open(),c=!0),f("Connection","WebChannel sending:",t),l.send(t))},Al:function(){return l.close()}}),m=function(t,e){l.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return m(a.WebChannel.EventType.OPEN,(function(){d||f("Connection","WebChannel transport opened.")})),m(a.WebChannel.EventType.CLOSE,(function(){d||(d=!0,f("Connection","WebChannel transport closed"),p.Vl())})),m(a.WebChannel.EventType.ERROR,(function(t){d||(d=!0,g("Connection","WebChannel transport errored:",t),p.Vl(new h(u.UNAVAILABLE,"The operation could not be completed")))})),m(a.WebChannel.EventType.MESSAGE,(function(t){var e;if(!d){var n=t.data[0];b(!!n);var i=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(i){f("Connection","WebChannel received error:",i);var r=i.status,o=function(t){var e=vt[t];if(void 0!==e)return At(e)}(r),s=i.message;void 0===o&&(o=u.INTERNAL,s="Unknown error status: "+r+" with message "+i.message),d=!0,p.Vl(new h(o,s)),l.close()}else f("Connection","WebChannel received:",n),p.pl(n)}})),setTimeout((function(){p.yl()}),0),p},e}(function(){function t(t){this.bl=t,this.U=t.U,this.vl=(t.ssl?"https":"http")+"://"+t.host,this.Sl="projects/"+this.U.projectId+"/databases/"+this.U.database+"/documents"}return t.prototype.$u=function(t,e,n,i){var r=this.Dl(t,e);f("RestConnection","Sending: ",r,n);var o={};return this.Cl(o,i),this.Nl(t,r,o,n).then((function(t){return f("RestConnection","Received: ",t),t}),(function(e){throw g("RestConnection",t+" failed with error: ",e,"url: ",r,"request:",n),e}))},t.prototype.ku=function(t,e,n,i){return this.$u(t,e,n,i)},t.prototype.Cl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.24.0",t["Content-Type"]="text/plain",e)for(var n in e.Kc)e.Kc.hasOwnProperty(n)&&(t[n]=e.Kc[n])},t.prototype.Dl=function(t,e){return this.vl+"/v1/"+e+":"+ea[t]},t}()),ia=function(){function t(){var t=this;this.Fl=function(){return t.xl()},this.$l=function(){return t.kl()},this.Ml=[],this.Ol()}return t.prototype.Zu=function(t){this.Ml.push(t)},t.prototype.Di=function(){window.removeEventListener("online",this.Fl),window.removeEventListener("offline",this.$l)},t.prototype.Ol=function(){window.addEventListener("online",this.Fl),window.addEventListener("offline",this.$l)},t.prototype.xl=function(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(0)},t.prototype.kl=function(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(1)},t.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ra=function(){function t(){}return t.prototype.Zu=function(t){},t.prototype.Di=function(){},t}();function oa(t){return new ge(t,!0)}var sa="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",aa=function(){function t(){}return t.prototype.initialize=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.Sh=this.Ll(t),this.persistence=this.Bl(t),[4,this.persistence.start()];case 1:return e.sent(),this.ql=this.Ul(t),this.ju=this.Ql(t),[2]}}))}))},t.prototype.Ul=function(t){return null},t.prototype.Ql=function(t){return e=this.persistence,n=new qs,new mo(e,n,t.Wl);var e,n},t.prototype.Bl=function(t){if(t.persistenceSettings.jl)throw new h(u.FAILED_PRECONDITION,sa);return new Ks(Js.ml)},t.prototype.Ll=function(t){return new Yi},t.prototype.terminate=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.ql&&this.ql.stop(),[4,this.Sh.Di()];case 1:return t.sent(),[4,this.persistence.Di()];case 2:return t.sent(),[2]}}))}))},t.prototype.clearPersistence=function(t,e){throw new h(u.FAILED_PRECONDITION,sa)},t}(),la=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.initialize=function(e){return i.__awaiter(this,void 0,void 0,(function(){var n,r=this;return i.__generator(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Kl.fi,this.Sh instanceof $i?(this.Sh.fi={er:Ns.bind(null,n),nr:zs.bind(null,n),sr:Hs.bind(null,n),pi:js.bind(null,n)},[4,this.Sh.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.Xa((function(t){return i.__awaiter(r,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return[4,Bs(this.Kl.fi,t)];case 1:return e.sent(),this.ql&&(t&&!this.ql.Ei?this.ql.start(this.ju):t||this.ql.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},e.prototype.Ll=function(t){if(t.persistenceSettings.jl&&t.persistenceSettings.synchronizeTabs){var e=Ci();if(!$i.Ln(e))throw new h(u.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=fo(t.bl.U,t.bl.persistenceKey);return new $i(e,t.cs,n,t.clientId,t.Wl)}return new Yi},e}(function(t){function e(e){var n=this;return(n=t.call(this)||this).Kl=e,n}return i.__extends(e,t),e.prototype.initialize=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Eo(this.ju)];case 2:return n.sent(),[4,this.Kl.initialize(this,e)];case 3:return n.sent(),[4,Ws(this.Kl.fi)];case 4:return n.sent(),[4,ns(this.Kl.ph)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ul=function(t){return new sr(this.persistence.No.wo,t.cs)},e.prototype.Bl=function(t){var e=fo(t.bl.U,t.bl.persistenceKey),n=oa(t.bl.U);return new lo(t.persistenceSettings.synchronizeTabs,e,t.clientId,or.ao(t.persistenceSettings.cacheSizeBytes),t.cs,Ci(),Ei(),n,this.Sh,t.persistenceSettings.ka)},e.prototype.Ll=function(t){return new Yi},e.prototype.clearPersistence=function(t,e){return function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return mi.Ln()?[4,mi.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(fo(t,e))},e}(aa)),ca=function(){function t(){}return t.prototype.initialize=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.ju?[3,2]:(this.ju=t.ju,this.Sh=t.Sh,this.Ku=this.Gl(e),this.ph=this.zl(e),this.bh=this.Hl(e),this.fi=this.Yl(e),this.Sh.di=function(t){return As(n.fi,t,1)},this.ph.Gu.Jl=Is.bind(null,this.fi),[4,cs(this.ph,this.fi.Uh)]);case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},t.prototype.Hl=function(t){return new ki},t.prototype.Gl=function(t){var e=oa(t.bl.U),n=new na(t.bl);return function(t,e,n){return new No(t,e,n)}(t.credentials,n,e)},t.prototype.zl=function(t){var e,n,i,r,o,s=this;return e=this.ju,n=this.Ku,i=t.cs,r=function(t){return As(s.fi,t,0)},o=ia.Ln()?new ia:new ra,new Uo(e,n,i,r,o)},t.prototype.Yl=function(t){return function(t,e,n,i,r,o,s){var a=new vs(t,e,n,i,r,o);return s&&(a.qh=!0),a}(this.ju,this.ph,this.bh,this.Sh,t.Wl,t.Dh,!t.persistenceSettings.jl||!t.persistenceSettings.synchronizeTabs)},t.prototype.terminate=function(){return zo(this.ph)},t}(),ua=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Xl(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Xl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Zl=function(){this.muted=!0},t.prototype.Xl=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),ha=function(t){!function(t,e,n,i){if(!(e instanceof Array)||e.length<1)throw new h(u.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+$(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(R("FieldPath","string",e,t[e]),0===t[e].length)throw new h(u.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.t_=new M(t)},da=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return i.__extends(e,t),e.documentId=function(){return new e(M.v().R())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","FieldPath",1,t);return this.t_.isEqual(t.t_)},e}(ha),pa=new RegExp("[~\\*/\\[\\]]"),fa=function(t){this.e_=t},ma=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.n_=function(t){if(2!==t.s_)throw t.i_(1===t.s_?this.e_+"() can only appear at the top level of your update data":this.e_+"() cannot be used with set() unless you pass {merge:true}");return t.We.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(fa);function ga(t,e,n){return new Ta({s_:3,r_:e.settings.r_,methodName:t.e_,o_:n},e.U,e.serializer,e.ignoreUndefinedProperties)}var va=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.n_=function(t){return new an(t.path,new Ke)},e.prototype.isEqual=function(t){return t instanceof e},e}(fa),ya=function(t){function e(e,n){var i=this;return(i=t.call(this,e)||this).a_=n,i}return i.__extends(e,t),e.prototype.n_=function(t){var e=ga(this,t,!0),n=this.a_.map((function(t){return Ia(t,e)})),i=new Ze(n);return new an(t.path,i)},e.prototype.isEqual=function(t){return this===t},e}(fa),ba=function(t){function e(e,n){var i=this;return(i=t.call(this,e)||this).a_=n,i}return i.__extends(e,t),e.prototype.n_=function(t){var e=ga(this,t,!0),n=this.a_.map((function(t){return Ia(t,e)})),i=new tn(n);return new an(t.path,i)},e.prototype.isEqual=function(t){return this===t},e}(fa),_a=function(t){function e(e,n){var i=this;return(i=t.call(this,e)||this).c_=n,i}return i.__extends(e,t),e.prototype.n_=function(t){var e=new nn(t.serializer,be(t.serializer,this.c_));return new an(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(fa),wa=function(){function t(t,e){if(k("GeoPoint",arguments,2),R("GeoPoint","number",1,t),R("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new h(u.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new h(u.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.u_=t,this.h_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.u_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.u_===t.u_&&this.h_===t.h_},t.prototype.toJSON=function(){return{latitude:this.u_,longitude:this.h_}},t.prototype.Y=function(t){return X(this.u_,t.u_)||X(this.h_,t.h_)},t}(),Aa=function(t){this.l_=t},xa=/^__.*__$/,Ca=function(t,e,n){this.__=t,this.f_=e,this.d_=n},Ea=function(){function t(t,e,n){this.data=t,this.We=e,this.fieldTransforms=n}return t.prototype.w_=function(t,e){var n=[];return n.push(null!==this.We?new yn(t,this.data,this.We,e):new vn(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new _n(t,this.fieldTransforms)),n},t}(),Sa=function(){function t(t,e,n){this.data=t,this.We=e,this.fieldTransforms=n}return t.prototype.w_=function(t,e){var n=[new yn(t,this.data,this.We,e)];return this.fieldTransforms.length>0&&n.push(new _n(t,this.fieldTransforms)),n},t}();function Ma(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw y()}}var Ta=function(){function t(t,e,n,i,r,o){this.settings=t,this.U=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.m_(),this.fieldTransforms=r||[],this.We=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"s_",{get:function(){return this.settings.s_},enumerable:!1,configurable:!0}),t.prototype.T_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.We)},t.prototype.E_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.T_({path:n,o_:!1});return i.I_(t),i},t.prototype.A_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.T_({path:n,o_:!1});return i.m_(),i},t.prototype.R_=function(t){return this.T_({path:void 0,o_:!0})},t.prototype.i_=function(t){return Va(t,this.settings.methodName,this.settings.g_||!1,this.path,this.settings.r_)},t.prototype.contains=function(t){return void 0!==this.We.find((function(e){return t.T(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.T(e.field)}))},t.prototype.m_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.I_(this.path.get(t))},t.prototype.I_=function(t){if(0===t.length)throw this.i_("Document fields must not be empty");if(Ma(this.s_)&&xa.test(t))throw this.i_('Document fields cannot begin and end with "__"')},t}(),Pa=function(){function t(t,e,n){this.U=t,this.ignoreUndefinedProperties=e,this.serializer=n||oa(t)}return t.prototype.P_=function(t,e,n,i){return void 0===i&&(i=!1),new Ta({s_:t,methodName:e,r_:n,path:M.P(),o_:!1,g_:i},this.U,this.serializer,this.ignoreUndefinedProperties)},t}();function ka(t,e,n,i,r,o){void 0===o&&(o={});var s=t.P_(o.merge||o.mergeFields?2:0,e,n,r);Na("Data must be an object, but it was:",s,i);var a,l,c=La(i,s);if(o.merge)a=new sn(s.We),l=s.fieldTransforms;else if(o.mergeFields){for(var d=[],p=0,f=o.mergeFields;p<f.length;p++){var m=f[p],g=void 0;if(m instanceof ha)g=m.t_;else{if("string"!=typeof m)throw y();g=Ua(e,m,n)}if(!s.contains(g))throw new h(u.INVALID_ARGUMENT,"Field '"+g+"' is specified in your field mask but missing from your input data.");ja(d,g)||d.push(g)}a=new sn(d),l=s.fieldTransforms.filter((function(t){return a.Ye(t.field)}))}else a=null,l=s.fieldTransforms;return new Ea(new En(c),a,l)}function Da(t,e,n,i){var r=t.P_(1,e,n);Na("Data must be an object, but it was:",r,i);var o=[],s=new Sn;A(i,(function(t,i){var a=Ua(e,t,n),l=r.A_(a);if(i instanceof ma||i instanceof Aa&&i.l_ instanceof ma)o.push(a);else{var c=Ia(i,l);null!=c&&(o.push(a),s.set(a,c))}}));var a=new sn(o);return new Sa(s.Xe(),a,r.fieldTransforms)}function Oa(t,e,n,i,r,o){var s=t.P_(1,e,n),a=[Ba(e,i,n)],l=[r];if(o.length%2!=0)throw new h(u.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Ba(e,o[c])),l.push(o[c+1]);for(var d=[],p=new Sn,f=a.length-1;f>=0;--f)if(!ja(d,a[f])){var m=a[f],g=l[f],v=s.A_(m);if(g instanceof ma||g instanceof Aa&&g.l_ instanceof ma)d.push(m);else{var y=Ia(g,v);null!=y&&(d.push(m),p.set(m,y))}}var b=new sn(d);return new Sa(p.Xe(),b,s.fieldTransforms)}function Ra(t,e,n,i){return void 0===i&&(i=!1),Ia(n,t.P_(i?4:3,e))}function Ia(t,e){if(t instanceof Aa&&(t=t.l_),Fa(t))return Na("Unsupported field value:",e,t),La(t,e);if(t instanceof fa)return function(t,e){if(!Ma(e.s_))throw e.i_(t.e_+"() can only be used with update() and set()");if(!e.path)throw e.i_(t.e_+"() is not currently supported inside arrays");var n=t.n_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.We.push(e.path),t instanceof Array){if(e.settings.o_&&4!==e.s_)throw e.i_("Nested arrays are not supported");return function(t,e){for(var n=[],i=0,r=0,o=t;r<o.length;r++){var s=Ia(o[r],e.R_(i));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return be(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=at.fromDate(t);return{timestampValue:_e(e.serializer,n)}}if(t instanceof at){var i=new at(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:_e(e.serializer,i)}}if(t instanceof wa)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tt)return{bytesValue:we(e.serializer,t.q)};if(t instanceof Ca){var r=e.U,o=t.__;if(!o.isEqual(r))throw e.i_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+r.projectId+"/"+r.database);return{referenceValue:Ce(t.__||e.U,t.f_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.i_("Unsupported field value: "+j(t))}(t,e)}function La(t,e){var n={};return x(t)?e.path&&e.path.length>0&&e.We.push(e.path):A(t,(function(t,i){var r=Ia(i,e.E_(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function Fa(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof at||t instanceof wa||t instanceof tt||t instanceof Ca||t instanceof fa)}function Na(t,e,n){if(!Fa(n)||!V(n)){var i=j(n);throw e.i_("an object"===i?t+" a custom object":t+" "+i)}}function Ba(t,e,n){if(e instanceof ha)return e.t_;if("string"==typeof e)return Ua(t,e);throw Va("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Ua(t,e,n){try{return function(t){if(t.search(pa)>=0)throw new h(u.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(da.bind.apply(da,i.__spreadArrays([void 0],t.split("."))))}catch(i){throw new h(u.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).t_}catch(e){throw Va((r=e)instanceof Error?r.message:r.toString(),t,!1,void 0,n)}var r}function Va(t,e,n,i,r){var o=i&&!i.m(),s=void 0!==r,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var l="";return(o||s)&&(l+=" (found",o&&(l+=" in field "+i),s&&(l+=" in document "+r),l+=")"),new h(u.INVALID_ARGUMENT,(a+=". ")+t+l)}function ja(t,e){return t.some((function(t){return t.isEqual(e)}))}var za=function(){function t(t){this.Ku=t,this.y_=new Map,this.mutations=[],this.V_=!1,this.p_=null,this.b_=new Set}return t.prototype.v_=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:if(this.S_(),this.mutations.length>0)throw new h(u.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a,l;return i.__generator(this,(function(i){switch(i.label){case 0:return n=_(t),r=ke(n.serializer)+"/documents",o={documents:e.map((function(t){return Se(n.serializer,t)}))},[4,n.ku("BatchGetDocuments",r,o)];case 1:return s=i.sent(),a=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){b(!!e.found);var n=Me(t,e.found.name),i=xe(e.found.updateTime),r=new En({mapValue:{fields:e.found.fields}});return new Pn(n,i,r,{})}(t,e):"missing"in e?function(t,e){b(!!e.missing),b(!!e.readTime);var n=Me(t,e.missing),i=xe(e.readTime);return new kn(n,i)}(t,e):y()}(n.serializer,t);a.set(e.key.toString(),e)})),l=[],[2,(e.forEach((function(t){var e=a.get(t.toString());b(!!e),l.push(e)})),l)]}}))}))}(this.Ku,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof kn||t instanceof Pn?n.D_(t):y()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.w_(t,this.Ge(t))),this.b_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.w_(t,this.C_(t)))}catch(t){this.p_=t}this.b_.add(t.toString())},t.prototype.delete=function(t){this.write([new xn(t,this.Ge(t))]),this.b_.add(t.toString())},t.prototype.commit=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){switch(n.label){case 0:if(this.S_(),this.p_)throw this.p_;return t=this.y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var i=T.D(n);e.mutations.push(new Cn(i,e.Ge(i)))})),[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:return n=_(t),r=ke(n.serializer)+"/documents",o={writes:e.map((function(t){return Re(n.serializer,t)}))},[4,n.$u("Commit",r,o)];case 1:return i.sent(),[2]}}))}))}(this.Ku,this.mutations)];case 1:return n.sent(),this.V_=!0,[2]}}))}))},t.prototype.D_=function(t){var e;if(t instanceof Pn)e=t.version;else{if(!(t instanceof kn))throw y();e=lt.min()}var n=this.y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new h(u.ABORTED,"Document version changed between two reads.")}else this.y_.set(t.key.toString(),e)},t.prototype.Ge=function(t){var e=this.y_.get(t.toString());return!this.b_.has(t.toString())&&e?cn.updateTime(e):cn.ze()},t.prototype.C_=function(t){var e=this.y_.get(t.toString());if(!this.b_.has(t.toString())&&e){if(e.isEqual(lt.min()))throw new h(u.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cn.updateTime(e)}return cn.exists(!0)},t.prototype.write=function(t){this.S_(),this.mutations=this.mutations.concat(t)},t.prototype.S_=function(){},t}(),Ha=function(){function t(t,e,n,i){this.cs=t,this.Ku=e,this.updateFunction=n,this.ls=i,this.N_=5,this.ys=new pi(this.cs,"transaction_retry")}return t.prototype.run=function(){this.F_()},t.prototype.F_=function(){var t=this;this.ys.gn((function(){return i.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return i.__generator(this,(function(i){return t=new za(this.Ku),(e=this.x_(t))&&e.then((function(e){n.cs.ws((function(){return t.commit().then((function(){n.ls.resolve(e)})).catch((function(t){n.k_(t)}))}))})).catch((function(t){n.k_(t)})),[2]}))}))}))},t.prototype.x_=function(t){try{var e=this.updateFunction(t);return!ct(e)&&e.catch&&e.then?e:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ls.reject(t),null}},t.prototype.k_=function(t){var e=this;this.N_>0&&this.M_(t)?(this.N_-=1,this.cs.ws((function(){return e.F_(),Promise.resolve()}))):this.ls.reject(t)},t.prototype.M_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!wt(e)}return!1},t}(),Ga=function(){function t(t,e){this.credentials=t,this.cs=e,this.clientId=Q.k(),this.O_=new di}return t.prototype.start=function(t,e,n,r){var o=this;this.L_(),this.bl=t;var s=new di,a=!1;return this.credentials.Hc((function(t){if(!a)return a=!0,f("FirestoreClient","Initializing. user=",t.uid),o.B_(e,n,r,t,s).then(o.O_.resolve,o.O_.reject);o.cs.Cs((function(){return function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r;return i.__generator(this,(function(i){switch(i.label){case 0:return(n=_(t)).cs.xs(),f("RemoteStore","RemoteStore received new credentials"),r=Qo(n),n.Yu.add(3),[4,jo(n)];case 1:return i.sent(),r&&n.th.set("Unknown"),[4,n.Gu.Jl(e)];case 2:return i.sent(),n.Yu.delete(3),[4,Vo(n)];case 3:return i.sent(),[2]}}))}))}(o.ph,t)}))})),this.cs.ws((function(){return o.O_.promise})),s.promise},t.prototype.enableNetwork=function(){var t=this;return this.L_(),this.cs.enqueue((function(){return t.persistence.tc(!0),function(t){var e=_(t);return e.Yu.delete(0),Vo(e)}(t.ph)}))},t.prototype.B_=function(t,e,n,r,o){return i.__awaiter(this,void 0,void 0,(function(){var s,a,l=this;return i.__generator(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,t.initialize(s={cs:this.cs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Wl:r,Dh:100,persistenceSettings:n})];case 1:return c.sent(),[4,e.initialize(t,s)];case 2:return c.sent(),this.persistence=t.persistence,this.Sh=t.Sh,this.ju=t.ju,this.ql=t.ql,this.Ku=e.Ku,this.ph=e.ph,this.fi=e.fi,this.q_=e.bh,this.q_.Us=ys.bind(null,this.fi),this.q_.js=_s.bind(null,this.fi),this.persistence.Za((function(){return i.__awaiter(l,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),o.resolve(),[3,4];case 3:if(a=c.sent(),o.reject(a),!this.U_(a))throw a;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),this.B_(new aa,new ca,{jl:!1},r,o))];case 4:return[2]}}))}))},t.prototype.U_=function(t){return"FirebaseError"===t.name?t.code===u.FAILED_PRECONDITION||t.code===u.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.L_=function(){if(this.cs.ps)throw new h(u.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.L_(),this.cs.enqueue((function(){return t.persistence.tc(!1),function(t){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:return(e=_(t)).Yu.add(0),[4,jo(e)];case 1:return n.sent(),e.th.set("Offline"),[2]}}))}))}(t.ph)}))},t.prototype.terminate=function(){var t=this;this.cs.Ds();var e=new di;return this.cs.bs((function(){return i.__awaiter(t,void 0,void 0,(function(){var t,n;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,zo(this.ph)];case 1:return i.sent(),[4,this.Sh.Di()];case 2:return i.sent(),[4,this.persistence.Di()];case 3:return i.sent(),this.credentials.Yc(),e.resolve(),[3,5];case 4:return t=i.sent(),n=Ti(t,"Failed to shutdown persistence"),e.reject(n),[3,5];case 5:return[2]}}))}))})),e.promise},t.prototype.waitForPendingWrites=function(){var t=this;this.L_();var e=new di;return this.cs.ws((function(){return function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a;return i.__generator(this,(function(i){switch(i.label){case 0:Qo((n=_(t)).ph)||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,function(t){var e=_(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Sr.qo(t)}))}(n.ju)];case 2:return-1===(r=i.sent())?[2,void e.resolve()]:((o=n.Lh.get(r)||[]).push(e),n.Lh.set(r,o),[3,4]);case 3:return s=i.sent(),a=Ti(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}(t.fi,e)})),e.promise},t.prototype.listen=function(t,e,n){var i=this;this.L_();var r=new ua(n),o=new Fi(t,r,e);return this.cs.ws((function(){return Di(i.q_,o)})),function(){r.Zl(),i.cs.ws((function(){return Oi(i.q_,o)}))}},t.prototype.Q_=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return r.sent(),e=new di,[2,(this.cs.ws((function(){return function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,s;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t,e){var n=_(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Cc.Cr(t,e)}))}(t,e)];case 1:return(r=i.sent())instanceof Pn?n.resolve(r):r instanceof kn?n.resolve(null):n.reject(new h(u.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=i.sent(),s=Ti(o,"Failed to get document '"+e+" from cache"),n.reject(s),[3,3];case 3:return[2]}}))}))}(n.ju,t,e)})),e.promise)]}}))}))},t.prototype.W_=function(t,e){return void 0===e&&(e={}),i.__awaiter(this,void 0,void 0,(function(){var n,r=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return i.sent(),n=new di,[2,(this.cs.ws((function(){return function(t,e,n,i,r){var o=new ua({next:function(o){e.ws((function(){return Oi(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?r.reject(new h(u.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&i&&"server"===i.source?r.reject(new h(u.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(o)},error:function(t){return r.reject(t)}}),s=new Fi(In(n.path),o,{includeMetadataChanges:!0,Xs:!0});return Di(t,s)}(r.q_,r.cs,t,e,n)})),n.promise)]}}))}))},t.prototype.j_=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return r.sent(),e=new di,[2,(this.cs.ws((function(){return function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,s,a,l,c;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Ao(t,e,!0)];case 1:return r=i.sent(),o=new fs(e,r.Fc),s=o.wh(r.documents),a=o.yr(s,!1),n.resolve(a.snapshot),[3,3];case 2:return l=i.sent(),c=Ti(l,"Failed to execute query '"+e+" against cache"),n.reject(c),[3,3];case 3:return[2]}}))}))}(n.ju,t,e)})),e.promise)]}}))}))},t.prototype.K_=function(t,e){return void 0===e&&(e={}),i.__awaiter(this,void 0,void 0,(function(){var n,r=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return i.sent(),n=new di,[2,(this.cs.ws((function(){return function(t,e,n,i,r){var o=new ua({next:function(n){e.ws((function(){return Oi(t,s)})),n.fromCache&&"server"===i.source?r.reject(new h(u.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:function(t){return r.reject(t)}}),s=new Fi(n,o,{includeMetadataChanges:!0,Xs:!0});return Di(t,s)}(r.q_,r.cs,t,e,n)})),n.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.L_();var n=new di;return this.cs.ws((function(){return function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,s,a;return i.__generator(this,(function(i){switch(i.label){case 0:r=Ws(t),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,function(t,e){var n,i=_(t),r=at.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Lt());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return i.Cc.kr(t,o).next((function(o){n=o;for(var s=[],a=0,l=e;a<l.length;a++){var c=l[a],u=fn(c,n.get(c.key));null!=u&&s.push(new yn(c.key,u,Mn(u.proto.mapValue),cn.exists(!0)))}return i.Sr.ko(t,r,s,e)}))})).then((function(t){var e=t.lr(n);return{batchId:t.batchId,wr:e}}))}(r.ju,e)];case 2:return o=i.sent(),r.Sh.xi(o.batchId),function(t,e,n){var i=t.Oh[t.currentUser.ti()];i||(i=new xt(X)),i=i.ot(e,n),t.Oh[t.currentUser.ti()]=i}(r,o.batchId,n),[4,Rs(r,o.wr)];case 3:return i.sent(),[4,ns(r.ph)];case 4:return i.sent(),[3,6];case 5:return s=i.sent(),a=Ti(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}(e.fi,t,n)})),n.promise},t.prototype.U=function(){return this.bl.U},t.prototype.G_=function(t){var e=this;this.L_();var n=new ua(t);return this.cs.ws((function(){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(t){return[2,function(t,e){_(t).qs.add(e),e.next()}(this.q_,n)]}))}))})),function(){n.Zl(),e.cs.ws((function(){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(t){return[2,function(t,e){_(t).qs.delete(e)}(this.q_,n)]}))}))}))}},Object.defineProperty(t.prototype,"z_",{get:function(){return this.cs.ps},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.L_();var n=new di;return this.cs.ws((function(){return new Ha(e.cs,e.Ku,t,n).run(),Promise.resolve()})),n.promise},t}();function Wa(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,i=0,r=["next","error","complete"];i<r.length;i++){var o=r[i];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var qa=function(){function t(t,e,n,i,r){this.U=t,this.timestampsInSnapshots=e,this.H_=n,this.Y_=i,this.J_=r}return t.prototype.X_=function(t){switch(Jt(t)){case 0:return null;case 1:return t.booleanValue;case 2:return se(t.integerValue||t.doubleValue);case 3:return this.Z_(t.timestampValue);case 4:return this.tf(t);case 5:return t.stringValue;case 6:return this.J_(ae(t.bytesValue));case 7:return this.ef(t.referenceValue);case 8:return this.nf(t.geoPointValue);case 9:return this.sf(t.arrayValue);case 10:return this.if(t.mapValue);default:throw y()}},t.prototype.if=function(t){var e=this,n={};return A(t.fields||{},(function(t,i){n[t]=e.X_(i)})),n},t.prototype.nf=function(t){return new wa(se(t.latitude),se(t.longitude))},t.prototype.sf=function(t){var e=this;return(t.values||[]).map((function(t){return e.X_(t)}))},t.prototype.tf=function(t){switch(this.H_){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Xt(n)?t(n):n}(t);return null==e?null:this.X_(e);case"estimate":return this.Z_(Kt(t));default:return null}},t.prototype.Z_=function(t){var e=oe(t),n=new at(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.ef=function(t){var e=E.g(t);b(qe(e));var n=new ot(e.get(1),e.get(3)),i=new T(e.u(5));return n.isEqual(this.U)||m("Document "+i+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.U.projectId+"/"+this.U.database+") instead."),this.Y_(i)},t}(),$a=or.ho,Ya=function(){function t(t){var e,n,i,r,o;if(void 0===t.host){if(void 0!==t.ssl)throw new h(u.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else L("settings","non-empty string","host",t.host),this.host=t.host,F("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(H("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","experimentalAutoDetectLongPolling","ignoreUndefinedProperties"]),F("settings","object","credentials",t.credentials),this.credentials=t.credentials,F("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),F("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?m("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&m("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(i=t.ignoreUndefinedProperties)&&void 0!==i&&i,F("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=or._o;else{if(t.cacheSizeBytes!==$a&&t.cacheSizeBytes<or.lo)throw new h(u.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+or.lo);this.cacheSizeBytes=t.cacheSizeBytes}F("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(r=t.experimentalForceLongPolling)&&void 0!==r&&r,F("settings","boolean","experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalAutoDetectLongPolling=null!==(o=t.experimentalAutoDetectLongPolling)&&void 0!==o&&o,function(t,e,n,i){if(!0===e&&!0===i)throw new h(u.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Qa=function(){function t(e,n,r,o){var s=this;if(void 0===r&&(r=new aa),void 0===o&&(o=new ca),this.rf=r,this.af=o,this.cf=null,this.uf=new Mi,this.INTERNAL={delete:function(){return i.__awaiter(s,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.hf(),[4,this.lf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var a=e;this.cf=a,this.__=t._f(a),this.ff=a.name,this.df=new Do(n)}else{var l=e;if(!l.projectId)throw new h(u.INVALID_ARGUMENT,"Must provide projectId");this.__=new ot(l.projectId,l.database),this.ff="[DEFAULT]",this.df=new ko}this.wf=new Ya({})}return Object.defineProperty(t.prototype,"mf",{get:function(){return this.Tf||(this.Tf=new Pa(this.__,this.wf.ignoreUndefinedProperties)),this.Tf},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){k("Firestore.settings",arguments,1),R("Firestore.settings","object",1,t),t.merge&&delete(t=Object.assign(Object.assign({},this.wf),t)).merge;var e=new Ya(t);if(this.lf&&!this.wf.isEqual(e))throw new h(u.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.wf=e,void 0!==e.credentials&&(this.df=function(t){if(!t)return new ko;switch(t.type){case"gapi":var e=t.client;return b(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ro(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new h(u.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.hf(),this.lf.enableNetwork()},t.prototype.disableNetwork=function(){return this.hf(),this.lf.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.lf)throw new h(u.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var i=!1,r=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&m("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),i=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,r=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,i&&r))throw new h(u.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Ef(this.rf,this.af,{jl:!0,cacheSizeBytes:this.wf.cacheSizeBytes,synchronizeTabs:i,ka:r})},t.prototype.clearPersistence=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){if(void 0!==this.lf&&!this.lf.z_)throw new h(u.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new di,[2,(this.uf.bs((function(){return i.__awaiter(e,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.rf.clearPersistence(this.__,this.ff)];case 1:return n.sent(),t.resolve(),[3,3];case 2:return e=n.sent(),t.reject(e),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"If",{get:function(){return this.hf(),this.lf.z_},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.hf(),this.lf.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){return this.hf(),Wa(t)?this.lf.G_(t):(R("Firestore.onSnapshotsInSync","function",1,t),this.lf.G_({next:t}))},t.prototype.hf=function(){return this.lf||this.Ef(new aa,new ca,{jl:!1}),this.lf},t.prototype.Af=function(){return new rt(this.__,this.ff,this.wf.host,this.wf.ssl,this.wf.experimentalForceLongPolling,this.wf.experimentalAutoDetectLongPolling)},t.prototype.Ef=function(t,e,n){var i=this.Af();return this.lf=new Ga(this.df,this.uf),this.lf.start(i,t,e,n)},t._f=function(t){if(!Object.prototype.hasOwnProperty.call(t.options,"projectId"))throw new h(u.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e=t.options.projectId;if(!e||"string"!=typeof e)throw new h(u.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ot(e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.cf)throw new h(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return k("Firestore.collection",arguments,1),R("Firestore.collection","non-empty string",1,t),this.hf(),new ul(E.g(t),this,null)},t.prototype.doc=function(t){return k("Firestore.doc",arguments,1),R("Firestore.doc","non-empty string",1,t),this.hf(),Za.Rf(E.g(t),this,null)},t.prototype.collectionGroup=function(t){if(k("Firestore.collectionGroup",arguments,1),R("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new h(u.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.hf(),new ll(function(t){return new On(E.P(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return k("Firestore.runTransaction",arguments,1),R("Firestore.runTransaction","function",1,t),this.hf().transaction((function(n){return t(new Xa(e,n))}))},t.prototype.batch=function(){return this.hf(),new Ka(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(p()){case o.LogLevel.DEBUG:return"debug";case o.LogLevel.ERROR:return"error";case o.LogLevel.SILENT:return"silent";case o.LogLevel.WARN:return"warn";case o.LogLevel.INFO:return"info";case o.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){k("Firestore.setLogLevel",arguments,1),B("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),d.setLogLevel(t)},t.prototype.gf=function(){return this.wf.timestampsInSnapshots},t.prototype.Pf=function(){return this.wf},t}(),Xa=function(){function t(t,e){this.yf=t,this.Vf=e}return t.prototype.get=function(t){var e=this;k("Transaction.get",arguments,1);var n=fl("Transaction.get",t,this.yf);return this.Vf.v_([n.f_]).then((function(t){if(!t||1!==t.length)return y();var i=t[0];if(i instanceof kn)return new tl(e.yf,n.f_,null,!1,!1,n.d_);if(i instanceof Pn)return new tl(e.yf,n.f_,i,!1,!1,n.d_);throw y()}))},t.prototype.set=function(t,e,n){O("Transaction.set",arguments,2,3);var i=fl("Transaction.set",t,this.yf);n=hl("Transaction.set",n);var r=gl(i.d_,e,n),o=ka(this.yf.mf,"Transaction.set",i.f_,r,null!==i.d_,n);return this.Vf.set(i.f_,o),this},t.prototype.update=function(t,e,n){for(var i,r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof da?(D("Transaction.update",arguments,3),i=fl("Transaction.update",t,this.yf),r=Oa(this.yf.mf,"Transaction.update",i.f_,e,n,o)):(k("Transaction.update",arguments,2),i=fl("Transaction.update",t,this.yf),r=Da(this.yf.mf,"Transaction.update",i.f_,e)),this.Vf.update(i.f_,r),this},t.prototype.delete=function(t){k("Transaction.delete",arguments,1);var e=fl("Transaction.delete",t,this.yf);return this.Vf.delete(e.f_),this},t}(),Ka=function(){function t(t){this.yf=t,this.pf=[],this.bf=!1}return t.prototype.set=function(t,e,n){O("WriteBatch.set",arguments,2,3),this.vf();var i=fl("WriteBatch.set",t,this.yf);n=hl("WriteBatch.set",n);var r=gl(i.d_,e,n),o=ka(this.yf.mf,"WriteBatch.set",i.f_,r,null!==i.d_,n);return this.pf=this.pf.concat(o.w_(i.f_,cn.ze())),this},t.prototype.update=function(t,e,n){for(var i,r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.vf(),"string"==typeof e||e instanceof da?(D("WriteBatch.update",arguments,3),i=fl("WriteBatch.update",t,this.yf),r=Oa(this.yf.mf,"WriteBatch.update",i.f_,e,n,o)):(k("WriteBatch.update",arguments,2),i=fl("WriteBatch.update",t,this.yf),r=Da(this.yf.mf,"WriteBatch.update",i.f_,e)),this.pf=this.pf.concat(r.w_(i.f_,cn.exists(!0))),this},t.prototype.delete=function(t){k("WriteBatch.delete",arguments,1),this.vf();var e=fl("WriteBatch.delete",t,this.yf);return this.pf=this.pf.concat(new xn(e.f_,cn.ze())),this},t.prototype.commit=function(){return this.vf(),this.bf=!0,this.pf.length>0?this.yf.hf().write(this.pf):Promise.resolve()},t.prototype.vf=function(){if(this.bf)throw new h(u.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Za=function(t){function e(e,n,i){var r=this;return(r=t.call(this,n.__,e,i)||this).f_=e,r.firestore=n,r.d_=i,r.lf=r.firestore.hf(),r}return i.__extends(e,t),e.Rf=function(t,n,i){if(t.length%2!=0)throw new h(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.R()+" has "+t.length);return new e(new T(t),n,i)},Object.defineProperty(e.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new ul(this.f_.path.h(),this.firestore,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.f_.path.R()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(k("DocumentReference.collection",arguments,1),R("DocumentReference.collection","non-empty string",1,t),!t)throw new h(u.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=E.g(t);return new ul(this.f_.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.f_.isEqual(t.f_)&&this.d_===t.d_},e.prototype.set=function(t,e){O("DocumentReference.set",arguments,1,2),e=hl("DocumentReference.set",e);var n=gl(this.d_,t,e),i=ka(this.firestore.mf,"DocumentReference.set",this.f_,n,null!==this.d_,e);return this.lf.write(i.w_(this.f_,cn.ze()))},e.prototype.update=function(t,e){for(var n,i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return"string"==typeof t||t instanceof da?(D("DocumentReference.update",arguments,2),n=Oa(this.firestore.mf,"DocumentReference.update",this.f_,t,e,i)):(k("DocumentReference.update",arguments,1),n=Da(this.firestore.mf,"DocumentReference.update",this.f_,t)),this.lf.write(n.w_(this.f_,cn.exists(!0)))},e.prototype.delete=function(){return k("DocumentReference.delete",arguments,0),this.lf.write([new xn(this.f_,cn.ze())])},e.prototype.onSnapshot=function(){for(var t,e,n,i=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];O("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},a=0;"object"!=typeof r[a]||Wa(r[a])||(H("DocumentReference.onSnapshot",s=r[a],["includeMetadataChanges"]),F("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++);var l={includeMetadataChanges:s.includeMetadataChanges};if(Wa(r[a])){var c=r[a];r[a]=null===(t=c.next)||void 0===t?void 0:t.bind(c),r[a+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),r[a+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else R("DocumentReference.onSnapshot","function",a,r[a]),I("DocumentReference.onSnapshot","function",a+1,r[a+1]),I("DocumentReference.onSnapshot","function",a+2,r[a+2]);var u={next:function(t){r[a]&&r[a](i.Sf(t))},error:r[a+1],complete:r[a+2]};return this.lf.listen(In(this.f_.path),l,u)},e.prototype.get=function(t){var e=this;O("DocumentReference.get",arguments,0,1),pl("DocumentReference.get",t);var n=this.firestore.hf();return t&&"cache"===t.source?n.Q_(this.f_).then((function(t){return new tl(e.firestore,e.f_,t,!0,t instanceof Pn&&t.Je,e.d_)})):n.W_(this.f_,t).then((function(t){return e.Sf(t)}))},e.prototype.withConverter=function(t){return new e(this.f_,this.firestore,t)},e.prototype.Sf=function(t){var e=t.docs.get(this.f_);return new tl(this.firestore,this.f_,e,t.fromCache,t.hasPendingWrites,this.d_)},e}(Ca),Ja=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),tl=function(){function t(t,e,n,i,r,o){this.yf=t,this.f_=e,this.Df=n,this.Cf=i,this.Nf=r,this.d_=o}return t.prototype.data=function(t){var e=this;if(O("DocumentSnapshot.data",arguments,0,1),t=dl("DocumentSnapshot.data",t),this.Df){if(this.d_){var n=new el(this.yf,this.f_,this.Df,this.Cf,this.Nf,null);return this.d_.fromFirestore(n,t)}return new qa(this.yf.__,this.yf.gf(),t.serverTimestamps||"none",(function(t){return new Za(t,e.yf,null)}),(function(t){return new it(t)})).X_(this.Df.rn())}},t.prototype.get=function(t,e){var n=this;if(O("DocumentSnapshot.get",arguments,1,2),e=dl("DocumentSnapshot.get",e),this.Df){var i=this.Df.data().field(Ba("DocumentSnapshot.get",t,this.f_));if(null!==i)return new qa(this.yf.__,this.yf.gf(),e.serverTimestamps||"none",(function(t){return new Za(t,n.yf,n.d_)}),(function(t){return new it(t)})).X_(i)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Za(this.f_,this.yf,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Df},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Ja(this.Nf,this.Cf)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","DocumentSnapshot",1,e);return this.yf===e.yf&&this.Cf===e.Cf&&this.f_.isEqual(e.f_)&&(null===this.Df?null===e.Df:this.Df.isEqual(e.Df))&&this.d_===e.d_},t}(),el=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(tl);function nl(t,e,n,i,r,o,s){var a;if(r.p()){if("array-contains"===o||"array-contains-any"===o)throw new h(u.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){ol(s,o);for(var l=[],c=0,d=s;c<d.length;c++)l.push(rl(i,t,d[c]));a={arrayValue:{values:l}}}else a=rl(i,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ol(s,o),a=Ra(n,e,s,"in"===o||"not-in"===o);var p=Xn.create(r,o,a);return function(t,e){if(e.hn()){var n=Bn(t);if(null!==n&&!n.isEqual(e.field))throw new h(u.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var i=Nn(t);null!==i&&sl(0,e.field,i)}var r=function(t,e){for(var n=0,i=t.filters;n<i.length;n++){var r=i[n];if(e.indexOf(r.op)>=0)return r.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==r)throw new h(u.INVALID_ARGUMENT,r===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+r.toString()+"' filters.")}(t,p),p}function il(t,e,n){if(null!==t.startAt)throw new h(u.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new h(u.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var i=new ci(e,n);return function(t,e){if(null===Nn(t)){var n=Bn(t);null!==n&&sl(0,n,e.field)}}(t,i),i}function rl(t,e,n){if("string"==typeof n){if(""===n)throw new h(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Un(e)&&-1!==n.indexOf("/"))throw new h(u.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var i=e.path.child(E.g(n));if(!T.F(i))throw new h(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+i+"' is not because it has an odd number of segments ("+i.length+").");return le(t,new T(i))}if(n instanceof Ca)return le(t,n.f_);throw new h(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+j(n)+".")}function ol(t,e){if(!Array.isArray(t)||0===t.length)throw new h(u.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new h(u.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(t.indexOf(null)>=0)throw new h(u.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new h(u.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}}function sl(t,e,n){if(!n.isEqual(e))throw new h(u.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function al(t){if(Fn(t)&&0===t.on.length)throw new h(u.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ll=function(){function t(t,e,n){this.Ff=t,this.firestore=e,this.d_=n}return t.prototype.where=function(e,n,i){k("Query.where",arguments,3),z("Query.where",3,i);var r=B("Query.where",["<","<=","==","!=",">=",">","array-contains","in","array-contains-any","not-in"],2,n),o=Ba("Query.where",e),s=nl(this.Ff,"Query.where",this.firestore.mf,this.firestore.__,o,r,i);return new t(function(t,e){var n=t.filters.concat([e]);return new On(t.path,t.collectionGroup,t.on.slice(),n,t.limit,t.an,t.startAt,t.endAt)}(this.Ff,s),this.firestore,this.d_)},t.prototype.orderBy=function(e,n){var i;if(O("Query.orderBy",arguments,1,2),I("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)i="asc";else{if("desc"!==n)throw new h(u.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");i="desc"}var r=Ba("Query.orderBy",e),o=il(this.Ff,r,i);return new t(function(t,e){var n=t.on.concat([e]);return new On(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(this.Ff,o),this.firestore,this.d_)},t.prototype.limit=function(e){return k("Query.limit",arguments,1),R("Query.limit","number",1,e),W("Query.limit",1,e),new t(zn(this.Ff,e,"F"),this.firestore,this.d_)},t.prototype.limitToLast=function(e){return k("Query.limitToLast",arguments,1),R("Query.limitToLast","number",1,e),W("Query.limitToLast",1,e),new t(zn(this.Ff,e,"L"),this.firestore,this.d_)},t.prototype.startAt=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];D("Query.startAt",arguments,1);var r=this.xf("Query.startAt",e,n,!0);return new t(Hn(this.Ff,r),this.firestore,this.d_)},t.prototype.startAfter=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];D("Query.startAfter",arguments,1);var r=this.xf("Query.startAfter",e,n,!1);return new t(Hn(this.Ff,r),this.firestore,this.d_)},t.prototype.endBefore=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];D("Query.endBefore",arguments,1);var r=this.xf("Query.endBefore",e,n,!0);return new t(Gn(this.Ff,r),this.firestore,this.d_)},t.prototype.endAt=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];D("Query.endAt",arguments,1);var r=this.xf("Query.endAt",e,n,!1);return new t(Gn(this.Ff,r),this.firestore,this.d_)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","Query",1,e);return this.firestore===e.firestore&&Wn(this.Ff,e.Ff)&&this.d_===e.d_},t.prototype.withConverter=function(e){return new t(this.Ff,this.firestore,e)},t.prototype.xf=function(t,e,n,r){if(z(t,1,e),e instanceof tl)return k(t,i.__spreadArrays([e],n),1),function(t,e,n,i,r){if(!i)throw new h(u.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Vn(t);s<a.length;s++){var l=a[s];if(l.field.p())o.push(le(e,i.key));else{var c=i.field(l.field);if(Xt(c))throw new h(u.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var d=l.field.R();throw new h(u.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+d+"' (used as the orderBy) does not exist.")}o.push(c)}}return new oi(o,r)}(this.Ff,this.firestore.__,t,e.Df,r);var o=[e].concat(n);return function(t,e,n,i,r,o){var s=t.on;if(r.length>s.length)throw new h(u.INVALID_ARGUMENT,"Too many arguments provided to "+i+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],l=0;l<r.length;l++){var c=r[l];if(s[l].field.p()){if("string"!=typeof c)throw new h(u.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+i+"(), but got a "+typeof c);if(!Un(t)&&-1!==c.indexOf("/"))throw new h(u.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+i+"() must be a plain document ID, but '"+c+"' contains a slash.");var d=t.path.child(E.g(c));if(!T.F(d))throw new h(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+i+"() must result in a valid document path, but '"+d+"' is not because it contains an odd number of segments.");var p=new T(d);a.push(le(e,p))}else{var f=Ra(n,i,c);a.push(f)}}return new oi(a,o)}(this.Ff,this.firestore.__,this.firestore.mf,t,o,r)},t.prototype.onSnapshot=function(){for(var t,e,n,i=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];O("Query.onSnapshot",arguments,1,4);var s={},a=0;if("object"!=typeof r[a]||Wa(r[a])||(H("Query.onSnapshot",s=r[a],["includeMetadataChanges"]),F("Query.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++),Wa(r[a])){var l=r[a];r[a]=null===(t=l.next)||void 0===t?void 0:t.bind(l),r[a+1]=null===(e=l.error)||void 0===e?void 0:e.bind(l),r[a+2]=null===(n=l.complete)||void 0===n?void 0:n.bind(l)}else R("Query.onSnapshot","function",a,r[a]),I("Query.onSnapshot","function",a+1,r[a+1]),I("Query.onSnapshot","function",a+2,r[a+2]);var c={next:function(t){r[a]&&r[a](new cl(i.firestore,i.Ff,t,i.d_))},error:r[a+1],complete:r[a+2]};return al(this.Ff),this.firestore.hf().listen(this.Ff,s,c)},t.prototype.get=function(t){var e=this;O("Query.get",arguments,0,1),pl("Query.get",t),al(this.Ff);var n=this.firestore.hf();return(t&&"cache"===t.source?n.j_(this.Ff):n.K_(this.Ff,t)).then((function(t){return new cl(e.firestore,e.Ff,t,e.d_)}))},t}(),cl=function(){function t(t,e,n,i){this.yf=t,this.$f=e,this.kf=n,this.d_=i,this.Mf=null,this.Of=null,this.metadata=new Ja(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.kf.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.kf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;O("QuerySnapshot.forEach",arguments,1,2),R("QuerySnapshot.forEach","function",1,t),this.kf.docs.forEach((function(i){t.call(e,n.Lf(i,n.metadata.fromCache,n.kf.Wt.has(i.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new ll(this.$f,this.yf,this.d_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(H("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),F("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.kf.Kt)throw new h(u.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Mf&&this.Of===e||(this.Mf=function(t,e,n){if(t.Qt.m()){var i=0;return t.docChanges.map((function(e){return{type:"added",doc:n(e.doc,t.fromCache,t.Wt.has(e.doc.key)),oldIndex:-1,newIndex:i++}}))}var r=t.Qt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var i=n(e.doc,t.fromCache,t.Wt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(s=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:ml(e.type),doc:i,oldIndex:o,newIndex:s}}))}(this.kf,e,this.Lf.bind(this)),this.Of=e),this.Mf},t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","QuerySnapshot",1,e);return this.yf===e.yf&&Wn(this.$f,e.$f)&&this.kf.isEqual(e.kf)&&this.d_===e.d_},t.prototype.Lf=function(t,e,n){return new el(this.yf,t.key,t,e,n,this.d_)},t}(),ul=function(t){function e(e,n,i){var r=this;if((r=t.call(this,In(e),n,i)||this).Bf=e,e.length%2!=1)throw new h(u.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.R()+" has "+e.length);return r}return i.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Ff.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.Ff.path.h();return t.m()?null:new Za(new T(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Ff.path.R()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){O("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Q.k()),R("CollectionReference.doc","non-empty string",1,t);var e=E.g(t);return Za.Rf(this.Ff.path.child(e),this.firestore,this.d_)},e.prototype.add=function(t){k("CollectionReference.add",arguments,1);var e=this.d_?this.d_.toFirestore(t):t;R("CollectionReference.add","object",1,e);var n=this.doc();return new Za(n.f_,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.Bf,this.firestore,t)},e}(ll);function hl(t,e){if(void 0===e)return{merge:!1};if(H(t,e,["merge","mergeFields"]),F(t,"boolean","merge",e.merge),function(t,e,n,i,r){void 0!==i&&function(t,e,n,i,r){if(!(i instanceof Array))throw new h(u.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+j(i));for(var o=0;o<i.length;++o)if(!r(i[o]))throw new h(u.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+j(i[o]))}(t,"mergeFields",0,i,(function(t){return"string"==typeof t||t instanceof da}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new h(u.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function dl(t,e){return void 0===e?{}:(H(t,e,["serverTimestamps"]),N(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function pl(t,e){I(t,"object",1,e),e&&(H(t,e,["source"]),N(t,0,"source",e.source,["default","server","cache"]))}function fl(t,e,n){if(e instanceof Ca){if(e.firestore!==n)throw new h(u.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw G(t,"DocumentReference",1,e)}function ml(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return y()}}function gl(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var vl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.serverTimestamp=function(){P("FieldValue.serverTimestamp",arguments);var t=new va("serverTimestamp");return t.e_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){P("FieldValue.delete",arguments);var t=new ma("deleteField");return t.e_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];D("FieldValue.arrayUnion",arguments,1);var i=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return D("arrayUnion()",arguments,1),new ya("arrayUnion",t)}).apply(void 0,t);return i.e_="FieldValue.arrayUnion",new e(i)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];D("FieldValue.arrayRemove",arguments,1);var i=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return D("arrayRemove()",arguments,1),new ba("arrayRemove",t)}).apply(void 0,t);return i.e_="FieldValue.arrayRemove",new e(i)},e.increment=function(t){R("FieldValue.increment","number",1,t),k("FieldValue.increment",arguments,1);var n=function(t){return new _a("increment",t)}(t);return n.e_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.l_.isEqual(t.l_)},e}(Aa),yl={Firestore:Qa,GeoPoint:wa,Timestamp:at,Blob:it,Transaction:Xa,WriteBatch:Ka,DocumentReference:Za,DocumentSnapshot:tl,Query:ll,QueryDocumentSnapshot:el,QuerySnapshot:cl,CollectionReference:ul,FieldPath:da,FieldValue:vl,setLogLevel:Qa.setLogLevel,CACHE_SIZE_UNLIMITED:$a};function bl(t){!function(t,e){t.INTERNAL.registerComponent(new l.Component("firestore",(function(t){return function(t,e){var n=new ca,i=new la(n);return new Qa(t,e,i,n)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},yl)))}(t),t.registerVersion("@firebase/firestore","1.18.0")}bl(c.default),e.__PRIVATE_registerFirestore=bl},Iab2:function(t,e,n){var i,r;void 0===(r="function"==typeof(i=function(){"use strict";function e(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){o(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,o=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype?function(t,o,s){var a=r.URL||r.webkitURL,l=document.createElement("a");l.download=o=o||t.name||"download",l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?i(l):n(l.href)?e(t,o,s):i(l,l.target="_blank")):(l.href=a.createObjectURL(t),setTimeout((function(){a.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,r,o){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),r);else if(n(t))e(t,r,o);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout((function(){i(s)}))}}:function(t,n,i,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,i);var s="application/octet-stream"===t.type,a=/constructor/i.test(r.HTMLElement)||r.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&a)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},c.readAsDataURL(t)}else{var u=r.URL||r.webkitURL,h=u.createObjectURL(t);o?o.location=h:location.href=h,o=null,setTimeout((function(){u.revokeObjectURL(h)}),4e4)}});r.saveAs=o.saveAs=o,t.exports=o})?i.apply(e,[]):i)||(t.exports=r)},NSPt:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=i("wj3C"),o=i("mrSG"),s=i("zVF4"),a=i("q/0M"),l=i("S+S0");function c(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u,h=c(r),d=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),s.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:s.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),p=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return s.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var n=window[t];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new d(n)}}catch(e){}return new p},m=f("localStorage"),g=f("sessionStorage"),v=new a.Logger("@firebase/database"),y=(u=1,function(){return u++}),b=function(t){var e=s.stringToByteArray(t),n=new s.Sha1;n.update(e);var i=n.digest();return s.base64.encodeByteArray(i)},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",i=0;i<t.length;i++){var r=t[i];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?n+=_.apply(null,r):n+="object"==typeof r?s.stringify(r):r,n+=" "}return n},w=null,A=!0,x=function(t,e){s.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(v.logLevel=a.LogLevel.VERBOSE,w=v.log.bind(v),e&&g.set("logging_enabled",!0)):"function"==typeof t?w=t:(w=null,g.remove("logging_enabled"))},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===A&&(A=!1,null===w&&!0===g.get("logging_enabled")&&x(!0)),w){var n=_.apply(null,t);w(n)}},E=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];C.apply(void 0,o.__spread([t],e))}},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,o.__spread(t));v.error(n)},M=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,o.__spread(t));throw v.error(n),new Error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+_.apply(void 0,o.__spread(t));v.warn(n)},P=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},k="[MIN_NAME]",D="[MAX_NAME]",O=function(t,e){if(t===e)return 0;if(t===k||e===D)return-1;if(e===k||t===D)return 1;var n=X(t),i=X(e);return null!==n?null!==i?n-i==0?t.length-e.length:n-i:-1:null!==i?1:t<e?-1:1},R=function(t,e){return t===e?0:t<e?-1:1},I=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+s.stringify(e))},L=function(t){if("object"!=typeof t||null===t)return s.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var i="{",r=0;r<e.length;r++)0!==r&&(i+=","),i+=s.stringify(e[r]),i+=":",i+=L(t[e[r]]);return i+"}"},F=function(t,e){var n=t.length;if(n<=e)return[t];for(var i=[],r=0;r<n;r+=e)i.push(t.substring(r,r+e>n?n:r+e));return i};function N(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var B,U,V,j,z,H,G,W,q,$,Y=function(t){var e,n,i,r,o;s.assert(!P(t),"Invalid JSON number"),0===t?(n=0,i=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(r=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,i=Math.round(t*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,i=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var l=a.join(""),c="";for(o=0;o<64;o+=8){var u=parseInt(l.substr(o,8),2).toString(16);1===u.length&&(u="0"+u),c+=u}return c.toLowerCase()},Q=new RegExp("^-?(0*)\\d{1,10}$"),X=function(t){if(Q.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},K=function(t){try{t()}catch(e){setTimeout((function(){throw T("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},Z=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},J=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],i=this.pieceNum_;i<this.pieces_.length;i++)n.push(this.pieces_[i]);if(e instanceof t)for(i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{var r=e.split("/");for(i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var i=e.getFront(),r=n.getFront();if(null===i)return n;if(i===r)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),i=e.slice(),r=0;r<n.length&&r<i.length;r++){var o=O(n[r],i[r]);if(0!==o)return o}return n.length===i.length?0:n.length<i.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),tt=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=s.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=s.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=s.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),et=function(){function t(t,e,n,i,r,o,s){void 0===r&&(r=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=m.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&m.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(s.assert("string"==typeof t,"typeof type must == string"),s.assert("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var i=[];return N(e,(function(t,e){i.push(t+"="+e)})),n+i.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),nt=function(t,e){var n=it(t),i=n.namespace;return"firebase.com"===n.domain&&M(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||M("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&T("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new et(n.host,n.secure,i,e,"ws"===n.scheme||"wss"===n.scheme,"",i!==n.subdomain),path:new J(n.pathString)}},it=function(t){var n="",i="",r="",s="",a="",l=!0,c="https",u=443;if("string"==typeof t){var h=t.indexOf("//");h>=0&&(c=t.substring(0,h-1),t=t.substring(h+2));var d=t.indexOf("/");-1===d&&(d=t.length);var p=t.indexOf("?");-1===p&&(p=t.length),n=t.substring(0,Math.min(d,p)),d<p&&(s=function(t){for(var n="",i=t.split("/"),r=0;r<i.length;r++)if(i[r].length>0){var o=i[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(e){}n+="/"+o}return n}(t.substring(d,p)));var f=function(t){var e,n,i={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var r=o.__values(t.split("&")),s=r.next();!s.done;s=r.next()){var a=s.value;if(0!==a.length){var l=a.split("=");2===l.length?i[decodeURIComponent(l[0])]=decodeURIComponent(l[1]):T("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}(t.substring(Math.min(t.length,p)));(h=n.indexOf(":"))>=0?(l="https"===c||"wss"===c,u=parseInt(n.substring(h+1),10)):h=n.length;var m=n.slice(0,h);if("localhost"===m.toLowerCase())i="localhost";else if(m.split(".").length<=2)i=m;else{var g=n.indexOf(".");r=n.substring(0,g).toLowerCase(),i=n.substring(g+1),a=r}"ns"in f&&(a=f.ns)}return{host:n,port:u,domain:i,subdomain:r,secure:l,scheme:c,pathString:s,namespace:a}},rt=/[\[\].#$\/\u0000-\u001F\u007F]/,ot=/[\[\].#$\u0000-\u001F\u007F]/,st=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return"string"==typeof t&&0!==t.length&&!ot.test(t)},lt=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!P(t)||t&&"object"==typeof t&&s.contains(t,".sv")},ct=function(t,e,n,i,r){r&&void 0===n||ut(s.errorPrefix(t,e,r),n,i)},ut=function(t,e,n){var i=n instanceof J?new tt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+i.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+i.toErrorString()+" with contents = "+e.toString());if(P(e))throw new Error(t+"contains "+e.toString()+" "+i.toErrorString());if("string"==typeof e&&e.length>10485760/3&&s.stringLength(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var r=!1,o=!1;if(N(e,(function(e,n){if(".value"===e)r=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!st(e)))throw new Error(t+" contains an invalid key ("+e+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(e),ut(t,n,i),i.pop()})),r&&o)throw new Error(t+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},ht=function(t,e,n,i,r){if(!r||void 0!==n){var o=s.errorPrefix(t,e,r);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];N(n,(function(t,e){var n=new J(t);if(ut(o,e,i.child(n)),".priority"===n.getBack()&&!lt(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,i;for(n=0;n<e.length;n++)for(var r=(i=e[n]).slice(),o=0;o<r.length;o++)if(".priority"===r[o]&&o===r.length-1);else if(!st(r[o]))throw new Error(t+"contains an invalid key ("+r[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(J.comparePaths);var s=null;for(n=0;n<e.length;n++){if(i=e[n],null!==s&&s.contains(i))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}}(o,a)}},dt=function(t,e,n,i){if(!i||void 0!==n){if(P(n))throw new Error(s.errorPrefix(t,e,i)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!lt(n))throw new Error(s.errorPrefix(t,e,i)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pt=function(t,e,n,i){if(!i||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(s.errorPrefix(t,e,i)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ft=function(t,e,n,i){if(!(i&&void 0===n||st(n)))throw new Error(s.errorPrefix(t,e,i)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},mt=function(t,e,n,i){if(!(i&&void 0===n||at(n)))throw new Error(s.errorPrefix(t,e,i)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gt=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),mt(t,e,n,i)},vt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},yt=function(t,e,n){var i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!st(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),at(t)}(i))throw new Error(s.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bt=function(t,e,n,i){if((!i||void 0!==n)&&"boolean"!=typeof n)throw new Error(s.errorPrefix(t,e,i)+"must be a boolean.")},_t=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){s.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),s.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new s.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){s.validateArgCount("OnDisconnect.remove",0,1,arguments.length),vt("OnDisconnect.remove",this.path_),s.validateCallback("OnDisconnect.remove",1,t,!0);var e=new s.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){s.validateArgCount("OnDisconnect.set",1,2,arguments.length),vt("OnDisconnect.set",this.path_),ct("OnDisconnect.set",1,t,this.path_,!1),s.validateCallback("OnDisconnect.set",2,e,!0);var n=new s.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){s.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),vt("OnDisconnect.setWithPriority",this.path_),ct("OnDisconnect.setWithPriority",1,t,this.path_,!1),dt("OnDisconnect.setWithPriority",2,e,!1),s.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var i=new s.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,i.wrapCallback(n)),i.promise},t.prototype.update=function(t,e){if(s.validateArgCount("OnDisconnect.update",1,2,arguments.length),vt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("OnDisconnect.update",1,t,this.path_,!1),s.validateCallback("OnDisconnect.update",2,e,!0);var r=new s.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,r.wrapCallback(e)),r.promise},t}(),wt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return s.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),At=(B="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",U=0,V=[],function(t){var e,n=t===U;U=t;var i=new Array(8);for(e=7;e>=0;e--)i[e]=B.charAt(t%64),t=Math.floor(t/64);s.assert(0===t,"Cannot push at time == 0");var r=i.join("");if(n){for(e=11;e>=0&&63===V[e];e--)V[e]=0;V[e]++}else for(e=0;e<12;e++)V[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)r+=B.charAt(V[e]);return s.assert(20===r.length,"nextPushId: Length should be 20."),r}),xt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ct=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new xt(k,t),i=new xt(k,e);return 0!==this.compare(n,i)},t.prototype.minPost=function(){return xt.MIN},t}(),Et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return j},set:function(t){j=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return O(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw s.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return xt.MIN},e.prototype.maxPost=function(){return new xt(D,j)},e.prototype.makePost=function(t,e){return s.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new xt(t,j)},e.prototype.toString=function(){return".key"},e}(Ct),St=new Et,Mt=function(t){return"number"==typeof t?"number:"+Y(t):"string:"+t},Tt=function(t){if(t.isLeafNode()){var e=t.val();s.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&s.contains(e,".sv"),"Priority must be a string or number.")}else s.assert(t===z||t.isEmpty(),"priority of unexpected type.");s.assert(t===z||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Pt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,s.assert(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Tt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return H},set:function(t){H=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var i=e.getFront();return null===i?n:n.isEmpty()&&".priority"!==i?this:(s.assert(".priority"!==i||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Mt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?Y(this.value_):this.value_,this.lazyHash_=b(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(s.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,i=typeof this.value_,r=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(i);return s.assert(r>=0,"Unknown leaf type: "+n),s.assert(o>=0,"Unknown leaf type: "+i),r===o?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),kt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),i=e.node.getPriority(),r=n.compareTo(i);return 0===r?O(t.name,e.name):r},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return xt.MIN},e.prototype.maxPost=function(){return new xt(D,new Pt("[PRIORITY-POST]",W))},e.prototype.makePost=function(t,e){var n=G(t);return new xt(e,new Pt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ct)),Dt=function(){function t(t,e,n,i,r){void 0===r&&(r=null),this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ot=function(){function t(e,n,i,r,o){this.key=e,this.value=n,this.color=null!=i?i:t.RED,this.left=null!=r?r:It.EMPTY_NODE,this.right=null!=o?o:It.EMPTY_NODE}return t.prototype.copy=function(e,n,i,r,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var i=this,r=n(t,i.key);return(i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return It.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,i;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return It.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Rt=function(){function t(){}return t.prototype.copy=function(t,e,n,i,r){return this},t.prototype.insert=function(t,e,n){return new Ot(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),It=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ot.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ot.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,i=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Dt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Dt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Dt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Dt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Rt,t}(),Lt=Math.log(2),Ft=function(){function t(t){this.count=parseInt(Math.log(t+1)/Lt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Nt=function(t,e,n,i){t.sort(e);var r=function(e,i){var o,s,a=i-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Ot(s,o.node,Ot.BLACK,null,null);var l=parseInt(a/2,10)+e,c=r(e,l),u=r(l+1,i);return o=t[l],s=n?n(o):o,new Ot(s,o.node,Ot.BLACK,c,u)},o=function(e){for(var i=null,o=null,s=t.length,a=function(e,i){var o=s-e,a=s;s-=e;var c=r(o+1,a),u=t[o],h=n?n(u):u;l(new Ot(h,u.node,i,null,c))},l=function(t){i?(i.left=t,i=t):(o=t,i=t)},c=0;c<e.count;++c){var u=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));u?a(h,Ot.BLACK):(a(h,Ot.BLACK),a(h,Ot.RED))}return o}(new Ft(t.length));return new It(i||e,o)},Bt={},Ut=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return s.assert(Bt&&kt,"ChildrenNode.ts has not been loaded"),q=q||new t({".priority":Bt},{".priority":kt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=s.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof It?e:null},t.prototype.hasIndex=function(t){return s.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){s.assert(e!==St,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var i,r=[],a=!1,l=n.getIterator(xt.Wrap),c=l.getNext();c;)a=a||e.isDefinedOn(c.node),r.push(c),c=l.getNext();i=a?Nt(r,e.getCompare()):Bt;var u=e.toString(),h=o.__assign({},this.indexSet_);h[u]=e;var d=o.__assign({},this.indexes_);return d[u]=i,new t(d,h)},t.prototype.addToIndexes=function(e,n){var i=this;return new t(s.map(this.indexes_,(function(t,r){var o=s.safeGet(i.indexSet_,r);if(s.assert(o,"Missing index implementation for "+r),t===Bt){if(o.isDefinedOn(e.node)){for(var a=[],l=n.getIterator(xt.Wrap),c=l.getNext();c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Nt(a,o.getCompare())}return Bt}var u=n.get(e.name),h=t;return u&&(h=h.remove(new xt(e.name,u))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(s.map(this.indexes_,(function(t){if(t===Bt)return t;var i=n.get(e.name);return i?t.remove(new xt(e.name,i)):t})),this.indexSet_)},t}();function Vt(t,e){return O(t.name,e.name)}function jt(t,e){return O(t,e)}var zt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Tt(this.priorityNode_),this.children_.isEmpty()&&s.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return $||($=new t(new It(jt),null,Ut.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||$},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?$:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(s.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var i=new xt(e,n),r=void 0,o=void 0;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(i,this.children_));var a=r.isEmpty()?$:this.priorityNode_;return new t(r,a,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;s.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var i=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,i)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},i=0,r=0,o=!0;if(this.forEachChild(kt,(function(s,a){n[s]=a.val(e),i++,o&&t.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):o=!1})),!e&&o&&r<2*i){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Mt(this.getPriority().val())+":"),this.forEachChild(kt,(function(e,n){var i=n.hash();""!==i&&(t+=":"+e+":"+i)})),this.lazyHash_=""===t?"":b(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var i=this.resolveIndex_(n);if(i){var r=i.getPredecessorKey(new xt(t,e));return r?r.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new xt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new xt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var i=this.children_.getIteratorFrom(t.name,xt.Wrap),r=i.peek();null!=r&&e.compare(r,t)<0;)i.getNext(),r=i.peek();return i},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var i=this.children_.getReverseIteratorFrom(t.name,xt.Wrap),r=i.peek();null!=r&&e.compare(r,t)>0;)i.getNext(),r=i.peek();return i},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ht?-1:0},t.prototype.withIndex=function(e){if(e===St||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===St||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(kt),i=e.getIterator(kt),r=n.getNext(),o=i.getNext();r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=n.getNext(),o=i.getNext()}return null===r&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===St?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Ht=new(function(t){function e(){return t.call(this,new It(jt),zt.EMPTY_NODE,Ut.Default)||this}return o.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return zt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(zt));function Gt(t,e){if(void 0===e&&(e=null),null===t)return zt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),s.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Pt(t,Gt(e));if(t instanceof Array){var n=zt.EMPTY_NODE;return N(t,(function(e,i){if(s.contains(t,e)&&"."!==e.substring(0,1)){var r=Gt(i);!r.isLeafNode()&&r.isEmpty()||(n=n.updateImmediateChild(e,r))}})),n.updatePriority(Gt(e))}var i=[],r=!1;if(N(t,(function(t,e){if("."!==t.substring(0,1)){var n=Gt(e);n.isEmpty()||(r=r||!n.getPriority().isEmpty(),i.push(new xt(t,n)))}})),0===i.length)return zt.EMPTY_NODE;var o=Nt(i,Vt,(function(t){return t.name}),jt);if(r){var a=Nt(i,kt.getCompare());return new zt(o,Gt(e),new Ut({".priority":a},{".priority":kt}))}return new zt(o,Gt(e),Ut.Default)}Object.defineProperties(xt,{MIN:{value:new xt(k,zt.EMPTY_NODE)},MAX:{value:new xt(D,Ht)}}),Et.__EMPTY_NODE=zt.EMPTY_NODE,Pt.__childrenNodeConstructor=zt,z=Ht,function(t){W=t}(Ht),function(t){G=t}(Gt);var Wt,qt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?O(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return xt.MIN},e.prototype.maxPost=function(){return xt.MAX},e.prototype.makePost=function(t,e){var n=Gt(t);return new xt(e,n)},e.prototype.toString=function(){return".value"},e}(Ct)),$t=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,s.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return o.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),i=this.extractChild(e.node),r=n.compareTo(i);return 0===r?O(t.name,e.name):r},e.prototype.makePost=function(t,e){var n=Gt(t),i=zt.EMPTY_NODE.updateChild(this.indexPath_,n);return new xt(e,i)},e.prototype.maxPost=function(){var t=zt.EMPTY_NODE.updateChild(this.indexPath_,Ht);return new xt(D,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Ct),Yt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return s.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return s.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return s.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return s.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){s.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),mt("DataSnapshot.child",1,e,!1);var n=new J(e),i=this.ref_.child(n);return new t(this.node_.getChild(n),i,kt)},t.prototype.hasChild=function(t){s.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),mt("DataSnapshot.hasChild",1,t,!1);var e=new J(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return s.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(s.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),s.validateCallback("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var i=this.node_;return!!i.forEachChild(this.index_,(function(i,r){return e(new t(r,n.ref_.child(i),kt))}))},t.prototype.hasChildren=function(){return s.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return s.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return s.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Qt=function(){function t(t,e,n,i){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=i}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+s.stringify(this.snapshot.exportVal())},t}(),Xt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Kt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Qt("value",this,new Yt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){s.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var i=this.callback_;return function(){i.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Xt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Zt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return s.contains(this.callbacks_,e="children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Xt(this,t,e):null},t.prototype.createEvent=function(t,e){s.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),i=e.getQueryParams().getIndex();return new Qt(t.type,this,new Yt(t.snapshotNode,n,i),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){s.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var i=this.callbacks_[t.eventType];return function(){i.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var i=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),o=i.length;if(o===r.length){if(1===o){var s=i[0],a=r[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return r.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Jt=function(){function t(t,e,n,i){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=i}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return s.assert(Wt,"Reference.ts has not been loaded"),Wt},set:function(t){Wt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===St){var i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==k)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(t.hasEnd()){if(t.getIndexEndName()!==D)throw new Error(i);if("string"!=typeof n)throw new Error(r)}}else if(t.getIndex()===kt){if(null!=e&&!lt(e)||null!=n&&!lt(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(s.assert(t.getIndex()instanceof $t||t.getIndex()===qt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return s.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,i,r){s.validateArgCount("Query.on",2,4,arguments.length),pt("Query.on",1,e,!1),s.validateCallback("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",i,r);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var i=new Kt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,i)},t.prototype.onChildEvent=function(t,e,n){var i=new Zt(t,e,n);this.repo.addEventCallbackForQuery(this,i)},t.prototype.off=function(t,e,n){s.validateArgCount("Query.off",0,3,arguments.length),pt("Query.off",1,t,!0),s.validateCallback("Query.off",2,e,!0),s.validateContextObject("Query.off",3,n,!0);var i=null,r=null;if("value"===t){var o=e||null;i=new Kt(o,null,n||null)}else t&&(e&&((r={})[t]=e),i=new Zt(r,null,n||null));this.repo.removeEventCallbackForQuery(this,i)},t.prototype.once=function(e,n,i,r){var o=this;s.validateArgCount("Query.once",1,4,arguments.length),pt("Query.once",1,e,!1),s.validateCallback("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",i,r),l=!0,c=new s.Deferred;c.promise.catch((function(){}));var u=function(t){l&&(l=!1,o.off(e,u),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,u,(function(t){o.off(e,u),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(s.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(s.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(s.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');mt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new J(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var i=new $t(n),r=this.queryParams_.orderBy(i);return t.validateQueryEndpoints_(r),new t(this.repo,this.path,r,!0)},t.prototype.orderByKey=function(){s.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(St);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){s.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){s.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(qt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),s.validateArgCount("Query.startAt",0,2,arguments.length),ct("Query.startAt",1,e,this.path,!0),ft("Query.startAt",2,n,!0);var i=this.queryParams_.startAt(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),s.validateArgCount("Query.endAt",0,2,arguments.length),ct("Query.endAt",1,e,this.path,!0),ft("Query.endAt",2,n,!0);var i=this.queryParams_.endAt(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(s.validateArgCount("Query.equalTo",1,2,arguments.length),ct("Query.equalTo",1,t,this.path,!1),ft("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return s.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return s.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=L(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(s.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var i=this.repo===e.repo,r=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return i&&r&&o},t.getCancelAndContextArgs_=function(t,e,n){var i={cancel:null,context:null};if(e&&n)i.cancel=e,s.validateCallback(t,3,i.cancel,!0),i.context=n,s.validateContextObject(t,4,i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error(s.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");i.cancel=e}return i},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),te=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ee=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ne=function(t,e,n){return t&&"object"==typeof t?(s.assert(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ie(t[".sv"],e,n):"object"==typeof t[".sv"]?re(t[".sv"],e):void s.assert(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ie=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:s.assert(!1,"Unexpected server value: "+t)}},re=function(t,e,n){t.hasOwnProperty("increment")||s.assert(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var i=t.increment;"number"!=typeof i&&s.assert(!1,"Unexpected increment value: "+i);var r=e.node();if(s.assert(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;var o=r.getValue();return"number"!=typeof o?i:o+i},oe=function(t,e,n,i){return ae(e,new ee(n,t),i)},se=function(t,e,n){return ae(t,new te(e),n)};function ae(t,e,n){var i,r=t.getPriority().val(),o=ne(r,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ne(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Pt(a,Gt(o)):t}var l=t;return i=l,o!==l.getPriority().val()&&(i=i.updatePriority(new Pt(o))),l.forEachChild(kt,(function(t,r){var o=ae(r,e.getImmediateChild(t),n);o!==r&&(i=i.updateImmediateChild(t,o))})),i}var le,ce,ue=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var i=e.getFront();this.children.has(i)||this.children.set(i,new t);var r=this.children.get(i);e=e.popFront(),r.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(kt,(function(t,e){n.remember(new J(t),e)})),this.forget(t)}if(this.children.size>0){var i=t.getFront();return t=t.popFront(),this.children.has(i)&&this.children.get(i).forget(t)&&this.children.delete(i),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,i){var r=new J(t.toString()+"/"+n);i.forEachTree(r,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),he=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),de=function(){function t(t,e,n,i){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=i,s.assert(!i||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),pe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=he.ACK_USER_WRITE,this.source=de.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return s.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new J(e));return new t(J.Empty,n,this.revert)}return s.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),fe=function(){function t(t,e){void 0===e&&(le||(le=new It(R)),e=le),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return N(e,(function(t,e){n=n.set(new J(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:J.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),i=this.children.get(n);if(null!==i){var r=i.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=r?{path:new J(n).child(r.path),value:r.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),i=this.children.get(n);return null!==i?i.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var i=e.getFront(),r=(this.children.get(i)||t.Empty).set(e.popFront(),n),o=this.children.insert(i,r);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),i=this.children.get(n);if(i){var r=i.remove(e.popFront()),o=void 0;return o=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var i,r=e.getFront(),o=(this.children.get(r)||t.Empty).setTree(e.popFront(),n);return i=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new t(this.value,i)},t.prototype.fold=function(t){return this.fold_(J.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(i,r){n[i]=r.fold_(t.child(i),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,J.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var i=!!this.value&&n(e,this.value);if(i)return i;if(t.isEmpty())return null;var r=t.getFront(),o=this.children.get(r);return o?o.findOnPath_(t.popFront(),e.child(r),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,J.Empty,e)},t.prototype.foreachOnPath_=function(e,n,i){if(e.isEmpty())return this;this.value&&i(n,this.value);var r=e.getFront(),o=this.children.get(r);return o?o.foreachOnPath_(e.popFront(),n.child(r),i):t.Empty},t.prototype.foreach=function(t){this.foreach_(J.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,i){i.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),me=function(){function t(t,e){this.source=t,this.path=e,this.type=he.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,J.Empty):new t(this.source,this.path.popFront())},t}(),ge=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=he.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,J.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ve=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=he.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new J(e));return n.isEmpty()?null:n.value?new ge(this.source,J.Empty,n.value):new t(this.source,J.Empty,n)}return s.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ye=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),be=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,i){return new t(new ye(e,n,i),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,i){return new t(this.eventCache_,new ye(e,n,i))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new ye(zt.EMPTY_NODE,!1,!1),new ye(zt.EMPTY_NODE,!1,!1)),t}(),_e=function(){function t(t,e,n,i,r){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=i,this.prevName=r}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,i){return new t(t.CHILD_CHANGED,n,e,i)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),we=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,i,r,o){s.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(_e.childRemovedChange(e,a)):s.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(_e.childAddedChange(e,n)):o.trackChildChange(_e.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(kt,(function(t,i){e.hasChild(t)||n.trackChildChange(_e.childRemovedChange(t,i))})),e.isLeafNode()||e.forEachChild(kt,(function(e,i){if(t.hasChild(e)){var r=t.getImmediateChild(e);r.equals(i)||n.trackChildChange(_e.childChangedChange(e,i,r))}else n.trackChildChange(_e.childAddedChange(e,i))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?zt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ae=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;s.assert(e===_e.CHILD_ADDED||e===_e.CHILD_CHANGED||e===_e.CHILD_REMOVED,"Only child changes supported for tracking"),s.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var i=this.changeMap.get(n);if(i){var r=i.type;if(e===_e.CHILD_ADDED&&r===_e.CHILD_REMOVED)this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,i.snapshotNode));else if(e===_e.CHILD_REMOVED&&r===_e.CHILD_ADDED)this.changeMap.delete(n);else if(e===_e.CHILD_REMOVED&&r===_e.CHILD_CHANGED)this.changeMap.set(n,_e.childRemovedChange(n,i.oldSnap));else if(e===_e.CHILD_CHANGED&&r===_e.CHILD_ADDED)this.changeMap.set(n,_e.childAddedChange(n,t.snapshotNode));else{if(e!==_e.CHILD_CHANGED||r!==_e.CHILD_CHANGED)throw s.assertionError("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),xe=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ce=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ye(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),r=this.writes_.calcIndexedSlice(i,e,1,n,t);return 0===r.length?null:r[0]},t}(),Ee=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Se=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){s.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),s.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,i,r){var o,a,l=new Ae;if(n.type===he.OVERWRITE){var c=n;c.source.fromUser?o=this.applyUserOverwrite_(e,c.path,c.snap,i,r,l):(s.assert(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),o=this.applyServerOverwrite_(e,c.path,c.snap,i,r,a,l))}else if(n.type===he.MERGE){var u=n;u.source.fromUser?o=this.applyUserMerge_(e,u.path,u.children,i,r,l):(s.assert(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,u.path,u.children,i,r,a,l))}else if(n.type===he.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,i,r,l):this.ackUserWrite_(e,h.path,h.affectedTree,i,r,l)}else{if(n.type!==he.LISTEN_COMPLETE)throw s.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,i,l)}var d=l.getChanges();return t.maybeAddValueEvent_(e,o,d),new Ee(o,d)},t.maybeAddValueEvent_=function(t,e,n){var i=e.getEventCache();if(i.isFullyInitialized()){var r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(_e.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,i,r){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,l=void 0;if(e.isEmpty())if(s.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),u=n.calcCompleteEventChildren(c instanceof zt?c:zt.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),u,r)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,r)}else{var d=e.getFront();if(".priority"===d){s.assert(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();l=t.getServerCache().getNode();var f=n.calcEventCacheAfterServerOverwrite(e,p,l);a=null!=f?this.filter_.updatePriority(p,f):o.getNode()}else{var m=e.popFront(),g=void 0;if(o.isCompleteForChild(d)){l=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),l);g=null!=v?o.getNode().getImmediateChild(d).updateChild(m,v):o.getNode().getImmediateChild(d)}else g=n.calcCompleteChild(d,t.getServerCache());a=null!=g?this.filter_.updateChild(o.getNode(),d,g,m,i,r):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,i,r,o,s){var a,l=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(l.getNode(),n,null);else if(c.filtersNodes()&&!l.isFiltered()){var u=l.getNode().updateChild(e,n);a=c.updateFullNode(l.getNode(),u,null)}else{var h=e.getFront();if(!l.isCompleteForPath(e)&&e.getLength()>1)return t;var d=e.popFront(),p=l.getNode().getImmediateChild(h).updateChild(d,n);a=".priority"===h?c.updatePriority(l.getNode(),p):c.updateChild(l.getNode(),h,p,d,xe,null)}var f=t.updateServerSnap(a,l.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),m=new Ce(i,f,r);return this.generateEventCacheAfterServerEvent_(f,e,i,m,s)},t.prototype.applyUserOverwrite_=function(t,e,n,i,r,o){var s,a,l=t.getEventCache(),c=new Ce(i,t,r);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var u=e.getFront();if(".priority"===u)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,l.isFullyInitialized(),l.isFiltered());else{var h=e.popFront(),d=l.getNode().getImmediateChild(u),p=void 0;if(h.isEmpty())p=n;else{var f=c.getCompleteChild(u);p=null!=f?".priority"===h.getBack()&&f.getChild(h.parent()).isEmpty()?f:f.updateChild(h,n):zt.EMPTY_NODE}if(d.equals(p))s=t;else{var m=this.filter_.updateChild(l.getNode(),u,p,h,c,o);s=t.updateEventSnap(m,l.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,i,r,o,s){var a=this,l=e;return i.foreach((function(i,c){var u=n.child(i);t.cacheHasChild_(e,u.getFront())&&(l=a.applyUserOverwrite_(l,u,c,r,o,s))})),i.foreach((function(i,c){var u=n.child(i);t.cacheHasChild_(e,u.getFront())||(l=a.applyUserOverwrite_(l,u,c,r,o,s))})),l},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,i,r,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var l,c=t;l=e.isEmpty()?n:fe.Empty.setTree(e,n);var u=t.getServerCache().getNode();return l.children.inorderTraversal((function(e,n){if(u.hasChild(e)){var l=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(l,n);c=a.applyServerOverwrite_(c,new J(e),h,i,r,o,s)}})),l.children.inorderTraversal((function(e,n){var l=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!u.hasChild(e)&&!l){var h=t.getServerCache().getNode().getImmediateChild(e),d=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new J(e),d,i,r,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,i,r,o){if(null!=i.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),i,r,s,o);if(e.isEmpty()){var l=fe.Empty;return a.getNode().forEachChild(St,(function(t,e){l=l.set(new J(t),e)})),this.applyServerMerge_(t,e,l,i,r,s,o)}return t}var c=fe.Empty;return n.foreach((function(t,n){var i=e.child(t);a.isCompleteForPath(i)&&(c=c.set(t,a.getNode().getChild(i)))})),this.applyServerMerge_(t,e,c,i,r,s,o)},t.prototype.listenComplete_=function(t,e,n,i){var r=t.getServerCache(),o=t.updateServerSnap(r.getNode(),r.isFullyInitialized()||e.isEmpty(),r.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,xe,i)},t.prototype.revertUserWrite_=function(t,e,n,i,r){var o;if(null!=n.shadowingWrite(e))return t;var a=new Ce(n,t,i),l=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var u=void 0;if(t.getServerCache().isFullyInitialized())u=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();s.assert(h instanceof zt,"serverChildren would be complete if leaf node"),u=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(l,u=u,r)}else{var d=e.getFront(),p=n.calcCompleteChild(d,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(d)&&(p=l.getImmediateChild(d)),(c=null!=p?this.filter_.updateChild(l,d,p,e.popFront(),a,r):t.getEventCache().getNode().hasChild(d)?this.filter_.updateChild(l,d,zt.EMPTY_NODE,e.popFront(),a,r):l).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,o,r))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(J.Empty),t.updateEventSnap(c,o,this.filter_.filtersNodes())},t}(),Me=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var i=this,r=[],o=[];return t.forEach((function(t){t.type===_e.CHILD_CHANGED&&i.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(_e.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(r,_e.CHILD_REMOVED,t,n,e),this.generateEventsForType_(r,_e.CHILD_ADDED,t,n,e),this.generateEventsForType_(r,_e.CHILD_MOVED,o,n,e),this.generateEventsForType_(r,_e.CHILD_CHANGED,t,n,e),this.generateEventsForType_(r,_e.VALUE,t,n,e),r},t.prototype.generateEventsForType_=function(t,e,n,i,r){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,r);i.forEach((function(i){i.respondsTo(e.type)&&t.push(i.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw s.assertionError("Should only compare child_ events.");var n=new xt(t.childName,t.snapshotNode),i=new xt(e.childName,e.snapshotNode);return this.index_.compare(n,i)},t}(),Te=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),i=new we(n.getIndex()),r=n.getNodeFilter();this.processor_=new Se(r);var o=e.getServerCache(),s=e.getEventCache(),a=i.updateFullNode(zt.EMPTY_NODE,o.getNode(),null),l=r.updateFullNode(zt.EMPTY_NODE,s.getNode(),null),c=new ye(a,o.isFullyInitialized(),i.filtersNodes()),u=new ye(l,s.isFullyInitialized(),r.filtersNodes());this.viewCache_=new be(u,c),this.eventGenerator_=new Me(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){s.assert(null==t,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach((function(t){var r=t.createCancelEvent(e=e,i);r&&n.push(r)}))}if(t){for(var r=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){r=r.concat(this.eventRegistrations_.slice(o+1));break}}else r.push(a)}this.eventRegistrations_=r}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===he.MERGE&&null!==t.source.queryId&&(s.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),s.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var i=this.viewCache_,r=this.processor_.applyOperation(i,t,e,n);return this.processor_.assertIndexed(r.viewCache),s.assert(r.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=r.viewCache,this.generateEventsForChanges_(r.changes,r.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(kt,(function(t,e){n.push(_e.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(_e.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Pe=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return s.assert(ce,"Reference.ts has not been loaded"),ce},set:function(t){s.assert(!ce,"__referenceConstructor has already been defined"),ce=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var i,r,a=t.source.queryId;if(null!==a){var l=this.views.get(a);return s.assert(null!=l,"SyncTree gave us an op for an invalid query."),l.applyOperation(t,e,n)}var c=[];try{for(var u=o.__values(this.views.values()),h=u.next();!h.done;h=u.next())c=c.concat((l=h.value).applyOperation(t,e,n))}catch(d){i={error:d}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(i)throw i.error}}return c},t.prototype.addEventRegistration=function(t,e,n,i,r){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(r?i:null),l=!1;a?l=!0:i instanceof zt?(a=n.calcCompleteEventChildren(i),l=!1):(a=zt.EMPTY_NODE,l=!1);var c=new be(new ye(a,l,!1),new ye(i,r,!1));s=new Te(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,i){var r,s,a=e.queryIdentifier(),l=[],c=[],u=this.hasCompleteView();if("default"===a)try{for(var h=o.__values(this.views.entries()),d=h.next();!d.done;d=h.next()){var p,f=o.__read(d.value,2),m=f[0];c=c.concat((p=f[1]).removeEventRegistration(n,i)),p.isEmpty()&&(this.views.delete(m),p.getQuery().getQueryParams().loadsAllData()||l.push(p.getQuery()))}}catch(g){r={error:g}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(r)throw r.error}}else(p=this.views.get(a))&&(c=c.concat(p.removeEventRegistration(n,i)),p.isEmpty()&&(this.views.delete(a),p.getQuery().getQueryParams().loadsAllData()||l.push(p.getQuery())));return u&&!this.hasCompleteView()&&l.push(new t.__referenceConstructor(e.repo,e.path)),{removed:l,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var i=o.__values(this.views.values()),r=i.next();!r.done;r=i.next()){var s=r.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,i=null;try{for(var r=o.__values(this.views.values()),s=r.next();!s.done;s=r.next())i=i||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=o.__values(this.views.values()),i=n.next();!i.done;i=n.next()){var r=i.value;if(r.getQuery().getQueryParams().loadsAllData())return r}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),ke=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new fe(n));var i=this.writeTree_.findRootMostValueAndPath(e);if(null!=i){var r=i.path,o=i.value,s=J.relativePath(r,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(r,o))}var a=new fe(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return N(e,(function(e,i){n=n.addWrite(t.child(e),i)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,fe.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(J.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(kt,(function(e,n){t.push(new xt(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new xt(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new fe(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,i){if(null!=n.value)return i.updateChild(e,n.value);var r=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(s.assert(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):i=t(e.child(n),o,i)})),i.getChild(e).isEmpty()||null===r||(i=i.updateChild(e.child(".priority"),r)),i}(J.Empty,this.writeTree_,t)},t.Empty=new t(new fe(null)),t}(),De=function(){function t(){this.visibleWrites_=ke.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Oe(t,this)},t.prototype.addOverwrite=function(t,e,n,i){s.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:i}),i&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){s.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));s.assert(n>=0,"removeWrite called with nonexistent writeId.");var i=this.allWrites_[n];this.allWrites_.splice(n,1);for(var r=i.visible,o=!1,a=this.allWrites_.length-1;r&&a>=0;){var l=this.allWrites_[a];l.visible&&(a>=n&&this.recordContainsPath_(l,i.path)?r=!1:i.path.contains(l.path)&&(o=!0)),a--}return!!r&&(o?(this.resetTree_(),!0):(i.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(i.path):N(i.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(i.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,i,r){if(i||r){var o=this.visibleWrites_.childCompoundWrite(e);return!r&&o.isEmpty()?n:r||null!=n||o.hasCompleteWrite(J.Empty)?t.layerTree_(this.allWrites_,(function(t){return(t.visible||r)&&(!i||!~i.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e).apply(n||zt.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(J.Empty)?a.apply(n||zt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=zt.EMPTY_NODE,i=this.visibleWrites_.getCompleteNode(t);if(i)return i.isLeafNode()||i.forEachChild(kt,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var r=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(kt,(function(t,e){var i=r.childCompoundWrite(new J(t)).apply(e);n=n.updateImmediateChild(t,i)})),r.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,i){s.assert(n||i,"Either existingEventSnap or existingServerSnap must exist");var r=t.child(e);if(this.visibleWrites_.hasCompleteWrite(r))return null;var o=this.visibleWrites_.childCompoundWrite(r);return o.isEmpty()?i.getChild(e):o.apply(i.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var i=t.child(e),r=this.visibleWrites_.getCompleteNode(i);return null!=r?r:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(i).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,i,r,o){var s,a=this.visibleWrites_.childCompoundWrite(t),l=a.getCompleteNode(J.Empty);if(null!=l)s=l;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],u=o.getCompare(),h=r?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),d=h.getNext();d&&c.length<i;)0!==u(d,n)&&c.push(d),d=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,J.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var i=ke.Empty,r=0;r<t.length;++r){var o=t[r];if(e(o)){var a=o.path,l=void 0;if(o.snap)n.contains(a)?(l=J.relativePath(n,a),i=i.addWrite(l,o.snap)):a.contains(n)&&(l=J.relativePath(a,n),i=i.addWrite(J.Empty,o.snap.getChild(l)));else{if(!o.children)throw s.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))l=J.relativePath(n,a),i=i.addWrites(l,o.children);else if(a.contains(n))if((l=J.relativePath(a,n)).isEmpty())i=i.addWrites(J.Empty,o.children);else{var c=s.safeGet(o.children,l.getFront());if(c){var u=c.getChild(l.popFront());i=i.addWrite(J.Empty,u)}}}}}return i},t}(),Oe=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,i,r){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,i,r)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Re=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=fe.Empty,this.pendingWriteTree_=new De,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,i){return this.pendingWriteTree_.addOverwrite(t,e,n,i),i?this.applyOperationToSyncPoints_(new ge(de.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var i=fe.fromObject(e);return this.applyOperationToSyncPoints_(new ve(de.User,t,i))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var i=fe.Empty;return null!=n.snap?i=i.set(J.Empty,!0):N(n.children,(function(t,e){i=i.set(new J(t),e)})),this.applyOperationToSyncPoints_(new pe(n.path,i,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ge(de.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=fe.fromObject(e);return this.applyOperationToSyncPoints_(new ve(de.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new me(de.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,i){var r=this.queryKeyForTag_(i);if(null!=r){var o=t.parseQueryKey_(r),s=o.path,a=o.queryId,l=J.relativePath(s,e),c=new ge(de.forServerTaggedQuery(a),l,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,i){var r=this.queryKeyForTag_(i);if(r){var o=t.parseQueryKey_(r),s=o.path,a=o.queryId,l=J.relativePath(s,e),c=fe.fromObject(n),u=new ve(de.forServerTaggedQuery(a),l,c);return this.applyTaggedOperation_(s,u)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var i=this.queryKeyForTag_(n);if(i){var r=t.parseQueryKey_(i),o=r.path,s=r.queryId,a=J.relativePath(o,e),l=new me(de.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,l)}return[]},t.prototype.addEventRegistration=function(e,n){var i=e.path,r=null,o=!1;this.syncPointTree_.foreachOnPath(i,(function(t,e){var n=J.relativePath(t,i);r=r||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var a,l=this.syncPointTree_.get(i);l?(o=o||l.hasCompleteView(),r=r||l.getCompleteServerCache(J.Empty)):(l=new Pe,this.syncPointTree_=this.syncPointTree_.set(i,l)),null!=r?a=!0:(a=!1,r=zt.EMPTY_NODE,this.syncPointTree_.subtree(i).foreachChild((function(t,e){var n=e.getCompleteServerCache(J.Empty);n&&(r=r.updateImmediateChild(t,n))})));var c=l.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var u=t.makeQueryKey_(e);s.assert(!this.queryToTagMap.has(u),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(u,h),this.tagToQueryMap.set(h,u)}var d=this.pendingWriteTree_.childWrites(i),p=l.addEventRegistration(e,n,d,r,a);if(!c&&!o){var f=l.viewForQuery(e);p=p.concat(this.setupListener_(e,f))}return p},t.prototype.removeEventRegistration=function(e,n,i){var r=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var l=s.removeEventRegistration(e,n,i);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=l.removed;a=l.events;var u=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(u&&!h){var d=this.syncPointTree_.subtree(o);if(!d.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(d),f=0;f<p.length;++f){var m=p[f],g=m.getQuery(),v=this.createListenerForView_(m);this.listenProvider_.startListening(t.queryForListening_(g),this.tagForQuery_(g),v.hashFn,v.onComplete)}}!h&&c.length>0&&!i&&(u?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=r.queryToTagMap.get(t.makeQueryKey_(e));r.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(t,(function(e,n){var i=J.relativePath(e,t),r=n.getCompleteServerCache(i);if(r)return r}));return n.calcCompleteEventCache(t,i,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var i=[];return e&&(i=e.getQueryViews()),N(n,(function(t,e){i=i.concat(e)})),i}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var i=e[n];if(!i.getQueryParams().loadsAllData()){var r=t.makeQueryKey_(i),o=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var i=e.path,r=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),r,o.hashFn,o.onComplete),l=this.syncPointTree_.subtree(i);if(r)s.assert(!l.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=l.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var i=[];return e&&(i=i.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),N(n,(function(t,e){i=i.concat(e)})),i})),u=0;u<c.length;++u){var h=c[u];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),i=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||zt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?e.applyTaggedListenComplete(n.path,i):e.applyListenComplete(n.path);var r=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var i=new Error(t+" at "+e.path.toString()+": "+n);return i.code=t.toUpperCase(),i}(t,n);return e.removeEventRegistration(n,null,r)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return s.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new J(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);s.assert(n,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,i,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(J.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,i){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,i);var r=e.get(J.Empty);null==n&&null!=r&&(n=r.getCompleteServerCache(J.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){var c=n?n.getImmediateChild(s):null,u=i.child(s);o=o.concat(this.applyOperationHelper_(a,l,c,u))}return r&&(o=o.concat(r.applyOperation(t,i,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,i){var r=this,o=e.get(J.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(J.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,l=i.child(e),c=t.operationForChild(e);c&&(s=s.concat(r.applyOperationDescendantsHelper_(c,o,a,l)))})),o&&(s=s.concat(o.applyOperation(t,i,n))),s},t.nextQueryTag_=1,t}(),Ie=function(){function t(){this.rootNode_=zt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Le=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),s.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return s.deepCopy(this.counters_)},t}(),Fe=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Le),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Ne=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=o.__assign({},t);return this.last_&&N(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Be=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ne(t);var n=1e4+2e4*Math.random();Z(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},i=!1;N(e,(function(e,r){r>0&&s.contains(t.statsToReport_,e)&&(n[e]=r,i=!0)})),i&&this.server_.reportStats(n),Z(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ue=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var i=t[n],r=i.getPath();null===e||r.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Ve(r)),e.add(i)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var i=this.eventLists_[n];i&&(t(i.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Ve=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();w&&C("event: "+e.toString()),K(n)}}},t.prototype.getPath=function(){return this.path_},t}(),je=function(){function t(t){this.allowedEvents_=t,this.listeners_={},s.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var i=o.__spread(this.listeners_[t]),r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var i=this.getInitialEvent(t);i&&e.apply(n,i)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var i=this.listeners_[t]||[],r=0;r<i.length;r++)if(i[r].callback===e&&(!n||n===i[r].context))return void i.splice(r,1)},t.prototype.validateEventType_=function(t){s.assert(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),ze=function(t){function e(){var e,n,i=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),i.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==i.visible_&&(i.visible_=t,i.trigger("visible",t))}),!1),i}return o.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return s.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(je),He=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||s.isMobileCordova()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return o.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return s.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(je),Ge=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var i=function(){var t=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var e=function(e){t[e]&&K((function(){n.onMessage_(t[e])}))},i=0;i<t.length;++i)e(i);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++},r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==i(););},t}(),We=function(){function t(t,e,n,i,r){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=i,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=E(t),this.stats_=Fe.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ge(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(s.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new qe((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=o.__read(t,5),r=i[0],s=i[1],a=i[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===r)n.id=s,n.password=a;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=o.__read(t,2),r=i[0],s=i[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,s)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(s.isNodeSdk()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=s.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=s.base64Encode(e),i=F(n,1840),r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!s.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=s.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),qe=function(){function t(n,i,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,s.isNodeSdk())this.commandCB=n,this.onMessageCB=i;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=n,window["pRTLPCB"+this.uniqueCallbackIdentifier]=i,this.myIFrame=t.createIFrame_();var a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');var l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(e){C("frame writing exception"),e.stack&&C(e.stack),C(e)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||C("No IE domain setting required")}catch(e){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",i=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var r=this.pendingSegs.shift();n=n+"&seg"+i+"="+r.seg+"&ts"+i+"="+r.ts+"&d"+i+"="+r.d,i++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var i=function(){n.outstandingRequests.delete(e),n.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(r),i()}))},t.prototype.addTag=function(t,n){var i=this;s.isNodeSdk()?this.doNodeLongPoll(t,n):setTimeout((function(){try{if(!i.sendNewPolls)return;var r=i.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=function(){C("Long-poll script failed to load: "+t),i.sendNewPolls=!1,i.close()},i.myIFrame.doc.body.appendChild(r)}catch(e){}}),Math.floor(1))},t}(),$e="",Ye=null;"undefined"!=typeof MozWebSocket?Ye=MozWebSocket:"undefined"!=typeof WebSocket&&(Ye=WebSocket);var Qe=function(){function t(e,n,i,r,o){this.connId=e,this.applicationId=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=E(this.connId),this.stats_=Fe.getCollection(n),this.connURL=t.connectionURL_(n,r,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var i={v:"5"};return!s.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),t.connectionURL("websocket",i)},t.prototype.open=function(t,n){var i=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,m.set("previous_websocket_failure",!0);try{if(s.isNodeSdk()){var r={headers:{"User-Agent":"Firebase/5/"+$e+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a}),this.mySock=new Ye(this.connURL,[],r)}else this.mySock=new Ye(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(e){this.log_("Error instantiating WebSocket.");var l=e.message||e.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=function(){i.log_("Websocket connected."),i.everConnected_=!0},this.mySock.onclose=function(){i.log_("Websocket connection was disconnected."),i.mySock=null,i.onClosed_()},this.mySock.onmessage=function(t){i.handleIncomingFrame(t)},this.mySock.onerror=function(t){i.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&i.log_(e),i.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ye&&!t.forceDisallow_},t.previouslyFailed=function(){return m.isInMemoryStorage||!0===m.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){m.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=s.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(s.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=s.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=F(e,16384);n.length>1&&this.sendString_(String(n.length));for(var i=0;i<n.length;i++)this.sendString_(n[i])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Xe=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[We,Qe]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,i,r=Qe&&Qe.isAvailable(),s=r&&!Qe.previouslyFailed();if(e.webSocketOnly&&(r||T("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Qe];else{var a=this.transports_=[];try{for(var l=o.__values(t.ALL_TRANSPORTS),c=l.next();!c.done;c=l.next()){var u=c.value;u&&u.isAvailable()&&a.push(u)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Ke=function(){function t(t,e,n,i,r,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=i,this.onReady_=r,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=E("c:"+this.id+":"),this.transportManager_=new Xe(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,i)}),Math.floor(0));var r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Z((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(r)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=I("t",t),n=I("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=I("t",t),n=I("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=I("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?S("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(i),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&T("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Z((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Z((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(m.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Ze=function(){function t(){}return t.prototype.put=function(t,e,n,i){},t.prototype.merge=function(t,e,n,i){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Je=function(t){function e(n,i,r,o,a,l,c){var u=t.call(this)||this;if(u.repoInfo_=n,u.applicationId_=i,u.onDataUpdate_=r,u.onConnectStatus_=o,u.onServerInfoUpdate_=a,u.authTokenProvider_=l,u.authOverride_=c,u.id=e.nextPersistentConnectionId_++,u.log_=E("p:"+u.id+":"),u.interruptReasons_={},u.listens=new Map,u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=1e3,u.maxReconnectDelay_=3e5,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,c&&!s.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),ze.getInstance().on("visible",u.onVisible_,u),-1===n.host.indexOf("fblocal")&&He.getInstance().on("online",u.onOnline_,u),u}return o.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var i=++this.requestNumber_,r={r:i,a:t,b:e};this.log_(s.stringify(r)),s.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)},e.prototype.listen=function(t,e,n,i){var r=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),s.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),s.assert(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");var a={onComplete:i,hashFn:e,query:t,tag:n};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,i=t.query,r=i.path.toString(),o=i.queryIdentifier();this.log_("Listen on "+r+" for "+o);var s={p:r};t.tag&&(s.q=i.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,l=s.s;e.warnOnListenWarnings_(a,i),(n.listens.get(r)&&n.listens.get(r).get(o))===t&&(n.log_("listen response",s),"ok"!==l&&n.removeListen_(r,o),t.onComplete&&t.onComplete(l,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&s.contains(t,"w")){var n=s.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var i='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',r=e.path.toString();T("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+i+" at "+r+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||s.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=s.isValidFormat(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(n,i,(function(n){var i=n.s,r=n.d||"error";t.authToken_===e&&("ok"===i?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(i,r))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),i=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+i),s.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,i){this.log_("Unlisten on "+t+" for "+e);var r={p:t};i&&(r.q=n,r.t=i),this.sendRequest("n",r)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,i){var r={p:e,d:n};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,(function(t){i&&setTimeout((function(){i(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,i){this.putInternal("p",t,e,n,i)},e.prototype.merge=function(t,e,n,i){this.putInternal("m",t,e,n,i)},e.prototype.putInternal=function(t,e,n,i,r){var o={p:e,d:n};void 0!==r&&(o.h=r),this.outstandingPuts_.push({action:t,request:o,onComplete:i}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,(function(i){e.log_(n+" response",i),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),r&&r(i.s,i.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+s.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):S("Unrecognized action received from server: "+s.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;s.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,a=this,l=this.lastSessionId,c=!1,u=null,h=function(){u?u.close():(c=!0,r())};this.realtime_={close:h,sendRequest:function(t){s.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then((function(t){c?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,u=new Ke(o,a.repoInfo_,a.applicationId_,n,i,r,(function(t){T(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),l))})).then(null,(function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&T(e),h())}))}},e.prototype.interrupt=function(t){C("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){C("Resuming connection for reason: "+t),delete this.interruptReasons_[t],s.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return L(t)})).join("$"):"default";var i=this.removeListen_(t,n);i&&i.onComplete&&i.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,i=new J(t).toString();if(this.listens.has(i)){var r=this.listens.get(i);n=r.get(e),r.delete(e),0===r.size&&this.listens.delete(i)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){C("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,i;this.tryAuth();try{for(var r=o.__values(this.listens.values()),s=r.next();!s.done;s=r.next()){var a=s.value;try{for(var l=(n=void 0,o.__values(a.values())),c=l.next();!c.done;c=l.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}for(var u=0;u<this.outstandingPuts_.length;u++)this.outstandingPuts_[u]&&this.sendPut_(u);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";s.isNodeSdk()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+$e.replace(/\./g,"-")]=1,s.isMobileCordova()?t["framework.cordova"]=1:s.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=He.getInstance().currentlyOnline();return s.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Ze),tn=function(t){function n(e,n,i){var r=t.call(this)||this;return r.repoInfo_=e,r.onDataUpdate_=n,r.authTokenProvider_=i,r.log_=E("p:rest:"),r.listens_={},r}return o.__extends(n,t),n.prototype.reportStats=function(t){throw new Error("Method not implemented.")},n.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(s.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},n.prototype.listen=function(t,e,i,r){var o=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var l=n.getListenId_(t,i),c={};this.listens_[l]=c;var u=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",u,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,i),s.safeGet(o.listens_,l)===c&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},n.prototype.unlisten=function(t,e){var i=n.getListenId_(t,e);delete this.listens_[i]},n.prototype.refreshAuthToken=function(t){},n.prototype.restRequest_=function(t,n,i){var r=this;void 0===n&&(n={}),n.format="export",this.authTokenProvider_.getToken(!1).then((function(o){var a=o&&o.accessToken;a&&(n.auth=a);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+s.querystring(n);r.log_("Sending REST request for "+l);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(i&&4===c.readyState){r.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);var t=null;if(c.status>=200&&c.status<300){try{t=s.jsonEval(c.responseText)}catch(e){T("Failed to parse JSON response for "+l+": "+c.responseText)}i(null,t)}else 401!==c.status&&404!==c.status&&T("Got unsuccessful REST response for "+l+" Status: "+c.status),i(c.status);i=null}},c.open("GET",l,!0),c.send()}))},n}(Ze),en=function(){function t(t,n,i,r){var o=this;if(this.repoInfo_=t,this.app=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ue,this.persistentConnection_=null,this.stats_=Fe.getCollection(t),n||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new tn(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var a=i.options.databaseAuthVariableOverride;if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{s.stringify(a)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new Je(this.repoInfo_,i.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,a),this.server_=this.persistentConnection_}r.addTokenChangeListener((function(t){o.server_.refreshAuthToken(t)})),this.statsReporter_=Fe.getOrCreateReporter(t,(function(){return new Be(o.stats_,o.server_)})),this.transactionsInit_(),this.infoData_=new Ie,this.infoSyncTree_=new Re({startListening:function(t,e,n,i){var r=[],s=o.infoData_.getNode(t.path);return s.isEmpty()||(r=o.infoSyncTree_.applyServerOverwrite(t.path,s),setTimeout((function(){i("ok")}),0)),r},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Re({startListening:function(t,e,n,i){return o.server_.listen(t,n,e,(function(e,n){var r=i(e,n);o.eventQueue_.raiseEventsForChangedPath(t.path,r)})),[]},stopListening:function(t,e){o.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new J(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,i){this.dataUpdateCount++;var r=new J(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(i)if(n){var a=s.map(e,(function(t){return Gt(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(r,a,i)}else{var l=Gt(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(r,l,i)}else if(n){var c=s.map(e,(function(t){return Gt(t)}));o=this.serverSyncTree_.applyServerMerge(r,c)}else{var u=Gt(e);o=this.serverSyncTree_.applyServerOverwrite(r,u)}var h=r;o.length>0&&(h=this.rerunTransactions_(r)),this.eventQueue_.raiseEventsForChangedPath(h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;N(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new J("/.info/"+t),i=Gt(e);this.infoData_.updateSnapshot(n,i);var r=this.infoSyncTree_.applyServerOverwrite(n,i);this.eventQueue_.raiseEventsForChangedPath(n,r)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,i){var r=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Gt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),l=se(s,a,o),c=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserOverwrite(t,l,c,!0);this.eventQueue_.queueEvents(u),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||T("set at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(c,!o);r.eventQueue_.raiseEventsForChangedPath(t,s),r.callOnCompleteCallback(i,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var i=this;this.log_("update",{path:t.toString(),value:e});var r=!0,o=this.generateServerValues(),s={};if(N(e,(function(e,n){r=!1,s[e]=oe(t.child(e),Gt(n),i.serverSyncTree_,o)})),r)C("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(l),this.server_.merge(t.toString(),e,(function(e,r){var o="ok"===e;o||T("update at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(a,!o),l=s.length>0?i.rerunTransactions_(t):t;i.eventQueue_.raiseEventsForChangedPath(l,s),i.callOnCompleteCallback(n,e,r)})),N(e,(function(e){var n=i.abortTransactions_(t.child(e));i.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new ue;this.onDisconnect_.forEachTree(J.Empty,(function(i,r){var o=oe(i,r,t.serverSyncTree_,e);n.remember(i,o)}));var i=[];n.forEachTree(J.Empty,(function(e,n){i=i.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var r=t.abortTransactions_(e);t.rerunTransactions_(r)})),this.onDisconnect_=new ue,this.eventQueue_.raiseEventsForChangedPath(J.Empty,i)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(i,r){"ok"===i&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,i,r)}))},t.prototype.onDisconnectSet=function(t,e,n){var i=this,r=Gt(e);this.server_.onDisconnectPut(t.toString(),r.val(!0),(function(e,o){"ok"===e&&i.onDisconnect_.remember(t,r),i.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,i){var r=this,o=Gt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&r.onDisconnect_.remember(t,o),r.callOnCompleteCallback(i,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var i=this;if(s.isEmpty(e))return C("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(r,o){"ok"===r&&N(e,(function(e,n){var r=Gt(n);i.onDisconnect_.remember(t.child(e),r)})),i.callOnCompleteCallback(n,r,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Ne(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);N(e,(function(t,e){for(var i=t,r=t.length;r<n+2;r++)i+=" ";console.log(i+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),C.apply(void 0,o.__spread([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&K((function(){if("ok"===e)t(null);else{var i=(e||"error").toUpperCase(),r=i;n&&(r+=": "+n);var o=new Error(r);o.code=i,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new fn(this))},enumerable:!1,configurable:!0}),t}(),nn=function(){function t(e){this.indexedFilter_=new we(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,i,r,o){return this.matches(new xt(e,n))||(n=zt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,i,r,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=zt.EMPTY_NODE);var i=e.withIndex(this.index_);i=i.updatePriority(zt.EMPTY_NODE);var r=this;return e.forEachChild(kt,(function(t,e){r.matches(new xt(t,e))||(i=i.updateImmediateChild(t,zt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,i,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),rn=function(){function t(t){this.rangedFilter_=new nn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,i,r,o){return this.rangedFilter_.matches(new xt(e,n))||(n=zt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,i,r,o):this.fullLimitUpdateChild_(t,e,n,r,o)},t.prototype.updateFullNode=function(t,e,n){var i;if(e.isLeafNode()||e.isEmpty())i=zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){i=zt.EMPTY_NODE.withIndex(this.index_);var r=void 0;r=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;r.hasNext()&&o<this.limit_;){var s=r.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;i=i.updateImmediateChild(s.name,s.node),o++}}else{i=(i=e.withIndex(this.index_)).updatePriority(zt.EMPTY_NODE);var a=void 0,l=void 0,c=void 0;if(r=void 0,this.reverse_){r=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();var u=this.index_.getCompare();c=function(t,e){return u(e,t)}}else r=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;r.hasNext();)s=r.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,l)<=0?o++:i=i.updateImmediateChild(s.name,zt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,i,r){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var l=t;s.assert(l.numChildren()===this.limit_,"");var c=new xt(e,n),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(l.hasChild(e)){for(var d=l.getImmediateChild(e),p=i.getChildAfterChild(this.index_,u,this.reverse_);null!=p&&(p.name===e||l.hasChild(p.name));)p=i.getChildAfterChild(this.index_,p,this.reverse_);var f=null==p?1:o(p,c);if(h&&!n.isEmpty()&&f>=0)return null!=r&&r.trackChildChange(_e.childChangedChange(e,n,d)),l.updateImmediateChild(e,n);null!=r&&r.trackChildChange(_e.childRemovedChange(e,d));var m=l.updateImmediateChild(e,zt.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=r&&r.trackChildChange(_e.childAddedChange(p.name,p.node)),m.updateImmediateChild(p.name,p.node)):m}return n.isEmpty()?t:h&&o(u,c)>=0?(null!=r&&(r.trackChildChange(_e.childRemovedChange(u.name,u.node)),r.trackChildChange(_e.childAddedChange(e,n))),l.updateImmediateChild(e,n).updateImmediateChild(u.name,zt.EMPTY_NODE)):t},t}(),on=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return s.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return s.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:k},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return s.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return s.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:D},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return s.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var i=this.viewFrom_;""===i&&(i=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=i}return this.index_!==kt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===kt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new we(this.getIndex()):this.hasLimit()?new rn(this):new nn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,i={};return this.isDefault()||(this.index_===kt?e=n.PRIORITY_INDEX:this.index_===qt?e=n.VALUE_INDEX:this.index_===St?e=n.KEY_INDEX:(s.assert(this.index_ instanceof $t,"Unrecognized index type!"),e=this.index_.toString()),i[n.ORDER_BY]=s.stringify(e),this.startSet_&&(i[n.START_AT]=s.stringify(this.indexStartValue_),this.startNameSet_&&(i[n.START_AT]+=","+s.stringify(this.indexStartName_))),this.endSet_&&(i[n.END_AT]=s.stringify(this.indexEndValue_),this.endNameSet_&&(i[n.END_AT]+=","+s.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?i[n.LIMIT_TO_FIRST]=this.limit_:i[n.LIMIT_TO_LAST]=this.limit_)),i},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),sn=function(t){function e(e,n){if(!(e instanceof en))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,on.DEFAULT,!1)||this}return o.__extends(e,t),e.prototype.getKey=function(){return s.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return s.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof J||(null===this.path.getFront()?gt("Reference.child",1,t,!1):mt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){s.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){s.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){s.validateArgCount("Reference.set",1,2,arguments.length),vt("Reference.set",this.path),ct("Reference.set",1,t,this.path,!1),s.validateCallback("Reference.set",2,e,!0);var n=new s.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(s.validateArgCount("Reference.update",1,2,arguments.length),vt("Reference.update",this.path),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[""+i]=t[i];t=n,T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("Reference.update",1,t,this.path,!1),s.validateCallback("Reference.update",2,e,!0);var r=new s.Deferred;return this.repo.update(this.path,t,r.wrapCallback(e)),r.promise},e.prototype.setWithPriority=function(t,e,n){if(s.validateArgCount("Reference.setWithPriority",2,3,arguments.length),vt("Reference.setWithPriority",this.path),ct("Reference.setWithPriority",1,t,this.path,!1),dt("Reference.setWithPriority",2,e,!1),s.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var i=new s.Deferred;return this.repo.setWithPriority(this.path,t,e,i.wrapCallback(n)),i.promise},e.prototype.remove=function(t){return s.validateArgCount("Reference.remove",0,1,arguments.length),vt("Reference.remove",this.path),s.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(s.validateArgCount("Reference.transaction",1,3,arguments.length),vt("Reference.transaction",this.path),s.validateCallback("Reference.transaction",1,t,!1),s.validateCallback("Reference.transaction",2,e,!0),bt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var i=new s.Deferred;"function"==typeof e&&i.promise.catch((function(){}));var r=function(t,n,r){t?i.reject(t):i.resolve(new wt(n,r)),"function"==typeof e&&e(t,n,r)};return this.repo.startTransaction(this.path,t,r,n),i.promise},e.prototype.setPriority=function(t,e){s.validateArgCount("Reference.setPriority",1,2,arguments.length),vt("Reference.setPriority",this.path),dt("Reference.setPriority",1,t,!1),s.validateCallback("Reference.setPriority",2,e,!0);var n=new s.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){s.validateArgCount("Reference.push",0,2,arguments.length),vt("Reference.push",this.path),ct("Reference.push",1,t,this.path,!0),s.validateCallback("Reference.push",2,e,!0);var n,i=this.repo.serverTime(),r=At(i),o=this.child(r),a=this.child(r);return n=null!=t?o.set(t,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return vt("Reference.onDisconnect",this.path),new _t(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Jt);Jt.__referenceConstructor=sn,Pe.__referenceConstructor=sn;var an=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),ln=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new an),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof J?e:new J(e),i=this,r=n.getFront();null!==r;)i=new t(r,i,s.safeGet(i.node_.children,r)||new an),r=(n=n.popFront()).getFront();return i},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){s.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;N(this.node_.children,(function(i,r){e(new t(i,n,r))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new J(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),i=s.contains(this.node_.children,t);n&&i?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||i||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),cn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});en.MAX_TRANSACTION_RETRIES_=25,en.prototype.transactionsInit_=function(){this.transactionQueueTree_=new ln},en.prototype.startTransaction=function(t,e,n,i){this.log_("transaction on "+t);var r=function(){},o=new sn(this,t);o.on("value",r);var a={path:t,update:e,onComplete:n,status:null,order:y(),applyLocally:i,retryCount:0,unwatcher:function(){o.off("value",r)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=this.getLatestState_(t);a.currentInputSnapshot=l;var c=a.update(l.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var u=new Yt(a.currentInputSnapshot,new sn(this,a.path),kt);a.onComplete(null,!1,u)}}else{ut("transaction failed: Data returned ",c,a.path),a.status=cn.RUN;var h=this.transactionQueueTree_.subTree(t),d=h.getValue()||[];d.push(a),h.setValue(d);var p=void 0;"object"==typeof c&&null!==c&&s.contains(c,".priority")?(p=s.safeGet(c,".priority"),s.assert(lt(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(this.serverSyncTree_.calcCompleteEventCache(t)||zt.EMPTY_NODE).getPriority().val(),p=p;var f=this.generateServerValues(),m=Gt(c,p),g=se(m,l,f);a.currentOutputSnapshotRaw=m,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,g,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_()}},en.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||zt.EMPTY_NODE},en.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);s.assert(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===cn.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},en.prototype.sendTransactionQueue_=function(t,e){for(var n=this,i=e.map((function(t){return t.currentWriteId})),r=this.getLatestState_(t,i),o=r,a=r.hash(),l=0;l<e.length;l++){var c=e[l];s.assert(c.status===cn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=cn.SENT,c.retryCount++;var u=J.relativePath(t,c.path);o=o.updateChild(u,c.currentOutputSnapshotRaw)}var h=o.val(!0),d=t;this.server_.put(d.toString(),h,(function(i){n.log_("transaction put response",{path:d.toString(),status:i});var r=[];if("ok"===i){for(var o=[],s=0;s<e.length;s++){if(e[s].status=cn.COMPLETED,r=r.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,l=new sn(n,e[s].path),c=new Yt(a,l,kt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,r),s=0;s<o.length;s++)K(o[s])}else{if("datastale"===i)for(s=0;s<e.length;s++)e[s].status=e[s].status===cn.SENT_NEEDS_ABORT?cn.NEEDS_ABORT:cn.RUN;else for(T("transaction at "+d.toString()+" failed: "+i),s=0;s<e.length;s++)e[s].status=cn.NEEDS_ABORT,e[s].abortReason=i;n.rerunTransactions_(t)}}),a)},en.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),i=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(i,n),n},en.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],i=[],r=t.filter((function(t){return t.status===cn.RUN})).map((function(t){return t.currentWriteId})),o=0;o<t.length;o++){var a=t[o],l=J.relativePath(e,a.path),c=!1,u=void 0;if(s.assert(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===cn.NEEDS_ABORT)c=!0,u=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===cn.RUN)if(a.retryCount>=en.MAX_TRANSACTION_RETRIES_)c=!0,u="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,r);a.currentInputSnapshot=h;var d=t[o].update(h.val());if(void 0!==d){ut("transaction failed: Data returned ",d,a.path);var p=Gt(d);"object"==typeof d&&null!=d&&s.contains(d,".priority")||(p=p.updatePriority(h.getPriority()));var f=a.currentWriteId,m=this.generateServerValues(),g=se(p,h,m);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_(),r.splice(r.indexOf(f),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,g,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(f,!0))}else c=!0,u="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[o].status=cn.COMPLETED,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete))if("nodata"===u){var v=new sn(this,t[o].path),y=new Yt(t[o].currentInputSnapshot,v,kt);n.push(t[o].onComplete.bind(null,null,!1,y))}else n.push(t[o].onComplete.bind(null,new Error(u),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)K(n[o]);this.sendReadyTransactions_()}},en.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},en.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},en.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,i=t.getValue();if(null!==i)for(var r=0;r<i.length;r++)e.push(i[r]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},en.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var i=0,r=0;r<n.length;r++)n[r].status!==cn.COMPLETED&&(n[i]=n[r],i++);n.length=i,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},en.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),i=this.transactionQueueTree_.subTree(t);return i.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(i),i.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},en.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],i=[],r=-1,o=0;o<e.length;o++)e[o].status===cn.SENT_NEEDS_ABORT||(e[o].status===cn.SENT?(s.assert(r===o-1,"All SENT items should be at beginning of queue."),r=o,e[o].status=cn.SENT_NEEDS_ABORT,e[o].abortReason="set"):(s.assert(e[o].status===cn.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),i=i.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===r?t.setValue(null):e.length=r+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),i),o=0;o<n.length;o++)K(n[o])}};var un,hn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';T(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),dn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),pn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return un||(un=new t),un},t.prototype.interrupt=function(){var t,e,n,i;try{for(var r=o.__values(Object.keys(this.repos_)),s=r.next();!s.done;s=r.next()){var a=s.value;try{for(var l=(n=void 0,o.__values(Object.keys(this.repos_[a]))),c=l.next();!c.done;c=l.next())this.repos_[a][c.value].interrupt()}catch(u){n={error:u}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,i;try{for(var r=o.__values(Object.keys(this.repos_)),s=r.next();!s.done;s=r.next()){var a=s.value;try{for(var l=(n=void 0,o.__values(Object.keys(this.repos_[a]))),c=l.next();!c.done;c=l.next())this.repos_[a][c.value].resume()}catch(u){n={error:u}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.databaseFromApp=function(t,e,n,i){var r=n||t.options.databaseURL;void 0===r&&(t.options.projectId||M("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",t.options.projectId),r=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=nt(r,i),a=s.repoInfo,l=void 0;"undefined"!=typeof process&&(l=process.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(o=!0,a=(s=nt(r="http://"+l+"?ns="+a.namespace,i)).repoInfo):o=!s.repoInfo.secure;var c=i&&o?new dn:new hn(t,e);return yt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||M("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=s.safeGet(this.repos_,t.app.name);e&&s.safeGet(e,t.repoInfo_.toURLString())===t||M("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e,n){var i=s.safeGet(this.repos_,e.name);i||(this.repos_[e.name]=i={});var r=s.safeGet(i,t.toURLString());return r&&M("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new en(t,this.useRestClient_,e,n),i[t.toURLString()]=r,r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),fn=function(){function t(t){this.repo_=t,t instanceof en||M("Don't call new Database() directly - please use firebase.database()."),this.root_=new sn(t,J.Empty),this.INTERNAL=new mn(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),s.validateArgCount("database.ref",0,1,arguments.length),t instanceof sn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),s.validateArgCount(e,1,1,arguments.length);var n=nt(t,this.repo_.repoInfo_.nodeAdmin);yt(e,1,n);var i=n.repoInfo;return i.host!==this.repo_.repoInfo_.host&&M(e+": Host name does not match the current database: (found "+i.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&M("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){s.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){s.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),mn=function(){function t(t){this.database=t}return t.prototype.delete=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.database.checkDeleted_("delete"),pn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},t}(),gn=Object.freeze({__proto__:null,forceLongPolling:function(){Qe.forceDisallow(),We.forceAllow()},forceWebSockets:function(){We.forceDisallow()},isWebSocketsAvailable:function(){return Qe.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),vn=Je;Je.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Je.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var yn=Object.freeze({__proto__:null,DataConnection:vn,RealTimeConnection:Ke,hijackHash:function(t){var e=Je.prototype.put;return Je.prototype.put=function(n,i,r,o){void 0!==o&&(o=t()),e.call(this,n,i,r,o)},function(){Je.prototype.put=e}},ConnectionTarget:et,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){pn.getInstance().forceRestClient(t)}}),bn=fn.ServerValue;function _n(e){$e=e.SDK_VERSION;var n=e.INTERNAL.registerComponent(new l.Component("database",(function(t,e){var n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return pn.getInstance().databaseFromApp(n,i,e)}),"PUBLIC").setServiceProps({Reference:sn,Query:Jt,Database:fn,DataSnapshot:Yt,enableLogging:x,INTERNAL:gn,ServerValue:bn,TEST_ACCESS:yn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.6.13"),s.isNodeSdk()&&(t.exports=n)}_n(h.default),n.DataSnapshot=Yt,n.Database=fn,n.OnDisconnect=_t,n.Query=Jt,n.Reference=sn,n.ServerValue=bn,n.enableLogging=x,n.registerDatabase=_n},"S+S0":function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=i("mrSG"),o=i("zVF4"),s=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){var i=new o.Deferred;this.instancesDeferred.set(n,i);try{var r=this.getOrInitializeService(n);r&&i.resolve(r)}catch(e){}}return this.instancesDeferred.get(n).promise},t.prototype.getImmediate=function(t){var n=r.__assign({identifier:"[DEFAULT]",optional:!1},t),i=n.optional,o=this.normalizeInstanceIdentifier(n.identifier);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(e){if(i)return null;throw e}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var n,i;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(e){}try{for(var o=r.__values(this.instancesDeferred.entries()),s=o.next();!s.done;s=o.next()){var a=r.__read(s.value,2),l=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var u=this.getOrInitializeService(c);l.resolve(u)}catch(e){}}}catch(h){n={error:h}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(r.__spread(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),l=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();n.Component=s,n.ComponentContainer=l,n.Provider=a},Wcq6:function(t,e,n){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=i(n("wj3C"));r.default.registerVersion("firebase","7.24.0","app"),t.exports=r.default},lRFz:function(module,exports,__webpack_require__){var factory;factory=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,(function(e){return t[e]}).bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"addLinkAttributes",{enumerable:!0,get:function(){return i.addLinkAttributes}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(e,"LinkTarget",{enumerable:!0,get:function(){return i.LinkTarget}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(e,"LoopbackPort",{enumerable:!0,get:function(){return r.LoopbackPort}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return r.version}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return o.CMapCompressionType}}),Object.defineProperty(e,"createObjectURL",{enumerable:!0,get:function(){return o.createObjectURL}}),Object.defineProperty(e,"createPromiseCapability",{enumerable:!0,get:function(){return o.createPromiseCapability}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return o.createValidAbsoluteUrl}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return o.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return o.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return o.OPS}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return o.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return o.PermissionFlag}}),Object.defineProperty(e,"removeNullCharacters",{enumerable:!0,get:function(){return o.removeNullCharacters}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return o.shadow}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return o.UnexpectedResponseException}}),Object.defineProperty(e,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return o.UNSUPPORTED_FEATURES}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return o.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return o.VerbosityLevel}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return s.AnnotationLayer}}),Object.defineProperty(e,"apiCompatibilityParams",{enumerable:!0,get:function(){return a.apiCompatibilityParams}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return l.GlobalWorkerOptions}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return c.renderTextLayer}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return u.SVGGraphics}});var i=n(1),r=n(5),o=n(2),s=n(16),a=n(7),l=n(10),c=n(17),u=n(18);{const{isNodeJS:t}=n(4);if(t){const t=n(19).PDFNodeStream;(0,r.setPDFNetworkStreamFactory)(e=>new t(e))}else{const t=n(22).PDFNetworkStream;let e;(0,i.isFetchSupported)()&&(e=n(23).PDFFetchStream),(0,r.setPDFNetworkStreamFactory)(n=>e&&(0,i.isValidFetchUrl)(n.url)?new e(n):new t(n))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addLinkAttributes=function(t,{url:e,target:n,rel:r,enabled:o=!0}={}){(0,i.assert)(e&&"string"==typeof e,'addLinkAttributes: A valid "url" parameter must provided.');const a=(0,i.removeNullCharacters)(e);o?t.href=t.title=a:(t.href="",t.title=`Disabled: ${a}`,t.onclick=()=>!1);let l="";switch(n){case s.NONE:break;case s.SELF:l="_self";break;case s.BLANK:l="_blank";break;case s.PARENT:l="_parent";break;case s.TOP:l="_top"}t.target=l,t.rel="string"==typeof r?r:"noopener noreferrer nofollow"},e.getFilenameFromUrl=function(t){const e=t.indexOf("#"),n=t.indexOf("?"),i=Math.min(e>0?e:t.length,n>0?n:t.length);return t.substring(t.lastIndexOf("/",i)+1,i)},e.isFetchSupported=a,e.isValidFetchUrl=l,e.loadScript=function(t){return new Promise((e,n)=>{const i=document.createElement("script");i.src=t,i.onload=e,i.onerror=function(){n(new Error(`Cannot load script at: ${i.src}`))},(document.head||document.documentElement).appendChild(i)})},e.deprecated=function(t){console.log("Deprecated API usage: "+t)},e.PDFDateString=e.StatTimer=e.DOMSVGFactory=e.DOMCMapReaderFactory=e.DOMCanvasFactory=e.DEFAULT_LINK_REL=e.LinkTarget=e.RenderingCancelledException=e.PageViewport=void 0;var i=n(2);e.DEFAULT_LINK_REL="noopener noreferrer nofollow";const r="http://www.w3.org/2000/svg";e.DOMCanvasFactory=class{create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=document.createElement("canvas"),i=n.getContext("2d");return n.width=t,n.height=e,{canvas:n,context:i}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}},e.DOMCMapReaderFactory=class{constructor({baseUrl:t=null,isCompressed:e=!1}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),n=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return a()&&l(e,document.baseURI)?fetch(e).then(async t=>{if(!t.ok)throw new Error(t.statusText);let e;return e=this.isCompressed?new Uint8Array(await t.arrayBuffer()):(0,i.stringToBytes)(await t.text()),{cMapData:e,compressionType:n}}).catch(t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}`+`CMap at: ${e}`)}):new Promise((t,r)=>{const o=new XMLHttpRequest;o.open("GET",e,!0),this.isCompressed&&(o.responseType="arraybuffer"),o.onreadystatechange=()=>{if(o.readyState===XMLHttpRequest.DONE){if(200===o.status||0===o.status){let e;if(this.isCompressed&&o.response?e=new Uint8Array(o.response):!this.isCompressed&&o.responseText&&(e=(0,i.stringToBytes)(o.responseText)),e)return void t({cMapData:e,compressionType:n})}r(new Error(o.statusText))}},o.send(null)}).catch(t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}`+`CMap at: ${e}`)})}},e.DOMSVGFactory=class{create(t,e){(0,i.assert)(t>0&&e>0,"Invalid SVG dimensions");const n=document.createElementNS(r,"svg:svg");return n.setAttribute("version","1.1"),n.setAttribute("width",t+"px"),n.setAttribute("height",e+"px"),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox","0 0 "+t+" "+e),n}createElement(t){return(0,i.assert)("string"==typeof t,"Invalid SVG element type"),document.createElementNS(r,t)}};class o{constructor({viewBox:t,scale:e,rotation:n,offsetX:i=0,offsetY:r=0,dontFlip:o=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=i,this.offsetY=r;const s=(t[2]+t[0])/2,a=(t[3]+t[1])/2;let l,c,u,h,d,p,f,m;switch(n=(n%=360)<0?n+360:n){case 180:l=-1,c=0,u=0,h=1;break;case 90:l=0,c=1,u=1,h=0;break;case 270:l=0,c=-1,u=-1,h=0;break;case 0:l=1,c=0,u=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(u=-u,h=-h),0===l?(d=Math.abs(a-t[1])*e+i,p=Math.abs(s-t[0])*e+r,f=Math.abs(t[3]-t[1])*e,m=Math.abs(t[2]-t[0])*e):(d=Math.abs(s-t[0])*e+i,p=Math.abs(a-t[1])*e+r,f=Math.abs(t[2]-t[0])*e,m=Math.abs(t[3]-t[1])*e),this.transform=[l*e,c*e,u*e,h*e,d-l*e*s-u*e*a,p-c*e*s-h*e*a],this.width=f,this.height=m}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new o({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){return i.Util.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=i.Util.applyTransform([t[0],t[1]],this.transform),n=i.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return i.Util.applyInverseTransform([t,e],this.transform)}}e.PageViewport=o,e.RenderingCancelledException=class extends i.BaseException{constructor(t,e){super(t),this.type=e}};const s={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function a(){return"undefined"!=typeof fetch&&"undefined"!=typeof Response&&"body"in Response.prototype&&"undefined"!=typeof ReadableStream}function l(t,e){try{const{protocol:n}=e?new URL(t,e):new URL(t);return"http:"===n||"https:"===n}catch(n){return!1}}let c;e.LinkTarget=s,e.StatTimer=class{constructor(){this.started=Object.create(null),this.times=[]}time(t){t in this.started&&(0,i.warn)(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||(0,i.warn)(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const n of this.times){const t=n.name;t.length>e&&(e=t.length)}for(const n of this.times){const i=n.end-n.start;t.push(`${n.name.padEnd(e)} ${i}ms\n`)}return t.join("")}},e.PDFDateString=class{static toDateObject(t){if(!t||!(0,i.isString)(t))return null;c||(c=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=c.exec(t);if(!e)return null;const n=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let s=parseInt(e[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===u?(s+=h,a+=d):"+"===u&&(s-=h,a-=d),new Date(Date.UTC(n,r,o,s,a,l))}}},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.arrayByteLength=p,n.arraysToBytes=function(t){const e=t.length;if(1===e&&t[0]instanceof Uint8Array)return t[0];let n=0;for(let o=0;o<e;o++)n+=p(t[o]);let i=0;const r=new Uint8Array(n);for(let o=0;o<e;o++){let e=t[o];e instanceof Uint8Array||(e="string"==typeof e?d(e):new Uint8Array(e));const n=e.byteLength;r.set(e,i),i+=n}return r},n.assert=l,n.bytesToString=function(t){l(null!==t&&"object"==typeof t&&void 0!==t.length,"Invalid argument for bytesToString");const e=t.length;if(e<8192)return String.fromCharCode.apply(null,t);const n=[];for(let i=0;i<e;i+=8192){const r=Math.min(i+8192,e),o=t.subarray(i,r);n.push(String.fromCharCode.apply(null,o))}return n.join("")},n.createPromiseCapability=function(){const t=Object.create(null);let e=!1;return Object.defineProperty(t,"settled",{get:()=>e}),t.promise=new Promise((function(n,i){t.resolve=function(t){e=!0,n(t)},t.reject=function(t){e=!0,i(t)}})),t},n.getVerbosityLevel=function(){return o},n.info=function(t){o>=r.INFOS&&console.log(`Info: ${t}`)},n.isArrayBuffer=function(t){return"object"==typeof t&&null!==t&&void 0!==t.byteLength},n.isArrayEqual=function(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))},n.isBool=function(t){return"boolean"==typeof t},n.isEmptyObj=function(t){for(const e in t)return!1;return!0},n.isNum=function(t){return"number"==typeof t},n.isString=function(t){return"string"==typeof t},n.isSameOrigin=function(t,n){let i;try{if(i=new URL(t),!i.origin||"null"===i.origin)return!1}catch(e){return!1}const r=new URL(n,i);return i.origin===r.origin},n.createValidAbsoluteUrl=function(t,e){if(!t)return null;try{const n=e?new URL(t,e):new URL(t);if(function(t){if(!t)return!1;switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch(n){}return null},n.removeNullCharacters=function(t){return"string"!=typeof t?(s("The argument for removeNullCharacters must be a string."),t):t.replace(h,"")},n.setVerbosityLevel=function(t){Number.isInteger(t)&&(o=t)},n.shadow=c,n.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},n.stringToBytes=d,n.stringToPDFString=function(t){const e=t.length,n=[];if("\xfe"===t[0]&&"\xff"===t[1])for(let i=2;i<e;i+=2)n.push(String.fromCharCode(t.charCodeAt(i)<<8|t.charCodeAt(i+1)));else if("\xff"===t[0]&&"\xfe"===t[1])for(let i=2;i<e;i+=2)n.push(String.fromCharCode(t.charCodeAt(i+1)<<8|t.charCodeAt(i)));else for(let i=0;i<e;++i){const e=g[t.charCodeAt(i)];n.push(e?String.fromCharCode(e):t.charAt(i))}return n.join("")},n.stringToUTF8String=function(t){return decodeURIComponent(escape(t))},n.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},n.warn=s,n.unreachable=a,n.IsEvalSupportedCached=n.IsLittleEndianCached=n.createObjectURL=n.FormatError=n.Util=n.UnknownErrorException=n.UnexpectedResponseException=n.TextRenderingMode=n.StreamType=n.PermissionFlag=n.PasswordResponses=n.PasswordException=n.MissingPDFException=n.InvalidPDFException=n.AbortException=n.CMapCompressionType=n.ImageKind=n.FontType=n.AnnotationType=n.AnnotationStateModelType=n.AnnotationReviewState=n.AnnotationReplyType=n.AnnotationMarkedState=n.AnnotationFlag=n.AnnotationFieldFlag=n.AnnotationBorderStyleType=n.UNSUPPORTED_FEATURES=n.VerbosityLevel=n.OPS=n.IDENTITY_MATRIX=n.FONT_IDENTITY_MATRIX=n.BaseException=void 0,i(3),n.IDENTITY_MATRIX=[1,0,0,1,0,0],n.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],n.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},n.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},n.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},n.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},n.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},n.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},n.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},n.AnnotationReplyType={GROUP:"Group",REPLY:"R"},n.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},n.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},n.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},n.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},n.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const r={ERRORS:0,WARNINGS:1,INFOS:5};n.VerbosityLevel=r,n.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},n.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},n.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath"},n.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let o=r.WARNINGS;function s(t){o>=r.WARNINGS&&console.log(`Warning: ${t}`)}function a(t){throw new Error(t)}function l(t,e){t||a(e)}function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}const u=function(){function t(e){this.constructor===t&&a("Cannot initialize BaseException."),this.message=e,this.name=this.constructor.name}return t.prototype=new Error,t.constructor=t,t}();n.BaseException=u,n.PasswordException=class extends u{constructor(t,e){super(t),this.code=e}},n.UnknownErrorException=class extends u{constructor(t,e){super(t),this.details=e}},n.InvalidPDFException=class extends u{},n.MissingPDFException=class extends u{},n.UnexpectedResponseException=class extends u{constructor(t,e){super(t),this.status=e}},n.FormatError=class extends u{},n.AbortException=class extends u{};const h=/\x00/g;function d(t){l("string"==typeof t,"Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let i=0;i<e;++i)n[i]=255&t.charCodeAt(i);return n}function p(t){return void 0!==t.length?t.length:(l(void 0!==t.byteLength,"arrayByteLength - invalid argument."),t.byteLength)}n.IsLittleEndianCached={get value(){return c(this,"value",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}},n.IsEvalSupportedCached={get value(){return c(this,"value",function(){try{return new Function(""),!0}catch(e){return!1}}())}};const f=["rgb(",0,",",0,",",0,")"];class m{static makeCssRgb(t,e,n){return f[1]=t,f[3]=e,f[5]=n,f.join("")}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n]}static getAxialAlignedBoundingBox(t,e){const n=m.applyTransform(t,e),i=m.applyTransform(t.slice(2,4),e),r=m.applyTransform([t[0],t[3]],e),o=m.applyTransform([t[2],t[1]],e);return[Math.min(n[0],i[0],r[0],o[0]),Math.min(n[1],i[1],r[1],o[1]),Math.max(n[0],i[0],r[0],o[0]),Math.max(n[1],i[1],r[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static apply3dTransform(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[2]*e[1]+t[3]*e[3],r=(n+i)/2,o=Math.sqrt((n+i)*(n+i)-4*(n*i-(t[2]*e[0]+t[3]*e[2])*(t[0]*e[1]+t[1]*e[3])))/2,s=r-o||1;return[Math.sqrt(r+o||1),Math.sqrt(s)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){function n(t,e){return t-e}const i=[t[0],t[2],e[0],e[2]].sort(n),r=[t[1],t[3],e[1],e[3]].sort(n),o=[];return t=m.normalizeRect(t),e=m.normalizeRect(e),i[0]===t[0]&&i[1]===e[0]||i[0]===e[0]&&i[1]===t[0]?(o[0]=i[1],o[2]=i[2],r[0]===t[1]&&r[1]===e[1]||r[0]===e[1]&&r[1]===t[1]?(o[1]=r[1],o[3]=r[2],o):null):null}}n.Util=m;const g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364],v=function(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(e,n,i=!1){if(!i&&URL.createObjectURL){const t=new Blob([e],{type:n});return URL.createObjectURL(t)}let r=`data:${n};base64,`;for(let o=0,s=e.length;o<s;o+=3){const n=255&e[o],i=255&e[o+1],a=255&e[o+2];r+=t[n>>2]+t[(3&n)<<4|i>>4]+t[o+1<s?(15&i)<<2|a>>6:64]+t[o+2<s?63&a:64]}return r}}();n.createObjectURL=v},function(t,e,n){"use strict";n(4)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;const i="object"==typeof process&&process+""=="[object process]"&&!process.versions.nw&&!process.versions.electron;e.isNodeJS=i},function(module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.build=exports.version=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFWorker=exports.PDFDataRangeTransport=exports.LoopbackPort=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(6),_api_compatibility=__w_pdfjs_require__(7),_canvas=__w_pdfjs_require__(8),_worker_options=__w_pdfjs_require__(10),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(11),_metadata=__w_pdfjs_require__(12),_transport_stream=__w_pdfjs_require__(14),_webgl=__w_pdfjs_require__(15);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let createPDFNetworkStream;function setPDFNetworkStreamFactory(t){createPDFNetworkStream=t}function getDocument(t){const e=new PDFDocumentLoadingTask;let n;if("string"==typeof t)n={url:t};else if((0,_util.isArrayBuffer)(t))n={data:t};else if(t instanceof PDFDataRangeTransport)n={range:t};else{if("object"!=typeof t)throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");n=t}const i=Object.create(null);let r=null,o=null;for(const a in n)if("url"!==a||"undefined"==typeof window)if("range"!==a)if("worker"!==a)if("data"!==a||n[a]instanceof Uint8Array)i[a]=n[a];else{const t=n[a];if("string"==typeof t)i[a]=(0,_util.stringToBytes)(t);else if("object"!=typeof t||null===t||isNaN(t.length)){if(!(0,_util.isArrayBuffer)(t))throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");i[a]=new Uint8Array(t)}else i[a]=new Uint8Array(t)}else o=n[a];else r=n[a];else i[a]=new URL(n[a],window.location).href;if(i.rangeChunkSize=i.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,i.CMapReaderFactory=i.CMapReaderFactory||_display_utils.DOMCMapReaderFactory,i.ignoreErrors=!0!==i.stopAtErrors,i.fontExtraProperties=!0===i.fontExtraProperties,i.pdfBug=!0===i.pdfBug,Number.isInteger(i.maxImageSize)||(i.maxImageSize=-1),"boolean"!=typeof i.isEvalSupported&&(i.isEvalSupported=!0),"boolean"!=typeof i.disableFontFace&&(i.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),"boolean"!=typeof i.disableRange&&(i.disableRange=!1),"boolean"!=typeof i.disableStream&&(i.disableStream=!1),"boolean"!=typeof i.disableAutoFetch&&(i.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(i.verbosity),!o){const t={verbosity:i.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};o=t.port?PDFWorker.fromPort(t):new PDFWorker(t),e._worker=o}const s=e.docId;return o.promise.then((function(){if(e.destroyed)throw new Error("Loading aborted");const t=_fetchDocument(o,i,r,s),n=new Promise((function(t){let e;r?e=new _transport_stream.PDFDataTransportStream({length:i.length,initialData:i.initialData,progressiveDone:i.progressiveDone,disableRange:i.disableRange,disableStream:i.disableStream},r):i.data||(e=createPDFNetworkStream({url:i.url,length:i.length,httpHeaders:i.httpHeaders,withCredentials:i.withCredentials,rangeChunkSize:i.rangeChunkSize,disableRange:i.disableRange,disableStream:i.disableStream})),t(e)}));return Promise.all([t,n]).then((function([t,n]){if(e.destroyed)throw new Error("Loading aborted");const r=new _message_handler.MessageHandler(s,t,o.port);r.postMessageTransfers=o.postMessageTransfers;const a=new WorkerTransport(r,e,n,i);e._transport=a,r.send("Ready",null)}))})).catch(e._capability.reject),e}function _fetchDocument(t,e,n,i){return t.destroyed?Promise.reject(new Error("Worker was destroyed")):(n&&(e.length=n.length,e.initialData=n.initialData,e.progressiveDone=n.progressiveDone),t.messageHandler.sendWithPromise("GetDocRequest",{docId:i,apiVersion:"2.5.207",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,postMessageTransfers:t.postMessageTransfers,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties}).then((function(e){if(t.destroyed)throw new Error("Worker was destroyed");return e})))}const PDFDocumentLoadingTask=function(){let t=0;return class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+t++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then(()=>{this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}}}();class PDFDataRangeTransport{constructor(t,e,n=!1){this.length=t,this.initialData=e,this.progressiveDone=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,e){this._pdfInfo=t,this._transport=e}get numPages(){return this._pdfInfo.numPages}get fingerprint(){return this._pdfInfo.fingerprint}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getOpenActionDestination(){return(0,_display_utils.deprecated)("getOpenActionDestination, use getOpenAction instead."),this.getOpenAction().then((function(t){return t&&t.dest?t.dest:null}))}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getOutline(){return this._transport.getOutline()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}getStats(){return this._transport.getStats()}cleanup(){return this._transport.startCleanup()}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,e,n,i=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new _display_utils.StatTimer:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this.intentStates=Object.create(null),this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations({intent:t=null}={}){return this.annotationsPromise&&this.annotationsIntent===t||(this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,t),this.annotationsIntent=t),this.annotationsPromise}render({canvasContext:t,viewport:e,intent:n="display",enableWebGL:i=!1,renderInteractiveForms:r=!1,transform:o=null,imageLayer:s=null,canvasFactory:a=null,background:l=null}){this._stats&&this._stats.time("Overall");const c="print"===n?"print":"display";this.pendingCleanup=!1,this.intentStates[c]||(this.intentStates[c]=Object.create(null));const u=this.intentStates[c];u.streamReaderCancelTimeout&&(clearTimeout(u.streamReaderCancelTimeout),u.streamReaderCancelTimeout=null);const h=a||new _display_utils.DOMCanvasFactory,d=new _webgl.WebGLContext({enable:i});u.displayReadyCapability||(u.displayReadyCapability=(0,_util.createPromiseCapability)(),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:c,renderInteractiveForms:!0===r}));const p=t=>{const e=u.renderTasks.indexOf(f);e>=0&&u.renderTasks.splice(e,1),(this.cleanupAfterRender||"print"===c)&&(this.pendingCleanup=!0),this._tryCleanup(),t?(f.capability.reject(t),this._abortOperatorList({intentState:u,reason:t})):f.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},f=new InternalRenderTask({callback:p,params:{canvasContext:t,viewport:e,transform:o,imageLayer:s,background:l},objs:this.objs,commonObjs:this.commonObjs,operatorList:u.operatorList,pageIndex:this._pageIndex,canvasFactory:h,webGLContext:d,useRequestAnimationFrame:"print"!==c,pdfBug:this._pdfBug});u.renderTasks||(u.renderTasks=[]),u.renderTasks.push(f);const m=f.task;return u.displayReadyCapability.promise.then(t=>{this.pendingCleanup?p():(this._stats&&this._stats.time("Rendering"),f.initializeGraphics(t),f.operatorListChanged())}).catch(p),m}getOperatorList(){this.intentStates.oplist||(this.intentStates.oplist=Object.create(null));const t=this.intentStates.oplist;let e;return t.opListReadCapability||(e={},e.operatorListChanged=function(){if(t.operatorList.lastChunk){t.opListReadCapability.resolve(t.operatorList);const n=t.renderTasks.indexOf(e);n>=0&&t.renderTasks.splice(n,1)}},t.opListReadCapability=(0,_util.createPromiseCapability)(),t.renderTasks=[],t.renderTasks.push(e),t.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:"oplist"})),t.opListReadCapability.promise}streamTextContent({normalizeWhitespace:t=!1,disableCombineTextItems:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===t,combineTextItems:!0!==e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(t={}){const e=this.streamTextContent(t);return new Promise((function(t,n){const i=e.getReader(),r={items:[],styles:Object.create(null)};!function e(){i.read().then((function({value:n,done:i}){i?t(r):(Object.assign(r.styles,n.styles),r.items.push(...n.items),e())}),n)}()}))}_destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;const t=[];return Object.keys(this.intentStates).forEach(e=>{const n=this.intentStates[e];this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),"oplist"!==e&&n.renderTasks.forEach((function(e){const n=e.capability.promise.catch((function(){}));t.push(n),e.cancel()}))}),this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(t)}cleanup(t=!1){return this.pendingCleanup=!0,this._tryCleanup(t)}_tryCleanup(t=!1){return!(!this.pendingCleanup||Object.keys(this.intentStates).some(t=>{const e=this.intentStates[t];return 0!==e.renderTasks.length||!e.operatorList.lastChunk})||(Object.keys(this.intentStates).forEach(t=>{delete this.intentStates[t]}),this.objs.clear(),this.annotationsPromise=null,t&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,0))}_startRenderPage(t,e){const n=this.intentStates[e];n&&(this._stats&&this._stats.timeEnd("Page Request"),n.displayReadyCapability&&n.displayReadyCapability.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk;for(let n=0;n<e.renderTasks.length;n++)e.renderTasks[n].operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList(t){(0,_util.assert)(t.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');const e=this._transport.messageHandler.sendWithStream("GetOperatorList",t).getReader(),n=this.intentStates[t.intent];n.streamReader=e;const i=()=>{e.read().then(({value:t,done:e})=>{e?n.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,n),i())},t=>{if(n.streamReader=null,!this._transport.destroyed){if(n.operatorList){n.operatorList.lastChunk=!0;for(let t=0;t<n.renderTasks.length;t++)n.renderTasks[t].operatorListChanged();this._tryCleanup()}if(n.displayReadyCapability)n.displayReadyCapability.reject(t);else{if(!n.opListReadCapability)throw t;n.opListReadCapability.reject(t)}}})};i()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if((0,_util.assert)(e instanceof Error||"object"==typeof e&&null!==e,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),t.streamReader){if(!n){if(0!==t.renderTasks.length)return;if(e instanceof _display_utils.RenderingCancelledException)return void(t.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:t,reason:e,force:!0}),t.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}t.streamReader.cancel(new _util.AbortException(e&&e.message)),t.streamReader=null,this._transport.destroyed||(Object.keys(this.intentStates).some(e=>this.intentStates[e]===t&&(delete this.intentStates[e],!0)),this.cleanup())}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(t=!0){this._listeners=[],this._defer=t,this._deferred=Promise.resolve(void 0)}postMessage(t,e){if(!this._defer)return void this._listeners.forEach(e=>{e.call(this,{data:t})});const n=new WeakMap,i={data:function t(i){if("object"!=typeof i||null===i)return i;if(n.has(i))return n.get(i);let r,o;if((r=i.buffer)&&(0,_util.isArrayBuffer)(r))return o=e&&e.includes(r)?new i.constructor(r,i.byteOffset,i.byteLength):new i.constructor(i),n.set(i,o),o;o=Array.isArray(i)?[]:{},n.set(i,o);for(const e in i){let n,r=i;for(;!(n=Object.getOwnPropertyDescriptor(r,e));)r=Object.getPrototypeOf(r);if(void 0!==n.value)if("function"!=typeof n.value)o[e]=t(n.value);else if(i.hasOwnProperty&&i.hasOwnProperty(e))throw new Error(`LoopbackPort.postMessage - cannot clone: ${i[e]}`)}return o}(t)};this._deferred.then(()=>{this._listeners.forEach(t=>{t.call(this,i)})})}addEventListener(t,e){this._listeners.push(e)}removeEventListener(t,e){const n=this._listeners.indexOf(e);this._listeners.splice(n,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorker=function PDFWorkerClosure(){const pdfWorkerPorts=new WeakMap;let isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS)isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document&&"currentScript"in document){const t=document.currentScript&&document.currentScript.src;t&&(fallbackWorkerSrc=t.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(void 0!==fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){let t;try{t=globalThis.pdfjsWorker&&globalThis.pdfjsWorker.WorkerMessageHandler}catch(e){}return t||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();const loader=async function(){const mainWorkerMessageHandler=getMainThreadWorkerMessageHandler();if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(getWorkerSrc());return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(getWorkerSrc()),window.pdfjsWorker.WorkerMessageHandler};return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(t){return URL.createObjectURL(new Blob(["importScripts('"+t+"');"]))}class PDFWorker{constructor({name:t=null,port:e=null,verbosity:n=(0,_util.getVerbosityLevel)()}={}){if(e&&pdfWorkerPorts.has(e))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=t,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=n,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e)return pdfWorkerPorts.set(e,this),void this._initializeFromPort(e);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}_initialize(){if("undefined"!=typeof Worker&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){let t=getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,t)||(t=createCDNWrapper(new URL(t,window.location).href));const n=new Worker(t),i=new _message_handler.MessageHandler("main","worker",n),r=()=>{n.removeEventListener("error",o),i.destroy(),n.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=()=>{this._webWorker||r()};n.addEventListener("error",o),i.on("test",t=>{n.removeEventListener("error",o),this.destroyed?r():t?(this._messageHandler=i,this._port=n,this._webWorker=n,t.supportTransfers||(this.postMessageTransfers=!1),this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),n.terminate())}),i.on("ready",t=>{if(n.removeEventListener("error",o),this.destroyed)r();else try{s()}catch(e){this._setupFakeWorker()}});const s=()=>{const t=new Uint8Array([this.postMessageTransfers?255:0]);try{i.send("test",t,[t.buffer])}catch(e){(0,_util.warn)("Cannot use postMessage transfers."),t[0]=0,i.send("test",t)}};return void s()}catch(e){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then(t=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new LoopbackPort;this._port=e;const n="fake"+nextFakeWorkerId++,i=new _message_handler.MessageHandler(n+"_worker",n,e);t.setup(i,e);const r=new _message_handler.MessageHandler(n,n+"_worker",e);this._messageHandler=r,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t||!t.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(t.port)?pdfWorkerPorts.get(t.port):new PDFWorker(t)}static getWorkerSrc(){return getWorkerSrc()}}return PDFWorker}();exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(t,e,n,i){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:e.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this)}),this._params=i,this.CMapReaderFactory=new i.CMapReaderFactory({baseUrl:i.cMapUrl,isCompressed:i.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];this.pageCache.forEach((function(e){e&&t.push(e._destroy())})),this.pageCache.length=0,this.pagePromises.length=0;const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.fontLoader.clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(t,e)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then((function({value:t,done:n}){n?e.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch(t=>{e.error(t)})},e.onCancel=t=>{this._fullReader.cancel(t)}}),t.on("ReaderHeadersReady",t=>{const n=(0,_util.createPromiseCapability)(),i=this._fullReader;return i.headersReady.then(()=>{i.isStreamingSupported&&i.isRangeSupported||(this._lastProgress&&e.onProgress&&e.onProgress(this._lastProgress),i.onProgress=t=>{e.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}),n.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})},n.reject),n.promise}),t.on("GetRangeReader",(t,e)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(t.begin,t.end);n?(e.onPull=()=>{n.read().then((function({value:t,done:n}){n?e.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch(t=>{e.error(t)})},e.onCancel=t=>{n.cancel(t)}):e.close()}),t.on("GetDoc",({pdfInfo:t})=>{this._numPages=t.numPages,e._capability.resolve(new PDFDocumentProxy(t,this))}),t.on("DocException",(function(t){let n;switch(t.name){case"PasswordException":n=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":n=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":n=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":n=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":n=new _util.UnknownErrorException(t.message,t.details)}e._capability.reject(n)})),t.on("PasswordRequest",t=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),e.onPassword){const i=t=>{this._passwordCapability.resolve({password:t})};try{e.onPassword(i,t.code)}catch(n){this._passwordCapability.reject(n)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise}),t.on("DataLoaded",t=>{e.onProgress&&e.onProgress({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),t.on("StartRenderPage",t=>{this.destroyed||this.pageCache[t.pageIndex]._startRenderPage(t.transparency,t.intent)}),t.on("commonobj",e=>{if(this.destroyed)return;const[n,i,r]=e;if(!this.commonObjs.has(n))switch(i){case"Font":const e=this._params;if("error"in r){const t=r.error;(0,_util.warn)(`Error during font loading: ${t}`),this.commonObjs.resolve(n,t);break}let o=null;e.pdfBug&&globalThis.FontInspector&&globalThis.FontInspector.enabled&&(o={registerFont(t,e){globalThis.FontInspector.fontAdded(t,e)}});const s=new _font_loader.FontFaceObject(r,{isEvalSupported:e.isEvalSupported,disableFontFace:e.disableFontFace,ignoreErrors:e.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:o});this.fontLoader.bind(s).catch(e=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!e.fontExtraProperties&&s.data&&(s.data=null),this.commonObjs.resolve(n,s)});break;case"FontPath":case"FontType3Res":case"Image":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${i}`)}}),t.on("obj",t=>{if(this.destroyed)return;const[e,n,i,r]=t,o=this.pageCache[n];if(!o.objs.has(e))switch(i){case"Image":o.objs.resolve(e,r);const t=8e6;r&&"data"in r&&r.data.length>t&&(o.cleanupAfterRender=!0);break;default:throw new Error(`Got unknown object type ${i}`)}}),t.on("DocProgress",t=>{this.destroyed||e.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",(t,e)=>{if(this.destroyed)return void e.error(new Error("Worker was destroyed"));let n=!1;e.onPull=()=>{n?e.close():(n=!0,this.CMapReaderFactory.fetch(t).then((function(t){e.enqueue(t,1,[t.cMapData.buffer])})).catch((function(t){e.error(t)})))}})}_onUnsupportedFeature({featureId:t}){this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request"));const e=t-1;if(e in this.pagePromises)return this.pagePromises[e];const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(t=>{if(this.destroyed)throw new Error("Transport destroyed");const n=new PDFPageProxy(e,t,this,this._params.pdfBug);return this.pageCache[e]=n,n});return this.pagePromises[e]=n,n}getPageIndex(t){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:t}).catch((function(t){return Promise.reject(new Error(t))}))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(t=>({info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:this._fullReader?this._fullReader.filename:null}))}getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}startCleanup(){return this.messageHandler.sendWithPromise("Cleanup",null).then(()=>{for(let t=0,e=this.pageCache.length;t<e;t++){const e=this.pageCache[t];if(e&&!e.cleanup())throw new Error(`startCleanup: Page ${t+1} is currently rendering.`)}this.commonObjs.clear(),this.fontLoader.clear()})}get loadingParams(){const t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,disableFontFace:t.disableFontFace})}}class PDFObjects{constructor(){this._objs=Object.create(null)}_ensureObj(t){return this._objs[t]?this._objs[t]:this._objs[t]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}get(t,e=null){if(e)return this._ensureObj(t).capability.promise.then(e),null;const n=this._objs[t];if(!n||!n.resolved)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this._objs[t];return!!e&&e.resolved}resolve(t,e){const n=this._ensureObj(t);n.resolved=!0,n.data=e,n.capability.resolve(e)}clear(){this._objs=Object.create(null)}}class RenderTask{constructor(t){this._internalRenderTask=t,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}const InternalRenderTask=function(){const t=new WeakSet;return class{constructor({callback:t,params:e,objs:n,commonObjs:i,operatorList:r,pageIndex:o,canvasFactory:s,webGLContext:a,useRequestAnimationFrame:l=!1,pdfBug:c=!1}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=o,this.canvasFactory=s,this.webGLContext=a,this._pdfBug=c,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===l&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}initializeGraphics(e=!1){if(this.cancelled)return;if(this._canvas){if(t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager&&globalThis.StepperManager.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:r,imageLayer:o,background:s}=this.params;this.gfx=new _canvas.CanvasGraphics(n,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,o),this.gfx.beginDrawing({transform:r,viewport:i,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(e=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&t.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this.cancel.bind(this))}):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&t.delete(this._canvas),this.callback())))}}}(),version="2.5.207";exports.version=version;const build="0974d605";exports.build=build},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var i=n(2);class r{constructor({docId:t,onUnsupportedFeature:e}){this.constructor===r&&(0,i.unreachable)("Cannot initialize BaseFontLoader."),this.docId=t,this._onUnsupportedFeature=e,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(t){this.nativeFontFaces.push(t),document.fonts.add(t)}insertRule(t){let e=this.styleElement;e||(e=this.styleElement=document.createElement("style"),e.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,document.documentElement.getElementsByTagName("head")[0].appendChild(e));const n=e.sheet;n.insertRule(t,n.cssRules.length)}clear(){this.nativeFontFaces.forEach((function(t){document.fonts.delete(t)})),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(t){if(t.attached||t.missingFile)return;if(t.attached=!0,this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(n){throw this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,i.warn)(`Failed to load font '${e.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent([e],[t],i)})}}_queueLoadingCallback(t){(0,i.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const t="undefined"!=typeof document&&!!document.fonts;return(0,i.shadow)(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){(0,i.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,i.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(t,e,n){(0,i.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let o;e.FontLoader=o,e.FontLoader=o=class extends r{constructor(t){super(t),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let t=!1;if("undefined"==typeof navigator)t=!0;else{const e=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);e&&e[1]>=14&&(t=!0)}return(0,i.shadow)(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const e=this.loadingContext,n={id:`pdfjs-font-loading-${e.nextRequestId++}`,done:!1,complete:function(){for((0,i.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;e.requests.length>0&&e.requests[0].done;){const t=e.requests.shift();setTimeout(t.callback,0)}},callback:t};return e.requests.push(n),n}get _loadTestFont(){return(0,i.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(t,e,n){function r(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function o(t,e,n,i){return t.substring(0,e)+i+t.substring(e+n)}let s,a;const l=document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;const h=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=o(d,976,h.length,h);let p=r(d,16);for(s=0,a=h.length-3;s<a;s+=4)p=p-1482184792+r(h,s)|0;s<h.length&&(p=p-1482184792+r(h+"XXX",s)|0),d=o(d,16,4,(0,i.string32)(p));const f=`url(data:font/opentype;base64,${btoa(d)});`;this.insertRule(`@font-face {font-family:"${h}";src:${f}}`);const m=[];for(s=0,a=e.length;s<a;s++)m.push(e[s].loadedName);m.push(h);const g=document.createElement("div");for(g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px",s=0,a=m.length;s<a;++s){const t=document.createElement("span");t.textContent="Hi",t.style.fontFamily=m[s],g.appendChild(t)}document.body.appendChild(g),function t(e,n){if(u++,u>30)return(0,i.warn)("Load test font never loaded."),void n();c.font="30px "+e,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0?n():setTimeout(t.bind(null,e,n))}(h,(function(){document.body.removeChild(g),n.complete()}))}},e.FontFaceObject=class{constructor(t,{isEvalSupported:e=!0,disableFontFace:n=!1,ignoreErrors:i=!1,onUnsupportedFeature:r=null,fontRegistry:o=null}){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this.isEvalSupported=!1!==e,this.disableFontFace=!0===n,this.ignoreErrors=!0===i,this._onUnsupportedFeature=r,this.fontRegistry=o}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;const t=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=(0,i.bytesToString)(new Uint8Array(this.data)),e=`url(data:${this.mimetype};base64,${btoa(t)});`,n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,e),n}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let n,r;try{n=t.get(this.loadedName+"_path_"+e)}catch(o){if(!this.ignoreErrors)throw o;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,i.warn)(`getPathGenerator - ignoring character: "${o}".`),this.compiledGlyphs[e]=function(t,e){}}if(this.isEvalSupported&&i.IsEvalSupportedCached.value){let t,i="";for(let e=0,o=n.length;e<o;e++)r=n[e],t=void 0!==r.args?r.args.join(","):"",i+="c."+r.cmd+"("+t+");\n";return this.compiledGlyphs[e]=new Function("c","size",i)}return this.compiledGlyphs[e]=function(t,e){for(let i=0,o=n.length;i<o;i++)r=n[i],"scale"===r.cmd&&(r.args=[e,-e]),t[r.cmd].apply(t,r.args)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.apiCompatibilityParams=void 0;var i=n(4);const r=Object.create(null);i.isNodeJS&&(r.disableFontFace=!0);const o=Object.freeze(r);e.apiCompatibilityParams=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var i=n(2),r=n(9);function o(t){t.mozCurrentTransform||(t._originalSave=t.save,t._originalRestore=t.restore,t._originalRotate=t.rotate,t._originalScale=t.scale,t._originalTranslate=t.translate,t._originalTransform=t.transform,t._originalSetTransform=t.setTransform,t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0],t._transformStack=[],Object.defineProperty(t,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(t,"mozCurrentTransformInverse",{get:function(){var t=this._transformMatrix,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=e*r-n*i,l=n*i-e*r;return[r/a,n/l,i/l,e/a,(r*o-i*s)/l,(n*o-e*s)/a]}}),t.save=function(){var t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},t.restore=function(){var t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},t.translate=function(t,e){var n=this._transformMatrix;n[4]=n[0]*t+n[2]*e+n[4],n[5]=n[1]*t+n[3]*e+n[5],this._originalTranslate(t,e)},t.scale=function(t,e){var n=this._transformMatrix;n[0]=n[0]*t,n[1]=n[1]*t,n[2]=n[2]*e,n[3]=n[3]*e,this._originalScale(t,e)},t.transform=function(e,n,i,r,o,s){var a=this._transformMatrix;this._transformMatrix=[a[0]*e+a[2]*n,a[1]*e+a[3]*n,a[0]*i+a[2]*r,a[1]*i+a[3]*r,a[0]*o+a[2]*s+a[4],a[1]*o+a[3]*s+a[5]],t._originalTransform(e,n,i,r,o,s)},t.setTransform=function(e,n,i,r,o,s){this._transformMatrix=[e,n,i,r,o,s],t._originalSetTransform(e,n,i,r,o,s)},t.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this._transformMatrix;this._transformMatrix=[i[0]*e+i[2]*n,i[1]*e+i[3]*n,i[0]*-n+i[2]*e,i[1]*-n+i[3]*e,i[4],i[5]],this._originalRotate(t)})}var s=function(){function t(t){this.canvasFactory=t,this.cache=Object.create(null)}return t.prototype={getCanvas:function(t,e,n,i){var r;return void 0!==this.cache[t]?(this.canvasFactory.reset(r=this.cache[t],e,n),r.context.setTransform(1,0,0,1,0,0)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),i&&o(r.context),r},clear(){for(var t in this.cache)this.canvasFactory.destroy(this.cache[t]),delete this.cache[t]}},t}(),a=function(){function t(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null}return t.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(t,e){this.x=t,this.y=e}},t}(),l=function(){function t(t,e,n,i,r,l){this.ctx=t,this.current=new a,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.webGLContext=r,this.imageLayer=l,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.cachedCanvases=new s(this.canvasFactory),t&&o(t),this._cachedGetSinglePixelWidth=null}function e(t,e){if("undefined"!=typeof ImageData&&e instanceof ImageData)t.putImageData(e,0,0);else{var n,r,o,s,a,l=e.height,c=e.width,u=l%16,h=(l-u)/16,d=0===u?h:h+1,p=t.createImageData(c,16),f=0,m=e.data,g=p.data;if(e.kind===i.ImageKind.GRAYSCALE_1BPP){var v=m.byteLength,y=new Uint32Array(g.buffer,0,g.byteLength>>2),b=y.length,_=c+7>>3,w=4294967295,A=i.IsLittleEndianCached.value?4278190080:255;for(r=0;r<d;r++){for(s=r<h?16:u,n=0,o=0;o<s;o++){for(var x=v-f,C=0,E=x>_?c:8*x-7,S=-8&E,M=0,T=0;C<S;C+=8)T=m[f++],y[n++]=128&T?w:A,y[n++]=64&T?w:A,y[n++]=32&T?w:A,y[n++]=16&T?w:A,y[n++]=8&T?w:A,y[n++]=4&T?w:A,y[n++]=2&T?w:A,y[n++]=1&T?w:A;for(;C<E;C++)0===M&&(T=m[f++],M=128),y[n++]=T&M?w:A,M>>=1}for(;n<b;)y[n++]=0;t.putImageData(p,0,16*r)}}else if(e.kind===i.ImageKind.RGBA_32BPP){for(o=0,a=16*c*4,r=0;r<h;r++)g.set(m.subarray(f,f+a)),f+=a,t.putImageData(p,0,o),o+=16;r<d&&(g.set(m.subarray(f,f+(a=c*u*4))),t.putImageData(p,0,o))}else{if(e.kind!==i.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(a=c*(s=16),r=0;r<d;r++){for(r>=h&&(a=c*(s=u)),n=0,o=a;o--;)g[n++]=m[f++],g[n++]=m[f++],g[n++]=m[f++],g[n++]=255;t.putImageData(p,0,16*r)}}}}function n(t,e){for(var n=e.height,i=e.width,r=n%16,o=(n-r)/16,s=0===r?o:o+1,a=t.createImageData(i,16),l=0,c=e.data,u=a.data,h=0;h<s;h++){for(var d=h<o?16:r,p=3,f=0;f<d;f++)for(var m=0,g=0;g<i;g++){if(!m){var v=c[l++];m=128}u[p]=v&m?0:255,p+=4,m>>=1}t.putImageData(a,0,16*h)}}function l(t,e){for(var n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],i=0,r=n.length;i<r;i++){var o=n[i];void 0!==t[o]&&(e[o]=t[o])}void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function c(t){t.strokeStyle="#000000",t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0)}function u(t,e,n,i){for(var r=t.length,o=3;o<r;o+=4){var s=t[o];if(0===s)t[o-3]=e,t[o-2]=n,t[o-1]=i;else if(s<255){var a=255-s;t[o-3]=t[o-3]*s+e*a>>8,t[o-2]=t[o-2]*s+n*a>>8,t[o-1]=t[o-1]*s+i*a>>8}}}function h(t,e,n){for(var i=t.length,r=3;r<i;r+=4)e[r]=e[r]*(n?n[t[r]]:t[r])*(1/255)|0}function d(t,e,n){for(var i=t.length,r=3;r<i;r+=4){var o=77*t[r-3]+152*t[r-2]+28*t[r-1];e[r]=n?e[r]*n[o>>8]>>8:e[r]*o>>16}}function p(t,e,n,i){var r=e.canvas,o=e.context;t.setTransform(e.scaleX,0,0,e.scaleY,e.offsetX,e.offsetY);var s=e.backdrop||null;if(!e.transferMap&&i.isEnabled){const o=i.composeSMask({layer:n.canvas,mask:r,properties:{subtype:e.subtype,backdrop:s}});return t.setTransform(1,0,0,1,0,0),void t.drawImage(o,e.offsetX,e.offsetY)}!function(t,e,n,i,r,o,s){var a,l=!!o,c=l?o[0]:0,p=l?o[1]:0,f=l?o[2]:0;a="Luminosity"===r?d:h;for(var m=Math.min(i,Math.ceil(1048576/n)),g=0;g<i;g+=m){var v=Math.min(m,i-g),y=t.getImageData(0,g,n,v),b=e.getImageData(0,g,n,v);l&&u(y.data,c,p,f),a(y.data,b.data,s),t.putImageData(b,0,g)}}(o,n,r.width,r.height,e.subtype,s,e.transferMap),t.drawImage(r,0,0)}var f=["butt","round","square"],m=["miter","round","bevel"],g={},v={};for(var y in t.prototype={beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){var r=this.ctx.canvas.width,o=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=i||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,r,o),this.ctx.restore(),n){var s=this.cachedCanvases.getCanvas("transparent",r,o,!0);this.compositeCtx=this.ctx,this.transparentCanvas=s.canvas,this.ctx=s.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),c(this.ctx),t&&this.ctx.transform.apply(this.ctx,t),this.ctx.transform.apply(this.ctx,e.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(t,e,n,r){var o=t.argsArray,s=t.fnArray,a=e||0,l=o.length;if(l===a)return a;for(var c,u=l-a>10&&"function"==typeof n,h=u?Date.now()+15:0,d=0,p=this.commonObjs,f=this.objs;;){if(void 0!==r&&a===r.nextBreakPoint)return r.breakIt(a,n),a;if((c=s[a])!==i.OPS.dependency)this[c].apply(this,o[a]);else for(const t of o[a]){const e=t.startsWith("g_")?p:f;if(!e.has(t))return e.get(t,n),a}if(++a===l)return a;if(u&&++d>10){if(Date.now()>h)return n(),a;d=0}}},endDrawing:function(){null!==this.current.activeSMask&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(t){this.current.lineWidth=t,this.ctx.lineWidth=t},setLineCap:function(t){this.ctx.lineCap=f[t]},setLineJoin:function(t){this.ctx.lineJoin=m[t]},setMiterLimit:function(t){this.ctx.miterLimit=t},setDash:function(t,e){var n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)},setRenderingIntent(t){},setFlatness(t){},setGState:function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e],r=i[1];switch(i[0]){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=i[1];break;case"ca":this.current.fillAlpha=i[1],this.ctx.globalAlpha=i[1];break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=r?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function(){var t=this.current.activeSMask,e=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,t.canvas.width,t.canvas.height,!0),n=this.ctx,i=n.mozCurrentTransform;this.ctx.save();var r=e.context;r.scale(1/t.scaleX,1/t.scaleY),r.translate(-t.offsetX,-t.offsetY),r.transform.apply(r,i),t.startTransformInverse=r.mozCurrentTransformInverse,l(n,r),this.ctx=r,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++},suspendSMaskGroup:function(){var t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),p(this.ctx,this.current.activeSMask,t,this.webGLContext),this.ctx.restore(),this.ctx.save(),l(t,this.ctx),this.current.resumeSMaskCtx=t;var e=i.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e),t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.restore()},resumeSMaskGroup:function(){var t=this.ctx;this.ctx=this.current.resumeSMaskCtx,this.groupStack.push(t),this.groupLevel++},endSMaskGroup:function(){var t=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),p(this.ctx,this.current.activeSMask,t,this.webGLContext),this.ctx.restore(),l(t,this.ctx);var e=i.Util.transform(this.current.activeSMask.startTransformInverse,t.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e)},save:function(){this.ctx.save();var t=this.current;this.stateStack.push(t),this.current=t.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),null===this.current.activeSMask||0!==this.stateStack.length&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask||this.endSMaskGroup(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function(t,e,n,i,r,o){this.ctx.transform(t,e,n,i,r,o),this._cachedGetSinglePixelWidth=null},constructPath:function(t,e){for(var n=this.ctx,r=this.current,o=r.x,s=r.y,a=0,l=0,c=t.length;a<c;a++)switch(0|t[a]){case i.OPS.rectangle:o=e[l++],s=e[l++];var u=e[l++],h=e[l++];0===u&&(u=this.getSinglePixelWidth()),0===h&&(h=this.getSinglePixelWidth());var d=o+u,p=s+h;this.ctx.moveTo(o,s),this.ctx.lineTo(d,s),this.ctx.lineTo(d,p),this.ctx.lineTo(o,p),this.ctx.lineTo(o,s),this.ctx.closePath();break;case i.OPS.moveTo:o=e[l++],s=e[l++],n.moveTo(o,s);break;case i.OPS.lineTo:o=e[l++],s=e[l++],n.lineTo(o,s);break;case i.OPS.curveTo:n.bezierCurveTo(e[l],e[l+1],e[l+2],e[l+3],o=e[l+4],s=e[l+5]),l+=6;break;case i.OPS.curveTo2:n.bezierCurveTo(o,s,e[l],e[l+1],e[l+2],e[l+3]),o=e[l+2],s=e[l+3],l+=4;break;case i.OPS.curveTo3:n.bezierCurveTo(e[l],e[l+1],o=e[l+2],s=e[l+3],o,s),l+=4;break;case i.OPS.closePath:n.closePath()}r.setCurrentPoint(o,s)},closePath:function(){this.ctx.closePath()},stroke:function(t){t=void 0===t||t;var e=this.ctx,n=this.current.strokeColor;if(e.globalAlpha=this.current.strokeAlpha,n&&n.hasOwnProperty("type")&&"Pattern"===n.type){e.save();const t=i.Util.singularValueDecompose2dScale(e.mozCurrentTransform)[0];e.strokeStyle=n.getPattern(e,this),e.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth*t),e.stroke(),e.restore()}else e.lineWidth=Math.max(.65*this.getSinglePixelWidth(),this.current.lineWidth),e.stroke();t&&this.consumePath(),e.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(t){t=void 0===t||t;var e=this.ctx,n=this.current.fillColor,i=!1;this.current.patternFill&&(e.save(),this.baseTransform&&e.setTransform.apply(e,this.baseTransform),e.fillStyle=n.getPattern(e,this),i=!0),this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill(),i&&e.restore(),t&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=g},eoClip:function(){this.pendingClip=v},beginText:function(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(var n=0;n<t.length;n++){var i=t[n];e.setTransform.apply(e,i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()},setCharSpacing:function(t){this.current.charSpacing=t},setWordSpacing:function(t){this.current.wordSpacing=t},setHScale:function(t){this.current.textHScale=t/100},setLeading:function(t){this.current.leading=-t},setFont:function(t,e){var n=this.commonObjs.get(t),r=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=n.fontMatrix?n.fontMatrix:i.FONT_IDENTITY_MATRIX,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||(0,i.warn)("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;let o="normal";n.black?o="900":n.bold&&(o="bold");var s=n.italic?"italic":"normal",a=`"${n.loadedName||"sans-serif"}", ${n.fallbackName}`;let l=e;e<16?l=16:e>100&&(l=100),this.current.fontSizeScale=e/l,this.ctx.font=`${s} ${o} ${l}px ${a}`},setTextRenderingMode:function(t){this.current.textRenderingMode=t},setTextRise:function(t){this.current.textRise=t},moveText:function(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e},setLeadingMoveText:function(t,e){this.setLeading(-e),this.moveText(t,e)},setTextMatrix:function(t,e,n,i,r,o){this.current.textMatrix=[t,e,n,i,r,o],this.current.textMatrixScale=Math.sqrt(t*t+e*e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar(t,e,n,r){var o=this.ctx,s=this.current,a=s.font,l=s.textRenderingMode,c=s.fontSize/s.fontSizeScale,u=l&i.TextRenderingMode.FILL_STROKE_MASK,h=!!(l&i.TextRenderingMode.ADD_TO_PATH_FLAG);const d=s.patternFill&&!a.missingFile;var p;(a.disableFontFace||h||d)&&(p=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace||d?(o.save(),o.translate(e,n),o.beginPath(),p(o,c),r&&o.setTransform.apply(o,r),u!==i.TextRenderingMode.FILL&&u!==i.TextRenderingMode.FILL_STROKE||o.fill(),u!==i.TextRenderingMode.STROKE&&u!==i.TextRenderingMode.FILL_STROKE||o.stroke(),o.restore()):(u!==i.TextRenderingMode.FILL&&u!==i.TextRenderingMode.FILL_STROKE||o.fillText(t,e,n),u!==i.TextRenderingMode.STROKE&&u!==i.TextRenderingMode.FILL_STROKE||o.strokeText(t,e,n)),h&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:o.mozCurrentTransform,x:e,y:n,fontSize:c,addToPath:p})},get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);for(var e=t.getImageData(0,0,10,10).data,n=!1,r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){n=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",n)},showText:function(t){var e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);var r=e.fontSize;if(0===r)return;var o=this.ctx,s=e.fontSizeScale,a=e.charSpacing,l=e.wordSpacing,c=e.fontDirection,u=e.textHScale*c,h=t.length,d=n.vertical,p=d?1:-1,f=n.defaultVMetrics,m=r*e.fontMatrix[0],g=e.textRenderingMode===i.TextRenderingMode.FILL&&!n.disableFontFace&&!e.patternFill;let v;if(o.save(),e.patternFill){o.save();const t=e.fillColor.getPattern(o,this);v=o.mozCurrentTransform,o.restore(),o.fillStyle=t}o.transform.apply(o,e.textMatrix),o.translate(e.x,e.y+e.textRise),o.scale(u,c>0?-1:1);var y=e.lineWidth,b=e.textMatrixScale;if(0===b||0===y){var _=e.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;_!==i.TextRenderingMode.STROKE&&_!==i.TextRenderingMode.FILL_STROKE||(this._cachedGetSinglePixelWidth=null,y=.65*this.getSinglePixelWidth())}else y/=b;1!==s&&(o.scale(s,s),y/=s),o.lineWidth=y;var w,A=0;for(w=0;w<h;++w){var x=t[w];if((0,i.isNum)(x))A+=p*x*r/1e3;else{var C,E,S,M,T=!1,P=(x.isSpace?l:0)+a,k=x.fontChar,D=x.accent,O=x.width;if(d?(S=x.vmetric||f,M=x.vmetric?S[1]:.5*O,O=S?-S[0]:O,C=(M=-M*m)/s,E=(A+S[2]*m)/s):(C=A/s,E=0),n.remeasure&&O>0){var R=1e3*o.measureText(k).width/r*s;if(O<R&&this.isFontSubpixelAAEnabled){var I=O/R;T=!0,o.save(),o.scale(I,1),C/=I}else O!==R&&(C+=(O-R)/2e3*r/s)}(x.isInFont||n.missingFile)&&(g&&!D?o.fillText(k,C,E):(this.paintChar(k,C,E,v),D&&this.paintChar(D.fontChar,C+D.offset.x/s,E-D.offset.y/s,v))),A+=d?O*m-P*c:O*m+P*c,T&&o.restore()}}d?e.y-=A:e.x+=A*u,o.restore()},showType3Text:function(t){var e,n,r,o,s=this.ctx,a=this.current,l=a.font,c=a.fontSize,u=a.fontDirection,h=l.vertical?1:-1,d=a.charSpacing,p=a.wordSpacing,f=a.textHScale*u,m=a.fontMatrix||i.FONT_IDENTITY_MATRIX,g=t.length;if(a.textRenderingMode!==i.TextRenderingMode.INVISIBLE&&0!==c){for(this._cachedGetSinglePixelWidth=null,s.save(),s.transform.apply(s,a.textMatrix),s.translate(a.x,a.y),s.scale(f,u),e=0;e<g;++e)if((0,i.isNum)(n=t[e]))this.ctx.translate(o=h*n*c/1e3,0),a.x+=o*f;else{var v=(n.isSpace?p:0)+d,y=l.charProcOperatorList[n.operatorListId];if(y){this.processingType3=n,this.save(),s.scale(c,c),s.transform.apply(s,m),this.executeOperatorList(y),this.restore();var b=i.Util.applyTransform([n.width,0],m);s.translate(r=b[0]*c+v,0),a.x+=r*f}else(0,i.warn)(`Type3 character "${n.operatorListId}" is not available.`)}s.restore(),this.processingType3=null}},setCharWidth:function(t,e){},setCharWidthAndBounds:function(t,e,n,i,r,o){this.ctx.rect(n,i,r-n,o-i),this.clip(),this.endPath()},getColorN_Pattern:function(e){var n;if("TilingPattern"===e[0]){var i=e[1],o=this.baseTransform||this.ctx.mozCurrentTransform.slice();n=new r.TilingPattern(e,i,this.ctx,{createCanvasGraphics:e=>new t(e,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext)},o)}else n=(0,r.getShadingPatternFromIR)(e);return n},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(t,e,n){var r=i.Util.makeCssRgb(t,e,n);this.ctx.strokeStyle=r,this.current.strokeColor=r},setFillRGBColor:function(t,e,n){var r=i.Util.makeCssRgb(t,e,n);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1},shadingFill:function(t){var e=this.ctx;this.save();var n=(0,r.getShadingPatternFromIR)(t);e.fillStyle=n.getPattern(e,this,!0);var o=e.mozCurrentTransformInverse;if(o){var s=e.canvas,a=s.width,l=s.height,c=i.Util.applyTransform([0,0],o),u=i.Util.applyTransform([0,l],o),h=i.Util.applyTransform([a,0],o),d=i.Util.applyTransform([a,l],o),p=Math.min(c[0],u[0],h[0],d[0]),f=Math.min(c[1],u[1],h[1],d[1]),m=Math.max(c[0],u[0],h[0],d[0]),g=Math.max(c[1],u[1],h[1],d[1]);this.ctx.fillRect(p,f,m-p,g-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()},beginInlineImage:function(){(0,i.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,i.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(t,e){this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform.apply(this,t),this.baseTransform=this.ctx.mozCurrentTransform,e&&(this.ctx.rect(e[0],e[1],e[2]-e[0],e[3]-e[1]),this.clip(),this.endPath())},paintFormXObjectEnd:function(){this.restore(),this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(t){this.save();var e=this.ctx;t.isolated||(0,i.info)("TODO: Support non-isolated groups."),t.knockout&&(0,i.warn)("Knockout groups not supported.");var n=e.mozCurrentTransform;if(t.matrix&&e.transform.apply(e,t.matrix),!t.bbox)throw new Error("Bounding box is required.");var r=i.Util.getAxialAlignedBoundingBox(t.bbox,e.mozCurrentTransform);r=i.Util.intersect(r,[0,0,e.canvas.width,e.canvas.height])||[0,0,0,0];var o=Math.floor(r[0]),s=Math.floor(r[1]),a=Math.max(Math.ceil(r[2])-o,1),c=Math.max(Math.ceil(r[3])-s,1),u=1,h=1;a>4096&&(u=a/4096,a=4096),c>4096&&(h=c/4096,c=4096);var d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);var p=this.cachedCanvases.getCanvas(d,a,c,!0),f=p.context;f.scale(1/u,1/h),f.translate(-o,-s),f.transform.apply(f,n),t.smask?this.smaskStack.push({canvas:p.canvas,context:f,offsetX:o,offsetY:s,scaleX:u,scaleY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,s),e.scale(u,h)),l(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++,this.current.activeSMask=null},endGroup:function(t){this.groupLevel--;var e=this.ctx;this.ctx=this.groupStack.pop(),void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,t.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(e.canvas,0,0),this.restore()},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(t,e,n){this.save(),c(this.ctx),this.current=new a,Array.isArray(t)&&4===t.length&&(this.ctx.rect(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.clip(),this.endPath()),this.transform.apply(this,e),this.transform.apply(this,n)},endAnnotation:function(){this.restore()},paintImageMaskXObject:function(t){var e=this.ctx,i=t.width,r=t.height,o=this.current.fillColor,s=this.current.patternFill,a=this.processingType3;if(a&&void 0===a.compiled&&(a.compiled=i<=1e3&&r<=1e3?function(t){var e,n,i,r,o=t.width,s=t.height,a=o+1,l=new Uint8Array(a*(s+1)),c=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=o+7&-8,h=t.data,d=new Uint8Array(u*s),p=0;for(e=0,r=h.length;e<r;e++)for(var f=128,m=h[e];f>0;)d[p++]=m&f?0:255,f>>=1;var g=0;for(0!==d[p=0]&&(l[0]=1,++g),n=1;n<o;n++)d[p]!==d[p+1]&&(l[n]=d[p]?2:1,++g),p++;for(0!==d[p]&&(l[n]=2,++g),e=1;e<s;e++){i=e*a,d[(p=e*u)-u]!==d[p]&&(l[i]=d[p]?1:8,++g);var v=(d[p]?4:0)+(d[p-u]?8:0);for(n=1;n<o;n++)c[v=(v>>2)+(d[p+1]?4:0)+(d[p-u+1]?8:0)]&&(l[i+n]=c[v],++g),p++;if(d[p-u]!==d[p]&&(l[i+n]=d[p]?2:4,++g),g>1e3)return null}for(i=e*a,0!==d[p=u*(s-1)]&&(l[i]=8,++g),n=1;n<o;n++)d[p]!==d[p+1]&&(l[i+n]=d[p]?4:8,++g),p++;if(0!==d[p]&&(l[i+n]=4,++g),g>1e3)return null;var y=new Int32Array([0,a,-1,0,-a,0,0,0,1]),b=[];for(e=0;g&&e<=s;e++){for(var _=e*a,w=_+o;_<w&&!l[_];)_++;if(_!==w){var A,x=[_%a,e],C=l[_],E=_;do{var S=y[C];do{_+=S}while(!l[_]);5!==(A=l[_])&&10!==A?(C=A,l[_]=0):l[_]&=(C=A&51*C>>4)>>2|C<<2,x.push(_%a),x.push(_/a|0),l[_]||--g}while(E!==_);b.push(x),--e}}return function(t){t.save(),t.scale(1/o,-1/s),t.translate(0,-s),t.beginPath();for(let n=0,i=b.length;n<i;n++){var e=b[n];t.moveTo(e[0],e[1]);for(let n=2,i=e.length;n<i;n+=2)t.lineTo(e[n],e[n+1])}t.fill(),t.beginPath(),t.restore()}}({data:t.data,width:i,height:r}):null),a&&a.compiled)a.compiled(e);else{var l=this.cachedCanvases.getCanvas("maskCanvas",i,r),c=l.context;c.save(),n(c,t),c.globalCompositeOperation="source-in",c.fillStyle=s?o.getPattern(c,this):o,c.fillRect(0,0,i,r),c.restore(),this.paintInlineImageXObject(l.canvas)}},paintImageMaskXObjectRepeat:function(t,e,i,r){var o=t.width,s=t.height,a=this.current.fillColor,l=this.current.patternFill,c=this.cachedCanvases.getCanvas("maskCanvas",o,s),u=c.context;u.save(),n(u,t),u.globalCompositeOperation="source-in",u.fillStyle=l?a.getPattern(u,this):a,u.fillRect(0,0,o,s),u.restore();for(var h=this.ctx,d=0,p=r.length;d<p;d+=2)h.save(),h.transform(e,0,0,i,r[d],r[d+1]),h.scale(1,-1),h.drawImage(c.canvas,0,0,o,s,0,-1,1,1),h.restore()},paintImageMaskXObjectGroup:function(t){for(var e=this.ctx,i=this.current.fillColor,r=this.current.patternFill,o=0,s=t.length;o<s;o++){var a=t[o],l=a.width,c=a.height,u=this.cachedCanvases.getCanvas("maskCanvas",l,c),h=u.context;h.save(),n(h,a),h.globalCompositeOperation="source-in",h.fillStyle=r?i.getPattern(h,this):i,h.fillRect(0,0,l,c),h.restore(),e.save(),e.transform.apply(e,a.transform),e.scale(1,-1),e.drawImage(u.canvas,0,0,l,c,0,-1,1,1),e.restore()}},paintImageXObject:function(t){const e=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);e?this.paintInlineImageXObject(e):(0,i.warn)("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(t,e,n,r){const o=t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t);if(o){for(var s=o.width,a=o.height,l=[],c=0,u=r.length;c<u;c+=2)l.push({transform:[e,0,0,n,r[c],r[c+1]],x:0,y:0,w:s,h:a});this.paintInlineImageXObjectGroup(o,l)}else(0,i.warn)("Dependent image isn't ready yet")},paintInlineImageXObject:function(t){var n=t.width,i=t.height,r=this.ctx;this.save(),r.scale(1/n,-1/i);var o,s,a=r.mozCurrentTransformInverse,l=a[0],c=a[1],u=Math.max(Math.sqrt(l*l+c*c),1),h=a[2],d=a[3],p=Math.max(Math.sqrt(h*h+d*d),1);if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)o=t;else{var f=(s=this.cachedCanvases.getCanvas("inlineImage",n,i)).context;e(f,t),o=s.canvas}for(var m=n,g=i,v="prescale1";u>2&&m>1||p>2&&g>1;){var y=m,b=g;u>2&&m>1&&(u/=m/(y=Math.ceil(m/2))),p>2&&g>1&&(p/=g/(b=Math.ceil(g/2))),(f=(s=this.cachedCanvases.getCanvas(v,y,b)).context).clearRect(0,0,y,b),f.drawImage(o,0,0,m,g,0,0,y,b),o=s.canvas,m=y,g=b,v="prescale1"===v?"prescale2":"prescale1"}if(r.drawImage(o,0,0,m,g,0,-i,n,i),this.imageLayer){var _=this.getCanvasPosition(0,-i);this.imageLayer.appendImage({imgData:t,left:_[0],top:_[1],width:n/a[0],height:i/a[3]})}this.restore()},paintInlineImageXObjectGroup:function(t,n){var i=this.ctx,r=t.width,o=t.height,s=this.cachedCanvases.getCanvas("inlineImage",r,o);e(s.context,t);for(var a=0,l=n.length;a<l;a++){var c=n[a];if(i.save(),i.transform.apply(i,c.transform),i.scale(1,-1),i.drawImage(s.canvas,c.x,c.y,c.w,c.h,0,-1,1,1),this.imageLayer){var u=this.getCanvasPosition(c.x,c.y);this.imageLayer.appendImage({imgData:t,left:u[0],top:u[1],width:r,height:o})}i.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},paintXObject:function(){(0,i.warn)("Unsupported 'paintXObject' command.")},markPoint:function(t){},markPointProps:function(t,e){},beginMarkedContent:function(t){},beginMarkedContentProps:function(t,e){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var t=this.ctx;this.pendingClip&&(this.pendingClip===v?t.clip("evenodd"):t.clip(),this.pendingClip=null),t.beginPath()},getSinglePixelWidth(t){if(null===this._cachedGetSinglePixelWidth){const t=this.ctx.mozCurrentTransformInverse;this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1],t[2]*t[2]+t[3]*t[3]))}return this._cachedGetSinglePixelWidth},getCanvasPosition:function(t,e){var n=this.ctx.mozCurrentTransform;return[n[0]*t+n[2]*e+n[4],n[1]*t+n[3]*e+n[5]]}},i.OPS)t.prototype[i.OPS[y]]=t.prototype[y];return t}();e.CanvasGraphics=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getShadingPatternFromIR=function(t){var e=r[t[0]];if(!e)throw new Error(`Unknown IR type: ${t[0]}`);return e.fromIR(t)},e.TilingPattern=void 0;var i=n(2),r={};function o(t,e){if(!e||"undefined"==typeof Path2D)return;const n=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],n,i),t.clip(r)}r.RadialAxial={fromIR:function(t){var e=t[1],n=t[2],i=t[3],r=t[4],s=t[5],a=t[6],l=t[7];return{type:"Pattern",getPattern:function(t){var c;o(t,n),"axial"===e?c=t.createLinearGradient(r[0],r[1],s[0],s[1]):"radial"===e&&(c=t.createRadialGradient(r[0],r[1],a,s[0],s[1],l));for(var u=0,h=i.length;u<h;++u){var d=i[u];c.addColorStop(d[0],d[1])}return c}}}};var s=function(){function t(t,e,n,i,r,o,s,a){var l,c=e.coords,u=e.colors,h=t.data,d=4*t.width;c[n+1]>c[i+1]&&(l=n,n=i,i=l,l=o,o=s,s=l),c[i+1]>c[r+1]&&(l=i,i=r,r=l,l=s,s=a,a=l),c[n+1]>c[i+1]&&(l=n,n=i,i=l,l=o,o=s,s=l);var p=(c[n]+e.offsetX)*e.scaleX,f=(c[n+1]+e.offsetY)*e.scaleY,m=(c[i]+e.offsetX)*e.scaleX,g=(c[i+1]+e.offsetY)*e.scaleY,v=(c[r]+e.offsetX)*e.scaleX,y=(c[r+1]+e.offsetY)*e.scaleY;if(!(f>=y))for(var b,_,w,A,x,C,E,S,M=u[o],T=u[o+1],P=u[o+2],k=u[s],D=u[s+1],O=u[s+2],R=u[a],I=u[a+1],L=u[a+2],F=Math.round(f),N=Math.round(y),B=F;B<=N;B++){if(B<g){let t;t=B<f?0:f===g?1:(f-B)/(f-g),b=p-(p-m)*t,_=M-(M-k)*t,w=T-(T-D)*t,A=P-(P-O)*t}else{let t;t=B>y?1:g===y?0:(g-B)/(g-y),b=m-(m-v)*t,_=k-(k-R)*t,w=D-(D-I)*t,A=O-(O-L)*t}let t;t=B<f?0:B>y?1:(f-B)/(f-y),x=p-(p-v)*t,C=M-(M-R)*t,E=T-(T-I)*t,S=P-(P-L)*t;for(var U=Math.round(Math.min(b,x)),V=Math.round(Math.max(b,x)),j=d*B+4*U,z=U;z<=V;z++)t=(b-z)/(b-x),t<0?t=0:t>1&&(t=1),h[j++]=_-(_-C)*t|0,h[j++]=w-(w-E)*t|0,h[j++]=A-(A-S)*t|0,h[j++]=255}}function e(e,n,i){var r,o,s=n.coords,a=n.colors;switch(n.type){case"lattice":var l=n.verticesPerRow,c=Math.floor(s.length/l)-1,u=l-1;for(r=0;r<c;r++)for(var h=r*l,d=0;d<u;d++,h++)t(e,i,s[h],s[h+1],s[h+l],a[h],a[h+1],a[h+l]),t(e,i,s[h+l+1],s[h+1],s[h+l],a[h+l+1],a[h+1],a[h+l]);break;case"triangles":for(r=0,o=s.length;r<o;r+=3)t(e,i,s[r],s[r+1],s[r+2],a[r],a[r+1],a[r+2]);break;default:throw new Error("illegal figure")}}return function(t,n,i,r,o,s,a,l){var c,u,h,d,p=Math.floor(t[0]),f=Math.floor(t[1]),m=Math.ceil(t[2])-p,g=Math.ceil(t[3])-f,v=Math.min(Math.ceil(Math.abs(m*n[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(g*n[1]*1.1)),3e3),b=m/v,_=g/y,w={coords:i,colors:r,offsetX:-p,offsetY:-f,scaleX:1/b,scaleY:1/_},A=v+4,x=y+4;if(l.isEnabled)c=l.drawFigures({width:v,height:y,backgroundColor:s,figures:o,context:w}),(u=a.getCanvas("mesh",A,x,!1)).context.drawImage(c,2,2),c=u.canvas;else{var C=(u=a.getCanvas("mesh",A,x,!1)).context,E=C.createImageData(v,y);if(s){var S=E.data;for(h=0,d=S.length;h<d;h+=4)S[h]=s[0],S[h+1]=s[1],S[h+2]=s[2],S[h+3]=255}for(h=0;h<o.length;h++)e(E,o[h],w);C.putImageData(E,2,2),c=u.canvas}return{canvas:c,offsetX:p-2*b,offsetY:f-2*_,scaleX:b,scaleY:_}}}();r.Mesh={fromIR:function(t){var e=t[2],n=t[3],r=t[4],a=t[5],l=t[6],c=t[7],u=t[8];return{type:"Pattern",getPattern:function(t,h,d){var p;if(o(t,c),d)p=i.Util.singularValueDecompose2dScale(t.mozCurrentTransform);else if(p=i.Util.singularValueDecompose2dScale(h.baseTransform),l){var f=i.Util.singularValueDecompose2dScale(l);p=[p[0]*f[0],p[1]*f[1]]}var m=s(a,p,e,n,r,d?null:u,h.cachedCanvases,h.webGLContext);return d||(t.setTransform.apply(t,h.baseTransform),l&&t.transform.apply(t,l)),t.translate(m.offsetX,m.offsetY),t.scale(m.scaleX,m.scaleY),t.createPattern(m.canvas,"no-repeat")}}}},r.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};var a=function(){function t(t,e,n,i,r){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.canvasGraphicsFactory=i,this.baseTransform=r,this.type="Pattern",this.ctx=n}return t.prototype={createPatternCanvas:function(t){var e=this.operatorList,n=this.bbox,r=this.xstep,o=this.ystep,s=this.paintType,a=this.color,l=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+this.tilingType);var c=n[0],u=n[1],h=n[2],d=n[3],p=i.Util.singularValueDecompose2dScale(this.matrix),f=i.Util.singularValueDecompose2dScale(this.baseTransform),m=[p[0]*f[0],p[1]*f[1]],g=this.getSizeAndScale(r,this.ctx.canvas.width,m[0]),v=this.getSizeAndScale(o,this.ctx.canvas.height,m[1]),y=t.cachedCanvases.getCanvas("pattern",g.size,v.size,!0),b=l.createCanvasGraphics(y.context);return b.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(b,s,a),b.transform(g.scale,0,0,v.scale,0,0),b.transform(1,0,0,1,-c,-u),this.clipBbox(b,n,c,u,h,d),b.executeOperatorList(e),this.ctx.transform(1,0,0,1,c,u),this.ctx.scale(1/g.scale,1/v.scale),y.canvas},getSizeAndScale:function(t,e,n){t=Math.abs(t);var i=Math.max(3e3,e),r=Math.ceil(t*n);return r>=i?r=i:n=r/t,{scale:n,size:r}},clipBbox:function(t,e,n,i,r,o){Array.isArray(e)&&4===e.length&&(t.ctx.rect(n,i,r-n,o-i),t.clip(),t.endPath())},setFillAndStrokeStyleToContext:function(t,e,n){const r=t.ctx,o=t.current;switch(e){case 1:var s=this.ctx;r.fillStyle=s.fillStyle,r.strokeStyle=s.strokeStyle,o.fillColor=s.fillStyle,o.strokeColor=s.strokeStyle;break;case 2:var a=i.Util.makeCssRgb(n[0],n[1],n[2]);r.fillStyle=a,r.strokeStyle=a,o.fillColor=a,o.strokeColor=a;break;default:throw new i.FormatError(`Unsupported paint type: ${e}`)}},getPattern:function(t,e){(t=this.ctx).setTransform.apply(t,this.baseTransform),t.transform.apply(t,this.matrix);var n=this.createPatternCanvas(e);return t.createPattern(n,"repeat")}},t}();e.TilingPattern=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const i=Object.create(null);e.GlobalWorkerOptions=i,i.workerPort=void 0===i.workerPort?null:i.workerPort,i.workerSrc=void 0===i.workerSrc?"":i.workerSrc},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var i=n(2);function r(t){if("object"!=typeof t||null===t)return t;switch(t.name){case"AbortException":return new i.AbortException(t.message);case"MissingPDFException":return new i.MissingPDFException(t.message);case"UnexpectedResponseException":return new i.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new i.UnknownErrorException(t.message,t.details);default:return new i.UnknownErrorException(t.message,t.toString())}}e.MessageHandler=class{constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream)return void this._processStreamMessage(e);if(e.callback){const t=e.callbackId,n=this.callbackCapabilities[t];if(!n)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],1===e.callback)n.resolve(e.data);else{if(2!==e.callback)throw new Error("Unexpected callback case");n.reject(r(e.reason))}return}const i=this.actionHandler[e.action];if(!i)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const t=this.sourceName,o=e.sourceName;new Promise((function(t){t(i(e.data))})).then((function(i){n.postMessage({sourceName:t,targetName:o,callback:1,callbackId:e.callbackId,data:i})}),(function(i){n.postMessage({sourceName:t,targetName:o,callback:2,callbackId:e.callbackId,reason:r(i)})}))}else e.streamId?this._createStreamSink(e):i(e.data)},n.addEventListener("message",this._onComObjOnMessage)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const r=this.callbackId++,o=(0,i.createPromiseCapability)();this.callbackCapabilities[r]=o;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},n)}catch(s){o.reject(s)}return o.promise}sendWithStream(t,e,n,o){const s=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:n=>{const r=(0,i.createPromiseCapability)();return this.streamControllers[s]={controller:n,startCall:r,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:a,targetName:l,action:t,streamId:s,data:e,desiredSize:n.desiredSize},o),r.promise},pull:t=>{const e=(0,i.createPromiseCapability)();return this.streamControllers[s].pullCall=e,c.postMessage({sourceName:a,targetName:l,stream:6,streamId:s,desiredSize:t.desiredSize}),e.promise},cancel:t=>{(0,i.assert)(t instanceof Error,"cancel must have a valid reason");const e=(0,i.createPromiseCapability)();return this.streamControllers[s].cancelCall=e,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:1,streamId:s,reason:r(t)}),e.promise}},n)}_createStreamSink(t){const e=this,n=this.actionHandler[t.action],o=t.streamId,s=this.sourceName,a=t.sourceName,l=this.comObj,c={enqueue(t,n=1,r){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=n,l>0&&this.desiredSize<=0&&(this.sinkCapability=(0,i.createPromiseCapability)(),this.ready=this.sinkCapability.promise),e._postMessage({sourceName:s,targetName:a,stream:4,streamId:o,chunk:t},r)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:a,stream:3,streamId:o}),delete e.streamSinks[o])},error(t){(0,i.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:a,stream:5,streamId:o,reason:r(t)}))},sinkCapability:(0,i.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[o]=c,new Promise((function(e){e(n(t.data,c))})).then((function(){l.postMessage({sourceName:s,targetName:a,stream:8,streamId:o,success:!0})}),(function(t){l.postMessage({sourceName:s,targetName:a,stream:8,streamId:o,reason:r(t)})}))}_processStreamMessage(t){const e=t.streamId,n=this.sourceName,o=t.sourceName,s=this.comObj;switch(t.stream){case 8:t.success?this.streamControllers[e].startCall.resolve():this.streamControllers[e].startCall.reject(r(t.reason));break;case 7:t.success?this.streamControllers[e].pullCall.resolve():this.streamControllers[e].pullCall.reject(r(t.reason));break;case 6:if(!this.streamSinks[e]){s.postMessage({sourceName:n,targetName:o,stream:7,streamId:e,success:!0});break}this.streamSinks[e].desiredSize<=0&&t.desiredSize>0&&this.streamSinks[e].sinkCapability.resolve(),this.streamSinks[e].desiredSize=t.desiredSize;const{onPull:a}=this.streamSinks[t.streamId];new Promise((function(t){t(a&&a())})).then((function(){s.postMessage({sourceName:n,targetName:o,stream:7,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:n,targetName:o,stream:7,streamId:e,reason:r(t)})}));break;case 4:if((0,i.assert)(this.streamControllers[e],"enqueue should have stream controller"),this.streamControllers[e].isClosed)break;this.streamControllers[e].controller.enqueue(t.chunk);break;case 3:if((0,i.assert)(this.streamControllers[e],"close should have stream controller"),this.streamControllers[e].isClosed)break;this.streamControllers[e].isClosed=!0,this.streamControllers[e].controller.close(),this._deleteStreamController(e);break;case 5:(0,i.assert)(this.streamControllers[e],"error should have stream controller"),this.streamControllers[e].controller.error(r(t.reason)),this._deleteStreamController(e);break;case 2:t.success?this.streamControllers[e].cancelCall.resolve():this.streamControllers[e].cancelCall.reject(r(t.reason)),this._deleteStreamController(e);break;case 1:if(!this.streamSinks[e])break;const{onCancel:l}=this.streamSinks[t.streamId];new Promise((function(e){e(l&&l(r(t.reason)))})).then((function(){s.postMessage({sourceName:n,targetName:o,stream:2,streamId:e,success:!0})}),(function(t){s.postMessage({sourceName:n,targetName:o,stream:2,streamId:e,reason:r(t)})})),this.streamSinks[e].sinkCapability.reject(r(t.reason)),this.streamSinks[e].isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(t){await Promise.allSettled([this.streamControllers[t].startCall,this.streamControllers[t].pullCall,this.streamControllers[t].cancelCall].map((function(t){return t&&t.promise}))),delete this.streamControllers[t]}_postMessage(t,e){e&&this.postMessageTransfers?this.comObj.postMessage(t,e):this.comObj.postMessage(t)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var i=n(2),r=n(13);e.Metadata=class{constructor(t){(0,i.assert)("string"==typeof t,"Metadata: input is not a string"),t=this._repair(t);const e=(new r.SimpleXMLParser).parseFromString(t);this._metadataMap=new Map,e&&this._parse(e)}_repair(t){return t.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,(function(t,e){const n=e.replace(/\\([0-3])([0-7])([0-7])/g,(function(t,e,n,i){return String.fromCharCode(64*e+8*n+1*i)})).replace(/&(amp|apos|gt|lt|quot);/g,(function(t,e){switch(e){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${e} isn't defined.`)}));let i="";for(let r=0,o=n.length;r<o;r+=2){const t=256*n.charCodeAt(r)+n.charCodeAt(r+1);i+=t>=32&&t<127&&60!==t&&62!==t&&38!==t?String.fromCharCode(t):"&#x"+(65536+t).toString(16).substring(1)+";"}return">"+i}))}_parse(t){let e=t.documentElement;if("rdf:rdf"!==e.nodeName.toLowerCase())for(e=e.firstChild;e&&"rdf:rdf"!==e.nodeName.toLowerCase();)e=e.nextSibling;const n=e?e.nodeName.toLowerCase():null;if(!e||"rdf:rdf"!==n||!e.hasChildNodes())return;const i=e.childNodes;for(let r=0,o=i.length;r<o;r++){const t=i[r];if("rdf:description"===t.nodeName.toLowerCase())for(let e=0,n=t.childNodes.length;e<n;e++)if("#text"!==t.childNodes[e].nodeName.toLowerCase()){const n=t.childNodes[e],i=n.nodeName.toLowerCase();this._metadataMap.set(i,n.textContent.trim())}}}get(t){return this._metadataMap.has(t)?this._metadataMap.get(t):null}getAll(){const t=Object.create(null);for(const[e,n]of this._metadataMap)t[e]=n;return t}has(t){return this._metadataMap.has(t)}}},function(t,e,n){"use strict";function i(t,e){const n=t[e];return" "===n||"\n"===n||"\r"===n||"\t"===n}Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleXMLParser=void 0;class r{constructor(t,e){this.nodeName=t,this.nodeValue=e,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const t=this.parentNode.childNodes;if(!t)return;const e=t.indexOf(this);return-1!==e?t[e+1]:void 0}get textContent(){return this.childNodes?this.childNodes.map((function(t){return t.textContent})).join(""):this.nodeValue||""}hasChildNodes(){return this.childNodes&&this.childNodes.length>0}}e.SimpleXMLParser=class extends class{_resolveEntities(t){return t.replace(/&([^;]+);/g,(t,e)=>{if("#x"===e.substring(0,2))return String.fromCharCode(parseInt(e.substring(2),16));if("#"===e.substring(0,1))return String.fromCharCode(parseInt(e.substring(1),10));switch(e){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return this.onResolveEntity(e)})}_parseContent(t,e){const n=[];let r=e;function o(){for(;r<t.length&&i(t,r);)++r}for(;r<t.length&&!i(t,r)&&">"!==t[r]&&"/"!==t[r];)++r;const s=t.substring(e,r);for(o();r<t.length&&">"!==t[r]&&"/"!==t[r]&&"?"!==t[r];){o();let e="",s="";for(;r<t.length&&!i(t,r)&&"="!==t[r];)e+=t[r],++r;if(o(),"="!==t[r])return null;++r,o();const a=t[r];if('"'!==a&&"'"!==a)return null;const l=t.indexOf(a,++r);if(l<0)return null;s=t.substring(r,l),n.push({name:e,value:this._resolveEntities(s)}),r=l+1,o()}return{name:s,attributes:n,parsed:r-e}}_parseProcessingInstruction(t,e){let n=e;for(;n<t.length&&!i(t,n)&&">"!==t[n]&&"/"!==t[n];)++n;const r=t.substring(e,n);!function(){for(;n<t.length&&i(t,n);)++n}();const o=n;for(;n<t.length&&("?"!==t[n]||">"!==t[n+1]);)++n;return{name:r,value:t.substring(o,n),parsed:n-e}}parseXml(t){let e=0;for(;e<t.length;){let n=e;if("<"===t[e]){let e;switch(++n,t[n]){case"/":if(++n,e=t.indexOf(">",n),e<0)return void this.onError(-9);this.onEndElement(t.substring(n,e)),n=e+1;break;case"?":++n;const i=this._parseProcessingInstruction(t,n);if("?>"!==t.substring(n+i.parsed,n+i.parsed+2))return void this.onError(-3);this.onPi(i.name,i.value),n+=i.parsed+2;break;case"!":if("--"===t.substring(n+1,n+3)){if(e=t.indexOf("--\x3e",n+3),e<0)return void this.onError(-5);this.onComment(t.substring(n+3,e)),n=e+3}else if("[CDATA["===t.substring(n+1,n+8)){if(e=t.indexOf("]]>",n+8),e<0)return void this.onError(-2);this.onCdata(t.substring(n+8,e)),n=e+3}else{if("DOCTYPE"!==t.substring(n+1,n+8))return void this.onError(-6);{const i=t.indexOf("[",n+8);let r=!1;if(e=t.indexOf(">",n+8),e<0)return void this.onError(-4);if(i>0&&e>i){if(e=t.indexOf("]>",n+8),e<0)return void this.onError(-4);r=!0}const o=t.substring(n+8,e+(r?1:0));this.onDoctype(o),n=e+(r?2:1)}}break;default:const r=this._parseContent(t,n);if(null===r)return void this.onError(-6);let o=!1;if("/>"===t.substring(n+r.parsed,n+r.parsed+2))o=!0;else if(">"!==t.substring(n+r.parsed,n+r.parsed+1))return void this.onError(-9);this.onBeginElement(r.name,r.attributes,o),n+=r.parsed+(o?2:1)}}else{for(;n<t.length&&"<"!==t[n];)n++;const i=t.substring(e,n);this.onText(this._resolveEntities(i))}e=n}}onResolveEntity(t){return`&${t};`}onPi(t,e){}onComment(t){}onCdata(t){}onDoctype(t){}onText(t){}onBeginElement(t,e,n){}onEndElement(t){}onError(t){}}{constructor(){super(),this._currentFragment=null,this._stack=null,this._errorCode=0}parseFromString(t){if(this._currentFragment=[],this._stack=[],this._errorCode=0,this.parseXml(t),0!==this._errorCode)return;const[e]=this._currentFragment;return e?{documentElement:e}:void 0}onResolveEntity(t){switch(t){case"apos":return"'"}return super.onResolveEntity(t)}onText(t){if(function(t){for(let e=0,n=t.length;e<n;e++)if(!i(t,e))return!1;return!0}(t))return;const e=new r("#text",t);this._currentFragment.push(e)}onCdata(t){const e=new r("#text",t);this._currentFragment.push(e)}onBeginElement(t,e,n){const i=new r(t);i.childNodes=[],this._currentFragment.push(i),n||(this._stack.push(this._currentFragment),this._currentFragment=i.childNodes)}onEndElement(t){this._currentFragment=this._stack.pop()||[];const e=this._currentFragment[this._currentFragment.length-1];if(e)for(let n=0,i=e.childNodes.length;n<i;n++)e.childNodes[n].parentNode=e}onError(t){this._errorCode=t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var i=n(2);e.PDFDataTransportStream=class{constructor(t,e){(0,i.assert)(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1;const n=t.initialData;if(n&&n.length>0){const t=new Uint8Array(n).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((t,e)=>{this._onReceiveData({begin:t,chunk:e})}),this._pdfDataRangeTransport.addProgressListener((t,e)=>{this._onProgress({loaded:t,total:e})}),this._pdfDataRangeTransport.addProgressiveReadListener(t=>{this._onReceiveData({chunk:t})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(t){const e=new Uint8Array(t.chunk).buffer;if(void 0===t.begin)this._fullRequestReader?this._fullRequestReader._enqueue(e):this._queuedChunks.push(e);else{const n=this._rangeReaders.some((function(n){return n._begin===t.begin&&(n._enqueue(e),!0)}));(0,i.assert)(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}_onProgress(t){if(void 0===t.total){const e=this._rangeReaders[0];e&&e.onProgress&&e.onProgress({loaded:t.loaded})}else{const e=this._fullRequestReader;e&&e.onProgress&&e.onProgress({loaded:t.loaded,total:t.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new r(this,t,this._progressiveDone)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new o(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeReaders.slice(0).forEach((function(e){e.cancel(t)})),this._pdfDataRangeTransport.abort()}};class r{constructor(t,e,n=!1){this._stream=t,this._done=n||!1,this._filename=null,this._queuedChunks=e||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=(0,i.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[]}progressiveDone(){this._done||(this._done=!0)}}class o{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){this._done||(0===this._requests.length?this._queuedChunk=t:(this._requests.shift().resolve({value:t,done:!1}),this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[]),this._done=!0,this._stream._removeRangeReader(this))}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,i.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._stream._removeRangeReader(this)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=void 0;var i=n(2);e.WebGLContext=class{constructor({enable:t=!1}){this._enabled=!0===t}get isEnabled(){let t=this._enabled;return t&&(t=r.tryInitGL()),(0,i.shadow)(this,"isEnabled",t)}composeSMask({layer:t,mask:e,properties:n}){return r.composeSMask(t,e,n)}drawFigures({width:t,height:e,backgroundColor:n,figures:i,context:o}){return r.drawFigures(t,e,n,i,o)}clear(){r.cleanup()}};var r=function(){function t(t,e,n){var i=t.createShader(n);if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var r=t.getShaderInfoLog(i);throw new Error("Error during shader compilation: "+r)}return i}function e(e,n){return t(e,n,e.VERTEX_SHADER)}function n(e,n){return t(e,n,e.FRAGMENT_SHADER)}function i(t,e){for(var n=t.createProgram(),i=0,r=e.length;i<r;++i)t.attachShader(n,e[i]);if(t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS)){var o=t.getProgramInfoLog(n);throw new Error("Error during program linking: "+o)}return n}function r(t,e,n){t.activeTexture(n);var i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),i}var o,s;function a(){o||(s=document.createElement("canvas"),o=s.getContext("webgl",{premultipliedalpha:!1}))}var l=null,c=null;return{tryInitGL(){try{return a(),!!o}catch(t){}return!1},composeSMask:function(t,c,u){var h=t.width,d=t.height;l||function(){var t,r;a(),t=s,s=null,r=o,o=null;var c=i(r,[e(r,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             "),n(r,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ")]);r.useProgram(c);var u={};u.gl=r,u.canvas=t,u.resolutionLocation=r.getUniformLocation(c,"u_resolution"),u.positionLocation=r.getAttribLocation(c,"a_position"),u.backdropLocation=r.getUniformLocation(c,"u_backdrop"),u.subtypeLocation=r.getUniformLocation(c,"u_subtype");var h=r.getAttribLocation(c,"a_texCoord"),d=r.getUniformLocation(c,"u_image"),p=r.getUniformLocation(c,"u_mask"),f=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,f),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),r.STATIC_DRAW),r.enableVertexAttribArray(h),r.vertexAttribPointer(h,2,r.FLOAT,!1,0,0),r.uniform1i(d,0),r.uniform1i(p,1),l=u}();var p=l,f=p.canvas,m=p.gl;f.width=h,f.height=d,m.viewport(0,0,m.drawingBufferWidth,m.drawingBufferHeight),m.uniform2f(p.resolutionLocation,h,d),u.backdrop?m.uniform4f(p.resolutionLocation,u.backdrop[0],u.backdrop[1],u.backdrop[2],1):m.uniform4f(p.resolutionLocation,0,0,0,0),m.uniform1i(p.subtypeLocation,"Luminosity"===u.subtype?1:0);var g=r(m,t,m.TEXTURE0),v=r(m,c,m.TEXTURE1),y=m.createBuffer();return m.bindBuffer(m.ARRAY_BUFFER,y),m.bufferData(m.ARRAY_BUFFER,new Float32Array([0,0,h,0,0,d,0,d,h,0,h,d]),m.STATIC_DRAW),m.enableVertexAttribArray(p.positionLocation),m.vertexAttribPointer(p.positionLocation,2,m.FLOAT,!1,0,0),m.clearColor(0,0,0,0),m.enable(m.BLEND),m.blendFunc(m.ONE,m.ONE_MINUS_SRC_ALPHA),m.clear(m.COLOR_BUFFER_BIT),m.drawArrays(m.TRIANGLES,0,6),m.flush(),m.deleteTexture(g),m.deleteTexture(v),m.deleteBuffer(y),f},drawFigures:function(t,r,l,u,h){c||function(){var t,r;a(),t=s,s=null,r=o,o=null;var l=i(r,[e(r,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             "),n(r,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ")]);r.useProgram(l);var u={};u.gl=r,u.canvas=t,u.resolutionLocation=r.getUniformLocation(l,"u_resolution"),u.scaleLocation=r.getUniformLocation(l,"u_scale"),u.offsetLocation=r.getUniformLocation(l,"u_offset"),u.positionLocation=r.getAttribLocation(l,"a_position"),u.colorLocation=r.getAttribLocation(l,"a_color"),c=u}();var d=c,p=d.canvas,f=d.gl;p.width=t,p.height=r,f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight),f.uniform2f(d.resolutionLocation,t,r);var m,g,v,y=0;for(m=0,g=u.length;m<g;m++)switch(u[m].type){case"lattice":y+=((v=u[m].coords.length/u[m].verticesPerRow|0)-1)*(u[m].verticesPerRow-1)*6;break;case"triangles":y+=u[m].coords.length}var b=new Float32Array(2*y),_=new Uint8Array(3*y),w=h.coords,A=h.colors,x=0,C=0;for(m=0,g=u.length;m<g;m++){var E=u[m],S=E.coords,M=E.colors;switch(E.type){case"lattice":var T=E.verticesPerRow;v=S.length/T|0;for(var P=1;P<v;P++)for(var k=P*T+1,D=1;D<T;D++,k++)b[x]=w[S[k-T-1]],b[x+1]=w[S[k-T-1]+1],b[x+2]=w[S[k-T]],b[x+3]=w[S[k-T]+1],b[x+4]=w[S[k-1]],b[x+5]=w[S[k-1]+1],_[C]=A[M[k-T-1]],_[C+1]=A[M[k-T-1]+1],_[C+2]=A[M[k-T-1]+2],_[C+3]=A[M[k-T]],_[C+4]=A[M[k-T]+1],_[C+5]=A[M[k-T]+2],_[C+6]=A[M[k-1]],_[C+7]=A[M[k-1]+1],_[C+8]=A[M[k-1]+2],b[x+6]=b[x+2],b[x+7]=b[x+3],b[x+8]=b[x+4],b[x+9]=b[x+5],b[x+10]=w[S[k]],b[x+11]=w[S[k]+1],_[C+9]=_[C+3],_[C+10]=_[C+4],_[C+11]=_[C+5],_[C+12]=_[C+6],_[C+13]=_[C+7],_[C+14]=_[C+8],_[C+15]=A[M[k]],_[C+16]=A[M[k]+1],_[C+17]=A[M[k]+2],x+=12,C+=18;break;case"triangles":for(var O=0,R=S.length;O<R;O++)b[x]=w[S[O]],b[x+1]=w[S[O]+1],_[C]=A[M[O]],_[C+1]=A[M[O]+1],_[C+2]=A[M[O]+2],x+=2,C+=3}}l?f.clearColor(l[0]/255,l[1]/255,l[2]/255,1):f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT);var I=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,I),f.bufferData(f.ARRAY_BUFFER,b,f.STATIC_DRAW),f.enableVertexAttribArray(d.positionLocation),f.vertexAttribPointer(d.positionLocation,2,f.FLOAT,!1,0,0);var L=f.createBuffer();return f.bindBuffer(f.ARRAY_BUFFER,L),f.bufferData(f.ARRAY_BUFFER,_,f.STATIC_DRAW),f.enableVertexAttribArray(d.colorLocation),f.vertexAttribPointer(d.colorLocation,3,f.UNSIGNED_BYTE,!1,0,0),f.uniform2f(d.scaleLocation,h.scaleX,h.scaleY),f.uniform2f(d.offsetLocation,h.offsetX,h.offsetY),f.drawArrays(f.TRIANGLES,0,y),f.flush(),f.deleteBuffer(I),f.deleteBuffer(L),p},cleanup(){l&&l.canvas&&(l.canvas.width=0,l.canvas.height=0),c&&c.canvas&&(c.canvas.width=0,c.canvas.height=0),l=null,c=null}}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var i=n(1),r=n(2);class o{static create(t){switch(t.data.annotationType){case r.AnnotationType.LINK:return new a(t);case r.AnnotationType.TEXT:return new l(t);case r.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new u(t);case"Btn":return t.data.radioButton?new d(t):t.data.checkBox?new h(t):new p(t);case"Ch":return new f(t)}return new c(t);case r.AnnotationType.POPUP:return new m(t);case r.AnnotationType.FREETEXT:return new v(t);case r.AnnotationType.LINE:return new y(t);case r.AnnotationType.SQUARE:return new b(t);case r.AnnotationType.CIRCLE:return new _(t);case r.AnnotationType.POLYLINE:return new w(t);case r.AnnotationType.CARET:return new x(t);case r.AnnotationType.INK:return new C(t);case r.AnnotationType.POLYGON:return new A(t);case r.AnnotationType.HIGHLIGHT:return new E(t);case r.AnnotationType.UNDERLINE:return new S(t);case r.AnnotationType.SQUIGGLY:return new M(t);case r.AnnotationType.STRIKEOUT:return new T(t);case r.AnnotationType.STAMP:return new P(t);case r.AnnotationType.FILEATTACHMENT:return new k(t);default:return new s(t)}}}class s{constructor(t,e=!1,n=!1){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderInteractiveForms=t.renderInteractiveForms,this.svgFactory=t.svgFactory,e&&(this.container=this._createContainer(n))}_createContainer(t=!1){const e=this.data,n=this.page,i=this.viewport,o=document.createElement("section");let s=e.rect[2]-e.rect[0],a=e.rect[3]-e.rect[1];o.setAttribute("data-annotation-id",e.id);const l=r.Util.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]);if(o.style.transform=`matrix(${i.transform.join(",")})`,o.style.transformOrigin=`-${l[0]}px -${l[1]}px`,!t&&e.borderStyle.width>0){o.style.borderWidth=`${e.borderStyle.width}px`,e.borderStyle.style!==r.AnnotationBorderStyleType.UNDERLINE&&(s-=2*e.borderStyle.width,a-=2*e.borderStyle.width);const t=e.borderStyle.horizontalCornerRadius,n=e.borderStyle.verticalCornerRadius;switch((t>0||n>0)&&(o.style.borderRadius=`${t}px / ${n}px`),e.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:o.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:o.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:o.style.borderBottomStyle="solid"}e.color?o.style.borderColor=r.Util.makeCssRgb(0|e.color[0],0|e.color[1],0|e.color[2]):o.style.borderWidth=0}return o.style.left=`${l[0]}px`,o.style.top=`${l[1]}px`,o.style.width=`${s}px`,o.style.height=`${a}px`,o}_createPopup(t,e,n){e||((e=document.createElement("div")).style.height=t.style.height,e.style.width=t.style.width,t.appendChild(e));const i=new g({container:t,trigger:e,color:n.color,title:n.title,modificationDate:n.modificationDate,contents:n.contents,hideWrapper:!0}).render();i.style.left=t.style.width,t.appendChild(i)}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}}class a extends s{constructor(t){super(t,!!(t.data.url||t.data.dest||t.data.action))}render(){this.container.className="linkAnnotation";const{data:t,linkService:e}=this,n=document.createElement("a");return t.url?(0,i.addLinkAttributes)(n,{url:t.url,target:t.newWindow?i.LinkTarget.BLANK:e.externalLinkTarget,rel:e.externalLinkRel,enabled:e.externalLinkEnabled}):t.action?this._bindNamedAction(n,t.action):this._bindLink(n,t.dest),this.container.appendChild(n),this.container}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.navigateTo(e),!1),e&&(t.className="internalLink")}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),t.className="internalLink"}}class l extends s{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents))}render(){this.container.className="textAnnotation";const t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,t,this.data),this.container.appendChild(t),this.container}}class c extends s{render(){return this.container}}class u extends c{constructor(t){super(t,t.renderInteractiveForms||!t.data.hasAppearance&&!!t.data.fieldValue)}render(){this.container.className="textWidgetAnnotation";let t=null;if(this.renderInteractiveForms){if(this.data.multiLine?(t=document.createElement("textarea"),t.textContent=this.data.fieldValue):(t=document.createElement("input"),t.type="text",t.setAttribute("value",this.data.fieldValue)),t.disabled=this.data.readOnly,t.name=this.data.fieldName,null!==this.data.maxLen&&(t.maxLength=this.data.maxLen),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;t.classList.add("comb"),t.style.letterSpacing=`calc(${e}px - 1ch)`}}else{t=document.createElement("div"),t.textContent=this.data.fieldValue,t.style.verticalAlign="middle",t.style.display="table-cell";let e=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(e=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(t,e)}return null!==this.data.textAlignment&&(t.style.textAlign=["left","center","right"][this.data.textAlignment]),this.container.appendChild(t),this.container}_setTextStyle(t,e){const n=t.style;if(n.fontSize=`${this.data.fontSize}px`,n.direction=this.data.fontDirection<0?"rtl":"ltr",!e)return;let i="normal";e.black?i="900":e.bold&&(i="bold"),n.fontWeight=i,n.fontStyle=e.italic?"italic":"normal",n.fontFamily=(e.loadedName?`"${e.loadedName}", `:"")+(e.fallbackName||"Helvetica, sans-serif")}}class h extends c{constructor(t){super(t,t.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation checkBox";const t=document.createElement("input");return t.disabled=this.data.readOnly,t.type="checkbox",t.name=this.data.fieldName,this.data.fieldValue&&"Off"!==this.data.fieldValue&&t.setAttribute("checked",!0),this.container.appendChild(t),this.container}}class d extends c{constructor(t){super(t,t.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=document.createElement("input");return t.disabled=this.data.readOnly,t.type="radio",t.name=this.data.fieldName,this.data.fieldValue===this.data.buttonValue&&t.setAttribute("checked",!0),this.container.appendChild(t),this.container}}class p extends a{render(){const t=super.render();return t.className="buttonWidgetAnnotation pushButton",t}}class f extends c{constructor(t){super(t,t.renderInteractiveForms)}render(){this.container.className="choiceWidgetAnnotation";const t=document.createElement("select");t.disabled=this.data.readOnly,t.name=this.data.fieldName,this.data.combo||(t.size=this.data.options.length,this.data.multiSelect&&(t.multiple=!0));for(const e of this.data.options){const n=document.createElement("option");n.textContent=e.displayValue,n.value=e.exportValue,this.data.fieldValue.includes(e.displayValue)&&n.setAttribute("selected",!0),t.appendChild(n)}return this.container.appendChild(t),this.container}}class m extends s{constructor(t){super(t,!(!t.data.title&&!t.data.contents))}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const t=this.layer.querySelector(`[data-annotation-id="${this.data.parentId}"]`);if(!t)return this.container;const e=new g({container:this.container,trigger:t,color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),n=parseFloat(t.style.left),i=parseFloat(t.style.width);return this.container.style.transformOrigin=`-${n+i}px -${t.style.top}`,this.container.style.left=`${n+i}px`,this.container.appendChild(e.render()),this.container}}class g{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.title=t.title,this.modificationDate=t.modificationDate,this.contents=t.contents,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){const t=document.createElement("div");t.className="popupWrapper",this.hideElement=this.hideWrapper?t:this.container,this.hideElement.setAttribute("hidden",!0);const e=document.createElement("div");e.className="popup";const n=this.color;n&&(e.style.backgroundColor=r.Util.makeCssRgb(0|.7*(255-n[0])+n[0],0|.7*(255-n[1])+n[1],0|.7*(255-n[2])+n[2]));const o=document.createElement("h1");o.textContent=this.title,e.appendChild(o);const s=i.PDFDateString.toDateObject(this.modificationDate);if(s){const t=document.createElement("span");t.textContent="{{date}}, {{time}}",t.dataset.l10nId="annotation_date_string",t.dataset.l10nArgs=JSON.stringify({date:s.toLocaleDateString(),time:s.toLocaleTimeString()}),e.appendChild(t)}const a=this._formatContents(this.contents);return e.appendChild(a),this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),e.addEventListener("click",this._hide.bind(this,!0)),t.appendChild(e),t}_formatContents(t){const e=document.createElement("p"),n=t.split(/(?:\r\n?|\n)/);for(let i=0,r=n.length;i<r;++i)e.appendChild(document.createTextNode(n[i])),i<r-1&&e.appendChild(document.createElement("br"));return e}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}_hide(t=!0){t&&(this.pinned=!1),this.hideElement.hasAttribute("hidden")||this.pinned||(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}class v extends s{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class y extends s{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){this.container.className="lineAnnotation";const t=this.data,e=this.svgFactory.create(t.rect[2]-t.rect[0],t.rect[3]-t.rect[1]),n=this.svgFactory.createElement("svg:line");return n.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),n.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),n.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),n.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),n.setAttribute("stroke-width",t.borderStyle.width||1),n.setAttribute("stroke","transparent"),e.appendChild(n),this.container.append(e),this._createPopup(this.container,n,t),this.container}}class b extends s{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){this.container.className="squareAnnotation";const t=this.data,e=t.rect[2]-t.rect[0],n=t.rect[3]-t.rect[1],i=this.svgFactory.create(e,n),r=t.borderStyle.width,o=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",r/2),o.setAttribute("y",r/2),o.setAttribute("width",e-r),o.setAttribute("height",n-r),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","none"),i.appendChild(o),this.container.append(i),this._createPopup(this.container,o,t),this.container}}class _ extends s{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){this.container.className="circleAnnotation";const t=this.data,e=t.rect[2]-t.rect[0],n=t.rect[3]-t.rect[1],i=this.svgFactory.create(e,n),r=t.borderStyle.width,o=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",n/2),o.setAttribute("rx",e/2-r/2),o.setAttribute("ry",n/2-r/2),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","none"),i.appendChild(o),this.container.append(i),this._createPopup(this.container,o,t),this.container}}class w extends s{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,e=this.svgFactory.create(t.rect[2]-t.rect[0],t.rect[3]-t.rect[1]);let n=[];for(const r of t.vertices)n.push(r.x-t.rect[0]+","+(t.rect[3]-r.y));n=n.join(" ");const i=this.svgFactory.createElement(this.svgElementName);return i.setAttribute("points",n),i.setAttribute("stroke-width",t.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","none"),e.appendChild(i),this.container.append(e),this._createPopup(this.container,i,t),this.container}}class A extends w{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class x extends s{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class C extends s{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,e=this.svgFactory.create(t.rect[2]-t.rect[0],t.rect[3]-t.rect[1]);for(const n of t.inkLists){let i=[];for(const e of n)i.push(`${e.x-t.rect[0]},${t.rect[3]-e.y}`);i=i.join(" ");const r=this.svgFactory.createElement(this.svgElementName);r.setAttribute("points",i),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","none"),this._createPopup(this.container,r,t),e.appendChild(r)}return this.container.append(e),this.container}}class E extends s{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class S extends s{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class M extends s{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class T extends s{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class P extends s{constructor(t){super(t,!!(t.data.hasPopup||t.data.title||t.data.contents),!0)}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class k extends s{constructor(t){super(t,!0);const{filename:e,content:n}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(e),this.content=n,this.linkService.eventBus&&this.linkService.eventBus.dispatch("fileattachmentannotation",{source:this,id:(0,r.stringToPDFString)(e),filename:e,content:n})}render(){this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),this.data.hasPopup||!this.data.title&&!this.data.contents||this._createPopup(this.container,t,this.data),this.container.appendChild(t),this.container}_download(){this.downloadManager?this.downloadManager.downloadData(this.content,this.filename,""):(0,r.warn)("Download cannot be started due to unavailable download manager")}}e.AnnotationLayer=class{static render(t){const e=[],n=[];for(const i of t.annotations)i&&(i.annotationType!==r.AnnotationType.POPUP?e.push(i):n.push(i));n.length&&e.push(...n);for(const r of e){const e=o.create({data:r,layer:t.div,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderInteractiveForms:t.renderInteractiveForms||!1,svgFactory:new i.DOMSVGFactory});e.isRenderable&&t.div.appendChild(e.render())}}static update(t){for(const e of t.annotations){const n=t.div.querySelector(`[data-annotation-id="${e.id}"]`);n&&(n.style.transform=`matrix(${t.viewport.transform.join(",")})`)}t.div.removeAttribute("hidden")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.renderTextLayer=void 0;var i=n(2),r=function(){var t=/\S/;function e(e,n,r){var o=document.createElement("span"),s={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(e._textDivs.push(o),!t.test(n.str))return s.isWhitespace=!0,void e._textDivProperties.set(o,s);var a=i.Util.transform(e._viewport.transform,n.transform),l=Math.atan2(a[1],a[0]),c=r[n.fontName];c.vertical&&(l+=Math.PI/2);var u=Math.sqrt(a[2]*a[2]+a[3]*a[3]),h=u;let d,p;c.ascent?h*=c.ascent:c.descent&&(h*=1+c.descent),0===l?(d=a[4],p=a[5]-h):(d=a[4]+h*Math.sin(l),p=a[5]-h*Math.cos(l)),o.style.left=`${d}px`,o.style.top=`${p}px`,o.style.fontSize=`${u}px`,o.style.fontFamily=c.fontFamily,o.textContent=n.str,e._fontInspectorEnabled&&(o.dataset.fontName=n.fontName),0!==l&&(s.angle=l*(180/Math.PI));let f=!1;if(n.str.length>1)f=!0;else if(n.transform[0]!==n.transform[3]){const t=Math.abs(n.transform[0]),e=Math.abs(n.transform[3]);t!==e&&Math.max(t,e)/Math.min(t,e)>1.5&&(f=!0)}if(f&&(s.canvasWidth=c.vertical?n.height*e._viewport.scale:n.width*e._viewport.scale),e._textDivProperties.set(o,s),e._textContentStream&&e._layoutText(o),e._enhanceTextSelection){var m=1,g=0;0!==l&&(m=Math.cos(l),g=Math.sin(l));var v,y,b=(c.vertical?n.height:n.width)*e._viewport.scale,_=u;y=0!==l?i.Util.getAxialAlignedBoundingBox([0,0,b,_],v=[m,g,-g,m,d,p]):[d,p,d+b,p+_],e._bounds.push({left:y[0],top:y[1],right:y[2],bottom:y[3],div:o,size:[b,_],m:v})}}function n(t){if(!t._canceled){var e=t._textDivs,n=t._capability,i=e.length;if(i>1e5)return t._renderingDone=!0,void n.resolve();if(!t._textContentStream)for(var r=0;r<i;r++)t._layoutText(e[r]);t._renderingDone=!0,n.resolve()}}function r(t,e,n){let i=0;for(let r=0;r<n;r++){const n=t[e++];n>0&&(i=i?Math.min(n,i):n)}return i}function o(t,e){e.sort((function(t,e){return t.x1-e.x1||t.index-e.index}));var n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];e.forEach((function(t){for(var e=0;e<n.length&&n[e].end<=t.y1;)e++;for(var i,r,o=n.length-1;o>=0&&n[o].start>=t.y2;)o--;var s,a,l=-1/0;for(s=e;s<=o;s++){var c;(c=(r=(i=n[s]).boundary).x2>t.x1?r.index>t.index?r.x1New:t.x1:void 0===r.x2New?(r.x2+t.x1)/2:r.x2New)>l&&(l=c)}for(t.x1New=l,s=e;s<=o;s++)void 0===(r=(i=n[s]).boundary).x2New?r.x2>t.x1?r.index>t.index&&(r.x2New=r.x2):r.x2New=l:r.x2New>l&&(r.x2New=Math.max(l,r.x2));var u=[],h=null;for(s=e;s<=o;s++){var d=(r=(i=n[s]).boundary).x2>t.x2?r:t;h===d?u[u.length-1].end=i.end:(u.push({start:i.start,end:i.end,boundary:d}),h=d)}for(n[e].start<t.y1&&(u[0].start=t.y1,u.unshift({start:n[e].start,end:t.y1,boundary:n[e].boundary})),t.y2<n[o].end&&(u[u.length-1].end=t.y2,u.push({start:t.y2,end:n[o].end,boundary:n[o].boundary})),s=e;s<=o;s++)if(void 0===(r=(i=n[s]).boundary).x2New){var p=!1;for(a=e-1;!p&&a>=0&&n[a].start>=r.y1;a--)p=n[a].boundary===r;for(a=o+1;!p&&a<n.length&&n[a].end<=r.y2;a++)p=n[a].boundary===r;for(a=0;!p&&a<u.length;a++)p=u[a].boundary===r;p||(r.x2New=l)}Array.prototype.splice.apply(n,[e,o-e+1].concat(u))})),n.forEach((function(e){var n=e.boundary;void 0===n.x2New&&(n.x2New=Math.max(t,n.x2))}))}function s({textContent:t,textContentStream:e,container:n,viewport:r,textDivs:o,textContentItemsStr:s,enhanceTextSelection:a}){this._textContent=t,this._textContentStream=e,this._container=n,this._viewport=r,this._textDivs=o||[],this._textContentItemsStr=s||[],this._enhanceTextSelection=!!a,this._fontInspectorEnabled=!(!globalThis.FontInspector||!globalThis.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,i.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}return s.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems(t,n){for(let i=0,r=t.length;i<r;i++)this._textContentItemsStr.push(t[i].str),e(this,t[i],n)},_layoutText(t){const e=this._textDivProperties.get(t);if(e.isWhitespace)return;let n="";if(0!==e.canvasWidth){const{fontSize:i,fontFamily:r}=t.style;i===this._layoutTextLastFontSize&&r===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=`${i} ${r}`,this._layoutTextLastFontSize=i,this._layoutTextLastFontFamily=r);const{width:o}=this._layoutTextCtx.measureText(t.textContent);o>0&&(e.scale=e.canvasWidth/o,n=`scaleX(${e.scale})`)}0!==e.angle&&(n=`rotate(${e.angle}deg) ${n}`),n.length>0&&(this._enhanceTextSelection&&(e.originalTransform=n),t.style.transform=n),this._textDivProperties.set(t,e),this._container.appendChild(t)},_render:function(t){const e=(0,i.createPromiseCapability)();let r=Object.create(null);const o=document.createElement("canvas");if(o.mozOpaque=!0,this._layoutTextCtx=o.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),e.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const t=()=>{this._reader.read().then(({value:n,done:i})=>{i?e.resolve():(Object.assign(r,n.styles),this._processItems(n.items,r),t())},e.reject)};this._reader=this._textContentStream.getReader(),t()}}e.promise.then(()=>{r=null,t?this._renderTimer=setTimeout(()=>{n(this),this._renderTimer=null},t):n(this)},this._capability.reject)},expandTextDivs:function(t){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function(t){for(var e=t._bounds,n=t._viewport,s=function(t,e,n){var i=n.map((function(t,e){return{x1:t.left,y1:t.top,x2:t.right,y2:t.bottom,index:e,x1New:void 0,x2New:void 0}}));o(t,i);var r=new Array(n.length);return i.forEach((function(t){r[t.index]={left:t.x1New,top:0,right:t.x2New,bottom:0}})),n.map((function(e,n){var o=r[n],s=i[n];s.x1=e.top,s.y1=t-o.right,s.x2=e.bottom,s.y2=t-o.left,s.index=n,s.x1New=void 0,s.x2New=void 0})),o(e,i),i.forEach((function(t){var e=t.index;r[e].top=t.x1New,r[e].bottom=t.x2New})),r}(n.width,n.height,e),a=0;a<s.length;a++){var l=e[a].div,c=t._textDivProperties.get(l);if(0!==c.angle){var u=s[a],h=e[a],d=h.m,p=d[0],f=d[1],m=[[0,0],[0,h.size[1]],[h.size[0],0],h.size],g=new Float64Array(64);m.forEach((function(t,e){var n=i.Util.applyTransform(t,d);g[e+0]=p&&(u.left-n[0])/p,g[e+4]=f&&(u.top-n[1])/f,g[e+8]=p&&(u.right-n[0])/p,g[e+12]=f&&(u.bottom-n[1])/f,g[e+16]=f&&(u.left-n[0])/-f,g[e+20]=p&&(u.top-n[1])/p,g[e+24]=f&&(u.right-n[0])/-f,g[e+28]=p&&(u.bottom-n[1])/p,g[e+32]=p&&(u.left-n[0])/-p,g[e+36]=f&&(u.top-n[1])/-f,g[e+40]=p&&(u.right-n[0])/-p,g[e+44]=f&&(u.bottom-n[1])/-f,g[e+48]=f&&(u.left-n[0])/f,g[e+52]=p&&(u.top-n[1])/-p,g[e+56]=f&&(u.right-n[0])/f,g[e+60]=p&&(u.bottom-n[1])/-p}));var v=1+Math.min(Math.abs(p),Math.abs(f));c.paddingLeft=r(g,32,16)/v,c.paddingTop=r(g,48,16)/v,c.paddingRight=r(g,0,16)/v,c.paddingBottom=r(g,16,16)/v,t._textDivProperties.set(l,c)}else c.paddingLeft=e[a].left-s[a].left,c.paddingTop=e[a].top-s[a].top,c.paddingRight=s[a].right-e[a].right,c.paddingBottom=s[a].bottom-e[a].bottom,t._textDivProperties.set(l,c)}}(this),this._bounds=null);const e=[],n=[];for(var s=0,a=this._textDivs.length;s<a;s++){const i=this._textDivs[s],r=this._textDivProperties.get(i);r.isWhitespace||(t?(e.length=0,n.length=0,r.originalTransform&&e.push(r.originalTransform),r.paddingTop>0?(n.push(`${r.paddingTop}px`),e.push(`translateY(${-r.paddingTop}px)`)):n.push(0),n.push(r.paddingRight>0?`${r.paddingRight/r.scale}px`:0),n.push(r.paddingBottom>0?`${r.paddingBottom}px`:0),r.paddingLeft>0?(n.push(`${r.paddingLeft/r.scale}px`),e.push(`translateX(${-r.paddingLeft/r.scale}px)`)):n.push(0),i.style.padding=n.join(" "),e.length&&(i.style.transform=e.join(" "))):(i.style.padding=null,i.style.transform=r.originalTransform))}}},function(t){var e=new s({textContent:t.textContent,textContentStream:t.textContentStream,container:t.container,viewport:t.viewport,textDivs:t.textDivs,textContentItemsStr:t.textContentItemsStr,enhanceTextSelection:t.enhanceTextSelection});return e._render(t.timeout),e}}();e.renderTextLayer=r},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SVGGraphics=void 0;var r=i(2),o=i(1),s=i(4);let a=function(){throw new Error("Not implemented: SVGGraphics")};n.SVGGraphics=a;{const t={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},i="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/1999/xlink",h=["butt","round","square"],d=["miter","round","bevel"],p=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),n=new Int32Array(256);for(let e=0;e<256;e++){let t=e;for(let e=0;e<8;e++)t=1&t?3988292384^t>>1&2147483647:t>>1&2147483647;n[e]=t}function i(t,e,i,r){let o=r;const s=e.length;i[o]=s>>24&255,i[o+1]=s>>16&255,i[o+2]=s>>8&255,i[o+3]=255&s,o+=4,i[o]=255&t.charCodeAt(0),i[o+1]=255&t.charCodeAt(1),i[o+2]=255&t.charCodeAt(2),i[o+3]=255&t.charCodeAt(3),o+=4,i.set(e,o),o+=e.length;const a=function(t,e,i){let r=-1;for(let o=e;o<i;o++)r=r>>>8^n[255&(r^t[o])];return-1^r}(i,r+4,o);i[o]=a>>24&255,i[o+1]=a>>16&255,i[o+2]=a>>8&255,i[o+3]=255&a}function o(t){let e=t.length;const n=Math.ceil(e/65535),i=new Uint8Array(2+e+5*n+4);let r=0;i[r++]=120,i[r++]=156;let o=0;for(;e>65535;)i[r++]=0,i[r++]=255,i[r++]=255,i[r++]=0,i[r++]=0,i.set(t.subarray(o,o+65535),r),r+=65535,o+=65535,e-=65535;i[r++]=1,i[r++]=255&e,i[r++]=e>>8&255,i[r++]=255&~e,i[r++]=(65535&~e)>>8&255,i.set(t.subarray(o),r),r+=t.length-o;const s=function(t,e,n){let i=1,r=0;for(let o=0;o<n;++o)i=(i+(255&t[o]))%65521,r=(r+i)%65521;return r<<16|i}(t,0,t.length);return i[r++]=s>>24&255,i[r++]=s>>16&255,i[r++]=s>>8&255,i[r++]=255&s,i}return function(n,a,l){return function(n,a,l,c){const u=n.width,h=n.height;let d,p,f;const m=n.data;switch(a){case r.ImageKind.GRAYSCALE_1BPP:p=0,d=1,f=u+7>>3;break;case r.ImageKind.RGB_24BPP:p=2,d=8,f=3*u;break;case r.ImageKind.RGBA_32BPP:p=6,d=8,f=4*u;break;default:throw new Error("invalid format")}const g=new Uint8Array((1+f)*h);let v=0,y=0;for(let t=0;t<h;++t)g[v++]=0,g.set(m.subarray(y,y+f),v),y+=f,v+=f;if(a===r.ImageKind.GRAYSCALE_1BPP&&c){v=0;for(let t=0;t<h;t++){v++;for(let t=0;t<f;t++)g[v++]^=255}}const b=new Uint8Array([u>>24&255,u>>16&255,u>>8&255,255&u,h>>24&255,h>>16&255,h>>8&255,255&h,d,p,0,0,0]),_=function(t){if(!s.isNodeJS)return o(t);try{let e;e=parseInt(process.versions.node)>=8?t:Buffer.from(t);const n=__webpack_require__(1).deflateSync(e,{level:9});return n instanceof Uint8Array?n:new Uint8Array(n)}catch(e){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+e)}return o(t)}(g),w=new Uint8Array(t.length+36+b.length+_.length);let A=0;return w.set(t,A),A+=t.length,i("IHDR",b,w,A),A+=12+b.length,i("IDATA",_,w,A),A+=12+_.length,i("IEND",new Uint8Array(0),w,A),(0,r.createObjectURL)(w,"image/png",l)}(n,void 0===n.kind?r.ImageKind.GRAYSCALE_1BPP:n.kind,a,l)}}();class f{constructor(){this.fontSizeScale=1,this.fontWeight=t.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=t.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(t,e){this.x=t,this.y=e}}function l(t){if(Number.isInteger(t))return t.toString();const e=t.toFixed(10);let n=e.length-1;if("0"!==e[n])return e;do{n--}while("0"===e[n]);return e.substring(0,"."===e[n]?n:n+1)}function c(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":`scale(${l(t[0])} ${l(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2])return`rotate(${l(180*Math.acos(t[0])/Math.PI)})`}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${l(t[4])} ${l(t[5])})`;return`matrix(${l(t[0])} ${l(t[1])} ${l(t[2])} ${l(t[3])} ${l(t[4])} `+`${l(t[5])})`}let m=0,g=0,v=0;n.SVGGraphics=a=class{constructor(t,e,n=!1){this.svgFactory=new o.DOMSVGFactory,this.current=new f,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!n,this._operatorIdMapping=[];for(const i in r.OPS)this._operatorIdMapping[r.OPS[i]]=i}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const e=t.fnArray,n=t.argsArray;for(let i=0,o=e.length;i<o;i++)if(e[i]===r.OPS.dependency)for(const t of n[i]){const e=t.startsWith("g_")?this.commonObjs:this.objs,n=new Promise(n=>{e.get(t,n)});this.current.dependencies.push(n)}return Promise.all(this.current.dependencies)}transform(t,e,n,i,o,s){this.transformMatrix=r.Util.transform(this.transformMatrix,[t,e,n,i,o,s]),this.tgrp=null}getSVG(t,e){this.viewport=e;const n=this._initialize(e);return this.loadDependencies(t).then(()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),n))}convertOpList(t){const e=this._operatorIdMapping,n=t.argsArray,i=t.fnArray,r=[];for(let o=0,s=i.length;o<s;o++){const t=i[o];r.push({fnId:t,fn:e[t],args:n[o]})}return function(t){let e=[];const n=[];for(const i of t)"save"!==i.fn?"restore"===i.fn?e=n.pop():e.push(i):(e.push({fnId:92,fn:"group",items:[]}),n.push(e),e=e[e.length-1].items);return e}(r)}executeOpTree(t){for(const e of t){const t=e.fn,n=e.args;switch(0|e.fnId){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(n);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(n[0],n[1]);break;case r.OPS.setFont:this.setFont(n);break;case r.OPS.showText:case r.OPS.showSpacedText:this.showText(n[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(n[0],n[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(n[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(n[0]);break;case r.OPS.setHScale:this.setHScale(n[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(n[0],n[1],n[2],n[3],n[4],n[5]);break;case r.OPS.setTextRise:this.setTextRise(n[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(n[0]);break;case r.OPS.setLineWidth:this.setLineWidth(n[0]);break;case r.OPS.setLineJoin:this.setLineJoin(n[0]);break;case r.OPS.setLineCap:this.setLineCap(n[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(n[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(n[0],n[1],n[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(n[0],n[1],n[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(n);break;case r.OPS.setFillColorN:this.setFillColorN(n);break;case r.OPS.shadingFill:this.shadingFill(n[0]);break;case r.OPS.setDash:this.setDash(n[0],n[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(n[0]);break;case r.OPS.setFlatness:this.setFlatness(n[0]);break;case r.OPS.setGState:this.setGState(n[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(n[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(n[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(n[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(n[0],n[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(n[0],n[1],n[2],n[3],n[4],n[5]);break;case r.OPS.constructPath:this.constructPath(n[0],n[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,r.warn)(`Unimplemented operator ${t}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,n,i,r,o){const s=this.current;s.textMatrix=s.lineMatrix=[t,e,n,i,r,o],s.textMatrixScale=Math.sqrt(t*t+e*e),s.x=s.lineX=0,s.y=s.lineY=0,s.xcoords=[],s.ycoords=[],s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${l(s.fontSize)}px`),s.tspan.setAttributeNS(null,"y",l(-s.y)),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtElement.appendChild(s.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=r.IDENTITY_MATRIX,t.lineMatrix=r.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,e){const n=this.current;n.x=n.lineX+=t,n.y=n.lineY+=e,n.xcoords=[],n.ycoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${l(n.fontSize)}px`),n.tspan.setAttributeNS(null,"y",l(-n.y))}showText(e){const n=this.current,o=n.font,s=n.fontSize;if(0===s)return;const a=n.fontSizeScale,u=n.charSpacing,h=n.wordSpacing,d=n.fontDirection,p=n.textHScale*d,f=o.vertical,m=f?1:-1,g=o.defaultVMetrics,v=s*n.fontMatrix[0];let y=0;for(const t of e){if(null===t){y+=d*h;continue}if((0,r.isNum)(t)){y+=m*t*s/1e3;continue}const e=(t.isSpace?h:0)+u,i=t.fontChar;let l,c,p,b=t.width;if(f){let e;const n=t.vmetric||g;e=t.vmetric?n[1]:.5*b,e=-e*v,b=n?-n[0]:b,l=e/a,c=(y+n[2]*v)/a}else l=y/a,c=0;(t.isInFont||o.missingFile)&&(n.xcoords.push(n.x+l),f&&n.ycoords.push(-n.y+c),n.tspan.textContent+=i),p=f?b*v-e*d:b*v+e*d,y+=p}n.tspan.setAttributeNS(null,"x",n.xcoords.map(l).join(" ")),n.tspan.setAttributeNS(null,"y",f?n.ycoords.map(l).join(" "):l(-n.y)),f?n.y-=y:n.x+=y*p,n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${l(n.fontSize)}px`),n.fontStyle!==t.fontStyle&&n.tspan.setAttributeNS(null,"font-style",n.fontStyle),n.fontWeight!==t.fontWeight&&n.tspan.setAttributeNS(null,"font-weight",n.fontWeight);const b=n.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;b===r.TextRenderingMode.FILL||b===r.TextRenderingMode.FILL_STROKE?(n.fillColor!==t.fillColor&&n.tspan.setAttributeNS(null,"fill",n.fillColor),n.fillAlpha<1&&n.tspan.setAttributeNS(null,"fill-opacity",n.fillAlpha)):n.tspan.setAttributeNS(null,"fill",n.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(b===r.TextRenderingMode.STROKE||b===r.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(n.tspan,1/(n.textMatrixScale||1));let _=n.textMatrix;0!==n.textRise&&(_=_.slice(),_[5]+=n.textRise),n.txtElement.setAttributeNS(null,"transform",`${c(_)} scale(${l(p)}, -1)`),n.txtElement.setAttributeNS(i,"xml:space","preserve"),n.txtElement.appendChild(n.tspan),n.txtgrp.appendChild(n.txtElement),this._ensureTransformGroup().appendChild(n.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const e=(0,r.createObjectURL)(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}";`+` src: url(${e}); }\n`}setFont(t){const e=this.current,n=this.commonObjs.get(t[0]);let i=t[1];e.font=n,!this.embedFonts||n.missingFile||this.embeddedFonts[n.loadedName]||(this.addFontStyle(n),this.embeddedFonts[n.loadedName]=n),e.fontMatrix=n.fontMatrix?n.fontMatrix:r.FONT_IDENTITY_MATRIX;let o="normal";n.black?o="900":n.bold&&(o="bold");const s=n.italic?"italic":"normal";i<0?(i=-i,e.fontDirection=-1):e.fontDirection=1,e.fontSize=i,e.fontFamily=n.loadedName,e.fontWeight=o,e.fontStyle=s,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",l(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){const t=this.current;t.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&t.txtElement&&t.txtElement.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=h[t]}setLineJoin(t){this.current.lineJoin=d[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,e,n){this.current.strokeColor=r.Util.makeCssRgb(t,e,n)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,e,n){this.current.fillColor=r.Util.makeCssRgb(t,e,n),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const e=this.viewport.width,n=this.viewport.height,i=r.Util.inverseTransform(this.transformMatrix),o=r.Util.applyTransform([0,0],i),s=r.Util.applyTransform([0,n],i),a=r.Util.applyTransform([e,0],i),l=r.Util.applyTransform([e,n],i),c=Math.min(o[0],s[0],a[0],l[0]),u=Math.min(o[1],s[1],a[1],l[1]),h=Math.max(o[0],s[0],a[0],l[0]),d=Math.max(o[1],s[1],a[1],l[1]),p=this.svgFactory.createElement("svg:rect");p.setAttributeNS(null,"x",c),p.setAttributeNS(null,"y",u),p.setAttributeNS(null,"width",h-c),p.setAttributeNS(null,"height",d-u),p.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&p.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(p)}_makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const e=t[1],n=t[2],i=t[3]||r.IDENTITY_MATRIX,[o,s,a,l]=t[4],c=t[5],u=t[6],h=t[7],d=`shading${v++}`,[p,f]=r.Util.applyTransform([o,s],i),[m,g]=r.Util.applyTransform([a,l],i),[y,b]=r.Util.singularValueDecompose2dScale(i),_=c*y,w=u*b,A=this.svgFactory.createElement("svg:pattern");A.setAttributeNS(null,"id",d),A.setAttributeNS(null,"patternUnits","userSpaceOnUse"),A.setAttributeNS(null,"width",_),A.setAttributeNS(null,"height",w),A.setAttributeNS(null,"x",`${p}`),A.setAttributeNS(null,"y",`${f}`);const x=this.svg,C=this.transformMatrix,E=this.current.fillColor,S=this.current.strokeColor,M=this.svgFactory.create(m-p,g-f);if(this.svg=M,this.transformMatrix=i,2===h){const t=r.Util.makeCssRgb(...e);this.current.fillColor=t,this.current.strokeColor=t}return this.executeOpTree(this.convertOpList(n)),this.svg=x,this.transformMatrix=C,this.current.fillColor=E,this.current.strokeColor=S,A.appendChild(M.childNodes[0]),this.defs.appendChild(A),`url(#${d})`}_makeShadingPattern(t){switch(t[0]){case"RadialAxial":const e=`shading${v++}`,n=t[3];let i;switch(t[1]){case"axial":const n=t[4],r=t[5];i=this.svgFactory.createElement("svg:linearGradient"),i.setAttributeNS(null,"id",e),i.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),i.setAttributeNS(null,"x1",n[0]),i.setAttributeNS(null,"y1",n[1]),i.setAttributeNS(null,"x2",r[0]),i.setAttributeNS(null,"y2",r[1]);break;case"radial":const o=t[4],s=t[5],a=t[6],l=t[7];i=this.svgFactory.createElement("svg:radialGradient"),i.setAttributeNS(null,"id",e),i.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),i.setAttributeNS(null,"cx",s[0]),i.setAttributeNS(null,"cy",s[1]),i.setAttributeNS(null,"r",l),i.setAttributeNS(null,"fx",o[0]),i.setAttributeNS(null,"fy",o[1]),i.setAttributeNS(null,"fr",a);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const t of n){const e=this.svgFactory.createElement("svg:stop");e.setAttributeNS(null,"offset",t[0]),e.setAttributeNS(null,"stop-color",t[1]),i.appendChild(e)}return this.defs.appendChild(i),`url(#${e})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,e){this.current.dashArray=t,this.current.dashPhase=e}constructPath(t,e){const n=this.current;let i=n.x,o=n.y,s=[],a=0;for(const c of t)switch(0|c){case r.OPS.rectangle:i=e[a++],o=e[a++];const t=i+e[a++],n=o+e[a++];s.push("M",l(i),l(o),"L",l(t),l(o),"L",l(t),l(n),"L",l(i),l(n),"Z");break;case r.OPS.moveTo:i=e[a++],o=e[a++],s.push("M",l(i),l(o));break;case r.OPS.lineTo:i=e[a++],o=e[a++],s.push("L",l(i),l(o));break;case r.OPS.curveTo:i=e[a+4],o=e[a+5],s.push("C",l(e[a]),l(e[a+1]),l(e[a+2]),l(e[a+3]),l(i),l(o)),a+=6;break;case r.OPS.curveTo2:s.push("C",l(i),l(o),l(e[a]),l(e[a+1]),l(e[a+2]),l(e[a+3])),i=e[a+2],o=e[a+3],a+=4;break;case r.OPS.curveTo3:i=e[a+2],o=e[a+3],s.push("C",l(e[a]),l(e[a+1]),l(i),l(o),l(i),l(o)),a+=4;break;case r.OPS.closePath:s.push("Z")}s=s.join(" "),n.path&&t.length>0&&t[0]!==r.OPS.rectangle&&t[0]!==r.OPS.moveTo?s=n.path.getAttributeNS(null,"d")+s:(n.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(n.path)),n.path.setAttributeNS(null,"d",s),n.path.setAttributeNS(null,"fill","none"),n.element=n.path,n.setCurrentPoint(i,o)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element)return void(this.pendingClip=null);const e=`clippath${m++}`,n=this.svgFactory.createElement("svg:clipPath");n.setAttributeNS(null,"id",e),n.setAttributeNS(null,"transform",c(this.transformMatrix));const i=t.element.cloneNode(!0);i.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,n.appendChild(i),this.defs.appendChild(n),t.activeClipUrl&&(t.clipGroup=null,this.extraStack.forEach((function(t){t.clipGroup=null})),n.setAttributeNS(null,"clip-path",t.activeClipUrl)),t.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n);break;case"CA":this.setStrokeAlpha(n);break;case"ca":this.setFillAlpha(n);break;default:(0,r.warn)(`Unimplemented graphic state operator ${e}`)}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,e=1){const n=this.current;let i=n.dashArray;1!==e&&i.length>0&&(i=i.map((function(t){return e*t}))),t.setAttributeNS(null,"stroke",n.strokeColor),t.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",l(n.miterLimit)),t.setAttributeNS(null,"stroke-linecap",n.lineCap),t.setAttributeNS(null,"stroke-linejoin",n.lineJoin),t.setAttributeNS(null,"stroke-width",l(e*n.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",i.map(l).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",l(e*n.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(t)}paintImageXObject(t){const e=this.objs.get(t);e?this.paintInlineImageXObject(e):(0,r.warn)(`Dependent image with object ID ${t} is not ready yet`)}paintInlineImageXObject(t,e){const n=t.width,i=t.height,r=p(t,this.forceDataSchema,!!e),o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width",l(n)),o.setAttributeNS(null,"height",l(i)),this.current.element=o,this.clip("nonzero");const s=this.svgFactory.createElement("svg:image");s.setAttributeNS(u,"xlink:href",r),s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y",l(-i)),s.setAttributeNS(null,"width",l(n)+"px"),s.setAttributeNS(null,"height",l(i)+"px"),s.setAttributeNS(null,"transform",`scale(${l(1/n)} ${l(-1/i)})`),e?e.appendChild(s):this._ensureTransformGroup().appendChild(s)}paintImageMaskXObject(t){const e=this.current,n=t.width,i=t.height,r=e.fillColor;e.maskId=`mask${g++}`;const o=this.svgFactory.createElement("svg:mask");o.setAttributeNS(null,"id",e.maskId);const s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width",l(n)),s.setAttributeNS(null,"height",l(i)),s.setAttributeNS(null,"fill",r),s.setAttributeNS(null,"mask",`url(#${e.maskId})`),this.defs.appendChild(o),this._ensureTransformGroup().appendChild(s),this.paintInlineImageXObject(t,o)}paintFormXObjectBegin(t,e){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e){const t=e[2]-e[0],n=e[3]-e[1],i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x",e[0]),i.setAttributeNS(null,"y",e[1]),i.setAttributeNS(null,"width",l(t)),i.setAttributeNS(null,"height",l(n)),this.current.element=i,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const e=this.svgFactory.create(t.width,t.height),n=this.svgFactory.createElement("svg:defs");e.appendChild(n),this.defs=n;const i=this.svgFactory.createElement("svg:g");return i.setAttributeNS(null,"transform",c(t.transform)),e.appendChild(i),this.svg=i,e}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",c(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var i=n(2),r=n(20);const o=__webpack_require__(2),s=__webpack_require__(3),a=__webpack_require__(4),l=__webpack_require__(5),c=/^file:\/\/\/[a-zA-Z]:\//;e.PDFNodeStream=class{constructor(t){this.source=t,this.url=function(t){const e=l.parse(t);return"file:"===e.protocol||e.host?e:/^[a-z]:[/\\]/i.test(t)?l.parse(`file:///${t}`):(e.host||(e.protocol="file:"),e)}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new m(this):new p(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new g(this,t,e):new f(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeRequestReaders.slice(0).forEach((function(e){e.cancel(t)}))}};class u{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._headersCapability=(0,i.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=(0,i.createPromiseCapability)(),this.read()):(this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class h{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!t.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=(0,i.createPromiseCapability)(),this.read()):(this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function d(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}class p extends u{constructor(t){super(t);const e=e=>{if(404===e.statusCode){const t=new i.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=t,void this._headersCapability.reject(t)}this._headersCapability.resolve(),this._setReadableStream(e);const n=t=>this._readableStream.headers[t.toLowerCase()],{allowRangeRequests:o,suggestedLength:s}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=s||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(n)};this._request=null,this._request="http:"===this._url.protocol?s.request(d(this._url,t.httpHeaders),e):a.request(d(this._url,t.httpHeaders),e),this._request.on("error",t=>{this._storedError=t,this._headersCapability.reject(t)}),this._request.end()}}class f extends h{constructor(t,e,n){super(t),this._httpHeaders={};for(const i in t.httpHeaders){const e=t.httpHeaders[i];void 0!==e&&(this._httpHeaders[i]=e)}this._httpHeaders.Range=`bytes=${e}-${n-1}`;const r=t=>{if(404!==t.statusCode)this._setReadableStream(t);else{const t=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=t}};this._request=null,this._request="http:"===this._url.protocol?s.request(d(this._url,this._httpHeaders),r):a.request(d(this._url,this._httpHeaders),r),this._request.on("error",t=>{this._storedError=t}),this._request.end()}}class m extends u{constructor(t){super(t);let e=decodeURIComponent(this._url.path);c.test(this._url.href)&&(e=e.replace(/^\//,"")),o.lstat(e,(t,n)=>{if(t)return"ENOENT"===t.code&&(t=new i.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=t,void this._headersCapability.reject(t);this._contentLength=n.size,this._setReadableStream(o.createReadStream(e)),this._headersCapability.resolve()})}}class g extends h{constructor(t,e,n){super(t);let i=decodeURIComponent(this._url.path);c.test(this._url.href)&&(i=i.replace(/^\//,"")),this._setReadableStream(o.createReadStream(i,{start:e,end:n-1}))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=function(t,e){return 404===t||0===t&&e.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+e+'".'):new i.UnexpectedResponseException("Unexpected server response ("+t+') while retrieving PDF "'+e+'".',t)},e.extractFilenameFromHeader=function(t){const e=t("Content-Disposition");if(e){let t=(0,r.getFilenameFromContentDispositionHeader)(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch(n){}if(/\.pdf$/i.test(t))return t}return null},e.validateRangeRequestCapabilities=function({getResponseHeader:t,isHttp:e,rangeChunkSize:n,disableRange:r}){(0,i.assert)(n>0,"Range chunk size must be larger than zero");const o={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t("Content-Length"),10);return Number.isInteger(s)?(o.suggestedLength=s,s<=2*n||r||!e||"bytes"!==t("Accept-Ranges")||"identity"!==(t("Content-Encoding")||"identity")||(o.allowRangeRequests=!0),o):o},e.validateResponseStatus=function(t){return 200===t||206===t};var i=n(2),r=n(21)},function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getFilenameFromContentDispositionHeader=function(t){let n=!0,i=r("filename\\*","i").exec(t);if(i){i=i[1];let t=a(i);return t=unescape(t),t=l(t),t=c(t),s(t)}if(i=function(t){const e=[];let n;const i=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=i.exec(t));){let[,t,i,r]=n;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[i,r]}const o=[];for(let r=0;r<e.length&&r in e;++r){let[t,n]=e[r];n=a(n),t&&(n=unescape(n),0===r&&(n=l(n))),o.push(n)}return o.join("")}(t),i)return s(c(i));if(i=r("filename","i").exec(t),i){i=i[1];let t=a(i);return t=c(t),s(t)}function r(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function o(t,i){if(t){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const e=new TextDecoder(t,{fatal:!0}),r=Array.from(i,(function(t){return 255&t.charCodeAt(0)}));i=e.decode(new Uint8Array(r)),n=!1}catch(e){if(/^utf-?8$/i.test(t))try{i=decodeURIComponent(escape(i)),n=!1}catch(r){}}}return i}function s(t){return n&&/[\x80-\xff]/.test(t)&&(t=o("utf-8",t),n&&(t=o("iso-8859-1",t))),t}function a(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const n=e[t].indexOf('"');-1!==n&&(e[t]=e[t].slice(0,n),e.length=t+1),e[t]=e[t].replace(/\\(.)/g,"$1")}t=e.join('"')}return t}function l(t){const e=t.indexOf("'");return-1===e?t:o(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function c(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,n,i,r){if("q"===i||"Q"===i)return o(n,r=(r=r.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{r=atob(r)}catch(e){}return o(n,r)}))}return""}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var i=n(2),r=n(20);class o{constructor(t,e){this.url=t,e=e||{},this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this.withCredentials=e.withCredentials||!1,this.getXhr=e.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const i={begin:t,end:e};for(const r in n)i[r]=n[r];return this.request(i)}requestFull(t){return this.request(t)}request(t){const e=this.getXhr(),n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const r in this.httpHeaders){const t=this.httpHeaders[r];void 0!==t&&e.setRequestHeader(r,t)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=206):i.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(n){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){const n=this.pendingRequests[t];n&&n.onProgress&&n.onProgress(e)}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==r.readyState)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===r.status&&this.isHttp)return void(n.onError&&n.onError(r.status));const o=r.status||200;if((200!==o||206!==n.expectedStatus)&&o!==n.expectedStatus)return void(n.onError&&n.onError(r.status));const s=function(t){const e=t.response;return"string"!=typeof e?e:(0,i.stringToBytes)(e).buffer}(r);if(206===o){const t=r.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);n.onDone({begin:parseInt(e[1],10),chunk:s})}else s?n.onDone({begin:0,chunk:s}):n.onError&&n.onError(r.status)}hasPendingRequests(){for(const t in this.pendingRequests)return!0;return!1}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortAllRequests(){for(const t in this.pendingRequests)this.abortRequest(0|t)}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}e.PDFNetworkStream=class{constructor(t){this._source=t,this._manager=new o(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new s(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new a(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeRequestReaders.slice(0).forEach((function(e){e.cancel(t)}))}};class s{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=t=>e.getResponseHeader(t),{allowRangeRequests:i,suggestedLength:o}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,this._cachedChunks.length>0||(this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[])}_onError(t){const e=(0,r.createResponseStatusError)(t,this._url);this._storedError=e,this._headersReceivedCapability.reject(e),this._requests.forEach((function(t){t.reject(e)})),this._requests=[],this._cachedChunks=[]}_onProgress(t){this.onProgress&&this.onProgress({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=(0,i.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t),this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class a{constructor(t,e,n){this._manager=t;const i={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=t.requestRange(e,n,i),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}_close(){this.onClosed&&this.onClosed(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._close()}_onProgress(t){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=(0,i.createPromiseCapability)();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._requests.forEach((function(t){t.resolve({value:void 0,done:!0})})),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var i=n(2),r=n(20);function o(t,e,n){return{method:"GET",headers:t,signal:n&&n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function s(t){const e=new Headers;for(const n in t){const i=t[n];void 0!==i&&e.append(n,i)}return e}e.PDFFetchStream=class{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new a(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new l(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader&&this._fullRequestReader.cancel(t),this._rangeRequestReaders.slice(0).forEach((function(e){e.cancel(t)}))}};class a{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=s(this._stream.httpHeaders);const n=e.url;fetch(n,o(this._headers,this._withCredentials,this._abortController)).then(t=>{if(!(0,r.validateResponseStatus)(t.status))throw(0,r.createResponseStatusError)(t.status,n);this._reader=t.body.getReader(),this._headersCapability.resolve();const e=e=>t.headers.get(e),{allowRangeRequests:o,suggestedLength:s}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=s||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(e),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}class l{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!a.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=s(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${n-1}`);const l=a.url;fetch(l,o(this._headers,this._withCredentials,this._abortController)).then(t=>{if(!(0,r.validateResponseStatus)(t.status))throw(0,r.createResponseStatusError)(t.status,l);this._readCapability.resolve(),this._reader=t.body.getReader()}),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._reader&&this._reader.cancel(t),this._abortController&&this._abortController.abort()}}}])},module.exports=factory()},louq:function(t,n,i){var r;r=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,(function(e){return t[e]}).bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return i.AnnotationLayerBuilder}}),Object.defineProperty(e,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return i.DefaultAnnotationLayerFactory}}),Object.defineProperty(e,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return r.DefaultTextLayerFactory}}),Object.defineProperty(e,"TextLayerBuilder",{enumerable:!0,get:function(){return r.TextLayerBuilder}}),Object.defineProperty(e,"EventBus",{enumerable:!0,get:function(){return o.EventBus}}),Object.defineProperty(e,"NullL10n",{enumerable:!0,get:function(){return o.NullL10n}}),Object.defineProperty(e,"ProgressBar",{enumerable:!0,get:function(){return o.ProgressBar}}),Object.defineProperty(e,"PDFLinkService",{enumerable:!0,get:function(){return s.PDFLinkService}}),Object.defineProperty(e,"SimpleLinkService",{enumerable:!0,get:function(){return s.SimpleLinkService}}),Object.defineProperty(e,"DownloadManager",{enumerable:!0,get:function(){return a.DownloadManager}}),Object.defineProperty(e,"GenericL10n",{enumerable:!0,get:function(){return l.GenericL10n}}),Object.defineProperty(e,"PDFFindController",{enumerable:!0,get:function(){return c.PDFFindController}}),Object.defineProperty(e,"PDFHistory",{enumerable:!0,get:function(){return u.PDFHistory}}),Object.defineProperty(e,"PDFPageView",{enumerable:!0,get:function(){return h.PDFPageView}}),Object.defineProperty(e,"PDFSinglePageViewer",{enumerable:!0,get:function(){return d.PDFSinglePageViewer}}),Object.defineProperty(e,"PDFViewer",{enumerable:!0,get:function(){return p.PDFViewer}});var i=n(1),r=n(5),o=n(3),s=n(4),a=n(6),l=n(8),c=n(10),u=n(12),h=n(13),d=n(15),p=n(17)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultAnnotationLayerFactory=e.AnnotationLayerBuilder=void 0;var i=n(2),r=n(3),o=n(4);class s{constructor({pageDiv:t,pdfPage:e,linkService:n,downloadManager:i,imageResourcesPath:o="",renderInteractiveForms:s=!1,l10n:a=r.NullL10n}){this.pageDiv=t,this.pdfPage=e,this.linkService=n,this.downloadManager=i,this.imageResourcesPath=o,this.renderInteractiveForms=s,this.l10n=a,this.div=null,this._cancelled=!1}render(t,e="display"){this.pdfPage.getAnnotations({intent:e}).then(e=>{if(this._cancelled)return;const n={viewport:t.clone({dontFlip:!0}),div:this.div,annotations:e,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderInteractiveForms:this.renderInteractiveForms,linkService:this.linkService,downloadManager:this.downloadManager};if(this.div)i.AnnotationLayer.update(n);else{if(0===e.length)return;this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.appendChild(this.div),n.div=this.div,i.AnnotationLayer.render(n),this.l10n.translate(this.div)}})}cancel(){this._cancelled=!0}hide(){this.div&&this.div.setAttribute("hidden","true")}}e.AnnotationLayerBuilder=s,e.DefaultAnnotationLayerFactory=class{createAnnotationLayerBuilder(t,e,n="",i=!1,a=r.NullL10n){return new s({pageDiv:t,pdfPage:e,imageResourcesPath:n,renderInteractiveForms:i,linkService:new o.SimpleLinkService,l10n:a})}}},function(t,e,n){"use strict";let r;r="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:i("lRFz"),t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isValidRotation=function(t){return Number.isInteger(t)&&t%90==0},e.isValidScrollMode=function(t){return Number.isInteger(t)&&Object.values(i).includes(t)&&t!==i.UNKNOWN},e.isValidSpreadMode=function(t){return Number.isInteger(t)&&Object.values(r).includes(t)&&t!==r.UNKNOWN},e.isPortraitOrientation=function(t){return t.width<=t.height},e.clamp=u,e.getPDFFileNameFromURL=function(t,e="document.pdf"){if("string"!=typeof t)return e;if(function(t){let e=0;const n=t.length;for(;e<n&&""===t[e].trim();)e++;return"data:"===t.substring(e,e+5).toLowerCase()}(t))return console.warn('getPDFFileNameFromURL: ignoring "data:" URL for performance reasons.'),e;const n=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=/^(?:(?:[^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let r=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch(o){}return r||e},e.noContextMenuHandler=function(t){t.preventDefault()},e.parseQueryString=function(t){const e=t.split("&"),n=Object.create(null);for(let i=0,r=e.length;i<r;++i){const t=e[i].split("="),r=t[0].toLowerCase(),o=t.length>1?t[1]:null;n[decodeURIComponent(r)]=decodeURIComponent(o)}return n},e.backtrackBeforeAllVisibleElements=s,e.getVisibleElements=function(t,e,n=!1,i=!1){const r=t.scrollTop,a=r+t.clientHeight,l=t.scrollLeft,c=l+t.clientWidth,u=[],h=e.length;let d=0===h?0:o(e,i?function(t){const e=t.div;return e.offsetLeft+e.clientLeft+e.clientWidth>l}:function(t){const e=t.div;return e.offsetTop+e.clientTop+e.clientHeight>r});d>0&&d<h&&!i&&(d=s(d,e,r));let p=i?c:-1;for(let o=d;o<h;o++){const t=e[o],n=t.div,s=n.offsetLeft+n.clientLeft,h=n.offsetTop+n.clientTop,d=n.clientWidth,f=n.clientHeight,m=s+d,g=h+f;if(-1===p)g>=a&&(p=g);else if((i?s:h)>p)break;if(g<=r||h>=a||m<=l||s>=c)continue;const v=Math.max(0,r-h)+Math.max(0,g-a),y=Math.max(0,l-s)+Math.max(0,m-c);u.push({id:t.id,x:s,y:h,view:t,percent:(f-v)*(d-y)*100/f/d|0})}const f=u[0],m=u[u.length-1];return n&&u.sort((function(t,e){const n=t.percent-e.percent;return Math.abs(n)>.001?-n:t.id-e.id})),{first:f,last:m,views:u}},e.roundToDivide=function(t,e){const n=t%e;return 0===n?t:Math.round(t-n+e)},e.getPageSizeInches=function({view:t,userUnit:e,rotate:n}){const[i,r,o,s]=t,a=n%180!=0,l=(o-i)/72*e,c=(s-r)/72*e;return{width:a?c:l,height:a?l:c}},e.approximateFraction=function(t){if(Math.floor(t)===t)return[t,1];const e=1/t;if(e>8)return[1,8];if(Math.floor(e)===e)return[1,e];const n=t>1?e:t;let i,r=0,o=1,s=1,a=1;for(;;){const t=r+s,e=o+a;if(e>8)break;n<=t/e?(s=t,a=e):(r=t,o=e)}return i=n-r/o<s/a-n?n===t?[r,o]:[o,r]:n===t?[s,a]:[a,s],i},e.getOutputScale=function(t){const e=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1);return{sx:e,sy:e,scaled:1!==e}},e.scrollIntoView=function(t,e,n=!1){let i=t.offsetParent;if(!i)return void console.error("offsetParent is not set -- cannot scroll");let r=t.offsetTop+t.clientTop,o=t.offsetLeft+t.clientLeft;for(;i.clientHeight===i.scrollHeight&&i.clientWidth===i.scrollWidth||n&&"hidden"===getComputedStyle(i).overflow;)if(i.dataset._scaleY&&(r/=i.dataset._scaleY,o/=i.dataset._scaleX),r+=i.offsetTop,o+=i.offsetLeft,i=i.offsetParent,!i)return;e&&(void 0!==e.top&&(r+=e.top),void 0!==e.left&&(o+=e.left,i.scrollLeft=o)),i.scrollTop=r},e.watchScroll=function(t,e){const n=function(n){r||(r=window.requestAnimationFrame((function(){r=null;const n=t.scrollLeft,o=i.lastX;n!==o&&(i.right=n>o),i.lastX=n;const s=t.scrollTop,a=i.lastY;s!==a&&(i.down=s>a),i.lastY=s,e(i)})))},i={right:!0,down:!0,lastX:t.scrollLeft,lastY:t.scrollTop,_eventHandler:n};let r=null;return t.addEventListener("scroll",n,!0),i},e.binarySearchFirstItem=o,e.normalizeWheelEventDelta=function(t){let e=Math.sqrt(t.deltaX*t.deltaX+t.deltaY*t.deltaY);const n=Math.atan2(t.deltaY,t.deltaX);return-.25*Math.PI<n&&n<.75*Math.PI&&(e=-e),0===t.deltaMode?e/=900:1===t.deltaMode&&(e/=30),e},e.waitOnEventOrTimeout=function({target:t,name:e,delay:n=0}){return new Promise((function(i,r){if("object"!=typeof t||!e||"string"!=typeof e||!(Number.isInteger(n)&&n>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function o(n){t instanceof c?t._off(e,s):t.removeEventListener(e,s),u&&clearTimeout(u),i(n)}const s=o.bind(null,a.EVENT);t instanceof c?t._on(e,s):t.addEventListener(e,s);const l=o.bind(null,a.TIMEOUT),u=setTimeout(l,n)}))},e.moveToEndOfArray=function(t,e){const n=[],i=t.length;let r=0;for(let o=0;o<i;++o)e(t[o])?n.push(t[o]):(t[r]=t[o],++r);for(let o=0;r<i;++o,++r)t[r]=n[o]},e.WaitOnType=e.animationStarted=e.ProgressBar=e.EventBus=e.NullL10n=e.SpreadMode=e.ScrollMode=e.TextLayerMode=e.RendererType=e.PresentationModeState=e.VERTICAL_PADDING=e.SCROLLBAR_PADDING=e.MAX_AUTO_SCALE=e.UNKNOWN_SCALE=e.MAX_SCALE=e.MIN_SCALE=e.DEFAULT_SCALE=e.DEFAULT_SCALE_VALUE=e.CSS_UNITS=e.AutoPrintRegExp=void 0,e.CSS_UNITS=96/72,e.DEFAULT_SCALE_VALUE="auto",e.DEFAULT_SCALE=1,e.MIN_SCALE=.1,e.MAX_SCALE=10,e.UNKNOWN_SCALE=0,e.MAX_AUTO_SCALE=1.25,e.SCROLLBAR_PADDING=40,e.VERTICAL_PADDING=5,e.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},e.RendererType={CANVAS:"canvas",SVG:"svg"},e.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const i={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2};e.ScrollMode=i;const r={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};function o(t,e){let n=0,i=t.length-1;if(i<0||!e(t[i]))return t.length;if(e(t[n]))return n;for(;n<i;){const r=n+i>>1;e(t[r])?i=r:n=r+1}return n}function s(t,e,n){if(t<2)return t;let i=e[t].div,r=i.offsetTop+i.clientTop;r>=n&&(i=e[t-1].div,r=i.offsetTop+i.clientTop);for(let o=t-2;o>=0&&(i=e[o].div,!(i.offsetTop+i.clientTop+i.clientHeight<=r));--o)t=o;return t}e.SpreadMode=r,e.AutoPrintRegExp=/\bprint\s*\(/,e.NullL10n={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",get:async(t,e,n)=>function(t,e){return e?t.replace(/\{\{\s*(\w+)\s*\}\}/g,(t,n)=>n in e?e[n]:"{{"+n+"}}"):t}(n,e),async translate(t){}};const a={EVENT:"event",TIMEOUT:"timeout"};e.WaitOnType=a;const l=new Promise((function(t){window.requestAnimationFrame(t)}));e.animationStarted=l;class c{constructor(t){this._listeners=Object.create(null)}on(t,e){this._on(t,e,{external:!0})}off(t,e){this._off(t,e,{external:!0})}dispatch(t){const e=this._listeners[t];if(!e||0===e.length)return;const n=Array.prototype.slice.call(arguments,1);let i;e.slice(0).forEach((function({listener:t,external:e}){if(e)return i||(i=[]),void i.push(t);t.apply(null,n)})),i&&(i.forEach((function(t){t.apply(null,n)})),i=null)}_on(t,e,n=null){let i=this._listeners[t];i||(this._listeners[t]=i=[]),i.push({listener:e,external:!0===(n&&n.external)})}_off(t,e,n=null){const i=this._listeners[t];if(i)for(let r=0,o=i.length;r<o;r++)if(i[r].listener===e)return void i.splice(r,1)}}function u(t,e,n){return Math.min(Math.max(t,e),n)}e.EventBus=c,e.ProgressBar=class{constructor(t,{height:e,width:n,units:i}={}){this.visible=!0,this.div=document.querySelector(t+" .progress"),this.bar=this.div.parentNode,this.height=e||100,this.width=n||100,this.units=i||"%",this.div.style.height=this.height+this.units,this.percent=0}_updateBar(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate"),this.div.style.width=this.width*this._percent/100+this.units}get percent(){return this._percent}set percent(t){this._indeterminate=isNaN(t),this._percent=u(t,0,100),this._updateBar()}setWidth(t){if(!t)return;const e=t.parentNode.offsetWidth-t.offsetWidth;e>0&&(this.bar.style.width=`calc(100% - ${e}px)`)}hide(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"),document.body.classList.remove("loadingInProgress"))}show(){this.visible||(this.visible=!0,document.body.classList.add("loadingInProgress"),this.bar.classList.remove("hidden"))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleLinkService=e.PDFLinkService=void 0;var i=n(3);e.PDFLinkService=class{constructor({eventBus:t,externalLinkTarget:e=null,externalLinkRel:n=null,externalLinkEnabled:i=!0,ignoreDestinationZoom:r=!1}={}){this.eventBus=t,this.externalLinkTarget=e,this.externalLinkRel=n,this.externalLinkEnabled=i,this._ignoreDestinationZoom=r,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}setDocument(t,e=null){this.baseUrl=e,this.pdfDocument=t,this._pagesRefCache=Object.create(null)}setViewer(t){this.pdfViewer=t}setHistory(t){this.pdfHistory=t}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(t){this.pdfViewer.currentPageNumber=t}get rotation(){return this.pdfViewer.pagesRotation}set rotation(t){this.pdfViewer.pagesRotation=t}navigateTo(t){const e=({namedDest:n,explicitDest:i})=>{const r=i[0];let o;if(r instanceof Object){if(o=this._cachedPageNumber(r),null===o)return void this.pdfDocument.getPageIndex(r).then(t=>{this.cachePageRef(t+1,r),e({namedDest:n,explicitDest:i})}).catch(()=>{console.error(`PDFLinkService.navigateTo: "${r}" is not `+`a valid page reference, for dest="${t}".`)})}else{if(!Number.isInteger(r))return void console.error(`PDFLinkService.navigateTo: "${r}" is not `+`a valid destination reference, for dest="${t}".`);o=r+1}!o||o<1||o>this.pagesCount?console.error(`PDFLinkService.navigateTo: "${o}" is not `+`a valid page number, for dest="${t}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:n,explicitDest:i,pageNumber:o})),this.pdfViewer.scrollPageIntoView({pageNumber:o,destArray:i,ignoreDestinationZoom:this._ignoreDestinationZoom}))};new Promise((e,n)=>{"string"!=typeof t?e({namedDest:"",explicitDest:t}):this.pdfDocument.getDestination(t).then(n=>{e({namedDest:t,explicitDest:n})})}).then(n=>{Array.isArray(n.explicitDest)?e(n):console.error(`PDFLinkService.navigateTo: "${n.explicitDest}" is`+` not a valid destination array, for dest="${t}".`)})}getDestinationHash(t){if("string"==typeof t)return this.getAnchorUrl("#"+escape(t));if(Array.isArray(t)){const e=JSON.stringify(t);return this.getAnchorUrl("#"+escape(e))}return this.getAnchorUrl("")}getAnchorUrl(t){return(this.baseUrl||"")+t}setHash(t){let e,n;if(t.includes("=")){const r=(0,i.parseQueryString)(t);if("search"in r&&this.eventBus.dispatch("findfromurlhash",{source:this,query:r.search.replace(/"/g,""),phraseSearch:"true"===r.phrase}),"page"in r&&(e=0|r.page||1),"zoom"in r){const t=r.zoom.split(","),e=t[0],i=parseFloat(e);e.includes("Fit")?"Fit"===e||"FitB"===e?n=[null,{name:e}]:"FitH"===e||"FitBH"===e||"FitV"===e||"FitBV"===e?n=[null,{name:e},t.length>1?0|t[1]:null]:"FitR"===e?5!==t.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):n=[null,{name:e},0|t[1],0|t[2],0|t[3],0|t[4]]:console.error(`PDFLinkService.setHash: "${e}" is not `+"a valid zoom value."):n=[null,{name:"XYZ"},t.length>1?0|t[1]:null,t.length>2?0|t[2]:null,i?i/100:e]}n?this.pdfViewer.scrollPageIntoView({pageNumber:e||this.page,destArray:n,allowNegativeOffset:!0}):e&&(this.page=e),"pagemode"in r&&this.eventBus.dispatch("pagemode",{source:this,mode:r.pagemode}),"nameddest"in r&&this.navigateTo(r.nameddest)}else{n=unescape(t);try{n=JSON.parse(n),Array.isArray(n)||(n=n.toString())}catch(r){}if("string"==typeof n||function(t){if(!Array.isArray(t))return!1;const e=t.length;if(e<2)return!1;const n=t[0];if(!("object"==typeof n&&Number.isInteger(n.num)&&Number.isInteger(n.gen)||Number.isInteger(n)&&n>=0))return!1;const i=t[1];if("object"!=typeof i||"string"!=typeof i.name)return!1;let r=!0;switch(i.name){case"XYZ":if(5!==e)return!1;break;case"Fit":case"FitB":return 2===e;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==e)return!1;break;case"FitR":if(6!==e)return!1;r=!1;break;default:return!1}for(let o=2;o<e;o++){const e=t[o];if(!("number"==typeof e||r&&null===e))return!1}return!0}(n))return void this.navigateTo(n);console.error(`PDFLinkService.setHash: "${unescape(t)}" is not `+"a valid destination.")}}executeNamedAction(t){switch(t){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page<this.pagesCount&&this.page++;break;case"PrevPage":this.page>1&&this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:t})}cachePageRef(t,e){e&&(this._pagesRefCache[0===e.gen?`${e.num}R`:`${e.num}R${e.gen}`]=t)}_cachedPageNumber(t){return this._pagesRefCache&&this._pagesRefCache[0===t.gen?`${t.num}R`:`${t.num}R${t.gen}`]||null}isPageVisible(t){return this.pdfViewer.isPageVisible(t)}},e.SimpleLinkService=class{constructor(){this.externalLinkTarget=null,this.externalLinkRel=null,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=!1}get pagesCount(){return 0}get page(){return 0}set page(t){}get rotation(){return 0}set rotation(t){}navigateTo(t){}getDestinationHash(t){return"#"}getAnchorUrl(t){return"#"}setHash(t){}executeNamedAction(t){}cachePageRef(t,e){}isPageVisible(t){return!0}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultTextLayerFactory=e.TextLayerBuilder=void 0;var i=n(2);class r{constructor({textLayerDiv:t,eventBus:e,pageIndex:n,viewport:i,findController:r=null,enhanceTextSelection:o=!1}){this.textLayerDiv=t,this.eventBus=e,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageIdx=n,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=i,this.textDivs=[],this.findController=r,this.textLayerRenderTask=null,this.enhanceTextSelection=o,this._onUpdateTextLayerMatches=null,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const t=document.createElement("div");t.className="endOfContent",this.textLayerDiv.appendChild(t)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(t=0){if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs=[];const e=document.createDocumentFragment();this.textLayerRenderTask=(0,i.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:e,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:t,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.appendChild(e),this._finishRendering(),this._updateMatches()},(function(t){})),this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=t=>{t.pageIndex!==this.pageIdx&&-1!==t.pageIndex||this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches))}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null)}setTextContentStream(t){this.cancel(),this.textContentStream=t}setTextContent(t){this.cancel(),this.textContent=t}_convertMatches(t,e){if(!t)return[];const{findController:n,textContentItemsStr:i}=this;let r=0,o=0;const s=i.length-1,a=n.state.query.length,l=[];for(let c=0,u=t.length;c<u;c++){let n=t[c];for(;r!==s&&n>=o+i[r].length;)o+=i[r].length,r++;r===i.length&&console.error("Could not find a matching mapping");const u={begin:{divIdx:r,offset:n-o}};for(n+=e?e[c]:a;r!==s&&n>o+i[r].length;)o+=i[r].length,r++;u.end={divIdx:r,offset:n-o},l.push(u)}return l}_renderMatches(t){if(0===t.length)return;const{findController:e,pageIdx:n,textContentItemsStr:i,textDivs:r}=this,o=n===e.selected.pageIdx,s=e.selected.matchIdx;let a=null;function l(t,e){const n=t.divIdx;r[n].textContent="",c(n,0,t.offset,e)}function c(t,e,n,o){const s=r[t],a=i[t].substring(e,n),l=document.createTextNode(a);if(o){const t=document.createElement("span");return t.className=o,t.appendChild(l),void s.appendChild(t)}s.appendChild(l)}let u=s,h=u+1;if(e.state.highlightAll)u=0,h=t.length;else if(!o)return;for(let d=u;d<h;d++){const i=t[d],u=i.begin,h=i.end,p=o&&d===s,f=p?" selected":"";if(p&&e.scrollMatchIntoView({element:r[u.divIdx],pageIndex:n,matchIndex:s}),a&&u.divIdx===a.divIdx?c(a.divIdx,a.offset,u.offset):(null!==a&&c(a.divIdx,a.offset,void 0),l(u)),u.divIdx===h.divIdx)c(u.divIdx,u.offset,h.offset,"highlight"+f);else{c(u.divIdx,u.offset,void 0,"highlight begin"+f);for(let t=u.divIdx+1,e=h.divIdx;t<e;t++)r[t].className="highlight middle"+f;l(h,"highlight end"+f)}a=h}a&&c(a.divIdx,a.offset,void 0)}_updateMatches(){if(!this.renderingDone)return;const{findController:t,matches:e,pageIdx:n,textContentItemsStr:i,textDivs:r}=this;let o=-1;for(let s=0,a=e.length;s<a;s++){const t=e[s];for(let e=Math.max(o,t.begin.divIdx),n=t.end.divIdx;e<=n;e++){const t=r[e];t.textContent=i[e],t.className=""}o=t.end.divIdx+1}t&&t.highlightMatches&&(this.matches=this._convertMatches(t.pageMatches[n]||null,t.pageMatchesLength[n]||null),this._renderMatches(this.matches))}_bindMouse(){const t=this.textLayerDiv;let e=null;t.addEventListener("mousedown",n=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(e&&(clearTimeout(e),e=null));const i=t.querySelector(".endOfContent");if(!i)return;let r=n.target!==t;if(r=r&&"none"!==window.getComputedStyle(i).getPropertyValue("-moz-user-select"),r){const e=t.getBoundingClientRect(),r=Math.max(0,(n.pageY-e.top)/e.height);i.style.top=(100*r).toFixed(2)+"%"}i.classList.add("active")}),t.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(e=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),e=null},300));const n=t.querySelector(".endOfContent");n&&(n.style.top="",n.classList.remove("active"))})}}e.TextLayerBuilder=r,e.DefaultTextLayerFactory=class{createTextLayerBuilder(t,e,n,i=!1,o){return new r({textLayerDiv:t,pageIndex:e,viewport:n,enhanceTextSelection:i,eventBus:o})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DownloadManager=void 0;var i=n(2);const r=n(7).viewerCompatibilityParams.disableCreateObjectURL||!1;function o(t,e){const n=document.createElement("a");if(!n.click)throw new Error('DownloadManager: "a.click()" is not supported.');n.href=t,n.target="_parent","download"in n&&(n.download=e),(document.body||document.documentElement).appendChild(n),n.click(),n.remove()}e.DownloadManager=class{constructor({disableCreateObjectURL:t=r}){this.disableCreateObjectURL=t}downloadUrl(t,e){(0,i.createValidAbsoluteUrl)(t,"http://example.com")&&o(t+"#pdfjs.action=download",e)}downloadData(t,e,n){navigator.msSaveBlob?navigator.msSaveBlob(new Blob([t],{type:n}),e):o((0,i.createObjectURL)(t,n,this.disableCreateObjectURL),e)}download(t,e,n){navigator.msSaveBlob?navigator.msSaveBlob(t,n)||this.downloadUrl(e,n):this.disableCreateObjectURL?this.downloadUrl(e,n):o(URL.createObjectURL(t),n)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.viewerCompatibilityParams=void 0;const i=Object.create(null);{const t="undefined"!=typeof navigator&&navigator.userAgent||"",e="undefined"!=typeof navigator&&navigator.platform||"",n="undefined"!=typeof navigator&&navigator.maxTouchPoints||1,r=/Android/.test(t),o=/Trident/.test(t),s=/\b(iPad|iPhone|iPod)(?=;)/.test(t)||"MacIntel"===e&&n>1,a=/CriOS/.test(t);(o||a)&&(i.disableCreateObjectURL=!0),(s||r)&&(i.maxCanvasPixels=5242880)}const r=Object.freeze(i);e.viewerCompatibilityParams=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GenericL10n=void 0,n(9);const i=document.webL10n;e.GenericL10n=class{constructor(t){this._lang=t,this._ready=new Promise((e,n)=>{i.setLanguage(t,()=>{e(i)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(t,e,n){return(await this._ready).get(t,e,n)}async translate(t){return(await this._ready).translate(t)}}},function(t,n,i){"use strict";document.webL10n=function(t,n,i){var r={},o="",s="textContent",a="",l={},c="loading";function u(t,n,i){n=n||function(t){},i=i||function(){};var r=new XMLHttpRequest;r.open("GET",t,!0),r.overrideMimeType&&r.overrideMimeType("text/plain; charset=utf-8"),r.onreadystatechange=function(){4==r.readyState&&(200==r.status||0===r.status?n(r.responseText):i())},r.onerror=i,r.ontimeout=i;try{r.send(null)}catch(e){i()}}function h(t,e,n){var i=r[t];if(!i){if(console.warn("#"+t+" is undefined."),!n)return null;i=n}var o={};for(var s in i){var a=i[s];a=p(a=d(a,e,t,s),e,t),o[s]=a}return o}function d(t,e,n,i){var o=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(t);if(!o||!o.length)return t;var s,a=o[1],c=o[2];return e&&c in e?s=e[c]:c in r&&(s=r[c]),a in l&&(t=(0,l[a])(t,s,n,i)),t}function p(t,e,n){return t.replace(/\{\{\s*(.+?)\s*\}\}/g,(function(t,i){return e&&i in e?e[i]:i in r?r[i]:(console.log("argument {{"+i+"}} for #"+n+" is undefined."),t)}))}function f(t){var i=function(t){if(!t)return{};var n=t.getAttribute("data-l10n-id"),i=t.getAttribute("data-l10n-args"),r={};if(i)try{r=JSON.parse(i)}catch(e){console.warn("could not parse arguments for #"+n)}return{id:n,args:r}}(t);if(i.id){var r=h(i.id,i.args);if(r){if(r[s]){if(0===function(t){if(t.children)return t.children.length;if(void 0!==t.childElementCount)return t.childElementCount;for(var e=0,n=0;n<t.childNodes.length;n++)e+=1===t.nodeType?1:0;return e}(t))t[s]=r[s];else{for(var o=t.childNodes,a=!1,l=0,c=o.length;l<c;l++)3===o[l].nodeType&&/\S/.test(o[l].nodeValue)&&(a?o[l].nodeValue="":(o[l].nodeValue=r[s],a=!0));if(!a){var u=n.createTextNode(r[s]);t.insertBefore(u,t.firstChild)}}delete r[s]}for(var d in r)t[d]=r[d]}else console.warn("#"+i.id+" is undefined.")}}return l.plural=function(t,e,n,i){var o=parseFloat(e);if(isNaN(o))return t;if(i!=s)return t;l._pluralRules||(l._pluralRules=function(t){function e(t,e){return-1!==e.indexOf(t)}function n(t,e,n){return e<=t&&t<=n}var i={0:function(t){return"other"},1:function(t){return n(t%100,3,10)?"few":0===t?"zero":n(t%100,11,99)?"many":2==t?"two":1==t?"one":"other"},2:function(t){return 0!==t&&t%10==0?"many":2==t?"two":1==t?"one":"other"},3:function(t){return 1==t?"one":"other"},4:function(t){return n(t,0,1)?"one":"other"},5:function(t){return n(t,0,2)&&2!=t?"one":"other"},6:function(t){return 0===t?"zero":t%10==1&&t%100!=11?"one":"other"},7:function(t){return 2==t?"two":1==t?"one":"other"},8:function(t){return n(t,3,6)?"few":n(t,7,10)?"many":2==t?"two":1==t?"one":"other"},9:function(t){return 0===t||1!=t&&n(t%100,1,19)?"few":1==t?"one":"other"},10:function(t){return n(t%10,2,9)&&!n(t%100,11,19)?"few":t%10!=1||n(t%100,11,19)?"other":"one"},11:function(t){return n(t%10,2,4)&&!n(t%100,12,14)?"few":t%10==0||n(t%10,5,9)||n(t%100,11,14)?"many":t%10==1&&t%100!=11?"one":"other"},12:function(t){return n(t,2,4)?"few":1==t?"one":"other"},13:function(t){return n(t%10,2,4)&&!n(t%100,12,14)?"few":1!=t&&n(t%10,0,1)||n(t%10,5,9)||n(t%100,12,14)?"many":1==t?"one":"other"},14:function(t){return n(t%100,3,4)?"few":t%100==2?"two":t%100==1?"one":"other"},15:function(t){return 0===t||n(t%100,2,10)?"few":n(t%100,11,19)?"many":1==t?"one":"other"},16:function(t){return t%10==1&&11!=t?"one":"other"},17:function(t){return 3==t?"few":0===t?"zero":6==t?"many":2==t?"two":1==t?"one":"other"},18:function(t){return 0===t?"zero":n(t,0,2)&&0!==t&&2!=t?"one":"other"},19:function(t){return n(t,2,10)?"few":n(t,0,1)?"one":"other"},20:function(t){return!n(t%10,3,4)&&t%10!=9||n(t%100,10,19)||n(t%100,70,79)||n(t%100,90,99)?t%1e6==0&&0!==t?"many":t%10!=2||e(t%100,[12,72,92])?t%10!=1||e(t%100,[11,71,91])?"other":"one":"two":"few"},21:function(t){return 0===t?"zero":1==t?"one":"other"},22:function(t){return n(t,0,1)||n(t,11,99)?"one":"other"},23:function(t){return n(t%10,1,2)||t%20==0?"one":"other"},24:function(t){return n(t,3,10)||n(t,13,19)?"few":e(t,[2,12])?"two":e(t,[1,11])?"one":"other"}},r={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[t.replace(/-.*$/,"")];return r in i?i[r]:(console.warn("plural form unknown for ["+t+"]"),function(){return"other"})}(a));var c="["+l._pluralRules(o)+"]";return 0===o&&n+"[zero]"in r?t=r[n+"[zero]"][i]:1==o&&n+"[one]"in r?t=r[n+"[one]"][i]:2==o&&n+"[two]"in r?t=r[n+"[two]"][i]:n+c in r?t=r[n+c][i]:n+"[other]"in r&&(t=r[n+"[other]"][i]),t},{get:function(t,e,n){var i,r=t.lastIndexOf("."),o=s;r>0&&(o=t.substring(r+1),t=t.substring(0,r)),n&&((i={})[o]=n);var a=h(t,e,i);return a&&o in a?a[o]:"{{"+t+"}}"},getData:function(){return r},getText:function(){return o},getLanguage:function(){return a},setLanguage:function(t,e){!function(t,e){t&&(t=t.toLowerCase()),e=e||function(){},r={},o="",a="",a=t;var i=n.querySelectorAll('link[type="application/l10n"]'),l=i.length;if(0!==l){var h,d,p=0;d=function(){++p>=l&&(e(),c="complete")};for(var f=0;f<l;f++)new y(i[f]).load(t,d)}else{var m=(h=n.querySelector('script[type="application/l10n"]'))?JSON.parse(h.innerHTML):null;if(m&&m.locales&&m.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(r=m.locales[t])){var g=m.default_locale.toLowerCase();for(var v in m.locales){if((v=v.toLowerCase())===t){r=m.locales[t];break}v===g&&(r=m.locales[g])}}e()}else console.log("no resource to load, early way out");c="complete"}function y(t){var e=t.href;this.load=function(t,n){!function(t,e,n,i){var a=t.replace(/[^\/]*$/,"")||"./";function l(t){return t.lastIndexOf("\\")<0?t:t.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}u(t,(function(t){o+=t,function(t,i){var o={},c=/^\s*|\s*$/,h=/^\s*#|^\s*$/,d=/^\s*\[(.*)\]\s*$/,p=/^\s*@import\s+url\((.*)\)\s*$/i,f=/^([^=\s]*)\s*=\s*(.+)$/;function m(t,n,i){var r=t.replace(c,"").split(/[\r\n]+/),s="*",u=e.split("-",1)[0],m=!1,v="";!function t(){for(;;){if(!r.length)return void i();var c=r.shift();if(!h.test(c)){if(n){if(v=d.exec(c)){s=v[1].toLowerCase(),m="*"!==s&&s!==e&&s!==u;continue}if(m)continue;if(v=p.exec(c))return void g(a+v[1],t)}var y=c.match(f);y&&3==y.length&&(o[y[1]]=l(y[2]))}}}()}function g(t,e){u(t,(function(t){m(t,!1,e)}),(function(){console.warn(t+" not found."),e()}))}m(t,!0,(function(){!function(t){for(var e in t){var i,o,a=e.lastIndexOf(".");a>0?(i=e.substring(0,a),o=e.substring(a+1)):(i=e,o=s),r[i]||(r[i]={}),r[i][o]=t[e]}n&&n()}(o)}))}(t)}),i)}(e,t,n,(function(){console.warn(e+" not found."),console.warn('"'+t+'" resource not found'),a="",n()}))}}}(t,(function(){e&&e()}))},getDirection:function(){var t=a.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(t)>=0?"rtl":"ltr"},translate:function(t){for(var e=function(t){return t?t.querySelectorAll("*[data-l10n-id]"):[]}(t=t||n.documentElement),i=e.length,r=0;r<i;r++)f(e[r]);f(t)},getReadyState:function(){return c},ready:function(e){e&&("complete"==c||"interactive"==c?t.setTimeout((function(){e()})):n.addEventListener&&n.addEventListener("localized",(function t(){n.removeEventListener("localized",t),e()})))}}}(window,document)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFindController=e.FindState=void 0;var i=n(2),r=n(11),o=n(3);const s={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};e.FindState=s;const a={"\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"};let l=null;function c(t){if(!l){const t=Object.keys(a).join("");l=new RegExp(`[${t}]`,"g")}return t.replace(l,(function(t){return a[t]}))}e.PDFFindController=class{constructor({linkService:t,eventBus:e}){this._linkService=t,this._eventBus=e,this._reset(),e._on("findbarclose",this._onFindBarClose.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(t){this._pdfDocument&&this._reset(),t&&(this._pdfDocument=t,this._firstPageCapability.resolve())}executeCommand(t,e){if(!e)return;const n=this._pdfDocument;(null===this._state||this._shouldDirtyMatch(t,e))&&(this._dirtyMatch=!0),this._state=e,"findhighlightallchange"!==t&&this._updateUIState(s.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||n&&this._pdfDocument!==n)return;this._extractText();const e=!this._highlightMatches,i=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),"find"===t?this._findTimeout=setTimeout(()=>{this._nextMatch(),this._findTimeout=null},250):this._dirtyMatch?this._nextMatch():"findagain"===t?(this._nextMatch(),e&&this._state.highlightAll&&this._updateAllPages()):"findhighlightallchange"===t?(i?this._nextMatch():this._highlightMatches=!0,this._updateAllPages()):this._nextMatch()})}scrollMatchIntoView({element:t=null,pageIndex:e=-1,matchIndex:n=-1}){this._scrollMatches&&t&&-1!==n&&n===this._selected.matchIdx&&-1!==e&&e===this._selected.pageIdx&&(this._scrollMatches=!1,(0,o.scrollIntoView)(t,{top:-50,left:-400},!0))}_reset(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=Object.create(null),this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,i.createPromiseCapability)()}get _query(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,this._normalizedQuery=c(this._state.query)),this._normalizedQuery}_shouldDirtyMatch(t,e){if(e.query!==this._state.query)return!0;switch(t){case"findagain":const t=this._selected.pageIdx+1,e=this._linkService;return t>=1&&t<=e.pagesCount&&t!==e.page&&!e.isPageVisible(t);case"findhighlightallchange":return!1}return!0}_prepareMatches(t,e,n){function i(e){const n=t[e];if(e<t.length-1&&n.match===t[e+1].match)return n.skipped=!0,!0;for(let i=e-1;i>=0;i--){const e=t[i];if(!e.skipped){if(e.match+e.matchLength<n.match)break;if(e.match+e.matchLength>=n.match+n.matchLength)return n.skipped=!0,!0}}return!1}t.sort((function(t,e){return t.match===e.match?t.matchLength-e.matchLength:t.match-e.match}));for(let r=0,o=t.length;r<o;r++)i(r)||(e.push(t[r].match),n.push(t[r].matchLength))}_isEntireWord(t,e,n){if(e>0){const n=t.charCodeAt(e),i=t.charCodeAt(e-1);if((0,r.getCharacterType)(n)===(0,r.getCharacterType)(i))return!1}const i=e+n-1;if(i<t.length-1){const e=t.charCodeAt(i),n=t.charCodeAt(i+1);if((0,r.getCharacterType)(e)===(0,r.getCharacterType)(n))return!1}return!0}_calculatePhraseMatch(t,e,n,i){const r=[],o=t.length;let s=-o;for(;s=n.indexOf(t,s+o),-1!==s;)i&&!this._isEntireWord(n,s,o)||r.push(s);this._pageMatches[e]=r}_calculateWordMatch(t,e,n,i){const r=[],o=t.match(/\S+/g);for(let s=0,a=o.length;s<a;s++){const t=o[s],e=t.length;let a=-e;for(;a=n.indexOf(t,a+e),-1!==a;)i&&!this._isEntireWord(n,a,e)||r.push({match:a,matchLength:e,skipped:!1})}this._pageMatchesLength[e]=[],this._pageMatches[e]=[],this._prepareMatches(r,this._pageMatches[e],this._pageMatchesLength[e])}_calculateMatch(t){let e=this._pageContents[t],n=this._query;const{caseSensitive:i,entireWord:r,phraseSearch:o}=this._state;if(0===n.length)return;i||(e=e.toLowerCase(),n=n.toLowerCase()),o?this._calculatePhraseMatch(n,t,e,r):this._calculateWordMatch(n,t,e,r),this._state.highlightAll&&this._updatePage(t),this._resumePageIdx===t&&(this._resumePageIdx=null,this._nextPageMatch());const s=this._pageMatches[t].length;s>0&&(this._matchesCountTotal+=s,this._updateUIResultsCount())}_extractText(){if(this._extractTextPromises.length>0)return;let t=Promise.resolve();for(let e=0,n=this._linkService.pagesCount;e<n;e++){const n=(0,i.createPromiseCapability)();this._extractTextPromises[e]=n.promise,t=t.then(()=>this._pdfDocument.getPage(e+1).then(t=>t.getTextContent({normalizeWhitespace:!0})).then(t=>{const i=t.items,r=[];for(let e=0,n=i.length;e<n;e++)r.push(i[e].str);this._pageContents[e]=c(r.join("")),n.resolve(e)},t=>{console.error(`Unable to get text content for page ${e+1}`,t),this._pageContents[e]="",n.resolve(e)}))}}_updatePage(t){this._scrollMatches&&this._selected.pageIdx===t&&(this._linkService.page=t+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:t})}_updateAllPages(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}_nextMatch(){const t=this._state.findPrevious,e=this._linkService.page-1,n=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=e,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this._updateAllPages();for(let t=0;t<n;t++)!0!==this._pendingFindMatches[t]&&(this._pendingFindMatches[t]=!0,this._extractTextPromises[t].then(t=>{delete this._pendingFindMatches[t],this._calculateMatch(t)}))}if(""===this._query)return void this._updateUIState(s.FOUND);if(this._resumePageIdx)return;const i=this._offset;if(this._pagesToSearch=n,null!==i.matchIdx){const e=this._pageMatches[i.pageIdx].length;if(!t&&i.matchIdx+1<e||t&&i.matchIdx>0)return i.matchIdx=t?i.matchIdx-1:i.matchIdx+1,void this._updateMatch(!0);this._advanceOffsetPage(t)}this._nextPageMatch()}_matchesReady(t){const e=this._offset,n=t.length,i=this._state.findPrevious;return n?(e.matchIdx=i?n-1:0,this._updateMatch(!0),!0):(this._advanceOffsetPage(i),!!(e.wrapped&&(e.matchIdx=null,this._pagesToSearch<0))&&(this._updateMatch(!1),!0))}_nextPageMatch(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let t=null;do{const e=this._offset.pageIdx;if(t=this._pageMatches[e],!t){this._resumePageIdx=e;break}}while(!this._matchesReady(t))}_advanceOffsetPage(t){const e=this._offset,n=this._linkService.pagesCount;e.pageIdx=t?e.pageIdx-1:e.pageIdx+1,e.matchIdx=null,this._pagesToSearch--,(e.pageIdx>=n||e.pageIdx<0)&&(e.pageIdx=t?n-1:0,e.wrapped=!0)}_updateMatch(t=!1){let e=s.NOT_FOUND;const n=this._offset.wrapped;if(this._offset.wrapped=!1,t){const t=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,e=n?s.WRAPPED:s.FOUND,-1!==t&&t!==this._selected.pageIdx&&this._updatePage(t)}this._updateUIState(e,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this._updatePage(this._selected.pageIdx))}_onFindBarClose(t){const e=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||e&&this._pdfDocument!==e||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this._updateUIState(s.FOUND),this._highlightMatches=!1,this._updateAllPages())})}_requestMatchesCount(){const{pageIdx:t,matchIdx:e}=this._selected;let n=0,i=this._matchesCountTotal;if(-1!==e){for(let e=0;e<t;e++)n+=this._pageMatches[e]&&this._pageMatches[e].length||0;n+=e+1}return(n<1||n>i)&&(n=i=0),{current:n,total:i}}_updateUIResultsCount(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}_updateUIState(t,e){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:t,previous:e,matchesCount:this._requestMatchesCount()})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCharacterType=function(t){return function(t){return t<11904}(t)?function(t){return 0==(65408&t)}(t)?function(t){return 32===t||9===t||13===t||10===t}(t)?i.SPACE:function(t){return t>=97&&t<=122||t>=65&&t<=90}(t)||function(t){return t>=48&&t<=57}(t)||95===t?i.ALPHA_LETTER:i.PUNCT:function(t){return 3584==(65408&t)}(t)?i.THAI_LETTER:160===t?i.SPACE:i.ALPHA_LETTER:function(t){return t>=13312&&t<=40959||t>=63744&&t<=64255}(t)?i.HAN_LETTER:function(t){return t>=12448&&t<=12543}(t)?i.KATAKANA_LETTER:function(t){return t>=12352&&t<=12447}(t)?i.HIRAGANA_LETTER:function(t){return t>=65376&&t<=65439}(t)?i.HALFWIDTH_KATAKANA_LETTER:i.ALPHA_LETTER},e.CharacterType=void 0;const i={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};e.CharacterType=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isDestHashesEqual=o,e.isDestArraysEqual=s,e.PDFHistory=void 0;var i=n(3);function r(){return document.location.hash}function o(t,e){if("string"!=typeof t||"string"!=typeof e)return!1;if(t===e)return!0;const{nameddest:n}=(0,i.parseQueryString)(t);return n===e}function s(t,e){function n(t,e){if(typeof t!=typeof e)return!1;if(Array.isArray(t)||Array.isArray(e))return!1;if(null!==t&&"object"==typeof t&&null!==e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!n(t[i],e[i]))return!1;return!0}return t===e||Number.isNaN(t)&&Number.isNaN(e)}if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(let i=0,r=t.length;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}e.PDFHistory=class{constructor({linkService:t,eventBus:e}){this.linkService=t,this.eventBus=e,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this._isViewerInPresentationMode=!1,this.eventBus._on("presentationmodechanged",t=>{this._isViewerInPresentationMode=t.active||t.switchInProgress}),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1;const t=e=>{this.eventBus._off("pagesloaded",t),this._isPagesLoaded=!!e.pagesCount};this.eventBus._on("pagesloaded",t)})}initialize({fingerprint:t,resetHistory:e=!1,updateUrl:n=!1}){if(!t||"string"!=typeof t)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const i=""!==this._fingerprint&&this._fingerprint!==t;this._fingerprint=t,this._updateUrl=!0===n,this._initialized=!0,this._bindEvents();const o=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=r(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(o,!0)||e){const{hash:t,page:n,rotation:r}=this._parseCurrentHash(!0);return!t||i||e?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:t,page:n,rotation:r},!0)}const s=o.destination;this._updateInternalState(s,o.uid,!0),this._uid>this._maxUid&&(this._maxUid=this._uid),void 0!==s.rotation&&(this._initialRotation=s.rotation),s.dest?(this._initialBookmark=JSON.stringify(s.dest),this._destination.page=null):s.hash?this._initialBookmark=s.hash:s.page&&(this._initialBookmark=`page=${s.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:t=null,explicitDest:e,pageNumber:n}){if(!this._initialized)return;if(t&&"string"!=typeof t)return void console.error("PDFHistory.push: "+`"${t}" is not a valid namedDest parameter.`);if(!Array.isArray(e))return void console.error("PDFHistory.push: "+`"${e}" is not a valid explicitDest parameter.`);if(!(Number.isInteger(n)&&n>0&&n<=this.linkService.pagesCount)&&(null!==n||this._destination))return void console.error("PDFHistory.push: "+`"${n}" is not a valid pageNumber parameter.`);const i=t||JSON.stringify(e);if(!i)return;let r=!1;if(this._destination&&(o(this._destination.hash,i)||s(this._destination.dest,e))){if(this._destination.page)return;r=!0}this._popStateInProgress&&!r||(this._pushOrReplaceState({dest:e,hash:i,page:n,rotation:this.linkService.rotation},r),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const t=window.history.state;this._isValidState(t)&&t.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const t=window.history.state;this._isValidState(t)&&t.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(t,e=!1){const n=e||!this._destination,i={fingerprint:this._fingerprint,uid:n?this._uid:this._uid+1,destination:t};let r;if(this._updateInternalState(t,i.uid),this._updateUrl&&t&&t.hash){const e=document.location.href.split("#")[0];e.startsWith("file://")||(r=`${e}#${t.hash}`)}n?window.history.replaceState(i,"",r):(this._maxUid=this._uid,window.history.pushState(i,"",r))}_tryPushCurrentPosition(t=!1){if(!this._position)return;let e=this._position;if(t&&(e=Object.assign(Object.create(null),this._position),e.temporary=!0),!this._destination)return void this._pushOrReplaceState(e);if(this._destination.temporary)return void this._pushOrReplaceState(e,!0);if(this._destination.hash===e.hash)return;if(!this._destination.page&&this._numPositionUpdates<=50)return;let n=!1;if(this._destination.page>=e.first&&this._destination.page<=e.page){if(this._destination.dest||!this._destination.first)return;n=!0}this._pushOrReplaceState(e,n)}_isValidState(t,e=!1){if(!t)return!1;if(t.fingerprint!==this._fingerprint){if(!e)return!1;{if("string"!=typeof t.fingerprint||t.fingerprint.length!==this._fingerprint.length)return!1;const[e]=performance.getEntriesByType("navigation");if(!e||"reload"!==e.type)return!1}}return!(!Number.isInteger(t.uid)||t.uid<0)&&null!==t.destination&&"object"==typeof t.destination}_updateInternalState(t,e,n=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),n&&t&&t.temporary&&delete t.temporary,this._destination=t,this._uid=e,this._numPositionUpdates=0}_parseCurrentHash(t=!1){const e=unescape(r()).substring(1),n=(0,i.parseQueryString)(e),o=n.nameddest||"";let s=0|n.page;return Number.isInteger(s)&&s>0&&s<=this.linkService.pagesCount&&!(t&&o.length>0)||(s=null),{hash:e,page:s,rotation:this.linkService.rotation}}_updateViewarea({location:t}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:this._isViewerInPresentationMode?`page=${t.pageNumber}`:t.pdfOpenParams.substring(1),page:this.linkService.page,first:t.pageNumber,rotation:t.rotation},this._popStateInProgress||(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:t}){const e=r(),n=this._currentHash!==e;if(this._currentHash=e,!t){this._uid++;const{hash:t,page:e,rotation:n}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:t,page:e,rotation:n},!0)}if(!this._isValidState(t))return;this._popStateInProgress=!0,n&&(this._blockHashChange++,(0,i.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const o=t.destination;this._updateInternalState(o,t.uid,!0),this._uid>this._maxUid&&(this._maxUid=this._uid),(0,i.isValidRotation)(o.rotation)&&(this.linkService.rotation=o.rotation),o.dest?this.linkService.navigateTo(o.dest):o.hash?this.linkService.setHash(o.hash):o.page&&(this.linkService.page=o.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFPageView=void 0;var i=n(3),r=n(2),o=n(14);const s=n(7).viewerCompatibilityParams.maxCanvasPixels||16777216;e.PDFPageView=class{constructor(t){const e=t.container,n=t.defaultViewport;this.id=t.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=t.scale||i.DEFAULT_SCALE,this.viewport=n,this.pdfPageRotate=n.rotation,this.hasRestrictedScaling=!1,this.textLayerMode=Number.isInteger(t.textLayerMode)?t.textLayerMode:i.TextLayerMode.ENABLE,this.imageResourcesPath=t.imageResourcesPath||"",this.renderInteractiveForms=t.renderInteractiveForms||!1,this.useOnlyCssZoom=t.useOnlyCssZoom||!1,this.maxCanvasPixels=t.maxCanvasPixels||s,this.eventBus=t.eventBus,this.renderingQueue=t.renderingQueue,this.textLayerFactory=t.textLayerFactory,this.annotationLayerFactory=t.annotationLayerFactory,this.renderer=t.renderer||i.RendererType.CANVAS,this.enableWebGL=t.enableWebGL||!1,this.l10n=t.l10n||i.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=o.RenderingStates.INITIAL,this.resume=null,this.error=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null;const r=document.createElement("div");r.className="page",r.style.width=Math.floor(this.viewport.width)+"px",r.style.height=Math.floor(this.viewport.height)+"px",r.setAttribute("data-page-number",this.id),this.div=r,e.appendChild(r)}setPdfPage(t){this.pdfPage=t,this.pdfPageRotate=t.rotate,this.viewport=t.getViewport({scale:this.scale*i.CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.stats=t.stats,this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_resetZoomLayer(t=!1){if(!this.zoomLayer)return;const e=this.zoomLayer.firstChild;this.paintedViewportMap.delete(e),e.width=0,e.height=0,t&&this.zoomLayer.remove(),this.zoomLayer=null}reset(t=!1,e=!1){this.cancelRendering(e),this.renderingState=o.RenderingStates.INITIAL;const n=this.div;n.style.width=Math.floor(this.viewport.width)+"px",n.style.height=Math.floor(this.viewport.height)+"px";const i=n.childNodes,r=t&&this.zoomLayer||null,s=e&&this.annotationLayer&&this.annotationLayer.div||null;for(let o=i.length-1;o>=0;o--){const t=i[o];r!==t&&s!==t&&n.removeChild(t)}n.removeAttribute("data-loaded"),s?this.annotationLayer.hide():this.annotationLayer&&(this.annotationLayer.cancel(),this.annotationLayer=null),r||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",n.appendChild(this.loadingIconDiv)}update(t,e){if(this.scale=t||this.scale,void 0!==e&&(this.rotation=e),this.viewport=this.viewport.clone({scale:this.scale*i.CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.svg)return this.cssTransform(this.svg,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now()});let n=!1;if(this.canvas&&this.maxCanvasPixels>0){const t=this.outputScale;(Math.floor(this.viewport.width)*t.sx|0)*(Math.floor(this.viewport.height)*t.sy|0)>this.maxCanvasPixels&&(n=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&n)return this.cssTransform(this.canvas,!0),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now()});this.zoomLayer||this.canvas.hasAttribute("hidden")||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform(this.zoomLayer.firstChild),this.reset(!0,!0)}cancelRendering(t=!1){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),!t&&this.annotationLayer&&(this.annotationLayer.cancel(),this.annotationLayer=null)}cssTransform(t,e=!1){const n=this.viewport.width,i=this.viewport.height,r=this.div;t.style.width=t.parentNode.style.width=r.style.width=Math.floor(n)+"px",t.style.height=t.parentNode.style.height=r.style.height=Math.floor(i)+"px";const o=this.viewport.rotation-this.paintedViewportMap.get(t).rotation,s=Math.abs(o);let a=1,l=1;if(90!==s&&270!==s||(a=i/n,l=n/i),t.style.transform="rotate("+o+"deg) scale("+a+","+l+")",this.textLayer){const t=this.textLayer.viewport,e=Math.abs(this.viewport.rotation-t.rotation);let i=n/t.width;90!==e&&270!==e||(i=n/t.height);const r=this.textLayer.textLayerDiv;let o,s;switch(e){case 0:o=s=0;break;case 90:o=0,s="-"+r.style.height;break;case 180:o="-"+r.style.width,s="-"+r.style.height;break;case 270:o="-"+r.style.width,s=0;break;default:console.error("Bad rotation value.")}r.style.transform="rotate("+e+"deg) scale("+i+", "+i+") translate("+o+", "+s+")",r.style.transformOrigin="0% 0%"}e&&this.annotationLayer&&this.annotationLayer.render(this.viewport,"display")}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(t,e){return this.viewport.convertToPdfPoint(t,e)}draw(){this.renderingState!==o.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:t,pdfPage:e}=this;if(!e)return this.renderingState=o.RenderingStates.FINISHED,this.loadingIconDiv&&(t.removeChild(this.loadingIconDiv),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=o.RenderingStates.RUNNING;const n=document.createElement("div");n.style.width=t.style.width,n.style.height=t.style.height,n.classList.add("canvasWrapper"),this.annotationLayer&&this.annotationLayer.div?t.insertBefore(n,this.annotationLayer.div):t.appendChild(n);let s=null;if(this.textLayerMode!==i.TextLayerMode.DISABLE&&this.textLayerFactory){const e=document.createElement("div");e.className="textLayer",e.style.width=n.style.width,e.style.height=n.style.height,this.annotationLayer&&this.annotationLayer.div?t.insertBefore(e,this.annotationLayer.div):t.appendChild(e),s=this.textLayerFactory.createTextLayerBuilder(e,this.id-1,this.viewport,this.textLayerMode===i.TextLayerMode.ENABLE_ENHANCE,this.eventBus)}this.textLayer=s;let a=null;this.renderingQueue&&(a=t=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=o.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=o.RenderingStates.RUNNING,t()});t()});const l=async n=>{if(c===this.paintTask&&(this.paintTask=null),n instanceof r.RenderingCancelledException)this.error=null;else if(this.renderingState=o.RenderingStates.FINISHED,this.loadingIconDiv&&(t.removeChild(this.loadingIconDiv),delete this.loadingIconDiv),this._resetZoomLayer(!0),this.error=n,this.stats=e.stats,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now()}),n)throw n},c=this.renderer===i.RendererType.SVG?this.paintOnSvg(n):this.paintOnCanvas(n);c.onRenderContinue=a,this.paintTask=c;const u=c.promise.then((function(){return l(null).then((function(){if(s){const t=e.streamTextContent({normalizeWhitespace:!0});s.setTextContentStream(t),s.render()}}))}),(function(t){return l(t)}));return this.annotationLayerFactory&&(this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(t,e,this.imageResourcesPath,this.renderInteractiveForms,this.l10n)),this.annotationLayer.render(this.viewport,"display")),t.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),u}paintOnCanvas(t){const e=(0,r.createPromiseCapability)(),n={promise:e.promise,onRenderContinue(t){t()},cancel(){p.cancel()}},o=this.viewport,s=document.createElement("canvas");this.l10n.get("page_canvas",{page:this.id},"Page {{page}}").then(t=>{s.setAttribute("aria-label",t)}),s.setAttribute("hidden","hidden");let a=!0;const l=function(){a&&(s.removeAttribute("hidden"),a=!1)};t.appendChild(s),this.canvas=s,s.mozOpaque=!0;const c=s.getContext("2d",{alpha:!1}),u=(0,i.getOutputScale)(c);if(this.outputScale=u,this.useOnlyCssZoom){const t=o.clone({scale:i.CSS_UNITS});u.sx*=t.width/o.width,u.sy*=t.height/o.height,u.scaled=!0}if(this.maxCanvasPixels>0){const t=Math.sqrt(this.maxCanvasPixels/(o.width*o.height));u.sx>t||u.sy>t?(u.sx=t,u.sy=t,u.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const h=(0,i.approximateFraction)(u.sx),d=(0,i.approximateFraction)(u.sy);s.width=(0,i.roundToDivide)(o.width*u.sx,h[0]),s.height=(0,i.roundToDivide)(o.height*u.sy,d[0]),s.style.width=(0,i.roundToDivide)(o.width,h[1])+"px",s.style.height=(0,i.roundToDivide)(o.height,d[1])+"px",this.paintedViewportMap.set(s,o);const p=this.pdfPage.render({canvasContext:c,transform:u.scaled?[u.sx,0,0,u.sy,0,0]:null,viewport:this.viewport,enableWebGL:this.enableWebGL,renderInteractiveForms:this.renderInteractiveForms});return p.onContinue=function(t){l(),n.onRenderContinue?n.onRenderContinue(t):t()},p.promise.then((function(){l(),e.resolve(void 0)}),(function(t){l(),e.reject(t)})),n}paintOnSvg(t){let e=!1;const n=()=>{if(e)throw new r.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},s=this.pdfPage,a=this.viewport.clone({scale:i.CSS_UNITS});return{promise:s.getOperatorList().then(e=>(n(),new r.SVGGraphics(s.commonObjs,s.objs).getSVG(e,a).then(e=>{n(),this.svg=e,this.paintedViewportMap.set(e,a),e.style.width=t.style.width,e.style.height=t.style.height,this.renderingState=o.RenderingStates.FINISHED,t.appendChild(e)}))),onRenderContinue(t){t()},cancel(){e=!0}}}setPageLabel(t){this.pageLabel="string"==typeof t?t:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFRenderingQueue=e.RenderingStates=void 0;const i={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};e.RenderingStates=i,e.PDFRenderingQueue=class{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(t){this.pdfViewer=t}setThumbnailViewer(t){this.pdfThumbnailViewer=t}isHighestPriority(t){return this.highestPriorityPage===t.renderingId}renderHighestPriority(t){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(t)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}getHighestPriority(t,e,n){const i=t.views,r=i.length;if(0===r)return null;for(let o=0;o<r;++o){const t=i[o].view;if(!this.isViewFinished(t))return t}if(n){const n=t.last.id;if(e[n]&&!this.isViewFinished(e[n]))return e[n]}else{const n=t.first.id-2;if(e[n]&&!this.isViewFinished(e[n]))return e[n]}return null}isViewFinished(t){return t.renderingState===i.FINISHED}renderView(t){switch(t.renderingState){case i.FINISHED:return!1;case i.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case i.RUNNING:this.highestPriorityPage=t.renderingId;break;case i.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally(()=>{this.renderHighestPriority()}).catch(t=>{console.error(`renderView: "${t}"`)})}return!0}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFSinglePageViewer=void 0;var i=n(16),r=n(2);e.PDFSinglePageViewer=class extends i.BaseViewer{constructor(t){super(t),this.eventBus._on("pagesinit",t=>{this._ensurePageViewVisible()})}get _viewerElement(){return(0,r.shadow)(this,"_viewerElement",this._shadowViewer)}_resetView(){super._resetView(),this._previousPageNumber=1,this._shadowViewer=document.createDocumentFragment(),this._updateScrollDown=null}_ensurePageViewVisible(){const t=this._pages[this._currentPageNumber-1],e=this._pages[this._previousPageNumber-1],n=this.viewer.childNodes;switch(n.length){case 0:this.viewer.appendChild(t.div);break;case 1:if(n[0]!==e.div)throw new Error("_ensurePageViewVisible: Unexpected previously visible page.");if(t===e)break;this._shadowViewer.appendChild(e.div),this.viewer.appendChild(t.div),this.container.scrollTop=0;break;default:throw new Error("_ensurePageViewVisible: Only one page should be visible at a time.")}this._previousPageNumber=this._currentPageNumber}_scrollUpdate(){this._updateScrollDown&&this._updateScrollDown(),super._scrollUpdate()}_scrollIntoView({pageDiv:t,pageSpot:e=null,pageNumber:n=null}){n&&this._setCurrentPageNumber(n);const i=this._currentPageNumber>=this._previousPageNumber;this._ensurePageViewVisible(),this.update(),super._scrollIntoView({pageDiv:t,pageSpot:e,pageNumber:n}),this._updateScrollDown=()=>{this.scroll.down=i,this._updateScrollDown=null}}_getVisiblePages(){return this._getCurrentVisiblePage()}_updateHelper(t){}get _isScrollModeHorizontal(){return(0,r.shadow)(this,"_isScrollModeHorizontal",!1)}_updateScrollMode(){}_updateSpreadMode(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseViewer=void 0;var i=n(3),r=n(14),o=n(1),s=n(2),a=n(13),l=n(4),c=n(5);function u(t){const e=[];this.push=function(n){const i=e.indexOf(n);i>=0&&e.splice(i,1),e.push(n),e.length>t&&e.shift().destroy()},this.resize=function(n,r){if(t=n,r){const t=new Set;for(let e=0,n=r.length;e<n;++e)t.add(r[e].id);(0,i.moveToEndOfArray)(e,(function(e){return t.has(e.id)}))}for(;e.length>t;)e.shift().destroy()}}class h{constructor(t){if(this.constructor===h)throw new Error("Cannot initialize BaseViewer.");this._name=this.constructor.name,this.container=t.container,this.viewer=t.viewer||t.container.firstElementChild,this.eventBus=t.eventBus,this.linkService=t.linkService||new l.SimpleLinkService,this.downloadManager=t.downloadManager||null,this.findController=t.findController||null,this.removePageBorders=t.removePageBorders||!1,this.textLayerMode=Number.isInteger(t.textLayerMode)?t.textLayerMode:i.TextLayerMode.ENABLE,this.imageResourcesPath=t.imageResourcesPath||"",this.renderInteractiveForms=t.renderInteractiveForms||!1,this.enablePrintAutoRotate=t.enablePrintAutoRotate||!1,this.renderer=t.renderer||i.RendererType.CANVAS,this.enableWebGL=t.enableWebGL||!1,this.useOnlyCssZoom=t.useOnlyCssZoom||!1,this.maxCanvasPixels=t.maxCanvasPixels,this.l10n=t.l10n||i.NullL10n,this.defaultRenderingQueue=!t.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new r.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=t.renderingQueue,this.scroll=(0,i.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=i.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(t){return this._pages[t]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every((function(t){return t&&t.pdfPage}))}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(t){if(!Number.isInteger(t))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(t,!0)||console.error(`${this._name}.currentPageNumber: "${t}" is not a valid page.`))}_setCurrentPageNumber(t,e=!1){return this._currentPageNumber===t?(e&&this._resetCurrentPageView(),!0):0<t&&t<=this.pagesCount&&(this._currentPageNumber=t,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:t,pageLabel:this._pageLabels&&this._pageLabels[t-1]}),e&&this._resetCurrentPageView(),!0)}get currentPageLabel(){return this._pageLabels&&this._pageLabels[this._currentPageNumber-1]}set currentPageLabel(t){if(!this.pdfDocument)return;let e=0|t;if(this._pageLabels){const n=this._pageLabels.indexOf(t);n>=0&&(e=n+1)}this._setCurrentPageNumber(e,!0)||console.error(`${this._name}.currentPageLabel: "${t}" is not a valid page.`)}get currentScale(){return this._currentScale!==i.UNKNOWN_SCALE?this._currentScale:i.DEFAULT_SCALE}set currentScale(t){if(isNaN(t))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(t,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(t){this.pdfDocument&&this._setScale(t,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(t){if(!(0,i.isValidRotation)(t))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument)return;if(this._pagesRotation===t)return;this._pagesRotation=t;const e=this._currentPageNumber;for(let n=0,i=this._pages.length;n<i;n++){const e=this._pages[n];e.update(e.scale,t)}this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:t,pageNumber:e}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _viewerElement(){throw new Error("Not implemented: _viewerElement")}_onePageRenderedOrForceFetch(){return this.container.offsetParent&&0!==this._getVisiblePages().views.length?this._onePageRenderedCapability.promise:Promise.resolve()}setDocument(t){if(this.pdfDocument&&(this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null)),this.pdfDocument=t,!t)return;const e=t.numPages,n=t.getPage(1);this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:e})}),this._onBeforeDraw=t=>{const e=this._pages[t.pageNumber-1];e&&this._buffer.push(e)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=t=>{t.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve(),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null)},this.eventBus._on("pagerendered",this._onAfterDraw),n.then(n=>{this._firstPageCapability.resolve(n);const r=this.currentScale,o=n.getViewport({scale:r*i.CSS_UNITS}),s=this.textLayerMode!==i.TextLayerMode.DISABLE?this:null;for(let t=1;t<=e;++t){const e=new a.PDFPageView({container:this._viewerElement,eventBus:this.eventBus,id:t,scale:r,defaultViewport:o.clone(),renderingQueue:this.renderingQueue,textLayerFactory:s,textLayerMode:this.textLayerMode,annotationLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderInteractiveForms:this.renderInteractiveForms,renderer:this.renderer,enableWebGL:this.enableWebGL,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,l10n:this.l10n});this._pages.push(e)}const l=this._pages[0];l&&(l.setPdfPage(n),this.linkService.cachePageRef(1,n.ref)),this._spreadMode!==i.SpreadMode.NONE&&this._updateSpreadMode(),this._onePageRenderedOrForceFetch().then(()=>{if(this.findController&&this.findController.setDocument(t),t.loadingParams.disableAutoFetch||e>7500)return void this._pagesCapability.resolve();let n=e-1;if(n<=0)this._pagesCapability.resolve();else for(let i=2;i<=e;++i)t.getPage(i).then(t=>{const e=this._pages[i-1];e.pdfPage||e.setPdfPage(t),this.linkService.cachePageRef(i,t.ref),0==--n&&this._pagesCapability.resolve()},t=>{console.error(`Unable to get page ${i} to initialize viewer`,t),0==--n&&this._pagesCapability.resolve()})}),this.eventBus.dispatch("pagesinit",{source:this}),this.defaultRenderingQueue&&this.update()}).catch(t=>{console.error("Unable to initialize viewer",t)})}setPageLabels(t){if(this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=null,console.error(`${this._name}.setPageLabels: Invalid page labels.`)):this._pageLabels=null;for(let t=0,e=this._pages.length;t<e;t++)this._pages[t].setPageLabel(this._pageLabels&&this._pageLabels[t])}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=i.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this._buffer=new u(10),this._location=null,this._pagesRotation=0,this._pagesRequests=new WeakMap,this._firstPageCapability=(0,s.createPromiseCapability)(),this._onePageRenderedCapability=(0,s.createPromiseCapability)(),this._pagesCapability=(0,s.createPromiseCapability)(),this._scrollMode=i.ScrollMode.VERTICAL,this._spreadMode=i.SpreadMode.NONE,this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.viewer.textContent="",this._updateScrollMode()}_scrollUpdate(){0!==this.pagesCount&&this.update()}_scrollIntoView({pageDiv:t,pageSpot:e=null,pageNumber:n=null}){(0,i.scrollIntoView)(t,e)}_setScaleUpdatePages(t,e,n=!1,i=!1){if(this._currentScaleValue=e.toString(),function(t,e){return e===t||Math.abs(e-t)<1e-15}(this._currentScale,t))i&&this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:e});else{for(let e=0,n=this._pages.length;e<n;e++)this._pages[e].update(t);if(this._currentScale=t,!n){let t,e=this._currentPageNumber;!this._location||this.isInPresentationMode||this.isChangingPresentationMode||(e=this._location.pageNumber,t=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:e,destArray:t,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:i?e:void 0}),this.defaultRenderingQueue&&this.update()}}_setScale(t,e=!1){let n=parseFloat(t);if(n>0)this._setScaleUpdatePages(n,t,e,!1);else{const r=this._pages[this._currentPageNumber-1];if(!r)return;const o=this.isInPresentationMode||this.removePageBorders;let s=o?0:i.SCROLLBAR_PADDING,a=o?0:i.VERTICAL_PADDING;!o&&this._isScrollModeHorizontal&&([s,a]=[a,s]);const l=(this.container.clientWidth-s)/r.width*r.scale,c=(this.container.clientHeight-a)/r.height*r.scale;switch(t){case"page-actual":n=1;break;case"page-width":n=l;break;case"page-height":n=c;break;case"page-fit":n=Math.min(l,c);break;case"auto":const e=(0,i.isPortraitOrientation)(r)?l:Math.min(c,l);n=Math.min(i.MAX_AUTO_SCALE,e);break;default:return void console.error(`${this._name}._setScale: "${t}" is an unknown zoom value.`)}this._setScaleUpdatePages(n,t,e,!0)}}_resetCurrentPageView(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),this._scrollIntoView({pageDiv:this._pages[this._currentPageNumber-1].div})}scrollPageIntoView({pageNumber:t,destArray:e=null,allowNegativeOffset:n=!1,ignoreDestinationZoom:r=!1}){if(!this.pdfDocument)return;const o=Number.isInteger(t)&&this._pages[t-1];if(!o)return void console.error(`${this._name}.scrollPageIntoView: `+`"${t}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!e)return void this._setCurrentPageNumber(t,!0);let s,a,l=0,c=0,u=0,h=0;const d=o.rotation%180!=0,p=(d?o.height:o.width)/o.scale/i.CSS_UNITS,f=(d?o.width:o.height)/o.scale/i.CSS_UNITS;let m=0;switch(e[1].name){case"XYZ":l=e[2],c=e[3],m=e[4],l=null!==l?l:0,c=null!==c?c:f;break;case"Fit":case"FitB":m="page-fit";break;case"FitH":case"FitBH":c=e[2],m="page-width",null===c&&this._location&&(l=this._location.left,c=this._location.top);break;case"FitV":case"FitBV":l=e[2],u=p,h=f,m="page-height";break;case"FitR":l=e[2],c=e[3],u=e[4]-l,h=e[5]-c,s=(this.container.clientWidth-(this.removePageBorders?0:i.SCROLLBAR_PADDING))/u/i.CSS_UNITS,a=(this.container.clientHeight-(this.removePageBorders?0:i.VERTICAL_PADDING))/h/i.CSS_UNITS,m=Math.min(Math.abs(s),Math.abs(a));break;default:return void console.error(`${this._name}.scrollPageIntoView: `+`"${e[1].name}" is not a valid destination type.`)}if(r||(m&&m!==this._currentScale?this.currentScaleValue=m:this._currentScale===i.UNKNOWN_SCALE&&(this.currentScaleValue=i.DEFAULT_SCALE_VALUE)),"page-fit"===m&&!e[4])return void this._scrollIntoView({pageDiv:o.div,pageNumber:t});const g=[o.viewport.convertToViewportPoint(l,c),o.viewport.convertToViewportPoint(l+u,c+h)];let v=Math.min(g[0][0],g[1][0]),y=Math.min(g[0][1],g[1][1]);n||(v=Math.max(v,0),y=Math.max(y,0)),this._scrollIntoView({pageDiv:o.div,pageSpot:{left:v,top:y},pageNumber:t})}_updateLocation(t){const e=this._currentScale,n=this._currentScaleValue,i=parseFloat(n)===e?Math.round(1e4*e)/100:n,r=t.id;let o="#page="+r;o+="&zoom="+i;const s=this.container,a=this._pages[r-1].getPagePoint(s.scrollLeft-t.x,s.scrollTop-t.y),l=Math.round(a[0]),c=Math.round(a[1]);o+=","+l+","+c,this._location={pageNumber:r,scale:i,top:c,left:l,rotation:this._pagesRotation,pdfOpenParams:o}}_updateHelper(t){throw new Error("Not implemented: _updateHelper")}update(){const t=this._getVisiblePages(),e=t.views,n=e.length;if(0===n)return;const i=Math.max(10,2*n+1);this._buffer.resize(i,e),this.renderingQueue.renderHighestPriority(t),this._updateHelper(e),this._updateLocation(t.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(t){return this.container.contains(t)}focus(){this.container.focus()}get _isScrollModeHorizontal(){return!this.isInPresentationMode&&this._scrollMode===i.ScrollMode.HORIZONTAL}get isInPresentationMode(){return this.presentationModeState===i.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===i.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getCurrentVisiblePage(){if(!this.pagesCount)return{views:[]};const t=this._pages[this._currentPageNumber-1],e=t.div,n={id:t.id,x:e.offsetLeft+e.clientLeft,y:e.offsetTop+e.clientTop,view:t};return{first:n,last:n,views:[n]}}_getVisiblePages(){return(0,i.getVisibleElements)(this.container,this._pages,!0,this._isScrollModeHorizontal)}isPageVisible(t){return!!this.pdfDocument&&(t<1||t>this.pagesCount?(console.error(`${this._name}.isPageVisible: "${t}" is out of bounds.`),!1):this._getVisiblePages().views.some((function(e){return e.id===t})))}cleanup(){for(let t=0,e=this._pages.length;t<e;t++)this._pages[t]&&this._pages[t].renderingState!==r.RenderingStates.FINISHED&&this._pages[t].reset()}_cancelRendering(){for(let t=0,e=this._pages.length;t<e;t++)this._pages[t]&&this._pages[t].cancelRendering()}_ensurePdfPageLoaded(t){if(t.pdfPage)return Promise.resolve(t.pdfPage);if(this._pagesRequests.has(t))return this._pagesRequests.get(t);const e=this.pdfDocument.getPage(t.id).then(e=>(t.pdfPage||t.setPdfPage(e),this._pagesRequests.delete(t),e)).catch(e=>{console.error("Unable to get page for page view",e),this._pagesRequests.delete(t)});return this._pagesRequests.set(t,e),e}forceRendering(t){const e=t||this._getVisiblePages(),n=this.renderingQueue.getHighestPriority(e,this._pages,this._isScrollModeHorizontal?this.scroll.right:this.scroll.down);return!!n&&(this._ensurePdfPageLoaded(n).then(()=>{this.renderingQueue.renderView(n)}),!0)}createTextLayerBuilder(t,e,n,i=!1,r){return new c.TextLayerBuilder({textLayerDiv:t,eventBus:r,pageIndex:e,viewport:n,findController:this.isInPresentationMode?null:this.findController,enhanceTextSelection:!this.isInPresentationMode&&i})}createAnnotationLayerBuilder(t,e,n="",r=!1,s=i.NullL10n){return new o.AnnotationLayerBuilder({pageDiv:t,pdfPage:e,imageResourcesPath:n,renderInteractiveForms:r,linkService:this.linkService,downloadManager:this.downloadManager,l10n:s})}get hasEqualPageSizes(){const t=this._pages[0];for(let e=1,n=this._pages.length;e<n;++e){const n=this._pages[e];if(n.width!==t.width||n.height!==t.height)return!1}return!0}getPagesOverview(){const t=this._pages.map((function(t){const e=t.pdfPage.getViewport({scale:1});return{width:e.width,height:e.height,rotation:e.rotation}}));if(!this.enablePrintAutoRotate)return t;const e=(0,i.isPortraitOrientation)(t[0]);return t.map((function(t){return e===(0,i.isPortraitOrientation)(t)?t:{width:t.height,height:t.width,rotation:(t.rotation+90)%360}}))}get scrollMode(){return this._scrollMode}set scrollMode(t){if(this._scrollMode!==t){if(!(0,i.isValidScrollMode)(t))throw new Error(`Invalid scroll mode: ${t}`);this._scrollMode=t,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:t}),this._updateScrollMode(this._currentPageNumber)}}_updateScrollMode(t=null){const e=this._scrollMode,n=this.viewer;n.classList.toggle("scrollHorizontal",e===i.ScrollMode.HORIZONTAL),n.classList.toggle("scrollWrapped",e===i.ScrollMode.WRAPPED),this.pdfDocument&&t&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(t,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(t){if(this._spreadMode!==t){if(!(0,i.isValidSpreadMode)(t))throw new Error(`Invalid spread mode: ${t}`);this._spreadMode=t,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:t}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(t=null){if(!this.pdfDocument)return;const e=this.viewer,n=this._pages;if(e.textContent="",this._spreadMode===i.SpreadMode.NONE)for(let i=0,r=n.length;i<r;++i)e.appendChild(n[i].div);else{const t=this._spreadMode-1;let i=null;for(let r=0,o=n.length;r<o;++r)null===i?(i=document.createElement("div"),i.className="spread",e.appendChild(i)):r%2===t&&(i=i.cloneNode(!1),e.appendChild(i)),i.appendChild(n[r].div)}t&&(this._setCurrentPageNumber(t,!0),this.update())}}e.BaseViewer=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PDFViewer=void 0;var i=n(16),r=n(2);e.PDFViewer=class extends i.BaseViewer{get _viewerElement(){return(0,r.shadow)(this,"_viewerElement",this.viewer)}_scrollIntoView({pageDiv:t,pageSpot:e=null,pageNumber:n=null}){if(!e&&!this.isInPresentationMode){const n=t.offsetLeft+t.clientLeft,i=n+t.clientWidth,{scrollLeft:r,clientWidth:o}=this.container;(this._isScrollModeHorizontal||n<r||i>r+o)&&(e={left:0,top:0})}super._scrollIntoView({pageDiv:t,pageSpot:e,pageNumber:n})}_getVisiblePages(){return this.isInPresentationMode?this._getCurrentVisiblePage():super._getVisiblePages()}_updateHelper(t){if(this.isInPresentationMode)return;let e=this._currentPageNumber,n=!1;for(const i of t){if(i.percent<100)break;if(i.id===e){n=!0;break}}n||(e=t[0].id),this._setCurrentPageNumber(e)}}}])},t.exports=r()},mrSG:function(t,n,i){"use strict";i.r(n),i.d(n,"__extends",(function(){return o})),i.d(n,"__assign",(function(){return s})),i.d(n,"__rest",(function(){return a})),i.d(n,"__decorate",(function(){return l})),i.d(n,"__param",(function(){return c})),i.d(n,"__metadata",(function(){return u})),i.d(n,"__awaiter",(function(){return h})),i.d(n,"__generator",(function(){return d})),i.d(n,"__exportStar",(function(){return p})),i.d(n,"__values",(function(){return f})),i.d(n,"__read",(function(){return m})),i.d(n,"__spread",(function(){return g})),i.d(n,"__spreadArrays",(function(){return v})),i.d(n,"__await",(function(){return y})),i.d(n,"__asyncGenerator",(function(){return b})),i.d(n,"__asyncDelegator",(function(){return _})),i.d(n,"__asyncValues",(function(){return w})),i.d(n,"__makeTemplateObject",(function(){return A})),i.d(n,"__importStar",(function(){return x})),i.d(n,"__importDefault",(function(){return C})),i.d(n,"__classPrivateFieldGet",(function(){return E})),i.d(n,"__classPrivateFieldSet",(function(){return S}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function l(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function c(t,e){return function(n,i){e(n,i,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,n,i,r){return new(i||(i=Promise))((function(o,s){function a(t){try{c(r.next(t))}catch(e){s(e)}}function l(t){try{c(r.throw(t))}catch(e){s(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,l)}c((r=r.apply(t,n||[])).next())}))}function d(t,n){var i,r,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=n.call(t,a)}catch(e){s=[6,e],r=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function p(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t}function v(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function b(t,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=i.apply(t,n||[]),s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){o[t]&&(r[t]=function(e){return new Promise((function(n,i){s.push([t,e,n,i])>1||l(t,e)}))})}function l(t,n){try{(i=o[t](n)).value instanceof y?Promise.resolve(i.value.v).then(c,u):h(s[0][2],i)}catch(e){h(s[0][3],e)}var i}function c(t){l("next",t)}function u(t){l("throw",t)}function h(t,e){t(e),s.shift(),s.length&&l(s[0][0],s[0][1])}}function _(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:y(t[i](e)),done:"return"===i}:r?r(e):e}:r}}function w(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=f(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){!function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)}(i,r,(e=t[n](e)).done,e.value)}))}}}function A(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function x(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function C(t){return t&&t.__esModule?t:{default:t}}function E(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},"q/0M":function(t,e,n){"use strict";function i(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}var r;n.r(e),n.d(e,"LogLevel",(function(){return s})),n.d(e,"Logger",(function(){return h})),n.d(e,"setLogLevel",(function(){return d})),n.d(e,"setUserLogHandler",(function(){return p}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},l=s.INFO,c=((r={})[s.DEBUG]="log",r[s.VERBOSE]="log",r[s.INFO]="info",r[s.WARN]="warn",r[s.ERROR]="error",r),u=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,i(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=l,this._logHandler=u,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.DEBUG],t)),this._logHandler.apply(this,i([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.VERBOSE],t)),this._logHandler.apply(this,i([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.INFO],t)),this._logHandler.apply(this,i([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.WARN],t)),this._logHandler.apply(this,i([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,s.ERROR],t)),this._logHandler.apply(this,i([this,s.ERROR],t))},t}();function d(t){o.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var i=null;e&&e.level&&(i=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var a=r.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=i?i:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:r,type:e.name})}},i=0,r=o;i<r.length;i++)n(r[i])}},sEhn:function(t,n,i){t.exports=function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,(function(t){return r(e[s][1][t]||t)}),c,c.exports,t,e,n,i)}return n[s].exports}for(var o=!1,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){var i=Object.prototype.toString;e.exports=function(t){return t.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===i.call(t.buffer)||Array.isArray(t)}},{}],2:[function(t,e,n){e.exports=function(t,e){return"number"==typeof t?t:"number"==typeof e?e:0}},{}],3:[function(t,e,n){"use strict";n.byteLength=function(t){var e=c(t),n=e[1];return 3*(e[0]+n)/4-n},n.toByteArray=function(t){for(var e,n=c(t),i=n[0],s=n[1],a=new o(function(t,e,n){return 3*(e+n)/4-n}(0,i,s)),l=0,u=s>0?i-4:i,h=0;h<u;h+=4)e=r[t.charCodeAt(h)]<<18|r[t.charCodeAt(h+1)]<<12|r[t.charCodeAt(h+2)]<<6|r[t.charCodeAt(h+3)],a[l++]=e>>16&255,a[l++]=e>>8&255,a[l++]=255&e;return 2===s&&(e=r[t.charCodeAt(h)]<<2|r[t.charCodeAt(h+1)]>>4,a[l++]=255&e),1===s&&(e=r[t.charCodeAt(h)]<<10|r[t.charCodeAt(h+1)]<<4|r[t.charCodeAt(h+2)]>>2,a[l++]=e>>8&255,a[l++]=255&e),a},n.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o=[],s=0,a=n-r;s<a;s+=16383)o.push(u(t,s,s+16383>a?a:s+16383));return 1===r?o.push(i[(e=t[n-1])>>2]+i[e<<4&63]+"=="):2===r&&o.push(i[(e=(t[n-2]<<8)+t[n-1])>>10]+i[e>>4&63]+i[e<<2&63]+"="),o.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,n){for(var r,o=[],s=e;s<n;s+=3)o.push(i[(r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]))>>18&63]+i[r>>12&63]+i[r>>6&63]+i[63&r]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],4:[function(t,e,n){"use strict";e.exports={createLink:function(t,e){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("link");for(var r in i.href=t,i.rel="stylesheet",e)e.hasOwnProperty(r)&&i.setAttribute("data-"+r,e[r]);n.appendChild(i)},createStyle:function(t,e){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");for(var r in i.type="text/css",e)e.hasOwnProperty(r)&&i.setAttribute("data-"+r,e[r]);i.sheet?(i.innerHTML=t,i.sheet.cssText=t,n.appendChild(i)):i.styleSheet?(n.appendChild(i),i.styleSheet.cssText=t):(i.appendChild(document.createTextNode(t)),n.appendChild(i))}}},{}],5:[function(t,e,n){var i=t("buffer").Buffer;e.exports=function(t,e){if(i.isBuffer(t)&&i.isBuffer(e)){if("function"==typeof t.equals)return t.equals(e);if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}}},{buffer:6}],6:[function(t,n,i){(function(n,r){"use strict";var o=t("base64-js"),s=t("ieee754"),a=t("isarray");function l(){return r.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(l()<e)throw new RangeError("Invalid typed array length");return r.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=r.prototype:(null===t&&(t=new r(e)),t.length=e),t}function r(t,e,n){if(!(r.TYPED_ARRAY_SUPPORT||this instanceof r))return new r(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return u(this,t,e,n)}function u(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),r.TYPED_ARRAY_SUPPORT?(t=e).__proto__=r.prototype:t=p(t,e),t}(t,e,n,i):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!r.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|m(e,n),o=(t=c(t,i)).write(e,n);return o!==i&&(t=t.slice(0,o)),t}(t,e,n):function(t,e){if(r.isBuffer(e)){var n=0|f(e.length);return 0===(t=c(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?c(t,0):p(t,e);if("Buffer"===e.type&&a(e.data))return p(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e){if(h(e),t=c(t,e<0?0:0|f(e)),!r.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e){var n=e.length<0?0:0|f(e.length);t=c(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function f(t){if(t>=l())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l().toString(16)+" bytes");return 0|t}function m(t,e){if(r.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(t).length;default:if(i)return V(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,n);case"utf8":case"utf-8":return M(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function v(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function y(t,e,n,i,o){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=r.from(e,i)),r.isBuffer(e))return 0===e.length?-1:b(t,e,n,i,o);if("number"==typeof e)return e&=255,r.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,i,o);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,i,r){var o,s=1,a=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var u=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var h=!0,d=0;d<l;d++)if(c(t,o+d)!==c(e,d)){h=!1;break}if(h)return o}return-1}function _(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function w(t,e,n,i){return z(V(e,t.length-n),t,n,i)}function A(t,e,n,i){return z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function x(t,e,n,i){return A(t,e,n,i)}function C(t,e,n,i){return z(j(e),t,n,i)}function E(t,e,n,i){return z(function(t,e){for(var n,i,r=[],o=0;o<t.length&&!((e-=2)<0);++o)i=(n=t.charCodeAt(o))>>8,r.push(n%256),r.push(i);return r}(e,t.length-n),t,n,i)}function S(t,e,n){return o.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function M(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,l,c=t[r],u=null,h=c>239?4:c>223?3:c>191?2:1;if(r+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=t[r+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:s=t[r+2],128==(192&(o=t[r+1]))&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=t[r+2],a=t[r+3],128==(192&(o=t[r+1]))&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(i.push((u-=65536)>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return n}(i)}function T(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function P(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function k(t,e,n){var i,r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",s=e;s<n;++s)o+=(i=t[s])<16?"0"+i.toString(16):i.toString(16);return o}function D(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function O(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,i,o,s){if(!r.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<s)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function I(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function L(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function F(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,i,r){return r||F(t,0,n,4),s.write(t,e,n,i,23,4),n+4}function B(t,e,n,i,r){return r||F(t,0,n,8),s.write(t,e,n,i,52,8),n+8}i.Buffer=r,i.SlowBuffer=function(t){return+t!=t&&(t=0),r.alloc(+t)},i.INSPECT_MAX_BYTES=50,r.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),i.kMaxLength=l(),r.poolSize=8192,r._augment=function(t){return t.__proto__=r.prototype,t},r.from=function(t,e,n){return u(null,t,e,n)},r.TYPED_ARRAY_SUPPORT&&(r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0})),r.alloc=function(t,e,n){return function(t,e,n,i){return h(e),e<=0?c(null,e):void 0!==n?"string"==typeof i?c(null,e).fill(n,i):c(null,e).fill(n):c(null,e)}(0,t,e,n)},r.allocUnsafe=function(t){return d(null,t)},r.allocUnsafeSlow=function(t){return d(null,t)},r.isBuffer=function(t){return!(null==t||!t._isBuffer)},r.compare=function(t,e){if(!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,s=Math.min(n,i);o<s;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return r.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=r.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var s=t[n];if(!r.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},r.byteLength=m,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},r.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},r.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},r.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?M(this,0,t):g.apply(this,arguments)},r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===r.compare(this,t)},r.prototype.inspect=function(){var t="",e=i.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},r.prototype.compare=function(t,e,n,i,o){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(o>>>=0)-(i>>>=0),a=(n>>>=0)-(e>>>=0),l=Math.min(s,a),c=this.slice(i,o),u=t.slice(e,n),h=0;h<l;++h)if(c[h]!==u[h]){s=c[h],a=u[h];break}return s<a?-1:a<s?1:0},r.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},r.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},r.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},r.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return A(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return C(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),r.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=r.prototype;else{var o=e-t;n=new r(o,void 0);for(var s=0;s<o;++s)n[s]=this[s+t]}return n},r.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},r.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},r.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},r.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},r.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),s.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),s.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),s.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),s.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,e,n,i){t=+t,e|=0,n|=0,i||R(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},r.prototype.writeUIntBE=function(t,e,n,i){t=+t,e|=0,n|=0,i||R(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},r.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},r.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},r.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},r.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},r.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},r.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);R(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},r.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);R(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},r.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},r.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},r.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},r.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},r.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},r.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},r.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},r.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},r.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},r.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o,s=i-n;if(this===t&&n<e&&e<i)for(o=s-1;o>=0;--o)t[o+e]=this[o+n];else if(s<1e3||!r.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},r.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!r.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var a=r.isBuffer(t)?t:V(new r(t,i).toString()),l=a.length;for(s=0;s<n-e;++s)this[s+e]=a[s%l]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function V(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(t){return o.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"base64-js":3,buffer:6,ieee754:29,isarray:35}],7:[function(t,n,i){!function(){if("undefined"!=typeof window)try{var t=new window.CustomEvent("test",{cancelable:!0});if(t.preventDefault(),!0!==t.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var n=function(e,n){var i,r;return(n=n||{}).bubbles=!!n.bubbles,n.cancelable=!!n.cancelable,(i=document.createEvent("CustomEvent")).initCustomEvent(e,n.bubbles,n.cancelable,n.detail),r=i.preventDefault,i.preventDefault=function(){r.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(t){this.defaultPrevented=!0}},i};n.prototype=window.Event.prototype,window.CustomEvent=n}}()},{}],8:[function(t,n,i){function r(){var t;try{t=i.storage.debug}catch(e){}return t}(i=n.exports=t("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" "),!e)return t;var n="color: "+this.color;t=[t[0],n,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,r=0;return t[0].replace(/%[a-z%]/g,(function(t){"%%"!==t&&(i++,"%c"===t&&(r=i))})),t.splice(r,0,n),t},i.save=function(t){try{null==t?i.storage.removeItem("debug"):i.storage.debug=t}catch(e){}},i.load=r,i.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),i.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],i.formatters.j=function(t){return JSON.stringify(t)},i.enable(r())},{"./debug":9}],9:[function(t,e,n){(n=e.exports=function(t){function e(){}function i(){var t=i;null==t.useColors&&(t.useColors=n.useColors()),null==t.color&&t.useColors&&(t.color=r());var e=Array.prototype.slice.call(arguments);e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&(e=["%o"].concat(e));var o=0;e[0]=e[0].replace(/%([a-z%])/g,(function(i,r){if("%%"===i)return i;o++;var s=n.formatters[r];return"function"==typeof s&&(i=s.call(t,e[o]),e.splice(o,1),o--),i})),"function"==typeof n.formatArgs&&(e=n.formatArgs.apply(t,e));var s=i.log||n.log||console.log.bind(console);s.apply(t,e)}e.enabled=!1,i.enabled=!0;var o=n.enabled(t)?i:e;return o.namespace=t,o}).coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){n.enable("")},n.enable=function(t){n.save(t);for(var e=(t||"").split(/[\s,]+/),i=e.length,r=0;r<i;r++)e[r]&&("-"===(t=e[r].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))},n.enabled=function(t){var e,i;for(e=0,i=n.skips.length;e<i;e++)if(n.skips[e].test(t))return!1;for(e=0,i=n.names.length;e<i;e++)if(n.names[e].test(t))return!0;return!1},n.names=[],n.skips=[],n.formatters={};var i=0;function r(){return n.colors[i++%n.colors.length]}},{}],10:[function(t,e,n){"use strict";var i=t("is-obj"),r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null==t)throw new TypeError("Sources cannot be null or undefined");return Object(t)}function a(t,e,n){var o=e[n];if(null!=o){if(r.call(t,n)&&null==t[n])throw new TypeError("Cannot convert undefined or null to object ("+n+")");t[n]=r.call(t,n)&&i(o)?l(Object(t[n]),e[n]):o}}function l(t,e){if(t===e)return t;for(var n in e=Object(e))r.call(e,n)&&a(t,e,n);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),s=0;s<i.length;s++)o.call(e,i[s])&&a(t,e,i[s]);return t}e.exports=function(t){t=s(t);for(var e=1;e<arguments.length;e++)l(t,arguments[e]);return t}},{"is-obj":34}],11:[function(t,n,i){"use strict";var r=t("object-keys"),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),s=Object.prototype.toString,a=Array.prototype.concat,l=Object.defineProperty,c=l&&function(){var t={};try{for(var n in l(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(e){return!1}}(),u=function(t,e,n,i){var r;(!(e in t)||"function"==typeof(r=i)&&"[object Function]"===s.call(r)&&i())&&(c?l(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},h=function(t,e){var n=arguments.length>2?arguments[2]:{},i=r(e);o&&(i=a.call(i,Object.getOwnPropertySymbols(e)));for(var s=0;s<i.length;s+=1)u(t,i[s],e[i[s]],n[i[s]])};h.supportsDescriptors=!!c,n.exports=h},{"object-keys":41}],12:[function(t,n,i){!function(t,n,i,r){"use strict";function o(t,e){for(var n=0,i=t.length;n<i;n++)m(t[n],e)}function s(t){return function(e){nt(e)&&(m(e,t),o(e.querySelectorAll(U),t))}}function a(t){var e=ot.call(t,"is"),n=t.nodeName.toUpperCase(),i=j.call(N,e?I+e.toUpperCase():R+n);return e&&-1<i&&!l(n,e)?-1:i}function l(t,e){return-1<U.indexOf(t+'[is="'+e+'"]')}function c(t){var e=t.currentTarget,n=t.attrChange,i=t.attrName,r=t.target;mt&&(!r||r===e)&&e.attributeChangedCallback&&"style"!==i&&t.prevValue!==t.newValue&&e.attributeChangedCallback(i,n===t[M]?null:t.prevValue,n===t[P]?null:t.newValue)}function u(t){var e=s(t);return function(t){g.push(e,t.target)}}function h(t){ft&&(ft=!1,t.currentTarget.removeEventListener(D,h)),o((t.target||n).querySelectorAll(U),t.detail===E?E:C),et&&function(){for(var t,e=0,n=it.length;e<n;e++)V.contains(t=it[e])||(n--,it.splice(e--,1),m(t,E))}()}function d(t,e){var n=this;st.call(n,t,e),v.call(n,{target:n})}function p(t,e){Z(t,e),_?_.observe(t,ct):(pt&&(t.setAttribute=d,t[x]=b(t),t.addEventListener(O,v)),t.addEventListener(k,c)),t.createdCallback&&mt&&(t.created=!0,t.createdCallback(),t.created=!1)}function f(t){throw new Error("A "+t+" type is already registered")}function m(t,e){var n,i=a(t);-1<i&&(w(t,B[i]),i=0,e!==C||t[C]?e===E&&!t[E]&&(t[C]=!1,t[E]=!0,i=1):(t[E]=!1,t[C]=!0,i=1,et&&j.call(it,t)<0&&it.push(t)),i&&(n=t[e+"Callback"])&&n.call(t))}if(!(r in n)){var g,v,y,b,_,w,A,x="__"+r+(1e5*Math.random()>>0),C="attached",E="detached",S="extends",M="ADDITION",T="MODIFICATION",P="REMOVAL",k="DOMAttrModified",D="DOMContentLoaded",O="DOMSubtreeModified",R="<",I="=",L=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,F=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],N=[],B=[],U="",V=n.documentElement,j=N.indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},z=i.prototype,H=z.hasOwnProperty,G=z.isPrototypeOf,W=i.defineProperty,q=i.getOwnPropertyDescriptor,$=i.getOwnPropertyNames,Y=i.getPrototypeOf,Q=i.setPrototypeOf,X=!!i.__proto__,K=i.create||function t(e){return e?(t.prototype=e,new t):this},Z=Q||(X?function(t,e){return t.__proto__=e,t}:$&&q?function(){function t(t,e){for(var n,i=$(e),r=0,o=i.length;r<o;r++)H.call(t,n=i[r])||W(t,n,q(e,n))}return function(e,n){do{t(e,n)}while((n=Y(n))&&!G.call(n,e));return e}}():function(t,e){for(var n in e)t[n]=e[n];return t}),J=t.MutationObserver||t.WebKitMutationObserver,tt=(t.HTMLElement||t.Element||t.Node).prototype,et=!G.call(tt,V),nt=et?function(t){return 1===t.nodeType}:function(t){return G.call(tt,t)},it=et&&[],rt=tt.cloneNode,ot=tt.getAttribute,st=tt.setAttribute,at=tt.removeAttribute,lt=n.createElement,ct=J&&{attributes:!0,characterData:!0,attributeOldValue:!0},ut=J||function(t){pt=!1,V.removeEventListener(k,ut)},ht=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,10)},dt=!1,pt=!0,ft=!0,mt=!0;Q||X?(w=function(t,e){G.call(e,t)||p(t,e)},A=p):A=w=function(t,e){t[x]||(t[x]=i(!0),p(t,e))},et?(pt=!1,function(){var t=q(tt,"addEventListener"),n=t.value,i=function(t){var e=new CustomEvent(k,{bubbles:!0});e.attrName=t,e.prevValue=ot.call(this,t),e.newValue=null,e[P]=e.attrChange=2,at.call(this,t),this.dispatchEvent(e)},r=function(t,n){var i=this.hasAttribute(t),r=i&&ot.call(this,t);e=new CustomEvent(k,{bubbles:!0}),st.call(this,t,n),e.attrName=t,e.prevValue=i?r:null,e.newValue=n,i?e[T]=e.attrChange=1:e[M]=e.attrChange=0,this.dispatchEvent(e)},o=function(t){var e,n=t.currentTarget,i=n[x],r=t.propertyName;i.hasOwnProperty(r)&&(i=i[r],(e=new CustomEvent(k,{bubbles:!0})).attrName=i.name,e.prevValue=i.value||null,e.newValue=i.value=n[r]||null,null==e.prevValue?e[M]=e.attrChange=0:e[T]=e.attrChange=1,n.dispatchEvent(e))};t.value=function(t,e,s){t===k&&this.attributeChangedCallback&&this.setAttribute!==r&&(this[x]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=i,n.call(this,"propertychange",o)),n.call(this,t,e,s)},W(tt,"addEventListener",t)}()):J||(V.addEventListener(k,ut),V.setAttribute(x,1),V.removeAttribute(x),pt&&(v=function(t){var e,n,i,r=this;if(r===t.target){for(i in e=r[x],r[x]=n=b(r),n){if(!(i in e))return y(0,r,i,e[i],n[i],M);if(n[i]!==e[i])return y(1,r,i,e[i],n[i],T)}for(i in e)if(!(i in n))return y(2,r,i,e[i],n[i],P)}},y=function(t,e,n,i,r,o){var s={attrChange:t,currentTarget:e,attrName:n,prevValue:i,newValue:r};s[o]=t,c(s)},b=function(t){for(var e,n,i={},r=t.attributes,o=0,s=r.length;o<s;o++)"setAttribute"!==(n=(e=r[o]).name)&&(i[n]=e.value);return i})),n[r]=function(t,e){if(i=t.toUpperCase(),dt||(dt=!0,J?(_=function(t,e){function n(t,e){for(var n=0,i=t.length;n<i;e(t[n++]));}return new J((function(i){for(var r,o,s,a=0,l=i.length;a<l;a++)"childList"===(r=i[a]).type?(n(r.addedNodes,t),n(r.removedNodes,e)):(o=r.target,mt&&o.attributeChangedCallback&&"style"!==r.attributeName&&(s=ot.call(o,r.attributeName))!==r.oldValue&&o.attributeChangedCallback(r.attributeName,r.oldValue,s))}))}(s(C),s(E))).observe(n,{childList:!0,subtree:!0}):(g=[],ht((function t(){for(;g.length;)g.shift().call(null,g.shift());ht(t)})),n.addEventListener("DOMNodeInserted",u(C)),n.addEventListener("DOMNodeRemoved",u(E))),n.addEventListener(D,h),n.addEventListener("readystatechange",h),n.createElement=function(t,e){var i=lt.apply(n,arguments),r=""+t,o=j.call(N,(e?I:R)+(e||r).toUpperCase()),s=-1<o;return e&&(i.setAttribute("is",e=e.toLowerCase()),s&&(s=l(r.toUpperCase(),e))),mt=!n.createElement.innerHTMLHelper,s&&A(i,B[o]),i},tt.cloneNode=function(t){var e=rt.call(this,!!t),n=a(e);return-1<n&&A(e,B[n]),t&&function(t){for(var e,n=0,i=t.length;n<i;n++)A(e=t[n],B[a(e)])}(e.querySelectorAll(U)),e}),-2<j.call(N,I+i)+j.call(N,R+i)&&f(t),!L.test(i)||-1<j.call(F,i))throw new Error("The type "+t+" is invalid");var i,r,c=function(){return p?n.createElement(m,i):n.createElement(m)},d=e||z,p=H.call(d,S),m=p?e[S].toUpperCase():i;return p&&-1<j.call(N,R+m)&&f(m),r=N.push((p?I:R)+i)-1,U=U.concat(U.length?",":"",p?m+'[is="'+t.toLowerCase()+'"]':m),c.prototype=B[r]=H.call(d,"prototype")?d.prototype:K(tt),o(n.querySelectorAll(U),C),c}}}(window,document,Object,"registerElement")},{}],13:[function(t,e,n){e.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],14:[function(t,e,n){"use strict";var i=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,o=Object.getPrototypeOf||function(t){return t.__proto__},s="undefined"==typeof Uint8Array?void 0:o(Uint8Array),a={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":r?o([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":void 0,"$ %Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?void 0:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":r?o(o([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&r?o((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&r?o((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":r?o(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":r?Symbol:void 0,"$ %SymbolPrototype%":r?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":i,"$ %TypedArray%":s,"$ %TypedArrayPrototype%":s?s.prototype:void 0,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype};e.exports=function(t,e){if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');var n="$ "+t;if(!(n in a))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===a[n]&&!e)throw new TypeError("intrinsic "+t+" exists, but is not available. Please file an issue!");return a[n]}},{}],15:[function(t,e,n){"use strict";var i=t("./GetIntrinsic"),r=i("%Object%"),o=i("%TypeError%"),s=i("%String%"),a=t("./helpers/assertRecord"),l=t("./helpers/isNaN"),c=t("./helpers/isFinite"),u=t("./helpers/sign"),h=t("./helpers/mod"),d=t("is-callable"),p=t("es-to-primitive/es5"),f=t("has");e.exports={ToPrimitive:p,ToBoolean:function(t){return!!t},ToNumber:function(t){return+t},ToInteger:function(t){var e=this.ToNumber(t);return l(e)?0:0!==e&&c(e)?u(e)*Math.floor(Math.abs(e)):e},ToInt32:function(t){return this.ToNumber(t)>>0},ToUint32:function(t){return this.ToNumber(t)>>>0},ToUint16:function(t){var e=this.ToNumber(t);if(l(e)||0===e||!c(e))return 0;var n=u(e)*Math.floor(Math.abs(e));return h(n,65536)},ToString:function(t){return s(t)},ToObject:function(t){return this.CheckObjectCoercible(t),r(t)},CheckObjectCoercible:function(t,e){if(null==t)throw new o(e||"Cannot call method on "+t);return t},IsCallable:d,SameValue:function(t,e){return t===e?0!==t||1/t==1/e:l(t)&&l(e)},Type:function(t){return null===t?"Null":void 0===t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0},IsPropertyDescriptor:function(t){if("Object"!==this.Type(t))return!1;var e={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in t)if(f(t,n)&&!e[n])return!1;var i=f(t,"[[Value]]"),r=f(t,"[[Get]]")||f(t,"[[Set]]");if(i&&r)throw new o("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(t){return void 0!==t&&(a(this,"Property Descriptor","Desc",t),!(!f(t,"[[Get]]")&&!f(t,"[[Set]]")))},IsDataDescriptor:function(t){return void 0!==t&&(a(this,"Property Descriptor","Desc",t),!(!f(t,"[[Value]]")&&!f(t,"[[Writable]]")))},IsGenericDescriptor:function(t){return void 0!==t&&(a(this,"Property Descriptor","Desc",t),!this.IsAccessorDescriptor(t)&&!this.IsDataDescriptor(t))},FromPropertyDescriptor:function(t){if(void 0===t)return t;if(a(this,"Property Descriptor","Desc",t),this.IsDataDescriptor(t))return{value:t["[[Value]]"],writable:!!t["[[Writable]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};if(this.IsAccessorDescriptor(t))return{get:t["[[Get]]"],set:t["[[Set]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};throw new o("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(t){if("Object"!==this.Type(t))throw new o("ToPropertyDescriptor requires an object");var e={};if(f(t,"enumerable")&&(e["[[Enumerable]]"]=this.ToBoolean(t.enumerable)),f(t,"configurable")&&(e["[[Configurable]]"]=this.ToBoolean(t.configurable)),f(t,"value")&&(e["[[Value]]"]=t.value),f(t,"writable")&&(e["[[Writable]]"]=this.ToBoolean(t.writable)),f(t,"get")){var n=t.get;if(void 0!==n&&!this.IsCallable(n))throw new TypeError("getter must be a function");e["[[Get]]"]=n}if(f(t,"set")){var i=t.set;if(void 0!==i&&!this.IsCallable(i))throw new o("setter must be a function");e["[[Set]]"]=i}if((f(e,"[[Get]]")||f(e,"[[Set]]"))&&(f(e,"[[Value]]")||f(e,"[[Writable]]")))throw new o("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return e}}},{"./GetIntrinsic":14,"./helpers/assertRecord":16,"./helpers/isFinite":17,"./helpers/isNaN":18,"./helpers/mod":19,"./helpers/sign":20,"es-to-primitive/es5":21,has:28,"is-callable":32}],16:[function(t,e,n){"use strict";var i=t("../GetIntrinsic"),r=i("%TypeError%"),o=i("%SyntaxError%"),s=t("has"),a={"Property Descriptor":function(t,e){if("Object"!==t.Type(e))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var i in e)if(s(e,i)&&!n[i])return!1;var o=s(e,"[[Value]]"),a=s(e,"[[Get]]")||s(e,"[[Set]]");if(o&&a)throw new r("Property Descriptors may not be both accessor and data descriptors");return!0}};e.exports=function(t,e,n,i){var s=a[e];if("function"!=typeof s)throw new o("unknown record type: "+e);if(!s(t,i))throw new r(n+" must be a "+e);console.log(s(t,i),i)}},{"../GetIntrinsic":14,has:28}],17:[function(t,e,n){var i=Number.isNaN||function(t){return t!=t};e.exports=Number.isFinite||function(t){return"number"==typeof t&&!i(t)&&t!==1/0&&t!==-1/0}},{}],18:[function(t,e,n){e.exports=Number.isNaN||function(t){return t!=t}},{}],19:[function(t,e,n){e.exports=function(t,e){var n=t%e;return Math.floor(n>=0?n:n+e)}},{}],20:[function(t,e,n){e.exports=function(t){return t>=0?1:-1}},{}],21:[function(t,e,n){"use strict";var i=Object.prototype.toString,r=t("./helpers/isPrimitive"),o=t("is-callable"),s=function(t){var e;if((e=arguments.length>1?arguments[1]:"[object Date]"===i.call(t)?String:Number)===String||e===Number){var n,s,a=e===String?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<a.length;++s)if(o(t[a[s]])&&(n=t[a[s]](),r(n)))return n;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};e.exports=function(t){return r(t)?t:arguments.length>1?s(t,arguments[1]):s(t)}},{"./helpers/isPrimitive":22,"is-callable":32}],22:[function(t,e,n){e.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},{}],23:[function(t,e,n){var i=t("dtype");e.exports=function(t,e,n){if(!t)throw new TypeError("must specify data as first parameter");if(n=0|+(n||0),Array.isArray(t)&&t[0]&&"number"==typeof t[0][0]){var r,o,s,a,l=t[0].length,c=t.length*l;e&&"string"!=typeof e||(e=new(i(e||"float32"))(c+n));var u=e.length-n;if(c!==u)throw new Error("source length "+c+" ("+l+"x"+t.length+") does not match destination length "+u);for(r=0,s=n;r<t.length;r++)for(o=0;o<l;o++)e[s++]=null===t[r][o]?NaN:t[r][o]}else if(e&&"string"!=typeof e)e.set(t,n);else{var h=i(e||"float32");if(Array.isArray(t)||"array"===e)for(r=0,s=n,a=(e=new h(t.length+n)).length;s<a;s++,r++)e[s]=null===t[r]?NaN:t[r];else 0===n?e=new h(t):(e=new h(t.length+n)).set(t,n)}return e}},{dtype:13}],24:[function(t,e,n){"use strict";var i=t("is-callable"),r=Object.prototype.toString,o=Object.prototype.hasOwnProperty,s=function(t,e,n){for(var i=0,r=t.length;i<r;i++)o.call(t,i)&&(null==n?e(t[i],i,t):e.call(n,t[i],i,t))},a=function(t,e,n){for(var i=0,r=t.length;i<r;i++)null==n?e(t.charAt(i),i,t):e.call(n,t.charAt(i),i,t)},l=function(t,e,n){for(var i in t)o.call(t,i)&&(null==n?e(t[i],i,t):e.call(n,t[i],i,t))};e.exports=function(t,e,n){if(!i(e))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=n),"[object Array]"===r.call(t)?s(t,e,o):"string"==typeof t?a(t,e,o):l(t,e,o)}},{"is-callable":32}],25:[function(t,e,n){"use strict";var i="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,o=Object.prototype.toString;e.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==o.call(e))throw new TypeError(i+e);for(var n,s=r.call(arguments,1),a=function(){if(this instanceof n){var i=e.apply(this,s.concat(r.call(arguments)));return Object(i)===i?i:this}return e.apply(t,s.concat(r.call(arguments)))},l=Math.max(0,e.length-s.length),c=[],u=0;u<l;u++)c.push("$"+u);if(n=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(a),e.prototype){var h=function(){};h.prototype=e.prototype,n.prototype=new h,h.prototype=null}return n}},{}],26:[function(t,e,n){"use strict";var i=t("./implementation");e.exports=Function.prototype.bind||i},{"./implementation":25}],27:[function(t,e,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(t,e,n){"use strict";var i=t("function-bind");e.exports=i.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":26}],29:[function(t,e,n){n.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?r-1:0,d=n?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=c}return(p?-1:1)*s*Math.pow(2,o-i)},n.write=function(t,e,n,i,r,o){var s,a,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*l-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[n+p]=255&a,p+=f,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;t[n+p]=255&s,p+=f,s/=256,c-=8);t[n+p-f]|=128*m}},{}],30:[function(t,e,n){e.exports="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},{}],31:[function(t,e,n){function i(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.exports=function(t){return null!=t&&(i(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],32:[function(t,n,i){"use strict";var r=Function.prototype.toString,o=/^\s*class\b/,s=function(t){try{var n=r.call(t);return o.test(n)}catch(e){return!1}},a=Object.prototype.toString,l="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;n.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(l)return function(t){try{return!s(t)&&(r.call(t),!0)}catch(e){return!1}}(t);if(s(t))return!1;var n=a.call(t);return"[object Function]"===n||"[object GeneratorFunction]"===n}},{}],33:[function(t,e,n){e.exports=function(t){var e=i.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var i=Object.prototype.toString},{}],34:[function(t,e,n){"use strict";e.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}},{}],35:[function(t,e,n){var i={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},{}],36:[function(t,e,n){var i=t("word-wrapper"),r=t("xtend"),o=t("as-number"),s=["x","e","a","o","n","s","r","c","u","m","v","w","z"],a=["m","w"],l=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],c="\t".charCodeAt(0),u=" ".charCodeAt(0);function h(t){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(t)}function d(t){return new Function(["return function "+t+"() {","  return this._"+t,"}"].join("\n"))()}function p(t,e){if(!t.chars||0===t.chars.length)return null;var n=m(t.chars,e);return n>=0?t.chars[n]:null}function f(t,e,n){if(!t.kernings||0===t.kernings.length)return 0;for(var i=t.kernings,r=0;r<i.length;r++){var o=i[r];if(o.first===e&&o.second===n)return o.amount}return 0}function m(t,e,n){for(var i=n=n||0;i<t.length;i++)if(t[i].id===e)return i;return-1}e.exports=function(t){return new h(t)},h.prototype.update=function(t){if(t=r({measure:this._measure},t),this._opt=t,this._opt.tabSize=o(this._opt.tabSize,4),!t.font)throw new Error("must provide a valid bitmap font");var e=this.glyphs,n=t.text||"",a=t.font;this._setupSpaceGlyphs(a);var c=i.lines(n,t),u=t.width||0;e.length=0;var h=c.reduce((function(t,e){return Math.max(t,e.width,u)}),0),d=0,p=0,g=o(t.lineHeight,a.common.lineHeight),v=a.common.base,y=g-v,b=t.letterSpacing||0,_=g*c.length-y,w=function(t){return"center"===t?1:"right"===t?2:0}(this._opt.align);p-=_,this._width=h,this._height=_,this._descender=g-v,this._baseline=v,this._xHeight=function(t){for(var e=0;e<s.length;e++){var n=s[e].charCodeAt(0),i=m(t.chars,n);if(i>=0)return t.chars[i].height}return 0}(a),this._capHeight=function(t){for(var e=0;e<l.length;e++){var n=l[e].charCodeAt(0),i=m(t.chars,n);if(i>=0)return t.chars[i].height}return 0}(a),this._lineHeight=g,this._ascender=g-y-this._xHeight;var A=this;c.forEach((function(t,i){for(var r,o=t.end,s=t.width,l=t.start;l<o;l++){var c=n.charCodeAt(l),u=A.getGlyph(a,c);if(u){r&&(d+=f(a,r.id,u.id));var m=d;1===w?m+=(h-s)/2:2===w&&(m+=h-s),e.push({position:[m,p],data:u,index:l,line:i}),d+=u.xadvance+b,r=u}}p+=g,d=0})),this._linesTotal=c.length},h.prototype._setupSpaceGlyphs=function(t){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,t.chars&&0!==t.chars.length){var e=p(t,u)||function(t){for(var e=0;e<a.length;e++){var n=a[e].charCodeAt(0),i=m(t.chars,n);if(i>=0)return t.chars[i]}return 0}(t)||t.chars[0],n=this._opt.tabSize*e.xadvance;this._fallbackSpaceGlyph=e,this._fallbackTabGlyph=r(e,{x:0,y:0,xadvance:n,id:c,xoffset:0,yoffset:0,width:0,height:0})}},h.prototype.getGlyph=function(t,e){return p(t,e)||(e===c?this._fallbackTabGlyph:e===u?this._fallbackSpaceGlyph:null)},h.prototype.computeMetrics=function(t,e,n,i){var r,o=this._opt.letterSpacing||0,s=this._opt.font,a=0,l=0,c=0;if(!s.chars||0===s.chars.length)return{start:e,end:e,width:0};n=Math.min(t.length,n);for(var u=e;u<n;u++){var h,d=t.charCodeAt(u);if(h=this.getGlyph(s,d)){var p=(a+=r?f(s,r.id,h.id):0)+h.xadvance+o,m=a+h.width;if(m>=i||p>=i)break;a=p,l=m,r=h}c++}return r&&(l+=r.xoffset),{start:e,end:e+c,width:l}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach((function(t){Object.defineProperty(h.prototype,t,{get:d(t),configurable:!0})}))},{"as-number":2,"word-wrapper":68,xtend:71}],37:[function(t,n,i){(function(i){var r=t("xhr"),o=function(){},s=t("parse-bmfont-ascii"),a=t("parse-bmfont-xml"),l=t("parse-bmfont-binary"),c=t("./lib/is-binary"),u=t("xtend"),h=self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;n.exports=function(t,n){n="function"==typeof n?n:o,"string"==typeof t?t={uri:t}:t||(t={}),t.binary&&(t=function(t){if(h)return u(t,{responseType:"arraybuffer"});if(void 0===self.XMLHttpRequest)throw new Error("your browser does not support XHR loading");var e=new self.XMLHttpRequest;return e.overrideMimeType("text/plain; charset=x-user-defined"),u({xhr:e},t)}(t)),r(t,(function(r,u,h){if(r)return n(r);if(!/^2/.test(u.statusCode))return n(new Error("http status code: "+u.statusCode));if(!h)return n(new Error("no body result"));var d,p=!1;if("[object ArrayBuffer]"===Object.prototype.toString.call(h)){var f=new Uint8Array(h);h=new i(f,"binary")}c(h)&&(p=!0,"string"==typeof h&&(h=new i(h,"binary"))),p||(i.isBuffer(h)&&(h=h.toString(t.encoding)),h=h.trim());try{var m=u.headers["content-type"];d=p?l(h):/json/.test(m)||"{"===h.charAt(0)?JSON.parse(h):/xml/.test(m)||"<"===h.charAt(0)?a(h):s(h)}catch(e){n(new Error("error parsing font "+e.message)),n=o}n(null,d)}))}}).call(this,t("buffer").Buffer)},{"./lib/is-binary":38,buffer:6,"parse-bmfont-ascii":43,"parse-bmfont-binary":44,"parse-bmfont-xml":45,xhr:69,xtend:71}],38:[function(t,e,n){(function(n){var i=t("buffer-equal"),r=new n([66,77,70,3]);e.exports=function(t){return"string"==typeof t?"BMF"===t.substring(0,3):t.length>4&&i(t.slice(0,4),r)}}).call(this,t("buffer").Buffer)},{buffer:6,"buffer-equal":5}],39:[function(t,e,n){"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(t,e){for(var n,a,l=s(t),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))r.call(n,u)&&(l[u]=n[u]);if(i){a=i(n);for(var h=0;h<a.length;h++)o.call(n,a[h])&&(l[a[h]]=n[a[h]])}}return l}},{}],40:[function(t,n,i){"use strict";var r;if(!Object.keys){var o=Object.prototype.hasOwnProperty,s=Object.prototype.toString,a=t("./isArguments"),l=Object.prototype.propertyIsEnumerable,c=!l.call({toString:null},"toString"),u=l.call((function(){}),"prototype"),h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&o.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{d(window[t])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(t){var n=null!==t&&"object"==typeof t,i="[object Function]"===s.call(t),r=a(t),l=n&&"[object String]"===s.call(t),p=[];if(!n&&!i&&!r)throw new TypeError("Object.keys called on a non-object");var m=u&&i;if(l&&t.length>0&&!o.call(t,0))for(var g=0;g<t.length;++g)p.push(String(g));if(r&&t.length>0)for(var v=0;v<t.length;++v)p.push(String(v));else for(var y in t)m&&"prototype"===y||!o.call(t,y)||p.push(String(y));if(c)for(var b=function(t){if("undefined"==typeof window||!f)return d(t);try{return d(t)}catch(e){return!1}}(t),_=0;_<h.length;++_)b&&"constructor"===h[_]||!o.call(t,h[_])||p.push(h[_]);return p}}n.exports=r},{"./isArguments":42}],41:[function(t,e,n){"use strict";var i=Array.prototype.slice,r=t("./isArguments"),o=Object.keys,s=o?function(t){return o(t)}:t("./implementation"),a=Object.keys;s.shim=function(){return Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return r(t)?a(i.call(t)):a(t)}):Object.keys=s,Object.keys||s},e.exports=s},{"./implementation":40,"./isArguments":42}],42:[function(t,e,n){"use strict";var i=Object.prototype.toString;e.exports=function(t){var e=i.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===i.call(t.callee)),n}},{}],43:[function(t,e,n){function i(t,e){if(!(t=t.replace(/\t+/g," ").trim()))return null;var n=t.indexOf(" ");if(-1===n)throw new Error("no named row at line "+e);var i=t.substring(0,n);t=(t=(t=(t=t.substring(n+1)).replace(/letter=[\'\"]\S+[\'\"]/gi,"")).split("=")).map((function(t){return t.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)}));for(var o=[],s=0;s<t.length;s++){var a=t[s];0===s?o.push({key:a[0],data:""}):s===t.length-1?o[o.length-1].data=r(a[0]):(o[o.length-1].data=r(a[0]),o.push({key:a[1],data:""}))}var l={key:i,data:{}};return o.forEach((function(t){l.data[t.key]=t.data})),l}function r(t){return t&&0!==t.length?0===t.indexOf('"')||0===t.indexOf("'")?t.substring(1,t.length-1):-1!==t.indexOf(",")?function(t){return t.split(",").map((function(t){return parseInt(t,10)}))}(t):parseInt(t,10):""}e.exports=function(t){if(!t)throw new Error("no data provided");var e={pages:[],chars:[],kernings:[]},n=(t=t.toString().trim()).split(/\r\n?|\n/g);if(0===n.length)throw new Error("no data in BMFont file");for(var r=0;r<n.length;r++){var o=i(n[r],r);if(o)if("page"===o.key){if("number"!=typeof o.data.id)throw new Error("malformed file at line "+r+" -- needs page id=N");if("string"!=typeof o.data.file)throw new Error("malformed file at line "+r+' -- needs page file="path"');e.pages[o.data.id]=o.data.file}else"chars"===o.key||"kernings"===o.key||("char"===o.key?e.chars.push(o.data):"kerning"===o.key?e.kernings.push(o.data):e[o.key]=o.data)}return e}},{}],44:[function(t,e,n){var i=[66,77,70];function r(t,e,n){if(n>e.length-1)return 0;var i=e.readUInt8(n++),r=e.readInt32LE(n);switch(n+=4,i){case 1:t.info=function(t,e){var n={};n.size=t.readInt16LE(e);var i=t.readUInt8(e+2);return n.smooth=i>>7&1,n.unicode=i>>6&1,n.italic=i>>5&1,n.bold=i>>4&1,i>>3&1&&(n.fixedHeight=1),n.charset=t.readUInt8(e+3)||"",n.stretchH=t.readUInt16LE(e+4),n.aa=t.readUInt8(e+6),n.padding=[t.readInt8(e+7),t.readInt8(e+8),t.readInt8(e+9),t.readInt8(e+10)],n.spacing=[t.readInt8(e+11),t.readInt8(e+12)],n.outline=t.readUInt8(e+13),n.face=function(t,e){return o(t,e).toString("utf8")}(t,e+14),n}(e,n);break;case 2:t.common=function(t,e){var n={};return n.lineHeight=t.readUInt16LE(e),n.base=t.readUInt16LE(e+2),n.scaleW=t.readUInt16LE(e+4),n.scaleH=t.readUInt16LE(e+6),n.pages=t.readUInt16LE(e+8),t.readUInt8(e+10),n.packed=0,n.alphaChnl=t.readUInt8(e+11),n.redChnl=t.readUInt8(e+12),n.greenChnl=t.readUInt8(e+13),n.blueChnl=t.readUInt8(e+14),n}(e,n);break;case 3:t.pages=function(t,e,n){for(var i=[],r=o(t,e),s=r.length+1,a=n/s,l=0;l<a;l++)i[l]=t.slice(e,e+r.length).toString("utf8"),e+=s;return i}(e,n,r);break;case 4:t.chars=function(t,e,n){for(var i=[],r=n/20,o=0;o<r;o++){var s={},a=20*o;s.id=t.readUInt32LE(e+0+a),s.x=t.readUInt16LE(e+4+a),s.y=t.readUInt16LE(e+6+a),s.width=t.readUInt16LE(e+8+a),s.height=t.readUInt16LE(e+10+a),s.xoffset=t.readInt16LE(e+12+a),s.yoffset=t.readInt16LE(e+14+a),s.xadvance=t.readInt16LE(e+16+a),s.page=t.readUInt8(e+18+a),s.chnl=t.readUInt8(e+19+a),i[o]=s}return i}(e,n,r);break;case 5:t.kernings=function(t,e,n){for(var i=[],r=n/10,o=0;o<r;o++){var s={},a=10*o;s.first=t.readUInt32LE(e+0+a),s.second=t.readUInt32LE(e+4+a),s.amount=t.readInt16LE(e+8+a),i[o]=s}return i}(e,n,r)}return 5+r}function o(t,e){for(var n=e;n<t.length&&0!==t[n];n++);return t.slice(e,n)}e.exports=function(t){if(t.length<6)throw new Error("invalid buffer length for BMFont");if(!i.every((function(e,n){return t.readUInt8(n)===e})))throw new Error("BMFont missing BMF byte header");var e=3;if(t.readUInt8(e++)>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var n={kernings:[],chars:[]},o=0;o<5;o++)e+=r(n,t,e);return n}},{}],45:[function(t,e,n){var i=t("./parse-attribs"),r=t("xml-parse-from-string"),o={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};function s(t){return function(t){for(var e=[],n=0;n<t.attributes.length;n++)e.push(t.attributes[n]);return e}(t).reduce((function(t,e){var n;return t[o[(n=e.nodeName).toLowerCase()]||n]=e.nodeValue,t}),{})}e.exports=function(t){t=t.toString();var e=r(t),n={pages:[],chars:[],kernings:[]};["info","common"].forEach((function(t){var r=e.getElementsByTagName(t)[0];r&&(n[t]=i(s(r)))}));var o=e.getElementsByTagName("pages")[0];if(!o)throw new Error("malformed file -- no <pages> element");for(var a=o.getElementsByTagName("page"),l=0;l<a.length;l++){var c=a[l],u=parseInt(c.getAttribute("id"),10),h=c.getAttribute("file");if(isNaN(u))throw new Error('malformed file -- page "id" attribute is NaN');if(!h)throw new Error('malformed file -- needs page "file" attribute');n.pages[parseInt(u,10)]=h}return["chars","kernings"].forEach((function(t){var r=e.getElementsByTagName(t)[0];if(r)for(var o=t.substring(0,t.length-1),a=r.getElementsByTagName(o),l=0;l<a.length;l++)n[t].push(i(s(a[l])))})),n}},{"./parse-attribs":46,"xml-parse-from-string":70}],46:[function(t,e,n){e.exports=function(t){for(var e in"chasrset"in t&&(t.charset=t.chasrset,delete t.chasrset),t)"face"!==e&&"charset"!==e&&(t[e]="padding"===e||"spacing"===e?t[e].split(",").map((function(t){return parseInt(t,10)})):parseInt(t[e],10));return t}},{}],47:[function(t,e,n){var i=t("string.prototype.trim"),r=t("for-each");e.exports=function(t){if(!t)return{};var e={};return r(i(t).split("\n"),(function(t){var n=t.indexOf(":"),r=i(t.slice(0,n)).toLowerCase(),o=i(t.slice(n+1));void 0===e[r]?e[r]=o:"[object Array]"===Object.prototype.toString.call(e[r])?e[r].push(o):e[r]=[e[r],o]})),e}},{"for-each":24,"string.prototype.trim":53}],48:[function(t,e,n){(function(t){var n=t.performance||{},i=function(){for(var t=["now","webkitNow","msNow","mozNow","oNow"];t.length;){var e=t.shift();if(e in n)return n[e].bind(n)}var i=Date.now||function(){return(new Date).getTime()},r=(n.timing||{}).navigationStart||i();return function(){return i()-r}}();i.performanceNow=n.now,i.noConflict=function(){n.now=i.performanceNow},i.conflict=function(){n.now=i},i.conflict(),e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(t,n,i){var r,o,s=n.exports={};function a(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{o="function"==typeof clearTimeout?clearTimeout:l}catch(e){o=l}}();var u,h=[],d=!1,p=-1;function f(){d&&u&&(d=!1,u.length?h=u.concat(h):p=-1,h.length&&m())}function m(){if(!d){var t=c(f);d=!0;for(var n=h.length;n;){for(u=h,h=[];++p<n;)u&&u[p].run();p=-1,n=h.length}u=null,d=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===l||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function v(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new g(t,e)),1!==h.length||d||c(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=v,s.addListener=v,s.once=v,s.off=v,s.removeListener=v,s.removeAllListeners=v,s.emit=v,s.prependListener=v,s.prependOnceListener=v,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],50:[function(t,n,i){(function(t){!function(i){var r=setTimeout,o="function"==typeof t&&t||function(t){r(t,1)};function s(t,e){return function(){t.apply(e,arguments)}}var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function l(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],f(t,s(u,this),s(h,this))}function c(t){var n=this;null!==this._state?o((function(){var i=n._state?t.onFulfilled:t.onRejected;if(null!==i){var r;try{r=i(n._value)}catch(e){return void t.reject(e)}t.resolve(r)}else(n._state?t.resolve:t.reject)(n._value)})):this._deferreds.push(t)}function u(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void f(s(n,t),s(u,this),s(h,this))}this._state=!0,this._value=t,d.call(this)}catch(e){h.call(this,e)}}function h(t){this._state=!1,this._value=t,d.call(this)}function d(){for(var t=0,e=this._deferreds.length;t<e;t++)c.call(this,this._deferreds[t]);this._deferreds=null}function p(t,e,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i}function f(t,e,n){var i=!1;try{t((function(t){i||(i=!0,e(t))}),(function(t){i||(i=!0,n(t))}))}catch(r){if(i)return;i=!0,n(r)}}l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){var n=this;return new l((function(i,r){c.call(n,new p(t,e,i,r))}))},l.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&a(arguments[0])?arguments[0]:arguments);return new l((function(e,n){if(0===t.length)return e([]);var i=t.length;function r(o,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(t){r(o,t)}),n)}t[o]=s,0==--i&&e(t)}catch(l){n(l)}}for(var o=0;o<t.length;o++)r(o,t[o])}))},l.resolve=function(t){return t&&"object"==typeof t&&t.constructor===l?t:new l((function(e){e(t)}))},l.reject=function(t){return new l((function(e,n){n(t)}))},l.race=function(t){return new l((function(e,n){for(var i=0,r=t.length;i<r;i++)t[i].then(e,n)}))},l._setImmediateFn=function(t){o=t},void 0!==n&&n.exports?n.exports=l:i.Promise||(i.Promise=l)}(this)}).call(this,t("timers").setImmediate)},{timers:66}],51:[function(t,e,n){var i=t("dtype"),r=t("an-array"),o=t("is-buffer"),s=[0,2,3],a=[2,1,3];e.exports=function(t,e){t&&(r(t)||o(t))||(e=t||{},t=null);for(var n=(e="number"==typeof e?{count:e}:e||{}).start||0,l=!1!==e.clockwise?s:a,c=l[0],u=l[1],h=l[2],d=6*("number"==typeof e.count?e.count:1),p=t||new(i("string"==typeof e.type?e.type:"uint16"))(d),f=0,m=0;f<d;f+=6,m+=4){var g=f+n;p[g+0]=m+0,p[g+1]=m+1,p[g+2]=m+2,p[g+3]=m+c,p[g+4]=m+u,p[g+5]=m+h}return p}},{"an-array":1,dtype:13,"is-buffer":31}],52:[function(t,e,n){"use strict";var i=t("function-bind"),r=t("es-abstract/es5"),o=i.call(Function.call,String.prototype.replace),s=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,a=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;e.exports=function(){var t=r.ToString(r.CheckObjectCoercible(this));return o(o(t,s,""),a,"")}},{"es-abstract/es5":15,"function-bind":26}],53:[function(t,e,n){"use strict";var i=t("function-bind"),r=t("define-properties"),o=t("./implementation"),s=t("./polyfill"),a=t("./shim"),l=i.call(Function.call,s());r(l,{getPolyfill:s,implementation:o,shim:a}),e.exports=l},{"./implementation":52,"./polyfill":54,"./shim":55,"define-properties":11,"function-bind":26}],54:[function(t,e,n){"use strict";var i=t("./implementation");e.exports=function(){return String.prototype.trim&&"\u200b"==="\u200b".trim()?String.prototype.trim:i}},{"./implementation":52}],55:[function(t,e,n){"use strict";var i=t("define-properties"),r=t("./polyfill");e.exports=function(){var t=r();return i(String.prototype,{trim:t},{trim:function(){return String.prototype.trim!==t}}),t}},{"./polyfill":54,"define-properties":11}],56:[function(t,n,i){"use strict";var r={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},o={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},s=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],a={CSS:{},springs:{}};function l(t,e,n){return Math.min(Math.max(t,e),n)}function c(t,e){return t.indexOf(e)>-1}function u(t,e){return t.apply(null,e)}var h=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,d=/^rgb/,p=/^hsl/,f={arr:function(t){return Array.isArray(t)},obj:function(t){return c(Object.prototype.toString.call(t),"Object")},pth:function(t){return f.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||f.svg(t)},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},hex:function(t){return h.test(t)},rgb:function(t){return d.test(t)},hsl:function(t){return p.test(t)},col:function(t){return f.hex(t)||f.rgb(t)||f.hsl(t)},key:function(t){return!r.hasOwnProperty(t)&&!o.hasOwnProperty(t)&&"targets"!==t&&"keyframes"!==t}},m=/\(([^)]+)\)/;function g(t){var e=m.exec(t);return e?e[1].split(",").map((function(t){return parseFloat(t)})):[]}function v(t,e){var n=g(t),i=l(f.und(n[0])?1:n[0],.1,100),r=l(f.und(n[1])?100:n[1],.1,100),o=l(f.und(n[2])?10:n[2],.1,100),s=l(f.und(n[3])?0:n[3],.1,100),c=Math.sqrt(r/i),u=o/(2*Math.sqrt(r*i)),h=u<1?c*Math.sqrt(1-u*u):0,d=u<1?(u*c-s)/h:-s+c;function p(t){var n=e?e*t/1e3:t;return n=u<1?Math.exp(-n*u*c)*(1*Math.cos(h*n)+d*Math.sin(h*n)):(1+d*n)*Math.exp(-n*c),0===t||1===t?t:1-n}return e?p:function(){var e=a.springs[t];if(e)return e;for(var n=0,i=0;;)if(1===p(n+=1/6)){if(++i>=16)break}else i=0;var r=n*(1/6)*1e3;return a.springs[t]=r,r}}function y(t,e){void 0===t&&(t=1),void 0===e&&(e=.5);var n=l(t,1,10),i=l(e,.1,2);return function(t){return 0===t||1===t?t:-n*Math.pow(2,10*(t-1))*Math.sin((t-1-i/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/i)}}function b(t){return void 0===t&&(t=10),function(e){return Math.round(e*t)*(1/t)}}var _=function(){function t(t,e){return 1-3*e+3*t}function e(t,e){return 3*e-6*t}function n(t){return 3*t}function i(i,r,o){return((t(r,o)*i+e(r,o))*i+n(r))*i}function r(i,r,o){return 3*t(r,o)*i*i+2*e(r,o)*i+n(r)}return function(t,e,n,o){if(0<=t&&t<=1&&0<=n&&n<=1){var s=new Float32Array(11);if(t!==e||n!==o)for(var a=0;a<11;++a)s[a]=i(.1*a,t,n);return function(a){return t===e&&n===o||0===a||1===a?a:i(function(e){for(var o=0,a=1;10!==a&&s[a]<=e;++a)o+=.1;--a;var l=o+(e-s[a])/(s[a+1]-s[a])*.1,c=r(l,t,n);return c>=.001?function(t,e,n,o){for(var s=0;s<4;++s){var a=r(e,n,o);if(0===a)return e;e-=(i(e,n,o)-t)/a}return e}(e,l,t,n):0===c?l:function(t,e,n,r,o){var s,a,l=0;do{(s=i(a=e+(n-e)/2,r,o)-t)>0?n=a:e=a}while(Math.abs(s)>1e-7&&++l<10);return a}(e,o,o+.1,t,n)}(a),e,o)}}}}(),w=function(){var t=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],e={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],y],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(t,e){return function(n){return 1-y(t,e)(1-n)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(t,e){return function(n){return n<.5?y(t,e)(2*n)/2:1-y(t,e)(-2*n+2)/2}}]},n={linear:[.25,.25,.75,.75]};for(var i in e)for(var r=0,o=e[i].length;r<o;r++)n["ease"+i+t[r]]=e[i][r];return n}();function A(t,e){if(f.fnc(t))return t;var n=t.split("(")[0],i=w[n],r=g(t);switch(n){case"spring":return v(t,e);case"cubicBezier":return u(_,r);case"steps":return u(b,r);default:return f.fnc(i)?u(i,r):u(_,i)}}function x(t){try{return document.querySelectorAll(t)}catch(e){return}}var C=[];function E(t,e){for(var n=C,i=t.length,r=arguments.length>=2?arguments[1]:void 0,o=0;o<i;o++)if(o in t){var s=t[o];e.call(r,s,o,t)&&n.push(s)}return(C=t).length=0,n}function S(t,e){e||(e=[]);for(var n=0,i=t.length;n<i;n++){var r=t[n];Array.isArray(r)?S(r,e):e.push(r)}return e}function M(t){return f.arr(t)?t:(f.str(t)&&(t=x(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function T(t,e){return t.some((function(t){return t===e}))}function P(t){var e={};for(var n in t)e[n]=t[n];return e}function k(t,e){var n=P(t);for(var i in t)n[i]=e.hasOwnProperty(i)?e[i]:t[i];return n}function D(t,e){var n=P(t);for(var i in e)n[i]=f.und(t[i])?e[i]:t[i];return n}var O=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g,R=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,I=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,L=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,F=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g,N=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function B(t){var e=N.exec(t);if(e)return e[2]}function U(t,e){return f.fnc(t)?t(e.target,e.id,e.total):t}function V(t,e){return t.getAttribute(e)}function j(t,e,n){if(T([n,"deg","rad","turn"],B(e)))return e;var i=a.CSS[e+n];if(!f.und(i))return i;var r=document.createElement(t.tagName),o=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;o.appendChild(r),r.style.position="absolute",r.style.width=100+n;var s=100/r.offsetWidth;o.removeChild(r);var l=s*parseFloat(e);return a.CSS[e+n]=l,l}function z(t,e,n){if(e in t.style){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=t.style[e]||getComputedStyle(t).getPropertyValue(i)||"0";return n?j(t,r,n):r}}function H(t,e){return f.dom(t)&&!f.inp(t)&&(V(t,e)||f.svg(t)&&t[e])?"attribute":f.dom(t)&&T(s,e)?"transform":f.dom(t)&&"transform"!==e&&z(t,e)?"css":null!=t[e]?"object":void 0}var G=/(\w+)\(([^)]*)\)/g;function W(t){if(f.dom(t)){for(var e,n=t.style.transform||"",i=new Map;e=G.exec(n);)i.set(e[1],e[2]);return i}}function q(t,e,n,i){switch(H(t,e)){case"transform":return function(t,e,n,i){var r=c(e,"scale")?1:0+function(t){return c(t,"translate")||"perspective"===t?"px":c(t,"rotate")||c(t,"skew")?"deg":void 0}(e),o=W(t).get(e)||r;return n&&(n.transforms.list.set(e,o),n.transforms.last=e),i?j(t,o,i):o}(t,e,i,n);case"css":return z(t,e,n);case"attribute":return V(t,e);default:return t[e]||0}}var $=/^(\*=|\+=|-=)/;function Y(t,e){var n=$.exec(t);if(!n)return t;var i=B(t)||0,r=parseFloat(e),o=parseFloat(t.replace(n[0],""));switch(n[0][0]){case"+":return r+o+i;case"-":return r-o+i;case"*":return r*o+i}}var Q=/\s/g;function X(t,e){if(f.col(t))return function(t){return f.rgb(t)?(n=O.exec(e=t))?"rgba("+n[1]+",1)":e:f.hex(t)?function(t){var e=t.replace(R,(function(t,e,n,i){return e+e+n+n+i+i})),n=I.exec(e);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(t):f.hsl(t)?function(t){var e,n,i,r=L.exec(t)||F.exec(t),o=parseInt(r[1],10)/360,s=parseInt(r[2],10)/100,a=parseInt(r[3],10)/100,l=r[4]||1;function c(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(0==s)e=n=i=a;else{var u=a<.5?a*(1+s):a+s-a*s,h=2*a-u;e=c(h,u,o+1/3),n=c(h,u,o),i=c(h,u,o-1/3)}return"rgba("+255*e+","+255*n+","+255*i+","+l+")"}(t):void 0;var e,n}(t);var n=B(t),i=n?t.substr(0,t.length-n.length):t;return e&&!Q.test(t)?i+e:i}function K(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Z(t){for(var e,n=t.points,i=0,r=0;r<n.numberOfItems;r++){var o=n.getItem(r);r>0&&(i+=K(e,o)),e=o}return i}function J(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return function(t){return 2*Math.PI*V(t,"r")}(t);case"rect":return function(t){return 2*V(t,"width")+2*V(t,"height")}(t);case"line":return function(t){return K({x:V(t,"x1"),y:V(t,"y1")},{x:V(t,"x2"),y:V(t,"y2")})}(t);case"polyline":return Z(t);case"polygon":return function(t){var e=t.points;return Z(t)+K(e.getItem(e.numberOfItems-1),e.getItem(0))}(t)}}function tt(t,e){var n=e||{},i=n.el||function(t){for(var e=t.parentNode;f.svg(e)&&f.svg((e=e.parentNode).parentNode););return e}(t),r=i.getBoundingClientRect(),o=V(i,"viewBox"),s=r.width,a=r.height,l=n.viewBox||(o?o.split(" "):[0,0,s,a]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:s/l[2],h:a/l[3]}}function et(t,e){function n(n){return void 0===n&&(n=0),t.el.getPointAtLength(e+n>=1?e+n:0)}var i=tt(t.el,t.svg),r=n(),o=n(-1),s=n(1);switch(t.property){case"x":return(r.x-i.x)*i.w;case"y":return(r.y-i.y)*i.h;case"angle":return 180*Math.atan2(s.y-o.y,s.x-o.x)/Math.PI}}var nt=/-?\d*\.?\d+/g;function it(t,e){var n=X(f.pth(t)?t.totalLength:t,e)+"";return{original:n,numbers:n.match(nt)?n.match(nt).map(Number):[0],strings:f.str(t)||e?n.split(nt):[]}}function rt(t){return E(t?S(f.arr(t)?t.map(M):M(t)):[],(function(t,e,n){return n.indexOf(t)===e}))}function ot(t){var e=rt(t);return e.map((function(t,n){return{target:t,id:n,total:e.length,transforms:{list:W(t)}}}))}var st=/^spring/;function at(t,e){var n=P(e);if(st.test(n.easing)&&(n.duration=v(n.easing)),f.arr(t)){var i=t.length;2!==i||f.obj(t[0])?f.fnc(e.duration)||(n.duration=e.duration/i):t={value:t}}var r=f.arr(t)?t:[t];return r.map((function(t,n){var i=f.obj(t)&&!f.pth(t)?t:{value:t};return f.und(i.delay)&&(i.delay=n?0:e.delay),f.und(i.endDelay)&&(i.endDelay=n===r.length-1?e.endDelay:0),i})).map((function(t){return D(t,n)}))}var lt={css:function(t,e,n){return t.style[e]=n},attribute:function(t,e,n){return t.setAttribute(e,n)},object:function(t,e,n){return t[e]=n},transform:function(t,e,n,i,r){if(i.list.set(e,n),e===i.last||r){var o="";i.list.forEach((function(t,e){o+=e+"("+t+") "})),t.style.transform=o}}};function ct(t,e){for(var n=ot(t),i=0,r=n.length;i<r;i++){var o=n[i];for(var s in e){var a=U(e[s],o),l=o.target,c=B(a),u=q(l,s,c,o),h=Y(X(a,c||B(u)),u),d=H(l,s);lt[d](l,s,h,o.transforms,!0)}}}function ut(t,e){var n=t.length,i=function(t){return t.timelineOffset?t.timelineOffset:0},r={};return r.duration=n?Math.max.apply(Math,t.map((function(t){return i(t)+t.duration}))):e.duration,r.delay=n?Math.min.apply(Math,t.map((function(t){return i(t)+t.delay}))):e.delay,r.endDelay=n?r.duration-Math.max.apply(Math,t.map((function(t){return i(t)+t.duration-t.endDelay}))):e.endDelay,r}var ht,dt=0,pt=[],ft=[],mt=function(){function t(){ht=requestAnimationFrame(e)}function e(e){var n=pt.length;if(n){for(var i=0;i<n;){var r=pt[i];if(r.paused){var o=pt.indexOf(r);o>-1&&(pt.splice(o,1),n=pt.length)}else r.tick(e);i++}t()}else ht=cancelAnimationFrame(ht)}return t}();function gt(t){void 0===t&&(t={});var e,n=0,i=0,s=0,a=0,c=null;function u(){return window.Promise&&new Promise((function(t){return c=t}))}var h=u(),d=function(t){var e=k(r,t),n=k(o,t),i=function(t,e){var n=[],i=e.keyframes;for(var r in i&&(e=D(function(t){for(var e=E(S(t.map((function(t){return Object.keys(t)}))),(function(t){return f.key(t)})).reduce((function(t,e){return t.indexOf(e)<0&&t.push(e),t}),[]),n={},i=function(i){var r=e[i];n[r]=t.map((function(t){var e={};for(var n in t)f.key(n)?n==r&&(e.value=t[n]):e[n]=t[n];return e}))},r=0;r<e.length;r++)i(r);return n}(i),e)),e)f.key(r)&&n.push({name:r,tweens:at(e[r],t)});return n}(n,t),s=ot(t.targets),a=function(t,e){return E(S(t.map((function(t){return e.map((function(e){return function(t,e){var n=H(t.target,e.name);if(n){var i=function(t,e){var n;return t.tweens.map((function(i){var r=function(t,e){var n={};for(var i in t){var r=U(t[i],e);f.arr(r)&&1===(r=r.map((function(t){return U(t,e)}))).length&&(r=r[0]),n[i]=r}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(i,e),o=r.value,s=f.arr(o)?o[1]:o,a=B(s),l=q(e.target,t.name,a,e),c=n?n.to.original:l,u=f.arr(o)?o[0]:c,h=B(u)||B(l),d=a||h;return f.und(s)&&(s=c),r.from=it(u,d),r.to=it(Y(s,u),d),r.start=n?n.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=A(r.easing,r.duration),r.isPath=f.pth(o),r.isColor=f.col(r.from.original),r.isColor&&(r.round=1),n=r,r}))}(e,t),r=i[i.length-1];return{type:n,property:e.name,animatable:t,tweens:i,duration:r.end,delay:i[0].delay,endDelay:r.endDelay}}}(t,e)}))}))),(function(t){return!f.und(t)}))}(s,i),l=ut(a,n),c=dt;return dt++,D(e,{id:c,children:[],animatables:s,animations:a,duration:l.duration,delay:l.delay,endDelay:l.endDelay})}(t);function p(){d.reversed=!d.reversed;for(var t=0,n=e.length;t<n;t++)e[t].reversed=d.reversed}function m(t){return d.reversed?d.duration-t:t}function g(){n=0,i=m(d.currentTime)*(1/gt.speed)}function v(t,e){e&&e.seek(t-e.timelineOffset)}function y(t){for(var e=0,n=d.animations,i=n.length;e<i;){var r=n[e],o=r.animatable,s=r.tweens,a=s.length-1,c=s[a];a&&(c=E(s,(function(e){return t<e.end}))[0]||c);for(var u=l(t-c.start-c.delay,0,c.duration)/c.duration,h=isNaN(u)?1:c.easing(u),p=c.to.strings,f=c.round,m=[],g=c.to.numbers.length,v=void 0,y=0;y<g;y++){var b=void 0,_=c.to.numbers[y],w=c.from.numbers[y]||0;b=c.isPath?et(c.value,h*_):w+h*(_-w),f&&(c.isColor&&y>2||(b=Math.round(b*f)/f)),m.push(b)}var A=p.length;if(A){v=p[0];for(var x=0;x<A;x++){var C=p[x+1],S=m[x];isNaN(S)||(v+=C?S+C:S+" ")}}else v=m[0];lt[r.type](o.target,r.property,v,o.transforms),r.currentValue=v,e++}}function b(t){d[t]&&!d.passThrough&&d[t](d)}function _(t){var r=d.duration,o=d.delay,f=r-d.endDelay,g=m(t);d.progress=l(g/r*100,0,100),d.reversePlayback=g<d.currentTime,e&&function(t){if(d.reversePlayback)for(var n=a;n--;)v(t,e[n]);else for(var i=0;i<a;i++)v(t,e[i])}(g),!d.began&&d.currentTime>0&&(d.began=!0,b("begin"),b("loopBegin")),g<=o&&0!==d.currentTime&&y(0),(g>=f&&d.currentTime!==r||!r)&&y(r),g>o&&g<f?(d.changeBegan||(d.changeBegan=!0,d.changeCompleted=!1,b("changeBegin")),b("change"),y(g)):d.changeBegan&&(d.changeCompleted=!0,d.changeBegan=!1,b("changeComplete")),d.currentTime=l(g,0,r),d.began&&b("update"),t>=r&&(i=0,d.remaining&&!0!==d.remaining&&d.remaining--,d.remaining?(n=s,b("loopComplete"),b("loopBegin"),"alternate"===d.direction&&p()):(d.paused=!0,d.completed||(d.completed=!0,b("loopComplete"),b("complete"),"Promise"in window&&(c(),h=u()))))}return d.reset=function(){var t=d.direction;d.passThrough=!1,d.currentTime=0,d.progress=0,d.paused=!0,d.began=!1,d.changeBegan=!1,d.completed=!1,d.changeCompleted=!1,d.reversePlayback=!1,d.reversed="reverse"===t,d.remaining=d.loop;for(var n=a=(e=d.children).length;n--;)d.children[n].reset();(d.reversed&&!0!==d.loop||"alternate"===t&&1===d.loop)&&d.remaining++,y(0)},d.set=function(t,e){return ct(t,e),d},d.tick=function(t){s=t,n||(n=s),_((s+(i-n))*gt.speed)},d.seek=function(t){_(m(t))},d.pause=function(){d.paused=!0,g()},d.play=function(){d.paused&&(d.paused=!1,pt.push(d),g(),ht||mt())},d.reverse=function(){p(),g()},d.restart=function(){d.reset(),d.play()},d.finished=h,d.reset(),d.autoplay&&d.play(),d}function vt(t,e){for(var n=e.length;n--;)T(t,e[n].animatable.target)&&e.splice(n,1)}document.addEventListener("visibilitychange",(function(){if(document.hidden){for(var t=0,e=pt.length;t<e;t++)activeInstance[t].pause();ft=pt.slice(0),pt=[]}else for(var n=0,i=ft.length;n<i;n++)ft[n].play()})),gt.version="3.0.0",gt.speed=1,gt.running=pt,gt.remove=function(t){for(var e=rt(t),n=pt.length;n--;){var i=pt[n],r=i.animations,o=i.children;vt(e,r);for(var s=o.length;s--;){var a=o[s],l=a.animations;vt(e,l),l.length||a.children.length||o.splice(s,1)}r.length||o.length||i.pause()}},gt.get=q,gt.set=ct,gt.convertPx=j,gt.path=function(t,e){var n=f.str(t)?x(t)[0]:t,i=e||100;return function(t){return{property:t,el:n,svg:tt(n),totalLength:J(n)*(i/100)}}},gt.setDashoffset=function(t){var e=J(t);return t.setAttribute("stroke-dasharray",e),e},gt.stagger=function(t,e){void 0===e&&(e={});var n=e.direction||"normal",i=e.easing?A(e.easing):null,r=e.grid,o=e.axis,s=e.from||0,a="first"===s,l="center"===s,c="last"===s,u=f.arr(t),h=u?parseFloat(t[0]):parseFloat(t),d=u?parseFloat(t[1]):0,p=B(u?t[1]:t)||0,m=e.start||0+(u?h:0),g=[],v=0;return function(t,e,f){if(a&&(s=0),l&&(s=(f-1)/2),c&&(s=f-1),!g.length){for(var y=0;y<f;y++){if(r){var b=l?(r[0]-1)/2:s%r[0],_=l?(r[1]-1)/2:Math.floor(s/r[0]),w=b-y%r[0],A=_-Math.floor(y/r[0]),x=Math.sqrt(w*w+A*A);"x"===o&&(x=-w),"y"===o&&(x=-A),g.push(x)}else g.push(Math.abs(s-y));v=Math.max.apply(Math,g)}i&&(g=g.map((function(t){return i(t/v)*v}))),"reverse"===n&&(g=g.map((function(t){return o?t<0?-1*t:-t:Math.abs(v-t)})))}return m+(u?(d-h)/v:h)*(Math.round(100*g[e])/100)+p}},gt.timeline=function(t){void 0===t&&(t={});var e=gt(t);return e.duration=0,e.add=function(n,i){var r=pt.indexOf(e),s=e.children;function a(t){t.passThrough=!0}r>-1&&pt.splice(r,1);for(var l=0;l<s.length;l++)a(s[l]);var c=D(n,k(o,t));c.targets=c.targets||t.targets;var u=e.duration;c.autoplay=!1,c.direction=e.direction,c.timelineOffset=f.und(i)?u:Y(i,u),a(e),e.seek(c.timelineOffset);var h=gt(c);a(h),s.push(h);var d=ut(s,t);return e.delay=d.delay,e.endDelay=d.endDelay,e.duration=d.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e},gt.easing=A,gt.penner=w,gt.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},n.exports=gt},{}],57:[function(t,n,i){!function(t,r){!function(t){"use strict";function n(){}Object.assign(n.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,t)}}}});for(var i=[],r=0;r<256;r++)i[r]=(r<16?"0":"")+r.toString(16);var o=1234567,s={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(i[255&t]+i[t>>8&255]+i[t>>16&255]+i[t>>24&255]+"-"+i[255&e]+i[e>>8&255]+"-"+i[e>>16&15|64]+i[e>>24&255]+"-"+i[63&n|128]+i[n>>8&255]+"-"+i[n>>16&255]+i[n>>24&255]+i[255&r]+i[r>>8&255]+i[r>>16&255]+i[r>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(o=t%2147483647),((o=16807*o%2147483647)-1)/2147483646},degToRad:function(t){return t*s.DEG2RAD},radToDeg:function(t){return t*s.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){var o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),c=o((e+i)/2),u=s((e+i)/2),h=o((e-i)/2),d=s((e-i)/2),p=o((i-e)/2),f=s((i-e)/2);switch(r){case"XYX":t.set(a*u,l*h,l*d,a*c);break;case"YZY":t.set(l*d,a*u,l*h,a*c);break;case"ZXZ":t.set(l*h,l*d,a*u,a*c);break;case"XZX":t.set(a*u,l*f,l*p,a*c);break;case"YXY":t.set(l*p,a*u,l*f,a*c);break;case"ZYZ":t.set(l*f,l*p,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var h,d=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}var e=t.prototype;return e.set=function(t,e){return this.x=t,this.y=e,this},e.setScalar=function(t){return this.x=t,this.y=t,this},e.setX=function(t){return this.x=t,this},e.setY=function(t){return this.y=t,this},e.setComponent=function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},e.getComponent=function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},e.clone=function(){return new this.constructor(this.x,this.y)},e.copy=function(t){return this.x=t.x,this.y=t.y,this},e.add=function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},e.addScalar=function(t){return this.x+=t,this.y+=t,this},e.addVectors=function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},e.addScaledVector=function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},e.sub=function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},e.subScalar=function(t){return this.x-=t,this.y-=t,this},e.subVectors=function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},e.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},e.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},e.divide=function(t){return this.x/=t.x,this.y/=t.y,this},e.divideScalar=function(t){return this.multiplyScalar(1/t)},e.applyMatrix3=function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},e.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},e.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},e.clamp=function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},e.clampScalar=function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},e.clampLength=function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},e.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},e.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},e.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},e.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},e.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.dot=function(t){return this.x*t.x+this.y*t.y},e.cross=function(t){return this.x*t.y-this.y*t.x},e.lengthSq=function(){return this.x*this.x+this.y*this.y},e.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)},e.normalize=function(){return this.divideScalar(this.length()||1)},e.angle=function(){return Math.atan2(-this.y,-this.x)+Math.PI},e.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},e.distanceToSquared=function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},e.manhattanDistanceTo=function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},e.setLength=function(t){return this.normalize().multiplyScalar(t)},e.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},e.lerpVectors=function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this},e.equals=function(t){return t.x===this.x&&t.y===this.y},e.fromArray=function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},e.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},e.fromBufferAttribute=function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},e.rotateAround=function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*i+t.x,this.y=r*i+o*n+t.y,this},e.random=function(){return this.x=Math.random(),this.y=Math.random(),this},l(t,[{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}}]),t}(),p=function(){function t(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}var e=t.prototype;return e.set=function(t,e,n,i,r,o,s,a,l){var c=this.elements;return c[0]=t,c[1]=i,c[2]=s,c[3]=e,c[4]=r,c[5]=a,c[6]=n,c[7]=o,c[8]=l,this},e.identity=function(){return this.set(1,0,0,0,1,0,0,0,1),this},e.clone=function(){return(new this.constructor).fromArray(this.elements)},e.copy=function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},e.extractBasis=function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},e.setFromMatrix4=function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},e.multiply=function(t){return this.multiplyMatrices(this,t)},e.premultiply=function(t){return this.multiplyMatrices(t,this)},e.multiplyMatrices=function(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],b=i[7],_=i[2],w=i[5],A=i[8];return r[0]=o*f+s*v+a*_,r[3]=o*m+s*y+a*w,r[6]=o*g+s*b+a*A,r[1]=l*f+c*v+u*_,r[4]=l*m+c*y+u*w,r[7]=l*g+c*b+u*A,r[2]=h*f+d*v+p*_,r[5]=h*m+d*y+p*w,r[8]=h*g+d*b+p*A,this},e.multiplyScalar=function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},e.determinant=function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8];return e*o*c-e*s*l-n*r*c+n*s*a+i*r*l-i*o*a},e.invert=function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=c*o-s*l,h=s*a-c*r,d=l*r-o*a,p=e*u+n*h+i*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);var f=1/p;return t[0]=u*f,t[1]=(i*l-c*n)*f,t[2]=(s*n-i*o)*f,t[3]=h*f,t[4]=(c*e-i*a)*f,t[5]=(i*r-s*e)*f,t[6]=d*f,t[7]=(n*a-l*e)*f,t[8]=(o*e-n*r)*f,this},e.transpose=function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},e.getNormalMatrix=function(t){return this.setFromMatrix4(t).copy(this).invert().transpose()},e.transposeIntoArray=function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},e.setUvTransform=function(t,e,n,i,r,o,s){var a=Math.cos(r),l=Math.sin(r);this.set(n*a,n*l,-n*(a*o+l*s)+o+t,-i*l,i*a,-i*(-l*o+a*s)+s+e,0,0,1)},e.scale=function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},e.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],o=i[3],s=i[6],a=i[1],l=i[4],c=i[7];return i[0]=e*r+n*a,i[3]=e*o+n*l,i[6]=e*s+n*c,i[1]=-n*r+e*a,i[4]=-n*o+e*l,i[7]=-n*s+e*c,this},e.translate=function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},e.equals=function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},e.fromArray=function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},e.toArray=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t},t}(),f={getDataURL:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;var e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===h&&(h=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),h.width=t.width,h.height=t.height;var n=h.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=h}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},m=0;function g(t,e,n,i,r,o,a,l,c,u){void 0===t&&(t=g.DEFAULT_IMAGE),void 0===e&&(e=g.DEFAULT_MAPPING),void 0===n&&(n=1001),void 0===i&&(i=1001),void 0===r&&(r=1006),void 0===o&&(o=1008),void 0===a&&(a=1023),void 0===l&&(l=1009),void 0===c&&(c=1),void 0===u&&(u=3e3),Object.defineProperty(this,"id",{value:m++}),this.uuid=s.generateUUID(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new d(0,0),this.repeat=new d(1,1),this.center=new d(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new p,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.version=0,this.onUpdate=null}function v(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?f.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}g.DEFAULT_IMAGE=void 0,g.DEFAULT_MAPPING=300,g.prototype=Object.assign(Object.create(n.prototype),{constructor:g,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=s.generateUUID()),!e&&void 0===t.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var o=0,a=i.length;o<a;o++)r.push(v(i[o].isDataTexture?i[o].image:i[o]))}else r=v(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case 1001:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case 1001:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(g.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});var y=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=e,this.z=n,this.w=i}var e=t.prototype;return e.set=function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},e.setScalar=function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},e.setX=function(t){return this.x=t,this},e.setY=function(t){return this.y=t,this},e.setZ=function(t){return this.z=t,this},e.setW=function(t){return this.w=t,this},e.setComponent=function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},e.getComponent=function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},e.clone=function(){return new this.constructor(this.x,this.y,this.z,this.w)},e.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},e.add=function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},e.addScalar=function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},e.addVectors=function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},e.addScaledVector=function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},e.sub=function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},e.subScalar=function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},e.subVectors=function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},e.multiplyScalar=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},e.applyMatrix4=function(t){var e=this.x,n=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this},e.divideScalar=function(t){return this.multiplyScalar(1/t)},e.setAxisAngleFromQuaternion=function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},e.setAxisAngleFromRotationMatrix=function(t){var e,n,i,r,o=t.elements,s=o[0],a=o[4],l=o[8],c=o[1],u=o[5],h=o[9],d=o[2],p=o[6],f=o[10];if(Math.abs(a-c)<.01&&Math.abs(l-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(a+c)<.1&&Math.abs(l+d)<.1&&Math.abs(h+p)<.1&&Math.abs(s+u+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(s+1)/2,g=(u+1)/2,v=(f+1)/2,y=(a+c)/4,b=(l+d)/4,_=(h+p)/4;return m>g&&m>v?m<.01?(n=0,i=.707106781,r=.707106781):(i=y/(n=Math.sqrt(m)),r=b/n):g>v?g<.01?(n=.707106781,i=0,r=.707106781):(n=y/(i=Math.sqrt(g)),r=_/i):v<.01?(n=.707106781,i=.707106781,r=0):(n=b/(r=Math.sqrt(v)),i=_/r),this.set(n,i,r,e),this}var w=Math.sqrt((p-h)*(p-h)+(l-d)*(l-d)+(c-a)*(c-a));return Math.abs(w)<.001&&(w=1),this.x=(p-h)/w,this.y=(l-d)/w,this.z=(c-a)/w,this.w=Math.acos((s+u+f-1)/2),this},e.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},e.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},e.clamp=function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},e.clampScalar=function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},e.clampLength=function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},e.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},e.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},e.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},e.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},e.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},e.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},e.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},e.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},e.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},e.normalize=function(){return this.divideScalar(this.length()||1)},e.setLength=function(t){return this.normalize().multiplyScalar(t)},e.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},e.lerpVectors=function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this},e.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},e.fromArray=function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},e.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},e.fromBufferAttribute=function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},e.random=function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this},l(t,[{key:"width",get:function(){return this.z},set:function(t){this.z=t}},{key:"height",get:function(){return this.w},set:function(t){this.w=t}}]),t}();function b(t,e,n){this.width=t,this.height=e,this.scissor=new y(0,0,t,e),this.scissorTest=!1,this.viewport=new y(0,0,t,e),this.texture=new g(void 0,(n=n||{}).mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function _(t,e,n){b.call(this,t,e,n),this.samples=4}b.prototype=Object.assign(Object.create(n.prototype),{constructor:b,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),_.prototype=Object.assign(Object.create(b.prototype),{constructor:_,isWebGLMultisampleRenderTarget:!0,copy:function(t){return b.prototype.copy.call(this,t),this.samples=t.samples,this}});var w=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=n,this._w=i}t.slerp=function(t,e,n,i){return n.copy(t).slerp(e,i)},t.slerpFlat=function(t,e,n,i,r,o,s){var a=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3],h=r[o+0],d=r[o+1],p=r[o+2],f=r[o+3];if(u!==f||a!==h||l!==d||c!==p){var m=1-s,g=a*h+l*d+c*p+u*f,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,g*v);m=Math.sin(m*_)/b,s=Math.sin(s*_)/b}var w=s*v;if(a=a*m+h*w,l=l*m+d*w,c=c*m+p*w,u=u*m+f*w,m===1-s){var A=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=A,l*=A,c*=A,u*=A}}t[e]=a,t[e+1]=l,t[e+2]=c,t[e+3]=u},t.multiplyQuaternionsFlat=function(t,e,n,i,r,o){var s=n[i],a=n[i+1],l=n[i+2],c=n[i+3],u=r[o],h=r[o+1],d=r[o+2],p=r[o+3];return t[e]=s*p+c*u+a*d-l*h,t[e+1]=a*p+c*h+l*u-s*d,t[e+2]=l*p+c*d+s*h-a*u,t[e+3]=c*p-s*u-a*h-l*d,t};var e=t.prototype;return e.set=function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this},e.clone=function(){return new this.constructor(this._x,this._y,this._z,this._w)},e.copy=function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},e.setFromEuler=function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,o=t._order,s=Math.cos,a=Math.sin,l=s(n/2),c=s(i/2),u=s(r/2),h=a(n/2),d=a(i/2),p=a(r/2);switch(o){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this},e.setFromAxisAngle=function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},e.setFromRotationMatrix=function(t){var e=t.elements,n=e[0],i=e[4],r=e[8],o=e[1],s=e[5],a=e[9],l=e[2],c=e[6],u=e[10],h=n+s+u;if(h>0){var d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(c-a)*d,this._y=(r-l)*d,this._z=(o-i)*d}else if(n>s&&n>u){var p=2*Math.sqrt(1+n-s-u);this._w=(c-a)/p,this._x=.25*p,this._y=(i+o)/p,this._z=(r+l)/p}else if(s>u){var f=2*Math.sqrt(1+s-n-u);this._w=(r-l)/f,this._x=(i+o)/f,this._y=.25*f,this._z=(a+c)/f}else{var m=2*Math.sqrt(1+u-n-s);this._w=(o-i)/m,this._x=(r+l)/m,this._y=(a+c)/m,this._z=.25*m}return this._onChangeCallback(),this},e.setFromUnitVectors=function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},e.angleTo=function(t){return 2*Math.acos(Math.abs(s.clamp(this.dot(t),-1,1)))},e.rotateTowards=function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this},e.identity=function(){return this.set(0,0,0,1)},e.invert=function(){return this.conjugate()},e.conjugate=function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},e.dot=function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},e.lengthSq=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},e.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},e.normalize=function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(t=1/t),this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},e.multiply=function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},e.premultiply=function(t){return this.multiplyQuaternions(t,this)},e.multiplyQuaternions=function(t,e){var n=t._x,i=t._y,r=t._z,o=t._w,s=e._x,a=e._y,l=e._z,c=e._w;return this._x=n*c+o*s+i*l-r*a,this._y=i*c+o*a+r*s-n*l,this._z=r*c+o*l+n*a-i*s,this._w=o*c-n*s-i*a-r*l,this._onChangeCallback(),this},e.slerp=function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,o=this._w,s=o*t._w+n*t._x+i*t._y+r*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var a=1-s*s;if(a<=Number.EPSILON){var l=1-e;return this._w=l*o+e*this._w,this._x=l*n+e*this._x,this._y=l*i+e*this._y,this._z=l*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(a),u=Math.atan2(c,s),h=Math.sin((1-e)*u)/c,d=Math.sin(e*u)/c;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=i*h+this._y*d,this._z=r*h+this._z*d,this._onChangeCallback(),this},e.equals=function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},e.fromArray=function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},e.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},e.fromBufferAttribute=function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},e._onChange=function(t){return this._onChangeCallback=t,this},e._onChangeCallback=function(){},l(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}]),t}(),A=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=n}var e=t.prototype;return e.set=function(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this},e.setScalar=function(t){return this.x=t,this.y=t,this.z=t,this},e.setX=function(t){return this.x=t,this},e.setY=function(t){return this.y=t,this},e.setZ=function(t){return this.z=t,this},e.setComponent=function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},e.getComponent=function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},e.clone=function(){return new this.constructor(this.x,this.y,this.z)},e.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},e.add=function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},e.addScalar=function(t){return this.x+=t,this.y+=t,this.z+=t,this},e.addVectors=function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},e.addScaledVector=function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},e.sub=function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},e.subScalar=function(t){return this.x-=t,this.y-=t,this.z-=t,this},e.subVectors=function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},e.multiply=function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},e.multiplyScalar=function(t){return this.x*=t,this.y*=t,this.z*=t,this},e.multiplyVectors=function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},e.applyEuler=function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(C.setFromEuler(t))},e.applyAxisAngle=function(t,e){return this.applyQuaternion(C.setFromAxisAngle(t,e))},e.applyMatrix3=function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},e.applyNormalMatrix=function(t){return this.applyMatrix3(t).normalize()},e.applyMatrix4=function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this},e.applyQuaternion=function(t){var e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,s=t.z,a=t.w,l=a*e+o*i-s*n,c=a*n+s*e-r*i,u=a*i+r*n-o*e,h=-r*e-o*n-s*i;return this.x=l*a+h*-r+c*-s-u*-o,this.y=c*a+h*-o+u*-r-l*-s,this.z=u*a+h*-s+l*-o-c*-r,this},e.project=function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},e.unproject=function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},e.transformDirection=function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},e.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},e.divideScalar=function(t){return this.multiplyScalar(1/t)},e.min=function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},e.max=function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},e.clamp=function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},e.clampScalar=function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},e.clampLength=function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},e.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},e.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},e.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},e.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},e.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},e.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},e.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z},e.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},e.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},e.normalize=function(){return this.divideScalar(this.length()||1)},e.setLength=function(t){return this.normalize().multiplyScalar(t)},e.lerp=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},e.lerpVectors=function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this},e.cross=function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},e.crossVectors=function(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,s=e.y,a=e.z;return this.x=i*a-r*s,this.y=r*o-n*a,this.z=n*s-i*o,this},e.projectOnVector=function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)},e.projectOnPlane=function(t){return x.copy(this).projectOnVector(t),this.sub(x)},e.reflect=function(t){return this.sub(x.copy(t).multiplyScalar(2*this.dot(t)))},e.angleTo=function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(s.clamp(n,-1,1))},e.distanceTo=function(t){return Math.sqrt(this.distanceToSquared(t))},e.distanceToSquared=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},e.manhattanDistanceTo=function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},e.setFromSpherical=function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},e.setFromSphericalCoords=function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},e.setFromCylindrical=function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},e.setFromCylindricalCoords=function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},e.setFromMatrixPosition=function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},e.setFromMatrixScale=function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},e.setFromMatrixColumn=function(t,e){return this.fromArray(t.elements,4*e)},e.setFromMatrix3Column=function(t,e){return this.fromArray(t.elements,3*e)},e.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},e.fromArray=function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},e.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},e.fromBufferAttribute=function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},e.random=function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this},t}(),x=new A,C=new w,E=function(){function t(t,e){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new A(1/0,1/0,1/0),this.max=void 0!==e?e:new A(-1/0,-1/0,-1/0)}var e=t.prototype;return e.set=function(t,e){return this.min.copy(t),this.max.copy(e),this},e.setFromArray=function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0,a=0,l=t.length;a<l;a+=3){var c=t[a],u=t[a+1],h=t[a+2];c<e&&(e=c),u<n&&(n=u),h<i&&(i=h),c>r&&(r=c),u>o&&(o=u),h>s&&(s=h)}return this.min.set(e,n,i),this.max.set(r,o,s),this},e.setFromBufferAttribute=function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,s=-1/0,a=0,l=t.count;a<l;a++){var c=t.getX(a),u=t.getY(a),h=t.getZ(a);c<e&&(e=c),u<n&&(n=u),h<i&&(i=h),c>r&&(r=c),u>o&&(o=u),h>s&&(s=h)}return this.min.set(e,n,i),this.max.set(r,o,s),this},e.setFromPoints=function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},e.setFromCenterAndSize=function(t,e){var n=T.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},e.setFromObject=function(t){return this.makeEmpty(),this.expandByObject(t)},e.clone=function(){return(new this.constructor).copy(this)},e.copy=function(t){return this.min.copy(t.min),this.max.copy(t.max),this},e.makeEmpty=function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},e.isEmpty=function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},e.getCenter=function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new A),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},e.getSize=function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new A),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},e.expandByPoint=function(t){return this.min.min(t),this.max.max(t),this},e.expandByVector=function(t){return this.min.sub(t),this.max.add(t),this},e.expandByScalar=function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},e.expandByObject=function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),P.copy(e.boundingBox),P.applyMatrix4(t.matrixWorld),this.union(P));for(var n=t.children,i=0,r=n.length;i<r;i++)this.expandByObject(n[i]);return this},e.containsPoint=function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},e.containsBox=function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},e.getParameter=function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new A),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},e.intersectsBox=function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},e.intersectsSphere=function(t){return this.clampPoint(t.center,T),T.distanceToSquared(t.center)<=t.radius*t.radius},e.intersectsPlane=function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},e.intersectsTriangle=function(t){if(this.isEmpty())return!1;this.getCenter(F),N.subVectors(this.max,F),k.subVectors(t.a,F),D.subVectors(t.b,F),O.subVectors(t.c,F),R.subVectors(D,k),I.subVectors(O,D),L.subVectors(k,O);var e=[0,-R.z,R.y,0,-I.z,I.y,0,-L.z,L.y,R.z,0,-R.x,I.z,0,-I.x,L.z,0,-L.x,-R.y,R.x,0,-I.y,I.x,0,-L.y,L.x,0];return!!S(e,k,D,O,N)&&!!S(e=[1,0,0,0,1,0,0,0,1],k,D,O,N)&&(B.crossVectors(R,I),S(e=[B.x,B.y,B.z],k,D,O,N))},e.clampPoint=function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new A),e.copy(t).clamp(this.min,this.max)},e.distanceToPoint=function(t){return T.copy(t).clamp(this.min,this.max).sub(t).length()},e.getBoundingSphere=function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(T).length(),t},e.intersect=function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},e.union=function(t){return this.min.min(t.min),this.max.max(t.max),this},e.applyMatrix4=function(t){return this.isEmpty()||(M[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),M[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),M[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),M[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),M[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),M[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),M[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),M[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(M)),this},e.translate=function(t){return this.min.add(t),this.max.add(t),this},e.equals=function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},t}();function S(t,e,n,i,r){for(var o=0,s=t.length-3;o<=s;o+=3){U.fromArray(t,o);var a=r.x*Math.abs(U.x)+r.y*Math.abs(U.y)+r.z*Math.abs(U.z),l=e.dot(U),c=n.dot(U),u=i.dot(U);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}var M=[new A,new A,new A,new A,new A,new A,new A,new A],T=new A,P=new E,k=new A,D=new A,O=new A,R=new A,I=new A,L=new A,F=new A,N=new A,B=new A,U=new A,V=new E,j=function(){function t(t,e){this.center=void 0!==t?t:new A,this.radius=void 0!==e?e:-1}var e=t.prototype;return e.set=function(t,e){return this.center.copy(t),this.radius=e,this},e.setFromPoints=function(t,e){var n=this.center;void 0!==e?n.copy(e):V.setFromPoints(t).getCenter(n);for(var i=0,r=0,o=t.length;r<o;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this},e.clone=function(){return(new this.constructor).copy(this)},e.copy=function(t){return this.center.copy(t.center),this.radius=t.radius,this},e.isEmpty=function(){return this.radius<0},e.makeEmpty=function(){return this.center.set(0,0,0),this.radius=-1,this},e.containsPoint=function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},e.distanceToPoint=function(t){return t.distanceTo(this.center)-this.radius},e.intersectsSphere=function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},e.intersectsBox=function(t){return t.intersectsSphere(this)},e.intersectsPlane=function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},e.clampPoint=function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new A),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},e.getBoundingBox=function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new E),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)},e.applyMatrix4=function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},e.translate=function(t){return this.center.add(t),this},e.equals=function(t){return t.center.equals(this.center)&&t.radius===this.radius},t}(),z=new A,H=new A,G=new A,W=new A,q=new A,$=new A,Y=new A,Q=function(){function t(t,e){this.origin=void 0!==t?t:new A,this.direction=void 0!==e?e:new A(0,0,-1)}var e=t.prototype;return e.set=function(t,e){return this.origin.copy(t),this.direction.copy(e),this},e.clone=function(){return(new this.constructor).copy(this)},e.copy=function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},e.at=function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new A),e.copy(this.direction).multiplyScalar(t).add(this.origin)},e.lookAt=function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},e.recast=function(t){return this.origin.copy(this.at(t,z)),this},e.closestPointToPoint=function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new A),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},e.distanceToPoint=function(t){return Math.sqrt(this.distanceSqToPoint(t))},e.distanceSqToPoint=function(t){var e=z.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(z.copy(this.direction).multiplyScalar(e).add(this.origin),z.distanceToSquared(t))},e.distanceSqToSegment=function(t,e,n,i){H.copy(t).add(e).multiplyScalar(.5),G.copy(e).sub(t).normalize(),W.copy(this.origin).sub(H);var r,o,s,a,l=.5*t.distanceTo(e),c=-this.direction.dot(G),u=W.dot(this.direction),h=-W.dot(G),d=W.lengthSq(),p=Math.abs(1-c*c);if(p>0)if(o=c*u-h,a=l*p,(r=c*h-u)>=0)if(o>=-a)if(o<=a){var f=1/p;s=(r*=f)*(r+c*(o*=f)+2*u)+o*(c*r+o+2*h)+d}else o=l,s=-(r=Math.max(0,-(c*o+u)))*r+o*(o+2*h)+d;else o=-l,s=-(r=Math.max(0,-(c*o+u)))*r+o*(o+2*h)+d;else o<=-a?s=-(r=Math.max(0,-(-c*l+u)))*r+(o=r>0?-l:Math.min(Math.max(-l,-h),l))*(o+2*h)+d:o<=a?(r=0,s=(o=Math.min(Math.max(-l,-h),l))*(o+2*h)+d):s=-(r=Math.max(0,-(c*l+u)))*r+(o=r>0?l:Math.min(Math.max(-l,-h),l))*(o+2*h)+d;else o=c>0?-l:l,s=-(r=Math.max(0,-(c*o+u)))*r+o*(o+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(G).multiplyScalar(o).add(H),s},e.intersectSphere=function(t,e){z.subVectors(t.center,this.origin);var n=z.dot(this.direction),i=z.dot(z)-n*n,r=t.radius*t.radius;if(i>r)return null;var o=Math.sqrt(r-i),s=n-o,a=n+o;return s<0&&a<0?null:this.at(s<0?a:s,e)},e.intersectsSphere=function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},e.distanceToPlane=function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},e.intersectPlane=function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},e.intersectsPlane=function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},e.intersectBox=function(t,e){var n,i,r,o,s,a,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),c>=0?(r=(t.min.y-h.y)*c,o=(t.max.y-h.y)*c):(r=(t.max.y-h.y)*c,o=(t.min.y-h.y)*c),n>o||r>i?null:((r>n||n!=n)&&(n=r),(o<i||i!=i)&&(i=o),u>=0?(s=(t.min.z-h.z)*u,a=(t.max.z-h.z)*u):(s=(t.max.z-h.z)*u,a=(t.min.z-h.z)*u),n>a||s>i?null:((s>n||n!=n)&&(n=s),(a<i||i!=i)&&(i=a),i<0?null:this.at(n>=0?n:i,e)))},e.intersectsBox=function(t){return null!==this.intersectBox(t,z)},e.intersectTriangle=function(t,e,n,i,r){q.subVectors(e,t),$.subVectors(n,t),Y.crossVectors(q,$);var o,s=this.direction.dot(Y);if(s>0){if(i)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}W.subVectors(this.origin,t);var a=o*this.direction.dot($.crossVectors(W,$));if(a<0)return null;var l=o*this.direction.dot(q.cross(W));if(l<0)return null;if(a+l>s)return null;var c=-o*W.dot(Y);return c<0?null:this.at(c/s,r)},e.applyMatrix4=function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},e.equals=function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)},t}(),X=function(){function t(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}var e=t.prototype;return e.set=function(t,e,n,i,r,o,s,a,l,c,u,h,d,p,f,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},e.identity=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},e.clone=function(){return(new t).fromArray(this.elements)},e.copy=function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},e.copyPosition=function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},e.extractBasis=function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},e.makeBasis=function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},e.extractRotation=function(t){var e=this.elements,n=t.elements,i=1/K.setFromMatrixColumn(t,0).length(),r=1/K.setFromMatrixColumn(t,1).length(),o=1/K.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},e.makeRotationFromEuler=function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){var h=o*c,d=o*u,p=s*c,f=s*u;e[0]=a*c,e[4]=-a*u,e[8]=l,e[1]=d+p*l,e[5]=h-f*l,e[9]=-s*a,e[2]=f-h*l,e[6]=p+d*l,e[10]=o*a}else if("YXZ"===t.order){var m=a*c,g=a*u,v=l*c,y=l*u;e[0]=m+y*s,e[4]=v*s-g,e[8]=o*l,e[1]=o*u,e[5]=o*c,e[9]=-s,e[2]=g*s-v,e[6]=y+m*s,e[10]=o*a}else if("ZXY"===t.order){var b=a*c,_=a*u,w=l*c,A=l*u;e[0]=b-A*s,e[4]=-o*u,e[8]=w+_*s,e[1]=_+w*s,e[5]=o*c,e[9]=A-b*s,e[2]=-o*l,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){var x=o*c,C=o*u,E=s*c,S=s*u;e[0]=a*c,e[4]=E*l-C,e[8]=x*l+S,e[1]=a*u,e[5]=S*l+x,e[9]=C*l-E,e[2]=-l,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){var M=o*a,T=o*l,P=s*a,k=s*l;e[0]=a*c,e[4]=k-M*u,e[8]=P*u+T,e[1]=u,e[5]=o*c,e[9]=-s*c,e[2]=-l*c,e[6]=T*u+P,e[10]=M-k*u}else if("XZY"===t.order){var D=o*a,O=o*l,R=s*a,I=s*l;e[0]=a*c,e[4]=-u,e[8]=l*c,e[1]=D*u+I,e[5]=o*c,e[9]=O*u-R,e[2]=R*u-O,e[6]=s*c,e[10]=I*u+D}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},e.makeRotationFromQuaternion=function(t){return this.compose(J,t,tt)},e.lookAt=function(t,e,n){var i=this.elements;return it.subVectors(t,e),0===it.lengthSq()&&(it.z=1),it.normalize(),et.crossVectors(n,it),0===et.lengthSq()&&(1===Math.abs(n.z)?it.x+=1e-4:it.z+=1e-4,it.normalize(),et.crossVectors(n,it)),et.normalize(),nt.crossVectors(it,et),i[0]=et.x,i[4]=nt.x,i[8]=it.x,i[1]=et.y,i[5]=nt.y,i[9]=it.y,i[2]=et.z,i[6]=nt.z,i[10]=it.z,this},e.multiply=function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},e.premultiply=function(t){return this.multiplyMatrices(t,this)},e.multiplyMatrices=function(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],_=n[15],w=i[0],A=i[4],x=i[8],C=i[12],E=i[1],S=i[5],M=i[9],T=i[13],P=i[2],k=i[6],D=i[10],O=i[14],R=i[3],I=i[7],L=i[11],F=i[15];return r[0]=o*w+s*E+a*P+l*R,r[4]=o*A+s*S+a*k+l*I,r[8]=o*x+s*M+a*D+l*L,r[12]=o*C+s*T+a*O+l*F,r[1]=c*w+u*E+h*P+d*R,r[5]=c*A+u*S+h*k+d*I,r[9]=c*x+u*M+h*D+d*L,r[13]=c*C+u*T+h*O+d*F,r[2]=p*w+f*E+m*P+g*R,r[6]=p*A+f*S+m*k+g*I,r[10]=p*x+f*M+m*D+g*L,r[14]=p*C+f*T+m*O+g*F,r[3]=v*w+y*E+b*P+_*R,r[7]=v*A+y*S+b*k+_*I,r[11]=v*x+y*M+b*D+_*L,r[15]=v*C+y*T+b*O+_*F,this},e.multiplyScalar=function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},e.determinant=function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],s=t[5],a=t[9],l=t[13],c=t[2],u=t[6],h=t[10],d=t[14];return t[3]*(+r*a*u-i*l*u-r*s*h+n*l*h+i*s*d-n*a*d)+t[7]*(+e*a*d-e*l*h+r*o*h-i*o*d+i*l*c-r*a*c)+t[11]*(+e*l*u-e*s*d-r*o*u+n*o*d+r*s*c-n*l*c)+t[15]*(-i*s*c-e*a*u+e*s*h+i*o*u-n*o*h+n*a*c)},e.transpose=function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},e.setPosition=function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},e.invert=function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],s=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],p=t[12],f=t[13],m=t[14],g=t[15],v=u*m*l-f*h*l+f*a*d-s*m*d-u*a*g+s*h*g,y=p*h*l-c*m*l-p*a*d+o*m*d+c*a*g-o*h*g,b=c*f*l-p*u*l+p*s*d-o*f*d-c*s*g+o*u*g,_=p*u*a-c*f*a-p*s*h+o*f*h+c*s*m-o*u*m,w=e*v+n*y+i*b+r*_;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var A=1/w;return t[0]=v*A,t[1]=(f*h*r-u*m*r-f*i*d+n*m*d+u*i*g-n*h*g)*A,t[2]=(s*m*r-f*a*r+f*i*l-n*m*l-s*i*g+n*a*g)*A,t[3]=(u*a*r-s*h*r-u*i*l+n*h*l+s*i*d-n*a*d)*A,t[4]=y*A,t[5]=(c*m*r-p*h*r+p*i*d-e*m*d-c*i*g+e*h*g)*A,t[6]=(p*a*r-o*m*r-p*i*l+e*m*l+o*i*g-e*a*g)*A,t[7]=(o*h*r-c*a*r+c*i*l-e*h*l-o*i*d+e*a*d)*A,t[8]=b*A,t[9]=(p*u*r-c*f*r-p*n*d+e*f*d+c*n*g-e*u*g)*A,t[10]=(o*f*r-p*s*r+p*n*l-e*f*l-o*n*g+e*s*g)*A,t[11]=(c*s*r-o*u*r-c*n*l+e*u*l+o*n*d-e*s*d)*A,t[12]=_*A,t[13]=(c*f*i-p*u*i+p*n*h-e*f*h-c*n*m+e*u*m)*A,t[14]=(p*s*i-o*f*i-p*n*a+e*f*a+o*n*m-e*s*m)*A,t[15]=(o*u*i-c*s*i+c*n*a-e*u*a-o*n*h+e*s*h)*A,this},e.scale=function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},e.getMaxScaleOnAxis=function(){var t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))},e.makeTranslation=function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},e.makeRotationX=function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},e.makeRotationY=function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},e.makeRotationZ=function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},e.makeRotationAxis=function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,s=t.y,a=t.z,l=r*o,c=r*s;return this.set(l*o+n,l*s-i*a,l*a+i*s,0,l*s+i*a,c*s+n,c*a-i*o,0,l*a-i*s,c*a+i*o,r*a*a+n,0,0,0,0,1),this},e.makeScale=function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},e.makeShear=function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},e.compose=function(t,e,n){var i=this.elements,r=e._x,o=e._y,s=e._z,a=e._w,l=r+r,c=o+o,u=s+s,h=r*l,d=r*c,p=r*u,f=o*c,m=o*u,g=s*u,v=a*l,y=a*c,b=a*u,_=n.x,w=n.y,A=n.z;return i[0]=(1-(f+g))*_,i[1]=(d+b)*_,i[2]=(p-y)*_,i[3]=0,i[4]=(d-b)*w,i[5]=(1-(h+g))*w,i[6]=(m+v)*w,i[7]=0,i[8]=(p+y)*A,i[9]=(m-v)*A,i[10]=(1-(h+f))*A,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},e.decompose=function(t,e,n){var i=this.elements,r=K.set(i[0],i[1],i[2]).length(),o=K.set(i[4],i[5],i[6]).length(),s=K.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],Z.copy(this);var a=1/r,l=1/o,c=1/s;return Z.elements[0]*=a,Z.elements[1]*=a,Z.elements[2]*=a,Z.elements[4]*=l,Z.elements[5]*=l,Z.elements[6]*=l,Z.elements[8]*=c,Z.elements[9]*=c,Z.elements[10]*=c,e.setFromRotationMatrix(Z),n.x=r,n.y=o,n.z=s,this},e.makePerspective=function(t,e,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,a=2*r/(n-i),l=(e+t)/(e-t),c=(n+i)/(n-i),u=-(o+r)/(o-r),h=-2*o*r/(o-r);return s[0]=2*r/(e-t),s[4]=0,s[8]=l,s[12]=0,s[1]=0,s[5]=a,s[9]=c,s[13]=0,s[2]=0,s[6]=0,s[10]=u,s[14]=h,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},e.makeOrthographic=function(t,e,n,i,r,o){var s=this.elements,a=1/(e-t),l=1/(n-i),c=1/(o-r),u=(e+t)*a,h=(n+i)*l,d=(o+r)*c;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},e.equals=function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},e.fromArray=function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},e.toArray=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t},t}(),K=new A,Z=new X,J=new A(0,0,0),tt=new A(1,1,1),et=new A,nt=new A,it=new A,rt=function(){function t(e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=t.DefaultOrder),Object.defineProperty(this,"isEuler",{value:!0}),this._x=e,this._y=n,this._z=i,this._order=r}var e=t.prototype;return e.set=function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},e.clone=function(){return new this.constructor(this._x,this._y,this._z,this._order)},e.copy=function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},e.setFromRotationMatrix=function(t,e,n){var i=s.clamp,r=t.elements,o=r[0],a=r[4],l=r[8],c=r[1],u=r[5],h=r[9],d=r[2],p=r[6],f=r[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,f),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-d,o),this._z=0);break;case"ZXY":this._x=Math.asin(i(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-i(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,f),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(i(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(l,f));break;case"XZY":this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-h,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==n&&this._onChangeCallback(),this},e.setFromQuaternion=function(t,e,n){return ot.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ot,e,n)},e.setFromVector3=function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},e.reorder=function(t){return st.setFromEuler(this),this.setFromQuaternion(st,t)},e.equals=function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},e.fromArray=function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},e.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},e.toVector3=function(t){return t?t.set(this._x,this._y,this._z):new A(this._x,this._y,this._z)},e._onChange=function(t){return this._onChangeCallback=t,this},e._onChangeCallback=function(){},l(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}]),t}();rt.DefaultOrder="XYZ",rt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var ot=new X,st=new w,at=function(){function t(){this.mask=1}var e=t.prototype;return e.set=function(t){this.mask=1<<t|0},e.enable=function(t){this.mask|=1<<t|0},e.enableAll=function(){this.mask=-1},e.toggle=function(t){this.mask^=1<<t|0},e.disable=function(t){this.mask&=~(1<<t|0)},e.disableAll=function(){this.mask=0},e.test=function(t){return 0!=(this.mask&t.mask)},t}(),lt=0,ct=new A,ut=new w,ht=new X,dt=new A,pt=new A,ft=new A,mt=new w,gt=new A(1,0,0),vt=new A(0,1,0),yt=new A(0,0,1),bt={type:"added"},_t={type:"removed"};function wt(){Object.defineProperty(this,"id",{value:lt++}),this.uuid=s.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=wt.DefaultUp.clone();var t=new A,e=new rt,n=new w,i=new A(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new X},normalMatrix:{value:new p}}),this.matrix=new X,this.matrixWorld=new X,this.matrixAutoUpdate=wt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new at,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}wt.DefaultUp=new A(0,1,0),wt.DefaultMatrixAutoUpdate=!0,wt.prototype=Object.assign(Object.create(n.prototype),{constructor:wt,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return ut.setFromAxisAngle(t,e),this.quaternion.multiply(ut),this},rotateOnWorldAxis:function(t,e){return ut.setFromAxisAngle(t,e),this.quaternion.premultiply(ut),this},rotateX:function(t){return this.rotateOnAxis(gt,t)},rotateY:function(t){return this.rotateOnAxis(vt,t)},rotateZ:function(t){return this.rotateOnAxis(yt,t)},translateOnAxis:function(t,e){return ct.copy(t).applyQuaternion(this.quaternion),this.position.add(ct.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(gt,t)},translateY:function(t){return this.translateOnAxis(vt,t)},translateZ:function(t){return this.translateOnAxis(yt,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(ht.copy(this.matrixWorld).invert())},lookAt:function(t,e,n){t.isVector3?dt.copy(t):dt.set(t,e,n);var i=this.parent;this.updateWorldMatrix(!0,!1),pt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ht.lookAt(pt,dt,this.up):ht.lookAt(dt,pt,this.up),this.quaternion.setFromRotationMatrix(ht),i&&(ht.extractRotation(i.matrixWorld),ut.setFromRotationMatrix(ht),this.quaternion.premultiply(ut.invert()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(bt)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(_t)),this},clear:function(){for(var t=0;t<this.children.length;t++){var e=this.children[t];e.parent=null,e.dispatchEvent(_t)}return this.children.length=0,this},attach:function(t){return this.updateWorldMatrix(!0,!1),ht.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),ht.multiply(t.parent.matrixWorld)),t.applyMatrix4(ht),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new A),this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new w),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pt,t,ft),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new A),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pt,mt,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new A),this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,r=0,o=i.length;r<o;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var s=o.shapes;if(Array.isArray(s))for(var a=0,l=s.length;a<l;a++)r(t.shapes,s[a]);else r(t.shapes,s)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],u=0,h=this.material.length;u<h;u++)c.push(r(t.materials,this.material[u]));i.material=c}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(var d=0;d<this.children.length;d++)i.children.push(this.children[d].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(var p=0;p<this.animations.length;p++)i.animations.push(r(t.animations,this.animations[p]))}if(e){var f=w(t.geometries),m=w(t.materials),g=w(t.textures),v=w(t.images),y=w(t.shapes),b=w(t.skeletons),_=w(t.animations);f.length>0&&(n.geometries=f),m.length>0&&(n.materials=m),g.length>0&&(n.textures=g),v.length>0&&(n.images=v),y.length>0&&(n.shapes=y),b.length>0&&(n.skeletons=b),_.length>0&&(n.animations=_)}return n.object=i,n;function w(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++)this.add(t.children[n].clone());return this}});var At=new A,xt=new A,Ct=new p,Et=function(){function t(t,e){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new A(1,0,0),this.constant=void 0!==e?e:0}var e=t.prototype;return e.set=function(t,e){return this.normal.copy(t),this.constant=e,this},e.setComponents=function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},e.setFromNormalAndCoplanarPoint=function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},e.setFromCoplanarPoints=function(t,e,n){var i=At.subVectors(n,e).cross(xt.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this},e.clone=function(){return(new this.constructor).copy(this)},e.copy=function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},e.normalize=function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},e.negate=function(){return this.constant*=-1,this.normal.negate(),this},e.distanceToPoint=function(t){return this.normal.dot(t)+this.constant},e.distanceToSphere=function(t){return this.distanceToPoint(t.center)-t.radius},e.projectPoint=function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new A),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},e.intersectLine=function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new A);var n=t.delta(At),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:e.copy(n).multiplyScalar(r).add(t.start)},e.intersectsLine=function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},e.intersectsBox=function(t){return t.intersectsPlane(this)},e.intersectsSphere=function(t){return t.intersectsPlane(this)},e.coplanarPoint=function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new A),t.copy(this.normal).multiplyScalar(-this.constant)},e.applyMatrix4=function(t,e){var n=e||Ct.getNormalMatrix(t),i=this.coplanarPoint(At).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this},e.translate=function(t){return this.constant-=t.dot(this.normal),this},e.equals=function(t){return t.normal.equals(this.normal)&&t.constant===this.constant},t}(),St=new A,Mt=new A,Tt=new A,Pt=new A,kt=new A,Dt=new A,Ot=new A,Rt=new A,It=new A,Lt=new A,Ft=function(){function t(t,e,n){this.a=void 0!==t?t:new A,this.b=void 0!==e?e:new A,this.c=void 0!==n?n:new A}t.getNormal=function(t,e,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new A),i.subVectors(n,e),St.subVectors(t,e),i.cross(St);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)},t.getBarycoord=function(t,e,n,i,r){St.subVectors(i,e),Mt.subVectors(n,e),Tt.subVectors(t,e);var o=St.dot(St),s=St.dot(Mt),a=St.dot(Tt),l=Mt.dot(Mt),c=Mt.dot(Tt),u=o*l-s*s;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new A),0===u)return r.set(-2,-1,-1);var h=1/u,d=(l*a-s*c)*h,p=(o*c-s*a)*h;return r.set(1-d-p,p,d)},t.containsPoint=function(t,e,n,i){return this.getBarycoord(t,e,n,i,Pt),Pt.x>=0&&Pt.y>=0&&Pt.x+Pt.y<=1},t.getUV=function(t,e,n,i,r,o,s,a){return this.getBarycoord(t,e,n,i,Pt),a.set(0,0),a.addScaledVector(r,Pt.x),a.addScaledVector(o,Pt.y),a.addScaledVector(s,Pt.z),a},t.isFrontFacing=function(t,e,n,i){return St.subVectors(n,e),Mt.subVectors(t,e),St.cross(Mt).dot(i)<0};var e=t.prototype;return e.set=function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},e.setFromPointsAndIndices=function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},e.clone=function(){return(new this.constructor).copy(this)},e.copy=function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},e.getArea=function(){return St.subVectors(this.c,this.b),Mt.subVectors(this.a,this.b),.5*St.cross(Mt).length()},e.getMidpoint=function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new A),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},e.getNormal=function(e){return t.getNormal(this.a,this.b,this.c,e)},e.getPlane=function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new Et),t.setFromCoplanarPoints(this.a,this.b,this.c)},e.getBarycoord=function(e,n){return t.getBarycoord(e,this.a,this.b,this.c,n)},e.getUV=function(e,n,i,r,o){return t.getUV(e,this.a,this.b,this.c,n,i,r,o)},e.containsPoint=function(e){return t.containsPoint(e,this.a,this.b,this.c)},e.isFrontFacing=function(e){return t.isFrontFacing(this.a,this.b,this.c,e)},e.intersectsBox=function(t){return t.intersectsTriangle(this)},e.closestPointToPoint=function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new A);var n,i,r=this.a,o=this.b,s=this.c;kt.subVectors(o,r),Dt.subVectors(s,r),Rt.subVectors(t,r);var a=kt.dot(Rt),l=Dt.dot(Rt);if(a<=0&&l<=0)return e.copy(r);It.subVectors(t,o);var c=kt.dot(It),u=Dt.dot(It);if(c>=0&&u<=c)return e.copy(o);var h=a*u-c*l;if(h<=0&&a>=0&&c<=0)return n=a/(a-c),e.copy(r).addScaledVector(kt,n);Lt.subVectors(t,s);var d=kt.dot(Lt),p=Dt.dot(Lt);if(p>=0&&d<=p)return e.copy(s);var f=d*l-a*p;if(f<=0&&l>=0&&p<=0)return i=l/(l-p),e.copy(r).addScaledVector(Dt,i);var m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return Ot.subVectors(s,o),i=(u-c)/(u-c+(d-p)),e.copy(o).addScaledVector(Ot,i);var g=1/(m+f+h);return n=f*g,i=h*g,e.copy(r).addScaledVector(kt,n).addScaledVector(Dt,i)},e.equals=function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)},t}(),Nt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bt={h:0,s:0,l:0},Ut={h:0,s:0,l:0};function Vt(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function jt(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function zt(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}var Ht=function(){function t(t,e,n){return Object.defineProperty(this,"isColor",{value:!0}),void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}var e=t.prototype;return e.set=function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},e.setScalar=function(t){return this.r=t,this.g=t,this.b=t,this},e.setHex=function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},e.setRGB=function(t,e,n){return this.r=t,this.g=e,this.b=n,this},e.setHSL=function(t,e,n){if(t=s.euclideanModulo(t,1),e=s.clamp(e,0,1),n=s.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=Vt(r,i,t+1/3),this.g=Vt(r,i,t),this.b=Vt(r,i,t-1/3)}return this},e.setStyle=function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=n[2];switch(n[1]){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,a=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(o,s,a)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this},e.setColorName=function(t){var e=Nt[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this},e.clone=function(){return new this.constructor(this.r,this.g,this.b)},e.copy=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},e.copyGammaToLinear=function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},e.copyLinearToGamma=function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},e.convertGammaToLinear=function(t){return this.copyGammaToLinear(this,t),this},e.convertLinearToGamma=function(t){return this.copyLinearToGamma(this,t),this},e.copySRGBToLinear=function(t){return this.r=jt(t.r),this.g=jt(t.g),this.b=jt(t.b),this},e.copyLinearToSRGB=function(t){return this.r=zt(t.r),this.g=zt(t.g),this.b=zt(t.b),this},e.convertSRGBToLinear=function(){return this.copySRGBToLinear(this),this},e.convertLinearToSRGB=function(){return this.copyLinearToSRGB(this),this},e.getHex=function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},e.getHexString=function(){return("000000"+this.getHex().toString(16)).slice(-6)},e.getHSL=function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,i=this.r,r=this.g,o=this.b,s=Math.max(i,r,o),a=Math.min(i,r,o),l=(a+s)/2;if(a===s)e=0,n=0;else{var c=s-a;switch(n=l<=.5?c/(s+a):c/(2-s-a),s){case i:e=(r-o)/c+(r<o?6:0);break;case r:e=(o-i)/c+2;break;case o:e=(i-r)/c+4}e/=6}return t.h=e,t.s=n,t.l=l,t},e.getStyle=function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},e.offsetHSL=function(t,e,n){return this.getHSL(Bt),Bt.h+=t,Bt.s+=e,Bt.l+=n,this.setHSL(Bt.h,Bt.s,Bt.l),this},e.add=function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},e.addColors=function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},e.addScalar=function(t){return this.r+=t,this.g+=t,this.b+=t,this},e.sub=function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},e.multiply=function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},e.multiplyScalar=function(t){return this.r*=t,this.g*=t,this.b*=t,this},e.lerp=function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},e.lerpHSL=function(t,e){this.getHSL(Bt),t.getHSL(Ut);var n=s.lerp(Bt.h,Ut.h,e),i=s.lerp(Bt.s,Ut.s,e),r=s.lerp(Bt.l,Ut.l,e);return this.setHSL(n,i,r),this},e.equals=function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},e.fromArray=function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},e.toArray=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},e.fromBufferAttribute=function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this},e.toJSON=function(){return this.getHex()},t}();Ht.NAMES=Nt,Ht.prototype.r=1,Ht.prototype.g=1,Ht.prototype.b=1;var Gt=function(){function t(t,e,n,i,r,o){void 0===o&&(o=0),this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new A,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new Ht,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=o}var e=t.prototype;return e.clone=function(){return(new this.constructor).copy(this)},e.copy=function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var i=0,r=t.vertexColors.length;i<r;i++)this.vertexColors[i]=t.vertexColors[i].clone();return this},t}(),Wt=0;function qt(){Object.defineProperty(this,"id",{value:Wt++}),this.uuid=s.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function $t(t){qt.call(this),this.type="MeshBasicMaterial",this.color=new Ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}qt.prototype=Object.assign(Object.create(n.prototype),{constructor:qt,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var r=i(t.textures),o=i(t.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(qt.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),($t.prototype=Object.create(qt.prototype)).constructor=$t,$t.prototype.isMeshBasicMaterial=!0,$t.prototype.copy=function(t){return qt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};var Yt=new A,Qt=new d;function Xt(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}function Kt(t,e,n){Xt.call(this,new Int8Array(t),e,n)}function Zt(t,e,n){Xt.call(this,new Uint8Array(t),e,n)}function Jt(t,e,n){Xt.call(this,new Uint8ClampedArray(t),e,n)}function te(t,e,n){Xt.call(this,new Int16Array(t),e,n)}function ee(t,e,n){Xt.call(this,new Uint16Array(t),e,n)}function ne(t,e,n){Xt.call(this,new Int32Array(t),e,n)}function ie(t,e,n){Xt.call(this,new Uint32Array(t),e,n)}function re(t,e,n){Xt.call(this,new Uint16Array(t),e,n)}function oe(t,e,n){Xt.call(this,new Float32Array(t),e,n)}function se(t,e,n){Xt.call(this,new Float64Array(t),e,n)}Object.defineProperty(Xt.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Xt.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new Ht),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new d),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new A),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new y),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(var e=0,n=this.count;e<n;e++)Qt.fromBufferAttribute(this,e),Qt.applyMatrix3(t),this.setXY(e,Qt.x,Qt.y);else if(3===this.itemSize)for(var i=0,r=this.count;i<r;i++)Yt.fromBufferAttribute(this,i),Yt.applyMatrix3(t),this.setXYZ(i,Yt.x,Yt.y,Yt.z);return this},applyMatrix4:function(t){for(var e=0,n=this.count;e<n;e++)Yt.x=this.getX(e),Yt.y=this.getY(e),Yt.z=this.getZ(e),Yt.applyMatrix4(t),this.setXYZ(e,Yt.x,Yt.y,Yt.z);return this},applyNormalMatrix:function(t){for(var e=0,n=this.count;e<n;e++)Yt.x=this.getX(e),Yt.y=this.getY(e),Yt.z=this.getZ(e),Yt.applyNormalMatrix(t),this.setXYZ(e,Yt.x,Yt.y,Yt.z);return this},transformDirection:function(t){for(var e=0,n=this.count;e<n;e++)Yt.x=this.getX(e),Yt.y=this.getY(e),Yt.z=this.getZ(e),Yt.transformDirection(t),this.setXYZ(e,Yt.x,Yt.y,Yt.z);return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return this.array[0+(t*=this.itemSize)]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(Kt.prototype=Object.create(Xt.prototype)).constructor=Kt,(Zt.prototype=Object.create(Xt.prototype)).constructor=Zt,(Jt.prototype=Object.create(Xt.prototype)).constructor=Jt,(te.prototype=Object.create(Xt.prototype)).constructor=te,(ee.prototype=Object.create(Xt.prototype)).constructor=ee,(ne.prototype=Object.create(Xt.prototype)).constructor=ne,(ie.prototype=Object.create(Xt.prototype)).constructor=ie,(re.prototype=Object.create(Xt.prototype)).constructor=re,re.prototype.isFloat16BufferAttribute=!0,(oe.prototype=Object.create(Xt.prototype)).constructor=oe,(se.prototype=Object.create(Xt.prototype)).constructor=se;var ae=function(){function t(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}var e=t.prototype;return e.computeGroups=function(t){var e,n,i=[],r=void 0,o=t.faces;for(n=0;n<o.length;n++){var s=o[n];s.materialIndex!==r&&(r=s.materialIndex,void 0!==e&&(e.count=3*n-e.start,i.push(e)),e={start:3*n,materialIndex:r})}void 0!==e&&(e.count=3*n-e.start,i.push(e)),this.groups=i},e.fromGeometry=function(t){var e,n=t.faces,i=t.vertices,r=t.faceVertexUvs,o=r[0]&&r[0].length>0,s=r[1]&&r[1].length>0,a=t.morphTargets,l=a.length;if(l>0){e=[];for(var c=0;c<l;c++)e[c]={name:a[c].name,data:[]};this.morphTargets.position=e}var u,h=t.morphNormals,p=h.length;if(p>0){u=[];for(var f=0;f<p;f++)u[f]={name:h[f].name,data:[]};this.morphTargets.normal=u}var m=t.skinIndices,g=t.skinWeights,v=m.length===i.length,y=g.length===i.length;i.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var b=0;b<n.length;b++){var _=n[b];this.vertices.push(i[_.a],i[_.b],i[_.c]);var w=_.vertexNormals;if(3===w.length)this.normals.push(w[0],w[1],w[2]);else{var A=_.normal;this.normals.push(A,A,A)}var x=_.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var C=_.color;this.colors.push(C,C,C)}if(!0===o){var E=r[0][b];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",b),this.uvs.push(new d,new d,new d))}if(!0===s){var S=r[1][b];void 0!==S?this.uvs2.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",b),this.uvs2.push(new d,new d,new d))}for(var M=0;M<l;M++){var T=a[M].vertices;e[M].data.push(T[_.a],T[_.b],T[_.c])}for(var P=0;P<p;P++){var k=h[P].vertexNormals[b];u[P].data.push(k.a,k.b,k.c)}v&&this.skinIndices.push(m[_.a],m[_.b],m[_.c]),y&&this.skinWeights.push(g[_.a],g[_.b],g[_.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},t}();function le(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}var ce={Int8Array,Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ue(t,e){return new ce[t](e)}var he=1,de=new X,pe=new wt,fe=new A,me=new E,ge=new E,ve=new A;function ye(){Object.defineProperty(this,"id",{value:he+=2}),this.uuid=s.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}ye.prototype=Object.assign(Object.create(n.prototype),{constructor:ye,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){return this.index=Array.isArray(t)?new(le(t)>65535?ie:ee)(t,1):t,this},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},hasAttribute:function(t){return void 0!==this.attributes[t]},addGroup:function(t,e,n){void 0===n&&(n=0),this.groups.push({start:t,count:e,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new p).getNormalMatrix(t);n.applyNormalMatrix(i),n.needsUpdate=!0}var r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return de.makeRotationX(t),this.applyMatrix4(de),this},rotateY:function(t){return de.makeRotationY(t),this.applyMatrix4(de),this},rotateZ:function(t){return de.makeRotationZ(t),this.applyMatrix4(de),this},translate:function(t,e,n){return de.makeTranslation(t,e,n),this.applyMatrix4(de),this},scale:function(t,e,n){return de.makeScale(t,e,n),this.applyMatrix4(de),this},lookAt:function(t){return pe.lookAt(t),pe.updateMatrix(),this.applyMatrix4(pe.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(fe).negate(),this.translate(fe.x,fe.y,fe.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new oe(3*e.vertices.length,3),i=new oe(3*e.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(e.vertices)),this.setAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new oe(e.lineDistances.length,1);this.setAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new oe(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var n=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(n=void 0,e.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}if(!0===e.verticesNeedUpdate){var i=this.attributes.position;void 0!==i&&(i.copyVector3sArray(e.vertices),i.needsUpdate=!0),e.verticesNeedUpdate=!1}if(!0===e.normalsNeedUpdate){var r=this.attributes.normal;void 0!==r&&(r.copyVector3sArray(e.normals),r.needsUpdate=!0),e.normalsNeedUpdate=!1}if(!0===e.colorsNeedUpdate){var o=this.attributes.color;void 0!==o&&(o.copyColorsArray(e.colors),o.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){var s=this.attributes.uv;void 0!==s&&(s.copyVector2sArray(e.uvs),s.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){var a=this.attributes.lineDistance;void 0!==a&&(a.copyArray(e.lineDistances),a.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new ae).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new Xt(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.setAttribute("normal",new Xt(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.setAttribute("color",new Xt(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new Xt(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new Xt(o,2).copyVector2sArray(t.uvs2))}for(var s in this.groups=t.groups,t.morphTargets){for(var a=[],l=t.morphTargets[s],c=0,u=l.length;c<u;c++){var h=l[c],d=new oe(3*h.data.length,3);d.name=h.name,a.push(d.copyVector3sArray(h.data))}this.morphAttributes[s]=a}if(t.skinIndices.length>0){var p=new oe(4*t.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var f=new oe(4*t.skinWeights.length,4);this.setAttribute("skinWeight",f.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new E);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new A(-1/0,-1/0,-1/0),new A(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,i=e.length;n<i;n++)me.setFromBufferAttribute(e[n]),this.morphTargetsRelative?(ve.addVectors(this.boundingBox.min,me.min),this.boundingBox.expandByPoint(ve),ve.addVectors(this.boundingBox.max,me.max),this.boundingBox.expandByPoint(ve)):(this.boundingBox.expandByPoint(me.min),this.boundingBox.expandByPoint(me.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new j);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new A,1/0);if(t){var n=this.boundingSphere.center;if(me.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++)ge.setFromBufferAttribute(e[i]),this.morphTargetsRelative?(ve.addVectors(me.min,ge.min),me.expandByPoint(ve),ve.addVectors(me.max,ge.max),me.expandByPoint(ve)):(me.expandByPoint(ge.min),me.expandByPoint(ge.max));me.getCenter(n);for(var o=0,s=0,a=t.count;s<a;s++)ve.fromBufferAttribute(t,s),o=Math.max(o,n.distanceToSquared(ve));if(e)for(var l=0,c=e.length;l<c;l++)for(var u=e[l],h=this.morphTargetsRelative,d=0,p=u.count;d<p;d++)ve.fromBufferAttribute(u,d),h&&(fe.fromBufferAttribute(t,d),ve.add(fe)),o=Math.max(o,n.distanceToSquared(ve));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){var n=this.getAttribute("normal");if(void 0===n)n=new Xt(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(var i=0,r=n.count;i<r;i++)n.setXYZ(i,0,0,0);var o=new A,s=new A,a=new A,l=new A,c=new A,u=new A,h=new A,d=new A;if(t)for(var p=0,f=t.count;p<f;p+=3){var m=t.getX(p+0),g=t.getX(p+1),v=t.getX(p+2);o.fromBufferAttribute(e,m),s.fromBufferAttribute(e,g),a.fromBufferAttribute(e,v),h.subVectors(a,s),d.subVectors(o,s),h.cross(d),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),u.fromBufferAttribute(n,v),l.add(h),c.add(h),u.add(h),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z),n.setXYZ(v,u.x,u.y,u.z)}else for(var y=0,b=e.count;y<b;y+=3)o.fromBufferAttribute(e,y+0),s.fromBufferAttribute(e,y+1),a.fromBufferAttribute(e,y+2),h.subVectors(a,s),d.subVectors(o,s),h.cross(d),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i].array,o=t.attributes[i],s=o.array,a=o.itemSize*e,l=Math.min(s.length,r.length-a),c=0,u=a;c<l;c++,u++)r[u]=s[c];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)ve.fromBufferAttribute(t,e),ve.normalize(),t.setXYZ(e,ve.x,ve.y,ve.z)},toNonIndexed:function(){function t(t,e){for(var n=t.array,i=t.itemSize,r=t.normalized,o=new n.constructor(e.length*i),s=0,a=0,l=0,c=e.length;l<c;l++){s=e[l]*i;for(var u=0;u<i;u++)o[a++]=n[s++]}return new Xt(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new ye,n=this.index.array,i=this.attributes;for(var r in i){var o=t(i[r],n);e.setAttribute(r,o)}var s=this.morphAttributes;for(var a in s){for(var l=[],c=s[a],u=0,h=c.length;u<h;u++){var d=t(c[u],n);l.push(d)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,f=0,m=p.length;f<m;f++){var g=p[f];e.addGroup(g.start,g.count,g.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var o in r){var s=r[o],a=s.toJSON(t.data);""!==s.name&&(a.name=s.name),t.data.attributes[o]=a}var l={},c=!1;for(var u in this.morphAttributes){for(var h=this.morphAttributes[u],d=[],p=0,f=h.length;p<f;p++){var m=h[p],g=m.toJSON(t.data);""!==m.name&&(g.name=m.name),d.push(g)}d.length>0&&(l[u]=d,c=!0)}c&&(t.data.morphAttributes=l,t.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(t.data.groups=JSON.parse(JSON.stringify(v)));var y=this.boundingSphere;return null!==y&&(t.data.boundingSphere={center:y.center.toArray(),radius:y.radius}),t},clone:function(){return(new ye).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var n=t.index;null!==n&&this.setIndex(n.clone(e));var i=t.attributes;for(var r in i)this.setAttribute(r,i[r].clone(e));var o=t.morphAttributes;for(var s in o){for(var a=[],l=o[s],c=0,u=l.length;c<u;c++)a.push(l[c].clone(e));this.morphAttributes[s]=a}this.morphTargetsRelative=t.morphTargetsRelative;for(var h=t.groups,d=0,p=h.length;d<p;d++){var f=h[d];this.addGroup(f.start,f.count,f.materialIndex)}var m=t.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=t.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var be=new X,_e=new Q,we=new j,Ae=new A,xe=new A,Ce=new A,Ee=new A,Se=new A,Me=new A,Te=new A,Pe=new A,ke=new A,De=new d,Oe=new d,Re=new d,Ie=new A,Le=new A;function Fe(t,e){wt.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new ye,this.material=void 0!==e?e:new $t,this.updateMorphTargets()}function Ne(t,e,n,i,r,o,s,a){if(null===(1===e.side?i.intersectTriangle(s,o,r,!0,a):i.intersectTriangle(r,o,s,2!==e.side,a)))return null;Le.copy(a),Le.applyMatrix4(t.matrixWorld);var l=n.ray.origin.distanceTo(Le);return l<n.near||l>n.far?null:{distance:l,point:Le.clone(),object:t}}function Be(t,e,n,i,r,o,s,a,l,c,u,h){Ae.fromBufferAttribute(r,c),xe.fromBufferAttribute(r,u),Ce.fromBufferAttribute(r,h);var p=t.morphTargetInfluences;if(e.morphTargets&&o&&p){Te.set(0,0,0),Pe.set(0,0,0),ke.set(0,0,0);for(var f=0,m=o.length;f<m;f++){var g=p[f],v=o[f];0!==g&&(Ee.fromBufferAttribute(v,c),Se.fromBufferAttribute(v,u),Me.fromBufferAttribute(v,h),s?(Te.addScaledVector(Ee,g),Pe.addScaledVector(Se,g),ke.addScaledVector(Me,g)):(Te.addScaledVector(Ee.sub(Ae),g),Pe.addScaledVector(Se.sub(xe),g),ke.addScaledVector(Me.sub(Ce),g)))}Ae.add(Te),xe.add(Pe),Ce.add(ke)}t.isSkinnedMesh&&(t.boneTransform(c,Ae),t.boneTransform(u,xe),t.boneTransform(h,Ce));var y=Ne(t,e,n,i,Ae,xe,Ce,Ie);if(y){a&&(De.fromBufferAttribute(a,c),Oe.fromBufferAttribute(a,u),Re.fromBufferAttribute(a,h),y.uv=Ft.getUV(Ie,Ae,xe,Ce,De,Oe,Re,new d)),l&&(De.fromBufferAttribute(l,c),Oe.fromBufferAttribute(l,u),Re.fromBufferAttribute(l,h),y.uv2=Ft.getUV(Ie,Ae,xe,Ce,De,Oe,Re,new d));var b=new Gt(c,u,h);Ft.getNormal(Ae,xe,Ce,b.normal),y.face=b}return y}Fe.prototype=Object.assign(Object.create(wt.prototype),{constructor:Fe,isMesh:!0,copy:function(t){return wt.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,o=i.length;r<o;r++){var s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}else{var a=t.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){var n,i=this.geometry,r=this.material,o=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),we.copy(i.boundingSphere),we.applyMatrix4(o),!1!==t.ray.intersectsSphere(we)&&(be.copy(o).invert(),_e.copy(t.ray).applyMatrix4(be),null===i.boundingBox||!1!==_e.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var s=i.index,a=i.attributes.position,l=i.morphAttributes.position,c=i.morphTargetsRelative,u=i.attributes.uv,h=i.attributes.uv2,p=i.groups,f=i.drawRange;if(null!==s)if(Array.isArray(r))for(var m=0,g=p.length;m<g;m++)for(var v=p[m],y=r[v.materialIndex],b=Math.max(v.start,f.start),_=Math.min(v.start+v.count,f.start+f.count);b<_;b+=3){var w=s.getX(b),A=s.getX(b+1),x=s.getX(b+2);(n=Be(this,y,t,_e,a,l,c,u,h,w,A,x))&&(n.faceIndex=Math.floor(b/3),n.face.materialIndex=v.materialIndex,e.push(n))}else for(var C=Math.max(0,f.start),E=Math.min(s.count,f.start+f.count);C<E;C+=3){var S=s.getX(C),M=s.getX(C+1),T=s.getX(C+2);(n=Be(this,r,t,_e,a,l,c,u,h,S,M,T))&&(n.faceIndex=Math.floor(C/3),e.push(n))}else if(void 0!==a)if(Array.isArray(r))for(var P=0,k=p.length;P<k;P++)for(var D=p[P],O=r[D.materialIndex],R=Math.max(D.start,f.start),I=Math.min(D.start+D.count,f.start+f.count);R<I;R+=3)(n=Be(this,O,t,_e,a,l,c,u,h,R,R+1,R+2))&&(n.faceIndex=Math.floor(R/3),n.face.materialIndex=D.materialIndex,e.push(n));else for(var L=Math.max(0,f.start),F=Math.min(a.count,f.start+f.count);L<F;L+=3)(n=Be(this,r,t,_e,a,l,c,u,h,L,L+1,L+2))&&(n.faceIndex=Math.floor(L/3),e.push(n))}else if(i.isGeometry){var N,B=Array.isArray(r),U=i.vertices,V=i.faces,j=i.faceVertexUvs[0];j.length>0&&(N=j);for(var z=0,H=V.length;z<H;z++){var G=V[z],W=B?r[G.materialIndex]:r;if(void 0!==W){var q=U[G.a],$=U[G.b],Y=U[G.c];if(n=Ne(this,W,t,_e,q,$,Y,Ie)){if(N&&N[z]){var Q=N[z];De.copy(Q[0]),Oe.copy(Q[1]),Re.copy(Q[2]),n.uv=Ft.getUV(Ie,q,$,Y,De,Oe,Re,new d)}n.face=G,n.faceIndex=z,e.push(n)}}}}}});var Ue=function(t){function e(e,n,i,r,o,s){var a;void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),void 0===r&&(r=1),void 0===o&&(o=1),void 0===s&&(s=1),(a=t.call(this)||this).type="BoxBufferGeometry",a.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};var l=u(a);r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);var c=[],h=[],d=[],p=[],f=0,m=0;function g(t,e,n,i,r,o,s,a,u,g,v){for(var y=o/u,b=s/g,_=o/2,w=s/2,x=a/2,C=u+1,E=g+1,S=0,M=0,T=new A,P=0;P<E;P++)for(var k=P*b-w,D=0;D<C;D++)T[t]=(D*y-_)*i,T[e]=k*r,T[n]=x,h.push(T.x,T.y,T.z),T[t]=0,T[e]=0,T[n]=a>0?1:-1,d.push(T.x,T.y,T.z),p.push(D/u),p.push(1-P/g),S+=1;for(var O=0;O<g;O++)for(var R=0;R<u;R++){var I=f+R+C*(O+1),L=f+(R+1)+C*(O+1),F=f+(R+1)+C*O;c.push(f+R+C*O,I,F),c.push(I,L,F),M+=6}l.addGroup(m,M,v),m+=M,f+=S}return g("z","y","x",-1,-1,i,n,e,s,o,0),g("z","y","x",1,-1,i,n,-e,s,o,1),g("x","z","y",1,1,e,i,n,r,s,2),g("x","z","y",1,-1,e,i,-n,r,s,3),g("x","y","z",1,-1,e,n,i,r,o,4),g("x","y","z",-1,-1,e,n,-i,r,o,5),a.setIndex(c),a.setAttribute("position",new oe(h,3)),a.setAttribute("normal",new oe(d,3)),a.setAttribute("uv",new oe(p,2)),a}return c(e,t),e}(ye);function Ve(t){var e={};for(var n in t)for(var i in e[n]={},t[n]){var r=t[n][i];e[n][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?r.clone():Array.isArray(r)?r.slice():r}return e}function je(t){for(var e={},n=0;n<t.length;n++){var i=Ve(t[n]);for(var r in i)e[r]=i[r]}return e}var ze={clone:Ve,merge:je};function He(t){qt.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",this.fragmentShader="\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Ge(){wt.call(this),this.type="Camera",this.matrixWorldInverse=new X,this.projectionMatrix=new X,this.projectionMatrixInverse=new X}function We(t,e,n,i){void 0===t&&(t=50),void 0===e&&(e=1),void 0===n&&(n=.1),void 0===i&&(i=2e3),Ge.call(this),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function qe(t,e,n){if(wt.call(this),this.type="CubeCamera",!0===n.isWebGLCubeRenderTarget){this.renderTarget=n;var i=new We(90,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new A(1,0,0)),this.add(i);var r=new We(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new A(-1,0,0)),this.add(r);var o=new We(90,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new A(0,1,0)),this.add(o);var s=new We(90,1,t,e);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new A(0,-1,0)),this.add(s);var a=new We(90,1,t,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new A(0,0,1)),this.add(a);var l=new We(90,1,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new A(0,0,-1)),this.add(l),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var c=t.xr.enabled,u=t.getRenderTarget();t.xr.enabled=!1;var h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,s),t.setRenderTarget(n,4),t.render(e,a),n.texture.generateMipmaps=h,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(u),t.xr.enabled=c}}else console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.")}function $e(t,e,n,i,r,o,s,a,l,c){g.call(this,t=void 0!==t?t:[],e=void 0!==e?e:301,n,i,r,o,s=void 0!==s?s:1022,a,l,c),this.flipY=!1,this._needsFlipEnvMap=!0}function Ye(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),b.call(this,t,t,e),this.texture=new $e(void 0,(e=e||{}).mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture._needsFlipEnvMap=!1}function Qe(t,e,n,i,r,o,s,a,l,c,u,h){g.call(this,null,o,s,a,l,c,i,r,u,h),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==l?l:1003,this.minFilter=void 0!==c?c:1003,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}(He.prototype=Object.create(qt.prototype)).constructor=He,He.prototype.isShaderMaterial=!0,He.prototype.copy=function(t){return qt.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ve(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this},He.prototype.toJSON=function(t){var e=qt.prototype.toJSON.call(this,t);for(var n in e.glslVersion=this.glslVersion,e.uniforms={},this.uniforms){var i=this.uniforms[n].value;e.uniforms[n]=i&&i.isTexture?{type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?{type:"c",value:i.getHex()}:i&&i.isVector2?{type:"v2",value:i.toArray()}:i&&i.isVector3?{type:"v3",value:i.toArray()}:i&&i.isVector4?{type:"v4",value:i.toArray()}:i&&i.isMatrix3?{type:"m3",value:i.toArray()}:i&&i.isMatrix4?{type:"m4",value:i.toArray()}:{value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var r={};for(var o in this.extensions)!0===this.extensions[o]&&(r[o]=!0);return Object.keys(r).length>0&&(e.extensions=r),e},Ge.prototype=Object.assign(Object.create(wt.prototype),{constructor:Ge,isCamera:!0,copy:function(t,e){return wt.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new A),this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){wt.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(t,e){wt.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),We.prototype=Object.assign(Object.create(Ge.prototype),{constructor:We,isPerspectiveCamera:!0,copy:function(t,e){return Ge.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*s.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*s.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*s.RAD2DEG*Math.atan(Math.tan(.5*s.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*s.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,l=o.fullHeight;r+=o.offsetX*i/a,e-=o.offsetY*n/l,i*=o.width/a,n*=o.height/l}var c=this.filmOffset;0!==c&&(r+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){var e=wt.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),(qe.prototype=Object.create(wt.prototype)).constructor=qe,($e.prototype=Object.create(g.prototype)).constructor=$e,$e.prototype.isCubeTexture=!0,Object.defineProperty($e.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),(Ye.prototype=Object.create(b.prototype)).constructor=Ye,Ye.prototype.isWebGLCubeRenderTarget=!0,Ye.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=1023,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var n=new Ue(5,5,5),i=new He({name:"CubemapFromEquirect",uniforms:Ve({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",side:1,blending:0});i.uniforms.tEquirect.value=e;var r=new Fe(n,i),o=e.minFilter;return 1008===e.minFilter&&(e.minFilter=1006),new qe(1,10,this).update(t,r),e.minFilter=o,r.geometry.dispose(),r.material.dispose(),this},Ye.prototype.clear=function(t,e,n,i){for(var r=t.getRenderTarget(),o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,i);t.setRenderTarget(r)},(Qe.prototype=Object.create(g.prototype)).constructor=Qe,Qe.prototype.isDataTexture=!0;var Xe=new j,Ke=new A,Ze=function(){function t(t,e,n,i,r,o){this.planes=[void 0!==t?t:new Et,void 0!==e?e:new Et,void 0!==n?n:new Et,void 0!==i?i:new Et,void 0!==r?r:new Et,void 0!==o?o:new Et]}var e=t.prototype;return e.set=function(t,e,n,i,r,o){var s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(o),this},e.clone=function(){return(new this.constructor).copy(this)},e.copy=function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},e.setFromProjectionMatrix=function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return e[0].setComponents(s-i,u-a,f-h,y-m).normalize(),e[1].setComponents(s+i,u+a,f+h,y+m).normalize(),e[2].setComponents(s+r,u+l,f+d,y+g).normalize(),e[3].setComponents(s-r,u-l,f-d,y-g).normalize(),e[4].setComponents(s-o,u-c,f-p,y-v).normalize(),e[5].setComponents(s+o,u+c,f+p,y+v).normalize(),this},e.intersectsObject=function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Xe.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Xe)},e.intersectsSprite=function(t){return Xe.center.set(0,0,0),Xe.radius=.7071067811865476,Xe.applyMatrix4(t.matrixWorld),this.intersectsSphere(Xe)},e.intersectsSphere=function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++)if(e[r].distanceToPoint(n)<i)return!1;return!0},e.intersectsBox=function(t){for(var e=this.planes,n=0;n<6;n++){var i=e[n];if(Ke.x=i.normal.x>0?t.max.x:t.min.x,Ke.y=i.normal.y>0?t.max.y:t.min.y,Ke.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Ke)<0)return!1}return!0},e.containsPoint=function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0},t}();function Je(){var t=null,e=!1,n=null,i=null;function r(e,o){n(e,o),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function tn(t,e){var n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){var o=i.get(e);(!o||o.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version})}else{e.isInterleavedBufferAttribute&&(e=e.data);var s=i.get(e);void 0===s?i.set(e,function(e,i){var r=e.array,o=e.usage,s=t.createBuffer();t.bindBuffer(i,s),t.bufferData(i,r,o),e.onUploadCallback();var a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?e.isFloat16BufferAttribute?n?a=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:r instanceof Uint8Array&&(a=5121),{buffer:s,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,r)):s.version<e.version&&(function(e,i,r){var o=i.array,s=i.updateRange;t.bindBuffer(r,e),-1===s.count?t.bufferSubData(r,0,o):(n?t.bufferSubData(r,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):t.bufferSubData(r,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1)}(s.buffer,e,r),s.version=e.version)}}}}var en=function(t){function e(e,n,i,r){var o;void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),void 0===r&&(r=1),(o=t.call(this)||this).type="PlaneBufferGeometry",o.parameters={width:e,height:n,widthSegments:i,heightSegments:r};for(var s=e/2,a=n/2,l=Math.floor(i),c=Math.floor(r),u=l+1,h=c+1,d=e/l,p=n/c,f=[],m=[],g=[],v=[],y=0;y<h;y++)for(var b=y*p-a,_=0;_<u;_++)m.push(_*d-s,-b,0),g.push(0,0,1),v.push(_/l),v.push(1-y/c);for(var w=0;w<c;w++)for(var A=0;A<l;A++){var x=A+u*(w+1),C=A+1+u*(w+1),E=A+1+u*w;f.push(A+u*w,x,E),f.push(x,C,E)}return o.setIndex(f),o.setAttribute("position",new oe(m,3)),o.setAttribute("normal",new oe(g,3)),o.setAttribute("uv",new oe(v,2)),o}return c(e,t),e}(ye),nn={alphamap_fragment:"\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",alphamap_pars_fragment:"\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",alphatest_fragment:"\n#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",aomap_fragment:"\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\n\t#endif\n\n#endif\n",aomap_pars_fragment:"\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n",bsdfs:'\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via \'environmentBRDF\' from "Physically Based Shading on Mobile"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n}\n\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t// this is intended to be used on spot and point lights who are represented as luminous intensity\n\t// but who must be converted to luminous irradiance for surface lighting calculation\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\tif( cutoffDistance > 0.0 ) {\n\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t}\n\n\treturn distanceFalloff;\n\n#else\n\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n#endif\n\n}\n\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick \'94\n\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH \'13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n} // validated\n\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\n\t// See F_Schlick\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\n\treturn Fr * fresnel + F0;\n\n}\n\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disney\u2019s reparameterization\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\t// geometry term (normalized) = G(l)\u22c5G(v) / 4(n\u22c5l)(n\u22c5v)\n\t// also see #12151\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\n\treturn 1.0 / ( gl * gv );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disney\u2019s reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4\'s roughness\n\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\n\treturn specularColor * brdf.x + brdf.y;\n\n} // validated\n\n// Fdez-Ag\xfcera\'s "Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\n\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n\n#if defined( USE_SHEEN )\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L94\nfloat D_Charlie(float roughness, float NoH) {\n\t// Estevez and Kulla 2017, "Production Friendly Microfacet Sheen BRDF"\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L136\nfloat V_Neubelt(float NoV, float NoL) {\n\t// Neubelt and Pettineo 2013, "Crafting a Next-gen Material Pipeline for The Order: 1886"\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\n\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n\n}\n\n#endif\n',bumpmap_pars_fragment:"\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// http://api.unrealengine.com/attachments/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n",clipping_planes_fragment:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n",clipping_planes_pars_fragment:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n",clipping_planes_pars_vertex:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n#endif\n",clipping_planes_vertex:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvClipPosition = - mvPosition.xyz;\n\n#endif\n",color_fragment:"\n#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n",color_pars_fragment:"\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",color_pars_vertex:"\n#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\n\tvarying vec3 vColor;\n\n#endif\n",color_vertex:"\n#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\n\tvColor = vec3( 1.0 );\n\n#endif\n\n#ifdef USE_COLOR\n\n\tvColor.xyz *= color.xyz;\n\n#endif\n\n#ifdef USE_INSTANCING_COLOR\n\n\tvColor.xyz *= instanceColor.xyz;\n\n#endif\n",common:"\n#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n\n#ifndef saturate\n// <tonemapping_pars_fragment> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t// dir can be either a direction vector or a normal vector\n\t// upper-left 3x3 of matrix is assumed to be orthogonal\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\n// https://en.wikipedia.org/wiki/Relative_luminance\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\n\treturn dot( weights, color.rgb );\n\n}\n\nbool isPerspectiveMatrix( mat4 m ) {\n\n\treturn m[ 2 ][ 3 ] == - 1.0;\n\n}\n\nvec2 equirectUv( in vec3 dir ) {\n\n\t// dir is assumed to be unit length\n\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\treturn vec2( u, v );\n\n}\n",cube_uv_reflection_fragment:"\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\n\t// These shader functions convert between the UV coordinates of a single face of\n\t// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n\t// sampling a textureCube (not generally normalized ).\n\n\tfloat getFace( vec3 direction ) {\n\n\t\tvec3 absDirection = abs( direction );\n\n\t\tfloat face = - 1.0;\n\n\t\tif ( absDirection.x > absDirection.z ) {\n\n\t\t\tif ( absDirection.x > absDirection.y )\n\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\n\t\t\telse\n\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\n\t\t} else {\n\n\t\t\tif ( absDirection.z > absDirection.y )\n\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\n\t\t\telse\n\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\n\t\t}\n\n\t\treturn face;\n\n\t}\n\n\t// RH coordinate system; PMREM face-indexing convention\n\tvec2 getUV( vec3 direction, float face ) {\n\n\t\tvec2 uv;\n\n\t\tif ( face == 0.0 ) {\n\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x ); // pos x\n\n\t\t} else if ( face == 1.0 ) {\n\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y ); // pos y\n\n\t\t} else if ( face == 2.0 ) {\n\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z ); // pos z\n\n\t\t} else if ( face == 3.0 ) {\n\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x ); // neg x\n\n\t\t} else if ( face == 4.0 ) {\n\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y ); // neg y\n\n\t\t} else {\n\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z ); // neg z\n\n\t\t}\n\n\t\treturn 0.5 * ( uv + 1.0 );\n\n\t}\n\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\n\t\tfloat face = getFace( direction );\n\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\n\t\tfloat faceSize = exp2( mipInt );\n\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\n\t\tvec2 f = fract( uv );\n\n\t\tuv += 0.5 - f;\n\n\t\tif ( face > 2.0 ) {\n\n\t\t\tuv.y += faceSize;\n\n\t\t\tface -= 3.0;\n\n\t\t}\n\n\t\tuv.x += face * faceSize;\n\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\n\t\t}\n\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\n\t\tuv *= texelSize;\n\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tuv.x += texelSize;\n\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tuv.y += texelSize;\n\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tuv.x -= texelSize;\n\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tvec3 tm = mix( tl, tr, f.x );\n\n\t\tvec3 bm = mix( bl, br, f.x );\n\n\t\treturn mix( tm, bm, f.y );\n\n\t}\n\n\t// These defines must match with PMREMGenerator\n\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\n\tfloat roughnessToMip( float roughness ) {\n\n\t\tfloat mip = 0.0;\n\n\t\tif ( roughness >= r1 ) {\n\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\n\t\t} else if ( roughness >= r4 ) {\n\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\n\t\t} else if ( roughness >= r5 ) {\n\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\n\t\t} else if ( roughness >= r6 ) {\n\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\n\t\t} else {\n\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness ); // 1.16 = 1.79^0.25\n\t\t}\n\n\t\treturn mip;\n\n\t}\n\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\n\t\tfloat mipF = fract( mip );\n\n\t\tfloat mipInt = floor( mip );\n\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\n\t\tif ( mipF == 0.0 ) {\n\n\t\t\treturn vec4( color0, 1.0 );\n\n\t\t} else {\n\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\n\t\t}\n\n\t}\n\n#endif\n",defaultnormal_vertex:"\nvec3 transformedNormal = objectNormal;\n\n#ifdef USE_INSTANCING\n\n\t// this is in lieu of a per-instance normal-matrix\n\t// shear transforms in the instance matrix are not supported\n\n\tmat3 m = mat3( instanceMatrix );\n\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\n\ttransformedNormal = m * transformedNormal;\n\n#endif\n\ntransformedNormal = normalMatrix * transformedNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n",displacementmap_pars_vertex:"\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n",displacementmap_vertex:"\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n\n#endif\n",emissivemap_fragment:"\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n",emissivemap_pars_fragment:"\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n",encodings_fragment:"\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\n// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\n\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\n\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n\t// return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\n\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\n\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\t// NOTE: The implementation with min causes the shader to not compile on\n\t// a common Alcatel A502DL in Chrome 78/Android 8.1. Some research suggests \n\t// that the chipset is Mediatek MT6739 w/ IMG PowerVR GE8100 GPU.\n\t// D = min( floor( D ) / 255.0, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",envmap_fragment:"\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvec3 cameraToFrag;\n\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\n\t\t}\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\n\t\tenvColor = envMapTexelToLinear( envColor );\n\n\t#endif\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n",envmap_common_pars_fragment:"\n#ifdef USE_ENVMAP\n\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif\n",envmap_pars_fragment:"\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n",envmap_pars_vertex:"\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n",envmap_physical_pars_fragment:"\n#if defined( USE_ENVMAP )\n\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\n\tvec3 getLightProbeIndirectIrradiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in int maxMIPLevel ) {\n\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#else\n\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\n\t\t#else\n\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\n\t\t#endif\n\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t}\n\n\t// Trowbridge-Reitz distribution to Mip level, following the logic of http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\n\t\t// clamp to allowable LOD ranges.\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n\t}\n\n\tvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\n\t\t\t// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\n\t\t#endif\n\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\n\t\t#endif\n\n\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t}\n\n#endif\n",envmap_vertex:"\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex;\n\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\t}\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\n\n\tfogDepth = - mvPosition.z;\n\n#endif\n",fog_pars_vertex:"\n#ifdef USE_FOG\n\n\tvarying float fogDepth;\n\n#endif\n",fog_fragment:"\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n",fog_pars_fragment:"\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n",gradientmap_pars_fragment:"\n\n#ifdef USE_GRADIENTMAP\n\n\tuniform sampler2D gradientMap;\n\n#endif\n\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t// dotNL will be from -1.0 to 1.0\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t#ifdef USE_GRADIENTMAP\n\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\n\t#else\n\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\n\t#endif\n\n}\n",lightmap_fragment:"\n#ifdef USE_LIGHTMAP\n\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\n\n#endif\n",lightmap_pars_fragment:"\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n",lights_lambert_vertex:"\nvec3 diffuse = vec3( 1.0 );\n\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\n\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\n\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\n\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n\n#ifdef DOUBLE_SIDED\n\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n\n#endif\n\n#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n/*\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\t// TODO (abelnation): implement\n\n\t}\n\n#endif\n*/\n\n#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n",lights_pars_begin:"\nuniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\n\n// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\n\t// normal is assumed to have unit length\n\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\n\treturn result;\n\n}\n\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\n\treturn irradiance;\n\n}\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI;\n\n\t#endif\n\n\treturn irradiance;\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( angleCos > spotLight.coneCos ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tirradiance *= PI;\n\n\t\t#endif\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n",lights_toon_fragment:"\nToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\n",lights_toon_pars_fragment:"\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct ToonMaterial {\n\n\tvec3 diffuseColor;\n\n};\n\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\n#define Material_LightProbeLOD( material )\t(0)\n",lights_phong_fragment:"\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct BlinnPhongMaterial {\n\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\n\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n\n#ifdef REFLECTIVITY\n\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\n#else\n\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\n#endif\n\n#ifdef CLEARCOAT\n\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\n\t#ifdef USE_CLEARCOATMAP\n\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\n\t#endif\n\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\n\t#endif\n\n\tmaterial.clearcoat = saturate( material.clearcoat ); // Burley clearcoat model\n\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n\n#endif\n\n#ifdef USE_SHEEN\n\n\tmaterial.sheenColor = sheen;\n\n#endif\n",lights_physical_pars_fragment:"\nstruct PhysicalMaterial {\n\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n\n};\n\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tccIrradiance *= PI; // punctual light\n\n\t\t#endif\n\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\n\t// Both indirect specular and indirect diffuse light accumulate here\n\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n",lights_fragment_begin:"\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n#ifdef CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n",lights_fragment_maps:"\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\n\n\t\t#endif\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( /*lightProbe,*/ geometry, maxMipLevel );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\n\t#ifdef CLEARCOAT\n\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\n\t#endif\n\n#endif\n",lights_fragment_end:"\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n#endif\n",logdepthbuf_fragment:"\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\t// Doing a strict comparison with == 1.0 can cause noise artifacts\n\t// on some platforms. See issue #17623.\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n",logdepthbuf_pars_fragment:"\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n\n#endif\n",logdepthbuf_pars_vertex:"\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n",logdepthbuf_vertex:"\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\n\t#else\n\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\t\tgl_Position.z *= gl_Position.w;\n\n\t\t}\n\n\t#endif\n\n#endif\n",map_fragment:"\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n",map_pars_fragment:"\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n",map_particle_fragment:"\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n#endif\n\n#ifdef USE_MAP\n\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n\n#endif\n",map_particle_pars_fragment:"\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tuniform mat3 uvTransform;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",metalnessmap_fragment:"\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n",metalnessmap_pars_fragment:"\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n",morphnormal_vertex:"\n#ifdef USE_MORPHNORMALS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\n#endif\n",morphtarget_pars_vertex:"\n#ifdef USE_MORPHTARGETS\n\n\tuniform float morphTargetBaseInfluence;\n\n\t#ifndef USE_MORPHNORMALS\n\n\t\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\t\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif\n",morphtarget_vertex:"\n#ifdef USE_MORPHTARGETS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in position = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n",normal_fragment_begin:"\n#ifdef FLAT_SHADED\n\n\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\n\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\t#ifdef USE_TANGENT\n\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n\n// non perturbed normal for clearcoat among others\n\nvec3 geometryNormal = normal;\n\n",normal_fragment_maps:"\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t#ifdef FLIP_SIDED\n\n\t\tnormal = - normal;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\tnormal = normalize( normalMatrix * normal );\n\n#elif defined( TANGENTSPACE_NORMALMAP )\n\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tnormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n",normalmap_pars_fragment:"\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n#endif\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tuniform mat3 normalMatrix;\n\n#endif\n\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tmat3 tsn = mat3( S, T, N );\n\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n",clearcoat_normal_fragment_begin:"\n#ifdef CLEARCOAT\n\n\tvec3 clearcoatNormal = geometryNormal;\n\n#endif\n",clearcoat_normal_fragment_maps:"\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\n\t#else\n\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\n\t#endif\n\n#endif\n",clearcoat_pars_fragment:"\n\n#ifdef USE_CLEARCOATMAP\n\n\tuniform sampler2D clearcoatMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\tuniform sampler2D clearcoatRoughnessMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n\n#endif\n",packing:"\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n",project_vertex:"\nvec4 mvPosition = vec4( transformed, 1.0 );\n\n#ifdef USE_INSTANCING\n\n\tmvPosition = instanceMatrix * mvPosition;\n\n#endif\n\nmvPosition = modelViewMatrix * mvPosition;\n\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"\n#ifdef DITHERING\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n",dithering_pars_fragment:"\n#ifdef DITHERING\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift acording to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n",roughnessmap_fragment:"\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n",roughnessmap_pars_fragment:"\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n",shadowmap_pars_fragment:"\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n\t}\n\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n\t\tfloat occlusion = 1.0;\n\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\n\t\tfloat hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n\t\tif (hard_shadow != 1.0 ) {\n\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n\t\t}\n\t\treturn occlusion;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//\ty Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim\t\t:= ( 4 , 2 )\n\t\t//\t# #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n",shadowmap_pars_vertex:"\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n",shadowmap_vertex:"\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\t// Offsetting the position used for querying occlusion along the world normal can be used to reduce shadow acne.\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\n\t#endif\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n",shadowmask_pars_fragment:"\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\tDirectionalLightShadow directionalLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\tSpotLightShadow spotLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\tPointLightShadow pointLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n",skinbase_vertex:"\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n",skinning_pars_vertex:"\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n",skinning_vertex:"\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n",skinnormal_vertex:"\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n",specularmap_fragment:"\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n",specularmap_pars_fragment:"\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n",tonemapping_fragment:"\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n",tonemapping_pars_fragment:"\n#ifndef saturate\n// <common> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicworlds.com/blog/filmic-tonemapping-operators/\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://github.com/selfshadow/ltc_code/blob/master/webgl/shaders/ltc/ltc_blit.fs\nvec3 RRTAndODTFit( vec3 v ) {\n\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n\n}\n\n// this implementation of ACES is modified to accommodate a brighter viewing environment.\n// the scale factor of 1/0.6 is subjective. see discussion in #19621.\n\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\t// sRGB => XYZ => D65_2_D60 => AP1 => RRT_SAT\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ), // transposed from source\n\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\n\t// ODT_SAT => XYZ => D60_2_D65 => sRGB\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ), // transposed from source\n\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\n\tcolor *= toneMappingExposure / 0.6;\n\n\tcolor = ACESInputMat * color;\n\n\t// Apply RRT and ODT\n\tcolor = RRTAndODTFit( color );\n\n\tcolor = ACESOutputMat * color;\n\n\t// Clamp to [0, 1]\n\treturn saturate( color );\n\n}\n\nvec3 CustomToneMapping( vec3 color ) { return color; }\n",transmissionmap_fragment:"\n#ifdef USE_TRANSMISSIONMAP\n\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n\n#endif\n",transmissionmap_pars_fragment:"\n#ifdef USE_TRANSMISSIONMAP\n\n\tuniform sampler2D transmissionMap;\n\n#endif\n",uv_pars_fragment:"\n#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\n\tvarying vec2 vUv;\n\n#endif\n",uv_pars_vertex:"\n#ifdef USE_UV\n\n\t#ifdef UVS_VERTEX_ONLY\n\n\t\tvec2 vUv;\n\n\t#else\n\n\t\tvarying vec2 vUv;\n\n\t#endif\n\n\tuniform mat3 uvTransform;\n\n#endif\n",uv_vertex:"\n#ifdef USE_UV\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n",uv2_pars_fragment:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n",uv2_pars_vertex:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n\tuniform mat3 uv2Transform;\n\n#endif\n",uv2_vertex:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n\n#endif\n",worldpos_vertex:"\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t#ifdef USE_INSTANCING\n\n\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t#endif\n\n\tworldPosition = modelMatrix * worldPosition;\n\n#endif\n",background_frag:"\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",background_vert:"\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n",cube_frag:"\n#include <envmap_common_pars_fragment>\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",cube_vert:"\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n",depth_frag:"\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t// Higher precision equivalent of gl_FragCoord.z. This assumes depthRange has been left to its default values.\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\n\t#endif\n\n}\n",depth_vert:"\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n// This is used for computing an equivalent of gl_FragCoord.z that is as high precision as possible.\n// Some platforms compute gl_FragCoord at a lower precision which makes the manually computed value better for\n// depth-based postprocessing effects. Reproduced on iPad with A10 processor / iPadOS 13.3.1.\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvHighPrecisionZW = gl_Position.zw;\n\n}\n",distanceRGBA_frag:"\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n",distanceRGBA_vert:"\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n",equirect_frag:"\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV = equirectUv( direction );\n\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",equirect_vert:"\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n",linedashed_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",linedashed_vert:"\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvLineDistance = scale * lineDistance;\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n",meshbasic_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshbasic_vert:"\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshlambert_frag:"\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t#endif\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshmatcap_frag:"\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( 1.0 );\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshmatcap_vert:"\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\t\tvNormal = normalize( transformedNormal );\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n",meshtoon_frag:"\n#define TOON\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshtoon_vert:"\n#define TOON\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshphong_frag:"\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshphong_vert:"\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshphysical_frag:"\n#define STANDARD\n\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t// this is a stub for the transmission model\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshphysical_vert:"\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",normal_frag:"\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n}\n",normal_vert:"\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n",points_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",points_vert:"\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n",shadow_frag:"\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",shadow_vert:"\n#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",sprite_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",sprite_vert:"\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n"},rn={common:{diffuse:{value:new Ht(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new p},uv2Transform:{value:new p},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new d(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ht(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new p}},sprite:{diffuse:{value:new Ht(15658734)},opacity:{value:1},center:{value:new d(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new p}}},on={basic:{uniforms:je([rn.common,rn.specularmap,rn.envmap,rn.aomap,rn.lightmap,rn.fog]),vertexShader:nn.meshbasic_vert,fragmentShader:nn.meshbasic_frag},lambert:{uniforms:je([rn.common,rn.specularmap,rn.envmap,rn.aomap,rn.lightmap,rn.emissivemap,rn.fog,rn.lights,{emissive:{value:new Ht(0)}}]),vertexShader:nn.meshlambert_vert,fragmentShader:nn.meshlambert_frag},phong:{uniforms:je([rn.common,rn.specularmap,rn.envmap,rn.aomap,rn.lightmap,rn.emissivemap,rn.bumpmap,rn.normalmap,rn.displacementmap,rn.fog,rn.lights,{emissive:{value:new Ht(0)},specular:{value:new Ht(1118481)},shininess:{value:30}}]),vertexShader:nn.meshphong_vert,fragmentShader:nn.meshphong_frag},standard:{uniforms:je([rn.common,rn.envmap,rn.aomap,rn.lightmap,rn.emissivemap,rn.bumpmap,rn.normalmap,rn.displacementmap,rn.roughnessmap,rn.metalnessmap,rn.fog,rn.lights,{emissive:{value:new Ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag},toon:{uniforms:je([rn.common,rn.aomap,rn.lightmap,rn.emissivemap,rn.bumpmap,rn.normalmap,rn.displacementmap,rn.gradientmap,rn.fog,rn.lights,{emissive:{value:new Ht(0)}}]),vertexShader:nn.meshtoon_vert,fragmentShader:nn.meshtoon_frag},matcap:{uniforms:je([rn.common,rn.bumpmap,rn.normalmap,rn.displacementmap,rn.fog,{matcap:{value:null}}]),vertexShader:nn.meshmatcap_vert,fragmentShader:nn.meshmatcap_frag},points:{uniforms:je([rn.points,rn.fog]),vertexShader:nn.points_vert,fragmentShader:nn.points_frag},dashed:{uniforms:je([rn.common,rn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nn.linedashed_vert,fragmentShader:nn.linedashed_frag},depth:{uniforms:je([rn.common,rn.displacementmap]),vertexShader:nn.depth_vert,fragmentShader:nn.depth_frag},normal:{uniforms:je([rn.common,rn.bumpmap,rn.normalmap,rn.displacementmap,{opacity:{value:1}}]),vertexShader:nn.normal_vert,fragmentShader:nn.normal_frag},sprite:{uniforms:je([rn.sprite,rn.fog]),vertexShader:nn.sprite_vert,fragmentShader:nn.sprite_frag},background:{uniforms:{uvTransform:{value:new p},t2D:{value:null}},vertexShader:nn.background_vert,fragmentShader:nn.background_frag},cube:{uniforms:je([rn.envmap,{opacity:{value:1}}]),vertexShader:nn.cube_vert,fragmentShader:nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nn.equirect_vert,fragmentShader:nn.equirect_frag},distanceRGBA:{uniforms:je([rn.common,rn.displacementmap,{referencePosition:{value:new A},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nn.distanceRGBA_vert,fragmentShader:nn.distanceRGBA_frag},shadow:{uniforms:je([rn.lights,rn.fog,{color:{value:new Ht(0)},opacity:{value:1}}]),vertexShader:nn.shadow_vert,fragmentShader:nn.shadow_frag}};function sn(t,e,n,i,r){var o,s,a=new Ht(0),l=0,c=null,u=0,h=null;function d(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,r)}return{getClearColor:function(){return a},setClearColor:function(t,e){void 0===e&&(e=1),a.set(t),d(a,l=e)},getClearAlpha:function(){return l},setClearAlpha:function(t){d(a,l=t)},render:function(n,r,p,f){var m=!0===r.isScene?r.background:null;m&&m.isTexture&&(m=e.get(m));var g=t.xr,v=g.getSession&&g.getSession();v&&"additive"===v.environmentBlendMode&&(m=null),null===m?d(a,l):m&&m.isColor&&(d(m,1),f=!0),(t.autoClear||f)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),m&&(m.isCubeTexture||m.isWebGLCubeRenderTarget||306===m.mapping)?(void 0===s&&((s=new Fe(new Ue(1,1,1),new He({name:"BackgroundCubeMaterial",uniforms:Ve(on.cube.uniforms),vertexShader:on.cube.vertexShader,fragmentShader:on.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(s)),m.isWebGLCubeRenderTarget&&(m=m.texture),s.material.uniforms.envMap.value=m,s.material.uniforms.flipEnvMap.value=m.isCubeTexture&&m._needsFlipEnvMap?-1:1,c===m&&u===m.version&&h===t.toneMapping||(s.material.needsUpdate=!0,c=m,u=m.version,h=t.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):m&&m.isTexture&&(void 0===o&&((o=new Fe(new en(2,2),new He({name:"BackgroundMaterial",uniforms:Ve(on.background.uniforms),vertexShader:on.background.vertexShader,fragmentShader:on.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(o)),o.material.uniforms.t2D.value=m,!0===m.matrixAutoUpdate&&m.updateMatrix(),o.material.uniforms.uvTransform.value.copy(m.matrix),c===m&&u===m.version&&h===t.toneMapping||(o.material.needsUpdate=!0,c=m,u=m.version,h=t.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}}}function an(t,e,n,i){var r=t.getParameter(34921),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),s=i.isWebGL2||null!==o,a={},l=d(null),c=l;function u(e){return i.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function h(e){return i.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function d(t){for(var e=[],n=[],i=[],o=0;o<r;o++)e[o]=0,n[o]=0,i[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function p(){for(var t=c.newAttributes,e=0,n=t.length;e<n;e++)t[e]=0}function f(t){m(t,0)}function m(n,r){var o=c.enabledAttributes,s=c.attributeDivisors;c.newAttributes[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),s[n]!==r&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r)}function g(){for(var e=c.newAttributes,n=c.enabledAttributes,i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function v(e,n,r,o,s,a){!0!==i.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,n,r,o,s,a):t.vertexAttribIPointer(e,n,r,s,a)}function y(){b(),c!==l&&u((c=l).object)}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,h,y,b){var _=!1;if(s){var w=function(e,n,r){var s=!0===r.wireframe,l=a[e.id];void 0===l&&(a[e.id]=l={});var c=l[n.id];void 0===c&&(l[n.id]=c={});var u=c[s];return void 0===u&&(u=d(i.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),c[s]=u),u}(y,h,l);c!==w&&u((c=w).object),(_=function(t,e){var n=c.attributes,i=t.attributes,r=0;for(var o in i){var s=n[o],a=i[o];if(void 0===s)return!0;if(s.attribute!==a)return!0;if(s.data!==a.data)return!0;r++}return c.attributesNum!==r||c.index!==e}(y,b))&&function(t,e){var n={},i=t.attributes,r=0;for(var o in i){var s=i[o],a={};a.attribute=s,s.data&&(a.data=s.data),n[o]=a,r++}c.attributes=n,c.attributesNum=r,c.index=e}(y,b)}else{var A=!0===l.wireframe;c.geometry===y.id&&c.program===h.id&&c.wireframe===A||(c.geometry=y.id,c.program=h.id,c.wireframe=A,_=!0)}!0===r.isInstancedMesh&&(_=!0),null!==b&&n.update(b,34963),_&&(function(r,o,s,a){if(!1!==i.isWebGL2||!r.isInstancedMesh&&!a.isInstancedBufferGeometry||null!==e.get("ANGLE_instanced_arrays")){p();var l=a.attributes,c=s.getAttributes(),u=o.defaultAttributeValues;for(var h in c){var d=c[h];if(d>=0){var y=l[h];if(void 0!==y){var b=y.normalized,_=y.itemSize,w=n.get(y);if(void 0===w)continue;var A=w.buffer,x=w.type,C=w.bytesPerElement;if(y.isInterleavedBufferAttribute){var E=y.data,S=E.stride,M=y.offset;E&&E.isInstancedInterleavedBuffer?(m(d,E.meshPerAttribute),void 0===a._maxInstanceCount&&(a._maxInstanceCount=E.meshPerAttribute*E.count)):f(d),t.bindBuffer(34962,A),v(d,_,x,b,S*C,M*C)}else y.isInstancedBufferAttribute?(m(d,y.meshPerAttribute),void 0===a._maxInstanceCount&&(a._maxInstanceCount=y.meshPerAttribute*y.count)):f(d),t.bindBuffer(34962,A),v(d,_,x,b,0,0)}else if("instanceMatrix"===h){var T=n.get(r.instanceMatrix);if(void 0===T)continue;var P=T.buffer,k=T.type;m(d+0,1),m(d+1,1),m(d+2,1),m(d+3,1),t.bindBuffer(34962,P),t.vertexAttribPointer(d+0,4,k,!1,64,0),t.vertexAttribPointer(d+1,4,k,!1,64,16),t.vertexAttribPointer(d+2,4,k,!1,64,32),t.vertexAttribPointer(d+3,4,k,!1,64,48)}else if("instanceColor"===h){var D=n.get(r.instanceColor);if(void 0===D)continue;var O=D.buffer,R=D.type;m(d,1),t.bindBuffer(34962,O),t.vertexAttribPointer(d,3,R,!1,12,0)}else if(void 0!==u){var I=u[h];if(void 0!==I)switch(I.length){case 2:t.vertexAttrib2fv(d,I);break;case 3:t.vertexAttrib3fv(d,I);break;case 4:t.vertexAttrib4fv(d,I);break;default:t.vertexAttrib1fv(d,I)}}}}g()}}(r,l,h,y),null!==b&&t.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){for(var t in y(),a){var e=a[t];for(var n in e){var i=e[n];for(var r in i)h(i[r].object),delete i[r];delete e[n]}delete a[t]}},releaseStatesOfGeometry:function(t){if(void 0!==a[t.id]){var e=a[t.id];for(var n in e){var i=e[n];for(var r in i)h(i[r].object),delete i[r];delete e[n]}delete a[t.id]}},releaseStatesOfProgram:function(t){for(var e in a){var n=a[e];if(void 0!==n[t.id]){var i=n[t.id];for(var r in i)h(i[r].object),delete i[r];delete n[t.id]}}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:g}}function ln(t,e,n,i){var r,o=i.isWebGL2;this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.update(i,r,1)},this.renderInstances=function(i,s,a){if(0!==a){var l,c;if(o)l=t,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](r,i,s,a),n.update(s,r,a)}}}function cn(t,e,n){var i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,s=void 0!==n.precision?n.precision:"highp",a=r(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);var l=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),u=t.getParameter(35660),h=t.getParameter(3379),d=t.getParameter(34076),p=t.getParameter(34921),f=t.getParameter(36347),m=t.getParameter(36348),g=t.getParameter(36349),v=u>0,y=o||!!e.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==i)return i;var n=e.get("EXT_texture_filter_anisotropic");return i=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:o?t.getParameter(36183):0}}function un(t){var e=this,n=null,i=0,r=!1,o=!1,s=new Et,a=new p,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(t,n,i,r){var o=null!==t?t.length:0,c=null;if(0!==o){if(c=l.value,!0!==r||null===c){var u=i+4*o,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===c||c.length<u)&&(c=new Float32Array(u));for(var d=0,p=i;d!==o;++d,p+=4)s.copy(t[d]).applyMatrix4(h,a),s.normal.toArray(c,p),c[p+3]=s.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,o){var s=0!==t.length||e||0!==i||r;return r=e,n=u(t,o,0),i=t.length,s},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(e,s,a){var h=e.clippingPlanes,d=e.clipIntersection,p=e.clipShadows,f=t.get(e);if(!r||null===h||0===h.length||o&&!p)o?u(null):c();else{var m=o?0:i,g=4*m,v=f.clippingState||null;l.value=v,v=u(h,s,g,a);for(var y=0;y!==g;++y)v[y]=n[y];f.clippingState=v,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=m}}}function hn(t){var e=new WeakMap;function n(t,e){return 303===e?t.mapping=301:304===e&&(t.mapping=302),t}function i(t){var n=t.target;n.removeEventListener("dispose",i);var r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){var o=r.mapping;if(303===o||304===o){if(e.has(r))return n(e.get(r).texture,r.mapping);var s=r.image;if(s&&s.height>0){var a=t.getRenderList(),l=t.getRenderTarget(),c=t.getRenderState(),u=new Ye(s.height/2);return u.fromEquirectangularTexture(t,r),e.set(r,u),t.setRenderTarget(l),t.setRenderList(a),t.setRenderState(c),r.addEventListener("dispose",i),n(u.texture,r.mapping)}return null}}return r},dispose:function(){e=new WeakMap}}}function dn(t){var e={};return{has:function(n){if(void 0!==e[n])return null!==e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,null!==i},get:function(t){return this.has(t)||console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e[t]}}}function pn(t,e,n,i){var r=new WeakMap,o=new WeakMap;function s(t){var a=t.target,l=r.get(a);for(var c in null!==l.index&&e.remove(l.index),l.attributes)e.remove(l.attributes[c]);a.removeEventListener("dispose",s),r.delete(a);var u=o.get(l);u&&(e.remove(u),o.delete(l)),i.releaseStatesOfGeometry(l),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(t){var n=[],i=t.index,r=t.attributes.position,s=0;if(null!==i){var a=i.array;s=i.version;for(var l=0,c=a.length;l<c;l+=3){var u=a[l+0],h=a[l+1],d=a[l+2];n.push(u,h,h,d,d,u)}}else{s=r.version;for(var p=0,f=r.array.length/3-1;p<f;p+=3){var m=p+0,g=p+1,v=p+2;n.push(m,g,g,v,v,m)}}var y=new(le(n)>65535?ie:ee)(n,1);y.version=s;var b=o.get(t);b&&e.remove(b),o.set(t,y)}return{get:function(t,e){var i=r.get(e);return i||(e.addEventListener("dispose",s),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new ye).setFromObject(t)),i=e._bufferGeometry),r.set(e,i),n.memory.geometries++,i)},update:function(t){var n=t.attributes;for(var i in n)e.update(n[i],34962);var r=t.morphAttributes;for(var o in r)for(var s=r[o],a=0,l=s.length;a<l;a++)e.update(s[a],34962)},getWireframeAttribute:function(t){var e=o.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&a(t)}else a(t);return o.get(t)}}}function fn(t,e,n,i){var r,o,s,a=i.isWebGL2;this.setMode=function(t){r=t},this.setIndex=function(t){o=t.type,s=t.bytesPerElement},this.render=function(e,i){t.drawElements(r,i,o,e*s),n.update(i,r,1)},this.renderInstances=function(i,l,c){if(0!==c){var u,h;if(a)u=t,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(u=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](r,l,o,i*s,c),n.update(l,r,c)}}}function mn(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function gn(t,e){return t[0]-e[0]}function vn(t,e){return Math.abs(e[1])-Math.abs(t[1])}function yn(t){for(var e={},n=new Float32Array(8),i=[],r=0;r<8;r++)i[r]=[r,0];return{update:function(r,o,s,a){var l=r.morphTargetInfluences,c=void 0===l?0:l.length,u=e[o.id];if(void 0===u){u=[];for(var h=0;h<c;h++)u[h]=[h,0];e[o.id]=u}for(var d=0;d<c;d++){var p=u[d];p[0]=d,p[1]=l[d]}u.sort(vn);for(var f=0;f<8;f++)f<c&&u[f][1]?(i[f][0]=u[f][0],i[f][1]=u[f][1]):(i[f][0]=Number.MAX_SAFE_INTEGER,i[f][1]=0);i.sort(gn);for(var m=s.morphTargets&&o.morphAttributes.position,g=s.morphNormals&&o.morphAttributes.normal,v=0,y=0;y<8;y++){var b=i[y],_=b[0],w=b[1];_!==Number.MAX_SAFE_INTEGER&&w?(m&&o.getAttribute("morphTarget"+y)!==m[_]&&o.setAttribute("morphTarget"+y,m[_]),g&&o.getAttribute("morphNormal"+y)!==g[_]&&o.setAttribute("morphNormal"+y,g[_]),n[y]=w,v+=w):(m&&!0===o.hasAttribute("morphTarget"+y)&&o.deleteAttribute("morphTarget"+y),g&&!0===o.hasAttribute("morphNormal"+y)&&o.deleteAttribute("morphNormal"+y),n[y]=0)}var A=o.morphTargetsRelative?1:1-v;a.getUniforms().setValue(t,"morphTargetBaseInfluence",A),a.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function bn(t,e,n,i){var r=new WeakMap;return{update:function(t){var o=i.render.frame,s=t.geometry,a=e.get(t,s);return r.get(a)!==o&&(s.isGeometry&&a.updateFromObject(t),e.update(a),r.set(a,o)),t.isInstancedMesh&&(n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),a},dispose:function(){r=new WeakMap}}}function _n(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),g.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function wn(t,e,n,i){void 0===t&&(t=null),void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),g.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}on.physical={uniforms:je([on.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new d(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Ht(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag},(_n.prototype=Object.create(g.prototype)).constructor=_n,_n.prototype.isDataTexture2DArray=!0,(wn.prototype=Object.create(g.prototype)).constructor=wn,wn.prototype.isDataTexture3D=!0;var An=new g,xn=new _n,Cn=new wn,En=new $e,Sn=[],Mn=[],Tn=new Float32Array(16),Pn=new Float32Array(9),kn=new Float32Array(4);function Dn(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,o=Sn[r];if(void 0===o&&(o=new Float32Array(r),Sn[r]=o),0!==e){i.toArray(o,0);for(var s=1,a=0;s!==e;++s)t[s].toArray(o,a+=n)}return o}function On(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Rn(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function In(t,e){var n=Mn[e];void 0===n&&(n=new Int32Array(e),Mn[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Ln(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Fn(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(On(n,e))return;t.uniform2fv(this.addr,e),Rn(n,e)}}function Nn(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(On(n,e))return;t.uniform3fv(this.addr,e),Rn(n,e)}}function Bn(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(On(n,e))return;t.uniform4fv(this.addr,e),Rn(n,e)}}function Un(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(On(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Rn(n,e)}else{if(On(n,i))return;kn.set(i),t.uniformMatrix2fv(this.addr,!1,kn),Rn(n,i)}}function Vn(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(On(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Rn(n,e)}else{if(On(n,i))return;Pn.set(i),t.uniformMatrix3fv(this.addr,!1,Pn),Rn(n,i)}}function jn(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(On(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Rn(n,e)}else{if(On(n,i))return;Tn.set(i),t.uniformMatrix4fv(this.addr,!1,Tn),Rn(n,i)}}function zn(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||An,r)}function Hn(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||xn,r)}function Gn(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Cn,r)}function Wn(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||En,r)}function qn(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function $n(t,e){var n=this.cache;On(n,e)||(t.uniform2iv(this.addr,e),Rn(n,e))}function Yn(t,e){var n=this.cache;On(n,e)||(t.uniform3iv(this.addr,e),Rn(n,e))}function Qn(t,e){var n=this.cache;On(n,e)||(t.uniform4iv(this.addr,e),Rn(n,e))}function Xn(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Kn(t,e){t.uniform1fv(this.addr,e)}function Zn(t,e){t.uniform1iv(this.addr,e)}function Jn(t,e){t.uniform2iv(this.addr,e)}function ti(t,e){t.uniform3iv(this.addr,e)}function ei(t,e){t.uniform4iv(this.addr,e)}function ni(t,e){var n=Dn(e,this.size,2);t.uniform2fv(this.addr,n)}function ii(t,e){var n=Dn(e,this.size,3);t.uniform3fv(this.addr,n)}function ri(t,e){var n=Dn(e,this.size,4);t.uniform4fv(this.addr,n)}function oi(t,e){var n=Dn(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function si(t,e){var n=Dn(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function ai(t,e){var n=Dn(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function li(t,e,n){var i=e.length,r=In(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.safeSetTexture2D(e[o]||An,r[o])}function ci(t,e,n){var i=e.length,r=In(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.safeSetTextureCube(e[o]||En,r[o])}function ui(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Ln;case 35664:return Fn;case 35665:return Nn;case 35666:return Bn;case 35674:return Un;case 35675:return Vn;case 35676:return jn;case 5124:case 35670:return qn;case 35667:case 35671:return $n;case 35668:case 35672:return Yn;case 35669:case 35673:return Qn;case 5125:return Xn;case 35678:case 36198:case 36298:case 36306:case 35682:return zn;case 35679:case 36299:case 36307:return Gn;case 35680:case 36300:case 36308:case 36293:return Wn;case 36289:case 36303:case 36311:case 36292:return Hn}}(e.type)}function hi(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Kn;case 35664:return ni;case 35665:return ii;case 35666:return ri;case 35674:return oi;case 35675:return si;case 35676:return ai;case 5124:case 35670:return Zn;case 35667:case 35671:return Jn;case 35668:case 35672:return ti;case 35669:case 35673:return ei;case 35678:case 36198:case 36298:case 36306:case 35682:return li;case 35680:case 36300:case 36308:case 36293:return ci}}(e.type)}function di(t){this.id=t,this.seq=[],this.map={}}hi.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Rn(e,t)},di.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,o=i.length;r!==o;++r){var s=i[r];s.setValue(t,e[s.id],n)}};var pi=/([\w\d_]+)(\])?(\[|\.)?/g;function fi(t,e){t.seq.push(e),t.map[e.id]=e}function mi(t,e,n){var i=t.name,r=i.length;for(pi.lastIndex=0;;){var o=pi.exec(i),s=o[1],a=o[3];if("]"===o[2]&&(s|=0),void 0===a||"["===a&&pi.lastIndex+2===r){fi(n,void 0===a?new ui(s,t,e):new hi(s,t,e));break}var l=n.map[s];void 0===l&&fi(n,l=new di(s)),n=l}}function gi(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),i=0;i<n;++i){var r=t.getActiveUniform(e,i);mi(r,t.getUniformLocation(e,r.name),this)}}function vi(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}gi.prototype.setValue=function(t,e,n,i){var r=this.map[e];void 0!==r&&r.setValue(t,n,i)},gi.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},gi.upload=function(t,e,n,i){for(var r=0,o=e.length;r!==o;++r){var s=e[r],a=n[s.id];!1!==a.needsUpdate&&s.setValue(t,a.value,i)}},gi.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var o=t[i];o.id in e&&n.push(o)}return n};var yi=0;function bi(t){switch(t){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function _i(t,e,n){var i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();return i&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(t.getShaderSource(e))}function wi(t,e){var n=bi(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ai(t,e){var n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function xi(t){return""!==t}function Ci(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Ei(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var Si=/^[ \t]*#include +<([\w\d./]+)>/gm;function Mi(t){return t.replace(Si,Ti)}function Ti(t,e){var n=nn[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Mi(n)}var Pi=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ki=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Di(t){return t.replace(ki,Ri).replace(Pi,Oi)}function Oi(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Ri(0,e,n,i)}function Ri(t,e,n,i){for(var r="",o=parseInt(e);o<parseInt(n);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function Ii(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Li(t,e,n,i){var r,o,s,a,l=t.getContext(),c=n.defines,u=n.vertexShader,h=n.fragmentShader,d=function(t){var e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(n),p=function(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),f=function(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(n),m=function(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(n),g=t.gammaFactor>0?t.gammaFactor:1,v=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(xi).join("\n")}(n),y=function(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(c),b=l.createProgram(),_=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((r=[y].filter(xi).join("\n")).length>0&&(r+="\n"),(o=[v,y].filter(xi).join("\n")).length>0&&(o+="\n")):(r=[Ii(n),"#define SHADER_NAME "+n.shaderName,y,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+g,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(xi).join("\n"),o=[v,Ii(n),"#define SHADER_NAME "+n.shaderName,y,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.envMap?"#define "+f:"",n.envMap?"#define "+m:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?nn.tonemapping_pars_fragment:"",0!==n.toneMapping?Ai("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",nn.encodings_pars_fragment,n.map?wi("mapTexelToLinear",n.mapEncoding):"",n.matcap?wi("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?wi("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?wi("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?wi("lightMapTexelToLinear",n.lightMapEncoding):"",(s=n.outputEncoding,a=bi(s),"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(xi).join("\n")),u=Ei(u=Ci(u=Mi(u),n),n),h=Ei(h=Ci(h=Mi(h),n),n),u=Di(u),h=Di(h),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(_="#version 300 es\n",r=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,o=["#define varying in","300 es"===n.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+o);var w,A,x=_+o+h,C=vi(l,35633,_+r+u),E=vi(l,35632,x);if(l.attachShader(b,C),l.attachShader(b,E),void 0!==n.index0AttributeName?l.bindAttribLocation(b,0,n.index0AttributeName):!0===n.morphTargets&&l.bindAttribLocation(b,0,"position"),l.linkProgram(b),t.debug.checkShaderErrors){var S=l.getProgramInfoLog(b).trim(),M=l.getShaderInfoLog(C).trim(),T=l.getShaderInfoLog(E).trim(),P=!0,k=!0;if(!1===l.getProgramParameter(b,35714)){P=!1;var D=_i(l,C,"vertex"),O=_i(l,E,"fragment");console.error("THREE.WebGLProgram: shader error: ",l.getError(),"35715",l.getProgramParameter(b,35715),"gl.getProgramInfoLog",S,D,O)}else""!==S?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",S):""!==M&&""!==T||(k=!1);k&&(this.diagnostics={runnable:P,programLog:S,vertexShader:{log:M,prefix:r},fragmentShader:{log:T,prefix:o}})}return l.deleteShader(C),l.deleteShader(E),this.getUniforms=function(){return void 0===w&&(w=new gi(l,b)),w},this.getAttributes=function(){return void 0===A&&(A=function(t,e){for(var n={},i=t.getProgramParameter(e,35721),r=0;r<i;r++){var o=t.getActiveAttrib(e,r).name;n[o]=t.getAttribLocation(e,o)}return n}(l,b)),A},this.destroy=function(){i.releaseStatesOfProgram(this),l.deleteProgram(b),this.program=void 0},this.name=n.shaderName,this.id=yi++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=C,this.fragmentShader=E,this}function Fi(t,e,n,i,r,o){var s=[],a=i.isWebGL2,l=i.logarithmicDepthBuffer,c=i.floatVertexTextures,u=i.maxVertexUniforms,h=i.vertexTextures,d=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function m(t){var e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=3e3,e}return{getParameters:function(r,s,f,g,v){var y,b,_=g.fog,w=e.get(r.envMap||(r.isMeshStandardMaterial?g.environment:null)),A=p[r.type],x=v.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(c)return 1024;var n=Math.floor((u-20)/4),i=Math.min(n,e.length);return i<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+i+"."),0):i}(v):0;if(null!==r.precision&&(d=i.getMaxPrecision(r.precision))!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",d,"instead."),A){var C=on[A];y=C.vertexShader,b=C.fragmentShader}else y=r.vertexShader,b=r.fragmentShader;var E=t.getRenderTarget();return{isWebGL2:a,shaderID:A,shaderName:r.type,vertexShader:y,fragmentShader:b,defines:r.defines,isRawShaderMaterial:!0===r.isRawShaderMaterial,glslVersion:r.glslVersion,precision:d,instancing:!0===v.isInstancedMesh,instancingColor:!0===v.isInstancedMesh&&null!==v.instanceColor,supportsVertexTextures:h,outputEncoding:null!==E?m(E.texture):t.outputEncoding,map:!!r.map,mapEncoding:m(r.map),matcap:!!r.matcap,matcapEncoding:m(r.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:m(w),envMapCubeUV:!!w&&(306===w.mapping||307===w.mapping),lightMap:!!r.lightMap,lightMapEncoding:m(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:m(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:1===r.normalMapType,tangentSpaceNormalMap:0===r.normalMapType,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,transmissionMap:!!r.transmissionMap,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatMap||r.clearcoatRoughnessMap||r.clearcoatNormalMap||r.displacementMap||r.transmissionMap),uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||r.transmissionMap||!r.displacementMap),fog:!!_,useFog:r.fog,fogExp2:_&&_.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:l,skinning:r.skinning&&x>0,maxBones:x,useVertexTexture:c,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&f.length>0,shadowMapType:t.shadowMap.type,toneMapping:r.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:2===r.side,flipSided:1===r.side,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:a||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||n.has("EXT_shader_texture_lod"),customProgramCacheKey:r.customProgramCacheKey()}},getProgramCacheKey:function(e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)n.push(i),n.push(e.defines[i]);if(!1===e.isRawShaderMaterial){for(var r=0;r<f.length;r++)n.push(e[f[r]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){var e=p[t.type];return e?ze.clone(on[e].uniforms):t.uniforms},acquireProgram:function(e,n){for(var i,o=0,a=s.length;o<a;o++){var l=s[o];if(l.cacheKey===n){++(i=l).usedTimes;break}}return void 0===i&&(i=new Li(t,n,e,r),s.push(i)),i},releaseProgram:function(t){if(0==--t.usedTimes){var e=s.indexOf(t);s[e]=s[s.length-1],s.pop(),t.destroy()}},programs:s}}function Ni(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&t.set(e,n={}),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function Bi(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Ui(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Vi(t){var e=[],n=0,i=[],r=[],o={id:-1};function s(i,r,s,a,l,c){var u=e[n],h=t.get(s);return void 0===u?e[n]=u={id:i.id,object:i,geometry:r,material:s,program:h.program||o,groupOrder:a,renderOrder:i.renderOrder,z:l,group:c}:(u.id=i.id,u.object=i,u.geometry=r,u.material=s,u.program=h.program||o,u.groupOrder=a,u.renderOrder=i.renderOrder,u.z=l,u.group=c),n++,u}return{opaque:i,transparent:r,init:function(){n=0,i.length=0,r.length=0},push:function(t,e,n,o,a,l){var c=s(t,e,n,o,a,l);(!0===n.transparent?r:i).push(c)},unshift:function(t,e,n,o,a,l){var c=s(t,e,n,o,a,l);(!0===n.transparent?r:i).unshift(c)},finish:function(){for(var t=n,i=e.length;t<i;t++){var r=e[t];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.program=null,r.group=null}},sort:function(t,e){i.length>1&&i.sort(t||Bi),r.length>1&&r.sort(e||Ui)}}}function ji(t){var e=new WeakMap;return{get:function(n,i){var r,o=e.get(n);return void 0===o?(r=new Vi(t),e.set(n,new WeakMap),e.get(n).set(i,r)):void 0===(r=o.get(i))&&(r=new Vi(t),o.set(i,r)),r},dispose:function(){e=new WeakMap}}}function zi(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new A,color:new Ht};break;case"SpotLight":n={position:new A,direction:new A,color:new Ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new A,color:new Ht,distance:0,decay:0};break;case"HemisphereLight":n={direction:new A,skyColor:new Ht,groundColor:new Ht};break;case"RectAreaLight":n={color:new Ht,position:new A,halfWidth:new A,halfHeight:new A}}return t[e.id]=n,n}}}var Hi=0;function Gi(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Wi(t,e){for(var n,i=new zi,r=(n={},{get:function(t){if(void 0!==n[t.id])return n[t.id];var e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new d};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new d,shadowCameraNear:1,shadowCameraFar:1e3}}return n[t.id]=e,e}}),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},s=0;s<9;s++)o.probe.push(new A);var a=new A,l=new X,c=new X;return{setup:function(n,s,u){for(var h=0,d=0,p=0,f=0;f<9;f++)o.probe[f].set(0,0,0);var m=0,g=0,v=0,y=0,b=0,_=0,w=0,A=0,x=u.matrixWorldInverse;n.sort(Gi);for(var C=0,E=n.length;C<E;C++){var S=n[C],M=S.color,T=S.intensity,P=S.distance,k=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)h+=M.r*T,d+=M.g*T,p+=M.b*T;else if(S.isLightProbe)for(var D=0;D<9;D++)o.probe[D].addScaledVector(S.sh.coefficients[D],T);else if(S.isDirectionalLight){var O=i.get(S);if(O.color.copy(S.color).multiplyScalar(S.intensity),O.direction.setFromMatrixPosition(S.matrixWorld),a.setFromMatrixPosition(S.target.matrixWorld),O.direction.sub(a),O.direction.transformDirection(x),S.castShadow){var R=S.shadow,I=r.get(S);I.shadowBias=R.bias,I.shadowNormalBias=R.normalBias,I.shadowRadius=R.radius,I.shadowMapSize=R.mapSize,o.directionalShadow[m]=I,o.directionalShadowMap[m]=k,o.directionalShadowMatrix[m]=S.shadow.matrix,_++}o.directional[m]=O,m++}else if(S.isSpotLight){var L=i.get(S);if(L.position.setFromMatrixPosition(S.matrixWorld),L.position.applyMatrix4(x),L.color.copy(M).multiplyScalar(T),L.distance=P,L.direction.setFromMatrixPosition(S.matrixWorld),a.setFromMatrixPosition(S.target.matrixWorld),L.direction.sub(a),L.direction.transformDirection(x),L.coneCos=Math.cos(S.angle),L.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),L.decay=S.decay,S.castShadow){var F=S.shadow,N=r.get(S);N.shadowBias=F.bias,N.shadowNormalBias=F.normalBias,N.shadowRadius=F.radius,N.shadowMapSize=F.mapSize,o.spotShadow[v]=N,o.spotShadowMap[v]=k,o.spotShadowMatrix[v]=S.shadow.matrix,A++}o.spot[v]=L,v++}else if(S.isRectAreaLight){var B=i.get(S);B.color.copy(M).multiplyScalar(T),B.position.setFromMatrixPosition(S.matrixWorld),B.position.applyMatrix4(x),c.identity(),l.copy(S.matrixWorld),l.premultiply(x),c.extractRotation(l),B.halfWidth.set(.5*S.width,0,0),B.halfHeight.set(0,.5*S.height,0),B.halfWidth.applyMatrix4(c),B.halfHeight.applyMatrix4(c),o.rectArea[y]=B,y++}else if(S.isPointLight){var U=i.get(S);if(U.position.setFromMatrixPosition(S.matrixWorld),U.position.applyMatrix4(x),U.color.copy(S.color).multiplyScalar(S.intensity),U.distance=S.distance,U.decay=S.decay,S.castShadow){var V=S.shadow,j=r.get(S);j.shadowBias=V.bias,j.shadowNormalBias=V.normalBias,j.shadowRadius=V.radius,j.shadowMapSize=V.mapSize,j.shadowCameraNear=V.camera.near,j.shadowCameraFar=V.camera.far,o.pointShadow[g]=j,o.pointShadowMap[g]=k,o.pointShadowMatrix[g]=S.shadow.matrix,w++}o.point[g]=U,g++}else if(S.isHemisphereLight){var z=i.get(S);z.direction.setFromMatrixPosition(S.matrixWorld),z.direction.transformDirection(x),z.direction.normalize(),z.skyColor.copy(S.color).multiplyScalar(T),z.groundColor.copy(S.groundColor).multiplyScalar(T),o.hemi[b]=z,b++}}y>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(o.rectAreaLTC1=rn.LTC_FLOAT_1,o.rectAreaLTC2=rn.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(o.rectAreaLTC1=rn.LTC_HALF_1,o.rectAreaLTC2=rn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=h,o.ambient[1]=d,o.ambient[2]=p;var H=o.hash;H.directionalLength===m&&H.pointLength===g&&H.spotLength===v&&H.rectAreaLength===y&&H.hemiLength===b&&H.numDirectionalShadows===_&&H.numPointShadows===w&&H.numSpotShadows===A||(o.directional.length=m,o.spot.length=v,o.rectArea.length=y,o.point.length=g,o.hemi.length=b,o.directionalShadow.length=_,o.directionalShadowMap.length=_,o.pointShadow.length=w,o.pointShadowMap.length=w,o.spotShadow.length=A,o.spotShadowMap.length=A,o.directionalShadowMatrix.length=_,o.pointShadowMatrix.length=w,o.spotShadowMatrix.length=A,H.directionalLength=m,H.pointLength=g,H.spotLength=v,H.rectAreaLength=y,H.hemiLength=b,H.numDirectionalShadows=_,H.numPointShadows=w,H.numSpotShadows=A,o.version=Hi++)},state:o}}function qi(t,e){var n=new Wi(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,r,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function $i(t,e){var n=new WeakMap;return{get:function(i,r){var o;return!1===n.has(i)?(o=new qi(t,e),n.set(i,new WeakMap),n.get(i).set(r,o)):!1===n.get(i).has(r)?(o=new qi(t,e),n.get(i).set(r,o)):o=n.get(i).get(r),o},dispose:function(){n=new WeakMap}}}function Yi(t){qt.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Qi(t){qt.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new A,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}function Xi(t,e,n){var i=new Ze,r=new d,o=new d,s=new y,a=[],l=[],c={},u={0:1,1:0,2:2},h=new He({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new d},radius:{value:4}},vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",fragmentShader:"\nuniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n\n#include <packing>\n\nvoid main() {\n\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\n\t// This seems totally useless but it's a crazy work around for a Adreno compiler bug\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\n\t\t#ifdef HORIZONAL_PASS\n\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\n\t\t#else\n\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\n\t\t#endif\n\n\t}\n\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n\n}\n"}),p=h.clone();p.defines.HORIZONAL_PASS=1;var f=new ye;f.setAttribute("position",new Xt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var m=new Fe(f,h),g=this;function v(n,i){var r=e.update(m);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,h,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,p,m,null)}function _(t,e,n){var i=t<<0|e<<1|n<<2,r=a[i];return void 0===r&&(r=new Yi({depthPacking:3201,morphTargets:t,skinning:e}),a[i]=r),r}function w(t,e,n){var i=t<<0|e<<1|n<<2,r=l[i];return void 0===r&&(r=new Qi({morphTargets:t,skinning:e}),l[i]=r),r}function A(e,n,i,r,o,s,a){var l=null,h=_,d=e.customDepthMaterial;if(!0===r.isPointLight&&(h=w,d=e.customDistanceMaterial),void 0===d){var p=!1;!0===i.morphTargets&&(p=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);var f=!1;!0===e.isSkinnedMesh&&(!0===i.skinning?f=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e)),l=h(p,f,!0===e.isInstancedMesh)}else l=d;if(t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){var m=l.uuid,g=i.uuid,v=c[m];void 0===v&&(c[m]=v={});var y=v[g];void 0===y&&(y=l.clone(),v[g]=y),l=y}return l.visible=i.visible,l.wireframe=i.wireframe,l.side=3===a?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:u[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=o,l.farDistance=s),l}function x(n,r,o,s,a){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===a)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var l=e.update(n),c=n.material;if(Array.isArray(c))for(var u=l.groups,h=0,d=u.length;h<d;h++){var p=u[h],f=c[p.materialIndex];if(f&&f.visible){var m=A(n,l,f,s,o.near,o.far,a);t.renderBufferDirect(o,null,l,m,n,p)}}else if(c.visible){var g=A(n,l,c,s,o.near,o.far,a);t.renderBufferDirect(o,null,l,g,n,null)}}for(var v=n.children,y=0,b=v.length;y<b;y++)x(v[y],r,o,s,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,a,l){if(!1!==g.enabled&&(!1!==g.autoUpdate||!1!==g.needsUpdate)&&0!==e.length){var c=t.getRenderTarget(),u=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var p=0,f=e.length;p<f;p++){var m=e[p],y=m.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){r.copy(y.mapSize);var _=y.getFrameExtents();if(r.multiply(_),o.copy(y.mapSize),(r.x>n||r.y>n)&&(r.x>n&&(o.x=Math.floor(n/_.x),r.x=o.x*_.x,y.mapSize.x=o.x),r.y>n&&(o.y=Math.floor(n/_.y),r.y=o.y*_.y,y.mapSize.y=o.y)),null===y.map&&!y.isPointLightShadow&&3===this.type){var w={minFilter:1006,magFilter:1006,format:1023};y.map=new b(r.x,r.y,w),y.map.texture.name=m.name+".shadowMap",y.mapPass=new b(r.x,r.y,w),y.camera.updateProjectionMatrix()}null===y.map&&(y.map=new b(r.x,r.y,{minFilter:1003,magFilter:1003,format:1023}),y.map.texture.name=m.name+".shadowMap",y.camera.updateProjectionMatrix()),t.setRenderTarget(y.map),t.clear();for(var A=y.getViewportCount(),C=0;C<A;C++){var E=y.getViewport(C);s.set(o.x*E.x,o.y*E.y,o.x*E.z,o.y*E.w),d.viewport(s),y.updateMatrices(m,C),i=y.getFrustum(),x(a,l,y.camera,m,this.type)}y.isPointLightShadow||3!==this.type||v(y,l),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}g.needsUpdate=!1,t.setRenderTarget(c,u,h)}}}function Ki(t,e,n){var i,r,o=n.isWebGL2,s=new function(){var e=!1,n=new y,i=null,r=new y(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,o,s,a){!0===a&&(e*=s,i*=s,o*=s),n.set(e,i,o,s),!1===r.equals(n)&&(t.clearColor(e,i,o,s),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},a=new function(){var e=!1,n=null,i=null,r=null;return{setTest:function(t){t?F(2929):N(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},l=new function(){var e=!1,n=null,i=null,r=null,o=null,s=null,a=null,l=null,c=null;return{setTest:function(t){e||(t?F(2960):N(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,s){i===e&&r===n&&o===s||(t.stencilFunc(e,n,s),i=e,r=n,o=s)},setOp:function(e,n,i){s===e&&a===n&&l===i||(t.stencilOp(e,n,i),s=e,a=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,o=null,s=null,a=null,l=null,c=null}}},c={},u=null,h=null,d=null,p=null,f=null,m=null,g=null,v=null,b=null,_=!1,w=null,A=null,x=null,C=null,E=null,S=t.getParameter(35661),M=!1,T=0,P=t.getParameter(7938);-1!==P.indexOf("WebGL")?(T=parseFloat(/^WebGL\ ([0-9])/.exec(P)[1]),M=T>=1):-1!==P.indexOf("OpenGL ES")&&(T=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(P)[1]),M=T>=2);var k=null,D={},O=new y,R=new y;function I(e,n,i){var r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var s=0;s<i;s++)t.texImage2D(n+s,0,6408,1,1,0,6408,5121,r);return o}var L={};function F(e){!0!==c[e]&&(t.enable(e),c[e]=!0)}function N(e){!1!==c[e]&&(t.disable(e),c[e]=!1)}L[3553]=I(3553,3553,1),L[34067]=I(34067,34069,6),s.setClear(0,0,0,1),a.setClear(1),l.setClear(0),F(2929),a.setFunc(3),z(!1),H(1),F(2884),j(0);var B=((i={})[100]=32774,i[101]=32778,i[102]=32779,i);if(o)B[103]=32775,B[104]=32776;else{var U=e.get("EXT_blend_minmax");null!==U&&(B[103]=U.MIN_EXT,B[104]=U.MAX_EXT)}var V=((r={})[200]=0,r[201]=1,r[202]=768,r[204]=770,r[210]=776,r[208]=774,r[206]=772,r[203]=769,r[205]=771,r[209]=775,r[207]=773,r);function j(e,n,i,r,o,s,a,l){if(0!==e){if(h||(F(3042),h=!0),5===e)o=o||n,s=s||i,a=a||r,n===p&&o===g||(t.blendEquationSeparate(B[n],B[o]),p=n,g=o),i===f&&r===m&&s===v&&a===b||(t.blendFuncSeparate(V[i],V[r],V[s],V[a]),f=i,m=r,v=s,b=a),d=e,_=null;else if(e!==d||l!==_){if(100===p&&100===g||(t.blendEquation(32774),p=100,g=100),l)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}f=null,m=null,v=null,b=null,d=e,_=l}}else h&&(N(3042),h=!1)}function z(e){w!==e&&(t.frontFace(e?2304:2305),w=e)}function H(e){0!==e?(F(2884),e!==A&&t.cullFace(1===e?1029:2===e?1028:1032)):N(2884),A=e}function G(e,n,i){e?(F(32823),C===n&&E===i||(t.polygonOffset(n,i),C=n,E=i)):N(32823)}function W(e){void 0===e&&(e=33984+S-1),k!==e&&(t.activeTexture(e),k=e)}return{buffers:{color:s,depth:a,stencil:l},enable:F,disable:N,useProgram:function(e){return u!==e&&(t.useProgram(e),u=e,!0)},setBlending:j,setMaterial:function(t,e){2===t.side?N(2884):F(2884);var n=1===t.side;e&&(n=!n),z(n),1===t.blending&&!1===t.transparent?j(0):j(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),s.setMask(t.colorWrite);var i=t.stencilWrite;l.setTest(i),i&&(l.setMask(t.stencilWriteMask),l.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),l.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),G(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:z,setCullFace:H,setLineWidth:function(e){e!==x&&(M&&t.lineWidth(e),x=e)},setPolygonOffset:G,setScissorTest:function(t){t?F(3089):N(3089)},activeTexture:W,bindTexture:function(e,n){null===k&&W();var i=D[k];void 0===i&&(D[k]=i={type:void 0,texture:void 0}),i.type===e&&i.texture===n||(t.bindTexture(e,n||L[e]),i.type=e,i.texture=n)},unbindTexture:function(){var e=D[k];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===O.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),O.copy(e))},viewport:function(e){!1===R.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),R.copy(e))},reset:function(){c={},k=null,D={},u=null,h=null,d=null,p=null,f=null,m=null,g=null,v=null,b=null,_=!1,w=null,A=null,x=null,C=null,E=null,s.reset(),a.reset(),l.reset()}}}function Zi(t,e,n,i,r,o,a){var l,c,u,h=r.isWebGL2,d=r.maxTextures,p=r.maxCubemapSize,f=r.maxTextureSize,m=r.maxSamples,g=new WeakMap,v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(V){}function y(t,e){return v?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function b(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var o=e?s.floorPowerOfTwo:Math.floor,a=o(r*t.width),l=o(r*t.height);void 0===u&&(u=y(a,l));var c=n?y(a,l):u;return c.width=a,c.height=l,c.getContext("2d").drawImage(t,0,0,a,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+l+")."),c}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function _(t){return s.isPowerOfTwo(t.width)&&s.isPowerOfTwo(t.height)}function w(t,e){return t.generateMipmaps&&e&&1003!==t.minFilter&&1006!==t.minFilter}function A(e,n,r,o){t.generateMipmap(e),i.get(n).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function x(n,i,r){if(!1===h)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=i;return 6403===i&&(5126===r&&(o=33326),5131===r&&(o=33325),5121===r&&(o=33321)),6407===i&&(5126===r&&(o=34837),5131===r&&(o=34843),5121===r&&(o=32849)),6408===i&&(5126===r&&(o=34836),5131===r&&(o=34842),5121===r&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||e.get("EXT_color_buffer_float"),o}function C(t){return 1003===t||1004===t||1005===t?9728:9729}function E(e){var n=e.target;n.removeEventListener("dispose",E),function(e){var n=i.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),i.remove(e))}(n),n.isVideoTexture&&g.delete(n),a.memory.textures--}function S(e){var n=e.target;n.removeEventListener("dispose",S),function(e){var n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(var o=0;o<6;o++)t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&t.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer);i.remove(e.texture),i.remove(e)}}(n),a.memory.textures--}var M=0;function T(t,e){var r=i.get(t);if(t.isVideoTexture&&function(t){var e=a.render.frame;g.get(t)!==e&&(g.set(t,e),t.update())}(t),t.version>0&&r.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void I(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function P(e,r){var s=i.get(e);e.version>0&&s.__version!==e.version?function(e,i,r){if(6===i.image.length){R(e,i),n.activeTexture(33984+r),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,i.flipY);for(var s=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),a=i.image[0]&&i.image[0].isDataTexture,l=[],c=0;c<6;c++)l[c]=s||a?a?i.image[c].image:i.image[c]:b(i.image[c],!1,!0,p);var u,d=l[0],f=_(d)||h,m=o.convert(i.format),g=o.convert(i.type),v=x(i.internalFormat,m,g);if(O(34067,i,f),s){for(var y=0;y<6;y++){u=l[y].mipmaps;for(var C=0;C<u.length;C++){var E=u[C];1023!==i.format&&1022!==i.format?null!==m?n.compressedTexImage2D(34069+y,C,v,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+y,C,v,E.width,E.height,0,m,g,E.data)}}e.__maxMipLevel=u.length-1}else{u=i.mipmaps;for(var S=0;S<6;S++)if(a){n.texImage2D(34069+S,0,v,l[S].width,l[S].height,0,m,g,l[S].data);for(var M=0;M<u.length;M++){var T=u[M].image[S].image;n.texImage2D(34069+S,M+1,v,T.width,T.height,0,m,g,T.data)}}else{n.texImage2D(34069+S,0,v,m,g,l[S]);for(var P=0;P<u.length;P++)n.texImage2D(34069+S,P+1,v,m,g,u[P].image[S])}e.__maxMipLevel=u.length}w(i,f)&&A(34067,i,d.width,d.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}}(s,e,r):(n.activeTexture(33984+r),n.bindTexture(34067,s.__webglTexture))}var k=((l={})[1e3]=10497,l[1001]=33071,l[1002]=33648,l),D=((c={})[1003]=9728,c[1004]=9984,c[1005]=9986,c[1006]=9729,c[1007]=9985,c[1008]=9987,c);function O(n,o,s){s?(t.texParameteri(n,10242,k[o.wrapS]),t.texParameteri(n,10243,k[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,k[o.wrapR]),t.texParameteri(n,10240,D[o.magFilter]),t.texParameteri(n,10241,D[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),1001===o.wrapS&&1001===o.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,C(o.magFilter)),t.texParameteri(n,10241,C(o.minFilter)),1003!==o.minFilter&&1006!==o.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var a=e.get("EXT_texture_filter_anisotropic");if(a){if(1015===o.type&&null===e.get("OES_texture_float_linear"))return;if(1016===o.type&&null===(h||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(t.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function R(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",E),e.__webglTexture=t.createTexture(),a.memory.textures++)}function I(e,i,r){var s=3553;i.isDataTexture2DArray&&(s=35866),i.isDataTexture3D&&(s=32879),R(e,i),n.activeTexture(33984+r),n.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment);var a,l=function(t){return!h&&(1001!==t.wrapS||1001!==t.wrapT||1003!==t.minFilter&&1006!==t.minFilter)}(i)&&!1===_(i.image),c=b(i.image,l,!1,f),u=_(c)||h,d=o.convert(i.format),p=o.convert(i.type),m=x(i.internalFormat,d,p);O(s,i,u);var g=i.mipmaps;if(i.isDepthTexture)m=6402,h?m=1015===i.type?36012:1014===i.type?33190:1020===i.type?35056:33189:1015===i.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===i.format&&6402===m&&1012!==i.type&&1014!==i.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=1012,p=o.convert(i.type)),1027===i.format&&6402===m&&(m=34041,1020!==i.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=1020,p=o.convert(i.type))),n.texImage2D(3553,0,m,c.width,c.height,0,d,p,null);else if(i.isDataTexture)if(g.length>0&&u){for(var v=0,y=g.length;v<y;v++)n.texImage2D(3553,v,m,(a=g[v]).width,a.height,0,d,p,a.data);i.generateMipmaps=!1,e.__maxMipLevel=g.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,d,p,c.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(var C=0,E=g.length;C<E;C++)a=g[C],1023!==i.format&&1022!==i.format?null!==d?n.compressedTexImage2D(3553,C,m,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,C,m,a.width,a.height,0,d,p,a.data);e.__maxMipLevel=g.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,d,p,c.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,d,p,c.data),e.__maxMipLevel=0;else if(g.length>0&&u){for(var S=0,M=g.length;S<M;S++)n.texImage2D(3553,S,m,d,p,a=g[S]);i.generateMipmaps=!1,e.__maxMipLevel=g.length-1}else n.texImage2D(3553,0,m,d,p,c),e.__maxMipLevel=0;w(i,u)&&A(s,i,c.width,c.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function L(e,r,s,a){var l=o.convert(r.texture.format),c=o.convert(r.texture.type),u=x(r.texture.internalFormat,l,c);n.texImage2D(a,0,u,r.width,r.height,0,l,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,s,a,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function F(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){var r=33189;if(i){var s=n.depthTexture;s&&s.isDepthTexture&&(1015===s.type?r=36012:1014===s.type&&(r=33190));var a=N(n);t.renderbufferStorageMultisample(36161,a,r,n.width,n.height)}else t.renderbufferStorage(36161,r,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(i){var l=N(n);t.renderbufferStorageMultisample(36161,l,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var c=o.convert(n.texture.format),u=o.convert(n.texture.type),h=x(n.texture.internalFormat,c,u);if(i){var d=N(n);t.renderbufferStorageMultisample(36161,d,h,n.width,n.height)}else t.renderbufferStorage(36161,h,n.width,n.height)}t.bindRenderbuffer(36161,null)}function N(t){return h&&t.isWebGLMultisampleRenderTarget?Math.min(m,t.samples):0}var B=!1,U=!1;this.allocateTextureUnit=function(){var t=M;return t>=d&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+d),M+=1,t},this.resetTextureUnits=function(){M=0},this.setTexture2D=T,this.setTexture2DArray=function(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?I(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?I(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=P,this.setupRenderTarget=function(e){var r=i.get(e),s=i.get(e.texture);e.addEventListener("dispose",S),s.__webglTexture=t.createTexture(),a.memory.textures++;var l=!0===e.isWebGLCubeRenderTarget,c=!0===e.isWebGLMultisampleRenderTarget,u=_(e)||h;if(!h||1022!==e.texture.format||1015!==e.texture.type&&1016!==e.texture.type||(e.texture.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),l){r.__webglFramebuffer=[];for(var d=0;d<6;d++)r.__webglFramebuffer[d]=t.createFramebuffer()}else if(r.__webglFramebuffer=t.createFramebuffer(),c)if(h){r.__webglMultisampledFramebuffer=t.createFramebuffer(),r.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,r.__webglColorRenderbuffer);var p=o.convert(e.texture.format),f=o.convert(e.texture.type),m=x(e.texture.internalFormat,p,f),g=N(e);t.renderbufferStorageMultisample(36161,g,m,e.width,e.height),t.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(r.__webglDepthRenderbuffer=t.createRenderbuffer(),F(r.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){n.bindTexture(34067,s.__webglTexture),O(34067,e.texture,u);for(var v=0;v<6;v++)L(r.__webglFramebuffer[v],e,36064,34069+v);w(e.texture,u)&&A(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,s.__webglTexture),O(3553,e.texture,u),L(r.__webglFramebuffer,e,36064,3553),w(e.texture,u)&&A(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&function(e){var n=i.get(e),r=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),T(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(1026===n.depthTexture.format)t.framebufferTexture2D(36160,36096,3553,r,0);else{if(1027!==n.depthTexture.format)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,e)}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),F(n.__webglDepthbuffer[o],e,!1)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),F(n.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}(e)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(w(e,_(t)||h)){var r=t.isWebGLCubeRenderTarget?34067:3553,o=i.get(e).__webglTexture;n.bindTexture(r,o),A(r,e,t.width,t.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(h){var n=i.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var r=e.width,o=e.height,s=16384;e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024),t.blitFramebuffer(0,0,r,o,0,0,r,o,s,9728),t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),t=t.texture),T(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===U&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),U=!0),t=t.texture),P(t,e)}}function Ji(t,e,n){var i=n.isWebGL2;return{convert:function(t){var n;if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;if(1015===t)return 5126;if(1016===t)return i?5131:null!==(n=e.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===t)return 6406;if(1022===t)return 6407;if(1023===t)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(1026===t)return 6402;if(1027===t)return 34041;if(1028===t)return 6403;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1032===t)return 36248;if(1033===t)return 36249;if(33776===t||33777===t||33778===t||33779===t){if(null===(n=e.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===t)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===t||35841===t||35842===t||35843===t){if(null===(n=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===t)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return null!==(n=e.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===t||37496===t)&&null!==(n=e.get("WEBGL_compressed_texture_etc"))){if(37492===t)return n.COMPRESSED_RGB8_ETC2;if(37496===t)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t||37840===t||37841===t||37842===t||37843===t||37844===t||37845===t||37846===t||37847===t||37848===t||37849===t||37850===t||37851===t||37852===t||37853===t?null!==(n=e.get("WEBGL_compressed_texture_astc"))?t:null:36492===t?null!==(n=e.get("EXT_texture_compression_bptc"))?t:null:1020===t?i?34042:null!==(n=e.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function tr(){wt.call(this),this.type="Group"}function er(t){void 0===t&&(t=[]),We.call(this),this.cameras=t}(Yi.prototype=Object.create(qt.prototype)).constructor=Yi,Yi.prototype.isMeshDepthMaterial=!0,Yi.prototype.copy=function(t){return qt.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},(Qi.prototype=Object.create(qt.prototype)).constructor=Qi,Qi.prototype.isMeshDistanceMaterial=!0,Qi.prototype.copy=function(t){return qt.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},tr.prototype=Object.assign(Object.create(wt.prototype),{constructor:tr,isGroup:!0}),er.prototype=Object.assign(Object.create(We.prototype),{constructor:er,isArrayCamera:!0});var nr=new A,ir=new A;function rr(t){var e,n,i=this,r=null,o=null,s=null,a=[],l=new X,c=new X,u=1,h="local-floor";"undefined"!=typeof window&&"VRFrameData"in window&&(o=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",C,!1));var p=new X,f=new w,m=new A,g=new We;g.viewport=new y,g.layers.enable(1);var v=new We;v.viewport=new y,v.layers.enable(2);var b=new er([g,v]);b.layers.enable(1),b.layers.enable(2);var _,x=new d;function C(){if(i.isPresenting=null!==r&&!0===r.isPresenting){var o=r.getEyeParameters("left");e=2*o.renderWidth*u,n=o.renderHeight*u,_=t.getPixelRatio(),t.getSize(x),t.setDrawingBufferSize(e,n,1),g.viewport.set(0,0,e/2,n),v.viewport.set(e/2,0,e/2,n),P.start(),i.dispatchEvent({type:"sessionstart"})}else i.enabled&&t.setDrawingBufferSize(x.width,x.height,_),P.stop(),i.dispatchEvent({type:"sessionend"})}var E=[],S=[];function M(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),n=0,i=e.length;n<i;n++){var r=e[n];if(r&&("Daydream Controller"===r.id||"Gear VR Controller"===r.id||"Oculus Go Controller"===r.id||"OpenVR Gamepad"===r.id||r.id.startsWith("Oculus Touch")||r.id.startsWith("HTC Vive Focus")||r.id.startsWith("Spatial Controller"))){var o=r.hand;if(0===t&&(""===o||"right"===o))return r;if(1===t&&"left"===o)return r}}}function T(t,i){null!==i&&4===i.length&&t.set(i[0]*e,i[1]*n,i[2]*e,i[3]*n)}this.enabled=!1,this.getController=function(t){var e=a[t];return void 0===e&&((e=new tr).matrixAutoUpdate=!1,e.visible=!1,a[t]=e),e},this.getDevice=function(){return r},this.setDevice=function(t){void 0!==t&&(r=t),P.setContext(t)},this.setFramebufferScaleFactor=function(t){u=t},this.setReferenceSpaceType=function(t){h=t},this.setPoseTarget=function(t){void 0!==t&&(s=t)},this.getCamera=function(t){var e="local-floor"===h?1.6:0;if(r.depthNear=t.near,r.depthFar=t.far,r.getFrameData(o),"local-floor"===h){var n=r.stageParameters;n?l.fromArray(n.sittingToStandingTransform):l.makeTranslation(0,e,0)}var i=o.pose,u=null!==s?s:t;u.matrix.copy(l),u.matrix.decompose(u.position,u.quaternion,u.scale),null!==i.orientation&&(f.fromArray(i.orientation),u.quaternion.multiply(f)),null!==i.position&&(f.setFromRotationMatrix(l),m.fromArray(i.position),m.applyQuaternion(f),u.position.add(m)),u.updateMatrixWorld();for(var d=u.children,y=0,_=d.length;y<_;y++)d[y].updateMatrixWorld(!0);g.near=t.near,v.near=t.near,g.far=t.far,v.far=t.far,g.matrixWorldInverse.fromArray(o.leftViewMatrix),v.matrixWorldInverse.fromArray(o.rightViewMatrix),c.getInverse(l),"local-floor"===h&&(g.matrixWorldInverse.multiply(c),v.matrixWorldInverse.multiply(c));var w=u.parent;null!==w&&(p.getInverse(w.matrixWorld),g.matrixWorldInverse.multiply(p),v.matrixWorldInverse.multiply(p)),g.matrixWorld.getInverse(g.matrixWorldInverse),v.matrixWorld.getInverse(v.matrixWorldInverse),g.projectionMatrix.fromArray(o.leftProjectionMatrix),v.projectionMatrix.fromArray(o.rightProjectionMatrix),function(t,e,n){nr.setFromMatrixPosition(e.matrixWorld),ir.setFromMatrixPosition(n.matrixWorld);var i=nr.distanceTo(ir),r=e.projectionMatrix.elements,o=n.projectionMatrix.elements,s=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(o[8]+1)/o[0],d=s*u,p=s*h,f=i/(-u+h),m=f*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var g=s+f,v=a+f;t.projectionMatrix.makePerspective(d-m,p+(i-m),l*a/v*g,c*a/v*g,g,v)}(b,g,v);var A=r.getLayers();if(A.length){var x=A[0];T(g.viewport,x.leftBounds),T(v.viewport,x.rightBounds)}return function(){for(var t=0;t<a.length;t++){var e=a[t],n=M(t);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var i=n.pose;!1===i.hasPosition&&e.position.set(.2,-.6,-.05),null!==i.position&&e.position.fromArray(i.position),null!==i.orientation&&e.quaternion.fromArray(i.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(l),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var r="Daydream Controller"===n.id?0:1;void 0===E[t]&&(E[t]=!1),E[t]!==n.buttons[r].pressed&&(E[t]=n.buttons[r].pressed,!0===E[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"}))),r=2,void 0===S[t]&&(S[t]=!1),void 0!==n.buttons[r]&&S[t]!==n.buttons[r].pressed&&(S[t]=n.buttons[r].pressed,!0===S[t]?e.dispatchEvent({type:"squeezestart"}):(e.dispatchEvent({type:"squeezeend"}),e.dispatchEvent({type:"squeeze"})))}else e.visible=!1}}(),b},this.getStandingMatrix=function(){return l},this.isPresenting=!1;var P=new Je;this.setAnimationLoop=function(t){P.setAnimationLoop(t),this.isPresenting&&P.start()},this.submitFrame=function(){this.isPresenting&&r.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",C)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function or(){this._targetRay=null,this._grip=null,this._hand=null}function sr(t,e){var n,i=this,r=null,o=1,s=null,a="local-floor",l=null,c=null,u=[],h=new Map,d=[],p=new We;p.layers.enable(1),p.viewport=new y;var f=new We;f.layers.enable(2),f.viewport=new y;var m=[p,f],g=new er;g.layers.enable(1),g.layers.enable(2);var v=null,b=null;function _(t){var e=h.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function w(){h.forEach((function(t,e){t.disconnect(e)})),h.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),P.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function x(t){s=t,P.setContext(r),P.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}function C(t){for(var e=r.inputSources,n=0;n<u.length;n++)h.set(e[n],u[n]);for(var i=0;i<t.removed.length;i++){var o=t.removed[i],s=h.get(o);s&&(s.dispatchEvent({type:"disconnected",data:o}),h.delete(o))}for(var a=0;a<t.added.length;a++){var l=t.added[a],c=h.get(l);c&&c.dispatchEvent({type:"connected",data:l})}}this.layersEnabled=!1,this.enabled=!1,this.isPresenting=!1,this.getCameraPose=function(){return l},this.getController=function(t){var e=u[index];return void 0===e&&(e=new or,u[index]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){var e=u[t];return void 0===e&&(e=new or,u[t]=e),e.getGripSpace()},this.getHand=function(t){var e=u[t];return void 0===e&&(e=new or,u[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){o=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s},this.getSession=function(){return r},this.addLayer=function(t){window.XRWebGLBinding&&this.layersEnabled&&r&&(d.push(t),r.updateRenderState({layers:d}))},this.removeLayer=function(t){window.XRWebGLBinding&&this.layersEnabled&&r&&(d.splice(d.indexOf(t),1),r.updateRenderState({layers:d}))},this.setSession=function(t){if(null!==(r=t)){r.addEventListener("select",_),r.addEventListener("selectstart",_),r.addEventListener("selectend",_),r.addEventListener("squeeze",_),r.addEventListener("squeezestart",_),r.addEventListener("squeezeend",_),r.addEventListener("end",w);var i=e.getContextAttributes();!0!==i.xrCompatible&&e.makeXRCompatible(),n=new XRWebGLLayer(r,e,{antialias:i.antialias,alpha:i.alpha,depth:i.depth,stencil:i.stencil,framebufferScaleFactor:o}),window.XRWebGLBinding&&this.layersEnabled?this.addLayer(n):r.updateRenderState({baseLayer:n}),r.requestReferenceSpace(a).then(x),r.addEventListener("inputsourceschange",C)}};var E=new A,S=new A;function M(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.setPoseTarget=function(t){void 0!==t&&(c=t)},this.getCamera=function(t){g.near=f.near=p.near=t.near,g.far=f.far=p.far=t.far,v===g.near&&b===g.far||(r.updateRenderState({depthNear:g.near,depthFar:g.far}),v=g.near,b=g.far);var e=t.parent,n=g.cameras,i=c||t;M(g,e);for(var o=0;o<n.length;o++)M(n[o],e);i.matrixWorld.copy(g.matrixWorld);for(var s=i.children,a=0,l=s.length;a<l;a++)s[a].updateMatrixWorld(!0);return 2===n.length?function(t,e,n){E.setFromMatrixPosition(e.matrixWorld),S.setFromMatrixPosition(n.matrixWorld);var i=E.distanceTo(S),r=e.projectionMatrix.elements,o=n.projectionMatrix.elements,s=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(o[8]+1)/o[0],d=s*u,p=s*h,f=i/(-u+h),m=f*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();var g=s+f,v=a+f;t.projectionMatrix.makePerspective(d-m,p+(i-m),l*a/v*g,c*a/v*g,g,v)}(g,p,f):g.projectionMatrix.copy(p.projectionMatrix),g};var T=null,P=new Je;P.setAnimationLoop((function(e,i){if(null!==(l=i.getViewerPose(s))){var o=l.views;t.setFramebuffer(n.framebuffer);var a=!1;o.length!==g.cameras.length&&(g.cameras.length=0,a=!0);for(var c=0;c<o.length;c++){var h=o[c],d=n.getViewport(h),p=m[c];p.matrix.fromArray(h.transform.matrix),p.projectionMatrix.fromArray(h.projectionMatrix),p.viewport.set(d.x,d.y,d.width,d.height),0===c&&g.matrix.copy(p.matrix),!0===a&&g.cameras.push(p)}}for(var f=r.inputSources,v=0;v<u.length;v++)u[v].update(f[v],i,s);T&&T(e,i)})),this.setAnimationLoop=function(t){T=t},this.dispose=function(){}}function ar(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap);var i,r,o=t.get(n).envMap;if(o){e.envMap.value=o,e.flipEnvMap.value=o.isCubeTexture&&o._needsFlipEnvMap?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio;var s=t.get(o).__maxMipLevel;void 0!==s&&(e.maxMipLevel.value=s)}n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(i=n.clearcoatRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix)),n.aoMap?r=n.aoMap:n.lightMap&&(r=n.lightMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uv2Transform.value.copy(r.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,1===n.side&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),1===n.side&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,i,r,o){i.isMeshBasicMaterial?e(t,i):i.isMeshLambertMaterial?(e(t,i),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,i)):i.isMeshToonMaterial?(e(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshPhongMaterial?(e(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshStandardMaterial?(e(t,i),i.isMeshPhysicalMaterial?function(t,e){n(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate()),t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}(t,i):n(t,i)):i.isMeshMatcapMaterial?(e(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDepthMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDistanceMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,i)):i.isMeshNormalMaterial?(e(t,i),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,n,i){var r;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*i,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?r=e.map:e.alphaMap&&(r=e.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}(t,i,r,o):i.isSpriteMaterial?function(t,e){var n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function lr(t){var e,n=void 0!==(t=t||{}).canvas?t.canvas:((e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).style.display="block",e),i=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,o=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,l=void 0!==t.antialias&&t.antialias,c=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,h=void 0!==t.powerPreference?t.powerPreference:"default",p=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,f=null,m=null;this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var g=this,v=!1,b=null,_=0,w=0,x=null,C=null,E=-1,S=null,M=null,T=new y,P=new y,k=null,D=n.width,O=n.height,R=1,I=null,L=null,F=new y(0,0,D,O),N=new y(0,0,D,O),B=!1,U=new Ze,V=!1,j=!1,z=new X,H=new A,G={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function W(){return null===x?R:1}var q,$,Y,Q,K,Z,J,tt,et,nt,it,rt,ot,st,at,lt,ct,ut,ht,dt,pt,ft=i;function mt(t,e){for(var i=0;i<t.length;i++){var r=n.getContext(t[i],e);if(null!==r)return r}return null}try{var gt={alpha:r,depth:o,stencil:a,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:p};if(n.addEventListener("webglcontextlost",wt,!1),n.addEventListener("webglcontextrestored",At,!1),null===ft){var vt=["webgl2","webgl","experimental-webgl"];if(!0===g.isWebGL1Renderer&&vt.shift(),null===(ft=mt(vt,gt)))throw mt(vt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ft.getShaderPrecisionFormat&&(ft.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Rt){throw console.error("THREE.WebGLRenderer: "+Rt.message),Rt}function yt(){q=new dn(ft),!1===($=new cn(ft,q,t)).isWebGL2&&(q.get("WEBGL_depth_texture"),q.get("OES_texture_float"),q.get("OES_texture_half_float"),q.get("OES_texture_half_float_linear"),q.get("OES_standard_derivatives"),q.get("OES_element_index_uint"),q.get("OES_vertex_array_object"),q.get("ANGLE_instanced_arrays")),q.get("OES_texture_float_linear"),dt=new Ji(ft,q,$),(Y=new Ki(ft,q,$)).scissor(P.copy(N).multiplyScalar(R).floor()),Y.viewport(T.copy(F).multiplyScalar(R).floor()),Q=new mn(ft),K=new Ni,Z=new Zi(ft,q,Y,K,$,dt,Q),J=new hn(g),tt=new tn(ft,$),pt=new an(ft,q,tt,$),et=new pn(ft,tt,Q,pt),nt=new bn(ft,et,tt,Q),ct=new yn(ft),at=new un(K),it=new Fi(g,J,q,$,pt,at),rt=new ar(K),ot=new ji(K),st=new $i(q,$),lt=new sn(g,J,Y,nt,c),ut=new ln(ft,q,Q,$),ht=new fn(ft,q,Q,$),Q.programs=it.programs,g.capabilities=$,g.extensions=q,g.properties=K,g.renderLists=ot,g.state=Y,g.info=Q}yt();var bt="undefined"!=typeof navigator&&"xr"in navigator?new sr(g,ft):new rr(g);this.xr=bt;var _t=new Xi(g,nt,$.maxTextureSize);function wt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function At(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1,yt()}function xt(t){var e=t.target;e.removeEventListener("dispose",xt),function(t){Ct(t),K.remove(t)}(e)}function Ct(t){var e=K.get(t).program;void 0!==e&&it.releaseProgram(e)}this.shadowMap=_t,this.getContext=function(){return ft},this.getContextAttributes=function(){return ft.getContextAttributes()},this.forceContextLoss=function(){var t=q.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=q.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(t){void 0!==t&&(R=t,this.setSize(D,O,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new d),t.set(D,O)},this.setSize=function(t,e,i){bt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(D=t,O=e,n.width=Math.floor(t*R),n.height=Math.floor(e*R),!1!==i&&(n.style.width=t+"px",n.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new d),t.set(D*R,O*R).floor()},this.setDrawingBufferSize=function(t,e,i){D=t,O=e,R=i,n.width=Math.floor(t*i),n.height=Math.floor(e*i),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new y),t.copy(T)},this.getViewport=function(t){return t.copy(F)},this.setViewport=function(t,e,n,i){t.isVector4?F.set(t.x,t.y,t.z,t.w):F.set(t,e,n,i),Y.viewport(T.copy(F).multiplyScalar(R).floor())},this.getScissor=function(t){return t.copy(N)},this.setScissor=function(t,e,n,i){t.isVector4?N.set(t.x,t.y,t.z,t.w):N.set(t,e,n,i),Y.scissor(P.copy(N).multiplyScalar(R).floor())},this.getScissorTest=function(){return B},this.setScissorTest=function(t){Y.setScissorTest(B=t)},this.setOpaqueSort=function(t){I=t},this.setTransparentSort=function(t){L=t},this.getClearColor=function(){return lt.getClearColor()},this.setClearColor=function(){lt.setClearColor.apply(lt,arguments)},this.getClearAlpha=function(){return lt.getClearAlpha()},this.setClearAlpha=function(){lt.setClearAlpha.apply(lt,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),ft.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",wt,!1),n.removeEventListener("webglcontextrestored",At,!1),ot.dispose(),st.dispose(),K.dispose(),J.dispose(),nt.dispose(),pt.dispose(),bt.dispose(),Mt.stop()},this.renderBufferImmediate=function(t,e){pt.initAttributes();var n=K.get(t);t.hasPositions&&!n.position&&(n.position=ft.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=ft.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=ft.createBuffer()),t.hasColors&&!n.color&&(n.color=ft.createBuffer());var i=e.getAttributes();t.hasPositions&&(ft.bindBuffer(34962,n.position),ft.bufferData(34962,t.positionArray,35048),pt.enableAttribute(i.position),ft.vertexAttribPointer(i.position,3,5126,!1,0,0)),t.hasNormals&&(ft.bindBuffer(34962,n.normal),ft.bufferData(34962,t.normalArray,35048),pt.enableAttribute(i.normal),ft.vertexAttribPointer(i.normal,3,5126,!1,0,0)),t.hasUvs&&(ft.bindBuffer(34962,n.uv),ft.bufferData(34962,t.uvArray,35048),pt.enableAttribute(i.uv),ft.vertexAttribPointer(i.uv,2,5126,!1,0,0)),t.hasColors&&(ft.bindBuffer(34962,n.color),ft.bufferData(34962,t.colorArray,35048),pt.enableAttribute(i.color),ft.vertexAttribPointer(i.color,3,5126,!1,0,0)),pt.disableUnusedAttributes(),ft.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,i,r,o){null===e&&(e=G);var s=r.isMesh&&r.matrixWorld.determinant()<0,a=Ot(t,e,i,r);Y.setMaterial(i,s);var l=n.index,c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;var u,h=1;!0===i.wireframe&&(l=et.getWireframeAttribute(n),h=2),(i.morphTargets||i.morphNormals)&&ct.update(r,n,i,a),pt.setup(r,i,a,n,l);var d=ut;null!==l&&(u=tt.get(l),(d=ht).setIndex(u));var p=null!==l?l.count:c.count,f=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==o?o.start*h:0,v=null!==o?o.count*h:1/0,y=Math.max(f,g),b=Math.min(p,f+m,g+v)-1,_=Math.max(0,b-y+1);if(0!==_){if(r.isMesh)!0===i.wireframe?(Y.setLineWidth(i.wireframeLinewidth*W()),d.setMode(1)):d.setMode(4);else if(r.isLine){var w=i.linewidth;void 0===w&&(w=1),Y.setLineWidth(w*W()),d.setMode(r.isLineSegments?1:r.isLineLoop?2:3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(y,_,r.count);else if(n.isInstancedBufferGeometry){var A=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,_,A)}else d.render(y,_)}},this.compile=function(t,e){(m=st.get(t,e)).init(),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(m.pushLight(t),t.castShadow&&m.pushShadow(t))})),m.setupLights(e);var n=new WeakMap;t.traverse((function(e){var i=e.material;if(i)if(Array.isArray(i))for(var r=0;r<i.length;r++){var o=i[r];!1===n.has(o)&&(Dt(o,t,e),n.set(o))}else!1===n.has(i)&&(Dt(i,t,e),n.set(i))}))};var Et,St=null,Mt=new Je;function Tt(t,e,n,i){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)m.pushLight(t),t.castShadow&&m.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||U.intersectsSprite(t)){i&&H.setFromMatrixPosition(t.matrixWorld).applyMatrix4(z);var r=nt.update(t),o=t.material;o.visible&&f.push(t,r,o,n,H.z,null)}}else if(t.isImmediateRenderObject)i&&H.setFromMatrixPosition(t.matrixWorld).applyMatrix4(z),f.push(t,null,t.material,n,H.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==Q.render.frame&&(t.skeleton.update(),t.skeleton.frame=Q.render.frame),!t.frustumCulled||U.intersectsObject(t))){i&&H.setFromMatrixPosition(t.matrixWorld).applyMatrix4(z);var s=nt.update(t),a=t.material;if(Array.isArray(a))for(var l=s.groups,c=0,u=l.length;c<u;c++){var h=l[c],d=a[h.materialIndex];d&&d.visible&&f.push(t,s,d,n,H.z,h)}else a.visible&&f.push(t,s,a,n,H.z,null)}for(var p=t.children,g=0,v=p.length;g<v;g++)Tt(p[g],e,n,i)}}function Pt(t,e,n){for(var i=!0===e.isScene?e.overrideMaterial:null,r=0,o=t.length;r<o;r++){var s=t[r],a=s.object,l=s.geometry,c=null===i?s.material:i,u=s.group;if(n.isArrayCamera){M=n;for(var h=n.cameras,d=0,p=h.length;d<p;d++){var f=h[d];a.layers.test(f.layers)&&(Y.viewport(T.copy(f.viewport)),m.setupLights(f),kt(a,e,f,l,c,u))}}else M=null,kt(a,e,n,l,c,u)}}function kt(t,e,n,i,r,o){if(t.onBeforeRender(g,e,n,i,r,o),m=st.get(e,M||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var s=Ot(n,e,r,t);Y.setMaterial(r),pt.reset(),function(t,e){t.render((function(t){g.renderBufferImmediate(t,e)}))}(t,s)}else g.renderBufferDirect(n,e,i,r,t,o);t.onAfterRender(g,e,n,i,r,o),m=st.get(e,M||n)}function Dt(t,e,n){!0!==e.isScene&&(e=G);var i=K.get(t),r=m.state.lights,o=r.state.version,s=it.getParameters(t,r.state,m.state.shadowsArray,e,n),a=it.getProgramCacheKey(s),l=i.program,c=!0;if(void 0===l)t.addEventListener("dispose",xt);else if(l.cacheKey!==a)Ct(t);else if(i.lightsStateVersion!==o)c=!1;else{if(void 0!==s.shaderID)return void(i.envMap=J.get(t.envMap||(t.isMeshStandardMaterial?e.environment:null)));c=!1}c&&(s.uniforms=it.getUniforms(t),t.onBeforeCompile(s,g),l=it.acquireProgram(s,a),i.program=l,i.uniforms=s.uniforms,i.outputEncoding=s.outputEncoding);var u=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=at.numPlanes,i.numIntersection=at.numIntersection,u.clippingPlanes=at.uniform),i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=J.get(t.envMap||i.environment),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=o,i.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotShadowMatrix.value=r.state.spotShadowMatrix,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix);var h=i.program.getUniforms(),d=gi.seqWithValue(h.seq,u);i.uniformsList=d}function Ot(t,e,n,i){!0!==e.isScene&&(e=G),Z.resetTextureUnits();var r=e.fog,o=n.isMeshStandardMaterial?e.environment:null,a=null===x?g.outputEncoding:x.texture.encoding,l=J.get(n.envMap||o),c=K.get(n),u=m.state.lights;!0===V&&(!0!==j&&t===S||at.setState(n,t,t===S&&n.id===E)),n.version===c.__version?n.fog&&c.fog!==r||c.environment!==o||c.needsLights&&c.lightsStateVersion!==u.state.version?Dt(n,e,i):void 0===c.numClippingPlanes||c.numClippingPlanes===at.numPlanes&&c.numIntersection===at.numIntersection?(c.outputEncoding!==a||c.envMap!==l)&&Dt(n,e,i):Dt(n,e,i):(Dt(n,e,i),c.__version=n.version);var h,d,p=!1,f=!1,v=!1,y=c.program,b=y.getUniforms(),_=c.uniforms;if(Y.useProgram(y.program)&&(p=!0,f=!0,v=!0),n.id!==E&&(E=n.id,f=!0),p||S!==t){if(b.setValue(ft,"projectionMatrix",t.projectionMatrix),$.logarithmicDepthBuffer&&b.setValue(ft,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),S!==t&&(S=t,f=!0,v=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var w=b.map.cameraPosition;void 0!==w&&w.setValue(ft,H.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&b.setValue(ft,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&b.setValue(ft,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){b.setOptional(ft,i,"bindMatrix"),b.setOptional(ft,i,"bindMatrixInverse");var A=i.skeleton;if(A)if($.floatVertexTextures){if(null===A.boneTexture){var C=Math.sqrt(4*A.bones.length);C=s.ceilPowerOfTwo(C),C=Math.max(C,4);var M=new Float32Array(C*C*4);M.set(A.boneMatrices);var T=new Qe(M,C,C,1023,1015);A.boneMatrices=M,A.boneTexture=T,A.boneTextureSize=C}b.setValue(ft,"boneTexture",A.boneTexture,Z),b.setValue(ft,"boneTextureSize",A.boneTextureSize)}else b.setOptional(ft,A,"boneMatrices")}return(f||c.receiveShadow!==i.receiveShadow)&&(c.receiveShadow=i.receiveShadow,b.setValue(ft,"receiveShadow",i.receiveShadow)),f&&(b.setValue(ft,"toneMappingExposure",g.toneMappingExposure),c.needsLights&&((h=_).ambientLightColor.needsUpdate=d=v,h.lightProbe.needsUpdate=d,h.directionalLights.needsUpdate=d,h.directionalLightShadows.needsUpdate=d,h.pointLights.needsUpdate=d,h.pointLightShadows.needsUpdate=d,h.spotLights.needsUpdate=d,h.spotLightShadows.needsUpdate=d,h.rectAreaLights.needsUpdate=d,h.hemisphereLights.needsUpdate=d),r&&n.fog&&rt.refreshFogUniforms(_,r),rt.refreshMaterialUniforms(_,n,R,O),gi.upload(ft,c.uniformsList,_,Z)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(gi.upload(ft,c.uniformsList,_,Z),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&b.setValue(ft,"center",i.center),b.setValue(ft,"modelViewMatrix",i.modelViewMatrix),b.setValue(ft,"normalMatrix",i.normalMatrix),b.setValue(ft,"modelMatrix",i.matrixWorld),y}Mt.setAnimationLoop((function(t){bt.isPresenting||St&&St(t)})),"undefined"!=typeof window&&Mt.setContext(window),this.setAnimationLoop=function(t){St=t,bt.setAnimationLoop(t),null===t?Mt.stop():Mt.start()},this.render=function(t,e){var n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),void 0===e||!0===e.isCamera){if(!0!==v){pt.resetDefaultState(),E=-1,S=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===bt.enabled&&!0===bt.isPresenting&&(e=bt.getCamera(e)),!0===t.isScene&&t.onBeforeRender(g,t,e,n||x),(m=st.get(t,e)).init(),z.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),U.setFromProjectionMatrix(z),V=at.init(this.clippingPlanes,j=this.localClippingEnabled,e),(f=ot.get(t,e)).init(),Tt(t,e,0,g.sortObjects),f.finish(),!0===g.sortObjects&&f.sort(I,L),!0===V&&at.beginShadows();var r=m.state.shadowsArray;_t.render(r,t,e),m.setupLights(e),!0===V&&at.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),lt.render(f,t,e,i);var o=f.opaque,s=f.transparent;o.length>0&&Pt(o,t,e),s.length>0&&Pt(s,t,e),!0===t.isScene&&t.onAfterRender(g,t,e),null!==x&&(Z.updateRenderTargetMipmap(x),Z.updateMultisampleRenderTarget(x)),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1),bt.enabled&&bt.submitFrame&&bt.submitFrame(),f=null,m=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setTexture2D=(Et=!1,function(t,e){t&&t.isWebGLRenderTarget&&(Et||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Et=!0),t=t.texture),Z.setTexture2D(t,e)}),this.setFramebuffer=function(t){b!==t&&null===x&&ft.bindFramebuffer(36160,t),b=t},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return w},this.getRenderList=function(){return f},this.setRenderList=function(t){f=t},this.getRenderState=function(){return m},this.setRenderState=function(t){m=t},this.getRenderTarget=function(){return x},this.setRenderTarget=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),x=t,_=e,w=n,t&&void 0===K.get(t).__webglFramebuffer&&Z.setupRenderTarget(t);var i=b,r=!1;if(t){var o=K.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=o[e],r=!0):i=t.isWebGLMultisampleRenderTarget?K.get(t).__webglMultisampledFramebuffer:o,T.copy(t.viewport),P.copy(t.scissor),k=t.scissorTest}else T.copy(F).multiplyScalar(R).floor(),P.copy(N).multiplyScalar(R).floor(),k=B;if(C!==i&&(ft.bindFramebuffer(36160,i),C=i),Y.viewport(T),Y.scissor(P),Y.setScissorTest(k),r){var s=K.get(t.texture);ft.framebufferTexture2D(36160,36064,34069+e,s.__webglTexture,n)}},this.readRenderTargetPixels=function(t,e,n,i,r,o,s){if(t&&t.isWebGLRenderTarget){var a=K.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){var l=!1;a!==C&&(ft.bindFramebuffer(36160,a),l=!0);try{var c=t.texture,u=c.format,h=c.type;if(1023!==u&&dt.convert(u)!==ft.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(1009===h||dt.convert(h)===ft.getParameter(35738)||1015===h&&($.isWebGL2||q.get("OES_texture_float")||q.get("WEBGL_color_buffer_float"))||1016===h&&q.get($.isWebGL2?"EXT_color_buffer_float":"EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ft.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&ft.readPixels(e,n,i,r,dt.convert(u),dt.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&ft.bindFramebuffer(36160,C)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){void 0===n&&(n=0);var i=Math.pow(2,-n),r=Math.floor(e.image.width*i),o=Math.floor(e.image.height*i),s=dt.convert(e.format);Z.setTexture2D(e,0),ft.copyTexImage2D(3553,n,s,t.x,t.y,r,o,0),Y.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i){void 0===i&&(i=0);var r=e.image.width,o=e.image.height,s=dt.convert(n.format),a=dt.convert(n.type);Z.setTexture2D(n,0),ft.pixelStorei(37440,n.flipY),ft.pixelStorei(37441,n.premultiplyAlpha),ft.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?ft.texSubImage2D(3553,i,t.x,t.y,r,o,s,a,e.image.data):e.isCompressedTexture?ft.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,s,e.mipmaps[0].data):ft.texSubImage2D(3553,i,t.x,t.y,s,a,e.image),0===i&&n.generateMipmaps&&ft.generateMipmap(3553),Y.unbindTexture()},this.initTexture=function(t){Z.setTexture2D(t,0),Y.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function cr(t){lr.call(this,t)}Object.assign(rr.prototype,n.prototype),Object.assign(or.prototype,{constructor:or,getHandSpace:function(){if(null===this._hand&&(this._hand=new tr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(var t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){var e=new tr;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new tr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new tr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,n){var i=null,r=null,o=null,s=this._targetRay,a=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(l&&t.hand){o=!0;for(var c=0;c<=window.XRHand.LITTLE_PHALANX_TIP;c++)if(t.hand[c]){var u=e.getJointPose(t.hand[c],n),h=l.joints[c];null!==u&&(h.matrix.fromArray(u.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.jointRadius=u.radius),h.visible=null!==u;var d=l.joints[window.XRHand.INDEX_PHALANX_TIP],p=l.joints[window.XRHand.THUMB_PHALANX_TIP],f=d.position.distanceTo(p.position);l.inputState.pinching&&f>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&f<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}}else null!==s&&null!==(i=e.getPose(t.targetRaySpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)),null!==a&&t.gripSpace&&null!==(r=e.getPose(t.gripSpace,n))&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale));return null!==s&&(s.visible=null!==i),null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==o),this}}),Object.assign(sr.prototype,n.prototype),cr.prototype=Object.assign(Object.create(lr.prototype),{constructor:cr,isWebGL1Renderer:!0});var ur=function(){function t(t,e){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new Ht(t),this.density=void 0!==e?e:25e-5}var e=t.prototype;return e.clone=function(){return new t(this.color,this.density)},e.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},t}(),hr=function(){function t(t,e,n){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new Ht(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}var e=t.prototype;return e.clone=function(){return new t(this.color,this.near,this.far)},e.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},t}(),dr=function(t){function e(){var e;return e=t.call(this)||this,Object.defineProperty(u(e),"isScene",{value:!0}),e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:u(e)})),e}c(e,t);var n=e.prototype;return n.copy=function(e,n){return t.prototype.copy.call(this,e,n),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},n.toJSON=function(e){var n=t.prototype.toJSON.call(this,e);return null!==this.background&&(n.object.background=this.background.toJSON(e)),null!==this.environment&&(n.object.environment=this.environment.toJSON(e)),null!==this.fog&&(n.object.fog=this.fog.toJSON()),n},e}(wt);function pr(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=s.generateUUID()}Object.defineProperty(pr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(pr.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=s.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var e=new pr(new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),this.stride);return e.setUsage(this.usage),e},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=s.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var fr,mr=new A;function gr(t,e,n,i){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function vr(t){qt.call(this),this.type="SpriteMaterial",this.color=new Ht(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}Object.defineProperties(gr.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(gr.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,n=this.data.count;e<n;e++)mr.x=this.getX(e),mr.y=this.getY(e),mr.z=this.getZ(e),mr.applyMatrix4(t),this.setXYZ(e,mr.x,mr.y,mr.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return this.data.array[(t=t*this.data.stride+this.offset)+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this},clone:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)e.push(this.data.array[i+r]);return new Xt(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new gr(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)e.push(this.data.array[i+r]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),(vr.prototype=Object.create(qt.prototype)).constructor=vr,vr.prototype.isSpriteMaterial=!0,vr.prototype.copy=function(t){return qt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var yr=new A,br=new A,_r=new A,wr=new d,Ar=new d,xr=new X,Cr=new A,Er=new A,Sr=new A,Mr=new d,Tr=new d,Pr=new d;function kr(t){if(wt.call(this),this.type="Sprite",void 0===fr){fr=new ye;var e=new pr(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);fr.setIndex([0,1,2,0,2,3]),fr.setAttribute("position",new gr(e,3,0,!1)),fr.setAttribute("uv",new gr(e,2,3,!1))}this.geometry=fr,this.material=void 0!==t?t:new vr,this.center=new d(.5,.5)}function Dr(t,e,n,i,r,o){wr.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(Ar.x=o*wr.x-r*wr.y,Ar.y=r*wr.x+o*wr.y):Ar.copy(wr),t.copy(e),t.x+=Ar.x,t.y+=Ar.y,t.applyMatrix4(xr)}kr.prototype=Object.assign(Object.create(wt.prototype),{constructor:kr,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),br.setFromMatrixScale(this.matrixWorld),xr.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),_r.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&br.multiplyScalar(-_r.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var o=this.center;Dr(Cr.set(-.5,-.5,0),_r,o,br,n,i),Dr(Er.set(.5,-.5,0),_r,o,br,n,i),Dr(Sr.set(.5,.5,0),_r,o,br,n,i),Mr.set(0,0),Tr.set(1,0),Pr.set(1,1);var s=t.ray.intersectTriangle(Cr,Er,Sr,!1,yr);if(null!==s||(Dr(Er.set(-.5,.5,0),_r,o,br,n,i),Tr.set(0,1),null!==(s=t.ray.intersectTriangle(Cr,Sr,Er,!1,yr)))){var a=t.ray.origin.distanceTo(yr);a<t.near||a>t.far||e.push({distance:a,point:yr.clone(),uv:Ft.getUV(yr,Cr,Er,Sr,Mr,Tr,Pr,new d),face:null,object:this})}},copy:function(t){return wt.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}});var Or,Rr,Ir,Lr,Fr,Nr=new A,Br=new A;function Ur(){wt.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Vr(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Fe.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new X,this.bindMatrixInverse=new X}function jr(){wt.call(this),this.type="Bone"}Ur.prototype=Object.assign(Object.create(wt.prototype),{constructor:Ur,isLOD:!0,copy:function(t){wt.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);var n,i=this.levels;for(n=0;n<i.length&&!(e<i[n].distance);n++);return i.splice(n,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var e=this.levels;if(e.length>0){var n,i;for(n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){if(this.levels.length>0){Nr.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(Nr);this.getObjectForDistance(n).raycast(t,e)}},update:function(t){var e=this.levels;if(e.length>1){Nr.setFromMatrixPosition(t.matrixWorld),Br.setFromMatrixPosition(this.matrixWorld);var n,i,r=Nr.distanceTo(Br)/t.zoom;for(e[0].object.visible=!0,n=1,i=e.length;n<i&&r>=e[n].distance;n++)e[n-1].object.visible=!1,e[n].object.visible=!0;for(this._currentLevel=n-1;n<i;n++)e[n].object.visible=!1}},toJSON:function(t){var e=wt.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var o=n[i];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),Vr.prototype=Object.assign(Object.create(Fe.prototype),{constructor:Vr,isSkinnedMesh:!0,copy:function(t){return Fe.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new y,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Fe.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:(Or=new A,Rr=new y,Ir=new y,Lr=new A,Fr=new X,function(t,e){var n=this.skeleton,i=this.geometry;Rr.fromBufferAttribute(i.attributes.skinIndex,t),Ir.fromBufferAttribute(i.attributes.skinWeight,t),Or.fromBufferAttribute(i.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(var r=0;r<4;r++){var o=Ir.getComponent(r);if(0!==o){var s=Rr.getComponent(r);Fr.multiplyMatrices(n.bones[s].matrixWorld,n.boneInverses[s]),e.addScaledVector(Lr.copy(Or).applyMatrix4(Fr),o)}}return e.applyMatrix4(this.bindMatrixInverse)})}),jr.prototype=Object.assign(Object.create(wt.prototype),{constructor:jr,isBone:!0});var zr=new X,Hr=new X;function Gr(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this.uuid=s.generateUUID(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(Gr.prototype,{init:function(){var t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new X)}},calculateInverses:function(){this.boneInverses.length=0;for(var t=0,e=this.bones.length;t<e;t++){var n=new X;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}},pose:function(){for(var t=0,e=this.bones.length;t<e;t++){var n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(var i=0,r=this.bones.length;i<r;i++){var o=this.bones[i];o&&(o.parent&&o.parent.isBone?(o.matrix.copy(o.parent.matrixWorld).invert(),o.matrix.multiply(o.matrixWorld)):o.matrix.copy(o.matrixWorld),o.matrix.decompose(o.position,o.quaternion,o.scale))}},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,o=t.length;r<o;r++)zr.multiplyMatrices(t[r]?t[r].matrixWorld:Hr,e[r]),zr.toArray(n,16*r);null!==i&&(i.needsUpdate=!0)},clone:function(){return new Gr(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}},dispose:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(t,e){this.uuid=t.uuid;for(var n=0,i=t.bones.length;n<i;n++){var r=t.bones[n],o=e[r];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new jr),this.bones.push(o),this.boneInverses.push((new X).fromArray(t.boneInverses[n]))}return this.init(),this},toJSON:function(){var t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;for(var e=this.bones,n=this.boneInverses,i=0,r=e.length;i<r;i++)t.bones.push(e[i].uuid),t.boneInverses.push(n[i].toArray());return t}});var Wr=new X,qr=new X,$r=[],Yr=new Fe;function Qr(t,e,n){Fe.call(this,t,e),this.instanceMatrix=new Xt(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function Xr(t){qt.call(this),this.type="LineBasicMaterial",this.color=new Ht(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}Qr.prototype=Object.assign(Object.create(Fe.prototype),{constructor:Qr,isInstancedMesh:!0,copy:function(t){return Fe.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},getColorAt:function(t,e){e.fromArray(this.instanceColor.array,3*t)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){var n=this.matrixWorld,i=this.count;if(Yr.geometry=this.geometry,Yr.material=this.material,void 0!==Yr.material)for(var r=0;r<i;r++){this.getMatrixAt(r,Wr),qr.multiplyMatrices(n,Wr),Yr.matrixWorld=qr,Yr.raycast(t,$r);for(var o=0,s=$r.length;o<s;o++){var a=$r[o];a.instanceId=r,a.object=this,e.push(a)}$r.length=0}},setColorAt:function(t,e){null===this.instanceColor&&(this.instanceColor=new Xt(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),(Xr.prototype=Object.create(qt.prototype)).constructor=Xr,Xr.prototype.isLineBasicMaterial=!0,Xr.prototype.copy=function(t){return qt.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};var Kr=new A,Zr=new A,Jr=new X,to=new Q,eo=new j;function no(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),wt.call(this),this.type="Line",this.geometry=void 0!==t?t:new ye,this.material=void 0!==e?e:new Xr,this.updateMorphTargets()}no.prototype=Object.assign(Object.create(wt.prototype),{constructor:no,isLine:!0,copy:function(t){return wt.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)Kr.fromBufferAttribute(e,i-1),Zr.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=Kr.distanceTo(Zr);t.setAttribute("lineDistance",new oe(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices,s=t.lineDistances;s[0]=0;for(var a=1,l=o.length;a<l;a++)s[a]=s[a-1],s[a]+=o[a-1].distanceTo(o[a])}return this},raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),eo.copy(n.boundingSphere),eo.applyMatrix4(i),eo.radius+=r,!1!==t.ray.intersectsSphere(eo)){Jr.copy(i).invert(),to.copy(t.ray).applyMatrix4(Jr);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,a=new A,l=new A,c=new A,u=new A,h=this.isLineSegments?2:1;if(n.isBufferGeometry){var d=n.index,p=n.attributes.position;if(null!==d)for(var f=d.array,m=0,g=f.length-1;m<g;m+=h){var v=f[m+1];if(a.fromBufferAttribute(p,f[m]),l.fromBufferAttribute(p,v),!(to.distanceSqToSegment(a,l,u,c)>s)){u.applyMatrix4(this.matrixWorld);var y=t.ray.origin.distanceTo(u);y<t.near||y>t.far||e.push({distance:y,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else for(var b=0,_=p.count-1;b<_;b+=h)if(a.fromBufferAttribute(p,b),l.fromBufferAttribute(p,b+1),!(to.distanceSqToSegment(a,l,u,c)>s)){u.applyMatrix4(this.matrixWorld);var w=t.ray.origin.distanceTo(u);w<t.near||w>t.far||e.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else if(n.isGeometry)for(var x=n.vertices,C=x.length,E=0;E<C-1;E+=h)if(!(to.distanceSqToSegment(x[E],x[E+1],u,c)>s)){u.applyMatrix4(this.matrixWorld);var S=t.ray.origin.distanceTo(u);S<t.near||S>t.far||e.push({distance:S,point:c.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,o=i.length;r<o;r++){var s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}else{var a=t.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});var io=new A,ro=new A;function oo(t,e){no.call(this,t,e),this.type="LineSegments"}function so(t,e){no.call(this,t,e),this.type="LineLoop"}function ao(t){qt.call(this),this.type="PointsMaterial",this.color=new Ht(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}oo.prototype=Object.assign(Object.create(no.prototype),{constructor:oo,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],i=0,r=e.count;i<r;i+=2)io.fromBufferAttribute(e,i),ro.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+io.distanceTo(ro);t.setAttribute("lineDistance",new oe(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry)for(var o=t.vertices,s=t.lineDistances,a=0,l=o.length;a<l;a+=2)io.copy(o[a]),ro.copy(o[a+1]),s[a]=0===a?0:s[a-1],s[a+1]=s[a]+io.distanceTo(ro);return this}}),so.prototype=Object.assign(Object.create(no.prototype),{constructor:so,isLineLoop:!0}),(ao.prototype=Object.create(qt.prototype)).constructor=ao,ao.prototype.isPointsMaterial=!0,ao.prototype.copy=function(t){return qt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var lo=new X,co=new Q,uo=new j,ho=new A;function po(t,e){wt.call(this),this.type="Points",this.geometry=void 0!==t?t:new ye,this.material=void 0!==e?e:new ao,this.updateMorphTargets()}function fo(t,e,n,i,r,o,s){var a=co.distanceSqToPoint(t);if(a<n){var l=new A;co.closestPointToPoint(t,l),l.applyMatrix4(i);var c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;o.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:s})}}function mo(t,e,n,i,r,o,s,a,l){g.call(this,t,e,n,i,r,o,s,a,l),this.format=void 0!==s?s:1022,this.minFilter=void 0!==o?o:1006,this.magFilter=void 0!==r?r:1006,this.generateMipmaps=!1;var c=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){c.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}function go(t,e,n,i,r,o,s,a,l,c,u,h){g.call(this,null,o,s,a,l,c,i,r,u,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function vo(t,e,n,i,r,o,s,a,l){g.call(this,t,e,n,i,r,o,s,a,l),this.needsUpdate=!0}function yo(t,e,n,i,r,o,s,a,l,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===c&&(n=1012),void 0===n&&1027===c&&(n=1020),g.call(this,null,i,r,o,s,a,c,n,l),this.image={width:t,height:e},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==a?a:1003,this.flipY=!1,this.generateMipmaps=!1}po.prototype=Object.assign(Object.create(wt.prototype),{constructor:po,isPoints:!0,copy:function(t){return wt.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),uo.copy(n.boundingSphere),uo.applyMatrix4(i),uo.radius+=r,!1!==t.ray.intersectsSphere(uo)){lo.copy(i).invert(),co.copy(t.ray).applyMatrix4(lo);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){var a=n.index,l=n.attributes.position;if(null!==a)for(var c=a.array,u=0,h=c.length;u<h;u++){var d=c[u];ho.fromBufferAttribute(l,d),fo(ho,d,s,i,t,e,this)}else for(var p=0,f=l.count;p<f;p++)ho.fromBufferAttribute(l,p),fo(ho,p,s,i,t,e,this)}else for(var m=n.vertices,g=0,v=m.length;g<v;g++)fo(m[g],g,s,i,t,e,this)}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,o=i.length;r<o;r++){var s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}else{var a=t.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),mo.prototype=Object.assign(Object.create(g.prototype),{constructor:mo,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){var t=this.image;0=="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),(go.prototype=Object.create(g.prototype)).constructor=go,go.prototype.isCompressedTexture=!0,(vo.prototype=Object.create(g.prototype)).constructor=vo,vo.prototype.isCanvasTexture=!0,(yo.prototype=Object.create(g.prototype)).constructor=yo,yo.prototype.isDepthTexture=!0;var bo=0,_o=new X,wo=new wt,Ao=new A;function xo(){Object.defineProperty(this,"id",{value:bo+=2}),this.uuid=s.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}xo.prototype=Object.assign(Object.create(n.prototype),{constructor:xo,isGeometry:!0,applyMatrix4:function(t){for(var e=(new p).getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(t);for(var r=0,o=this.faces.length;r<o;r++){var s=this.faces[r];s.normal.applyMatrix3(e).normalize();for(var a=0,l=s.vertexNormals.length;a<l;a++)s.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return _o.makeRotationX(t),this.applyMatrix4(_o),this},rotateY:function(t){return _o.makeRotationY(t),this.applyMatrix4(_o),this},rotateZ:function(t){return _o.makeRotationZ(t),this.applyMatrix4(_o),this},translate:function(t,e,n){return _o.makeTranslation(t,e,n),this.applyMatrix4(_o),this},scale:function(t,e,n){return _o.makeScale(t,e,n),this.applyMatrix4(_o),this},lookAt:function(t){return wo.lookAt(t),wo.updateMatrix(),this.applyMatrix4(wo.matrix),this},fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index:void 0,i=t.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var r=i.position,o=i.normal,s=i.color,a=i.uv,l=i.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var c=0;c<r.count;c++)e.vertices.push((new A).fromBufferAttribute(r,c)),void 0!==s&&e.colors.push((new Ht).fromBufferAttribute(s,c));function u(t,n,i,r){var c=void 0===s?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[i].clone()],u=void 0===o?[]:[(new A).fromBufferAttribute(o,t),(new A).fromBufferAttribute(o,n),(new A).fromBufferAttribute(o,i)],h=new Gt(t,n,i,u,c,r);e.faces.push(h),void 0!==a&&e.faceVertexUvs[0].push([(new d).fromBufferAttribute(a,t),(new d).fromBufferAttribute(a,n),(new d).fromBufferAttribute(a,i)]),void 0!==l&&e.faceVertexUvs[1].push([(new d).fromBufferAttribute(l,t),(new d).fromBufferAttribute(l,n),(new d).fromBufferAttribute(l,i)])}var h=t.groups;if(h.length>0)for(var p=0;p<h.length;p++)for(var f=h[p],m=f.start,g=m,v=m+f.count;g<v;g+=3)void 0!==n?u(n.getX(g),n.getX(g+1),n.getX(g+2),f.materialIndex):u(g,g+1,g+2,f.materialIndex);else if(void 0!==n)for(var y=0;y<n.count;y+=3)u(n.getX(y),n.getX(y+1),n.getX(y+2));else for(var b=0;b<r.count;b+=3)u(b,b+1,b+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ao).negate(),this.translate(Ao.x,Ao.y,Ao.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new X;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){for(var t=new A,e=new A,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],o=this.vertices[r.a],s=this.vertices[r.b];t.subVectors(this.vertices[r.c],s),e.subVectors(o,s),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);for(var e=new Array(this.vertices.length),n=0,i=this.vertices.length;n<i;n++)e[n]=new A;if(t)for(var r=new A,o=new A,s=0,a=this.faces.length;s<a;s++){var l=this.faces[s],c=this.vertices[l.a],u=this.vertices[l.b];r.subVectors(this.vertices[l.c],u),o.subVectors(c,u),r.cross(o),e[l.a].add(r),e[l.b].add(r),e[l.c].add(r)}else{this.computeFaceNormals();for(var h=0,d=this.faces.length;h<d;h++){var p=this.faces[h];e[p.a].add(p.normal),e[p.b].add(p.normal),e[p.c].add(p.normal)}}for(var f=0,m=this.vertices.length;f<m;f++)e[f].normalize();for(var g=0,v=this.faces.length;g<v;g++){var y=this.faces[g],b=y.vertexNormals;3===b.length?(b[0].copy(e[y.a]),b[1].copy(e[y.b]),b[2].copy(e[y.c])):(b[0]=e[y.a].clone(),b[1]=e[y.b].clone(),b[2]=e[y.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var t=0,e=this.faces.length;t<e;t++){var n=this.faces[t],i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var t=0,e=this.faces.length;t<e;t++){var n=this.faces[t];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(var i=0,r=n.vertexNormals.length;i<r;i++)n.__originalVertexNormals[i]?n.__originalVertexNormals[i].copy(n.vertexNormals[i]):n.__originalVertexNormals[i]=n.vertexNormals[i].clone()}var o=new xo;o.faces=this.faces;for(var s=0,a=this.morphTargets.length;s<a;s++){if(!this.morphNormals[s]){this.morphNormals[s]={},this.morphNormals[s].faceNormals=[],this.morphNormals[s].vertexNormals=[];for(var l=this.morphNormals[s].faceNormals,c=this.morphNormals[s].vertexNormals,u=0,h=this.faces.length;u<h;u++){var d=new A,p={a:new A,b:new A,c:new A};l.push(d),c.push(p)}}var f=this.morphNormals[s];o.vertices=this.morphTargets[s].vertices,o.computeFaceNormals(),o.computeVertexNormals();for(var m=0,g=this.faces.length;m<g;m++){var v=this.faces[m],y=f.vertexNormals[m];f.faceNormals[m].copy(v.normal),y.a.copy(v.vertexNormals[0]),y.b.copy(v.vertexNormals[1]),y.c.copy(v.vertexNormals[2])}}for(var b=0,_=this.faces.length;b<_;b++){var w=this.faces[b];w.normal=w.__originalFaceNormal,w.vertexNormals=w.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new E),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new j),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(void 0===n&&(n=0),t&&t.isGeometry){var i,r=this.vertices.length,o=this.vertices,s=t.vertices,a=this.faces,l=t.faces,c=this.colors,u=t.colors;void 0!==e&&(i=(new p).getNormalMatrix(e));for(var h=0,d=s.length;h<d;h++){var f=s[h].clone();void 0!==e&&f.applyMatrix4(e),o.push(f)}for(var m=0,g=u.length;m<g;m++)c.push(u[m].clone());for(var v=0,y=l.length;v<y;v++){var b=l[v],_=void 0,w=b.vertexNormals,A=b.vertexColors,x=new Gt(b.a+r,b.b+r,b.c+r);x.normal.copy(b.normal),void 0!==i&&x.normal.applyMatrix3(i).normalize();for(var C=0,E=w.length;C<E;C++)_=w[C].clone(),void 0!==i&&_.applyMatrix3(i).normalize(),x.vertexNormals.push(_);x.color.copy(b.color);for(var S=0,M=A.length;S<M;S++)x.vertexColors.push(A[S].clone());x.materialIndex=b.materialIndex+n,a.push(x)}for(var T=0,P=t.faceVertexUvs.length;T<P;T++){var k=t.faceVertexUvs[T];void 0===this.faceVertexUvs[T]&&(this.faceVertexUvs[T]=[]);for(var D=0,O=k.length;D<O;D++){for(var R=k[D],I=[],L=0,F=R.length;L<F;L++)I.push(R[L].clone());this.faceVertexUvs[T].push(I)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(t){void 0===t&&(t=4);for(var e={},n=[],i=[],r=Math.pow(10,t),o=0,s=this.vertices.length;o<s;o++){var a=this.vertices[o],l=Math.round(a.x*r)+"_"+Math.round(a.y*r)+"_"+Math.round(a.z*r);void 0===e[l]?(e[l]=o,n.push(this.vertices[o]),i[o]=n.length-1):i[o]=i[e[l]]}for(var c=[],u=0,h=this.faces.length;u<h;u++){var d=this.faces[u];d.a=i[d.a],d.b=i[d.b],d.c=i[d.c];for(var p=[d.a,d.b,d.c],f=0;f<3;f++)if(p[f]===p[(f+1)%3]){c.push(u);break}}for(var m=c.length-1;m>=0;m--){var g=c[m];this.faces.splice(g,1);for(var v=0,y=this.faceVertexUvs.length;v<y;v++)this.faceVertexUvs[v].splice(g,1)}var b=this.vertices.length-n.length;return this.vertices=n,b},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new A(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var i,r,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];o&&o.length===e&&(i=[]),s&&s.length===e&&(r=[]);for(var a=0;a<e;a++){var l=t[a]._id;i&&i.push(o[l]),r&&r.push(s[l])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var i=[],r=0;r<this.vertices.length;r++){var o=this.vertices[r];i.push(o.x,o.y,o.z)}for(var s=[],a=[],l={},c=[],u={},h=[],d={},p=0;p<this.faces.length;p++){var f=this.faces[p],m=void 0!==this.faceVertexUvs[0][p],g=f.normal.length()>0,v=f.vertexNormals.length>0,y=1!==f.color.r||1!==f.color.g||1!==f.color.b,b=f.vertexColors.length>0,_=0;if(_=C(_,0,0),_=C(_,1,!0),_=C(_,2,!1),_=C(_,3,m),_=C(_,4,g),_=C(_,5,v),_=C(_,6,y),_=C(_,7,b),s.push(_),s.push(f.a,f.b,f.c),s.push(f.materialIndex),m){var w=this.faceVertexUvs[0][p];s.push(M(w[0]),M(w[1]),M(w[2]))}if(g&&s.push(E(f.normal)),v){var A=f.vertexNormals;s.push(E(A[0]),E(A[1]),E(A[2]))}if(y&&s.push(S(f.color)),b){var x=f.vertexColors;s.push(S(x[0]),S(x[1]),S(x[2]))}}function C(t,e,n){return n?t|1<<e:t&~(1<<e)}function E(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==l[e]||(l[e]=a.length/3,a.push(t.x,t.y,t.z)),l[e]}function S(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==u[e]||(u[e]=c.length,c.push(t.getHex())),u[e]}function M(t){var e=t.x.toString()+t.y.toString();return void 0!==d[e]||(d[e]=h.length/2,h.push(t.x,t.y)),d[e]}return t.data={},t.data.vertices=i,t.data.normals=a,c.length>0&&(t.data.colors=c),h.length>0&&(t.data.uvs=[h]),t.data.faces=s,t},clone:function(){return(new xo).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;for(var e=t.vertices,n=0,i=e.length;n<i;n++)this.vertices.push(e[n].clone());for(var r=t.colors,o=0,s=r.length;o<s;o++)this.colors.push(r[o].clone());for(var a=t.faces,l=0,c=a.length;l<c;l++)this.faces.push(a[l].clone());for(var u=0,h=t.faceVertexUvs.length;u<h;u++){var d=t.faceVertexUvs[u];void 0===this.faceVertexUvs[u]&&(this.faceVertexUvs[u]=[]);for(var p=0,f=d.length;p<f;p++){for(var m=d[p],g=[],v=0,y=m.length;v<y;v++)g.push(m[v].clone());this.faceVertexUvs[u].push(g)}}for(var b=t.morphTargets,_=0,w=b.length;_<w;_++){var A={};if(A.name=b[_].name,void 0!==b[_].vertices){A.vertices=[];for(var x=0,C=b[_].vertices.length;x<C;x++)A.vertices.push(b[_].vertices[x].clone())}if(void 0!==b[_].normals){A.normals=[];for(var E=0,S=b[_].normals.length;E<S;E++)A.normals.push(b[_].normals[E].clone())}this.morphTargets.push(A)}for(var M=t.morphNormals,T=0,P=M.length;T<P;T++){var k={};if(void 0!==M[T].vertexNormals){k.vertexNormals=[];for(var D=0,O=M[T].vertexNormals.length;D<O;D++){var R=M[T].vertexNormals[D],I={};I.a=R.a.clone(),I.b=R.b.clone(),I.c=R.c.clone(),k.vertexNormals.push(I)}}if(void 0!==M[T].faceNormals){k.faceNormals=[];for(var L=0,F=M[T].faceNormals.length;L<F;L++)k.faceNormals.push(M[T].faceNormals[L].clone())}this.morphNormals.push(k)}for(var N=t.skinWeights,B=0,U=N.length;B<U;B++)this.skinWeights.push(N[B].clone());for(var V=t.skinIndices,j=0,z=V.length;j<z;j++)this.skinIndices.push(V[j].clone());for(var H=t.lineDistances,G=0,W=H.length;G<W;G++)this.lineDistances.push(H[G]);var q=t.boundingBox;null!==q&&(this.boundingBox=q.clone());var $=t.boundingSphere;return null!==$&&(this.boundingSphere=$.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Co=function(t){function e(e,n,i,r,o,s){var a;return(a=t.call(this)||this).type="BoxGeometry",a.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:o,depthSegments:s},a.fromBufferGeometry(new Ue(e,n,i,r,o,s)),a.mergeVertices(),a}return c(e,t),e}(xo),Eo=function(t){function e(e,n,i,r){var o;void 0===e&&(e=1),void 0===n&&(n=8),void 0===i&&(i=0),void 0===r&&(r=2*Math.PI),(o=t.call(this)||this).type="CircleBufferGeometry",o.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},n=Math.max(3,n);var s=[],a=[],l=[],c=[],u=new A,h=new d;a.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(var p=0,f=3;p<=n;p++,f+=3){var m=i+p/n*r;u.x=e*Math.cos(m),u.y=e*Math.sin(m),a.push(u.x,u.y,u.z),l.push(0,0,1),h.x=(a[f]/e+1)/2,h.y=(a[f+1]/e+1)/2,c.push(h.x,h.y)}for(var g=1;g<=n;g++)s.push(g,g+1,0);return o.setIndex(s),o.setAttribute("position",new oe(a,3)),o.setAttribute("normal",new oe(l,3)),o.setAttribute("uv",new oe(c,2)),o}return c(e,t),e}(ye),So=function(t){function e(e,n,i,r){var o;return(o=t.call(this)||this).type="CircleGeometry",o.parameters={radius:e,segments:n,thetaStart:i,thetaLength:r},o.fromBufferGeometry(new Eo(e,n,i,r)),o.mergeVertices(),o}return c(e,t),e}(xo),Mo=function(t){function e(e,n,i,r,o,s,a,l){var c;void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),void 0===r&&(r=8),void 0===o&&(o=1),void 0===s&&(s=!1),void 0===a&&(a=0),void 0===l&&(l=2*Math.PI),(c=t.call(this)||this).type="CylinderBufferGeometry",c.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};var h=u(c);r=Math.floor(r),o=Math.floor(o);var p=[],f=[],m=[],g=[],v=0,y=[],b=i/2,_=0;function w(t){for(var i=v,o=new d,s=new A,c=0,u=!0===t?e:n,y=!0===t?1:-1,w=1;w<=r;w++)f.push(0,b*y,0),m.push(0,y,0),g.push(.5,.5),v++;for(var x=v,C=0;C<=r;C++){var E=C/r*l+a,S=Math.cos(E),M=Math.sin(E);s.x=u*M,s.y=b*y,s.z=u*S,f.push(s.x,s.y,s.z),m.push(0,y,0),o.x=.5*S+.5,o.y=.5*M*y+.5,g.push(o.x,o.y),v++}for(var T=0;T<r;T++){var P=i+T,k=x+T;!0===t?p.push(k,k+1,P):p.push(k+1,k,P),c+=3}h.addGroup(_,c,!0===t?1:2),_+=c}return function(){for(var t=new A,s=new A,c=0,u=(n-e)/i,d=0;d<=o;d++){for(var w=[],x=d/o,C=x*(n-e)+e,E=0;E<=r;E++){var S=E/r,M=S*l+a,T=Math.sin(M),P=Math.cos(M);s.x=C*T,s.y=-x*i+b,s.z=C*P,f.push(s.x,s.y,s.z),t.set(T,u,P).normalize(),m.push(t.x,t.y,t.z),g.push(S,1-x),w.push(v++)}y.push(w)}for(var k=0;k<r;k++)for(var D=0;D<o;D++){var O=y[D+1][k],R=y[D+1][k+1],I=y[D][k+1];p.push(y[D][k],O,I),p.push(O,R,I),c+=6}h.addGroup(_,c,0),_+=c}(),!1===s&&(e>0&&w(!0),n>0&&w(!1)),c.setIndex(p),c.setAttribute("position",new oe(f,3)),c.setAttribute("normal",new oe(m,3)),c.setAttribute("uv",new oe(g,2)),c}return c(e,t),e}(ye),To=function(t){function e(e,n,i,r,o,s,a,l){var c;return(c=t.call(this)||this).type="CylinderGeometry",c.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l},c.fromBufferGeometry(new Mo(e,n,i,r,o,s,a,l)),c.mergeVertices(),c}return c(e,t),e}(xo),Po=function(t){function e(e,n,i,r,o,s,a){var l;return(l=t.call(this,0,e,n,i,r,o,s,a)||this).type="ConeGeometry",l.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a},l}return c(e,t),e}(To),ko=function(t){function e(e,n,i,r,o,s,a){var l;return void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=8),void 0===r&&(r=1),void 0===o&&(o=!1),void 0===s&&(s=0),void 0===a&&(a=2*Math.PI),(l=t.call(this,0,e,n,i,r,o,s,a)||this).type="ConeBufferGeometry",l.parameters={radius:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a},l}return c(e,t),e}(Mo),Do=function(t){function e(e,n,i,r){var o;void 0===i&&(i=1),void 0===r&&(r=0),(o=t.call(this)||this).type="PolyhedronBufferGeometry",o.parameters={vertices:e,indices:n,radius:i,detail:r};var s=[],a=[];function l(t,e,n,i){for(var r=i+1,o=[],s=0;s<=r;s++){o[s]=[];for(var a=t.clone().lerp(n,s/r),l=e.clone().lerp(n,s/r),u=r-s,h=0;h<=u;h++)o[s][h]=0===h&&s===r?a:a.clone().lerp(l,h/u)}for(var d=0;d<r;d++)for(var p=0;p<2*(r-d)-1;p++){var f=Math.floor(p/2);p%2==0?(c(o[d][f+1]),c(o[d+1][f]),c(o[d][f])):(c(o[d][f+1]),c(o[d+1][f+1]),c(o[d+1][f]))}}function c(t){s.push(t.x,t.y,t.z)}function u(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function h(t,e,n,i){i<0&&1===t.x&&(a[e]=t.x-1),0===n.x&&0===n.z&&(a[e]=i/2/Math.PI+.5)}function p(t){return Math.atan2(t.z,-t.x)}function f(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}return function(t){for(var e=new A,i=new A,r=new A,o=0;o<n.length;o+=3)u(n[o+0],e),u(n[o+1],i),u(n[o+2],r),l(e,i,r,t)}(r),function(t){for(var e=new A,n=0;n<s.length;n+=3)e.x=s[n+0],e.y=s[n+1],e.z=s[n+2],e.normalize().multiplyScalar(t),s[n+0]=e.x,s[n+1]=e.y,s[n+2]=e.z}(i),function(){for(var t=new A,e=0;e<s.length;e+=3){t.x=s[e+0],t.y=s[e+1],t.z=s[e+2];var n=p(t)/2/Math.PI+.5,i=f(t)/Math.PI+.5;a.push(n,1-i)}(function(){for(var t=new A,e=new A,n=new A,i=new A,r=new d,o=new d,l=new d,c=0,u=0;c<s.length;c+=9,u+=6){t.set(s[c+0],s[c+1],s[c+2]),e.set(s[c+3],s[c+4],s[c+5]),n.set(s[c+6],s[c+7],s[c+8]),r.set(a[u+0],a[u+1]),o.set(a[u+2],a[u+3]),l.set(a[u+4],a[u+5]),i.copy(t).add(e).add(n).divideScalar(3);var f=p(i);h(r,u+0,t,f),h(o,u+2,e,f),h(l,u+4,n,f)}})(),function(){for(var t=0;t<a.length;t+=6){var e=a[t+0],n=a[t+2],i=a[t+4],r=Math.max(e,n,i),o=Math.min(e,n,i);r>.9&&o<.1&&(e<.2&&(a[t+0]+=1),n<.2&&(a[t+2]+=1),i<.2&&(a[t+4]+=1))}}()}(),o.setAttribute("position",new oe(s,3)),o.setAttribute("normal",new oe(s.slice(),3)),o.setAttribute("uv",new oe(a,2)),0===r?o.computeVertexNormals():o.normalizeNormals(),o}return c(e,t),e}(ye),Oo=function(t){function e(e,n){var i;void 0===e&&(e=1),void 0===n&&(n=0);var r=(1+Math.sqrt(5))/2,o=1/r;return(i=t.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-r,0,-o,r,0,o,-r,0,o,r,-o,-r,0,-o,r,0,o,-r,0,o,r,0,-r,0,-o,r,0,-o,-r,0,o,r,0,o],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,n)||this).type="DodecahedronBufferGeometry",i.parameters={radius:e,detail:n},i}return c(e,t),e}(Do),Ro=function(t){function e(e,n){var i;return(i=t.call(this)||this).type="DodecahedronGeometry",i.parameters={radius:e,detail:n},i.fromBufferGeometry(new Oo(e,n)),i.mergeVertices(),i}return c(e,t),e}(xo),Io=new A,Lo=new A,Fo=new A,No=new Ft,Bo=function(t){function e(e,n){var i;(i=t.call(this)||this).type="EdgesGeometry",i.parameters={thresholdAngle:n},n=void 0!==n?n:1,e.isGeometry&&(e=(new ye).fromGeometry(e));for(var r=Math.pow(10,4),o=Math.cos(s.DEG2RAD*n),a=e.getIndex(),l=e.getAttribute("position"),c=a?a.count:l.count,u=[0,0,0],h=["a","b","c"],d=new Array(3),p={},f=[],m=0;m<c;m+=3){a?(u[0]=a.getX(m),u[1]=a.getX(m+1),u[2]=a.getX(m+2)):(u[0]=m,u[1]=m+1,u[2]=m+2);var g=No.a,v=No.b,y=No.c;if(g.fromBufferAttribute(l,u[0]),v.fromBufferAttribute(l,u[1]),y.fromBufferAttribute(l,u[2]),No.getNormal(Fo),d[0]=Math.round(g.x*r)+","+Math.round(g.y*r)+","+Math.round(g.z*r),d[1]=Math.round(v.x*r)+","+Math.round(v.y*r)+","+Math.round(v.z*r),d[2]=Math.round(y.x*r)+","+Math.round(y.y*r)+","+Math.round(y.z*r),d[0]!==d[1]&&d[1]!==d[2]&&d[2]!==d[0])for(var b=0;b<3;b++){var _=(b+1)%3,w=d[b],A=d[_],x=No[h[b]],C=No[h[_]],E=w+"_"+A,S=A+"_"+w;S in p&&p[S]?(Fo.dot(p[S].normal)<=o&&(f.push(x.x,x.y,x.z),f.push(C.x,C.y,C.z)),p[S]=null):E in p||(p[E]={index0:u[b],index1:u[_],normal:Fo.clone()})}}for(var M in p)if(p[M]){var T=p[M],P=T.index1;Io.fromBufferAttribute(l,T.index0),Lo.fromBufferAttribute(l,P),f.push(Io.x,Io.y,Io.z),f.push(Lo.x,Lo.y,Lo.z)}return i.setAttribute("position",new oe(f,3)),i}return c(e,t),e}(ye);function Uo(t,e,n,i,r){var o,s;if(r===function(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}(t,e,n,i)>0)for(o=e;o<n;o+=i)s=ss(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=ss(o,t[o],t[o+1],s);return s&&ts(s,s.next)&&(as(s),s=s.next),s}function Vo(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!ts(i,i.next)&&0!==Jo(i.prev,i,i.next))i=i.next;else{if(as(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function jo(t,e,n,i,r,o,s){if(t){!s&&o&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=Qo(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,l,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ);e++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(s>1)}(r)}(t,i,r,o);for(var a,l,c=t;t.prev!==t.next;)if(a=t.prev,l=t.next,o?Ho(t,i,r,o):zo(t))e.push(a.i/n),e.push(t.i/n),e.push(l.i/n),as(t),t=l.next,c=l.next;else if((t=l)===c){s?1===s?jo(t=Go(Vo(t),e,n),e,n,i,r,o,2):2===s&&Wo(t,e,n,i,r,o):jo(Vo(t),e,n,i,r,o,1);break}}}function zo(t){var e=t.prev,n=t,i=t.next;if(Jo(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(Ko(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Jo(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Ho(t,e,n,i){var r=t.prev,o=t,s=t.next;if(Jo(r,o,s)>=0)return!1;for(var a=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,l=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,c=Qo(r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,e,n,i),u=Qo(a,l,e,n,i),h=t.prevZ,d=t.nextZ;h&&h.z>=c&&d&&d.z<=u;){if(h!==t.prev&&h!==t.next&&Ko(r.x,r.y,o.x,o.y,s.x,s.y,h.x,h.y)&&Jo(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==t.prev&&d!==t.next&&Ko(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Jo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=c;){if(h!==t.prev&&h!==t.next&&Ko(r.x,r.y,o.x,o.y,s.x,s.y,h.x,h.y)&&Jo(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=u;){if(d!==t.prev&&d!==t.next&&Ko(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Jo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Go(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!ts(r,o)&&es(r,i,i.next,o)&&rs(r,o)&&rs(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),as(i),as(i.next),i=t=o),i=i.next}while(i!==t);return Vo(i)}function Wo(t,e,n,i,r,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&Zo(s,a)){var l=os(s,a);return s=Vo(s,s.next),l=Vo(l,l.next),jo(s,e,n,i,r,o),void jo(l,e,n,i,r,o)}a=a.next}s=s.next}while(s!==t)}function qo(t,e){return t.x-e.x}function $o(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s){if(s=a,a===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===s)return n;var l,c=n,u=n.x,h=n.y,d=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&Ko(o<h?r:s,o,u,h,o<h?s:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),rs(i,t)&&(l<d||l===d&&(i.x>n.x||i.x===n.x&&Yo(n,i)))&&(n=i,d=l)),i=i.next}while(i!==c);return n}(t,e)){var n=os(e,t);Vo(e,e.next),Vo(n,n.next)}}function Yo(t,e){return Jo(t.prev,t,e.prev)<0&&Jo(e.next,t,t.next)<0}function Qo(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Xo(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Ko(t,e,n,i,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(i-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function Zo(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&es(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(rs(t,e)&&rs(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(Jo(t.prev,t,e.prev)||Jo(t,e.prev,e))||ts(t,e)&&Jo(t.prev,t,t.next)>0&&Jo(e.prev,e,e.next)>0)}function Jo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ts(t,e){return t.x===e.x&&t.y===e.y}function es(t,e,n,i){var r=is(Jo(t,e,n)),o=is(Jo(t,e,i)),s=is(Jo(n,i,t)),a=is(Jo(n,i,e));return r!==o&&s!==a||!(0!==r||!ns(t,n,e))||!(0!==o||!ns(t,i,e))||!(0!==s||!ns(n,t,i))||!(0!==a||!ns(n,e,i))}function ns(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function is(t){return t>0?1:t<0?-1:0}function rs(t,e){return Jo(t.prev,t,t.next)<0?Jo(t,e,t.next)>=0&&Jo(t,t.prev,e)>=0:Jo(t,e,t.prev)<0||Jo(t,t.next,e)<0}function os(t,e){var n=new ls(t.i,t.x,t.y),i=new ls(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function ss(t,e,n,i){var r=new ls(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function as(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ls(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var cs={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return cs.area(t)<0},triangulateShape:function(t,e){var n=[],i=[],r=[];us(t),hs(n,t);var o=t.length;e.forEach(us);for(var s=0;s<e.length;s++)i.push(o),o+=e[s].length,hs(n,e[s]);for(var a=function(t,e,n){n=n||2;var i,r,o,s,a,l,c,u=e&&e.length,h=u?e[0]*n:t.length,d=Uo(t,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(u&&(d=function(t,e,n,i){var r,o,s,a=[];for(r=0,o=e.length;r<o;r++)(s=Uo(t,e[r]*i,r<o-1?e[r+1]*i:t.length,i,!1))===s.next&&(s.steiner=!0),a.push(Xo(s));for(a.sort(qo),r=0;r<a.length;r++)$o(a[r],n),n=Vo(n,n.next);return n}(t,e,d,n)),t.length>80*n){i=o=t[0],r=s=t[1];for(var f=n;f<h;f+=n)(a=t[f])<i&&(i=a),(l=t[f+1])<r&&(r=l),a>o&&(o=a),l>s&&(s=l);c=0!==(c=Math.max(o-i,s-r))?1/c:0}return jo(d,p,n,i,r,c),p}(n,i),l=0;l<a.length;l+=3)r.push(a.slice(l,l+3));return r}};function us(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function hs(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}var ds=function(t){function e(e,n){var i;(i=t.call(this)||this).type="ExtrudeBufferGeometry",i.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];for(var r=u(i),o=[],s=[],a=0,l=e.length;a<l;a++)c(e[a]);function c(t){var e=[],i=void 0!==n.curveSegments?n.curveSegments:12,a=void 0!==n.steps?n.steps:1,l=void 0!==n.depth?n.depth:100,c=void 0===n.bevelEnabled||n.bevelEnabled,u=void 0!==n.bevelThickness?n.bevelThickness:6,h=void 0!==n.bevelSize?n.bevelSize:u-2,p=void 0!==n.bevelOffset?n.bevelOffset:0,f=void 0!==n.bevelSegments?n.bevelSegments:3,m=n.extrudePath,g=void 0!==n.UVGenerator?n.UVGenerator:ps;void 0!==n.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=n.amount);var v,y,b,_,w,x=!1;m&&(v=m.getSpacedPoints(a),x=!0,c=!1,y=m.computeFrenetFrames(a,!1),b=new A,_=new A,w=new A),c||(f=0,u=0,h=0,p=0);var C=t.extractPoints(i),E=C.shape,S=C.holes;if(!cs.isClockWise(E)){E=E.reverse();for(var M=0,T=S.length;M<T;M++){var P=S[M];cs.isClockWise(P)&&(S[M]=P.reverse())}}for(var k=cs.triangulateShape(E,S),D=E,O=0,R=S.length;O<R;O++)E=E.concat(S[O]);function I(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var L=E.length,F=k.length;function N(t,e,n){var i,r,o,s=t.x-e.x,a=t.y-e.y,l=n.x-t.x,c=n.y-t.y,u=s*s+a*a;if(Math.abs(s*c-a*l)>Number.EPSILON){var h=Math.sqrt(u),p=Math.sqrt(l*l+c*c),f=e.x-a/h,m=e.y+s/h,g=((n.x-c/p-f)*c-(n.y+l/p-m)*l)/(s*c-a*l),v=(i=f+s*g-t.x)*i+(r=m+a*g-t.y)*r;if(v<=2)return new d(i,r);o=Math.sqrt(v/2)}else{var y=!1;s>Number.EPSILON?l>Number.EPSILON&&(y=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(a)===Math.sign(c)&&(y=!0),y?(i=-a,r=s,o=Math.sqrt(u)):(i=s,r=a,o=Math.sqrt(u/2))}return new d(i/o,r/o)}for(var B=[],U=0,V=D.length,j=V-1,z=U+1;U<V;U++,j++,z++)j===V&&(j=0),z===V&&(z=0),B[U]=N(D[U],D[j],D[z]);for(var H,G=[],W=B.concat(),q=0,$=S.length;q<$;q++){var Y=S[q];H=[];for(var Q=0,X=Y.length,K=X-1,Z=Q+1;Q<X;Q++,K++,Z++)K===X&&(K=0),Z===X&&(Z=0),H[Q]=N(Y[Q],Y[K],Y[Z]);G.push(H),W=W.concat(H)}for(var J=0;J<f;J++){for(var tt=J/f,et=u*Math.cos(tt*Math.PI/2),nt=h*Math.sin(tt*Math.PI/2)+p,it=0,rt=D.length;it<rt;it++){var ot=I(D[it],B[it],nt);Ot(ot.x,ot.y,-et)}for(var st=0,at=S.length;st<at;st++){var lt=S[st];H=G[st];for(var ct=0,ut=lt.length;ct<ut;ct++){var ht=I(lt[ct],H[ct],nt);Ot(ht.x,ht.y,-et)}}}for(var dt=h+p,pt=0;pt<L;pt++){var ft=c?I(E[pt],W[pt],dt):E[pt];x?(_.copy(y.normals[0]).multiplyScalar(ft.x),b.copy(y.binormals[0]).multiplyScalar(ft.y),w.copy(v[0]).add(_).add(b),Ot(w.x,w.y,w.z)):Ot(ft.x,ft.y,0)}for(var mt=1;mt<=a;mt++)for(var gt=0;gt<L;gt++){var vt=c?I(E[gt],W[gt],dt):E[gt];x?(_.copy(y.normals[mt]).multiplyScalar(vt.x),b.copy(y.binormals[mt]).multiplyScalar(vt.y),w.copy(v[mt]).add(_).add(b),Ot(w.x,w.y,w.z)):Ot(vt.x,vt.y,l/a*mt)}for(var yt=f-1;yt>=0;yt--){for(var bt=yt/f,_t=u*Math.cos(bt*Math.PI/2),wt=h*Math.sin(bt*Math.PI/2)+p,At=0,xt=D.length;At<xt;At++){var Ct=I(D[At],B[At],wt);Ot(Ct.x,Ct.y,l+_t)}for(var Et=0,St=S.length;Et<St;Et++){var Mt=S[Et];H=G[Et];for(var Tt=0,Pt=Mt.length;Tt<Pt;Tt++){var kt=I(Mt[Tt],H[Tt],wt);x?Ot(kt.x,kt.y+v[a-1].y,v[a-1].x+_t):Ot(kt.x,kt.y,l+_t)}}}function Dt(t,e){for(var n=t.length;--n>=0;){var i=n,r=n-1;r<0&&(r=t.length-1);for(var o=0,s=a+2*f;o<s;o++){var l=L*o,c=L*(o+1);It(e+i+l,e+r+l,e+r+c,e+i+c)}}}function Ot(t,n,i){e.push(t),e.push(n),e.push(i)}function Rt(t,e,n){Lt(t),Lt(e),Lt(n);var i=o.length/3,s=g.generateTopUV(r,o,i-3,i-2,i-1);Ft(s[0]),Ft(s[1]),Ft(s[2])}function It(t,e,n,i){Lt(t),Lt(e),Lt(i),Lt(e),Lt(n),Lt(i);var s=o.length/3,a=g.generateSideWallUV(r,o,s-6,s-3,s-2,s-1);Ft(a[0]),Ft(a[1]),Ft(a[3]),Ft(a[1]),Ft(a[2]),Ft(a[3])}function Lt(t){o.push(e[3*t+0]),o.push(e[3*t+1]),o.push(e[3*t+2])}function Ft(t){s.push(t.x),s.push(t.y)}!function(){var t=o.length/3;if(c){for(var e=0,n=L*e,i=0;i<F;i++){var s=k[i];Rt(s[2]+n,s[1]+n,s[0]+n)}n=L*(e=a+2*f);for(var l=0;l<F;l++){var u=k[l];Rt(u[0]+n,u[1]+n,u[2]+n)}}else{for(var h=0;h<F;h++){var d=k[h];Rt(d[2],d[1],d[0])}for(var p=0;p<F;p++){var m=k[p];Rt(m[0]+L*a,m[1]+L*a,m[2]+L*a)}}r.addGroup(t,o.length/3-t,0)}(),function(){var t=o.length/3,e=0;Dt(D,e),e+=D.length;for(var n=0,i=S.length;n<i;n++){var s=S[n];Dt(s,e),e+=s.length}r.addGroup(t,o.length/3-t,1)}()}return i.setAttribute("position",new oe(o,3)),i.setAttribute("uv",new oe(s,2)),i.computeVertexNormals(),i}return c(e,t),e.prototype.toJSON=function(){var t=ye.prototype.toJSON.call(this);return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++)n.shapes.push(t[i].uuid);else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,t)},e}(ye),ps={generateTopUV:function(t,e,n,i,r){var o=e[3*i],s=e[3*i+1],a=e[3*r],l=e[3*r+1];return[new d(e[3*n],e[3*n+1]),new d(o,s),new d(a,l)]},generateSideWallUV:function(t,e,n,i,r,o){var s=e[3*n],a=e[3*n+1],l=e[3*n+2],c=e[3*i],u=e[3*i+1],h=e[3*i+2],p=e[3*r],f=e[3*r+1],m=e[3*r+2],g=e[3*o],v=e[3*o+1],y=e[3*o+2];return Math.abs(a-u)<.01?[new d(s,1-l),new d(c,1-h),new d(p,1-m),new d(g,1-y)]:[new d(a,1-l),new d(u,1-h),new d(f,1-m),new d(v,1-y)]}},fs=function(t){function e(e,n){var i;return(i=t.call(this)||this).type="ExtrudeGeometry",i.parameters={shapes:e,options:n},i.fromBufferGeometry(new ds(e,n)),i.mergeVertices(),i}return c(e,t),e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++)n.shapes.push(t[i].uuid);else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)},e}(xo),ms=function(t){function e(e,n){var i;void 0===e&&(e=1),void 0===n&&(n=0);var r=(1+Math.sqrt(5))/2;return(i=t.call(this,[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,n)||this).type="IcosahedronBufferGeometry",i.parameters={radius:e,detail:n},i}return c(e,t),e}(Do),gs=function(t){function e(e,n){var i;return(i=t.call(this)||this).type="IcosahedronGeometry",i.parameters={radius:e,detail:n},i.fromBufferGeometry(new ms(e,n)),i.mergeVertices(),i}return c(e,t),e}(xo),vs=function(t){function e(e,n,i,r){var o;void 0===n&&(n=12),void 0===i&&(i=0),void 0===r&&(r=2*Math.PI),(o=t.call(this)||this).type="LatheBufferGeometry",o.parameters={points:e,segments:n,phiStart:i,phiLength:r},n=Math.floor(n),r=s.clamp(r,0,2*Math.PI);for(var a=[],l=[],c=[],u=1/n,h=new A,p=new d,f=0;f<=n;f++)for(var m=i+f*u*r,g=Math.sin(m),v=Math.cos(m),y=0;y<=e.length-1;y++)h.x=e[y].x*g,h.y=e[y].y,h.z=e[y].x*v,l.push(h.x,h.y,h.z),p.x=f/n,p.y=y/(e.length-1),c.push(p.x,p.y);for(var b=0;b<n;b++)for(var _=0;_<e.length-1;_++){var w=_+b*e.length,x=w+e.length,C=w+e.length+1,E=w+1;a.push(w,x,E),a.push(x,C,E)}if(o.setIndex(a),o.setAttribute("position",new oe(l,3)),o.setAttribute("uv",new oe(c,2)),o.computeVertexNormals(),r===2*Math.PI)for(var S=o.attributes.normal.array,M=new A,T=new A,P=new A,k=n*e.length*3,D=0,O=0;D<e.length;D++,O+=3)M.x=S[O+0],M.y=S[O+1],M.z=S[O+2],T.x=S[k+O+0],T.y=S[k+O+1],T.z=S[k+O+2],P.addVectors(M,T).normalize(),S[O+0]=S[k+O+0]=P.x,S[O+1]=S[k+O+1]=P.y,S[O+2]=S[k+O+2]=P.z;return o}return c(e,t),e}(ye),ys=function(t){function e(e,n,i,r){var o;return(o=t.call(this)||this).type="LatheGeometry",o.parameters={points:e,segments:n,phiStart:i,phiLength:r},o.fromBufferGeometry(new vs(e,n,i,r)),o.mergeVertices(),o}return c(e,t),e}(xo),bs=function(t){function e(e,n){var i;return void 0===e&&(e=1),void 0===n&&(n=0),(i=t.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,n)||this).type="OctahedronBufferGeometry",i.parameters={radius:e,detail:n},i}return c(e,t),e}(Do),_s=function(t){function e(e,n){var i;return(i=t.call(this)||this).type="OctahedronGeometry",i.parameters={radius:e,detail:n},i.fromBufferGeometry(new bs(e,n)),i.mergeVertices(),i}return c(e,t),e}(xo);function ws(t,e,n){ye.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i=[],r=[],o=[],s=[],a=1e-5,l=new A,c=new A,u=new A,h=new A,d=new A;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var p=e+1,f=0;f<=n;f++)for(var m=f/n,g=0;g<=e;g++){var v=g/e;t(v,m,c),r.push(c.x,c.y,c.z),v-a>=0?(t(v-a,m,u),h.subVectors(c,u)):(t(v+a,m,u),h.subVectors(u,c)),m-a>=0?(t(v,m-a,u),d.subVectors(c,u)):(t(v,m+a,u),d.subVectors(u,c)),l.crossVectors(h,d).normalize(),o.push(l.x,l.y,l.z),s.push(v,m)}for(var y=0;y<n;y++)for(var b=0;b<e;b++){var _=y*p+b+1,w=(y+1)*p+b+1,x=(y+1)*p+b;i.push(y*p+b,_,x),i.push(_,w,x)}this.setIndex(i),this.setAttribute("position",new oe(r,3)),this.setAttribute("normal",new oe(o,3)),this.setAttribute("uv",new oe(s,2))}function As(t,e,n){xo.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new ws(t,e,n)),this.mergeVertices()}(ws.prototype=Object.create(ye.prototype)).constructor=ws,(As.prototype=Object.create(xo.prototype)).constructor=As;var xs=function(t){function e(e,n,i,r){var o;return(o=t.call(this)||this).type="PlaneGeometry",o.parameters={width:e,height:n,widthSegments:i,heightSegments:r},o.fromBufferGeometry(new en(e,n,i,r)),o.mergeVertices(),o}return c(e,t),e}(xo),Cs=function(t){function e(e,n,i,r){var o;return(o=t.call(this)||this).type="PolyhedronGeometry",o.parameters={vertices:e,indices:n,radius:i,detail:r},o.fromBufferGeometry(new Do(e,n,i,r)),o.mergeVertices(),o}return c(e,t),e}(xo),Es=function(t){function e(e,n,i,r,o,s){var a;void 0===e&&(e=.5),void 0===n&&(n=1),void 0===i&&(i=8),void 0===r&&(r=1),void 0===o&&(o=0),void 0===s&&(s=2*Math.PI),(a=t.call(this)||this).type="RingBufferGeometry",a.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:o,thetaLength:s},i=Math.max(3,i);for(var l=[],c=[],u=[],h=[],p=e,f=(n-e)/(r=Math.max(1,r)),m=new A,g=new d,v=0;v<=r;v++){for(var y=0;y<=i;y++){var b=o+y/i*s;m.x=p*Math.cos(b),m.y=p*Math.sin(b),c.push(m.x,m.y,m.z),u.push(0,0,1),g.x=(m.x/n+1)/2,g.y=(m.y/n+1)/2,h.push(g.x,g.y)}p+=f}for(var _=0;_<r;_++)for(var w=_*(i+1),x=0;x<i;x++){var C=x+w,E=C+i+1,S=C+i+2,M=C+1;l.push(C,E,M),l.push(E,S,M)}return a.setIndex(l),a.setAttribute("position",new oe(c,3)),a.setAttribute("normal",new oe(u,3)),a.setAttribute("uv",new oe(h,2)),a}return c(e,t),e}(ye),Ss=function(t){function e(e,n,i,r,o,s){var a;return(a=t.call(this)||this).type="RingGeometry",a.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:r,thetaStart:o,thetaLength:s},a.fromBufferGeometry(new Es(e,n,i,r,o,s)),a.mergeVertices(),a}return c(e,t),e}(xo),Ms=function(t){function e(e,n){var i;void 0===n&&(n=12),(i=t.call(this)||this).type="ShapeBufferGeometry",i.parameters={shapes:e,curveSegments:n};var r=[],o=[],s=[],a=[],l=0,c=0;if(!1===Array.isArray(e))h(e);else for(var u=0;u<e.length;u++)h(e[u]),i.addGroup(l,c,u),l+=c,c=0;function h(t){var e=o.length/3,i=t.extractPoints(n),l=i.shape,u=i.holes;!1===cs.isClockWise(l)&&(l=l.reverse());for(var h=0,d=u.length;h<d;h++){var p=u[h];!0===cs.isClockWise(p)&&(u[h]=p.reverse())}for(var f=cs.triangulateShape(l,u),m=0,g=u.length;m<g;m++)l=l.concat(u[m]);for(var v=0,y=l.length;v<y;v++){var b=l[v];o.push(b.x,b.y,0),s.push(0,0,1),a.push(b.x,b.y)}for(var _=0,w=f.length;_<w;_++){var A=f[_];r.push(A[0]+e,A[1]+e,A[2]+e),c+=3}}return i.setIndex(r),i.setAttribute("position",new oe(o,3)),i.setAttribute("normal",new oe(s,3)),i.setAttribute("uv",new oe(a,2)),i}return c(e,t),e.prototype.toJSON=function(){var t=ye.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++)e.shapes.push(t[n].uuid);else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)},e}(ye),Ts=function(t){function e(e,n){var i;return(i=t.call(this)||this).type="ShapeGeometry","object"==typeof n&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),n=n.curveSegments),i.parameters={shapes:e,curveSegments:n},i.fromBufferGeometry(new Ms(e,n)),i.mergeVertices(),i}return c(e,t),e.prototype.toJSON=function(){var t=xo.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++)e.shapes.push(t[n].uuid);else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)},e}(xo),Ps=function(t){function e(e,n,i,r,o,s,a){var l;void 0===e&&(e=1),void 0===n&&(n=8),void 0===i&&(i=6),void 0===r&&(r=0),void 0===o&&(o=2*Math.PI),void 0===s&&(s=0),void 0===a&&(a=Math.PI),(l=t.call(this)||this).type="SphereBufferGeometry",l.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));for(var c=Math.min(s+a,Math.PI),u=0,h=[],d=new A,p=new A,f=[],m=[],g=[],v=[],y=0;y<=i;y++){var b=[],_=y/i,w=0;0==y&&0==s?w=.5/n:y==i&&c==Math.PI&&(w=-.5/n);for(var x=0;x<=n;x++){var C=x/n;d.x=-e*Math.cos(r+C*o)*Math.sin(s+_*a),d.y=e*Math.cos(s+_*a),d.z=e*Math.sin(r+C*o)*Math.sin(s+_*a),m.push(d.x,d.y,d.z),p.copy(d).normalize(),g.push(p.x,p.y,p.z),v.push(C+w,1-_),b.push(u++)}h.push(b)}for(var E=0;E<i;E++)for(var S=0;S<n;S++){var M=h[E][S],T=h[E+1][S],P=h[E+1][S+1];(0!==E||s>0)&&f.push(h[E][S+1],M,P),(E!==i-1||c<Math.PI)&&f.push(M,T,P)}return l.setIndex(f),l.setAttribute("position",new oe(m,3)),l.setAttribute("normal",new oe(g,3)),l.setAttribute("uv",new oe(v,2)),l}return c(e,t),e}(ye),ks=function(t){function e(e,n,i,r,o,s,a){var l;return(l=t.call(this)||this).type="SphereGeometry",l.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},l.fromBufferGeometry(new Ps(e,n,i,r,o,s,a)),l.mergeVertices(),l}return c(e,t),e}(xo),Ds=function(t){function e(e,n){var i;return void 0===e&&(e=1),void 0===n&&(n=0),(i=t.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,n)||this).type="TetrahedronBufferGeometry",i.parameters={radius:e,detail:n},i}return c(e,t),e}(Do),Os=function(t){function e(e,n){var i;return(i=t.call(this)||this).type="TetrahedronGeometry",i.parameters={radius:e,detail:n},i.fromBufferGeometry(new Ds(e,n)),i.mergeVertices(),i}return c(e,t),e}(xo),Rs=function(t){function e(e,n){var i;void 0===n&&(n={});var r=n.font;if(!r||!r.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ye||u(i);var o=r.generateShapes(e,n.size);return n.depth=void 0!==n.height?n.height:50,void 0===n.bevelThickness&&(n.bevelThickness=10),void 0===n.bevelSize&&(n.bevelSize=8),void 0===n.bevelEnabled&&(n.bevelEnabled=!1),(i=t.call(this,o,n)||this).type="TextBufferGeometry",i}return c(e,t),e}(ds),Is=function(t){function e(e,n){var i;return(i=t.call(this)||this).type="TextGeometry",i.parameters={text:e,parameters:n},i.fromBufferGeometry(new Rs(e,n)),i.mergeVertices(),i}return c(e,t),e}(xo),Ls=function(t){function e(e,n,i,r,o){var s;void 0===e&&(e=1),void 0===n&&(n=.4),void 0===i&&(i=8),void 0===r&&(r=6),void 0===o&&(o=2*Math.PI),(s=t.call(this)||this).type="TorusBufferGeometry",s.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:o},i=Math.floor(i),r=Math.floor(r);for(var a=[],l=[],c=[],u=[],h=new A,d=new A,p=new A,f=0;f<=i;f++)for(var m=0;m<=r;m++){var g=m/r*o,v=f/i*Math.PI*2;d.x=(e+n*Math.cos(v))*Math.cos(g),d.y=(e+n*Math.cos(v))*Math.sin(g),d.z=n*Math.sin(v),l.push(d.x,d.y,d.z),h.x=e*Math.cos(g),h.y=e*Math.sin(g),p.subVectors(d,h).normalize(),c.push(p.x,p.y,p.z),u.push(m/r),u.push(f/i)}for(var y=1;y<=i;y++)for(var b=1;b<=r;b++){var _=(r+1)*(y-1)+b-1,w=(r+1)*(y-1)+b,x=(r+1)*y+b;a.push((r+1)*y+b-1,_,x),a.push(_,w,x)}return s.setIndex(a),s.setAttribute("position",new oe(l,3)),s.setAttribute("normal",new oe(c,3)),s.setAttribute("uv",new oe(u,2)),s}return c(e,t),e}(ye),Fs=function(t){function e(e,n,i,r,o){var s;return(s=t.call(this)||this).type="TorusGeometry",s.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:r,arc:o},s.fromBufferGeometry(new Ls(e,n,i,r,o)),s.mergeVertices(),s}return c(e,t),e}(xo),Ns=function(t){function e(e,n,i,r,o,s){var a;void 0===e&&(e=1),void 0===n&&(n=.4),void 0===i&&(i=64),void 0===r&&(r=8),void 0===o&&(o=2),void 0===s&&(s=3),(a=t.call(this)||this).type="TorusKnotBufferGeometry",a.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:o,q:s},i=Math.floor(i),r=Math.floor(r);for(var l=[],c=[],u=[],h=[],d=new A,p=new A,f=new A,m=new A,g=new A,v=new A,y=new A,b=0;b<=i;++b){var _=b/i*o*Math.PI*2;D(_,o,s,e,f),D(_+.01,o,s,e,m),v.subVectors(m,f),y.addVectors(m,f),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize();for(var w=0;w<=r;++w){var x=w/r*Math.PI*2,C=-n*Math.cos(x),E=n*Math.sin(x);d.x=f.x+(C*y.x+E*g.x),d.y=f.y+(C*y.y+E*g.y),d.z=f.z+(C*y.z+E*g.z),c.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),u.push(p.x,p.y,p.z),h.push(b/i),h.push(w/r)}}for(var S=1;S<=i;S++)for(var M=1;M<=r;M++){var T=(r+1)*S+(M-1),P=(r+1)*S+M,k=(r+1)*(S-1)+M;l.push((r+1)*(S-1)+(M-1),T,k),l.push(T,P,k)}function D(t,e,n,i,r){var o=Math.cos(t),s=Math.sin(t),a=n/e*t,l=Math.cos(a);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*s*.5,r.z=i*Math.sin(a)*.5}return a.setIndex(l),a.setAttribute("position",new oe(c,3)),a.setAttribute("normal",new oe(u,3)),a.setAttribute("uv",new oe(h,2)),a}return c(e,t),e}(ye),Bs=function(t){function e(e,n,i,r,o,s,a){var l;return(l=t.call(this)||this).type="TorusKnotGeometry",l.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:r,p:o,q:s},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),l.fromBufferGeometry(new Ns(e,n,i,r,o,s)),l.mergeVertices(),l}return c(e,t),e}(xo),Us=function(t){function e(e,n,i,r,o){var s;void 0===n&&(n=64),void 0===i&&(i=1),void 0===r&&(r=8),void 0===o&&(o=!1),(s=t.call(this)||this).type="TubeBufferGeometry",s.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:o};var a=e.computeFrenetFrames(n,o);s.tangents=a.tangents,s.normals=a.normals,s.binormals=a.binormals;var l=new A,c=new A,u=new d,h=new A,p=[],f=[],m=[],g=[];function v(t){h=e.getPointAt(t/n,h);for(var o=a.normals[t],s=a.binormals[t],u=0;u<=r;u++){var d=u/r*Math.PI*2,m=Math.sin(d),g=-Math.cos(d);c.x=g*o.x+m*s.x,c.y=g*o.y+m*s.y,c.z=g*o.z+m*s.z,c.normalize(),f.push(c.x,c.y,c.z),l.x=h.x+i*c.x,l.y=h.y+i*c.y,l.z=h.z+i*c.z,p.push(l.x,l.y,l.z)}}return function(){for(var t=0;t<n;t++)v(t);v(!1===o?n:0),function(){for(var t=0;t<=n;t++)for(var e=0;e<=r;e++)u.x=t/n,u.y=e/r,m.push(u.x,u.y)}(),function(){for(var t=1;t<=n;t++)for(var e=1;e<=r;e++){var i=(r+1)*t+(e-1),o=(r+1)*t+e,s=(r+1)*(t-1)+e;g.push((r+1)*(t-1)+(e-1),i,s),g.push(i,o,s)}}()}(),s.setIndex(g),s.setAttribute("position",new oe(p,3)),s.setAttribute("normal",new oe(f,3)),s.setAttribute("uv",new oe(m,2)),s}return c(e,t),e.prototype.toJSON=function(){var t=ye.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},e}(ye),Vs=function(t){function e(e,n,i,r,o,s){var a;(a=t.call(this)||this).type="TubeGeometry",a.parameters={path:e,tubularSegments:n,radius:i,radialSegments:r,closed:o},void 0!==s&&console.warn("THREE.TubeGeometry: taper has been removed.");var l=new Us(e,n,i,r,o);return a.tangents=l.tangents,a.normals=l.normals,a.binormals=l.binormals,a.fromBufferGeometry(l),a.mergeVertices(),a}return c(e,t),e}(xo),js=function(t){function e(e){var n;(n=t.call(this)||this).type="WireframeGeometry";var i=[],r=[0,0],o={},s=["a","b","c"];if(e&&e.isGeometry){for(var a=e.faces,l=0,c=a.length;l<c;l++)for(var u=a[l],h=0;h<3;h++){var d=u[s[h]],p=u[s[(h+1)%3]];r[0]=Math.min(d,p),r[1]=Math.max(d,p);var f=r[0]+","+r[1];void 0===o[f]&&(o[f]={index1:r[0],index2:r[1]})}for(var m in o){var g=o[m],v=e.vertices[g.index1];i.push(v.x,v.y,v.z),i.push((v=e.vertices[g.index2]).x,v.y,v.z)}}else if(e&&e.isBufferGeometry){var y=new A;if(null!==e.index){var b=e.attributes.position,_=e.index,w=e.groups;0===w.length&&(w=[{start:0,count:_.count,materialIndex:0}]);for(var x=0,C=w.length;x<C;++x)for(var E=w[x],S=E.start,M=S,T=S+E.count;M<T;M+=3)for(var P=0;P<3;P++){var k=_.getX(M+P),D=_.getX(M+(P+1)%3);r[0]=Math.min(k,D),r[1]=Math.max(k,D);var O=r[0]+","+r[1];void 0===o[O]&&(o[O]={index1:r[0],index2:r[1]})}for(var R in o){var I=o[R];y.fromBufferAttribute(b,I.index1),i.push(y.x,y.y,y.z),y.fromBufferAttribute(b,I.index2),i.push(y.x,y.y,y.z)}}else for(var L=e.attributes.position,F=0,N=L.count/3;F<N;F++)for(var B=0;B<3;B++)y.fromBufferAttribute(L,3*F+B),i.push(y.x,y.y,y.z),y.fromBufferAttribute(L,3*F+(B+1)%3),i.push(y.x,y.y,y.z)}return n.setAttribute("position",new oe(i,3)),n}return c(e,t),e}(ye),zs=Object.freeze({__proto__:null,BoxGeometry:Co,BoxBufferGeometry:Ue,CircleGeometry:So,CircleBufferGeometry:Eo,ConeGeometry:Po,ConeBufferGeometry:ko,CylinderGeometry:To,CylinderBufferGeometry:Mo,DodecahedronGeometry:Ro,DodecahedronBufferGeometry:Oo,EdgesGeometry:Bo,ExtrudeGeometry:fs,ExtrudeBufferGeometry:ds,IcosahedronGeometry:gs,IcosahedronBufferGeometry:ms,LatheGeometry:ys,LatheBufferGeometry:vs,OctahedronGeometry:_s,OctahedronBufferGeometry:bs,ParametricGeometry:As,ParametricBufferGeometry:ws,PlaneGeometry:xs,PlaneBufferGeometry:en,PolyhedronGeometry:Cs,PolyhedronBufferGeometry:Do,RingGeometry:Ss,RingBufferGeometry:Es,ShapeGeometry:Ts,ShapeBufferGeometry:Ms,SphereGeometry:ks,SphereBufferGeometry:Ps,TetrahedronGeometry:Os,TetrahedronBufferGeometry:Ds,TextGeometry:Is,TextBufferGeometry:Rs,TorusGeometry:Fs,TorusBufferGeometry:Ls,TorusKnotGeometry:Bs,TorusKnotBufferGeometry:Ns,TubeGeometry:Vs,TubeBufferGeometry:Us,WireframeGeometry:js});function Hs(t){qt.call(this),this.type="ShadowMaterial",this.color=new Ht(0),this.transparent=!0,this.setValues(t)}function Gs(t){He.call(this,t),this.type="RawShaderMaterial"}function Ws(t){qt.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ht(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new d(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function qs(t){Ws.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new d(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=s.clamp(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}function $s(t){qt.call(this),this.type="MeshPhongMaterial",this.color=new Ht(16777215),this.specular=new Ht(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new d(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ys(t){qt.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ht(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new d(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Qs(t){qt.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new d(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Xs(t){qt.call(this),this.type="MeshLambertMaterial",this.color=new Ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ks(t){qt.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ht(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new d(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Zs(t){Xr.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}(Hs.prototype=Object.create(qt.prototype)).constructor=Hs,Hs.prototype.isShadowMaterial=!0,Hs.prototype.copy=function(t){return qt.prototype.copy.call(this,t),this.color.copy(t.color),this},(Gs.prototype=Object.create(He.prototype)).constructor=Gs,Gs.prototype.isRawShaderMaterial=!0,(Ws.prototype=Object.create(qt.prototype)).constructor=Ws,Ws.prototype.isMeshStandardMaterial=!0,Ws.prototype.copy=function(t){return qt.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},(qs.prototype=Object.create(Ws.prototype)).constructor=qs,qs.prototype.isMeshPhysicalMaterial=!0,qs.prototype.copy=function(t){return Ws.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,this.sheen=t.sheen?(this.sheen||new Ht).copy(t.sheen):null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this},($s.prototype=Object.create(qt.prototype)).constructor=$s,$s.prototype.isMeshPhongMaterial=!0,$s.prototype.copy=function(t){return qt.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Ys.prototype=Object.create(qt.prototype)).constructor=Ys,Ys.prototype.isMeshToonMaterial=!0,Ys.prototype.copy=function(t){return qt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Qs.prototype=Object.create(qt.prototype)).constructor=Qs,Qs.prototype.isMeshNormalMaterial=!0,Qs.prototype.copy=function(t){return qt.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Xs.prototype=Object.create(qt.prototype)).constructor=Xs,Xs.prototype.isMeshLambertMaterial=!0,Xs.prototype.copy=function(t){return qt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Ks.prototype=Object.create(qt.prototype)).constructor=Ks,Ks.prototype.isMeshMatcapMaterial=!0,Ks.prototype.copy=function(t){return qt.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},(Zs.prototype=Object.create(Xr.prototype)).constructor=Zs,Zs.prototype.isLineDashedMaterial=!0,Zs.prototype.copy=function(t){return Xr.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Js=Object.freeze({__proto__:null,ShadowMaterial:Hs,SpriteMaterial:vr,RawShaderMaterial:Gs,ShaderMaterial:He,PointsMaterial:ao,MeshPhysicalMaterial:qs,MeshStandardMaterial:Ws,MeshPhongMaterial:$s,MeshToonMaterial:Ys,MeshNormalMaterial:Qs,MeshLambertMaterial:Xs,MeshDepthMaterial:Yi,MeshDistanceMaterial:Qi,MeshBasicMaterial:$t,MeshMatcapMaterial:Ks,LineDashedMaterial:Zs,LineBasicMaterial:Xr,Material:qt}),ta={arraySlice:function(t,e,n){return ta.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),i=0;i!==e;++i)n[i]=i;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),o=0,s=0;s!==i;++o)for(var a=n[o]*e,l=0;l!==e;++l)r[s++]=t[a+l];return r},flattenJSON:function(t,e,n,i){for(var r=1,o=t[0];void 0!==o&&void 0===o[i];)o=t[r++];if(void 0!==o){var s=o[i];if(void 0!==s)if(Array.isArray(s))do{void 0!==(s=o[i])&&(e.push(o.time),n.push.apply(n,s)),o=t[r++]}while(void 0!==o);else if(void 0!==s.toArray)do{void 0!==(s=o[i])&&(e.push(o.time),s.toArray(n,n.length)),o=t[r++]}while(void 0!==o);else do{void 0!==(s=o[i])&&(e.push(o.time),n.push(s)),o=t[r++]}while(void 0!==o)}},subclip:function(t,e,n,i,r){void 0===r&&(r=30);var o=t.clone();o.name=e;for(var s=[],a=0;a<o.tracks.length;++a){for(var l=o.tracks[a],c=l.getValueSize(),u=[],h=[],d=0;d<l.times.length;++d){var p=l.times[d]*r;if(!(p<n||p>=i)){u.push(l.times[d]);for(var f=0;f<c;++f)h.push(l.values[d*c+f])}}0!==u.length&&(l.times=ta.convertArray(u,l.times.constructor),l.values=ta.convertArray(h,l.values.constructor),s.push(l))}o.tracks=s;for(var m=1/0,g=0;g<o.tracks.length;++g)m>o.tracks[g].times[0]&&(m=o.tracks[g].times[0]);for(var v=0;v<o.tracks.length;++v)o.tracks[v].shift(-1*m);return o.resetDuration(),o},makeClipAdditive:function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=t),void 0===i&&(i=30),i<=0&&(i=30);for(var r=n.tracks.length,o=e/i,s=function(e){var i=n.tracks[e],r=i.ValueTypeName;if("bool"===r||"string"===r)return"continue";var s=t.tracks.find((function(t){return t.name===i.name&&t.ValueTypeName===r}));if(void 0===s)return"continue";var a=0,l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);var c=0,u=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);var h=i.times.length-1,d=void 0;if(o<=i.times[0])d=ta.arraySlice(i.values,a,l-a);else if(o>=i.times[h]){var p=h*l+a;d=ta.arraySlice(i.values,p,p+l-a)}else{var f=i.createInterpolant(),m=a,g=l-a;f.evaluate(o),d=ta.arraySlice(f.resultBuffer,m,g)}"quaternion"===r&&(new w).fromArray(d).normalize().conjugate().toArray(d);for(var v=s.times.length,y=0;y<v;++y){var b=y*u+c;if("quaternion"===r)w.multiplyQuaternionsFlat(s.values,b,d,0,s.values,b);else for(var _=u-2*c,A=0;A<_;++A)s.values[b+A]-=d[A]}},a=0;a<r;++a)s(a);return t.blendMode=2501,t}};function ea(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function na(t,e,n,i){ea.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ia(t,e,n,i){ea.call(this,t,e,n,i)}function ra(t,e,n,i){ea.call(this,t,e,n,i)}function oa(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ta.convertArray(e,this.TimeBufferType),this.values=ta.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function sa(t,e,n){oa.call(this,t,e,n)}function aa(t,e,n,i){oa.call(this,t,e,n,i)}function la(t,e,n,i){oa.call(this,t,e,n,i)}function ca(t,e,n,i){ea.call(this,t,e,n,i)}function ua(t,e,n,i){oa.call(this,t,e,n,i)}function ha(t,e,n,i){oa.call(this,t,e,n,i)}function da(t,e,n,i){oa.call(this,t,e,n,i)}function pa(t,e,n,i){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==i?i:2500,this.uuid=s.generateUUID(),this.duration<0&&this.resetDuration()}function fa(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return la;case"vector":case"vector2":case"vector3":case"vector4":return da;case"color":return aa;case"quaternion":return ua;case"bool":case"boolean":return sa;case"string":return ha}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],i=[];ta.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(ea.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var o;n:{i:if(!(t<i)){for(var s=n+2;;){if(void 0===i){if(t<r)break i;return this._cachedIndex=n=e.length,this.afterEnd_(n-1,t,r)}if(n===s)break;if(r=i,t<(i=e[++n]))break e}o=e.length;break n}if(t>=r)break t;var a=e[1];t<a&&(n=2,r=a);for(var l=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===l)break;if(i=r,t>=(r=e[--n-1]))break e}o=n,n=0}for(;n<o;){var c=n+o>>>1;t<e[c]?o=c:n=c+1}if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return this._cachedIndex=n=e.length,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,o=0;o!==i;++o)e[o]=n[r+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(ea.prototype,{beforeStart_:ea.prototype.copySampleValue_,afterEnd_:ea.prototype.copySampleValue_}),na.prototype=Object.assign(Object.create(ea.prototype),{constructor:na,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,o=t+1,s=i[r],a=i[o];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:r=t,s=2*e-n;break;case 2402:s=e+i[r=i.length-2]-i[r+1];break;default:r=t,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:o=t,a=2*n-e;break;case 2402:o=1,a=n+i[1]-i[0];break;default:o=t-1,a=e}var l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(a-n),this._offsetPrev=r*c,this._offsetNext=o*c},interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(i-e),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f,_=0;_!==s;++_)r[_]=g*o[c+_]+v*o[l+_]+y*o[a+_]+b*o[u+_];return r}}),ia.prototype=Object.assign(Object.create(ea.prototype),{constructor:ia,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,c=(n-e)/(i-e),u=1-c,h=0;h!==s;++h)r[h]=o[l+h]*u+o[a+h]*c;return r}}),ra.prototype=Object.assign(Object.create(ea.prototype),{constructor:ra,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(oa,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:ta.convertArray(t.times,Array),values:ta.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(oa.prototype,{constructor:oa,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new ra(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new ia(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new na(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,o=i-1;r!==i&&n[r]<t;)++r;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==r||o!==i){r>=o&&(r=(o=Math.max(o,1))-1);var s=this.getValueSize();this.times=ta.arraySlice(n,r,o),this.values=ta.arraySlice(this.values,r*s,o*s)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,s=0;s!==r;s++){var a=n[s];if("number"==typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,a),t=!1;break}if(null!==o&&o>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,a,o),t=!1;break}o=a}if(void 0!==i&&ta.isTypedArray(i))for(var l=0,c=i.length;l!==c;++l){var u=i[l];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,u),t=!1;break}}return t},optimize:function(){for(var t=ta.arraySlice(this.times),e=ta.arraySlice(this.values),n=this.getValueSize(),i=2302===this.getInterpolation(),r=t.length-1,o=1,s=1;s<r;++s){var a=!1,l=t[s];if(l!==t[s+1]&&(1!==s||l!==l[0]))if(i)a=!0;else for(var c=s*n,u=c-n,h=c+n,d=0;d!==n;++d){var p=e[c+d];if(p!==e[u+d]||p!==e[h+d]){a=!0;break}}if(a){if(s!==o){t[o]=t[s];for(var f=s*n,m=o*n,g=0;g!==n;++g)e[m+g]=e[f+g]}++o}}if(r>0){t[o]=t[r];for(var v=r*n,y=o*n,b=0;b!==n;++b)e[y+b]=e[v+b];++o}return o!==t.length?(this.times=ta.arraySlice(t,0,o),this.values=ta.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this},clone:function(){var t=ta.arraySlice(this.times,0),e=ta.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}),sa.prototype=Object.assign(Object.create(oa.prototype),{constructor:sa,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),aa.prototype=Object.assign(Object.create(oa.prototype),{constructor:aa,ValueTypeName:"color"}),la.prototype=Object.assign(Object.create(oa.prototype),{constructor:la,ValueTypeName:"number"}),ca.prototype=Object.assign(Object.create(ea.prototype),{constructor:ca,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-e)/(i-e),l=t*s,c=l+s;l!==c;l+=4)w.slerpFlat(r,0,o,l-s,o,l,a);return r}}),ua.prototype=Object.assign(Object.create(oa.prototype),{constructor:ua,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new ca(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),ha.prototype=Object.assign(Object.create(oa.prototype),{constructor:ha,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),da.prototype=Object.assign(Object.create(oa.prototype),{constructor:da,ValueTypeName:"vector"}),Object.assign(pa,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,o=n.length;r!==o;++r)e.push(fa(n[r]).scale(i));var s=new pa(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},r=0,o=n.length;r!==o;++r)e.push(oa.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,o=[],s=0;s<r;s++){var a=[],l=[];a.push((s+r-1)%r,s,(s+1)%r),l.push(0,1,0);var c=ta.getKeyframeOrder(a);a=ta.sortedArray(a,1,c),l=ta.sortedArray(l,1,c),i||0!==a[0]||(a.push(r),l.push(l[0])),o.push(new la(".morphTargetInfluences["+e[s].name+"]",a,l).scale(1/n))}return new pa(t,-1,o)},findByName:function(t,e){var n=t;Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations);for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,o=0,s=t.length;o<s;o++){var a=t[o],l=a.name.match(r);if(l&&l.length>1){var c=l[1],u=i[c];u||(i[c]=u=[]),u.push(a)}}var h=[];for(var d in i)h.push(pa.CreateFromMorphTargetSequence(d,i[d],e,n));return h},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,i,r){if(0!==n.length){var o=[],s=[];ta.flattenJSON(n,o,s,i),0!==o.length&&r.push(new t(e,o,s))}},i=[],r=t.name||"default",o=t.fps||30,s=t.blendMode,a=t.length||-1,l=t.hierarchy||[],c=0;c<l.length;c++){var u=l[c].keys;if(u&&0!==u.length)if(u[0].morphTargets){var h={},d=void 0;for(d=0;d<u.length;d++)if(u[d].morphTargets)for(var p=0;p<u[d].morphTargets.length;p++)h[u[d].morphTargets[p]]=-1;for(var f in h){for(var m=[],g=[],v=0;v!==u[d].morphTargets.length;++v){var y=u[d];m.push(y.time),g.push(y.morphTarget===f?1:0)}i.push(new la(".morphTargetInfluence["+f+"]",m,g))}a=h.length*(o||1)}else{var b=".bones["+e[c].name+"]";n(da,b+".position",u,"pos",i),n(ua,b+".quaternion",u,"rot",i),n(da,b+".scale",u,"scl",i)}}return 0===i.length?null:new pa(r,a,i,s)}}),Object.assign(pa.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new pa(this.name,this.duration,t,this.blendMode)},toJSON:function(){return pa.toJSON(this)}});var ma={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function ga(t,e,n){var i=this,r=!1,o=0,s=0,a=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,!1===r&&void 0!==i.onStart&&i.onStart(t,o,s),r=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,s),o===s&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return a?a(t):t},this.setURLModifier=function(t){return a=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){var e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=l.length;e<n;e+=2){var i=l[e],r=l[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return r}return null}}var va=new ga;function ya(t){this.manager=void 0!==t?t:va,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(ya.prototype,{load:function(){},loadAsync:function(t,e){var n=this;return new Promise((function(i,r){n.load(t,i,e,r)}))},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});var ba={};function _a(t){ya.call(this,t)}function wa(t){ya.call(this,t)}function Aa(t){ya.call(this,t)}function xa(t){ya.call(this,t)}function Ca(t){ya.call(this,t)}function Ea(t){ya.call(this,t)}function Sa(t){ya.call(this,t)}function Ma(){this.type="Curve",this.arcLengthDivisions=200}function Ta(t,e,n,i,r,o,s,a){Ma.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=s||!1,this.aRotation=a||0}function Pa(t,e,n,i,r,o){Ta.call(this,t,e,n,n,i,r,o),this.type="ArcCurve"}function ka(){var t=0,e=0,n=0,i=0;function r(r,o,s,a){t=r,e=s,n=-3*r+3*o-2*s-a,i=2*r-2*o+s+a}return{initCatmullRom:function(t,e,n,i,o){r(e,n,o*(n-t),o*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,o,s,a){var l=(e-t)/o-(n-t)/(o+s)+(n-e)/s,c=(n-e)/s-(i-e)/(s+a)+(i-n)/a;r(e,n,l*=s,c*=s)},calc:function(r){var o=r*r;return t+e*r+n*o+i*(o*r)}}}_a.prototype=Object.assign(Object.create(ya.prototype),{constructor:_a,load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=ma.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout((function(){e&&e(o),r.manager.itemEnd(t)}),0),o;if(void 0===ba[t]){var s,a=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var l=a[1],c=!!a[2],u=a[3];u=decodeURIComponent(u),c&&(u=atob(u));try{var h,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var p=new Uint8Array(u.length),f=0;f<u.length;f++)p[f]=u.charCodeAt(f);h="blob"===d?new Blob([p.buffer],{type:l}):p.buffer;break;case"document":var m=new DOMParser;h=m.parseFromString(u,l);break;case"json":h=JSON.parse(u);break;default:h=u}setTimeout((function(){e&&e(h),r.manager.itemEnd(t)}),0)}catch(v){setTimeout((function(){i&&i(v),r.manager.itemError(t),r.manager.itemEnd(t)}),0)}}else{for(var g in ba[t]=[],ba[t].push({onLoad:e,onProgress:n,onError:i}),(s=new XMLHttpRequest).open("GET",t,!0),s.addEventListener("load",(function(e){var n=this.response,i=ba[t];if(delete ba[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),ma.add(t,n);for(var o=0,s=i.length;o<s;o++){var a=i[o];a.onLoad&&a.onLoad(n)}r.manager.itemEnd(t)}else{for(var l=0,c=i.length;l<c;l++){var u=i[l];u.onError&&u.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}}),!1),s.addEventListener("progress",(function(e){for(var n=ba[t],i=0,r=n.length;i<r;i++){var o=n[i];o.onProgress&&o.onProgress(e)}}),!1),s.addEventListener("error",(function(e){var n=ba[t];delete ba[t];for(var i=0,o=n.length;i<o;i++){var s=n[i];s.onError&&s.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),s.addEventListener("abort",(function(e){var n=ba[t];delete ba[t];for(var i=0,o=n.length;i<o;i++){var s=n[i];s.onError&&s.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)s.setRequestHeader(g,this.requestHeader[g]);s.send(null)}return r.manager.itemStart(t),s}ba[t].push({onLoad:e,onProgress:n,onError:i})},setResponseType:function(t){return this.responseType=t,this},setMimeType:function(t){return this.mimeType=t,this}}),wa.prototype=Object.assign(Object.create(ya.prototype),{constructor:wa,load:function(t,n,i,r){var o=this,s=new _a(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,(function(i){try{n(o.parse(JSON.parse(i)))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),i,r)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var i=pa.parse(t[n]);e.push(i)}return e}}),Aa.prototype=Object.assign(Object.create(ya.prototype),{constructor:Aa,load:function(t,e,n,i){var r=this,o=[],s=new go;s.image=o;var a=new _a(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials);var l=0;function c(c){a.load(t[c],(function(t){var n=r.parse(t,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(s.minFilter=1006),s.format=n.format,s.needsUpdate=!0,e&&e(s))}),n,i)}if(Array.isArray(t))for(var u=0,h=t.length;u<h;++u)c(u);else a.load(t,(function(t){var n=r.parse(t,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,a=0;a<i;a++){o[a]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)o[a].mipmaps.push(n.mipmaps[a*n.mipmapCount+l]),o[a].format=n.format,o[a].width=n.width,o[a].height=n.height}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=1006),s.format=n.format,s.needsUpdate=!0,e&&e(s)}),n,i);return s}}),xa.prototype=Object.assign(Object.create(ya.prototype),{constructor:xa,load:function(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=ma.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout((function(){e&&e(o),r.manager.itemEnd(t)}),0),o;var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1),ma.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(t),s.src=t,s}}),Ca.prototype=Object.assign(Object.create(ya.prototype),{constructor:Ca,load:function(t,e,n,i){var r=new $e,o=new xa(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var s=0;function a(n){o.load(t[n],(function(t){r.images[n]=t,6==++s&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}for(var l=0;l<t.length;++l)a(l);return r}}),Ea.prototype=Object.assign(Object.create(ya.prototype),{constructor:Ea,load:function(t,e,n,i){var r=this,o=new Qe,s=new _a(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(t,(function(t){var n=r.parse(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:1001,o.wrapT=void 0!==n.wrapT?n.wrapT:1001,o.magFilter=void 0!==n.magFilter?n.magFilter:1006,o.minFilter=void 0!==n.minFilter?n.minFilter:1006,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=1008),1===n.mipmapCount&&(o.minFilter=1006),o.needsUpdate=!0,e&&e(o,n))}),n,i),o}}),Sa.prototype=Object.assign(Object.create(ya.prototype),{constructor:Sa,load:function(t,e,n,i){var r=new g,o=new xa(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(n){r.image=n;var i=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);r.format=i?1022:1023,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}}),Object.assign(Ma.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],i=this.getPoint(0),r=0;n.push(0);for(var o=1;o<=t;o++)r+=(e=this.getPoint(o/t)).distanceTo(i),n.push(r),i=e;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i=this.getLengths(),r=0,o=i.length;n=e||t*i[o-1];for(var s,a=0,l=o-1;a<=l;)if((s=i[r=Math.floor(a+(l-a)/2)]-n)<0)a=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(o-1);var c=i[r];return(r+(n-c)/(i[r+1]-c))/(o-1)},getTangent:function(t,e){var n=t-1e-4,i=t+1e-4;n<0&&(n=0),i>1&&(i=1);var r=this.getPoint(n),o=this.getPoint(i),s=e||(r.isVector2?new d:new A);return s.copy(o).sub(r).normalize(),s},getTangentAt:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){for(var n=new A,i=[],r=[],o=[],a=new A,l=new X,c=0;c<=t;c++)i[c]=this.getTangentAt(c/t,new A),i[c].normalize();r[0]=new A,o[0]=new A;var u=Number.MAX_VALUE,h=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);h<=u&&(u=h,n.set(1,0,0)),d<=u&&(u=d,n.set(0,1,0)),p<=u&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),o[0].crossVectors(i[0],r[0]);for(var f=1;f<=t;f++){if(r[f]=r[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(i[f-1],i[f]),a.length()>Number.EPSILON){a.normalize();var m=Math.acos(s.clamp(i[f-1].dot(i[f]),-1,1));r[f].applyMatrix4(l.makeRotationAxis(a,m))}o[f].crossVectors(i[f],r[f])}if(!0===e){var g=Math.acos(s.clamp(r[0].dot(r[t]),-1,1));g/=t,i[0].dot(a.crossVectors(r[0],r[t]))>0&&(g=-g);for(var v=1;v<=t;v++)r[v].applyMatrix4(l.makeRotationAxis(i[v],g*v)),o[v].crossVectors(i[v],r[v])}return{tangents:i,normals:r,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),(Ta.prototype=Object.create(Ma.prototype)).constructor=Ta,Ta.prototype.isEllipseCurve=!0,Ta.prototype.getPoint=function(t,e){for(var n=e||new d,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);var s=this.aStartAngle+t*r,a=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=a-this.aX,p=l-this.aY;a=h*c-p*u+this.aX,l=h*u+p*c+this.aY}return n.set(a,l)},Ta.prototype.copy=function(t){return Ma.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Ta.prototype.toJSON=function(){var t=Ma.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Ta.prototype.fromJSON=function(t){return Ma.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},(Pa.prototype=Object.create(Ta.prototype)).constructor=Pa,Pa.prototype.isArcCurve=!0;var Da=new A,Oa=new ka,Ra=new ka,Ia=new ka;function La(t,e,n,i){void 0===t&&(t=[]),void 0===e&&(e=!1),void 0===n&&(n="centripetal"),void 0===i&&(i=.5),Ma.call(this),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}function Fa(t,e,n,i,r){var o=.5*(i-e),s=.5*(r-n),a=t*t;return(2*n-2*i+o+s)*(t*a)+(-3*n+3*i-2*o-s)*a+o*t+n}function Na(t,e,n,i){return function(t,e){var n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function Ba(t,e,n,i,r){return function(t,e){var n=1-t;return n*n*n*e}(t,e)+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}function Ua(t,e,n,i){void 0===t&&(t=new d),void 0===e&&(e=new d),void 0===n&&(n=new d),void 0===i&&(i=new d),Ma.call(this),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}function Va(t,e,n,i){void 0===t&&(t=new A),void 0===e&&(e=new A),void 0===n&&(n=new A),void 0===i&&(i=new A),Ma.call(this),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}function ja(t,e){void 0===t&&(t=new d),void 0===e&&(e=new d),Ma.call(this),this.type="LineCurve",this.v1=t,this.v2=e}function za(t,e){void 0===t&&(t=new A),void 0===e&&(e=new A),Ma.call(this),this.type="LineCurve3",this.v1=t,this.v2=e}function Ha(t,e,n){void 0===t&&(t=new d),void 0===e&&(e=new d),void 0===n&&(n=new d),Ma.call(this),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}function Ga(t,e,n){void 0===t&&(t=new A),void 0===e&&(e=new A),void 0===n&&(n=new A),Ma.call(this),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}function Wa(t){void 0===t&&(t=[]),Ma.call(this),this.type="SplineCurve",this.points=t}(La.prototype=Object.create(Ma.prototype)).constructor=La,La.prototype.isCatmullRomCurve3=!0,La.prototype.getPoint=function(t,e){void 0===e&&(e=new A);var n,i,r=e,o=this.points,s=o.length,a=(s-(this.closed?0:1))*t,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:0===c&&l===s-1&&(l=s-2,c=1),this.closed||l>0?n=o[(l-1)%s]:(Da.subVectors(o[0],o[1]).add(o[0]),n=Da);var u=o[l%s],h=o[(l+1)%s];if(this.closed||l+2<s?i=o[(l+2)%s]:(Da.subVectors(o[s-1],o[s-2]).add(o[s-1]),i=Da),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(u),d),f=Math.pow(u.distanceToSquared(h),d),m=Math.pow(h.distanceToSquared(i),d);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),Oa.initNonuniformCatmullRom(n.x,u.x,h.x,i.x,p,f,m),Ra.initNonuniformCatmullRom(n.y,u.y,h.y,i.y,p,f,m),Ia.initNonuniformCatmullRom(n.z,u.z,h.z,i.z,p,f,m)}else"catmullrom"===this.curveType&&(Oa.initCatmullRom(n.x,u.x,h.x,i.x,this.tension),Ra.initCatmullRom(n.y,u.y,h.y,i.y,this.tension),Ia.initCatmullRom(n.z,u.z,h.z,i.z,this.tension));return r.set(Oa.calc(c),Ra.calc(c),Ia.calc(c)),r},La.prototype.copy=function(t){Ma.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},La.prototype.toJSON=function(){var t=Ma.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},La.prototype.fromJSON=function(t){Ma.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new A).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},(Ua.prototype=Object.create(Ma.prototype)).constructor=Ua,Ua.prototype.isCubicBezierCurve=!0,Ua.prototype.getPoint=function(t,e){void 0===e&&(e=new d);var n=e,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(Ba(t,i.x,r.x,o.x,s.x),Ba(t,i.y,r.y,o.y,s.y)),n},Ua.prototype.copy=function(t){return Ma.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Ua.prototype.toJSON=function(){var t=Ma.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Ua.prototype.fromJSON=function(t){return Ma.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(Va.prototype=Object.create(Ma.prototype)).constructor=Va,Va.prototype.isCubicBezierCurve3=!0,Va.prototype.getPoint=function(t,e){void 0===e&&(e=new A);var n=e,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(Ba(t,i.x,r.x,o.x,s.x),Ba(t,i.y,r.y,o.y,s.y),Ba(t,i.z,r.z,o.z,s.z)),n},Va.prototype.copy=function(t){return Ma.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Va.prototype.toJSON=function(){var t=Ma.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Va.prototype.fromJSON=function(t){return Ma.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},(ja.prototype=Object.create(Ma.prototype)).constructor=ja,ja.prototype.isLineCurve=!0,ja.prototype.getPoint=function(t,e){void 0===e&&(e=new d);var n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},ja.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},ja.prototype.getTangent=function(t,e){var n=e||new d;return n.copy(this.v2).sub(this.v1).normalize(),n},ja.prototype.copy=function(t){return Ma.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ja.prototype.toJSON=function(){var t=Ma.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ja.prototype.fromJSON=function(t){return Ma.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(za.prototype=Object.create(Ma.prototype)).constructor=za,za.prototype.isLineCurve3=!0,za.prototype.getPoint=function(t,e){void 0===e&&(e=new A);var n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},za.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},za.prototype.copy=function(t){return Ma.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},za.prototype.toJSON=function(){var t=Ma.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},za.prototype.fromJSON=function(t){return Ma.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Ha.prototype=Object.create(Ma.prototype)).constructor=Ha,Ha.prototype.isQuadraticBezierCurve=!0,Ha.prototype.getPoint=function(t,e){void 0===e&&(e=new d);var n=e,i=this.v0,r=this.v1,o=this.v2;return n.set(Na(t,i.x,r.x,o.x),Na(t,i.y,r.y,o.y)),n},Ha.prototype.copy=function(t){return Ma.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ha.prototype.toJSON=function(){var t=Ma.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ha.prototype.fromJSON=function(t){return Ma.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Ga.prototype=Object.create(Ma.prototype)).constructor=Ga,Ga.prototype.isQuadraticBezierCurve3=!0,Ga.prototype.getPoint=function(t,e){void 0===e&&(e=new A);var n=e,i=this.v0,r=this.v1,o=this.v2;return n.set(Na(t,i.x,r.x,o.x),Na(t,i.y,r.y,o.y),Na(t,i.z,r.z,o.z)),n},Ga.prototype.copy=function(t){return Ma.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ga.prototype.toJSON=function(){var t=Ma.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ga.prototype.fromJSON=function(t){return Ma.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},(Wa.prototype=Object.create(Ma.prototype)).constructor=Wa,Wa.prototype.isSplineCurve=!0,Wa.prototype.getPoint=function(t,e){void 0===e&&(e=new d);var n=e,i=this.points,r=(i.length-1)*t,o=Math.floor(r),s=r-o,a=i[0===o?o:o-1],l=i[o],c=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2];return n.set(Fa(s,a.x,l.x,c.x,u.x),Fa(s,a.y,l.y,c.y,u.y)),n},Wa.prototype.copy=function(t){Ma.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this},Wa.prototype.toJSON=function(){var t=Ma.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t},Wa.prototype.fromJSON=function(t){Ma.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new d).fromArray(i))}return this};var qa=Object.freeze({__proto__:null,ArcCurve:Pa,CatmullRomCurve3:La,CubicBezierCurve:Ua,CubicBezierCurve3:Va,EllipseCurve:Ta,LineCurve:ja,LineCurve3:za,QuadraticBezierCurve:Ha,QuadraticBezierCurve3:Ga,SplineCurve:Wa});function $a(){Ma.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Ya(t){$a.call(this),this.type="Path",this.currentPoint=new d,t&&this.setFromPoints(t)}function Qa(t){Ya.call(this,t),this.uuid=s.generateUUID(),this.type="Shape",this.holes=[]}function Xa(t,e){void 0===e&&(e=1),wt.call(this),this.type="Light",this.color=new Ht(t),this.intensity=e}function Ka(t,e,n){Xa.call(this,t,n),this.type="HemisphereLight",this.position.copy(wt.DefaultUp),this.updateMatrix(),this.groundColor=new Ht(e)}function Za(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new d(512,512),this.map=null,this.mapPass=null,this.matrix=new X,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ze,this._frameExtents=new d(1,1),this._viewportCount=1,this._viewports=[new y(0,0,1,1)]}function Ja(){Za.call(this,new We(50,1,.5,500)),this.focus=1}function tl(t,e,n,i,r,o){Xa.call(this,t,e),this.type="SpotLight",this.position.copy(wt.DefaultUp),this.updateMatrix(),this.target=new wt,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new Ja}function el(){Za.call(this,new We(90,1,.5,500)),this._frameExtents=new d(4,2),this._viewportCount=6,this._viewports=[new y(2,1,1,1),new y(0,1,1,1),new y(3,1,1,1),new y(1,1,1,1),new y(3,0,1,1),new y(1,0,1,1)],this._cubeDirections=[new A(1,0,0),new A(-1,0,0),new A(0,0,1),new A(0,0,-1),new A(0,1,0),new A(0,-1,0)],this._cubeUps=[new A(0,1,0),new A(0,1,0),new A(0,1,0),new A(0,1,0),new A(0,0,1),new A(0,0,-1)]}function nl(t,e,n,i){Xa.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new el}function il(t,e,n,i,r,o){Ge.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function rl(){Za.call(this,new il(-5,5,5,-5,.5,500))}function ol(t,e){Xa.call(this,t,e),this.type="DirectionalLight",this.position.copy(wt.DefaultUp),this.updateMatrix(),this.target=new wt,this.shadow=new rl}function sl(t,e){Xa.call(this,t,e),this.type="AmbientLight"}function al(t,e,n,i){Xa.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}$a.prototype=Object.assign(Object.create(Ma.prototype),{constructor:$a,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new ja(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,o=this.curves[i],s=o.getLength();return o.getPointAt(0===s?0:1-r/s)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){void 0===t&&(t=12);for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var o=r[i],s=o.getPoints(o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t),a=0;a<s.length;a++){var l=s[a];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){Ma.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this},toJSON:function(){var t=Ma.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t},fromJSON:function(t){Ma.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push((new qa[i.type]).fromJSON(i))}return this}}),Ya.prototype=Object.assign(Object.create($a.prototype),{constructor:Ya,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var n=new ja(this.currentPoint.clone(),new d(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,i){var r=new Ha(this.currentPoint.clone(),new d(t,e),new d(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(t,e,n,i,r,o){var s=new Ua(this.currentPoint.clone(),new d(t,e),new d(n,i),new d(r,o));return this.curves.push(s),this.currentPoint.set(r,o),this},splineThru:function(t){var e=new Wa([this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,i,r,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,i,r,o),this},absarc:function(t,e,n,i,r,o){return this.absellipse(t,e,n,n,i,r,o),this},ellipse:function(t,e,n,i,r,o,s,a){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,i,r,o,s,a),this},absellipse:function(t,e,n,i,r,o,s,a){var l=new Ta(t,e,n,i,r,o,s,a);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var u=l.getPoint(1);return this.currentPoint.copy(u),this},copy:function(t){return $a.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=$a.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return $a.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Qa.prototype=Object.assign(Object.create(Ya.prototype),{constructor:Qa,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Ya.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this},toJSON:function(){var t=Ya.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t},fromJSON:function(t){Ya.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push((new Ya).fromJSON(i))}return this}}),Xa.prototype=Object.assign(Object.create(wt.prototype),{constructor:Xa,isLight:!0,copy:function(t){return wt.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=wt.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Ka.prototype=Object.assign(Object.create(Xa.prototype),{constructor:Ka,isHemisphereLight:!0,copy:function(t){return Xa.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Za.prototype,{_projScreenMatrix:new X,_lightPositionWorld:new A,_lookTarget:new A,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(t.matrixWorld),e.position.copy(o),r.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Ja.prototype=Object.assign(Object.create(Za.prototype),{constructor:Ja,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,n=2*s.RAD2DEG*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),Za.prototype.updateMatrices.call(this,t)}}),tl.prototype=Object.assign(Object.create(Xa.prototype),{constructor:tl,isSpotLight:!0,copy:function(t){return Xa.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),el.prototype=Object.assign(Object.create(Za.prototype),{constructor:el,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);var n=this.camera,i=this.matrix,r=this._lightPositionWorld,o=this._lookTarget,s=this._projScreenMatrix;r.setFromMatrixPosition(t.matrixWorld),n.position.copy(r),o.copy(n.position),o.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(o),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),s.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(s)}}),nl.prototype=Object.assign(Object.create(Xa.prototype),{constructor:nl,isPointLight:!0,copy:function(t){return Xa.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),il.prototype=Object.assign(Object.create(Ge.prototype),{constructor:il,isOrthographicCamera:!0,copy:function(t,e){return Ge.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,o=n+t,s=i+e,a=i-e;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(r+=l*this.view.offsetX)+l*this.view.width,a=(s-=c*this.view.offsetY)-c*this.view.height}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){var e=wt.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),rl.prototype=Object.assign(Object.create(Za.prototype),{constructor:rl,isDirectionalLightShadow:!0,updateMatrices:function(t){Za.prototype.updateMatrices.call(this,t)}}),ol.prototype=Object.assign(Object.create(Xa.prototype),{constructor:ol,isDirectionalLight:!0,copy:function(t){return Xa.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),sl.prototype=Object.assign(Object.create(Xa.prototype),{constructor:sl,isAmbientLight:!0}),al.prototype=Object.assign(Object.create(Xa.prototype),{constructor:al,isRectAreaLight:!0,copy:function(t){return Xa.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Xa.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});var ll=function(){function t(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new A)}var e=t.prototype;return e.set=function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},e.zero=function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},e.getAt=function(t,e){var n=t.x,i=t.y,r=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*i),e.addScaledVector(o[2],.488603*r),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*i*1.092548),e.addScaledVector(o[5],i*r*1.092548),e.addScaledVector(o[6],.315392*(3*r*r-1)),e.addScaledVector(o[7],n*r*1.092548),e.addScaledVector(o[8],.546274*(n*n-i*i)),e},e.getIrradianceAt=function(t,e){var n=t.x,i=t.y,r=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*i),e.addScaledVector(o[2],1.023328*r),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*i),e.addScaledVector(o[5],.858086*i*r),e.addScaledVector(o[6],.743125*r*r-.247708),e.addScaledVector(o[7],.858086*n*r),e.addScaledVector(o[8],.429043*(n*n-i*i)),e},e.add=function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},e.addScaledSH=function(t,e){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this},e.scale=function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},e.lerp=function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},e.equals=function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},e.copy=function(t){return this.set(t.coefficients)},e.clone=function(){return(new this.constructor).copy(this)},e.fromArray=function(t,e){void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this},e.toArray=function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].toArray(t,e+3*i);return t},t.getBasisAt=function(t,e){var n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)},t}();function cl(t,e){Xa.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new ll}function ul(t){ya.call(this,t),this.textures={}}cl.prototype=Object.assign(Object.create(Xa.prototype),{constructor:cl,isLightProbe:!0,copy:function(t){return Xa.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){var e=Xa.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}}),ul.prototype=Object.assign(Object.create(ya.prototype),{constructor:ul,load:function(t,n,i,r){var o=this,s=new _a(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,(function(i){try{n(o.parse(JSON.parse(i)))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),i,r)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var i=new Js[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&void 0!==i.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=(new Ht).setHex(t.sheen)),void 0!==t.emissive&&void 0!==i.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==i.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(i.morphNormals=t.morphNormals),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.vertexTangents&&(i.vertexTangents=t.vertexTangents),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.vertexColors&&(i.vertexColors="number"==typeof t.vertexColors?t.vertexColors>0:t.vertexColors),void 0!==t.uniforms)for(var r in t.uniforms){var o=t.uniforms[r];switch(i.uniforms[r]={},o.type){case"t":i.uniforms[r].value=n(o.value);break;case"c":i.uniforms[r].value=(new Ht).setHex(o.value);break;case"v2":i.uniforms[r].value=(new d).fromArray(o.value);break;case"v3":i.uniforms[r].value=(new A).fromArray(o.value);break;case"v4":i.uniforms[r].value=(new y).fromArray(o.value);break;case"m3":i.uniforms[r].value=(new p).fromArray(o.value);break;case"m4":i.uniforms[r].value=(new X).fromArray(o.value);break;default:i.uniforms[r].value=o.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var s in t.extensions)i.extensions[s]=t.extensions[s];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){var a=t.normalScale;!1===Array.isArray(a)&&(a=[a,a]),i.normalScale=(new d).fromArray(a)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(i.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new d).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(i.transmission=t.transmission),void 0!==t.transmissionMap&&(i.transmissionMap=n(t.transmissionMap)),i},setTextures:function(t){return this.textures=t,this}});var hl={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var n="",i=0,r=t.length;i<r;i++)n+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(n))}catch(e){return n}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function dl(){ye.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function pl(t,e,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Xt.call(this,t,e,n),this.meshPerAttribute=i||1}function fl(t){ya.call(this,t)}dl.prototype=Object.assign(Object.create(ye.prototype),{constructor:dl,isInstancedBufferGeometry:!0,copy:function(t){return ye.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=ye.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),pl.prototype=Object.assign(Object.create(Xt.prototype),{constructor:pl,isInstancedBufferAttribute:!0,copy:function(t){return Xt.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=Xt.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),fl.prototype=Object.assign(Object.create(ya.prototype),{constructor:fl,load:function(t,n,i,r){var o=this,s=new _a(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,(function(i){try{n(o.parse(JSON.parse(i)))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),i,r)},parse:function(t){var e={},n={};function i(t,i){if(void 0!==e[i])return e[i];var r=t.interleavedBuffers[i],o=function(t,e){if(void 0!==n[e])return n[e];var i=new Uint32Array(t.arrayBuffers[e]).buffer;return n[e]=i,i}(t,r.buffer),s=new pr(ue(r.type,o),r.stride);return s.uuid=r.uuid,e[i]=s,s}var r=t.isInstancedBufferGeometry?new dl:new ye,o=t.data.index;if(void 0!==o){var s=ue(o.type,o.array);r.setIndex(new Xt(s,1))}var a=t.data.attributes;for(var l in a){var c=a[l],u=void 0;if(c.isInterleavedBufferAttribute)u=new gr(i(t.data,c.data),c.itemSize,c.offset,c.normalized);else{var h=ue(c.type,c.array);u=new(c.isInstancedBufferAttribute?pl:Xt)(h,c.itemSize,c.normalized)}void 0!==c.name&&(u.name=c.name),r.setAttribute(l,u)}var d=t.data.morphAttributes;if(d)for(var p in d){for(var f=d[p],m=[],g=0,v=f.length;g<v;g++){var y=f[g],b=void 0;b=y.isInterleavedBufferAttribute?new gr(i(t.data,y.data),y.itemSize,y.offset,y.normalized):new Xt(ue(y.type,y.array),y.itemSize,y.normalized),void 0!==y.name&&(b.name=y.name),m.push(b)}r.morphAttributes[p]=m}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);var _=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==_)for(var w=0,x=_.length;w!==x;++w){var C=_[w];r.addGroup(C.start,C.count,C.materialIndex)}var E=t.data.boundingSphere;if(void 0!==E){var S=new A;void 0!==E.center&&S.fromArray(E.center),r.boundingSphere=new j(S,E.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}});var ml,gl=function(t){function e(e){return t.call(this,e)||this}c(e,t);var n=e.prototype;return n.load=function(t,e,n,i){var r=this,o=""===this.path?hl.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;var s=new _a(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){var o=null;try{o=JSON.parse(n)}catch(a){return void 0!==i&&i(a),void console.error("THREE:ObjectLoader: Can't parse "+t+".",a.message)}var s=o.metadata;void 0!==s&&void 0!==s.type&&"geometry"!==s.type.toLowerCase()?r.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,i)},n.parse=function(t,e){var n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),o=this.parseImages(t.images,(function(){void 0!==e&&e(l)})),s=this.parseTextures(t.textures,o),a=this.parseMaterials(t.materials,s),l=this.parseObject(t.object,r,a,n),c=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,c),void 0!==e){var u=!1;for(var h in o)if(o[h]instanceof HTMLImageElement){u=!0;break}!1===u&&e(l)}return l},n.parseShapes=function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new Qa).fromJSON(t[n]);e[r.uuid]=r}return e},n.parseSkeletons=function(t,e){var n={},i={};if(e.traverse((function(t){t.isBone&&(i[t.uuid]=t)})),void 0!==t)for(var r=0,o=t.length;r<o;r++){var s=(new Gr).fromJSON(t[r],i);n[s.uuid]=s}return n},n.parseGeometries=function(t,e){var n,i={};if(void 0!==t)for(var r=new fl,o=0,s=t.length;o<s;o++){var a=void 0,l=t[o];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new zs[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new zs[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new zs[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new zs[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new zs[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new zs[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new zs[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new zs[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new zs[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new zs[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new zs[l.type]((new qa[l.path.type]).fromJSON(l.path),l.tubularSegments,l.radius,l.radialSegments,l.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new zs[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new zs[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":n=[];for(var c=0,u=l.shapes.length;c<u;c++)n.push(e[l.shapes[c]]);a=new zs[l.type](n,l.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":n=[];for(var h=0,d=l.shapes.length;h<d;h++)n.push(e[l.shapes[h]]);var p=l.options.extrudePath;void 0!==p&&(l.options.extrudePath=(new qa[p.type]).fromJSON(p)),a=new zs[l.type](n,l.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?a=(new THREE.LegacyJSONLoader).parse(l,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}a.uuid=l.uuid,void 0!==l.name&&(a.name=l.name),!0===a.isBufferGeometry&&void 0!==l.userData&&(a.userData=l.userData),i[l.uuid]=a}return i},n.parseMaterials=function(t,e){var n={},i={};if(void 0!==t){var r=new ul;r.setTextures(e);for(var o=0,s=t.length;o<s;o++){var a=t[o];if("MultiMaterial"===a.type){for(var l=[],c=0;c<a.materials.length;c++){var u=a.materials[c];void 0===n[u.uuid]&&(n[u.uuid]=r.parse(u)),l.push(n[u.uuid])}i[a.uuid]=l}else void 0===n[a.uuid]&&(n[a.uuid]=r.parse(a)),i[a.uuid]=n[a.uuid]}}return i},n.parseAnimations=function(t){var e={};if(void 0!==t)for(var n=0;n<t.length;n++){var i=pa.parse(t[n]);e[i.uuid]=i}return e},n.parseImages=function(t,e){var n,i=this,r={};function o(t){if("string"==typeof t){var e=t;return function(t){return i.manager.itemStart(t),n.load(t,(function(){i.manager.itemEnd(t)}),void 0,(function(){i.manager.itemError(t),i.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:i.resourcePath+e)}return t.data?{data:ue(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){var s=new ga(e);(n=new xa(s)).setCrossOrigin(this.crossOrigin);for(var a=0,l=t.length;a<l;a++){var c=t[a],u=c.url;if(Array.isArray(u)){r[c.uuid]=[];for(var h=0,d=u.length;h<d;h++){var p=o(u[h]);null!==p&&(p instanceof HTMLImageElement?r[c.uuid].push(p):r[c.uuid].push(new Qe(p.data,p.width,p.height)))}}else{var f=o(c.url);null!==f&&(r[c.uuid]=f)}}}return r},n.parseTextures=function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var r=0,o=t.length;r<o;r++){var s=t[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var a=void 0,l=e[s.image];Array.isArray(l)?(a=new $e(l),6===l.length&&(a.needsUpdate=!0)):(a=l&&l.data?new Qe(l.data,l.width,l.height):new g(l),l&&(a.needsUpdate=!0)),a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,vl)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],yl),a.wrapT=n(s.wrap[1],yl)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,bl)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,bl)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),i[s.uuid]=a}return i},n.parseObject=function(t,e,n,i){var r,o,s;function a(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function l(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var o=t[i];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":r=new dr,void 0!==t.background&&Number.isInteger(t.background)&&(r.background=new Ht(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?r.fog=new hr(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(r.fog=new ur(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":r=new We(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(r.focus=t.focus),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.filmGauge&&(r.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(r.filmOffset=t.filmOffset),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"OrthographicCamera":r=new il(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"AmbientLight":r=new sl(t.color,t.intensity);break;case"DirectionalLight":r=new ol(t.color,t.intensity);break;case"PointLight":r=new nl(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":r=new al(t.color,t.intensity,t.width,t.height);break;case"SpotLight":r=new tl(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":r=new Ka(t.color,t.groundColor,t.intensity);break;case"LightProbe":r=(new cl).fromJSON(t);break;case"SkinnedMesh":r=new Vr(o=a(t.geometry),s=l(t.material)),void 0!==t.bindMode&&(r.bindMode=t.bindMode),void 0!==t.bindMatrix&&r.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(r.skeleton=t.skeleton);break;case"Mesh":r=new Fe(o=a(t.geometry),s=l(t.material));break;case"InstancedMesh":o=a(t.geometry),s=l(t.material);var c=t.instanceMatrix;(r=new Qr(o,s,t.count)).instanceMatrix=new Xt(new Float32Array(c.array),16);break;case"LOD":r=new Ur;break;case"Line":r=new no(a(t.geometry),l(t.material),t.mode);break;case"LineLoop":r=new so(a(t.geometry),l(t.material));break;case"LineSegments":r=new oo(a(t.geometry),l(t.material));break;case"PointCloud":case"Points":r=new po(a(t.geometry),l(t.material));break;case"Sprite":r=new kr(l(t.material));break;case"Group":r=new tr;break;case"Bone":r=new jr;break;default:r=new wt}if(r.uuid=t.uuid,void 0!==t.name&&(r.name=t.name),void 0!==t.matrix?(r.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(r.matrixAutoUpdate=t.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==t.position&&r.position.fromArray(t.position),void 0!==t.rotation&&r.rotation.fromArray(t.rotation),void 0!==t.quaternion&&r.quaternion.fromArray(t.quaternion),void 0!==t.scale&&r.scale.fromArray(t.scale)),void 0!==t.castShadow&&(r.castShadow=t.castShadow),void 0!==t.receiveShadow&&(r.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(r.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(r.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(r.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&r.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(r.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.frustumCulled&&(r.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(r.renderOrder=t.renderOrder),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.layers&&(r.layers.mask=t.layers),void 0!==t.children)for(var u=t.children,h=0;h<u.length;h++)r.add(this.parseObject(u[h],e,n,i));if(void 0!==t.animations)for(var d=t.animations,p=0;p<d.length;p++)r.animations.push(i[d[p]]);if("LOD"===t.type){void 0!==t.autoUpdate&&(r.autoUpdate=t.autoUpdate);for(var f=t.levels,m=0;m<f.length;m++){var g=f[m],v=r.getObjectByProperty("uuid",g.object);void 0!==v&&r.addLevel(v,g.distance)}}return r},n.bindSkeletons=function(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){var n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}}))},n.setTexturePath=function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)},e}(ya),vl={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},yl={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},bl={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008};function _l(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),ya.call(this,t),this.options={premultiplyAlpha:"none"}}function wl(){this.type="ShapePath",this.color=new Ht,this.subPaths=[],this.currentPath=null}function Al(t){this.type="Font",this.data=t}function xl(t,e,n,i,r){var o=r.glyphs[t]||r.glyphs["?"];if(o){var s,a,l,c,u,h,d,p,f=new wl;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),g=0,v=m.length;g<v;)switch(m[g++]){case"m":s=m[g++]*e+n,a=m[g++]*e+i,f.moveTo(s,a);break;case"l":s=m[g++]*e+n,a=m[g++]*e+i,f.lineTo(s,a);break;case"q":l=m[g++]*e+n,c=m[g++]*e+i,u=m[g++]*e+n,h=m[g++]*e+i,f.quadraticCurveTo(u,h,l,c);break;case"b":l=m[g++]*e+n,c=m[g++]*e+i,u=m[g++]*e+n,h=m[g++]*e+i,d=m[g++]*e+n,p=m[g++]*e+i,f.bezierCurveTo(u,h,d,p,l,c)}return{offsetX:o.ha*e,path:f}}console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".")}function Cl(t){ya.call(this,t)}_l.prototype=Object.assign(Object.create(ya.prototype),{constructor:_l,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=ma.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout((function(){e&&e(o),r.manager.itemEnd(t)}),0),o;var s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(t,s).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,r.options)})).then((function(n){ma.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}),Object.assign(wl.prototype,{moveTo:function(t,e){return this.currentPath=new Ya,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this},bezierCurveTo:function(t,e,n,i,r,o){return this.currentPath.bezierCurveTo(t,e,n,i,r,o),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],o=new Qa;o.curves=r.curves,e.push(o)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,o=0;o<n;r=o++){var s=e[r],a=e[o],l=a.x-s.x,c=a.y-s.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(s=e[o],l=-l,a=e[r],c=-c),t.y<s.y||t.y>a.y)continue;if(t.y===s.y){if(t.x===s.x)return!0}else{var u=c*(t.x-s.x)-l*(t.y-s.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(t.y!==s.y)continue;if(a.x<=t.x&&t.x<=s.x||s.x<=t.x&&t.x<=a.x)return!0}}return i}var r,o,s,a=cs.isClockWise,l=this.subPaths;if(0===l.length)return[];if(!0===e)return n(l);var c=[];if(1===l.length)return o=l[0],(s=new Qa).curves=o.curves,c.push(s),c;var u=!a(l[0].getPoints());u=t?!u:u;var h,d,p=[],f=[],m=[],g=0;f[g]=void 0,m[g]=[];for(var v=0,y=l.length;v<y;v++)r=a(h=(o=l[v]).getPoints()),(r=t?!r:r)?(!u&&f[g]&&g++,f[g]={s:new Qa,p:h},f[g].s.curves=o.curves,u&&g++,m[g]=[]):m[g].push({h:o,p:h[0]});if(!f[0])return n(l);if(f.length>1){for(var b=!1,_=[],w=0,A=f.length;w<A;w++)p[w]=[];for(var x=0,C=f.length;x<C;x++)for(var E=m[x],S=0;S<E.length;S++){for(var M=E[S],T=!0,P=0;P<f.length;P++)i(M.p,f[P].p)&&(x!==P&&_.push({froms:x,tos:P,hole:S}),T?(T=!1,p[P].push(M)):b=!0);T&&p[x].push(M)}_.length>0&&(b||(m=p))}for(var k=0,D=f.length;k<D;k++){c.push(s=f[k].s);for(var O=0,R=(d=m[k]).length;O<R;O++)s.holes.push(d[O].h)}return c}}),Object.assign(Al.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],i=function(t,e,n){for(var i=Array.from?Array.from(t):String(t).split(""),r=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,s=[],a=0,l=0,c=0;c<i.length;c++){var u=i[c];if("\n"===u)a=0,l-=o;else{var h=xl(u,r,a,l,n);a+=h.offsetX,s.push(h.path)}}return s}(t,e,this.data),r=0,o=i.length;r<o;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),Cl.prototype=Object.assign(Object.create(ya.prototype),{constructor:Cl,load:function(t,n,i,r){var o=this,s=new _a(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,(function(t){var i;try{i=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(t.substring(65,t.length-2))}var r=o.parse(i);n&&n(r)}),i,r)},parse:function(t){return new Al(t)}});var El={getContext:function(){return void 0===ml&&(ml=new(window.AudioContext||window.webkitAudioContext)),ml},setContext:function(t){ml=t}};function Sl(t){ya.call(this,t)}function Ml(t,e,n){cl.call(this,void 0,n);var i=(new Ht).set(t),r=(new Ht).set(e),o=new A(i.r,i.g,i.b),s=new A(r.r,r.g,r.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(s).multiplyScalar(a),this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(l)}function Tl(t,e){cl.call(this,void 0,e);var n=(new Ht).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Sl.prototype=Object.assign(Object.create(ya.prototype),{constructor:Sl,load:function(t,n,i,r){var o=this,s=new _a(o.manager);s.setResponseType("arraybuffer"),s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,(function(i){try{var s=i.slice(0);El.getContext().decodeAudioData(s,(function(t){n(t)}))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),i,r)}}),Ml.prototype=Object.assign(Object.create(cl.prototype),{constructor:Ml,isHemisphereLightProbe:!0,copy:function(t){return cl.prototype.copy.call(this,t),this},toJSON:function(t){return cl.prototype.toJSON.call(this,t)}}),Tl.prototype=Object.assign(Object.create(cl.prototype),{constructor:Tl,isAmbientLightProbe:!0,copy:function(t){return cl.prototype.copy.call(this,t),this},toJSON:function(t){return cl.prototype.toJSON.call(this,t)}});var Pl=new X,kl=new X;function Dl(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new We,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new We,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(Dl.prototype,{update:function(t){var e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var n,i,r=t.projectionMatrix.clone(),o=e.eyeSep/2,a=o*e.near/e.focus,l=e.near*Math.tan(s.DEG2RAD*e.fov*.5)/e.zoom;kl.elements[12]=-o,Pl.elements[12]=o,r.elements[0]=2*e.near/((i=l*e.aspect+a)-(n=-l*e.aspect+a)),r.elements[8]=(i+n)/(i-n),this.cameraL.projectionMatrix.copy(r),r.elements[0]=2*e.near/((i=l*e.aspect-a)-(n=-l*e.aspect-a)),r.elements[8]=(i+n)/(i-n),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(kl),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Pl)}});var Ol=function(){function t(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}var e=t.prototype;return e.start=function(){this.startTime=Rl(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},e.stop=function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},e.getElapsedTime=function(){return this.getDelta(),this.elapsedTime},e.getDelta=function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=Rl();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t},t}();function Rl(){return("undefined"==typeof performance?Date:performance).now()}var Il=new A,Ll=new w,Fl=new A,Nl=new A,Bl=function(t){function e(){var e;return(e=t.call(this)||this).type="AudioListener",e.context=El.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new Ol,e}c(e,t);var n=e.prototype;return n.getInput=function(){return this.gain},n.removeFilter=function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},n.getFilter=function(){return this.filter},n.setFilter=function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},n.getMasterVolume=function(){return this.gain.gain.value},n.setMasterVolume=function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},n.updateMatrixWorld=function(e){t.prototype.updateMatrixWorld.call(this,e);var n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Il,Ll,Fl),Nl.set(0,0,-1).applyQuaternion(Ll),n.positionX){var r=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Il.x,r),n.positionY.linearRampToValueAtTime(Il.y,r),n.positionZ.linearRampToValueAtTime(Il.z,r),n.forwardX.linearRampToValueAtTime(Nl.x,r),n.forwardY.linearRampToValueAtTime(Nl.y,r),n.forwardZ.linearRampToValueAtTime(Nl.z,r),n.upX.linearRampToValueAtTime(i.x,r),n.upY.linearRampToValueAtTime(i.y,r),n.upZ.linearRampToValueAtTime(i.z,r)}else n.setPosition(Il.x,Il.y,Il.z),n.setOrientation(Nl.x,Nl.y,Nl.z,i.x,i.y,i.z)},e}(wt),Ul=function(t){function e(e){var n;return(n=t.call(this)||this).type="Audio",n.listener=e,n.context=e.context,n.gain=n.context.createGain(),n.gain.connect(e.getInput()),n.autoplay=!1,n.buffer=null,n.detune=0,n.loop=!1,n.loopStart=0,n.loopEnd=0,n.offset=0,n.duration=void 0,n.playbackRate=1,n.isPlaying=!1,n.hasPlaybackControl=!0,n.source=null,n.sourceType="empty",n._startedAt=0,n._progress=0,n._connected=!1,n.filters=[],n}c(e,t);var n=e.prototype;return n.getOutput=function(){return this.gain},n.setNodeSource=function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},n.setMediaElementSource=function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},n.setMediaStreamSource=function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this},n.setBuffer=function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},n.play=function(t){if(void 0===t&&(t=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},n.pause=function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},n.stop=function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},n.connect=function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this},n.disconnect=function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this},n.getFilters=function(){return this.filters},n.setFilters=function(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this},n.setDetune=function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},n.getDetune=function(){return this.detune},n.getFilter=function(){return this.getFilters()[0]},n.setFilter=function(t){return this.setFilters(t?[t]:[])},n.setPlaybackRate=function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},n.getPlaybackRate=function(){return this.playbackRate},n.onEnded=function(){this.isPlaying=!1},n.getLoop=function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},n.setLoop=function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},n.setLoopStart=function(t){return this.loopStart=t,this},n.setLoopEnd=function(t){return this.loopEnd=t,this},n.getVolume=function(){return this.gain.gain.value},n.setVolume=function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},e}(wt),Vl=new A,jl=new w,zl=new A,Hl=new A,Gl=function(t){function e(e){var n;return(n=t.call(this,e)||this).panner=n.context.createPanner(),n.panner.panningModel="HRTF",n.panner.connect(n.gain),n}c(e,t);var n=e.prototype;return n.getOutput=function(){return this.panner},n.getRefDistance=function(){return this.panner.refDistance},n.setRefDistance=function(t){return this.panner.refDistance=t,this},n.getRolloffFactor=function(){return this.panner.rolloffFactor},n.setRolloffFactor=function(t){return this.panner.rolloffFactor=t,this},n.getDistanceModel=function(){return this.panner.distanceModel},n.setDistanceModel=function(t){return this.panner.distanceModel=t,this},n.getMaxDistance=function(){return this.panner.maxDistance},n.setMaxDistance=function(t){return this.panner.maxDistance=t,this},n.setDirectionalCone=function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},n.updateMatrixWorld=function(e){if(t.prototype.updateMatrixWorld.call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(Vl,jl,zl),Hl.set(0,0,1).applyQuaternion(jl);var n=this.panner;if(n.positionX){var i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Vl.x,i),n.positionY.linearRampToValueAtTime(Vl.y,i),n.positionZ.linearRampToValueAtTime(Vl.z,i),n.orientationX.linearRampToValueAtTime(Hl.x,i),n.orientationY.linearRampToValueAtTime(Hl.y,i),n.orientationZ.linearRampToValueAtTime(Hl.z,i)}else n.setPosition(Vl.x,Vl.y,Vl.z),n.setOrientation(Hl.x,Hl.y,Hl.z)}},e}(Ul),Wl=function(){function t(t,e){void 0===e&&(e=2048),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}var e=t.prototype;return e.getFrequencyData=function(){return this.analyser.getByteFrequencyData(this.data),this.data},e.getAverageFrequency=function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length},t}();function ql(t,e,n){var i,r,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(ql.prototype,{accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,o=this.cumulativeWeight;if(0===o){for(var s=0;s!==i;++s)n[r+s]=n[s];o=e}else this._mixBufferRegion(n,r,0,e/(o+=e),i);this.cumulativeWeight=o},accumulateAdditive:function(t){var e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1&&this._mixBufferRegion(n,i,e*this._origIndex,1-r,e),o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(var a=e,l=e+e;a!==l;++a)if(n[a]!==n[a+e]){s.setValue(n,i);break}},saveOriginalState:function(){var t=this.buffer,e=this.valueSize,n=e*this._origIndex;this.binding.getValue(t,n);for(var i=e,r=n;i!==r;++i)t[i]=t[n+i%e];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_setAdditiveIdentityNumeric:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,n=t;n<e;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]},_select:function(t,e,n,i,r){if(i>=.5)for(var o=0;o!==r;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,i){w.slerpFlat(t,e,t,e,t,n,i)},_slerpAdditive:function(t,e,n,i,r){var o=this._workIndex*r;w.multiplyQuaternionsFlat(t,o,t,e,t,n),w.slerpFlat(t,e,t,e,t,o,i)},_lerp:function(t,e,n,i,r){for(var o=1-i,s=0;s!==r;++s){var a=e+s;t[a]=t[a]*o+t[n+s]*i}},_lerpAdditive:function(t,e,n,i,r){for(var o=0;o!==r;++o){var s=e+o;t[s]=t[s]+t[n+o]*i}}});var $l=new RegExp("[\\[\\]\\.:\\/]","g"),Yl="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Ql=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Xl=/(WCOD+)?/.source.replace("WCOD",Yl),Kl=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Zl=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Jl=new RegExp("^"+Ql+Xl+Kl+Zl+"$"),tc=["material","materials","bones"];function ec(t,e,n){var i=n||nc.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function nc(t,e,n){this.path=e,this.parsedPath=n||nc.parseTrackName(e),this.node=nc.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function ic(){this.uuid=s.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}Object.assign(ec.prototype,{getValue:function(t,e){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(nc,{Composite:ec,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new nc.Composite(t,e,n):new nc(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace($l,"")},parseTrackName:function(t){var e=Jl.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==tc.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function t(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===e||r.uuid===e)return r;var o=t(r.children);if(o)return o}return null}(t.children);if(i)return i}return null}}),Object.assign(nc.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=nc.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var a=t[i];if(void 0!==a){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+e.nodeName+"."+i+" but it wasn't found.",t)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(nc.prototype,{_getValue_unbound:nc.prototype.getValue,_setValue_unbound:nc.prototype.setValue}),Object.assign(ic.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,o=r.length,s=void 0,a=t.length,l=this.nCachedObjects_,c=0,u=arguments.length;c!==u;++c){var h=arguments[c],d=h.uuid,p=e[d];if(void 0===p){p=a++,e[d]=p,t.push(h);for(var f=0,m=o;f!==m;++f)r[f].push(new nc(h,n[f],i[f]))}else if(p<l){s=t[p];var g=--l,v=t[g];e[v.uuid]=p,t[p]=v,e[d]=g,t[g]=h;for(var y=0,b=o;y!==b;++y){var _=r[y],w=_[g],A=_[p];_[p]=w,void 0===A&&(A=new nc(h,n[y],i[y])),_[g]=A}}else t[p]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,o=0,s=arguments.length;o!==s;++o){var a=arguments[o],l=a.uuid,c=e[l];if(void 0!==c&&c>=r){var u=r++,h=t[u];e[h.uuid]=c,t[c]=h,e[l]=u,t[u]=a;for(var d=0,p=i;d!==p;++d){var f=n[d],m=f[u],g=f[c];f[c]=m,f[u]=g}}}this.nCachedObjects_=r},uncache:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,o=t.length,s=0,a=arguments.length;s!==a;++s){var l=arguments[s],c=l.uuid,u=e[c];if(void 0!==u)if(delete e[c],u<r){var h=--r,d=t[h],p=--o,f=t[p];e[d.uuid]=u,t[u]=d,e[f.uuid]=h,t[h]=f,t.pop();for(var m=0,g=i;m!==g;++m){var v=n[m],y=v[h],b=v[p];v[u]=y,v[h]=b,v.pop()}}else{var _=--o,w=t[_];_>0&&(e[w.uuid]=u),t[u]=w,t.pop();for(var A=0,x=i;A!==x;++A){var C=n[A];C[u]=C[_],C.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var o=this._paths,s=this._parsedPaths,a=this._objects,l=this.nCachedObjects_,c=new Array(a.length);n[t]=i=r.length,o.push(t),s.push(e),r.push(c);for(var u=l,h=a.length;u!==h;++u)c[u]=new nc(a[u],t,e);return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];e[t[s]]=n,o[n]=a,o.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}});var rc=function(){function t(t,e,n,i){void 0===n&&(n=null),void 0===i&&(i=e.blendMode),this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;for(var r=e.tracks,o=r.length,s=new Array(o),a={endingStart:2400,endingEnd:2400},l=0;l!==o;++l){var c=r[l].createInterpolant(null);s[l]=c,c.settings=a}this._interpolantSettings=a,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}var e=t.prototype;return e.play=function(){return this._mixer._activateAction(this),this},e.stop=function(){return this._mixer._deactivateAction(this),this.reset()},e.reset=function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},e.isRunning=function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},e.isScheduled=function(){return this._mixer._isActiveAction(this)},e.startAt=function(t){return this._startTime=t,this},e.setLoop=function(t,e){return this.loop=t,this.repetitions=e,this},e.setEffectiveWeight=function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},e.getEffectiveWeight=function(){return this._effectiveWeight},e.fadeIn=function(t){return this._scheduleFading(t,0,1)},e.fadeOut=function(t){return this._scheduleFading(t,1,0)},e.crossFadeFrom=function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,o=i/r;t.warp(1,r/i,e),this.warp(o,1,e)}return this},e.crossFadeTo=function(t,e,n){return t.crossFadeFrom(this,e,n)},e.stopFading=function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},e.setEffectiveTimeScale=function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},e.getEffectiveTimeScale=function(){return this._effectiveTimeScale},e.setDuration=function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},e.syncWith=function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},e.halt=function(t){return this.warp(this._effectiveTimeScale,0,t)},e.warp=function(t,e,n){var i=this._mixer,r=i.time,o=this.timeScale,s=this._timeScaleInterpolant;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);var a=s.parameterPositions,l=s.sampleValues;return a[0]=r,a[1]=r+n,l[0]=t/o,l[1]=e/o,this},e.stopWarping=function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},e.getMixer=function(){return this._mixer},e.getClip=function(){return this._clip},e.getRoot=function(){return this._localRoot||this._mixer._root},e._update=function(t,e,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var o=(t-r)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var s=this._updateTime(e),a=this._updateWeight(t);if(a>0){var l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case 2501:for(var u=0,h=l.length;u!==h;++u)l[u].evaluate(s),c[u].accumulateAdditive(a);break;case 2500:default:for(var d=0,p=l.length;d!==p;++d)l[d].evaluate(s),c[d].accumulate(i,a)}}}else this._updateWeight(t)},e._updateWeight=function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e},e._updateTimeScale=function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e},e._updateTime=function(t){var e=this._clip.duration,n=this.loop,i=this.time+t,r=this._loopCount,o=2202===n;if(0===t)return-1===r?i:o&&1==(1&r)?e-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=e||i<0){var s=Math.floor(i/e);i-=e*s,r+=Math.abs(s);var a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i=t>0?e:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){var l=t<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=i;if(o&&1==(1&r))return e-i}return i},e._setEndings=function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,i.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)},e._scheduleFading=function(t,e,n){var i=this._mixer,r=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var s=o.parameterPositions,a=o.sampleValues;return s[0]=r,a[0]=e,s[1]=r+t,a[1]=n,this},t}();function oc(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}oc.prototype=Object.assign(Object.create(n.prototype),{constructor:oc,_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,o=t._propertyBindings,s=t._interpolants,a=n.uuid,l=this._bindingsByRootAndName,c=l[a];void 0===c&&(l[a]=c={});for(var u=0;u!==r;++u){var h=i[u],d=h.name,p=c[d];if(void 0!==p)o[u]=p;else{if(void 0!==(p=o[u])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,a,d));continue}++(p=new ql(nc.create(n,d,e&&e._propertyBindings[u].binding.parsedPath),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,a,d),o[u]=p}s[u].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,o=0,s=r.length;o!==s;++o){var a=r[o];0==a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{var s=o.knownActions;t._byClipCacheIndex=s.length,s.push(t)}t._cacheIndex=i.length,i.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,o=this._actionsByClip,s=o[r],a=s.knownActions,l=a[a.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),t._byClipCacheIndex=null,delete s.actionByRoot[(t._localRoot||this._root).uuid],0===a.length&&delete o[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=this._bindings,o=i[e];void 0===o&&(i[e]=o={}),o[n]=t,t._cacheIndex=r.length,r.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,s=o[i],a=e[e.length-1],l=t._cacheIndex;a._cacheIndex=l,e[l]=a,e.pop(),delete s[r],0===Object.keys(s).length&&delete o[i]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new ia(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){var i=e||this._root,r=i.uuid,o="string"==typeof t?pa.findByName(i,t):t,s=null!==o?o.uuid:t,a=this._actionsByClip[s],l=null;if(void 0===n&&(n=null!==o?o.blendMode:2500),void 0!==a){var c=a.actionByRoot[r];if(void 0!==c&&c.blendMode===n)return c;l=a.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;var u=new rc(this,o,e,n);return this._bindAction(u,l),this._addInactiveAction(u,s,r),u},existingAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?pa.findByName(n,t):t,o=this._actionsByClip[r?r.uuid:t];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this},update:function(t){for(var e=this._actions,n=this._nActiveActions,i=this.time+=t*=this.timeScale,r=Math.sign(t),o=this._accuIndex^=1,s=0;s!==n;++s)e[s]._update(i,t,r,o);for(var a=this._bindings,l=this._nActiveBindings,c=0;c!==l;++c)a[c].apply(o);return this},setTime:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var o=r.knownActions,s=0,a=o.length;s!==a;++s){var l=o[s];this._deactivateAction(l);var c=l._cacheIndex,u=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,e[c]=u,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var o=this._bindingsByRootAndName[e];if(void 0!==o)for(var s in o){var a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});var sc=function(){function t(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return t.prototype.clone=function(){return new t(void 0===this.value.clone?this.value:this.value.clone())},t}();function ac(t,e,n){pr.call(this,t,e),this.meshPerAttribute=n||1}function lc(t,e,n,i,r){this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}function cc(t,e,n,i){this.ray=new Q(t,e),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new at,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function uc(t,e){return t.distance-e.distance}function hc(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i)for(var r=t.children,o=0,s=r.length;o<s;o++)hc(r[o],e,n,!0)}ac.prototype=Object.assign(Object.create(pr.prototype),{constructor:ac,isInstancedInterleavedBuffer:!0,copy:function(t){return pr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){var e=pr.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){var e=pr.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}),Object.defineProperty(lc.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(lc.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}}),Object.assign(cc.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var i=n||[];return hc(t,this,i,e),i.sort(uc),i},intersectObjects:function(t,e,n){var i=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,o=t.length;r<o;r++)hc(t[r],this,i,e);return i.sort(uc),i}});var dc=function(){function t(t,e,n){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),this.radius=t,this.phi=e,this.theta=n,this}var e=t.prototype;return e.set=function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},e.clone=function(){return(new this.constructor).copy(this)},e.copy=function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},e.makeSafe=function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},e.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},e.setFromCartesianCoords=function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(s.clamp(e/this.radius,-1,1))),this},t}(),pc=function(){function t(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}var e=t.prototype;return e.set=function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},e.clone=function(){return(new this.constructor).copy(this)},e.copy=function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},e.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},e.setFromCartesianCoords=function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this},t}(),fc=new d,mc=function(){function t(t,e){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==t?t:new d(1/0,1/0),this.max=void 0!==e?e:new d(-1/0,-1/0)}var e=t.prototype;return e.set=function(t,e){return this.min.copy(t),this.max.copy(e),this},e.setFromPoints=function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},e.setFromCenterAndSize=function(t,e){var n=fc.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},e.clone=function(){return(new this.constructor).copy(this)},e.copy=function(t){return this.min.copy(t.min),this.max.copy(t.max),this},e.makeEmpty=function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},e.isEmpty=function(){return this.max.x<this.min.x||this.max.y<this.min.y},e.getCenter=function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new d),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},e.getSize=function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new d),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},e.expandByPoint=function(t){return this.min.min(t),this.max.max(t),this},e.expandByVector=function(t){return this.min.sub(t),this.max.add(t),this},e.expandByScalar=function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},e.containsPoint=function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},e.containsBox=function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},e.getParameter=function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new d),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},e.intersectsBox=function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},e.clampPoint=function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new d),e.copy(t).clamp(this.min,this.max)},e.distanceToPoint=function(t){return fc.copy(t).clamp(this.min,this.max).sub(t).length()},e.intersect=function(t){return this.min.max(t.min),this.max.min(t.max),this},e.union=function(t){return this.min.min(t.min),this.max.max(t.max),this},e.translate=function(t){return this.min.add(t),this.max.add(t),this},e.equals=function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},t}(),gc=new A,vc=new A,yc=function(){function t(t,e){this.start=void 0!==t?t:new A,this.end=void 0!==e?e:new A}var e=t.prototype;return e.set=function(t,e){return this.start.copy(t),this.end.copy(e),this},e.clone=function(){return(new this.constructor).copy(this)},e.copy=function(t){return this.start.copy(t.start),this.end.copy(t.end),this},e.getCenter=function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new A),t.addVectors(this.start,this.end).multiplyScalar(.5)},e.delta=function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new A),t.subVectors(this.end,this.start)},e.distanceSq=function(){return this.start.distanceToSquared(this.end)},e.distance=function(){return this.start.distanceTo(this.end)},e.at=function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new A),this.delta(e).multiplyScalar(t).add(this.start)},e.closestPointToPointParameter=function(t,e){gc.subVectors(t,this.start),vc.subVectors(this.end,this.start);var n=vc.dot(vc),i=vc.dot(gc)/n;return e&&(i=s.clamp(i,0,1)),i},e.closestPointToPoint=function(t,e,n){var i=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new A),this.delta(n).multiplyScalar(i).add(this.start)},e.applyMatrix4=function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},e.equals=function(t){return t.start.equals(this.start)&&t.end.equals(this.end)},t}();function bc(t){wt.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}(bc.prototype=Object.create(wt.prototype)).constructor=bc,bc.prototype.isImmediateRenderObject=!0;var _c=new A,wc=function(t){function e(e,n){var i;(i=t.call(this)||this).light=e,i.light.updateMatrixWorld(),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.color=n;for(var r=new ye,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],s=0,a=1;s<32;s++,a++){var l=s/32*Math.PI*2,c=a/32*Math.PI*2;o.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new oe(o,3));var u=new Xr({fog:!1,toneMapped:!1});return i.cone=new oo(r,u),i.add(i.cone),i.update(),i}c(e,t);var n=e.prototype;return n.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},n.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),_c.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_c),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)},e}(wt),Ac=new A,xc=new X,Cc=new X,Ec=function(t){function e(e){for(var n,i=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(e),r=new ye,o=[],s=[],a=new Ht(0,0,1),l=new Ht(0,1,0),c=0;c<i.length;c++){var u=i[c];u.parent&&u.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(a.r,a.g,a.b),s.push(l.r,l.g,l.b))}r.setAttribute("position",new oe(o,3)),r.setAttribute("color",new oe(s,3));var h=new Xr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(n=t.call(this,r,h)||this).type="SkeletonHelper",n.isSkeletonHelper=!0,n.root=e,n.bones=i,n.matrix=e.matrixWorld,n.matrixAutoUpdate=!1,n}return c(e,t),e.prototype.updateMatrixWorld=function(e){var n=this.bones,i=this.geometry,r=i.getAttribute("position");Cc.copy(this.root.matrixWorld).invert();for(var o=0,s=0;o<n.length;o++){var a=n[o];a.parent&&a.parent.isBone&&(xc.multiplyMatrices(Cc,a.matrixWorld),Ac.setFromMatrixPosition(xc),r.setXYZ(s,Ac.x,Ac.y,Ac.z),xc.multiplyMatrices(Cc,a.parent.matrixWorld),Ac.setFromMatrixPosition(xc),r.setXYZ(s+1,Ac.x,Ac.y,Ac.z),s+=2)}i.getAttribute("position").needsUpdate=!0,t.prototype.updateMatrixWorld.call(this,e)},e}(oo),Sc=function(t){function e(e,n,i){var r,o=new Ps(n,4,2),s=new $t({wireframe:!0,fog:!1,toneMapped:!1});return(r=t.call(this,o,s)||this).light=e,r.light.updateMatrixWorld(),r.color=i,r.type="PointLightHelper",r.matrix=r.light.matrixWorld,r.matrixAutoUpdate=!1,r.update(),r}c(e,t);var n=e.prototype;return n.dispose=function(){this.geometry.dispose(),this.material.dispose()},n.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},e}(Fe),Mc=new A,Tc=new Ht,Pc=new Ht,kc=function(t){function e(e,n,i){var r;(r=t.call(this)||this).light=e,r.light.updateMatrixWorld(),r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.color=i;var o=new bs(n);o.rotateY(.5*Math.PI),r.material=new $t({wireframe:!0,fog:!1,toneMapped:!1}),void 0===r.color&&(r.material.vertexColors=!0);var s=o.getAttribute("position"),a=new Float32Array(3*s.count);return o.setAttribute("color",new Xt(a,3)),r.add(new Fe(o,r.material)),r.update(),r}c(e,t);var n=e.prototype;return n.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},n.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");Tc.copy(this.light.color),Pc.copy(this.light.groundColor);for(var n=0,i=e.count;n<i;n++){var r=n<i/2?Tc:Pc;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(Mc.setFromMatrixPosition(this.light.matrixWorld).negate())},e}(wt),Dc=function(t){function e(e,n,i,r){var o;void 0===e&&(e=10),void 0===n&&(n=10),void 0===i&&(i=4473924),void 0===r&&(r=8947848),i=new Ht(i),r=new Ht(r);for(var s=n/2,a=e/n,l=e/2,c=[],u=[],h=0,d=0,p=-l;h<=n;h++,p+=a){c.push(-l,0,p,l,0,p),c.push(p,0,-l,p,0,l);var f=h===s?i:r;f.toArray(u,d),f.toArray(u,d+=3),f.toArray(u,d+=3),f.toArray(u,d+=3),d+=3}var m=new ye;m.setAttribute("position",new oe(c,3)),m.setAttribute("color",new oe(u,3));var g=new Xr({vertexColors:!0,toneMapped:!1});return(o=t.call(this,m,g)||this).type="GridHelper",o}return c(e,t),e}(oo),Oc=function(t){function e(e,n,i,r,o,s){var a;void 0===e&&(e=10),void 0===n&&(n=16),void 0===i&&(i=8),void 0===r&&(r=64),void 0===o&&(o=4473924),void 0===s&&(s=8947848),o=new Ht(o),s=new Ht(s);for(var l=[],c=[],u=0;u<=n;u++){var h=u/n*(2*Math.PI),d=Math.sin(h)*e,p=Math.cos(h)*e;l.push(0,0,0),l.push(d,0,p);var f=1&u?o:s;c.push(f.r,f.g,f.b),c.push(f.r,f.g,f.b)}for(var m=0;m<=i;m++)for(var g=1&m?o:s,v=e-e/i*m,y=0;y<r;y++){var b=y/r*(2*Math.PI),_=Math.sin(b)*v,w=Math.cos(b)*v;l.push(_,0,w),c.push(g.r,g.g,g.b),b=(y+1)/r*(2*Math.PI),_=Math.sin(b)*v,w=Math.cos(b)*v,l.push(_,0,w),c.push(g.r,g.g,g.b)}var A=new ye;A.setAttribute("position",new oe(l,3)),A.setAttribute("color",new oe(c,3));var x=new Xr({vertexColors:!0,toneMapped:!1});return(a=t.call(this,A,x)||this).type="PolarGridHelper",a}return c(e,t),e}(oo),Rc=new A,Ic=new A,Lc=new A,Fc=function(t){function e(e,n,i){var r;(r=t.call(this)||this).light=e,r.light.updateMatrixWorld(),r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.color=i,void 0===n&&(n=1);var o=new ye;o.setAttribute("position",new oe([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));var s=new Xr({fog:!1,toneMapped:!1});return r.lightPlane=new no(o,s),r.add(r.lightPlane),(o=new ye).setAttribute("position",new oe([0,0,0,0,0,1],3)),r.targetLine=new no(o,s),r.add(r.targetLine),r.update(),r}c(e,t);var n=e.prototype;return n.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},n.update=function(){Rc.setFromMatrixPosition(this.light.matrixWorld),Ic.setFromMatrixPosition(this.light.target.matrixWorld),Lc.subVectors(Ic,Rc),this.lightPlane.lookAt(Ic),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ic),this.targetLine.scale.z=Lc.length()},e}(wt),Nc=new A,Bc=new Ge,Uc=function(t){function e(e){var n,i=new ye,r=new Xr({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],s=[],a={},l=new Ht(16755200),c=new Ht(16711680),u=new Ht(43775),h=new Ht(16777215),d=new Ht(3355443);function p(t,e,n){f(t,n),f(e,n)}function f(t,e){o.push(0,0,0),s.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(o.length/3-1)}return p("n1","n2",l),p("n2","n4",l),p("n4","n3",l),p("n3","n1",l),p("f1","f2",l),p("f2","f4",l),p("f4","f3",l),p("f3","f1",l),p("n1","f1",l),p("n2","f2",l),p("n3","f3",l),p("n4","f4",l),p("p","n1",c),p("p","n2",c),p("p","n3",c),p("p","n4",c),p("u1","u2",u),p("u2","u3",u),p("u3","u1",u),p("c","t",h),p("p","c",d),p("cn1","cn2",d),p("cn3","cn4",d),p("cf1","cf2",d),p("cf3","cf4",d),i.setAttribute("position",new oe(o,3)),i.setAttribute("color",new oe(s,3)),(n=t.call(this,i,r)||this).type="CameraHelper",n.camera=e,n.camera.updateProjectionMatrix&&n.camera.updateProjectionMatrix(),n.matrix=e.matrixWorld,n.matrixAutoUpdate=!1,n.pointMap=a,n.update(),n}return c(e,t),e.prototype.update=function(){var t=this.geometry,e=this.pointMap;Bc.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Vc("c",e,t,Bc,0,0,-1),Vc("t",e,t,Bc,0,0,1),Vc("n1",e,t,Bc,-1,-1,-1),Vc("n2",e,t,Bc,1,-1,-1),Vc("n3",e,t,Bc,-1,1,-1),Vc("n4",e,t,Bc,1,1,-1),Vc("f1",e,t,Bc,-1,-1,1),Vc("f2",e,t,Bc,1,-1,1),Vc("f3",e,t,Bc,-1,1,1),Vc("f4",e,t,Bc,1,1,1),Vc("u1",e,t,Bc,.7,1.1,-1),Vc("u2",e,t,Bc,-.7,1.1,-1),Vc("u3",e,t,Bc,0,2,-1),Vc("cf1",e,t,Bc,-1,0,1),Vc("cf2",e,t,Bc,1,0,1),Vc("cf3",e,t,Bc,0,-1,1),Vc("cf4",e,t,Bc,0,1,1),Vc("cn1",e,t,Bc,-1,0,-1),Vc("cn2",e,t,Bc,1,0,-1),Vc("cn3",e,t,Bc,0,-1,-1),Vc("cn4",e,t,Bc,0,1,-1),t.getAttribute("position").needsUpdate=!0},e}(oo);function Vc(t,e,n,i,r,o,s){Nc.set(r,o,s).unproject(i);var a=e[t];if(void 0!==a)for(var l=n.getAttribute("position"),c=0,u=a.length;c<u;c++)l.setXYZ(a[c],Nc.x,Nc.y,Nc.z)}var jc,zc,Hc,Gc=new E,Wc=function(t){function e(e,n){var i;void 0===n&&(n=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(24),s=new ye;return s.setIndex(new Xt(r,1)),s.setAttribute("position",new Xt(o,3)),(i=t.call(this,s,new Xr({color:n,toneMapped:!1}))||this).object=e,i.type="BoxHelper",i.matrixAutoUpdate=!1,i.update(),i}c(e,t);var n=e.prototype;return n.update=function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Gc.setFromObject(this.object),!Gc.isEmpty()){var e=Gc.min,n=Gc.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}},n.setFromObject=function(t){return this.object=t,this.update(),this},n.copy=function(t){return oo.prototype.copy.call(this,t),this.object=t.object,this},e}(oo),qc=function(t){function e(e,n){var i;void 0===n&&(n=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new ye;return o.setIndex(new Xt(r,1)),o.setAttribute("position",new oe([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),(i=t.call(this,o,new Xr({color:n,toneMapped:!1}))||this).box=e,i.type="Box3Helper",i.geometry.computeBoundingSphere(),i}return c(e,t),e.prototype.updateMatrixWorld=function(e){var n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),t.prototype.updateMatrixWorld.call(this,e))},e}(oo),$c=function(t){function e(e,n,i){var r;void 0===n&&(n=1),void 0===i&&(i=16776960);var o=i,s=new ye;s.setAttribute("position",new oe([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),s.computeBoundingSphere(),(r=t.call(this,s,new Xr({color:o,toneMapped:!1}))||this).type="PlaneHelper",r.plane=e,r.size=n;var a=new ye;return a.setAttribute("position",new oe([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),r.add(new Fe(a,new $t({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),r}return c(e,t),e.prototype.updateMatrixWorld=function(e){var n=-this.plane.constant;Math.abs(n)<1e-8&&(n=1e-8),this.scale.set(.5*this.size,.5*this.size,n),this.children[0].material.side=n<0?1:0,this.lookAt(this.plane.normal),t.prototype.updateMatrixWorld.call(this,e)},e}(no),Yc=new A,Qc=function(t){function e(e,n,i,r,o,s){var a;return(a=t.call(this)||this).type="ArrowHelper",void 0===e&&(e=new A(0,0,1)),void 0===n&&(n=new A(0,0,0)),void 0===i&&(i=1),void 0===r&&(r=16776960),void 0===o&&(o=.2*i),void 0===s&&(s=.2*o),void 0===jc&&((jc=new ye).setAttribute("position",new oe([0,0,0,0,1,0],3)),(zc=new Mo(0,.5,1,5,1)).translate(0,-.5,0)),a.position.copy(n),a.line=new no(jc,new Xr({color:r,toneMapped:!1})),a.line.matrixAutoUpdate=!1,a.add(a.line),a.cone=new Fe(zc,new $t({color:r,toneMapped:!1})),a.cone.matrixAutoUpdate=!1,a.add(a.cone),a.setDirection(e),a.setLength(i,o,s),a}c(e,t);var n=e.prototype;return n.setDirection=function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Yc.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Yc,e)}},n.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},n.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},n.copy=function(e){return t.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},e}(wt),Xc=function(t){function e(e){var n;void 0===e&&(e=1);var i=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new ye;r.setAttribute("position",new oe(i,3)),r.setAttribute("color",new oe([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var o=new Xr({vertexColors:!0,toneMapped:!1});return(n=t.call(this,r,o)||this).type="AxesHelper",n}return c(e,t),e}(oo),Kc=new Float32Array(1),Zc=new Int32Array(Kc.buffer),Jc={toHalfFloat:function(t){Kc[0]=t;var e=Zc[0],n=e>>16&32768,i=e>>12&2047,r=e>>23&255;return r<103?n:r>142?(n|=31744,n|=(255==r?0:1)&&8388607&e):r<113?n|=((i|=2048)>>114-r)+(i>>113-r&1):(n|=r-112<<10|i>>1,n+=1&i)}},tu=Math.pow(2,8),eu=[.125,.215,.35,.446,.526,.582],nu=5+eu.length,iu=((Hc={})[3e3]=0,Hc[3001]=1,Hc[3002]=2,Hc[3004]=3,Hc[3005]=4,Hc[3006]=5,Hc[3007]=6,Hc),ru=new il,ou=mu(),su=ou._lodPlanes,au=ou._sizeLods,lu=ou._sigmas,cu=null,uu=(1+Math.sqrt(5))/2,hu=1/uu,du=[new A(1,1,1),new A(-1,1,1),new A(1,1,-1),new A(-1,1,-1),new A(0,uu,hu),new A(0,uu,-hu),new A(hu,0,uu),new A(-hu,0,uu),new A(uu,hu,0),new A(-uu,hu,0)],pu=function(){function t(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=new Gs({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:new Float32Array(20)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new A(0,1,0)},inputEncoding:{value:iu[3e3]},outputEncoding:{value:iu[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1}),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}var e=t.prototype;return e.fromScene=function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=.1),void 0===i&&(i=100),cu=this._renderer.getRenderTarget();var r=this._allocateTargets();return this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r},e.fromEquirectangular=function(t){return this._fromTexture(t)},e.fromCubemap=function(t){return this._fromTexture(t)},e.compileCubemapShader=function(){null===this._cubemapShader&&(this._cubemapShader=bu(),this._compileMaterial(this._cubemapShader))},e.compileEquirectangularShader=function(){null===this._equirectShader&&(this._equirectShader=yu(),this._compileMaterial(this._equirectShader))},e.dispose=function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var t=0;t<su.length;t++)su[t].dispose()},e._cleanup=function(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(cu),t.scissorTest=!1,vu(t,0,0,t.width,t.height)},e._fromTexture=function(t){cu=this._renderer.getRenderTarget();var e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e},e._allocateTargets=function(t){var e={magFilter:1003,minFilter:1003,generateMipmaps:!1,type:1009,format:1023,encoding:fu(t)?t.encoding:3002,depthBuffer:!1},n=gu(e);return n.depthBuffer=!t,this._pingPongRenderTarget=gu(e),n},e._compileMaterial=function(t){var e=new Fe(su[0],t);this._renderer.compile(e,ru)},e._sceneToCubeUV=function(t,e,n,i){var r=new We(90,1,e,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],a=this._renderer,l=a.outputEncoding,c=a.toneMapping,u=a.getClearColor(),h=a.getClearAlpha();a.toneMapping=0,a.outputEncoding=3e3;var d=t.background;if(d&&d.isColor){d.convertSRGBToLinear();var p=Math.max(d.r,d.g,d.b),f=Math.min(Math.max(Math.ceil(Math.log2(p)),-128),127);d=d.multiplyScalar(Math.pow(2,-f)),a.setClearColor(d,(f+128)/255),t.background=null}for(var m=0;m<6;m++){var g=m%3;0==g?(r.up.set(0,o[m],0),r.lookAt(s[m],0,0)):1==g?(r.up.set(0,0,o[m]),r.lookAt(0,s[m],0)):(r.up.set(0,o[m],0),r.lookAt(0,0,s[m])),vu(i,g*tu,m>2?tu:0,tu,tu),a.setRenderTarget(i),a.render(t,r)}a.toneMapping=c,a.outputEncoding=l,a.setClearColor(u,h)},e._textureToCubeUV=function(t,e){var n=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=bu()):null==this._equirectShader&&(this._equirectShader=yu());var i=t.isCubeTexture?this._cubemapShader:this._equirectShader,r=new Fe(su[0],i),o=i.uniforms;o.envMap.value=t,t.isCubeTexture||o.texelSize.value.set(1/t.image.width,1/t.image.height),o.inputEncoding.value=iu[t.encoding],o.outputEncoding.value=iu[e.texture.encoding],vu(e,0,0,3*tu,2*tu),n.setRenderTarget(e),n.render(r,ru)},e._applyPMREM=function(t){var e=this._renderer,n=e.autoClear;e.autoClear=!1;for(var i=1;i<nu;i++){var r=Math.sqrt(lu[i]*lu[i]-lu[i-1]*lu[i-1]);this._blur(t,i-1,i,r,du[(i-1)%du.length])}e.autoClear=n},e._blur=function(t,e,n,i,r){var o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,i,"latitudinal",r),this._halfBlur(o,t,n,n,i,"longitudinal",r)},e._halfBlur=function(t,e,n,i,r,o,s){var a=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var c=new Fe(su[i],l),u=l.uniforms,h=au[n]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):20;f>20&&console.warn("sigmaRadians, "+r+", is too large and will clip, as it requested "+f+" samples when the maximum is set to 20");for(var m=[],g=0,v=0;v<20;++v){var y=v/p,b=Math.exp(-y*y/2);m.push(b),0==v?g+=b:v<f&&(g+=2*b)}for(var _=0;_<m.length;_++)m[_]=m[_]/g;u.envMap.value=t.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===o,s&&(u.poleAxis.value=s),u.dTheta.value=d,u.mipInt.value=8-n,u.inputEncoding.value=iu[t.texture.encoding],u.outputEncoding.value=iu[t.texture.encoding];var w=au[i];vu(e,3*Math.max(0,tu-2*w),(0===i?0:2*tu)+2*w*(i>4?i-8+4:0),3*w,2*w),a.setRenderTarget(e),a.render(c,ru)},t}();function fu(t){return void 0!==t&&1009===t.type&&(3e3===t.encoding||3001===t.encoding||3007===t.encoding)}function mu(){for(var t=[],e=[],n=[],i=8,r=0;r<nu;r++){var o=Math.pow(2,i);e.push(o);var s=1/o;r>4?s=eu[r-8+4-1]:0==r&&(s=0),n.push(s);for(var a=1/(o-1),l=-a/2,c=1+a/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],h=new Float32Array(108),d=new Float32Array(72),p=new Float32Array(36),f=0;f<6;f++){var m=f%3*2/3-1,g=f>2?0:-1;h.set([m,g,0,m+2/3,g,0,m+2/3,g+1,0,m,g,0,m+2/3,g+1,0,m,g+1,0],18*f),d.set(u,12*f),p.set([f,f,f,f,f,f],6*f)}var v=new ye;v.setAttribute("position",new Xt(h,3)),v.setAttribute("uv",new Xt(d,2)),v.setAttribute("faceIndex",new Xt(p,1)),t.push(v),i>4&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}function gu(t){var e=new b(3*tu,3*tu,t);return e.texture.mapping=306,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function vu(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function yu(){return new Gs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new d(1,1)},inputEncoding:{value:iu[3e3]},outputEncoding:{value:iu[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function bu(){return new Gs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:iu[3e3]},outputEncoding:{value:iu[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function _u(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),La.call(this,t),this.type="catmullrom",this.closed=!0}function wu(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),La.call(this,t),this.type="catmullrom"}function Au(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),La.call(this,t),this.type="catmullrom"}Ma.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Ma.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign($a.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new xo,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new A(r.x,r.y,r.z||0))}return e}}),Object.assign(Ya.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),_u.prototype=Object.create(La.prototype),wu.prototype=Object.create(La.prototype),Au.prototype=Object.create(La.prototype),Object.assign(Au.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Dc.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Ec.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(ya.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),hl.extractUrlBase(t)}}),ya.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(mc.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(E.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(j.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Ze.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},yc.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(s,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),s.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),s.ceilPowerOfTwo(t)}}),Object.assign(p.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),Object.assign(X.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new A).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,o)},getInverse:function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),Et.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Object.assign(w.prototype,{multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}}),Object.assign(Q.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Ft.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Ft,{barycoordFromPoint:function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ft.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ft.getNormal(t,e,n,i)}}),Object.assign(Qa.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new fs(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ts(this,t)}}),Object.assign(d.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(A.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(y.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(xo.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.assign(wt.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(wt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(Fe.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(Fe.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Ur.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Gr.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Vr.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Ma.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),We.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Xa.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Xt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),Object.assign(Xt.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?35048:35044),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(ye.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Xt(arguments[1],arguments[2])))},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(ye.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(dl.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),Object.defineProperties(cc.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(pr.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),35048===this.usage},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(pr.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?35048:35044),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(ds.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(dr.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(sc.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(qt.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ht}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties($s.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(qs.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}}),Object.defineProperties(He.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(lr.prototype,{clearTarget:function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(lr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?3001:3e3}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Xi.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(b.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Ul.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new Sl).load(t,(function(t){e.setBuffer(t)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Wl.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},qe.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},qe.prototype.clear=function(t,e,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,i)};var xu={merge:function(t,e,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};f.crossOrigin=void 0,f.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Sa;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},f.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Ca;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},f.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},f.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Cu={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"123"}})),t.ACESFilmicToneMapping=4,t.AddEquation=100,t.AddOperation=2,t.AdditiveAnimationBlendMode=2501,t.AdditiveBlending=2,t.AlphaFormat=1021,t.AlwaysDepth=1,t.AlwaysStencilFunc=519,t.AmbientLight=sl,t.AmbientLightProbe=Tl,t.AnimationClip=pa,t.AnimationLoader=wa,t.AnimationMixer=oc,t.AnimationObjectGroup=ic,t.AnimationUtils=ta,t.ArcCurve=Pa,t.ArrayCamera=er,t.ArrowHelper=Qc,t.Audio=Ul,t.AudioAnalyser=Wl,t.AudioContext=El,t.AudioListener=Bl,t.AudioLoader=Sl,t.AxesHelper=Xc,t.AxisHelper=function(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Xc(t)},t.BackSide=1,t.BasicDepthPacking=3200,t.BasicShadowMap=0,t.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Ea(t)},t.Bone=jr,t.BooleanKeyframeTrack=sa,t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Wc(t,e)},t.Box2=mc,t.Box3=E,t.Box3Helper=qc,t.BoxBufferGeometry=Ue,t.BoxGeometry=Co,t.BoxHelper=Wc,t.BufferAttribute=Xt,t.BufferGeometry=ye,t.BufferGeometryLoader=fl,t.ByteType=1010,t.Cache=ma,t.Camera=Ge,t.CameraHelper=Uc,t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},t.CanvasTexture=vo,t.CatmullRomCurve3=La,t.CineonToneMapping=3,t.CircleBufferGeometry=Eo,t.CircleGeometry=So,t.ClampToEdgeWrapping=1001,t.Clock=Ol,t.ClosedSplineCurve3=_u,t.Color=Ht,t.ColorKeyframeTrack=aa,t.CompressedTexture=go,t.CompressedTextureLoader=Aa,t.ConeBufferGeometry=ko,t.ConeGeometry=Po,t.CubeCamera=qe,t.CubeGeometry=Co,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.CubeTexture=$e,t.CubeTextureLoader=Ca,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.CubicBezierCurve=Ua,t.CubicBezierCurve3=Va,t.CubicInterpolant=na,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.CullFaceNone=0,t.Curve=Ma,t.CurvePath=$a,t.CustomBlending=5,t.CustomToneMapping=5,t.CylinderBufferGeometry=Mo,t.CylinderGeometry=To,t.Cylindrical=pc,t.DataTexture=Qe,t.DataTexture2DArray=_n,t.DataTexture3D=wn,t.DataTextureLoader=Ea,t.DataUtils=Jc,t.DecrementStencilOp=7683,t.DecrementWrapStencilOp=34056,t.DefaultLoadingManager=va,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.DepthTexture=yo,t.DirectionalLight=ol,t.DirectionalLightHelper=Fc,t.DiscreteInterpolant=ra,t.DodecahedronBufferGeometry=Oo,t.DodecahedronGeometry=Ro,t.DoubleSide=2,t.DstAlphaFactor=206,t.DstColorFactor=208,t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Xt(t,e).setUsage(35048)},t.DynamicCopyUsage=35050,t.DynamicDrawUsage=35048,t.DynamicReadUsage=35049,t.EdgesGeometry=Bo,t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new oo(new Bo(t.geometry),new Xr({color:void 0!==e?e:16777215}))},t.EllipseCurve=Ta,t.EqualDepth=4,t.EqualStencilFunc=514,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.Euler=rt,t.EventDispatcher=n,t.ExtrudeBufferGeometry=ds,t.ExtrudeGeometry=fs,t.Face3=Gt,t.Face4=function(t,e,n,i,r,o,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Gt(t,e,n,r,o,s)},t.FaceColors=1,t.FileLoader=_a,t.FlatShading=1,t.Float16BufferAttribute=re,t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new oe(t,e)},t.Float32BufferAttribute=oe,t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new se(t,e)},t.Float64BufferAttribute=se,t.FloatType=1015,t.Fog=hr,t.FogExp2=ur,t.Font=Al,t.FontLoader=Cl,t.FrontSide=0,t.Frustum=Ze,t.GLBufferAttribute=lc,t.GLSL1="100",t.GLSL3="300 es",t.GammaEncoding=3007,t.Geometry=xo,t.GeometryUtils=xu,t.GreaterDepth=6,t.GreaterEqualDepth=5,t.GreaterEqualStencilFunc=518,t.GreaterStencilFunc=516,t.GridHelper=Dc,t.Group=tr,t.HalfFloatType=1016,t.HemisphereLight=Ka,t.HemisphereLightHelper=kc,t.HemisphereLightProbe=Ml,t.IcosahedronBufferGeometry=ms,t.IcosahedronGeometry=gs,t.ImageBitmapLoader=_l,t.ImageLoader=xa,t.ImageUtils=f,t.ImmediateRenderObject=bc,t.IncrementStencilOp=7682,t.IncrementWrapStencilOp=34055,t.InstancedBufferAttribute=pl,t.InstancedBufferGeometry=dl,t.InstancedInterleavedBuffer=ac,t.InstancedMesh=Qr,t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new te(t,e)},t.Int16BufferAttribute=te,t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new ne(t,e)},t.Int32BufferAttribute=ne,t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Kt(t,e)},t.Int8BufferAttribute=Kt,t.IntType=1013,t.InterleavedBuffer=pr,t.InterleavedBufferAttribute=gr,t.Interpolant=ea,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.InvertStencilOp=5386,t.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},t.KeepStencilOp=7680,t.KeyframeTrack=oa,t.LOD=Ur,t.LatheBufferGeometry=vs,t.LatheGeometry=ys,t.Layers=at,t.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")},t.LessDepth=2,t.LessEqualDepth=3,t.LessEqualStencilFunc=515,t.LessStencilFunc=513,t.Light=Xa,t.LightProbe=cl,t.Line=no,t.Line3=yc,t.LineBasicMaterial=Xr,t.LineCurve=ja,t.LineCurve3=za,t.LineDashedMaterial=Zs,t.LineLoop=so,t.LinePieces=1,t.LineSegments=oo,t.LineStrip=0,t.LinearEncoding=3e3,t.LinearFilter=1006,t.LinearInterpolant=ia,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007,t.LinearMipmapLinearFilter=1008,t.LinearMipmapNearestFilter=1007,t.LinearToneMapping=1,t.Loader=ya,t.LoaderUtils=hl,t.LoadingManager=ga,t.LogLuvEncoding=3003,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=2201,t.LuminanceAlphaFormat=1025,t.LuminanceFormat=1024,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},t.Material=qt,t.MaterialLoader=ul,t.Math=s,t.MathUtils=s,t.Matrix3=p,t.Matrix4=X,t.MaxEquation=104,t.Mesh=Fe,t.MeshBasicMaterial=$t,t.MeshDepthMaterial=Yi,t.MeshDistanceMaterial=Qi,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},t.MeshLambertMaterial=Xs,t.MeshMatcapMaterial=Ks,t.MeshNormalMaterial=Qs,t.MeshPhongMaterial=$s,t.MeshPhysicalMaterial=qs,t.MeshStandardMaterial=Ws,t.MeshToonMaterial=Ys,t.MinEquation=103,t.MirroredRepeatWrapping=1002,t.MixOperation=1,t.MultiMaterial=function(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},t.MultiplyBlending=4,t.MultiplyOperation=0,t.NearestFilter=1003,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NearestMipmapLinearFilter=1005,t.NearestMipmapNearestFilter=1004,t.NeverDepth=0,t.NeverStencilFunc=512,t.NoBlending=0,t.NoColors=0,t.NoToneMapping=0,t.NormalAnimationBlendMode=2500,t.NormalBlending=1,t.NotEqualDepth=7,t.NotEqualStencilFunc=517,t.NumberKeyframeTrack=la,t.Object3D=wt,t.ObjectLoader=gl,t.ObjectSpaceNormalMap=1,t.OctahedronBufferGeometry=bs,t.OctahedronGeometry=_s,t.OneFactor=201,t.OneMinusDstAlphaFactor=207,t.OneMinusDstColorFactor=209,t.OneMinusSrcAlphaFactor=205,t.OneMinusSrcColorFactor=203,t.OrthographicCamera=il,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.PMREMGenerator=pu,t.ParametricBufferGeometry=ws,t.ParametricGeometry=As,t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new kr(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ao(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new po(t,e)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ao(t)},t.Path=Ya,t.PerspectiveCamera=We,t.Plane=Et,t.PlaneBufferGeometry=en,t.PlaneGeometry=xs,t.PlaneHelper=$c,t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new po(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ao(t)},t.PointLight=nl,t.PointLightHelper=Sc,t.Points=po,t.PointsMaterial=ao,t.PolarGridHelper=Oc,t.PolyhedronBufferGeometry=Do,t.PolyhedronGeometry=Cs,t.PositionalAudio=Gl,t.PropertyBinding=nc,t.PropertyMixer=ql,t.QuadraticBezierCurve=Ha,t.QuadraticBezierCurve3=Ga,t.Quaternion=w,t.QuaternionKeyframeTrack=ua,t.QuaternionLinearInterpolant=ca,t.REVISION="123",t.RGBADepthPacking=3201,t.RGBAFormat=1023,t.RGBAIntegerFormat=1033,t.RGBA_ASTC_10x10_Format=37819,t.RGBA_ASTC_10x5_Format=37816,t.RGBA_ASTC_10x6_Format=37817,t.RGBA_ASTC_10x8_Format=37818,t.RGBA_ASTC_12x10_Format=37820,t.RGBA_ASTC_12x12_Format=37821,t.RGBA_ASTC_4x4_Format=37808,t.RGBA_ASTC_5x4_Format=37809,t.RGBA_ASTC_5x5_Format=37810,t.RGBA_ASTC_6x5_Format=37811,t.RGBA_ASTC_6x6_Format=37812,t.RGBA_ASTC_8x5_Format=37813,t.RGBA_ASTC_8x6_Format=37814,t.RGBA_ASTC_8x8_Format=37815,t.RGBA_BPTC_Format=36492,t.RGBA_ETC2_EAC_Format=37496,t.RGBA_PVRTC_2BPPV1_Format=35843,t.RGBA_PVRTC_4BPPV1_Format=35842,t.RGBA_S3TC_DXT1_Format=33777,t.RGBA_S3TC_DXT3_Format=33778,t.RGBA_S3TC_DXT5_Format=33779,t.RGBDEncoding=3006,t.RGBEEncoding=3002,t.RGBEFormat=1023,t.RGBFormat=1022,t.RGBIntegerFormat=1032,t.RGBM16Encoding=3005,t.RGBM7Encoding=3004,t.RGB_ETC1_Format=36196,t.RGB_ETC2_Format=37492,t.RGB_PVRTC_2BPPV1_Format=35841,t.RGB_PVRTC_4BPPV1_Format=35840,t.RGB_S3TC_DXT1_Format=33776,t.RGFormat=1030,t.RGIntegerFormat=1031,t.RawShaderMaterial=Gs,t.Ray=Q,t.Raycaster=cc,t.RectAreaLight=al,t.RedFormat=1028,t.RedIntegerFormat=1029,t.ReinhardToneMapping=2,t.RepeatWrapping=1e3,t.ReplaceStencilOp=7681,t.ReverseSubtractEquation=102,t.RingBufferGeometry=Es,t.RingGeometry=Ss,t.SRGB8_ALPHA8_ASTC_10x10_Format=37851,t.SRGB8_ALPHA8_ASTC_10x5_Format=37848,t.SRGB8_ALPHA8_ASTC_10x6_Format=37849,t.SRGB8_ALPHA8_ASTC_10x8_Format=37850,t.SRGB8_ALPHA8_ASTC_12x10_Format=37852,t.SRGB8_ALPHA8_ASTC_12x12_Format=37853,t.SRGB8_ALPHA8_ASTC_4x4_Format=37840,t.SRGB8_ALPHA8_ASTC_5x4_Format=37841,t.SRGB8_ALPHA8_ASTC_5x5_Format=37842,t.SRGB8_ALPHA8_ASTC_6x5_Format=37843,t.SRGB8_ALPHA8_ASTC_6x6_Format=37844,t.SRGB8_ALPHA8_ASTC_8x5_Format=37845,t.SRGB8_ALPHA8_ASTC_8x6_Format=37846,t.SRGB8_ALPHA8_ASTC_8x8_Format=37847,t.Scene=dr,t.SceneUtils=Cu,t.ShaderChunk=nn,t.ShaderLib=on,t.ShaderMaterial=He,t.ShadowMaterial=Hs,t.Shape=Qa,t.ShapeBufferGeometry=Ms,t.ShapeGeometry=Ts,t.ShapePath=wl,t.ShapeUtils=cs,t.ShortType=1011,t.Skeleton=Gr,t.SkeletonHelper=Ec,t.SkinnedMesh=Vr,t.SmoothShading=2,t.Sphere=j,t.SphereBufferGeometry=Ps,t.SphereGeometry=ks,t.Spherical=dc,t.SphericalHarmonics3=ll,t.Spline=Au,t.SplineCurve=Wa,t.SplineCurve3=wu,t.SpotLight=tl,t.SpotLightHelper=wc,t.Sprite=kr,t.SpriteMaterial=vr,t.SrcAlphaFactor=204,t.SrcAlphaSaturateFactor=210,t.SrcColorFactor=202,t.StaticCopyUsage=35046,t.StaticDrawUsage=35044,t.StaticReadUsage=35045,t.StereoCamera=Dl,t.StreamCopyUsage=35042,t.StreamDrawUsage=35040,t.StreamReadUsage=35041,t.StringKeyframeTrack=ha,t.SubtractEquation=101,t.SubtractiveBlending=3,t.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},t.TangentSpaceNormalMap=0,t.TetrahedronBufferGeometry=Ds,t.TetrahedronGeometry=Os,t.TextBufferGeometry=Rs,t.TextGeometry=Is,t.Texture=g,t.TextureLoader=Sa,t.TorusBufferGeometry=Ls,t.TorusGeometry=Fs,t.TorusKnotBufferGeometry=Ns,t.TorusKnotGeometry=Bs,t.Triangle=Ft,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TubeBufferGeometry=Us,t.TubeGeometry=Vs,t.UVMapping=300,t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new ee(t,e)},t.Uint16BufferAttribute=ee,t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new ie(t,e)},t.Uint32BufferAttribute=ie,t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Zt(t,e)},t.Uint8BufferAttribute=Zt,t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Jt(t,e)},t.Uint8ClampedBufferAttribute=Jt,t.Uniform=sc,t.UniformsLib=rn,t.UniformsUtils=ze,t.UnsignedByteType=1009,t.UnsignedInt248Type=1020,t.UnsignedIntType=1014,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedShortType=1012,t.VSMShadowMap=3,t.Vector2=d,t.Vector3=A,t.Vector4=y,t.VectorKeyframeTrack=da,t.Vertex=function(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new A(t,e,n)},t.VertexColors=2,t.VideoTexture=mo,t.WebGL1Renderer=cr,t.WebGLCubeRenderTarget=Ye,t.WebGLMultisampleRenderTarget=_,t.WebGLRenderTarget=b,t.WebGLRenderTargetCube=function(t,e,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Ye(t,n)},t.WebGLRenderer=lr,t.WebGLUtils=Ji,t.WireframeGeometry=js,t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new oo(new js(t.geometry),new Xr({color:void 0!==e?e:16777215}))},t.WrapAroundEnding=2402,t.XHRLoader=function(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new _a(t)},t.ZeroCurvatureEnding=2400,t.ZeroFactor=200,t.ZeroSlopeEnding=2401,t.ZeroStencilOp=0,t.sRGBEncoding=3001,Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof i&&void 0!==n?i:(t="undefined"!=typeof globalThis?globalThis:t||self).THREE={})}(this)},{}],58:[function(t,e,n){THREE.DRACOLoader=function(t){THREE.Loader.call(this,t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}},THREE.DRACOLoader.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:THREE.DRACOLoader,setDecoderPath:function(t){return this.decoderPath=t,this},setDecoderConfig:function(t){return this.decoderConfig=t,this},setWorkerLimit:function(t){return this.workerLimit=t,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(t,e,n,i){var r=new THREE.FileLoader(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,t=>{this.decodeGeometry(t,{attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1}).then(e).catch(i)},n,i)},decodeDracoFile:function(t,e,n,i){this.decodeGeometry(t,{attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n}).then(e)},decodeGeometry:function(t,e){for(var n in e.attributeTypes){var i=e.attributeTypes[n];void 0!==i.BYTES_PER_ELEMENT&&(e.attributeTypes[n]=i.name)}var r,o=JSON.stringify(e);if(THREE.DRACOLoader.taskCache.has(t)){var s=THREE.DRACOLoader.taskCache.get(t);if(s.key===o)return s.promise;if(0===t.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var a=this.workerNextTaskID++,l=this._getWorker(a,t.byteLength).then(n=>(r=n,new Promise((n,i)=>{r._callbacks[a]={resolve:n,reject:i},r.postMessage({type:"decode",id:a,taskConfig:e,buffer:t},[t])}))).then(t=>this._createGeometry(t.geometry));return l.catch(()=>!0).then(()=>{r&&a&&this._releaseTask(r,a)}),THREE.DRACOLoader.taskCache.set(t,{key:o,promise:l}),l},_createGeometry:function(t){var e=new THREE.BufferGeometry;t.index&&e.setIndex(new THREE.BufferAttribute(t.index.array,1));for(var n=0;n<t.attributes.length;n++){var i=t.attributes[n];e.setAttribute(i.name,new THREE.BufferAttribute(i.array,i.itemSize))}return e},_loadLibrary:function(t,e){var n=new THREE.FileLoader(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise((e,i)=>{n.load(t,e,void 0,i)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(e=>{var n=e[0];t||(this.decoderConfig.wasmBinary=e[1]);var i=THREE.DRACOLoader.DRACOWorker.toString(),r=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending},_getWorker:function(t,e){return this._initDecoder().then(()=>{var n;return this.workerPool.length<this.workerLimit?((n=new Worker(this.workerSourceURL))._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(t){var e=t.data;switch(e.type){case"decode":n._callbacks[e.id].resolve(e);break;case"error":n._callbacks[e.id].reject(e);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+e.type+'"')}},this.workerPool.push(n)):this.workerPool.sort((function(t,e){return t._taskLoad>e._taskLoad?-1:1})),(n=this.workerPool[this.workerPool.length-1])._taskCosts[t]=e,n._taskLoad+=e,n})},_releaseTask:function(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]},debug:function(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))},dispose:function(){for(var t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}),THREE.DRACOLoader.DRACOWorker=function(){var t,e;function n(t,e,n,i,r,o){var s=o.num_components(),a=n.num_points()*s,l=a*r.BYTES_PER_ELEMENT,c=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32}}(t,r),u=t._malloc(l);e.GetAttributeDataArrayForAllPoints(n,o,c,l,u);var h=new r(t.HEAPF32.buffer,u,a).slice();return t._free(u),{name:i,array:h,itemSize:s}}onmessage=function(i){var r=i.data;switch(r.type){case"init":t=r.decoderConfig,e=new Promise((function(e){t.onModuleLoaded=function(t){e({draco:t})},DracoDecoderModule(t)}));break;case"decode":var o=r.buffer,s=r.taskConfig;e.then(t=>{var e=t.draco,i=new e.Decoder,a=new e.DecoderBuffer;a.Init(new Int8Array(o),o.byteLength);try{var l=function(t,e,i,r){var o,s,a=r.attributeIDs,l=r.attributeTypes,c=e.GetEncodedGeometryType(i);if(c===t.TRIANGULAR_MESH)o=new t.Mesh,s=e.DecodeBufferToMesh(i,o);else{if(c!==t.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new t.PointCloud,s=e.DecodeBufferToPointCloud(i,o)}if(!s.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+s.error_msg());var u={index:null,attributes:[]};for(var h in a){var d,p,f=self[l[h]];if(r.useUniqueIDs)d=e.GetAttributeByUniqueId(o,p=a[h]);else{if(-1===(p=e.GetAttributeId(o,t[a[h]])))continue;d=e.GetAttribute(o,p)}u.attributes.push(n(t,e,o,h,f,d))}return c===t.TRIANGULAR_MESH&&(u.index=function(t,e,n){var i=3*n.num_faces(),r=4*i,o=t._malloc(r);e.GetTrianglesUInt32Array(n,r,o);var s=new Uint32Array(t.HEAPF32.buffer,o,i).slice();return t._free(o),{array:s,itemSize:1}}(t,e,o)),t.destroy(o),u}(e,i,a,s),c=l.attributes.map(t=>t.array.buffer);l.index&&c.push(l.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:l},c)}catch(u){console.error(u),self.postMessage({type:"error",id:r.id,error:u.message})}finally{e.destroy(a),e.destroy(i)}})}}},THREE.DRACOLoader.taskCache=new WeakMap,THREE.DRACOLoader.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},THREE.DRACOLoader.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},THREE.DRACOLoader.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},THREE.DRACOLoader.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")}},{}],59:[function(t,n,i){THREE.GLTFLoader=function(){function t(t){THREE.Loader.call(this,t),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new a(t)})),this.register((function(t){return new c(t)})),this.register((function(t){return new u(t)})),this.register((function(t){return new l(t)})),this.register((function(t){return new o(t)})),this.register((function(t){return new h(t)}))}function n(){var t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}t.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:t,load:function(t,n,i,r){var o,s=this;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:THREE.LoaderUtils.extractUrlBase(t),this.manager.itemStart(t);var a=function(e){r?r(e):console.error(e),s.manager.itemError(t),s.manager.itemEnd(t)},l=new THREE.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,(function(i){try{s.parse(i,o,(function(e){n(e),s.manager.itemEnd(t)}),a)}catch(e){a(e)}}),i,a)},setDRACOLoader:function(t){return this.dracoLoader=t,this},setDDSLoader:function(t){return this.ddsLoader=t,this},setKTX2Loader:function(t){return this.ktx2Loader=t,this},setMeshoptDecoder:function(t){return this.meshoptDecoder=t,this},register:function(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this},unregister:function(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this},parse:function(t,e,n,o){var a,l={},c={};if("string"==typeof t)a=t;else if(THREE.LoaderUtils.decodeText(new Uint8Array(t,0,4))===d){try{l[i.KHR_BINARY_GLTF]=new p(t)}catch(A){return void(o&&o(A))}a=l[i.KHR_BINARY_GLTF].content}else a=THREE.LoaderUtils.decodeText(new Uint8Array(t));var u=JSON.parse(a);if(void 0===u.asset||u.asset.version[0]<2)o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var h=new O(u,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(var g=0;g<this.pluginCallbacks.length;g++){var b=this.pluginCallbacks[g](h);c[b.name]=b,l[b.name]=!0}if(u.extensionsUsed)for(g=0;g<u.extensionsUsed.length;++g){var _=u.extensionsUsed[g],w=u.extensionsRequired||[];switch(_){case i.KHR_MATERIALS_UNLIT:l[_]=new s;break;case i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:l[_]=new v;break;case i.KHR_DRACO_MESH_COMPRESSION:l[_]=new f(u,this.dracoLoader);break;case i.MSFT_TEXTURE_DDS:l[_]=new r(this.ddsLoader);break;case i.KHR_TEXTURE_TRANSFORM:l[_]=new m;break;case i.KHR_MESH_QUANTIZATION:l[_]=new y;break;default:w.indexOf(_)>=0&&void 0===c[_]&&console.warn('THREE.GLTFLoader: Unknown extension "'+_+'".')}}h.setExtensions(l),h.setPlugins(c),h.parse(n,o)}}});var i={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function r(t){if(!t)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=i.MSFT_TEXTURE_DDS,this.ddsLoader=t}function o(t){this.parser=t,this.name=i.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}function s(){this.name=i.KHR_MATERIALS_UNLIT}function a(t){this.parser=t,this.name=i.KHR_MATERIALS_CLEARCOAT}function l(t){this.parser=t,this.name=i.KHR_MATERIALS_TRANSMISSION}function c(t){this.parser=t,this.name=i.KHR_TEXTURE_BASISU}function u(t){this.parser=t,this.name=i.EXT_TEXTURE_WEBP,this.isSupported=null}function h(t){this.name=i.EXT_MESHOPT_COMPRESSION,this.parser=t}o.prototype._markDefs=function(){for(var t=this.parser,e=this.parser.json.nodes||[],n=0,i=e.length;n<i;n++){var r=e[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&t._addNodeRef(this.cache,r.extensions[this.name].light)}},o.prototype._loadLight=function(t){var e=this.parser,n="light:"+t,i=e.cache.get(n);if(i)return i;var r,o=e.json,s=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t],a=new THREE.Color(16777215);void 0!==s.color&&a.fromArray(s.color);var l=void 0!==s.range?s.range:0;switch(s.type){case"directional":(r=new THREE.DirectionalLight(a)).target.position.set(0,0,-1),r.add(r.target);break;case"point":(r=new THREE.PointLight(a)).distance=l;break;case"spot":(r=new THREE.SpotLight(a)).distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,r.angle=s.spot.outerConeAngle,r.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,r.target.position.set(0,0,-1),r.add(r.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+s.type+'".')}return r.position.set(0,0,0),r.decay=2,void 0!==s.intensity&&(r.intensity=s.intensity),r.name=e.createUniqueName(s.name||"light_"+t),i=Promise.resolve(r),e.cache.add(n,i),i},o.prototype.createNodeAttachment=function(t){var e=this,n=this.parser,i=n.json.nodes[t],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(t){return n._getNodeRef(e.cache,r,t)}))},s.prototype.getMaterialType=function(){return THREE.MeshBasicMaterial},s.prototype.extendParams=function(t,e,n){var i=[];t.color=new THREE.Color(1,1,1),t.opacity=1;var r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){var o=r.baseColorFactor;t.color.fromArray(o),t.opacity=o[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(t,"map",r.baseColorTexture))}return Promise.all(i)},a.prototype.getMaterialType=function(t){var e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?THREE.MeshPhysicalMaterial:null},a.prototype.extendMaterialParams=function(t,e){var n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],o=i.extensions[this.name];if(void 0!==o.clearcoatFactor&&(e.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(n.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(n.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){var s=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new THREE.Vector2(s,s)}return Promise.all(r)},l.prototype.getMaterialType=function(t){var e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?THREE.MeshPhysicalMaterial:null},l.prototype.extendMaterialParams=function(t,e){var n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],o=i.extensions[this.name];return void 0!==o.transmissionFactor&&(e.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(n.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(r)},c.prototype.loadTexture=function(t){var e=this.parser,n=e.json,i=n.textures[t];if(!i.extensions||!i.extensions[this.name])return null;var r=n.images[i.extensions[this.name].source],o=e.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,r,o)},u.prototype.loadTexture=function(t){var e=this.name,n=this.parser,i=n.json,r=i.textures[t];if(!r.extensions||!r.extensions[e])return null;var o=i.images[r.extensions[e].source],s=o.uri?n.options.manager.getHandler(o.uri):n.textureLoader;return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(t,o,s);if(i.extensionsRequired&&i.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)}))},u.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise((function(t){var e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported},h.prototype.loadBufferView=function(t){var e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){var i=n.extensions[this.name],r=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,o.ready]).then((function(t){var e=i.byteOffset||0,n=i.byteLength||0,r=i.count,s=i.byteStride,a=new ArrayBuffer(r*s),l=new Uint8Array(t[0],e,n);return o.decodeGltfBuffer(new Uint8Array(a),r,s,l,i.mode,i.filter),a}))}return null};var d="glTF";function p(t){this.name=i.KHR_BINARY_GLTF,this.content=null,this.body=null;var e=new DataView(t,0,12);if(this.header={magic:THREE.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==d)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var n=new DataView(t,12),r=0;r<n.byteLength;){var o=n.getUint32(r,!0),s=n.getUint32(r+=4,!0);if(r+=4,1313821514===s){var a=new Uint8Array(t,12+r,o);this.content=THREE.LoaderUtils.decodeText(a)}else if(5130562===s){var l=12+r;this.body=t.slice(l,l+o)}r+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function f(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=i.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}function m(){this.name=i.KHR_TEXTURE_TRANSFORM}function g(t){THREE.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),s={specular:{value:(new THREE.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(t){for(var a in s)t.uniforms[a]=s[a];t.fragmentShader=t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(t){s.specular.value=t}},specularMap:{get:function(){return s.specularMap.value},set:function(t){s.specularMap.value=t,t?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return s.glossiness.value},set:function(t){s.glossiness.value=t}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(t){s.glossinessMap.value=t,t?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}function v(){return{name:i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return g},extendParams:function(t,e,n){var i=e.extensions[this.name];t.color=new THREE.Color(1,1,1),t.opacity=1;var r=[];if(Array.isArray(i.diffuseFactor)){var o=i.diffuseFactor;t.color.fromArray(o),t.opacity=o[3]}if(void 0!==i.diffuseTexture&&r.push(n.assignTexture(t,"map",i.diffuseTexture)),t.emissive=new THREE.Color(0,0,0),t.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,t.specular=new THREE.Color(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var s=i.specularGlossinessTexture;r.push(n.assignTexture(t,"glossinessMap",s)),r.push(n.assignTexture(t,"specularMap",s))}return Promise.all(r)},createMaterial:function(t){var e=new g(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=THREE.TangentSpaceNormalMap,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e}}}function y(){this.name=i.KHR_MESH_QUANTIZATION}function b(t,e,n,i){THREE.Interpolant.call(this,t,e,n,i)}f.prototype.decodePrimitive=function(t,e){var n=this.json,i=this.dracoLoader,r=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,s={},a={},l={};for(var c in o){var u=C[c]||c.toLowerCase();s[u]=o[c]}for(c in t.attributes)if(u=C[c]||c.toLowerCase(),void 0!==o[c]){var h=n.accessors[t.attributes[c]];l[u]=_[h.componentType],a[u]=!0===h.normalized}return e.getDependency("bufferView",r).then((function(t){return new Promise((function(e){i.decodeDracoFile(t,(function(t){for(var n in t.attributes){var i=a[n];void 0!==i&&(t.attributes[n].normalized=i)}e(t)}),s,l)}))}))},m.prototype.extendTexture=function(t,e){return t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.needsUpdate=!0,t},(g.prototype=Object.create(THREE.MeshStandardMaterial.prototype)).constructor=g,g.prototype.copy=function(t){return THREE.MeshStandardMaterial.prototype.copy.call(this,t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},(b.prototype=Object.create(THREE.Interpolant.prototype)).constructor=b,b.prototype.beforeStart_=b.prototype.copySampleValue_=function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i*3+i,o=0;o!==i;o++)e[o]=n[r+o];return e},b.prototype.afterEnd_=b.prototype.copySampleValue_,b.prototype.interpolate_=function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=2*s,l=3*s,c=i-e,u=(n-e)/c,h=u*u,d=h*u,p=t*l,f=p-l,m=-2*d+3*h,g=d-h,v=1-m,y=g-h+u,b=0;b!==s;b++)r[b]=v*o[f+b+s]+y*(o[f+b+a]*c)+m*o[p+b+s]+g*(o[p+b]*c);return r};var _={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},w={9728:THREE.NearestFilter,9729:THREE.LinearFilter,9984:THREE.NearestMipmapNearestFilter,9985:THREE.LinearMipmapNearestFilter,9986:THREE.NearestMipmapLinearFilter,9987:THREE.LinearMipmapLinearFilter},A={33071:THREE.ClampToEdgeWrapping,33648:THREE.MirroredRepeatWrapping,10497:THREE.RepeatWrapping},x={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},C={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},E={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},S={CUBICSPLINE:void 0,LINEAR:THREE.InterpolateLinear,STEP:THREE.InterpolateDiscrete};function M(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}function T(t,e,n){for(var i in n.extensions)void 0===t[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function P(t,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function k(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(var n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){var r=e.extras.targetNames;if(t.morphTargetInfluences.length===r.length)for(t.morphTargetDictionary={},n=0,i=r.length;n<i;n++)t.morphTargetDictionary[r[n]]=n;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function D(t){for(var e="",n=Object.keys(t).sort(),i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function O(t,e){this.json=t||{},this.extensions={},this.plugins={},this.options=e||{},this.cache=new n,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},this.textureLoader="undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?new THREE.ImageBitmapLoader(this.options.manager):new THREE.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new THREE.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function R(t,e,n){var i=e.attributes,r=[];function o(e,i){return n.getDependency("accessor",e).then((function(e){t.setAttribute(i,e)}))}for(var s in i){var a=C[s]||s.toLowerCase();a in t.attributes||r.push(o(i[s],a))}if(void 0!==e.indices&&!t.index){var l=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));r.push(l)}return P(t,e),function(t,e,n){var i=e.attributes,r=new THREE.Box3;if(void 0!==i.POSITION){var o=(h=n.json.accessors[i.POSITION]).max;if(void 0!==(d=h.min)&&void 0!==o){r.set(new THREE.Vector3(d[0],d[1],d[2]),new THREE.Vector3(o[0],o[1],o[2]));var s=e.targets;if(void 0!==s){for(var a=new THREE.Vector3,l=new THREE.Vector3,c=0,u=s.length;c<u;c++){var h,d,p=s[c];void 0!==p.POSITION&&(o=(h=n.json.accessors[p.POSITION]).max,void 0!==(d=h.min)&&void 0!==o?(l.setX(Math.max(Math.abs(d[0]),Math.abs(o[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(o[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(o[2]))),a.max(l)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."))}r.expandByVector(a)}t.boundingBox=r;var f=new THREE.Sphere;r.getCenter(f.center),f.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=f}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(t,e,n),Promise.all(r).then((function(){return void 0!==e.targets?function(t,e,n){for(var i=!1,r=!1,o=0,s=e.length;o<s&&(void 0!==(c=e[o]).POSITION&&(i=!0),void 0!==c.NORMAL&&(r=!0),!i||!r);o++);if(!i&&!r)return Promise.resolve(t);var a=[],l=[];for(o=0,s=e.length;o<s;o++){var c=e[o];if(i){var u=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):t.attributes.position;a.push(u)}r&&(u=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):t.attributes.normal,l.push(u))}return Promise.all([Promise.all(a),Promise.all(l)]).then((function(e){var n=e[1];return i&&(t.morphAttributes.position=e[0]),r&&(t.morphAttributes.normal=n),t.morphTargetsRelative=!0,t}))}(t,e.targets,n):t}))}function I(t,e){var n=t.getIndex();if(null===n){var i=[],r=t.getAttribute("position");if(void 0===r)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(var o=0;o<r.count;o++)i.push(o);t.setIndex(i),n=t.getIndex()}var s=n.count-2,a=[];if(e===THREE.TriangleFanDrawMode)for(o=1;o<=s;o++)a.push(n.getX(0)),a.push(n.getX(o)),a.push(n.getX(o+1));else for(o=0;o<s;o++)o%2==0?(a.push(n.getX(o)),a.push(n.getX(o+1)),a.push(n.getX(o+2))):(a.push(n.getX(o+2)),a.push(n.getX(o+1)),a.push(n.getX(o)));a.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var l=t.clone();return l.setIndex(a),l}return O.prototype.setExtensions=function(t){this.extensions=t},O.prototype.setPlugins=function(t){this.plugins=t},O.prototype.parse=function(t,e){var n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(e){var o={scene:e[0][i.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:i.asset,parser:n,userData:{}};T(r,o,i),P(o,i),t(o)})).catch(e)},O.prototype._markDefs=function(){for(var t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[],i=0,r=e.length;i<r;i++)for(var o=e[i].joints,s=0,a=o.length;s<a;s++)t[o[s]].isBone=!0;for(var l=0,c=t.length;l<c;l++){var u=t[l];void 0!==u.mesh&&(this._addNodeRef(this.meshCache,u.mesh),void 0!==u.skin&&(n[u.mesh].isSkinnedMesh=!0)),void 0!==u.camera&&this._addNodeRef(this.cameraCache,u.camera)}},O.prototype._addNodeRef=function(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)},O.prototype._getNodeRef=function(t,e,n){if(t.refs[e]<=1)return n;var i=n.clone();return i.name+="_instance_"+t.uses[e]++,i},O.prototype._invokeOne=function(t){var e=Object.values(this.plugins);e.push(this);for(var n=0;n<e.length;n++){var i=t(e[n]);if(i)return i}},O.prototype._invokeAll=function(t){var e=Object.values(this.plugins);e.unshift(this);for(var n=[],i=0;i<e.length;i++){var r=t(e[i]);r&&n.push(r)}return n},O.prototype.getDependency=function(t,e){var n=t+":"+e,i=this.cache.get(n);if(!i){switch(t){case"scene":i=this.loadScene(e);break;case"node":i=this.loadNode(e);break;case"mesh":i=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":i=this.loadAccessor(e);break;case"bufferView":i=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":i=this.loadBuffer(e);break;case"material":i=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":i=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":i=this.loadSkin(e);break;case"animation":i=this.loadAnimation(e);break;case"camera":i=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(n,i)}return i},O.prototype.getDependencies=function(t){var e=this.cache.get(t);if(!e){var n=this;e=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map((function(e,i){return n.getDependency(t,i)}))),this.cache.add(t,e)}return e},O.prototype.loadBuffer=function(t){var e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[i.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(t,i){n.load(M(e.uri,r.path),t,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))},O.prototype.loadBufferView=function(t){var e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){var n=e.byteOffset||0;return t.slice(n,n+(e.byteLength||0))}))},O.prototype.loadAccessor=function(t){var e=this,n=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);var r=[];return r.push(void 0!==i.bufferView?this.getDependency("bufferView",i.bufferView):null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then((function(t){var r,o,s=t[0],a=x[i.type],l=_[i.componentType],c=l.BYTES_PER_ELEMENT,u=i.byteOffset||0,h=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,d=!0===i.normalized;if(h&&h!==c*a){var p=Math.floor(u/h),f="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+p+":"+i.count,m=e.cache.get(f);m||(r=new l(s,p*h,i.count*h/c),m=new THREE.InterleavedBuffer(r,h/c),e.cache.add(f,m)),o=new THREE.InterleavedBufferAttribute(m,a,u%h/c,d)}else r=null===s?new l(i.count*a):new l(s,u,i.count*a),o=new THREE.BufferAttribute(r,a,d);if(void 0!==i.sparse){var g=i.sparse.values.byteOffset||0,v=new(0,_[i.sparse.indices.componentType])(t[1],i.sparse.indices.byteOffset||0,i.sparse.count*x.SCALAR),y=new l(t[2],g,i.sparse.count*a);null!==s&&(o=new THREE.BufferAttribute(o.array.slice(),o.itemSize,o.normalized));for(var b=0,w=v.length;b<w;b++){var A=v[b];if(o.setX(A,y[b*a]),a>=2&&o.setY(A,y[b*a+1]),a>=3&&o.setZ(A,y[b*a+2]),a>=4&&o.setW(A,y[b*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o}))},O.prototype.loadTexture=function(t){var e,n,r=this.json,o=r.textures[t],s=o.extensions||{};return(e=s[i.MSFT_TEXTURE_DDS]?r.images[s[i.MSFT_TEXTURE_DDS].source]:r.images[o.source]).uri&&(n=this.options.manager.getHandler(e.uri)),n||(n=s[i.MSFT_TEXTURE_DDS]?this.extensions[i.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(t,e,n)},O.prototype.loadTextureImage=function(t,e,n){var i=this,r=this.json,o=this.options,s=r.textures[t],a=self.URL||self.webkitURL,l=e.uri,c=!1,u=!0;return"image/jpeg"===e.mimeType&&(u=!1),void 0!==e.bufferView&&(l=i.getDependency("bufferView",e.bufferView).then((function(t){if("image/png"===e.mimeType){var n=new DataView(t,25,1).getUint8(0,!1);u=6===n||4===n||3===n}c=!0;var i=new Blob([t],{type:e.mimeType});return l=a.createObjectURL(i)}))),Promise.resolve(l).then((function(t){return new Promise((function(e,i){var r=e;!0===n.isImageBitmapLoader&&(r=function(t){e(new THREE.CanvasTexture(t))}),n.load(M(t,o.path),r,void 0,i)}))})).then((function(e){!0===c&&a.revokeObjectURL(l),e.flipY=!1,s.name&&(e.name=s.name),u||(e.format=THREE.RGBFormat);var n=(r.samplers||{})[s.sampler]||{};return e.magFilter=w[n.magFilter]||THREE.LinearFilter,e.minFilter=w[n.minFilter]||THREE.LinearMipmapLinearFilter,e.wrapS=A[n.wrapS]||THREE.RepeatWrapping,e.wrapT=A[n.wrapT]||THREE.RepeatWrapping,i.associations.set(e,{type:"textures",index:t}),e}))},O.prototype.assignTexture=function(t,e,n){var r=this;return this.getDependency("texture",n.index).then((function(o){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===e&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+e+" not yet supported."),r.extensions[i.KHR_TEXTURE_TRANSFORM]){var s=void 0!==n.extensions?n.extensions[i.KHR_TEXTURE_TRANSFORM]:void 0;if(s){var a=r.associations.get(o);o=r.extensions[i.KHR_TEXTURE_TRANSFORM].extendTexture(o,s),r.associations.set(o,a)}}t[e]=o}))},O.prototype.assignFinalMaterial=function(t){var e=t.geometry,n=t.material,i=void 0!==e.attributes.tangent,r=void 0!==e.attributes.color,o=void 0===e.attributes.normal,s=!0===t.isSkinnedMesh,a=Object.keys(e.morphAttributes).length>0,l=a&&void 0!==e.morphAttributes.normal;if(t.isPoints){var c=this.cache.get(h="PointsMaterial:"+n.uuid);c||(c=new THREE.PointsMaterial,THREE.Material.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(h,c)),n=c}else if(t.isLine){var u=this.cache.get(h="LineBasicMaterial:"+n.uuid);u||(u=new THREE.LineBasicMaterial,THREE.Material.prototype.copy.call(u,n),u.color.copy(n.color),this.cache.add(h,u)),n=u}if(i||r||o||s||a){var h="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(h+="specular-glossiness:"),s&&(h+="skinning:"),i&&(h+="vertex-tangents:"),r&&(h+="vertex-colors:"),o&&(h+="flat-shading:"),a&&(h+="morph-targets:"),l&&(h+="morph-normals:");var d=this.cache.get(h);d||(d=n.clone(),s&&(d.skinning=!0),i&&(d.vertexTangents=!0),r&&(d.vertexColors=!0),o&&(d.flatShading=!0),a&&(d.morphTargets=!0),l&&(d.morphNormals=!0),this.cache.add(h,d),this.associations.set(d,this.associations.get(n))),n=d}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),n.normalScale&&!i&&(n.normalScale.y=-n.normalScale.y),n.clearcoatNormalScale&&!i&&(n.clearcoatNormalScale.y=-n.clearcoatNormalScale.y),t.material=n},O.prototype.getMaterialType=function(){return THREE.MeshStandardMaterial},O.prototype.loadMaterial=function(t){var e,n=this,r=this.extensions,o=this.json.materials[t],s={},a=o.extensions||{},l=[];if(a[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var c=r[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];e=c.getMaterialType(),l.push(c.extendParams(s,o,n))}else if(a[i.KHR_MATERIALS_UNLIT]){var u=r[i.KHR_MATERIALS_UNLIT];e=u.getMaterialType(),l.push(u.extendParams(s,o,n))}else{var h=o.pbrMetallicRoughness||{};if(s.color=new THREE.Color(1,1,1),s.opacity=1,Array.isArray(h.baseColorFactor)){var d=h.baseColorFactor;s.color.fromArray(d),s.opacity=d[3]}void 0!==h.baseColorTexture&&l.push(n.assignTexture(s,"map",h.baseColorTexture)),s.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,s.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(l.push(n.assignTexture(s,"metalnessMap",h.metallicRoughnessTexture)),l.push(n.assignTexture(s,"roughnessMap",h.metallicRoughnessTexture))),e=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),l.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,s)}))))}!0===o.doubleSided&&(s.side=THREE.DoubleSide);var p=o.alphaMode||"OPAQUE";return"BLEND"===p?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,"MASK"===p&&(s.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&e!==THREE.MeshBasicMaterial&&(l.push(n.assignTexture(s,"normalMap",o.normalTexture)),s.normalScale=new THREE.Vector2(1,1),void 0!==o.normalTexture.scale&&s.normalScale.set(o.normalTexture.scale,o.normalTexture.scale)),void 0!==o.occlusionTexture&&e!==THREE.MeshBasicMaterial&&(l.push(n.assignTexture(s,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(s.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&e!==THREE.MeshBasicMaterial&&(s.emissive=(new THREE.Color).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&e!==THREE.MeshBasicMaterial&&l.push(n.assignTexture(s,"emissiveMap",o.emissiveTexture)),Promise.all(l).then((function(){var a;return a=e===g?r[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new e(s),o.name&&(a.name=o.name),a.map&&(a.map.encoding=THREE.sRGBEncoding),a.emissiveMap&&(a.emissiveMap.encoding=THREE.sRGBEncoding),P(a,o),n.associations.set(a,{type:"materials",index:t}),o.extensions&&T(r,a,o),a}))},O.prototype.createUniqueName=function(t){for(var e=THREE.PropertyBinding.sanitizeNodeName(t||""),n=1;this.nodeNamesUsed[e];++n)e=t+"_"+n;return this.nodeNamesUsed[e]=!0,e},O.prototype.loadGeometries=function(t){var e=this,n=this.extensions,r=this.primitiveCache;function o(t){return n[i.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return R(n,t,e)}))}for(var s,a,l=[],c=0,u=t.length;c<u;c++){var h,d=t[c],p=(a=(s=d).extensions&&s.extensions[i.KHR_DRACO_MESH_COMPRESSION])?"draco:"+a.bufferView+":"+a.indices+":"+D(a.attributes):s.indices+":"+D(s.attributes)+":"+s.mode,f=r[p];f?l.push(f.promise):(h=d.extensions&&d.extensions[i.KHR_DRACO_MESH_COMPRESSION]?o(d):R(new THREE.BufferGeometry,d,e),r[p]={primitive:d,promise:h},l.push(h))}return Promise.all(l)},O.prototype.loadMesh=function(t){for(var e,n=this,i=this.extensions,r=this.json.meshes[t],o=r.primitives,s=[],a=0,l=o.length;a<l;a++){var c=void 0===o[a].material?(void 0===(e=this.cache).DefaultMaterial&&(e.DefaultMaterial=new THREE.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:THREE.FrontSide})),e.DefaultMaterial):this.getDependency("material",o[a].material);s.push(c)}return s.push(n.loadGeometries(o)),Promise.all(s).then((function(e){for(var s=e.slice(0,e.length-1),a=e[e.length-1],l=[],c=0,u=a.length;c<u;c++){var h,d=a[c],p=o[c],f=s[c];if(4===p.mode||5===p.mode||6===p.mode||void 0===p.mode)!0!==(h=!0===r.isSkinnedMesh?new THREE.SkinnedMesh(d,f):new THREE.Mesh(d,f)).isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),5===p.mode?h.geometry=I(h.geometry,THREE.TriangleStripDrawMode):6===p.mode&&(h.geometry=I(h.geometry,THREE.TriangleFanDrawMode));else if(1===p.mode)h=new THREE.LineSegments(d,f);else if(3===p.mode)h=new THREE.Line(d,f);else if(2===p.mode)h=new THREE.LineLoop(d,f);else{if(0!==p.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);h=new THREE.Points(d,f)}Object.keys(h.geometry.morphAttributes).length>0&&k(h,r),h.name=n.createUniqueName(r.name||"mesh_"+t),P(h,r),p.extensions&&T(i,h,p),n.assignFinalMaterial(h),l.push(h)}if(1===l.length)return l[0];var m=new THREE.Group;for(c=0,u=l.length;c<u;c++)m.add(l[c]);return m}))},O.prototype.loadCamera=function(t){var e,n=this.json.cameras[t],i=n[n.type];if(i)return"perspective"===n.type?e=new THREE.PerspectiveCamera(THREE.MathUtils.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(e=new THREE.OrthographicCamera(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),P(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")},O.prototype.loadSkin=function(t){var e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return n.inverseBindMatrices=t,n}))},O.prototype.loadAnimation=function(t){for(var e=this.json.animations[t],n=[],i=[],r=[],o=[],s=[],a=0,l=e.channels.length;a<l;a++){var c=e.channels[a],u=e.samplers[c.sampler],h=c.target,d=void 0!==e.parameters?e.parameters[u.input]:u.input,p=void 0!==e.parameters?e.parameters[u.output]:u.output;n.push(this.getDependency("node",void 0!==h.node?h.node:h.id)),i.push(this.getDependency("accessor",d)),r.push(this.getDependency("accessor",p)),o.push(u),s.push(h)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(r),Promise.all(o),Promise.all(s)]).then((function(n){for(var i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],l=[],c=0,u=i.length;c<u;c++){var h=i[c],d=r[c],p=o[c],f=s[c],m=a[c];if(void 0!==h){var g;switch(h.updateMatrix(),h.matrixAutoUpdate=!0,E[m.path]){case E.weights:g=THREE.NumberKeyframeTrack;break;case E.rotation:g=THREE.QuaternionKeyframeTrack;break;case E.position:case E.scale:default:g=THREE.VectorKeyframeTrack}var v=h.name?h.name:h.uuid,y=void 0!==f.interpolation?S[f.interpolation]:THREE.InterpolateLinear,_=[];E[m.path]===E.weights?h.traverse((function(t){!0===t.isMesh&&t.morphTargetInfluences&&_.push(t.name?t.name:t.uuid)})):_.push(v);var w=p.array;if(p.normalized){var A;if(w.constructor===Int8Array)A=1/127;else if(w.constructor===Uint8Array)A=1/255;else if(w.constructor==Int16Array)A=1/32767;else{if(w.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");A=1/65535}for(var x=new Float32Array(w.length),C=0,M=w.length;C<M;C++)x[C]=w[C]*A;w=x}for(C=0,M=_.length;C<M;C++){var T=new g(_[C]+"."+E[m.path],d.array,w,y);"CUBICSPLINE"===f.interpolation&&(T.createInterpolant=function(t){return new b(this.times,this.values,this.getValueSize()/3,t)},T.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(T)}}}return new THREE.AnimationClip(e.name?e.name:"animation_"+t,void 0,l)}))},O.prototype.loadNode=function(t){var e,n=this.extensions,i=this,r=this.json.nodes[t],o=r.name?i.createUniqueName(r.name):"";return(e=[],void 0!==r.mesh&&e.push(i.getDependency("mesh",r.mesh).then((function(t){var e=i._getNodeRef(i.meshCache,r.mesh,t);return void 0!==r.weights&&e.traverse((function(t){if(t.isMesh)for(var e=0,n=r.weights.length;e<n;e++)t.morphTargetInfluences[e]=r.weights[e]})),e}))),void 0!==r.camera&&e.push(i.getDependency("camera",r.camera).then((function(t){return i._getNodeRef(i.cameraCache,r.camera,t)}))),i._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){e.push(t)})),Promise.all(e)).then((function(e){var s;if((s=!0===r.isBone?new THREE.Bone:e.length>1?new THREE.Group:1===e.length?e[0]:new THREE.Object3D)!==e[0])for(var a=0,l=e.length;a<l;a++)s.add(e[a]);if(r.name&&(s.userData.name=r.name,s.name=o),P(s,r),r.extensions&&T(n,s,r),void 0!==r.matrix){var c=new THREE.Matrix4;c.fromArray(r.matrix),s.applyMatrix4(c)}else void 0!==r.translation&&s.position.fromArray(r.translation),void 0!==r.rotation&&s.quaternion.fromArray(r.rotation),void 0!==r.scale&&s.scale.fromArray(r.scale);return i.associations.set(s,{type:"nodes",index:t}),s}))},O.prototype.loadScene=function(){function t(e,n,i,r){var o=i.nodes[e];return r.getDependency("node",e).then((function(t){return void 0===o.skin?t:r.getDependency("skin",o.skin).then((function(t){for(var n=[],i=0,o=(e=t).joints.length;i<o;i++)n.push(r.getDependency("node",e.joints[i]));return Promise.all(n)})).then((function(n){return t.traverse((function(t){if(t.isMesh){for(var i=[],r=[],o=0,s=n.length;o<s;o++){var a=n[o];if(a){i.push(a);var l=new THREE.Matrix4;void 0!==e.inverseBindMatrices&&l.fromArray(e.inverseBindMatrices.array,16*o),r.push(l)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[o])}t.bind(new THREE.Skeleton(i,r),t.matrixWorld)}})),t}));var e})).then((function(e){n.add(e);var s=[];if(o.children)for(var a=o.children,l=0,c=a.length;l<c;l++)s.push(t(a[l],e,i,r));return Promise.all(s)}))}return function(e){var n=this.json,i=this.extensions,r=this.json.scenes[e],o=new THREE.Group;r.name&&(o.name=this.createUniqueName(r.name)),P(o,r),r.extensions&&T(i,o,r);for(var s=r.nodes||[],a=[],l=0,c=s.length;l<c;l++)a.push(t(s[l],o,n,this));return Promise.all(a).then((function(){return o}))}}(),t}()},{}],60:[function(t,n,i){THREE.MTLLoader=function(t){THREE.Loader.call(this,t)},THREE.MTLLoader.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:THREE.MTLLoader,load:function(t,n,i,r){var o=this,s=""===this.path?THREE.LoaderUtils.extractUrlBase(t):this.path,a=new THREE.FileLoader(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(i){try{n(o.parse(i,s))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),i,r)},setMaterialOptions:function(t){return this.materialOptions=t,this},parse:function(t,e){for(var n=t.split("\n"),i={},r=/\s+/,o={},s=0;s<n.length;s++){var a=n[s];if(0!==(a=a.trim()).length&&"#"!==a.charAt(0)){var l=a.indexOf(" "),c=l>=0?a.substring(0,l):a;c=c.toLowerCase();var u=l>=0?a.substring(l+1):"";if(u=u.trim(),"newmtl"===c)o[u]=i={name:u};else if("ka"===c||"kd"===c||"ks"===c||"ke"===c){var h=u.split(r,3);i[c]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else i[c]=u}}var d=new THREE.MTLLoader.MaterialCreator(this.resourcePath||e,this.materialOptions);return d.setCrossOrigin(this.crossOrigin),d.setManager(this.manager),d.setMaterials(o),d}}),THREE.MTLLoader.MaterialCreator=function(t,e){this.baseUrl=t||"",this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(t){return this.crossOrigin=t,this},setManager:function(t){this.manager=t},setMaterials:function(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(t){if(!this.options)return t;var e={};for(var n in t){var i=t[n],r={};for(var o in e[n]=r,i){var s=!0,a=i[o],l=o.toLowerCase();switch(l){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(a=[a[0]/255,a[1]/255,a[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===a[0]&&0===a[1]&&0===a[2]&&(s=!1)}s&&(r[l]=a)}}return e},preload:function(){for(var t in this.materialsInfo)this.create(t)},getIndex:function(t){return this.nameLookup[t]},getAsArray:function(){var t=0;for(var e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray},create:function(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]},createMaterial_:function(t){var e=this,n=this.materialsInfo[t],i={name:t,side:this.side};function r(t,n){if(!i[t]){var r,o,s=e.getTextureParams(n,i),a=e.loadTexture((r=e.baseUrl,"string"!=typeof(o=s.url)||""===o?"":/^https?:\/\//i.test(o)?o:r+o));a.repeat.copy(s.scale),a.offset.copy(s.offset),a.wrapS=e.wrap,a.wrapT=e.wrap,i[t]=a}}for(var o in n){var s,a=n[o];if(""!==a)switch(o.toLowerCase()){case"kd":i.color=(new THREE.Color).fromArray(a);break;case"ks":i.specular=(new THREE.Color).fromArray(a);break;case"ke":i.emissive=(new THREE.Color).fromArray(a);break;case"map_kd":r("map",a);break;case"map_ks":r("specularMap",a);break;case"map_ke":r("emissiveMap",a);break;case"norm":r("normalMap",a);break;case"map_bump":case"bump":r("bumpMap",a);break;case"map_d":r("alphaMap",a),i.transparent=!0;break;case"ns":i.shininess=parseFloat(a);break;case"d":(s=parseFloat(a))<1&&(i.opacity=s,i.transparent=!0);break;case"tr":s=parseFloat(a),this.options&&this.options.invertTrProperty&&(s=1-s),s>0&&(i.opacity=1-s,i.transparent=!0)}}return this.materials[t]=new THREE.MeshPhongMaterial(i),this.materials[t]},getTextureParams:function(t,e){var n,i={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},r=t.split(/\s+/);return(n=r.indexOf("-bm"))>=0&&(e.bumpScale=parseFloat(r[n+1]),r.splice(n,2)),(n=r.indexOf("-s"))>=0&&(i.scale.set(parseFloat(r[n+1]),parseFloat(r[n+2])),r.splice(n,4)),(n=r.indexOf("-o"))>=0&&(i.offset.set(parseFloat(r[n+1]),parseFloat(r[n+2])),r.splice(n,4)),i.url=r.join(" ").trim(),i},loadTexture:function(t,e,n,i,r){var o,s=void 0!==this.manager?this.manager:THREE.DefaultLoadingManager,a=s.getHandler(t);return null===a&&(a=new THREE.TextureLoader(s)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin),o=a.load(t,n,i,r),void 0!==e&&(o.mapping=e),o}}},{}],61:[function(t,n,i){THREE.OBJLoader=function(){var t=/^[og]\s*(.+)?/,n=/^mtllib /,i=/^usemtl /,r=/^usemap /,o=new THREE.Vector3,s=new THREE.Vector3,a=new THREE.Vector3,l=new THREE.Vector3,c=new THREE.Vector3;function u(){var t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(t,e){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var i={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){var e={index:"number"==typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}};return this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){var e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}},n&&n.name&&"function"==typeof n.clone){var i=n.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseNormalIndex:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseUVIndex:function(t,e){var n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)},addVertex:function(t,e,n){var i=this.vertices,r=this.object.geometry.vertices;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addVertexPoint:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,n){var i=this.normals,r=this.object.geometry.normals;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addFaceNormal:function(t,e,n){var i=this.vertices,r=this.object.geometry.normals;o.fromArray(i,t),s.fromArray(i,e),a.fromArray(i,n),c.subVectors(a,s),l.subVectors(o,s),c.cross(l),c.normalize(),r.push(c.x,c.y,c.z),r.push(c.x,c.y,c.z),r.push(c.x,c.y,c.z)},addColor:function(t,e,n){var i=this.colors,r=this.object.geometry.colors;void 0!==i[t]&&r.push(i[t+0],i[t+1],i[t+2]),void 0!==i[e]&&r.push(i[e+0],i[e+1],i[e+2]),void 0!==i[n]&&r.push(i[n+0],i[n+1],i[n+2])},addUV:function(t,e,n){var i=this.uvs,r=this.object.geometry.uvs;r.push(i[t+0],i[t+1]),r.push(i[e+0],i[e+1]),r.push(i[n+0],i[n+1])},addDefaultUV:function(){var t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){var e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,n,i,r,o,s,a,l){var c=this.vertices.length,u=this.parseVertexIndex(t,c),h=this.parseVertexIndex(e,c),d=this.parseVertexIndex(n,c);if(this.addVertex(u,h,d),this.addColor(u,h,d),void 0!==s&&""!==s){var p=this.normals.length;u=this.parseNormalIndex(s,p),h=this.parseNormalIndex(a,p),d=this.parseNormalIndex(l,p),this.addNormal(u,h,d)}else this.addFaceNormal(u,h,d);if(void 0!==i&&""!==i){var f=this.uvs.length;u=this.parseUVIndex(i,f),h=this.parseUVIndex(r,f),d=this.parseUVIndex(o,f),this.addUV(u,h,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";for(var e=this.vertices.length,n=0,i=t.length;n<i;n++){var r=this.parseVertexIndex(t[n],e);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(t,e){this.object.geometry.type="Line";for(var n=this.vertices.length,i=this.uvs.length,r=0,o=t.length;r<o;r++)this.addVertexLine(this.parseVertexIndex(t[r],n));var s=0;for(o=e.length;s<o;s++)this.addUVLine(this.parseUVIndex(e[s],i))}};return t.startObject("",!1),t}function h(t){THREE.Loader.call(this,t),this.materials=null}return h.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:h,load:function(t,n,i,r){var o=this,s=new THREE.FileLoader(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(i){try{n(o.parse(i))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),i,r)},setMaterials:function(t){return this.materials=t,this},parse:function(e){var o=new u;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));for(var s=e.split("\n"),a="",l="",c=[],h="function"==typeof"".trimLeft,d=0,p=s.length;d<p;d++)if(a=s[d],0!==(a=h?a.trimLeft():a.trim()).length&&"#"!==(l=a.charAt(0)))if("v"===l){var f=a.split(/\s+/);switch(f[0]){case"v":o.vertices.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),f.length>=7?o.colors.push(parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6])):o.colors.push(void 0,void 0,void 0);break;case"vn":o.normals.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]));break;case"vt":o.uvs.push(parseFloat(f[1]),parseFloat(f[2]))}}else if("f"===l){for(var m=a.substr(1).trim().split(/\s+/),g=[],v=0,y=m.length;v<y;v++){var b=m[v];if(b.length>0){var _=b.split("/");g.push(_)}}var w=g[0];for(v=1,y=g.length-1;v<y;v++){var A=g[v],x=g[v+1];o.addFace(w[0],A[0],x[0],w[1],A[1],x[1],w[2],A[2],x[2])}}else if("l"===l){var C=a.substring(1).trim().split(" "),E=[],S=[];if(-1===a.indexOf("/"))E=C;else for(var M=0,T=C.length;M<T;M++){var P=C[M].split("/");""!==P[0]&&E.push(P[0]),""!==P[1]&&S.push(P[1])}o.addLineGeometry(E,S)}else if("p"===l){var k=a.substr(1).trim().split(" ");o.addPointGeometry(k)}else if(null!==(c=t.exec(a))){var D=(" "+c[0].substr(1).trim()).substr(1);o.startObject(D)}else if(i.test(a))o.object.startMaterial(a.substring(7).trim(),o.materialLibraries);else if(n.test(a))o.materialLibraries.push(a.substring(7).trim());else if(r.test(a))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===l){if((c=a.split(" ")).length>1){var O=c[1].trim().toLowerCase();o.object.smooth="0"!==O&&"off"!==O}else o.object.smooth=!0;(W=o.object.currentMaterial())&&(W.smooth=o.object.smooth)}else{if("\0"===a)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+a+'"')}o.finalize();var R=new THREE.Group;if(R.materialLibraries=[].concat(o.materialLibraries),1==!(1===o.objects.length&&0===o.objects[0].geometry.vertices.length))for(d=0,p=o.objects.length;d<p;d++){var I=o.objects[d],L=I.geometry,F=I.materials,N="Line"===L.type,B="Points"===L.type,U=!1;if(0!==L.vertices.length){(Q=new THREE.BufferGeometry).setAttribute("position",new THREE.Float32BufferAttribute(L.vertices,3)),L.normals.length>0&&Q.setAttribute("normal",new THREE.Float32BufferAttribute(L.normals,3)),L.colors.length>0&&(U=!0,Q.setAttribute("color",new THREE.Float32BufferAttribute(L.colors,3))),!0===L.hasUVIndices&&Q.setAttribute("uv",new THREE.Float32BufferAttribute(L.uvs,2));for(var V,j=[],z=0,H=F.length;z<H;z++){var G=(Y=F[z]).name+"_"+Y.smooth+"_"+U,W=o.materials[G];if(null!==this.materials)if(W=this.materials.create(Y.name),!N||!W||W instanceof THREE.LineBasicMaterial){if(B&&W&&!(W instanceof THREE.PointsMaterial)){var q=new THREE.PointsMaterial({size:10,sizeAttenuation:!1});THREE.Material.prototype.copy.call(q,W),q.color.copy(W.color),q.map=W.map,W=q}}else{var $=new THREE.LineBasicMaterial;THREE.Material.prototype.copy.call($,W),$.color.copy(W.color),W=$}void 0===W&&((W=N?new THREE.LineBasicMaterial:B?new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):new THREE.MeshPhongMaterial).name=Y.name,W.flatShading=!Y.smooth,W.vertexColors=U,o.materials[G]=W),j.push(W)}if(j.length>1){for(z=0,H=F.length;z<H;z++){var Y;Q.addGroup((Y=F[z]).groupStart,Y.groupCount,z)}V=N?new THREE.LineSegments(Q,j):B?new THREE.Points(Q,j):new THREE.Mesh(Q,j)}else V=N?new THREE.LineSegments(Q,j[0]):B?new THREE.Points(Q,j[0]):new THREE.Mesh(Q,j[0]);V.name=I.name,R.add(V)}}else if(o.vertices.length>0){var Q;W=new THREE.PointsMaterial({size:1,sizeAttenuation:!1}),(Q=new THREE.BufferGeometry).setAttribute("position",new THREE.Float32BufferAttribute(o.vertices,3)),o.colors.length>0&&(Q.setAttribute("color",new THREE.Float32BufferAttribute(o.colors,3)),W.vertexColors=!0);var X=new THREE.Points(Q,W);R.add(X)}return R}}),h}()},{}],62:[function(t,e,n){var i=t("layout-bmfont-text"),r=t("inherits"),o=t("quad-indices"),s=t("three-buffer-vertex-data"),a=t("object-assign"),l=t("./lib/vertices"),c=t("./lib/utils"),u=THREE.BufferGeometry;function h(t){u.call(this),"string"==typeof t&&(t={text:t}),this._opt=a({},t),t&&this.update(t)}e.exports=function(t){return new h(t)},r(h,u),h.prototype.update=function(t){if("string"==typeof t&&(t={text:t}),!(t=a({},this._opt,t)).font)throw new TypeError("must specify a { font } in options");this.layout=i(t);var e=!1!==t.flipY,n=t.font,r=n.common.scaleW,c=n.common.scaleH,u=this.layout.glyphs.filter((function(t){var e=t.data;return e.width*e.height>0}));this.visibleGlyphs=u;var h=l.positions(u),d=l.uvs(u,r,c,e),p=o({clockwise:!0,type:"uint16",count:u.length});if(s.index(this,p,1,"uint16"),s.attr(this,"position",h,2),s.attr(this,"uv",d,2),!t.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(t.multipage){var f=l.pages(u);s.attr(this,"page",f,1)}},h.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var t=this.attributes.position.array;if(!t||!this.attributes.position.itemSize||t.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);c.computeSphere(t,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')},h.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var t=this.boundingBox,e=this.attributes.position.array;!e||!this.attributes.position.itemSize||e.length<2?t.makeEmpty():c.computeBox(e,t)}},{"./lib/utils":63,"./lib/vertices":64,inherits:30,"layout-bmfont-text":36,"object-assign":39,"quad-indices":51,"three-buffer-vertex-data":65}],63:[function(t,e,n){var i={min:[0,0],max:[0,0]};function r(t){var e=t.length/2;i.min[0]=t[0],i.min[1]=t[1],i.max[0]=t[0],i.max[1]=t[1];for(var n=0;n<e;n++){var r=t[2*n+0],o=t[2*n+1];i.min[0]=Math.min(r,i.min[0]),i.min[1]=Math.min(o,i.min[1]),i.max[0]=Math.max(r,i.max[0]),i.max[1]=Math.max(o,i.max[1])}}e.exports.computeBox=function(t,e){r(t),e.min.set(i.min[0],i.min[1],0),e.max.set(i.max[0],i.max[1],0)},e.exports.computeSphere=function(t,e){r(t);var n=i.min[0],o=i.min[1],s=i.max[0]-n,a=i.max[1]-o,l=Math.sqrt(s*s+a*a);e.center.set(n+s/2,o+a/2,0),e.radius=l/2}},{}],64:[function(t,e,n){e.exports.pages=function(t){var e=new Float32Array(4*t.length*1),n=0;return t.forEach((function(t){var i=t.data.page||0;e[n++]=i,e[n++]=i,e[n++]=i,e[n++]=i})),e},e.exports.uvs=function(t,e,n,i){var r=new Float32Array(4*t.length*2),o=0;return t.forEach((function(t){var s=t.data,a=s.y+s.height,l=s.x/e,c=s.y/n,u=(s.x+s.width)/e,h=a/n;i&&(c=(n-s.y)/n,h=(n-a)/n),r[o++]=l,r[o++]=c,r[o++]=l,r[o++]=h,r[o++]=u,r[o++]=h,r[o++]=u,r[o++]=c})),r},e.exports.positions=function(t){var e=new Float32Array(4*t.length*2),n=0;return t.forEach((function(t){var i=t.data,r=t.position[0]+i.xoffset,o=t.position[1]+i.yoffset,s=i.width,a=i.height;e[n++]=r,e[n++]=o,e[n++]=r,e[n++]=o+a,e[n++]=r+s,e[n++]=o+a,e[n++]=r+s,e[n++]=o})),e}},{}],65:[function(t,e,n){var i=t("flatten-vertex-data");function r(t,e,n,r){return e=i(e=e||[],r),(t=new THREE.BufferAttribute(e,n)).itemSize=n,t.needsUpdate=!0,t}e.exports.attr=function(t,e,n,i,o){if("number"!=typeof i&&(i=3),"string"!=typeof o&&(o="float32"),Array.isArray(n)&&Array.isArray(n[0])&&n[0].length!==i)throw new Error("Nested vertex array has unexpected size; expected "+i+" but found "+n[0].length);var s=r(t.getAttribute(e),n,i,o);t.setAttribute(e,s)},e.exports.index=function(t,e,n,i){"number"!=typeof n&&(n=1),"string"!=typeof i&&(i="uint16");var o=!t.index&&"function"!=typeof t.setIndex,s=r(o?t.getAttribute("index"):t.index,e,n,i);s&&(o?t.addAttribute("index",s):t.index=s)}},{"flatten-vertex-data":23}],66:[function(t,e,n){(function(e,i){var r=t("process/browser.js").nextTick,o=Function.prototype.apply,s=Array.prototype.slice,a={},l=0;function c(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new c(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new c(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n.setImmediate="function"==typeof e?e:function(t){var e=l++,i=!(arguments.length<2)&&s.call(arguments,1);return a[e]=!0,r((function(){a[e]&&(i?t.apply(null,i):t.call(null),n.clearImmediate(e))})),e},n.clearImmediate="function"==typeof i?i:function(t){delete a[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":49,timers:66}],67:[function(t,e,n){(function(t){!function(t,i){"object"==typeof n&&void 0!==e?e.exports=i():t.WebVRPolyfill=i()}(this,(function(){"use strict";var e,n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},i=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},r=function(t,e){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]},o=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},s=function(t,e){return function(t,e){t.exports=function(){var t,e,i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t,e,n){return t+(e-t)*n},s=function(){var t=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return t}}(),a=function(){var t=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return t}}(),l=function(){var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return t}}(),c=function(){var t=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return t}}(),u=(e=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),i=e?parseInt(e[1],10):null,function(){return i}),h=function(){var t;return t=s()&&l()&&-1!==navigator.userAgent.indexOf("13_4"),function(){return t}}(),d=function(){var t=!1;if(65===u()){var e=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(e){var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),4!==n.length);i=!0);}catch(l){r=!0,o=l}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e[1].split(".")),i=n[3];t=3325===parseInt(n[2],10)&&parseInt(i,10)<148}}return function(){return t}}(),p=function(){var t=-1!==navigator.userAgent.indexOf("R7 Build");return function(){return t}}(),f=function(){var t=90==window.orientation||-90==window.orientation;return p()?!t:t},m=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},g=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},v=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},y=function(t,e,n,i){var r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,e),t.compileShader(r);var o=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(o,n),t.compileShader(o);var s=t.createProgram();for(var a in t.attachShader(s,r),t.attachShader(s,o),i)t.bindAttribLocation(s,i[a],a);return t.linkProgram(s),t.deleteShader(r),t.deleteShader(o),s},b=function(t,e){for(var n={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r="",o=0;o<i;o++)n[r=t.getActiveUniform(e,o).name.replace("[0]","")]=t.getUniformLocation(e,r);return n},_=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},w=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},A=function(t){if(s()){var e=t.style.width,n=t.style.height;t.style.width=parseInt(e)+1+"px",t.style.height=parseInt(n)+"px",setTimeout((function(){t.style.width=e,t.style.height=n}),100)}window.canvas=t},x=function(){var t=Math.PI/180,e=.25*Math.PI,n=new Float32Array([0,0,0,1]),i=new Float32Array([0,0,0]);function r(r,o,s,a,l,c){var u,h,d,p,f,m,g,v,y,b,_,w,A,x,C,E,S,M,T;!function(n,i,r,o){var s=Math.tan(i?i.upDegrees*t:e),a=Math.tan(i?i.downDegrees*t:e),l=Math.tan(i?i.leftDegrees*t:e),c=Math.tan(i?i.rightDegrees*t:e),u=2/(l+c),h=2/(s+a);n[0]=u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=h,n[6]=0,n[7]=0,n[8]=-(l-c)*u*.5,n[9]=(s-a)*h*.5,n[10]=o/(r-o),n[11]=-1,n[12]=0,n[13]=0,n[14]=o*r/(r-o),n[15]=0}(r,a||null,c.depthNear,c.depthFar),d=s.position||i,_=(p=(h=s.orientation||n)[0])*(v=p+p),w=p*(y=(f=h[1])+f),A=p*(b=(m=h[2])+m),C=f*b,S=(g=h[3])*v,M=g*y,T=g*b,(u=o)[0]=1-((x=f*y)+(E=m*b)),u[1]=w+T,u[2]=A-M,u[3]=0,u[4]=w-T,u[5]=1-(_+E),u[6]=C+S,u[7]=0,u[8]=A+M,u[9]=C-S,u[10]=1-(_+x),u[11]=0,u[12]=d[0],u[13]=d[1],u[14]=d[2],u[15]=1,l&&function(t,e,n){var i,r,o,s,a,l,c,u,h,d,p,f,m=n[0],g=n[1],v=n[2];e===t?(t[12]=e[0]*m+e[4]*g+e[8]*v+e[12],t[13]=e[1]*m+e[5]*g+e[9]*v+e[13],t[14]=e[2]*m+e[6]*g+e[10]*v+e[14],t[15]=e[3]*m+e[7]*g+e[11]*v+e[15]):(r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],t[0]=i=e[0],t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=d,t[10]=p,t[11]=f,t[12]=i*m+a*g+h*v+e[12],t[13]=r*m+l*g+d*v+e[13],t[14]=o*m+c*g+p*v+e[14],t[15]=s*m+u*g+f*v+e[15])}(o,o,l),function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],v=e[15],y=n*a-i*s,b=n*l-r*s,_=n*c-o*s,w=i*l-r*a,A=i*c-o*a,x=r*c-o*l,C=u*m-h*f,E=u*g-d*f,S=u*v-p*f,M=h*g-d*m,T=h*v-p*m,P=d*v-p*g,k=y*P-b*T+_*M+w*S-A*E+x*C;k&&(t[0]=(a*P-l*T+c*M)*(k=1/k),t[1]=(r*T-i*P-o*M)*k,t[2]=(m*x-g*A+v*w)*k,t[3]=(d*A-h*x-p*w)*k,t[4]=(l*S-s*P-c*E)*k,t[5]=(n*P-r*S+o*E)*k,t[6]=(g*_-f*x-v*b)*k,t[7]=(u*x-d*_+p*b)*k,t[8]=(s*T-a*S+c*C)*k,t[9]=(i*S-n*T-o*C)*k,t[10]=(f*A-m*_+v*y)*k,t[11]=(h*_-u*A-p*y)*k,t[12]=(a*E-s*M-l*C)*k,t[13]=(n*M-i*E+r*C)*k,t[14]=(m*b-f*w-g*y)*k,t[15]=(u*w-h*b+d*y)*k)}(o,o)}return function(t,e,n){return!(!t||!e||(t.pose=e,t.timestamp=e.timestamp,r(t.leftProjectionMatrix,t.leftViewMatrix,e,n._getFieldOfView("left"),n._getEyeOffset("left"),n),r(t.rightProjectionMatrix,t.rightViewMatrix,e,n._getFieldOfView("right"),n._getEyeOffset("right"),n),0))}}(),C=function(t){var e=t.indexOf("://"),n=t.indexOf("/",-1!==e?e+3:0);return-1===n&&(n=t.length),t.substring(0,n)},E=(t={},function(e,n){void 0===t[e]&&(console.warn("webvr-polyfill: "+n),t[e]=!0)}),S=function(t,e){E(t,t+" has been deprecated. This may not work on native WebVR displays. "+(e?"Please use "+e+" instead.":""))},M=function(t,e,n){if(e){for(var i=[],r=null,o=0;o<e.length;++o)switch(s=e[o]){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:if((l=e[++o])<t.TEXTURE0||l>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),i.push(null,null);break}r||(r=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(l),i.push(t.getParameter(s),null);break;case t.ACTIVE_TEXTURE:r=t.getParameter(t.ACTIVE_TEXTURE),i.push(null);break;default:i.push(t.getParameter(s))}for(n(t),o=0;o<e.length;++o){var s,a=i[o];switch(s=e[o]){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,a);break;case t.COLOR_CLEAR_VALUE:t.clearColor(a[0],a[1],a[2],a[3]);break;case t.COLOR_WRITEMASK:t.colorMask(a[0],a[1],a[2],a[3]);break;case t.CURRENT_PROGRAM:t.useProgram(a);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,a);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,a);break;case t.TEXTURE_BINDING_2D:if((l=e[++o])<t.TEXTURE0||l>t.TEXTURE31)break;t.activeTexture(l),t.bindTexture(t.TEXTURE_2D,a);break;case t.TEXTURE_BINDING_CUBE_MAP:var l;if((l=e[++o])<t.TEXTURE0||l>t.TEXTURE31)break;t.activeTexture(l),t.bindTexture(t.TEXTURE_CUBE_MAP,a);break;case t.VIEWPORT:t.viewport(a[0],a[1],a[2],a[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:a?t.enable(s):t.disable(s);break;default:console.log("No GL restore behavior for 0x"+s.toString(16))}r&&t.activeTexture(r)}}else n(t)},T=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),P=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function k(t,e,n,i){this.gl=t,this.cardboardUI=e,this.bufferScale=n,this.dirtySubmitFrameBindings=i,this.ctxAttribs=t.getContextAttributes(),this.instanceExt=t.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,s()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=y(t,T,P,this.attribs),this.uniforms=b(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize()}k.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},k.prototype.onResize=function(){var t=this.gl,e=this;M(t,[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0],(function(t){e.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),e.scissorTest&&e.realDisable.call(t,t.SCISSOR_TEST),e.realColorMask.call(t,!0,!0,!0,!0),e.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.framebuffer),t.bindTexture(t.TEXTURE_2D,e.renderTarget),t.texImage2D(t.TEXTURE_2D,0,e.ctxAttribs.alpha?t.RGBA:t.RGB,e.bufferWidth,e.bufferHeight,0,e.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.renderTarget,0),e.ctxAttribs.depth&&e.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,e.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e.depthStencilBuffer)):e.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,e.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e.depthBuffer)):e.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,e.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,e.bufferWidth,e.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,e.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.lastBoundFramebuffer),e.scissorTest&&e.realEnable.call(t,t.SCISSOR_TEST),e.realColorMask.apply(t,e.colorMask),e.realViewport.apply(t,e.viewport),e.realClearColor.apply(t,e.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},k.prototype.patch=function(){if(!this.isPatched){var t=this,e=this.gl.canvas,n=this.gl;s()||(e.width=m()*this.bufferScale,e.height=g()*this.bufferScale,Object.defineProperty(e,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(n){t.bufferWidth=n,t.realCanvasWidth.set.call(e,n),t.onResize()}}),Object.defineProperty(e,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(n){t.bufferHeight=n,t.realCanvasHeight.set.call(e,n),t.onResize()}})),this.lastBoundFramebuffer=n.getParameter(n.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(e,i){t.lastBoundFramebuffer=i||t.framebuffer,t.realBindFramebuffer.call(n,e,t.lastBoundFramebuffer)},this.cullFace=n.getParameter(n.CULL_FACE),this.depthTest=n.getParameter(n.DEPTH_TEST),this.blend=n.getParameter(n.BLEND),this.scissorTest=n.getParameter(n.SCISSOR_TEST),this.stencilTest=n.getParameter(n.STENCIL_TEST),n.enable=function(e){switch(e){case n.CULL_FACE:t.cullFace=!0;break;case n.DEPTH_TEST:t.depthTest=!0;break;case n.BLEND:t.blend=!0;break;case n.SCISSOR_TEST:t.scissorTest=!0;break;case n.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(n,e)},n.disable=function(e){switch(e){case n.CULL_FACE:t.cullFace=!1;break;case n.DEPTH_TEST:t.depthTest=!1;break;case n.BLEND:t.blend=!1;break;case n.SCISSOR_TEST:t.scissorTest=!1;break;case n.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(n,e)},this.colorMask=n.getParameter(n.COLOR_WRITEMASK),n.colorMask=function(e,i,r,o){t.colorMask[0]=e,t.colorMask[1]=i,t.colorMask[2]=r,t.colorMask[3]=o,t.realColorMask.call(n,e,i,r,o)},this.clearColor=n.getParameter(n.COLOR_CLEAR_VALUE),n.clearColor=function(e,i,r,o){t.clearColor[0]=e,t.clearColor[1]=i,t.clearColor[2]=r,t.clearColor[3]=o,t.realClearColor.call(n,e,i,r,o)},this.viewport=n.getParameter(n.VIEWPORT),n.viewport=function(e,i,r,o){t.viewport[0]=e,t.viewport[1]=i,t.viewport[2]=r,t.viewport[3]=o,t.realViewport.call(n,e,i,r,o)},this.isPatched=!0,A(e)}},k.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,e=this.gl.canvas;s()||(Object.defineProperty(e,"width",this.realCanvasWidth),Object.defineProperty(e,"height",this.realCanvasHeight)),e.width=this.bufferWidth,e.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,setTimeout((function(){A(e)}),1)}},k.prototype.setTextureBounds=function(t,e){t||(t=[0,0,.5,1]),e||(e=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=e[0],this.viewportOffsetScale[5]=e[1],this.viewportOffsetScale[6]=e[2],this.viewportOffsetScale[7]=e[3]},k.prototype.submitFrame=function(){var t=this.gl,e=this,n=[];if(this.dirtySubmitFrameBindings||n.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),M(t,n,(function(t){e.realBindFramebuffer.call(t,t.FRAMEBUFFER,null);var n=0,i=0;e.instanceExt&&(n=t.getVertexAttrib(e.attribs.position,e.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),i=t.getVertexAttrib(e.attribs.texCoord,e.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),e.cullFace&&e.realDisable.call(t,t.CULL_FACE),e.depthTest&&e.realDisable.call(t,t.DEPTH_TEST),e.blend&&e.realDisable.call(t,t.BLEND),e.scissorTest&&e.realDisable.call(t,t.SCISSOR_TEST),e.stencilTest&&e.realDisable.call(t,t.STENCIL_TEST),e.realColorMask.call(t,!0,!0,!0,!0),e.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(e.ctxAttribs.alpha||s())&&(e.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(e.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffer),t.enableVertexAttribArray(e.attribs.position),t.enableVertexAttribArray(e.attribs.texCoord),t.vertexAttribPointer(e.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(e.attribs.texCoord,3,t.FLOAT,!1,20,8),e.instanceExt&&(0!=n&&e.instanceExt.vertexAttribDivisorANGLE(e.attribs.position,0),0!=i&&e.instanceExt.vertexAttribDivisorANGLE(e.attribs.texCoord,0)),t.activeTexture(t.TEXTURE0),t.uniform1i(e.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,e.renderTarget),t.uniform4fv(e.uniforms.viewportOffsetScale,e.viewportOffsetScale),t.drawElements(t.TRIANGLES,e.indexCount,t.UNSIGNED_SHORT,0),e.cardboardUI&&e.cardboardUI.renderNoState(),e.realBindFramebuffer.call(e.gl,t.FRAMEBUFFER,e.framebuffer),e.ctxAttribs.preserveDrawingBuffer||(e.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),e.dirtySubmitFrameBindings||e.realBindFramebuffer.call(t,t.FRAMEBUFFER,e.lastBoundFramebuffer),e.cullFace&&e.realEnable.call(t,t.CULL_FACE),e.depthTest&&e.realEnable.call(t,t.DEPTH_TEST),e.blend&&e.realEnable.call(t,t.BLEND),e.scissorTest&&e.realEnable.call(t,t.SCISSOR_TEST),e.stencilTest&&e.realEnable.call(t,t.STENCIL_TEST),e.realColorMask.apply(t,e.colorMask),e.realViewport.apply(t,e.viewport),!e.ctxAttribs.alpha&&e.ctxAttribs.preserveDrawingBuffer||e.realClearColor.apply(t,e.clearColor),e.instanceExt&&(0!=n&&e.instanceExt.vertexAttribDivisorANGLE(e.attribs.position,n),0!=i&&e.instanceExt.vertexAttribDivisorANGLE(e.attribs.texCoord,i))})),s()){var i=t.canvas;i.width==e.bufferWidth&&i.height==e.bufferHeight||(e.bufferWidth=i.width,e.bufferHeight=i.height,e.onResize())}},k.prototype.updateDeviceInfo=function(t){var e=this.gl,n=this;M(e,[e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING],(function(e){var i=n.computeMeshVertices_(n.meshWidth,n.meshHeight,t);if(e.bindBuffer(e.ARRAY_BUFFER,n.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),!n.indexCount){var r=n.computeMeshIndices_(n.meshWidth,n.meshHeight);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW),n.indexCount=r.length}}))},k.prototype.computeMeshVertices_=function(t,e,n){for(var i=new Float32Array(2*t*e*5),r=n.getLeftEyeVisibleTanAngles(),s=n.getLeftEyeNoLensTanAngles(),a=n.getLeftEyeVisibleScreenRect(s),l=0,c=0;c<2;c++){for(var u=0;u<e;u++)for(var h=0;h<t;h++,l++){var d=h/(t-1),p=u/(e-1),f=d,m=p,g=o(r[0],r[2],d),v=o(r[3],r[1],p),y=Math.sqrt(g*g+v*v),b=n.distortion.distortInverse(y);p=2*(a.y+(p=(v*b/y-s[3])/(s[1]-s[3]))*a.height-.5),i[5*l+0]=d=2*(a.x+(d=(g*b/y-s[0])/(s[2]-s[0]))*a.width-.5),i[5*l+1]=p,i[5*l+2]=f,i[5*l+3]=m,i[5*l+4]=c}var _=r[2]-r[0];r[0]=-(_+r[0]),r[2]=_-r[2],s[0]=-((_=s[2]-s[0])+s[0]),s[2]=_-s[2],a.x=1-(a.x+a.width)}return i},k.prototype.computeMeshIndices_=function(t,e){for(var n=new Uint16Array(2*(t-1)*(e-1)*6),i=t/2,r=e/2,o=0,s=0,a=0;a<2;a++)for(var l=0;l<e;l++)for(var c=0;c<t;c++,o++)0!=c&&0!=l&&(c<=i==l<=r?(n[s++]=o,n[s++]=o-t-1,n[s++]=o-t,n[s++]=o-t-1,n[s++]=o,n[s++]=o-1):(n[s++]=o-1,n[s++]=o-t,n[s++]=o,n[s++]=o-t,n[s++]=o-1,n[s++]=o-t-1));return n},k.prototype.getOwnPropertyDescriptor_=function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return void 0!==n.get&&void 0!==n.set||(n.configurable=!0,n.enumerable=!0,n.get=function(){return this.getAttribute(e)},n.set=function(t){this.setAttribute(e,t)}),n};var D=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),O=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),R=Math.PI/180;function I(t){this.gl=t,this.attribs={position:0},this.program=y(t,D,O,this.attribs),this.uniforms=b(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function L(t){this.coefficients=t}I.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},I.prototype.listen=function(t,e){var n=this.gl.canvas;this.listener=function(i){var r=n.clientWidth/2;i.clientX>r-42&&i.clientX<r+42&&i.clientY>n.clientHeight-42?t(i):i.clientX<42&&i.clientY<42&&e(i)},n.addEventListener("click",this.listener,!1)},I.prototype.onResize=function(){var t=this.gl,e=this;M(t,[t.ARRAY_BUFFER_BINDING],(function(t){var n=[],i=t.drawingBufferWidth/2,r=Math.max(screen.width,screen.height)*window.devicePixelRatio,o=t.drawingBufferWidth/r*window.devicePixelRatio,s=4*o/2,a=42*o,l=28*o/2,c=14*o;function u(t,e){var r=(90-t)*R,o=Math.cos(r),s=Math.sin(r);n.push(.3125*o*l+i,.3125*s*l+l),n.push(e*o*l+i,e*s*l+l)}n.push(i-s,a),n.push(i-s,t.drawingBufferHeight),n.push(i+s,a),n.push(i+s,t.drawingBufferHeight),e.gearOffset=n.length/2;for(var h=0;h<=6;h++){var d=60*h;u(d,1),u(d+12,1),u(d+20,.75),u(d+40,.75),u(d+48,1)}function p(e,i){n.push(c+e,t.drawingBufferHeight-c-i)}e.gearVertexCount=n.length/2-e.gearOffset,e.arrowOffset=n.length/2;var f=s/Math.sin(45*R);p(0,l),p(l,0),p(l+f,f),p(f,l+f),p(f,l-f),p(0,l),p(l,2*l),p(l+f,2*l-f),p(f,l-f),p(0,l),p(f,l-s),p(28*o,l-s),p(f,l+s),p(28*o,l+s),e.arrowVertexCount=n.length/2-e.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW)}))},I.prototype.render=function(){var t=this.gl,e=this;M(t,[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING],(function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.renderNoState()}))},I.prototype.renderNoState=function(){var t,e,n,i,r,o,s=this.gl;s.useProgram(this.program),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBuffer),s.enableVertexAttribArray(this.attribs.position),s.vertexAttribPointer(this.attribs.position,2,s.FLOAT,!1,8,0),s.uniform4f(this.uniforms.color,1,1,1,1),r=1/(0-(n=s.drawingBufferHeight)),o=1/-1023.9,(t=this.projMat)[0]=-2*(i=1/(0-(e=s.drawingBufferWidth))),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*o,t[11]=0,t[12]=(0+e)*i,t[13]=(n+0)*r,t[14]=1024.1*o,t[15]=1,s.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),s.drawArrays(s.TRIANGLE_STRIP,0,4),s.drawArrays(s.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),s.drawArrays(s.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},L.prototype.distortInverse=function(t){for(var e=0,n=1,i=t-this.distort(e);Math.abs(n-e)>1e-4;){var r=t-this.distort(n),o=n-r*((n-e)/(r-i));e=n,n=o,i=r}return n},L.prototype.distort=function(t){for(var e=t*t,n=0,i=0;i<this.coefficients.length;i++)n=e*(n+this.coefficients[i]);return(n+1)*t};var F=Math.PI/180,N=180/Math.PI,B=function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0};B.prototype={constructor:B,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();return 0!==t?this.multiplyScalar(1/t):(this.x=0,this.y=0,this.z=0),this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,s=t.z,a=t.w,l=a*e+o*i-s*n,c=a*n+s*e-r*i,u=a*i+r*n-o*e,h=-r*e-o*n-s*i;return this.x=l*a+h*-r+c*-s-u*-o,this.y=c*a+h*-o+u*-r-l*-s,this.z=u*a+h*-s+l*-o-c*-r,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,s=e.y,a=e.z;return this.x=i*a-r*s,this.y=r*o-n*a,this.z=n*s-i*o,this}};var U,V,j=function(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1};function z(t){this.width=t.width||m(),this.height=t.height||g(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}j.prototype={constructor:j,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,e,n){var i=Math.cos(t/2),r=Math.cos(e/2),o=Math.cos(n/2),s=Math.sin(t/2),a=Math.sin(e/2),l=Math.sin(n/2);return this.x=s*r*o+i*a*l,this.y=i*a*o-s*r*l,this.z=i*r*l+s*a*o,this.w=i*r*o-s*a*l,this},setFromEulerYXZ:function(t,e,n){var i=Math.cos(t/2),r=Math.cos(e/2),o=Math.cos(n/2),s=Math.sin(t/2),a=Math.sin(e/2),l=Math.sin(n/2);return this.x=s*r*o+i*a*l,this.y=i*a*o-s*r*l,this.z=i*r*l-s*a*o,this.w=i*r*o+s*a*l,this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this.x=t.x*i,this.y=t.y*i,this.z=t.z*i,this.w=Math.cos(n),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var n=t.x,i=t.y,r=t.z,o=t.w,s=e.x,a=e.y,l=e.z,c=e.w;return this.x=n*c+o*s+i*l-r*a,this.y=i*c+o*a+r*s-n*l,this.z=r*c+o*l+n*a-i*s,this.w=o*c-n*s-i*a-r*l,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(this.x=this.x*(t=1/t),this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this.x,i=this.y,r=this.z,o=this.w,s=o*t.w+n*t.x+i*t.y+r*t.z;if(s<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,s=-s):this.copy(t),s>=1)return this.w=o,this.x=n,this.y=i,this.z=r,this;var a=Math.acos(s),l=Math.sqrt(1-s*s);if(Math.abs(l)<.001)return this.w=.5*(o+this.w),this.x=.5*(n+this.x),this.y=.5*(i+this.y),this.z=.5*(r+this.z),this;var c=Math.sin((1-e)*a)/l,u=Math.sin(e*a)/l;return this.w=o*c+this.w*u,this.x=n*c+this.x*u,this.y=i*c+this.y*u,this.z=r*c+this.z*u,this},setFromUnitVectors:function(t,e){return void 0===U&&(U=new B),(V=t.dot(e)+1)<1e-6?(V=0,Math.abs(t.x)>Math.abs(t.z)?U.set(-t.y,t.x,0):U.set(0,-t.z,t.y)):U.crossVectors(t,e),this.x=U.x,this.y=U.y,this.z=U.z,this.w=V,this.normalize(),this}};var H=new z({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),G=new z({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),W={CardboardV1:new $({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new $({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function q(t,e){this.viewer=W.CardboardV2,this.updateDeviceParams(t),this.distortion=new L(this.viewer.distortionCoefficients);for(var n=0;n<e.length;n++){var i=e[n];W[i.id]=new $(i)}}function $(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}q.prototype.updateDeviceParams=function(t){this.device=this.determineDevice_(t)||this.device},q.prototype.getDevice=function(){return this.device},q.prototype.setViewer=function(t){this.viewer=t,this.distortion=new L(this.viewer.distortionCoefficients)},q.prototype.determineDevice_=function(t){if(!t)return s()?(console.warn("Using fallback iOS device measurements."),G):(console.warn("Using fallback Android device measurements."),H);var e=.0254/t.ydpi;return new z({widthMeters:.0254/t.xdpi*m(),heightMeters:e*g(),bevelMeters:.001*t.bevelMm})},q.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,e=this.device,n=this.distortion,i=t.screenLensDistance,r=t.interLensDistance/2,o=t.baselineLensDistance-e.bevelMeters,s=e.heightMeters-o,a=N*Math.atan(n.distort((e.widthMeters-t.interLensDistance)/2/i)),l=N*Math.atan(n.distort(r/i)),c=N*Math.atan(n.distort(o/i)),u=N*Math.atan(n.distort(s/i));return{leftDegrees:Math.min(a,t.fov),rightDegrees:Math.min(l,t.fov),downDegrees:Math.min(c,t.fov),upDegrees:Math.min(u,t.fov)}},q.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,e=this.device,n=this.distortion,i=Math.tan(-F*t.fov),r=Math.tan(F*t.fov),o=Math.tan(F*t.fov),s=Math.tan(-F*t.fov),a=e.widthMeters/4,l=e.heightMeters/2,c=t.interLensDistance/2-a,u=-(t.baselineLensDistance-e.bevelMeters-l),h=t.screenLensDistance,d=n.distort((c-a)/h),p=n.distort((u+l)/h),f=n.distort((c+a)/h),m=n.distort((u-l)/h),g=new Float32Array(4);return g[0]=Math.max(i,d),g[1]=Math.min(r,p),g[2]=Math.min(o,f),g[3]=Math.max(s,m),g},q.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,e=this.device,n=this.distortion,i=new Float32Array(4),r=n.distortInverse(Math.tan(-F*t.fov)),o=n.distortInverse(Math.tan(F*t.fov)),s=n.distortInverse(Math.tan(F*t.fov)),a=n.distortInverse(Math.tan(-F*t.fov)),l=e.widthMeters/4,c=e.heightMeters/2,u=t.interLensDistance/2-l,h=-(t.baselineLensDistance-e.bevelMeters-c),d=t.screenLensDistance,p=(h+c)/d,f=(u+l)/d,m=(h-c)/d;return i[0]=Math.max(r,(u-l)/d),i[1]=Math.min(o,p),i[2]=Math.min(s,f),i[3]=Math.max(a,m),i},q.prototype.getLeftEyeVisibleScreenRect=function(t){var e=this.viewer,n=this.device,i=e.screenLensDistance,r=(n.widthMeters-e.interLensDistance)/2,o=e.baselineLensDistance-n.bevelMeters,s=(t[0]*i+r)/n.widthMeters,a=(t[3]*i+o)/n.heightMeters;return{x:s,y:a,width:(t[2]*i+r)/n.widthMeters-s,height:(t[1]*i+o)/n.heightMeters-a}},q.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},q.prototype.getFieldOfViewRightEye=function(t){var e=this.getFieldOfViewLeftEye(t);return{leftDegrees:e.rightDegrees,rightDegrees:e.leftDegrees,upDegrees:e.upDegrees,downDegrees:e.downDegrees}},q.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.getUndistortedParams_();return{leftDegrees:N*Math.atan(t.outerDist),rightDegrees:N*Math.atan(t.innerDist),downDegrees:N*Math.atan(t.bottomDist),upDegrees:N*Math.atan(t.topDist)}},q.prototype.getUndistortedViewportLeftEye=function(){var t=this.getUndistortedParams_(),e=this.device,n=this.viewer.screenLensDistance,i=e.width/(e.widthMeters/n),r=e.height/(e.heightMeters/n),o=Math.round((t.eyePosX-t.outerDist)*i),s=Math.round((t.eyePosY-t.bottomDist)*r);return{x:o,y:s,width:Math.round((t.eyePosX+t.innerDist)*i)-o,height:Math.round((t.eyePosY+t.topDist)*r)-s}},q.prototype.getUndistortedParams_=function(){var t=this.viewer,e=this.device,n=t.screenLensDistance,i=t.interLensDistance/2/n,r=e.heightMeters/n,o=e.widthMeters/n/2-i,s=(t.baselineLensDistance-e.bevelMeters)/n,a=this.distortion.distortInverse(Math.tan(F*t.fov)),l=Math.min(o,a),c=Math.min(i,a),u=Math.min(s,a);return{outerDist:l,innerDist:c,topDist:Math.min(r-s,a),bottomDist:u,eyePosX:o,eyePosY:s}},q.Viewers=W;var Y={format:1,last_updated:"2019-11-09T17:36:14Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}]};function Q(t,e){if(this.dpdb=Y,this.recalculateDeviceParams_(),t){this.onDeviceParamsUpdated=e;var n=new XMLHttpRequest,i=this;n.open("GET",t,!0),n.addEventListener("load",(function(){i.loading=!1,n.status>=200&&n.status<=299?(i.dpdb=JSON.parse(n.response),i.recalculateDeviceParams_()):console.error("Error loading online DPDB!")})),n.send()}}function X(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}function K(t,e){this.set(t,e)}function Z(t,e){this.kFilter=t,this.isDebug=e,this.currentAccelMeasurement=new K,this.currentGyroMeasurement=new K,this.previousGyroMeasurement=new K,this.filterQ=s()?new j(-1,0,0,1):new j(1,0,0,1),this.previousFilterQ=new j,this.previousFilterQ.copy(this.filterQ),this.accelQ=new j,this.isOrientationInitialized=!1,this.estimatedGravity=new B,this.measuredGravity=new B,this.gyroIntegralQ=new j}function J(t,e){this.predictionTimeS=t,this.isDebug=e,this.previousQ=new j,this.previousTimestampS=null,this.deltaQ=new j,this.outQ=new j}function tt(t,e,n,i){this.yawOnly=n,this.accelerometer=new B,this.gyroscope=new B,this.filter=new Z(t,i),this.posePredictor=new J(e,i),this.isFirefoxAndroid=c(),this.isIOS=s();var r=u();this.isDeviceMotionInRadians=!this.isIOS&&r&&r<66,this.isWithoutDeviceMotion=d()||h(),this.filterToWorldQ=new j,s()?this.filterToWorldQ.setFromAxisAngle(new B(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new B(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new j,this.worldToScreenQ=new j,this.originalPoseAdjustQ=new j,this.originalPoseAdjustQ.setFromAxisAngle(new B(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),f()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new j,this.orientationOut_=new Float32Array(4),this.start()}Q.prototype.getDeviceParams=function(){return this.deviceParams},Q.prototype.recalculateDeviceParams_=function(){var t=this.calcDeviceParams_();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},Q.prototype.calcDeviceParams_=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var e=navigator.userAgent||navigator.vendor||window.opera,n=m(),i=g();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var r=0;r<t.devices.length;r++){var o=t.devices[r];if(o.rules)if("ios"==o.type||"android"==o.type){if(s()==("ios"==o.type)){for(var a=!1,l=0;l<o.rules.length;l++)if(this.ruleMatches_(o.rules[l],e,n,i)){a=!0;break}if(a)return new X({xdpi:o.dpi[0]||o.dpi,ydpi:o.dpi[1]||o.dpi,bevelMm:o.bw})}}else console.warn("Device["+r+"] has invalid type.");else console.warn("Device["+r+"] has no rules section.")}return console.warn("No DPDB device match."),null},Q.prototype.ruleMatches_=function(t,e,n,i){if(!t.ua&&!t.res)return!1;if(t.ua&&"SM"===t.ua.substring(0,2)&&(t.ua=t.ua.substring(0,7)),t.ua&&e.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var r=t.res[0],o=t.res[1];if(Math.min(n,i)!=Math.min(r,o)||Math.max(n,i)!=Math.max(r,o))return!1}return!0},K.prototype.set=function(t,e){this.sample=t,this.timestampS=e},K.prototype.copy=function(t){this.set(t.sample,t.timestampS)},Z.prototype.addAccelMeasurement=function(t,e){this.currentAccelMeasurement.set(t,e)},Z.prototype.addGyroMeasurement=function(t,e){var n;this.currentGyroMeasurement.set(t,e),n=e-this.previousGyroMeasurement.timestampS,isNaN(n)||n<=.001||n>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},Z.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var e=new j;e.copy(this.filterQ),e.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(e),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var n,i=new j;i.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),i.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",N*((n=i).w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(n.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var r=new j;r.copy(this.filterQ),r.multiply(i),this.filterQ.slerp(r,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},Z.prototype.getOrientation=function(){return this.filterQ},Z.prototype.accelToQuaternion_=function(t){var e=new B;e.copy(t),e.normalize();var n=new j;return n.setFromUnitVectors(new B(0,0,-1),e),n.inverse(),n},Z.prototype.gyroToQuaternionDelta_=function(t,e){var n=new j,i=new B;return i.copy(t),i.normalize(),n.setFromAxisAngle(i,t.length()*e),n},J.prototype.getPrediction=function(t,e,n){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=n,t;var i=new B;i.copy(e),i.normalize();var r=e.length();return r<20*F?(this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(N*r).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ):(this.deltaQ.setFromAxisAngle(i,r*this.predictionTimeS),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=n,this.outQ)},tt.prototype.getPosition=function(){return null},tt.prototype.getOrientation=function(){var t=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(n=(new j).setFromAxisAngle(new B(0,0,-1),0),i=new j,-90===window.orientation?i.setFromAxisAngle(new B(0,1,0),Math.PI/-2):i.setFromAxisAngle(new B(0,1,0),Math.PI/2),n.multiply(i)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((e=new j).setFromAxisAngle(new B(1,0,0),-Math.PI/2),e),t=this._deviceOrientationQ,(r=new j).copy(t),r.multiply(this.deviceOrientationFilterToWorldQ),r.multiply(this.resetQ),r.multiply(this.worldToScreenQ),r.multiplyQuaternions(this.deviceOrientationFixQ,r),this.yawOnly&&(r.x=0,r.z=0,r.normalize()),this.orientationOut_[0]=r.x,this.orientationOut_[1]=r.y,this.orientationOut_[2]=r.z,this.orientationOut_[3]=r.w,this.orientationOut_;var e,n,i,r,o=this.filter.getOrientation();return t=this.posePredictor.getPrediction(o,this.gyroscope,this.previousTimestampS),(r=new j).copy(this.filterToWorldQ),r.multiply(this.resetQ),r.multiply(t),r.multiply(this.worldToScreenQ),this.yawOnly&&(r.x=0,r.z=0,r.normalize()),this.orientationOut_[0]=r.x,this.orientationOut_[1]=r.y,this.orientationOut_[2]=r.z,this.orientationOut_[3]=r.w,this.orientationOut_},tt.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),f()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},tt.prototype.onDeviceOrientation_=function(t){this._deviceOrientationQ=this._deviceOrientationQ||new j;var e=t.alpha,n=t.beta,i=t.gamma;e=(e||0)*Math.PI/180,n=(n||0)*Math.PI/180,i=(i||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(n,e,-i)},tt.prototype.onDeviceMotion_=function(t){this.updateDeviceMotion_(t)},tt.prototype.updateDeviceMotion_=function(t){var e=t.accelerationIncludingGravity,n=t.rotationRate,i=t.timeStamp/1e3,r=i-this.previousTimestampS;return r<0?(E("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=i)):r<=.001||r>1?(E("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=i)):(this.accelerometer.set(-e.x,-e.y,-e.z),n&&(p()?this.gyroscope.set(-n.beta,n.alpha,n.gamma):this.gyroscope.set(n.alpha,n.beta,n.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,i)),this.filter.addAccelMeasurement(this.accelerometer,i),void(this.previousTimestampS=i))},tt.prototype.onOrientationChange_=function(t){this.setScreenTransform_()},tt.prototype.onMessage_=function(t){var e=t.data;e&&e.type&&"devicemotion"===e.type.toLowerCase()&&this.updateDeviceMotion_(e.deviceMotionEvent)},tt.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new B(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new B(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},tt.prototype.start=function(){var t,e,n;this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),s()&&(t=window.self!==window.top,e=C(document.referrer),n=C(window.location.href),t&&e!==n)&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},tt.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var et=new B(1,0,0),nt=new B(0,0,1),it=new j;it.setFromAxisAngle(et,-Math.PI/2),it.multiply((new j).setFromAxisAngle(nt,Math.PI/2));var rt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new j,this._outQ=new j,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return r(t,[{key:"init",value:function(){var t=null;try{(t=new RelativeOrientationSensor({frequency:60,referenceFrame:"screen"})).addEventListener("error",this._onSensorError)}catch(e){this.errors.push(e),"SecurityError"===e.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===e.name?this.useDeviceMotion():console.error(e)}t&&(this.api="sensor",this.sensor=t,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new tt(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var t=this.sensor.quaternion;this._sensorQ.set(t[0],t[1],t[2],t[3]);var e=this._outQ;return e.copy(it),e.multiply(this._sensorQ),this.config.YAW_ONLY&&(e.x=e.z=0,e.normalize()),this._out[0]=e.x,this._out[1]=e.y,this._out[2]=e.z,this._out[3]=e.w,this._out}},{key:"_onSensorError",value:function(t){this.errors.push(t.error),"NotAllowedError"===t.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===t.error.name?console.error("Sensor could not be read"):console.error(t.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),t}();function ot(){this.loadIcon_();var t=document.createElement("div");(o=t.style).position="fixed",o.top=0,o.right=0,o.bottom=0,o.left=0,o.backgroundColor="gray",o.fontFamily="sans-serif",o.zIndex=1e6;var e=document.createElement("img");e.src=this.icon,(o=e.style).marginLeft="25%",o.marginTop="25%",o.width="50%",t.appendChild(e);var n=document.createElement("div");(o=n.style).textAlign="center",o.fontSize="16px",o.lineHeight="24px",o.margin="24px 25%",o.width="50%",n.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(n);var i=document.createElement("div");(o=i.style).backgroundColor="#CFD8DC",o.position="fixed",o.bottom=0,o.width="100%",o.height="48px",o.padding="14px 24px",o.boxSizing="border-box",o.color="#656A6B",t.appendChild(i);var r=document.createElement("div");r.style.float="left",r.innerHTML="No Cardboard viewer?";var o,s=document.createElement("a");s.href="https://www.google.com/get/cardboard/get-cardboard/",s.innerHTML="get one",s.target="_blank",(o=s.style).float="right",o.fontWeight=600,o.textTransform="uppercase",o.borderLeft="1px solid gray",o.paddingLeft="24px",o.textDecoration="none",o.color="#656A6B",i.appendChild(r),i.appendChild(s),this.overlay=t,this.text=n,this.hide()}function st(t){try{this.selectedKey=localStorage.getItem("WEBVR_CARDBOARD_VIEWER")}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey=t||"CardboardV1"),this.dialog=this.createDialog_(q.Viewers),this.root=null,this.onChangeCallbacks_=[]}ot.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var e=this.overlay.querySelector("img").style;f()?(e.width="20%",e.marginLeft="40%",e.marginTop="3%"):(e.width="50%",e.marginLeft="25%",e.marginTop="25%")},ot.prototype.hide=function(){this.overlay.style.display="none"},ot.prototype.showTemporarily=function(t,e){this.show(e),this.timer=setTimeout(this.hide.bind(this),t)},ot.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},ot.prototype.update=function(){this.disableShowTemporarily(),!f()&&_()?this.show():this.hide()},ot.prototype.loadIcon_=function(){this.icon="data:image/svg+xml,"+encodeURIComponent("<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>")},st.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},st.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},st.prototype.getCurrentViewer=function(){return q.Viewers[this.selectedKey]},st.prototype.getSelectedKey_=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},st.prototype.onChange=function(t){this.onChangeCallbacks_.push(t)},st.prototype.fireOnChange_=function(t){for(var e=0;e<this.onChangeCallbacks_.length;e++)this.onChangeCallbacks_[e](t)},st.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&q.Viewers[this.selectedKey]){this.fireOnChange_(q.Viewers[this.selectedKey]);try{localStorage.setItem("WEBVR_CARDBOARD_VIEWER",this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},st.prototype.createDialog_=function(t){var e=document.createElement("div");e.classList.add("webvr-polyfill-viewer-selector"),e.style.display="none";var n=document.createElement("div");(r=n.style).position="fixed",r.left=0,r.top=0,r.width="100%",r.height="100%",r.background="rgba(0, 0, 0, 0.3)",n.addEventListener("click",this.hide.bind(this));var i=document.createElement("div"),r=i.style;for(var o in r.boxSizing="border-box",r.position="fixed",r.top="24px",r.left="50%",r.marginLeft="-140px",r.width="280px",r.padding="24px",r.overflow="hidden",r.background="#fafafa",r.fontFamily="'Roboto', sans-serif",r.boxShadow="0px 5px 20px #666",i.appendChild(this.createH1_("Select your viewer")),t)i.appendChild(this.createChoice_(o,t[o].label));return i.appendChild(this.createButton_("Save",this.onSave_.bind(this))),e.appendChild(n),e.appendChild(i),e},st.prototype.createH1_=function(t){var e=document.createElement("h1"),n=e.style;return n.color="black",n.fontSize="20px",n.fontWeight="bold",n.marginTop=0,n.marginBottom="24px",e.innerHTML=t,e},st.prototype.createChoice_=function(t,e){var n=document.createElement("div");n.style.marginTop="8px",n.style.color="black";var i=document.createElement("input");i.style.fontSize="30px",i.setAttribute("id",t),i.setAttribute("type","radio"),i.setAttribute("value",t),i.setAttribute("name","field");var r=document.createElement("label");return r.style.marginLeft="4px",r.setAttribute("for",t),r.innerHTML=e,n.appendChild(i),n.appendChild(r),n},st.prototype.createButton_=function(t,e){var n=document.createElement("button");n.innerHTML=t;var i=n.style;return i.float="right",i.textTransform="uppercase",i.color="#1094f7",i.fontSize="14px",i.letterSpacing=0,i.border=0,i.background="none",i.marginTop="16px",n.addEventListener("click",e),n},"undefined"!=typeof window?window:void 0!==n||"undefined"!=typeof self&&self;var at,lt=(at=function(t,e){return function(t,e){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(1),o="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",r),this.noSleepVideo.addEventListener("timeupdate",(function(t){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}).bind(this)))}return i(t,[{key:"enable",value:function(){o?(this.disable(),this.noSleepTimer=window.setInterval((function(){window.location.href="/",window.setTimeout(window.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){o?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),t}();t.exports=s},function(t,e,n){t.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])}(e={exports:{}}),e.exports}())&&at.__esModule&&Object.prototype.hasOwnProperty.call(at,"default")?at.default:at,ct=1e3,ut=[0,0,.5,1],ht=[.5,0,.5,1],dt=window.requestAnimationFrame,pt=window.cancelAnimationFrame;function ft(t){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:t.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:t.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:t.canPresent},maxLayers:{writable:!1,enumerable:!0,value:t.maxLayers},hasOrientation:{enumerable:!0,get:function(){return S("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),t.hasOrientation}}})}function mt(t){var e=!("wakelock"in(t=t||{}))||t.wakelock;this.isPolyfilled=!0,this.displayId=ct++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return S("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new ft({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,e&&_()&&(this.wakelock_=new lt)}mt.prototype.getFrameData=function(t){return x(t,this._getPose(),this)},mt.prototype.getPose=function(){return S("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},mt.prototype.resetPose=function(){return S("VRDisplay.prototype.resetPose"),this._resetPose()},mt.prototype.getImmediatePose=function(){return S("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},mt.prototype.requestAnimationFrame=function(t){return dt(t)},mt.prototype.cancelAnimationFrame=function(t){return pt(t)},mt.prototype.wrapForFullscreen=function(t){if(s())return t;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var e=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",e.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==t)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=t,this.originalParent_=t.parentElement,this.originalParent_||document.body.appendChild(t),!this.fullscreenWrapper_.parentElement){var n=this.fullscreenElement_.parentElement;n.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),n.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var i=this;return function(){if(i.fullscreenElement_){var t=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];i.fullscreenElement_.setAttribute("style",t.join("; ")+";")}}(),this.fullscreenWrapper_},mt.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var t=this.fullscreenElement_;this.fullscreenElementCachedStyle_?t.setAttribute("style",this.fullscreenElementCachedStyle_):t.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var e=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(t),this.originalParent_===e?e.insertBefore(t,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(t),e.removeChild(this.fullscreenWrapper_),t}},mt.prototype.requestPresent=function(t){var e=this.isPresenting,n=this;return t instanceof Array||(S("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),t=[t]),new Promise((function(i,r){if(n.capabilities.canPresent)if(0==t.length||t.length>n.capabilities.maxLayers)r(new Error("Invalid number of layers."));else{var o=t[0];if(o.source){var l=o.leftBounds||ut,c=o.rightBounds||ht;if(e){var u=n.layer_;u.source!==o.source&&(u.source=o.source);for(var h=0;h<4;h++)u.leftBounds[h]=l[h],u.rightBounds[h]=c[h];return n.wrapForFullscreen(n.layer_.source),n.updatePresent_(),void i()}if(n.layer_={predistorted:o.predistorted,source:o.source,leftBounds:l.slice(0),rightBounds:c.slice(0)},n.waitingForPresent_=!1,n.layer_&&n.layer_.source){var d=n.wrapForFullscreen(n.layer_.source);n.addFullscreenListeners_(d,(function(){var t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;n.isPresenting=d===t,n.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(t){console.error("screen.orientation.lock() failed due to",t.message)})),n.waitingForPresent_=!1,n.beginPresent_(),i()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),n.removeFullscreenWrapper(),n.disableWakeLock(),n.endPresent_(),n.removeFullscreenListeners_()),n.fireVRDisplayPresentChange_()}),(function(){n.waitingForPresent_&&(n.removeFullscreenWrapper(),n.removeFullscreenListeners_(),n.disableWakeLock(),n.waitingForPresent_=!1,n.isPresenting=!1,r(new Error("Unable to present.")))})),function(t){if(a())return!1;if(t.requestFullscreen)t.requestFullscreen();else if(t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0}(d)?(n.enableWakeLock(),n.waitingForPresent_=!0):(s()||a())&&(n.enableWakeLock(),n.isPresenting=!0,n.beginPresent_(),n.fireVRDisplayPresentChange_(),i())}n.waitingForPresent_||s()||(v(),r(new Error("Unable to present.")))}else i()}else r(new Error("VRDisplay is not capable of presenting."))}))},mt.prototype.exitPresent=function(){var t=this.isPresenting,e=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise((function(n,i){t?(!v()&&s()&&(e.endPresent_(),e.fireVRDisplayPresentChange_()),a()&&(e.removeFullscreenWrapper(),e.removeFullscreenListeners_(),e.endPresent_(),e.fireVRDisplayPresentChange_()),n()):i(new Error("Was not presenting to VRDisplay."))}))},mt.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},mt.prototype.fireVRDisplayPresentChange_=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(t)},mt.prototype.fireVRDisplayConnect_=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(t)},mt.prototype.addFullscreenListeners_=function(t,e,n){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=t,this.fullscreenChangeHandler_=e,this.fullscreenErrorHandler_=n,e&&(document.fullscreenEnabled?t.addEventListener("fullscreenchange",e,!1):document.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",e,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",e,!1):document.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",e,!1)),n&&(document.fullscreenEnabled?t.addEventListener("fullscreenerror",n,!1):document.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",n,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",n,!1):document.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",n,!1))},mt.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var t=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var e=this.fullscreenChangeHandler_;t.removeEventListener("fullscreenchange",e,!1),t.removeEventListener("webkitfullscreenchange",e,!1),document.removeEventListener("mozfullscreenchange",e,!1),t.removeEventListener("msfullscreenchange",e,!1)}if(this.fullscreenErrorHandler_){var n=this.fullscreenErrorHandler_;t.removeEventListener("fullscreenerror",n,!1),t.removeEventListener("webkitfullscreenerror",n,!1),document.removeEventListener("mozfullscreenerror",n,!1),t.removeEventListener("msfullscreenerror",n,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},mt.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},mt.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},mt.prototype.beginPresent_=function(){},mt.prototype.endPresent_=function(){},mt.prototype.submitFrame=function(t){},mt.prototype.getEyeParameters=function(t){return null};var gt={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function vt(t){var e=w({},gt);t=w(e,t||{}),mt.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new ft({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new rt(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new Q(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new q(this.dpdb_.getDeviceParams(),t.ADDITIONAL_VIEWERS),this.viewerSelector_=new st(t.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new ot),s()&&window.addEventListener("resize",this.onResize_.bind(this))}return(vt.prototype=Object.create(mt.prototype))._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},vt.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},vt.prototype._getFieldOfView=function(t){var e;if("left"==t)e=this.deviceInfo_.getFieldOfViewLeftEye();else{if("right"!=t)return console.error("Invalid eye provided: %s",t),null;e=this.deviceInfo_.getFieldOfViewRightEye()}return e},vt.prototype._getEyeOffset=function(t){var e;if("left"==t)e=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if("right"!=t)return console.error("Invalid eye provided: %s",t),null;e=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return e},vt.prototype.getEyeParameters=function(t){var e=this._getEyeOffset(t),n=this._getFieldOfView(t),i={offset:e,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(i,"fieldOfView",{enumerable:!0,get:function(){return S("VRFieldOfView","VRFrameData's projection matrices"),n}}),i},vt.prototype.onDeviceParamsUpdated_=function(t){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},vt.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},vt.prototype.beginPresent_=function(){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2")),t&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=m()*this.bufferScale_,t.canvas.height=g()*this.bufferScale_,this.cardboardUI_=new I(t)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new I(t)),this.distorter_=new k(t,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen((function(t){this.viewerSelector_.show(this.layer_.source.parentElement),t.stopPropagation(),t.preventDefault()}).bind(this),(function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}).bind(this)),this.rotateInstructions_&&(f()&&_()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},vt.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},vt.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},vt.prototype.submitFrame=function(t){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2"));var n=e.canvas;n.width==this.lastWidth&&n.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=n.width,this.lastHeight=n.height,this.cardboardUI_.render()}},vt.prototype.onOrientationChange_=function(t){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},vt.prototype.onResize_=function(t){if(this.layer_){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),A(e.canvas)}},vt.prototype.onViewerChanged_=function(t){this.deviceInfo_.setViewer(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},vt.prototype.fireVRDisplayDeviceParamsChange_=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(t)},vt.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},vt.VRDisplay=mt,vt}()}(e={exports:{}}),e.exports}(),a=(e=s)&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,l={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function c(t){this.config=o(o({},l),t),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&i())&&(this.enable(),this.getVRDisplays().then((function(t){t&&t[0]&&t[0].fireVRDisplayConnect_&&t[0].fireVRDisplayConnect_()})))}c.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(i()){var t=new a({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(t)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},c.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var t=this.native.VRFrameData,e=new this.native.VRFrameData,n=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(i){i instanceof t?n.call(this,i):(n.call(this,e),i.pose=e.pose,r(e.leftProjectionMatrix,i.leftProjectionMatrix),r(e.rightProjectionMatrix,i.rightProjectionMatrix),r(e.leftViewMatrix,i.leftViewMatrix),r(e.rightViewMatrix,i.rightViewMatrix))}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=a.VRDisplay,window.VRFrameData=a.VRFrameData},c.prototype.getVRDisplays=function(){var t=this;return this.hasNative?this.native.getVRDisplays.call(navigator).then((function(e){return e.length>0?e:t.getPolyfillDisplays()})):Promise.resolve(this.getPolyfillDisplays())},c.version="0.10.12",c.VRFrameData=a.VRFrameData,c.VRDisplay=a.VRDisplay;var u=Object.freeze({default:c}),h=u&&c||u;return void 0!==n&&n.window&&(n.document||(n.document=n.window.document),n.navigator||(n.navigator=n.window.navigator)),h}))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],68:[function(t,e,n){var i=/\n/,r=/\s/;function o(t,e,n,i){var r=t.indexOf(e,n);return-1===r||r>i?i:r}function s(t){return r.test(t)}function a(t,e,n,i){return{start:e,end:e+Math.min(i,n-e)}}e.exports=function(t,n){return e.exports.lines(t,n).map((function(e){return t.substring(e.start,e.end)})).join("\n")},e.exports.lines=function(t,e){if(0===(e=e||{}).width&&"nowrap"!==e.mode)return[];t=t||"";var n="number"==typeof e.width?e.width:Number.MAX_VALUE,r=Math.max(0,e.start||0),l="number"==typeof e.end?e.end:t.length,c=e.mode,u=e.measure||a;return"pre"===c?function(t,e,n,r,o){for(var s=[],a=n,l=n;l<r&&l<e.length;l++){var c=e.charAt(l),u=i.test(c);if(u||l===r-1){var h=t(e,a,u?l:l+1,o);s.push(h),a=l+1}}return s}(u,t,r,l,n):function(t,e,n,i,r,a){var l=[],c=r;for("nowrap"===a&&(c=Number.MAX_VALUE);n<i&&n<e.length;){for(var u=o(e,"\n",n,i);n<u&&s(e.charAt(n));)n++;var h=t(e,n,u,c),d=n+(h.end-h.start),p=d+"\n".length;if(d<u){for(;d>n&&!s(e.charAt(d));)d--;if(d===n)p>n+"\n".length&&p--,d=p;else for(p=d;d>n&&s(e.charAt(d-"\n".length));)d--}if(d>=n){var f=t(e,n,d,c);l.push(f)}n=p}return l}(u,t,r,l,n,c)}},{}],69:[function(t,n,i){"use strict";var r=t("global/window"),o=t("is-function"),s=t("parse-headers"),a=t("xtend");function l(t,e,n){var i=t;return o(e)?(n=e,"string"==typeof t&&(i={uri:t})):i=a(e,{uri:t}),i.callback=n,i}function c(t,e,n){return u(e=l(t,e,n))}function u(t){if(void 0===t.callback)throw new Error("callback argument missing");var n=!1,i=function(e,i,r){n||(n=!0,t.callback(e,i,r))};function r(){var t=void 0;if(t=h.response?h.response:h.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;if(""===t.responseType&&(!t.responseXML||"parsererror"!==t.responseXML.documentElement.nodeName))return t.responseXML}catch(e){}return null}(h),y)try{t=JSON.parse(t)}catch(e){}return t}function o(t){return clearTimeout(d),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,i(t,b)}function a(){if(!u){var e;clearTimeout(d);var n=b,o=null;return 0!==(e=t.useXDR&&void 0===h.status?200:1223===h.status?204:h.status)?(n={body:r(),statusCode:e,method:f,headers:{},url:p,rawRequest:h},h.getAllResponseHeaders&&(n.headers=s(h.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),i(o,n,n.body)}}var l,u,h=t.xhr||null;h||(h=t.cors||t.useXDR?new c.XDomainRequest:new c.XMLHttpRequest);var d,p=h.url=t.uri||t.url,f=h.method=t.method||"GET",m=t.body||t.data,g=h.headers=t.headers||{},v=!!t.sync,y=!1,b={body:void 0,headers:{},statusCode:0,method:f,url:p,rawRequest:h};if("json"in t&&!1!==t.json&&(y=!0,g.accept||g.Accept||(g.Accept="application/json"),"GET"!==f&&"HEAD"!==f&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),m=JSON.stringify(!0===t.json?m:t.json))),h.onreadystatechange=function(){4===h.readyState&&setTimeout(a,0)},h.onload=a,h.onerror=o,h.onprogress=function(){},h.onabort=function(){u=!0},h.ontimeout=o,h.open(f,p,!v,t.username,t.password),v||(h.withCredentials=!!t.withCredentials),!v&&t.timeout>0&&(d=setTimeout((function(){if(!u){u=!0,h.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",o(t)}}),t.timeout)),h.setRequestHeader)for(l in g)g.hasOwnProperty(l)&&h.setRequestHeader(l,g[l]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(h.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(h),h.send(m||null),h}n.exports=c,n.exports.default=c,c.XMLHttpRequest=r.XMLHttpRequest||function(){},c.XDomainRequest="withCredentials"in new c.XMLHttpRequest?c.XMLHttpRequest:r.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],(function(t){c["delete"===t?"del":t]=function(e,n,i){return(n=l(e,n,i)).method=t.toUpperCase(),u(n)}}))},{"global/window":27,"is-function":33,"parse-headers":47,xtend:71}],70:[function(t,e,n){e.exports=void 0!==self.DOMParser?function(t){return(new self.DOMParser).parseFromString(t,"application/xml")}:void 0!==self.ActiveXObject&&new self.ActiveXObject("Microsoft.XMLDOM")?function(t){var e=new self.ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e}:function(t){var e=document.createElement("div");return e.innerHTML=t,e}},{}],71:[function(t,e,n){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)i.call(n,r)&&(t[r]=n[r])}return t};var i=Object.prototype.hasOwnProperty},{}],72:[function(t,e,n){e.exports={name:"aframe",version:"1.1.0",description:"A web framework for building virtual reality experiences.",homepage:"https://aframe.io/",main:"dist/aframe-master.js",scripts:{browserify:"browserify src/index.js -s 'AFRAME' -p browserify-derequire",build:"shx mkdir -p build/ && npm run browserify -- --debug -t [ envify --INSPECTOR_VERSION dev ] -o build/aframe.js",codecov:"codecov",dev:"npm run build && cross-env INSPECTOR_VERSION=dev node ./scripts/budo -t envify",dist:"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"npm run browserify -s -- --debug | exorcist dist/aframe-master.js.map > dist/aframe-master.js","dist:min":"npm run browserify -s -- --debug -p [ minifyify --map aframe-master.min.js.map --output dist/aframe-master.min.js.map ] -o dist/aframe-master.min.js",docs:"markserv --dir docs --port 9001",preghpages:"node ./scripts/preghpages.js",ghpages:"ghpages -p gh-pages/",lint:"semistandard -v | snazzy","lint:fix":"semistandard --fix",precommit:"npm run lint",prepush:"node scripts/testOnlyCheck.js",prerelease:"node scripts/release.js 1.0.4 1.1.0",start:"npm run dev","start:https":"cross-env SSL=true npm run dev",test:"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:nobrowser":"NO_BROWSER=true npm test","test:node":"mocha --ui tdd tests/node"},repository:"aframevr/aframe",license:"MIT",files:["dist/*","docs/**/*","src/**/*","vendor/**/*"],dependencies:{"custom-event-polyfill":"^1.0.6",debug:"ngokevin/debug#noTimestamp","deep-assign":"^2.0.0","document-register-element":"dmarcos/document-register-element#8ccc532b7f3744be954574caf3072a5fd260ca90","load-bmfont":"^1.2.3","object-assign":"^4.0.1",present:"0.0.6","promise-polyfill":"^3.1.0","super-animejs":"^3.1.0","super-three":"^0.123.1","three-bmfont-text":"dmarcos/three-bmfont-text#1babdf8507c731a18f8af3b807292e2b9740955e","webvr-polyfill":"^0.10.12"},devDependencies:{browserify:"^13.1.0","browserify-css":"^0.8.4","browserify-derequire":"^0.9.4","browserify-istanbul":"^2.0.0",budo:"^9.2.0",chai:"^3.5.0","chai-shallow-deep-equal":"^1.4.0",chalk:"^1.1.3",codecov:"^1.0.1","cross-env":"^5.0.1",envify:"^3.4.1",exorcist:"^0.4.0",ghpages:"0.0.8","git-rev":"^0.2.1",glob:"^7.1.1",husky:"^0.11.7",istanbul:"^0.4.5",jsdom:"^9.11.0",karma:"1.4.1","karma-browserify":"^5.1.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^1.2.0","karma-mocha":"^1.1.1","karma-mocha-reporter":"^2.1.0","karma-sinon-chai":"1.2.4",lolex:"^1.5.1",markserv:"github:sukima/markserv#feature/fix-broken-websoketio-link",minifyify:"^7.3.3",mocha:"^3.0.2","mozilla-download":"^1.1.1","replace-in-file":"^2.5.3",semistandard:"^9.0.0",shelljs:"^0.7.7",shx:"^0.2.2",sinon:"^1.17.5","sinon-chai":"2.8.0",snazzy:"^5.0.0","too-wordy":"ngokevin/too-wordy",uglifyjs:"^2.4.10","write-good":"^0.9.1"},link:!0,browserify:{transform:["browserify-css","envify"]},semistandard:{ignore:["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},keywords:["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","web-components","webvr"],"browserify-css":{minify:!0},engines:{node:">= 4.6.0",npm:"^2.15.9"}}},{}],73:[function(t,e,n){var i=t("super-animejs"),r=t("../core/component").components,o=t("../core/component").registerComponent,s=t("../lib/three"),a=t("../utils"),l=new s.Color,c=new s.Color,u=a.entity.getComponentProperty,h=a.entity.setComponentProperty,d={};function p(t){t.x=s.Math.degToRad(t.x),t.y=s.Math.degToRad(t.y),t.z=s.Math.degToRad(t.z)}function f(t,e,n){var i;for(i=0;i<e.length;i++)t.addEventListener(e[i],n)}function m(t,e,n){var i;for(i=0;i<e.length;i++)t.removeEventListener(e[i],n)}function g(t,e){var n,i,r;for(i=y(e),r=t,n=0;n<i.length;n++)r=r[i[n]];if(void 0===r)throw console.log(t),new Error("[animation] property ("+e+") could not be found");return r}function v(t,e,n,i){var r,o,a,l;for(e.startsWith("object3D.rotation")&&(n=s.Math.degToRad(n)),o=y(e),l=t,r=0;r<o.length-1;r++)l=l[o[r]];a=o[o.length-1],"color"!==i?l[a]=n:"r"in l[a]?(l[a].r=n.r,l[a].g=n.g,l[a].b=n.b):(l[a].x=n.r,l[a].y=n.g,l[a].z=n.b)}function y(t){return t in d||(d[t]=t.split(".")),d[t]}function b(t){return t.isRawProperty||t.property.startsWith("components")||t.property.startsWith("object3D")}e.exports.Component=o("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(t){return!0===t||"true"===t||!1!==t&&"false"!==t&&parseInt(t,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var t=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){t.animationIsPlaying=!1,t.el.emit("animationcomplete",t.eventDetail,!1),t.id&&t.el.emit("animationcomplete__"+t.id,t.eventDetail,!1)}}},update:function(t){var e=this.config,n=this.data;this.animationIsPlaying=!1,this.data.enabled&&n.property&&(e.autoplay=!1,e.direction=n.dir,e.duration=n.dur,e.easing=n.easing,e.elasticity=n.elasticity,e.loop=n.loop,e.round=n.round,this.createAndStartAnimation())},tick:function(t,e){this.animationIsPlaying&&(this.time+=e,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var t=this.data;this.updateConfig(),this.animationIsPlaying=!1,this.animation=i(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!t.autoplay||t.startEvents&&t.startEvents.length||(t.delay?setTimeout(this.beginAnimation,t.delay):this.beginAnimation())},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){this.data.enabled&&(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=i(this.config),this.data.delay?setTimeout(this.beginAnimation,this.data.delay):this.beginAnimation())},updateConfigForRawColor:function(){var t,e,n,i=this.config,r=this.data,o=this.el;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){for(e in t=""===r.from?g(o,r.property):r.from,this.setColorConfig(t,r.to),t=this.fromColor,n=this.toColor,this.targetsArray.length=0,this.targetsArray.push(t),i.targets=this.targetsArray,n)i[e]=n[e];var s;i.update=(s={},function(t){var e;(e=t.animatables[0].target).r===s.r&&e.g===s.g&&e.b===s.b||v(o,r.property,e,r.type)})}},updateConfigForDefault:function(){var t,e,n,i,r=this.config,o=this.data,s=this.el;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(t=""===o.from?b(o)?g(s,o.property):u(s,o.property):o.from,n=o.to,isNaN(t||n)?(t=t?t.toString():t,n=n?n.toString():n):(t=parseFloat(t),n=parseFloat(n)),(e="true"===o.to||"false"===o.to||!0===o.to||!1===o.to)&&(t="true"===o.from||!0===o.from?1:0,n="true"===o.to||!0===o.to?1:0),this.targets.aframeProperty=t,r.targets=this.targets,r.aframeProperty=n,r.update=function(t){var n;(n=t.animatables[0].target.aframeProperty)!==i&&(i=n,e&&(n=n>=1),b(o)?v(s,o.property,n,o.type):h(s,o.property,n))})},updateConfigForVector:function(){var t,e,n,i,r=this.config,o=this.data,s=this.el;for(t in e=""!==o.from?a.coordinates.parse(o.from):u(s,o.property),n=a.coordinates.parse(o.to),"rotation"===o.property&&(p(e),p(n)),this.targetsArray.length=0,this.targetsArray.push(e),r.targets=this.targetsArray,n)r[t]=n[t];r.update="position"!==o.property&&"rotation"!==o.property&&"scale"!==o.property?function(){var t={};return function(e){var n=e.animatables[0].target;n.x===t.x&&n.y===t.y&&n.z===t.z||(t.x=n.x,t.y=n.y,t.z=n.z,h(s,o.property,n))}}():(i={},function(t){var e=t.animatables[0].target;"scale"===o.property&&(e.x=Math.max(1e-4,e.x),e.y=Math.max(1e-4,e.y),e.z=Math.max(1e-4,e.z)),e.x===i.x&&e.y===i.y&&e.z===i.z||(i.x=e.x,i.y=e.y,i.z=e.z,s.object3D[o.property].set(e.x,e.y,e.z))})},updateConfig:function(){var t,e,n,i,o,s;e=this.el,s=(o=this.data.property.split("."))[1],t=(n=e.components[i=o[0]]||r[i])?s&&!n.schema[s]?null:s?n.schema[s].type:n.schema.type:null,b(this.data)&&"color"===this.data.type?this.updateConfigForRawColor():"vec2"===t||"vec3"===t||"vec4"===t?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(t){var e,n=this.data,r=this.el,o=this;return""===n.from&&!!n.property.startsWith("components")&&(e=y(n.property)[1],!r.components[e]&&(r.addEventListener("componentinitialized",(function n(s){s.detail.name===e&&(t(),o.animation=i(o.config),r.removeEventListener("componentinitialized",n))})),!0))},stopRelatedAnimations:function(){var t,e;for(e in this.el.components)t=this.el.components[e],e!==this.attrName&&"animation"===t.name&&t.animationIsPlaying&&t.data.property===this.data.property&&(t.animationIsPlaying=!1)},addEventListeners:function(){var t=this.data,e=this.el;f(e,t.startEvents,this.onStartEvent),f(e,t.pauseEvents,this.pauseAnimation),f(e,t.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var t=this.data,e=this.el;m(e,t.startEvents,this.onStartEvent),m(e,t.pauseEvents,this.pauseAnimation),m(e,t.resumeEvents,this.resumeAnimation)},setColorConfig:function(t,e){l.set(t),c.set(e),e=this.toColor,(t=this.fromColor).r=l.r,t.g=l.g,t.b=l.b,e.r=c.r,e.g=c.g,e.b=c.b}})},{"../core/component":130,"../lib/three":178,"../utils":204,"super-animejs":56}],74:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../lib/three");e.exports.Component=i("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var t,e=this.el;t=this.camera=new r.PerspectiveCamera,e.setObject3D("camera",t)},update:function(t){var e=this.data,n=this.camera;n.aspect=e.aspect||window.innerWidth/window.innerHeight,n.far=e.far,n.fov=e.fov,n.near=e.near,n.zoom=e.zoom,n.updateProjectionMatrix(),this.updateActiveCamera(t),this.updateSpectatorCamera(t)},updateActiveCamera:function(t){var e=this.data,n=this.el,i=this.system;t&&t.active===e.active||e.spectator||(e.active&&i.activeCameraEl!==n?i.setActiveCamera(n):e.active||i.activeCameraEl!==n||i.disableActiveCamera())},updateSpectatorCamera:function(t){var e=this.data,n=this.el,i=this.system;t&&t.spectator===e.spectator||(e.spectator&&i.spectatorCameraEl!==n?i.setSpectatorCamera(n):e.spectator||i.spectatorCameraEl!==n||i.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}})},{"../core/component":130,"../lib/three":178}],75:[function(t,e,n){var i,r,o,s,a=t("../core/component").registerComponent,l=t("../utils/"),c=l.bind,u={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},h={DOWN:["selectstart"],UP:["selectend"]};e.exports.Component=a("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:l.device.isMobile()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity"]}},init:function(){var t=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.updateCanvasBounds=l.debounce((function(){t.canvasBounds=t.el.sceneEl.canvas.getBoundingClientRect()}),500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=c(this.onCursorDown,this),this.onCursorUp=c(this.onCursorUp,this),this.onIntersection=c(this.onIntersection,this),this.onIntersectionCleared=c(this.onIntersectionCleared,this),this.onMouseMove=c(this.onMouseMove,this),this.onEnterVR=c(this.onEnterVR,this)},update:function(t){this.data.rayOrigin!==t.rayOrigin&&this.updateMouseEventListeners()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var t=this.el;t.removeState("cursor-hovering"),t.removeState("cursor-fusing"),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState("cursor-hovered"),this.removeEventListeners()},addEventListeners:function(){var t,e=this.data,n=this.el,i=this;function r(){t=n.sceneEl.canvas,e.downEvents.length||e.upEvents.length||(u.DOWN.forEach((function(e){t.addEventListener(e,i.onCursorDown)})),u.UP.forEach((function(e){t.addEventListener(e,i.onCursorUp)})))}(t=n.sceneEl.canvas)?r():n.sceneEl.addEventListener("render-target-loaded",r),e.downEvents.forEach((function(t){n.addEventListener(t,i.onCursorDown)})),e.upEvents.forEach((function(t){n.addEventListener(t,i.onCursorUp)})),n.addEventListener("raycaster-intersection",this.onIntersection),n.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),n.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),n.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var t,e=this.data,n=this.el,i=this;!(t=n.sceneEl.canvas)||e.downEvents.length||e.upEvents.length||(u.DOWN.forEach((function(e){t.removeEventListener(e,i.onCursorDown)})),u.UP.forEach((function(e){t.removeEventListener(e,i.onCursorUp)}))),e.downEvents.forEach((function(t){n.removeEventListener(t,i.onCursorDown)})),e.upEvents.forEach((function(t){n.removeEventListener(t,i.onCursorUp)})),n.removeEventListener("raycaster-intersection",this.onIntersection),n.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("touchstart",this.onMouseMove),t.removeEventListener("touchmove",this.onMouseMove),n.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),n.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds)},updateMouseEventListeners:function(){var t,e=this.el;(t=e.sceneEl.canvas).removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("touchmove",this.onMouseMove),e.setAttribute("raycaster","useWorldCoordinates",!1),"mouse"===this.data.rayOrigin&&(t.addEventListener("mousemove",this.onMouseMove,!1),t.addEventListener("touchmove",this.onMouseMove,!1),e.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:(i=new THREE.Vector3,r=new THREE.Vector2,o=new THREE.Vector3,s={origin:o,direction:i},function(t){var e,n,a=this.canvasBounds,l=this.el.sceneEl.camera;l.parent.updateMatrixWorld(),n=(e="touchmove"===t.type||"touchstart"===t.type?t.touches.item(0):t).clientY-a.top,r.x=(e.clientX-a.left)/a.width*2-1,r.y=-n/a.height*2+1,o.setFromMatrixPosition(l.matrixWorld),i.set(r.x,r.y,.5).unproject(l).sub(o).normalize(),this.el.setAttribute("raycaster",s),"touchmove"===t.type&&t.preventDefault()}),onCursorDown:function(t){this.isCursorDown=!0,"mouse"===this.data.rayOrigin&&"touchstart"===t.type&&(this.onMouseMove(t),this.el.components.raycaster.checkIntersections(),t.preventDefault()),this.twoWayEmit("mousedown"),this.cursorDownEl=this.intersectedEl},onCursorUp:function(t){if(this.isCursorDown){this.isCursorDown=!1;var e=this.data;this.twoWayEmit("mouseup"),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit("mouseup",this.intersectedEventDetail)),e.fuse&&"mouse"!==e.rayOrigin||!this.intersectedEl||this.cursorDownEl!==this.intersectedEl||this.twoWayEmit("click"),this.cursorDownEl=null,"touchend"===t.type&&t.preventDefault()}},onIntersection:function(t){var e,n,i,r;r=t.detail.intersections[n=t.detail.els[0]===this.el?1:0],(i=t.detail.els[n])&&this.intersectedEl!==i&&(this.intersectedEl&&(e=this.el.components.raycaster.getIntersection(this.intersectedEl))&&e.distance<=r.distance||(this.clearCurrentIntersection(!0),this.setIntersection(i,r)))},onIntersectionCleared:function(t){-1!==t.detail.clearedEls.indexOf(this.intersectedEl)&&this.clearCurrentIntersection()},onEnterVR:function(){this.clearCurrentIntersection(!0);var t=this.el.sceneEl.xrSession,e=this;t&&"mouse"!==this.data.rayOrigin&&(h.DOWN.forEach((function(n){t.addEventListener(n,e.onCursorDown)})),h.UP.forEach((function(n){t.addEventListener(n,e.onCursorUp)})))},setIntersection:function(t,e){var n=this.el,i=this.data,r=this;this.intersectedEl!==t&&(this.intersectedEl=t,n.addState("cursor-hovering"),t.addState("cursor-hovered"),this.twoWayEmit("mouseenter"),this.data.mouseCursorStylesEnabled&&"mouse"===this.data.rayOrigin&&this.el.sceneEl.canvas.classList.add("a-mouse-cursor-hover"),0!==i.fuseTimeout&&i.fuse&&(n.addState("cursor-fusing"),this.twoWayEmit("fusing"),this.fuseTimeout=setTimeout((function(){n.removeState("cursor-fusing"),r.twoWayEmit("click")}),i.fuseTimeout)))},clearCurrentIntersection:function(t){var e,n,i=this.el;this.intersectedEl&&(this.intersectedEl.removeState("cursor-hovered"),i.removeState("cursor-hovering"),i.removeState("cursor-fusing"),this.twoWayEmit("mouseleave"),this.data.mouseCursorStylesEnabled&&"mouse"===this.data.rayOrigin&&this.el.sceneEl.canvas.classList.remove("a-mouse-cursor-hover"),this.intersectedEl=null,clearTimeout(this.fuseTimeout),!0!==t&&0!==(n=this.el.components.raycaster.intersections).length&&(e=n[n[0].object.el===i?1:0])&&this.setIntersection(e.object.el,e))},twoWayEmit:function(t){var e,n=this.el,i=this.intersectedEl;e=this.el.components.raycaster.getIntersection(i),this.eventDetail.intersectedEl=i,this.eventDetail.intersection=e,n.emit(t,this.eventDetail),i&&(this.intersectedEventDetail.intersection=e,i.emit(t,this.intersectedEventDetail))}})},{"../core/component":130,"../utils/":204}],76:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/bind"),o=t("../utils/tracked-controls"),s=o.checkControllerPresentAndSetup,a=o.emitIfAxesChanged,l=o.onButtonEvent,c=t("../utils/").device.isWebXRAvailable,u=c?"google-daydream":"Daydream Controller";e.exports.Component=i("daydream-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:c?{axes:{touchpad:[0,1]},buttons:["none","none","touchpad","menu","system"]}:{axes:{trackpad:[0,1]},buttons:["trackpad","menu","system"]},bindMethods:function(){this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=r(this.removeControllersUpdateListener,this),this.onAxisMoved=r(this.onAxisMoved,this)},init:function(){var t=this;this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){l(e.detail.id,"down",t)},this.onButtonUp=function(e){l(e.detail.id,"up",t)},this.onButtonTouchStart=function(e){l(e.detail.id,"touchstart",t)},this.onButtonTouchEnd=function(e){l(e.detail.id,"touchend",t)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){s(this,u,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{armModel:t.armModel,hand:t.hand,idPrefix:u,id:u,orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/google/vr_controller_daydream.obj",mtl:"https://cdn.aframe.io/controllers/google/vr_controller_daydream.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(t){var e,n=t.detail.model;this.data.model&&((e=this.buttonMeshes={}).menu=n.getObjectByName("AppButton_AppButton_Cylinder.004"),e.system=n.getObjectByName("HomeButton_HomeButton_Cylinder.005"),e.trackpad=n.getObjectByName("TouchPad_TouchPad_Cylinder.003"),e.touchpad=n.getObjectByName("TouchPad_TouchPad_Cylinder.003"),n.position.set(0,0,-.04))},onAxisMoved:function(t){a(this,this.mapping.axes,t)},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id];e&&this.el.emit(e+"changed",t.detail.state)},updateModel:function(t,e){this.data.model&&this.updateButtonModel(t,e)},updateButtonModel:function(t,e){var n=this.buttonMeshes;if(n&&n[t]){var i;switch(e){case"down":i=this.data.buttonHighlightColor;break;case"touchstart":i=this.data.buttonTouchedColor;break;default:i=this.data.buttonColor}n[t].material.color.set(i)}}})},{"../core/component":130,"../utils/":204,"../utils/bind":198,"../utils/tracked-controls":213}],77:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/bind"),o=t("../utils/tracked-controls"),s=o.checkControllerPresentAndSetup,a=o.emitIfAxesChanged,l=o.onButtonEvent,c=t("../utils/").device.isWebXRAvailable,u=c?"samsung-gearvr":"Gear VR";e.exports.Component=i("gearvr-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:c?{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]}:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=r(this.removeControllersUpdateListener,this),this.onAxisMoved=r(this.onAxisMoved,this)},init:function(){var t=this;this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){l(e.detail.id,"down",t)},this.onButtonUp=function(e){l(e.detail.id,"up",t)},this.onButtonTouchStart=function(e){l(e.detail.id,"touchstart",t)},this.onButtonTouchEnd=function(e){l(e.detail.id,"touchend",t)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){s(this,u,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{armModel:t.armModel,hand:t.hand,idPrefix:u,id:u,orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/samsung/gear_vr_controller.obj",mtl:"https://cdn.aframe.io/controllers/samsung/gear_vr_controller.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(t){var e,n=t.detail.model;this.data.model&&((e=this.buttonMeshes={}).trigger=n.children[2],e.trackpad=n.children[1],e.touchpad=n.children[1])},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id];e&&this.el.emit(e+"changed",t.detail.state)},onAxisMoved:function(t){a(this,this.mapping.axes,t)},updateModel:function(t,e){this.data.model&&this.updateButtonModel(t,e)},updateButtonModel:function(t,e){var n=this.buttonMeshes;if(n&&n[t]){var i;switch(e){case"down":i=this.data.buttonHighlightColor;break;case"touchstart":i=this.data.buttonTouchedColor;break;default:i=this.data.buttonColor}n[t].material.color.set(i)}}})},{"../core/component":130,"../utils/":204,"../utils/bind":198,"../utils/tracked-controls":213}],78:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/bind"),o=t("../utils/tracked-controls"),s=o.checkControllerPresentAndSetup,a=o.emitIfAxesChanged,l=o.onButtonEvent;e.exports.Component=i("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},orientationOffset:{type:"vec3"}},mapping:{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]},bindMethods:function(){this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=r(this.removeControllersUpdateListener,this),this.onAxisMoved=r(this.onAxisMoved,this)},init:function(){var t=this;this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){l(e.detail.id,"down",t)},this.onButtonUp=function(e){l(e.detail.id,"up",t)},this.onButtonTouchStart=function(e){l(e.detail.id,"touchstart",t)},this.onButtonTouchEnd=function(e){l(e.detail.id,"touchend",t)},this.controllerPresent=!1,this.lastControllerCheck=0,this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var t=this.data;s(this,"generic",{hand:t.hand?t.hand:void 0,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var t=this.el,e=this.data;this.el.components["tracked-controls"]?this.removeEventListeners():(t.setAttribute("tracked-controls",{hand:e.hand,idPrefix:"generic",orientationOffset:e.orientationOffset,iterateControllerProfiles:!0}),this.data.defaultModel&&this.initDefaultModel())},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id];e&&this.el.emit(e+"changed",t.detail.state)},onAxisMoved:function(t){a(this,this.mapping.axes,t)},initDefaultModel:function(){var t=this.modelEl=document.createElement("a-entity");t.setAttribute("geometry",{primitive:"sphere",radius:.03}),t.setAttribute("material",{color:this.data.color}),this.el.appendChild(t)}})},{"../core/component":130,"../utils/bind":198,"../utils/tracked-controls":213}],79:[function(t,e,n){var i=t("../core/geometry").geometries,r=t("../core/geometry").geometryNames,o=t("../core/component").registerComponent,s=t("../lib/three"),a=new s.Geometry;e.exports.Component=o("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:r,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(t){var e,n=this.data,i=this.el,r=this.system;this.geometry&&(r.unuseGeometry(t),this.geometry=null),this.geometry=r.getOrCreateGeometry(n),(e=i.getObject3D("mesh"))?e.geometry=this.geometry:((e=new s.Mesh).geometry=this.geometry,i.setObject3D("mesh",e))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=a,this.geometry=null},updateSchema:function(t){var e=this.oldData&&this.oldData.primitive,n=t.primitive,r=i[n]&&i[n].schema;if(!r)throw new Error("Unknown geometry schema `"+n+"`");e&&e===n||this.extendSchema(r)}})},{"../core/component":130,"../core/geometry":131,"../lib/three":178}],80:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../lib/three"),o=t("../utils/").debug("components:gltf-model:warn");e.exports.Component=i("gltf-model",{schema:{type:"model"},init:function(){var t=this.system.getDRACOLoader();this.model=null,this.loader=new r.GLTFLoader,t&&this.loader.setDRACOLoader(t)},update:function(){var t=this,e=this.el,n=this.data;n&&(this.remove(),this.loader.load(n,(function(n){t.model=n.scene||n.scenes[0],t.model.animations=n.animations,e.setObject3D("mesh",t.model),e.emit("model-loaded",{format:"gltf",model:t.model})}),void 0,(function(t){o(t&&t.message?t.message:"Failed to load glTF model"),e.emit("model-error",{format:"gltf",src:n})})))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../core/component":130,"../lib/three":178,"../utils/":204}],81:[function(t,e,n){var i=t("../core/component").registerComponent,r={toonLeft:"https://cdn.aframe.io/controllers/hands/leftHand.glb",toonRight:"https://cdn.aframe.io/controllers/hands/rightHand.glb",lowPolyLeft:"https://cdn.aframe.io/controllers/hands/leftHandLow.glb",lowPolyRight:"https://cdn.aframe.io/controllers/hands/rightHandLow.glb",highPolyLeft:"https://cdn.aframe.io/controllers/hands/leftHandHigh.glb",highPolyRight:"https://cdn.aframe.io/controllers/hands/rightHandHigh.glb"},o={};function s(t,e){var n;if(t)return"grip"===(n=o[t])?n+(e?"close":"open"):"point"===n?n+(e?"up":"down"):"pointing"===n||"pistol"===n?n+(e?"start":"end"):void 0}o.Fist="grip",o["Thumb Up"]="pistol",o.Point="pointing",e.exports.Component=i("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},init:function(){var t=this,e=this.el;this.gesture="Open",this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){t.handleButton("grip","down")},this.onGripUp=function(){t.handleButton("grip","up")},this.onTrackpadDown=function(){t.handleButton("trackpad","down")},this.onTrackpadUp=function(){t.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){t.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){t.handleButton("trackpad","touchend")},this.onTriggerDown=function(){t.handleButton("trigger","down")},this.onTriggerUp=function(){t.handleButton("trigger","up")},this.onTriggerTouchStart=function(){t.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){t.handleButton("trigger","touchend")},this.onGripTouchStart=function(){t.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){t.handleButton("grip","touchend")},this.onThumbstickDown=function(){t.handleButton("thumbstick","down")},this.onThumbstickUp=function(){t.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){t.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){t.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){t.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){t.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){t.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){t.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),e.addEventListener("controllerconnected",this.onControllerConnected),e.addEventListener("controllerdisconnected",this.onControllerDisconnected),e.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(t,e){var n=this.el.getObject3D("mesh");n&&n.mixer&&n.mixer.update(e/1e3)},onControllerConnected:function(){this.el.object3D.visible=!0},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var t=this.el;t.addEventListener("gripdown",this.onGripDown),t.addEventListener("gripup",this.onGripUp),t.addEventListener("trackpaddown",this.onTrackpadDown),t.addEventListener("trackpadup",this.onTrackpadUp),t.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),t.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),t.addEventListener("triggerdown",this.onTriggerDown),t.addEventListener("triggerup",this.onTriggerUp),t.addEventListener("triggertouchstart",this.onTriggerTouchStart),t.addEventListener("triggertouchend",this.onTriggerTouchEnd),t.addEventListener("griptouchstart",this.onGripTouchStart),t.addEventListener("griptouchend",this.onGripTouchEnd),t.addEventListener("thumbstickdown",this.onThumbstickDown),t.addEventListener("thumbstickup",this.onThumbstickUp),t.addEventListener("abuttontouchstart",this.onAorXTouchStart),t.addEventListener("abuttontouchend",this.onAorXTouchEnd),t.addEventListener("bbuttontouchstart",this.onBorYTouchStart),t.addEventListener("bbuttontouchend",this.onBorYTouchEnd),t.addEventListener("xbuttontouchstart",this.onAorXTouchStart),t.addEventListener("xbuttontouchend",this.onAorXTouchEnd),t.addEventListener("ybuttontouchstart",this.onBorYTouchStart),t.addEventListener("ybuttontouchend",this.onBorYTouchEnd),t.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),t.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var t=this.el;t.removeEventListener("gripdown",this.onGripDown),t.removeEventListener("gripup",this.onGripUp),t.removeEventListener("trackpaddown",this.onTrackpadDown),t.removeEventListener("trackpadup",this.onTrackpadUp),t.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),t.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),t.removeEventListener("triggerdown",this.onTriggerDown),t.removeEventListener("triggerup",this.onTriggerUp),t.removeEventListener("triggertouchstart",this.onTriggerTouchStart),t.removeEventListener("triggertouchend",this.onTriggerTouchEnd),t.removeEventListener("griptouchstart",this.onGripTouchStart),t.removeEventListener("griptouchend",this.onGripTouchEnd),t.removeEventListener("thumbstickdown",this.onThumbstickDown),t.removeEventListener("thumbstickup",this.onThumbstickUp),t.removeEventListener("abuttontouchstart",this.onAorXTouchStart),t.removeEventListener("abuttontouchend",this.onAorXTouchEnd),t.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),t.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),t.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),t.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),t.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),t.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),t.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),t.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(t){var e,n=this.el,i=this.data.hand,o=this.data.color,s=this;if(e={hand:i,model:!1},i!==t){var a=r[this.data.handModelStyle+i.charAt(0).toUpperCase()+i.slice(1)];this.loader.load(a,(function(t){var r=t.scene.children[0],a="left"===i?Math.PI/2:-Math.PI/2;r.mixer=new THREE.AnimationMixer(r),s.clips=t.animations,n.setObject3D("mesh",r),r.children[1].material.color=new THREE.Color(o),r.position.set(0,0,0),r.rotation.set(0,0,a),n.setAttribute("magicleap-controls",e),n.setAttribute("vive-controls",e),n.setAttribute("oculus-touch-controls",e),n.setAttribute("windows-motion-controls",e)}))}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(t,e){var n,i="down"===e,r="touchstart"===e;if(0===e.indexOf("touch")){if(r===this.touchedButtons[t])return;this.touchedButtons[t]=r}else{if(i===this.pressedButtons[t])return;this.pressedButtons[t]=i}n=this.gesture,this.gesture=this.determineGesture(),this.gesture!==n&&(this.animateGesture(this.gesture,n),this.emitGestureEvents(this.gesture,n))},determineGesture:function(){var t,e,n,i=this.pressedButtons.grip,r=this.pressedButtons.surface||this.touchedButtons.surface,o=this.pressedButtons.trackpad||this.touchedButtons.trackpad,s=this.pressedButtons.trigger||this.touchedButtons.trigger,a=this.touchedButtons.AorX||this.touchedButtons.BorY;return(n=(e=this.el.components["tracked-controls"])&&e.controller)&&(n.id&&0===n.id.indexOf("OpenVR ")||n.profiles&&n.profiles[0]&&"htc-vive-controller-mv"===n.profiles[0])?i||s?t="Fist":o&&(t="Point"):i?t=r||a||o?s?"Fist":"Point":s?"Thumb Up":"Point + Thumb":s&&(t="Hold"),t},getClip:function(t){var e,n;for(n=0;n<this.clips.length;n++)if((e=this.clips[n]).name===t)return e},animateGesture:function(t,e){t?this.playAnimation(t||"Open",e,!1):this.playAnimation(e,e,!0)},emitGestureEvents:function(t,e){var n,i=this.el;e!==t&&((n=s(e,!1))&&i.emit(n),(n=s(t,!0))&&i.emit(n))},playAnimation:function(t,e,n){var i,r,o,s=this.el.getObject3D("mesh");if(s){if(s.mixer.stopAllAction(),i=this.getClip(t),(o=s.mixer.clipAction(i)).clampWhenFinished=!0,o.loop=THREE.LoopRepeat,o.repetitions=0,o.timeScale=n?-1:1,o.time=n?i.duration:0,o.weight=1,!e||t===e)return s.mixer.stopAllAction(),void o.play();i=this.getClip(e),(r=s.mixer.clipAction(i)).weight=.15,r.play(),o.play(),r.crossFadeTo(o,.15,!0)}}})},{"../core/component":130}],82:[function(t,e,n){var i,r=t("../core/component").registerComponent,o=t("../utils/bind"),s=t("../utils/tracked-controls").checkControllerPresentAndSetup,a={left:"b_l_",right:"b_r_"},l=["wrist","thumb1","thumb2","thumb3","thumb_null",null,"index1","index2","index3","index_null",null,"middle1","middle2","middle3","middle_null",null,"ring1","ring2","ring3","ring_null","pinky0","pinky1","pinky2","pinky3","pinky_null"];e.exports.Component=r("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"}},bindMethods:function(){this.onControllersUpdate=o(this.onControllersUpdate,this),this.checkIfControllerPresent=o(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=o(this.removeControllersUpdateListener,this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var t=0;t<this.jointEls.length;++t)this.jointEls[t].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var t=0;t<this.jointEls.length;++t)this.jointEls[t].object3D.visible=!1},init:function(){var t=this.el.sceneEl,e=t.getAttribute("webxr").optionalFeatures;e.push("hand-tracking"),t.setAttribute("webxr",{optionalFeatures:e}),this.onModelLoaded=this.onModelLoaded.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new THREE.Vector3},this.indexTipPosition=new THREE.Vector3,this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace)},updateReferenceSpace:function(){var t=this,e=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,e){var n=t.el.sceneEl.systems.webxr.sessionReferenceSpaceType;e.requestReferenceSpace(n).then((function(e){t.referenceSpace=e.getOffsetReferenceSpace(new XRRigidTransform({x:0,y:1.5,z:0}))})).catch((function(e){throw t.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(n,"tracked-controls-webxr uses reference space "+n),e}))}},checkIfControllerPresent:function(){var t=this.data;s(this,"",{hand:t.hand?t.hand:void 0,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var t=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,e=this.el.sceneEl.frame;t&&e&&this.el.components["tracked-controls-webxr"]&&t.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),e.getJointPose&&this.updateHandModel(),this.detectGesture())},updateHandModel:function(){"dots"===this.data.modelStyle&&this.updateHandDotsModel(),"mesh"===this.data.modelStyle&&this.updateHandMeshModel()},updateHandMeshModel:function(){var t=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,e=this.referenceSpace;if(t&&this.mesh&&e){this.mesh.visible=!1;for(var n=0;n<t.hand.length;n++){var i,r,o;t.hand[n]&&(r=this.el.sceneEl.frame.getJointPose(t.hand[n],e),null!=l[n]&&null!=(i=this.getBone(a[this.data.hand]+l[n]))&&r&&(o=r.transform,this.mesh.visible=!0,i.position.copy(o.position).multiplyScalar(100),i.quaternion.set(o.orientation.x,o.orientation.y,o.orientation.z,o.orientation.w)))}}},getBone:function(t){for(var e=this.bones,n=0;n<e.length;n++)if(e[n].name===t)return e[n];return null},updateHandDotsModel:function(){for(var t=this.el.sceneEl.frame,e=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,n=this.el.components["tracked-controls-webxr"].system.referenceSpace,i=0;i<this.jointEls.length;++i){var r=this.jointEls[i];if(r.object3D.visible=!!e.hand[i],e.hand[i]){var o=r.object3D,s=t.getJointPose(e.hand[i],n);if(r.object3D.visible=!!s,!s)continue;o.matrix.elements=s.transform.matrix,o.matrix.decompose(o.position,o.rotation,o.scale),r.setAttribute("scale",{x:s.radius,y:s.radius,z:s.radius})}}},detectGesture:function(){this.detectPinch()},detectPinch:(i=new THREE.Vector3,function(){var t=this.el.sceneEl.frame,e=this.indexTipPosition,n=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,r=this.referenceSpace||this.el.components["tracked-controls-webxr"].system.referenceSpace;if(n.hand[XRHand.INDEX_PHALANX_TIP]&&n.hand[XRHand.THUMB_PHALANX_TIP]){var o=t.getJointPose(n.hand[XRHand.INDEX_PHALANX_TIP],r),s=t.getJointPose(n.hand[XRHand.THUMB_PHALANX_TIP],r);if(o&&s){i.copy(s.transform.position),e.copy(o.transform.position);var a=e.distanceTo(i);a<.015&&!1===this.isPinched&&(this.isPinched=!0,this.pinchEventDetail.position.copy(e).lerp(i,.5),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchstarted",this.pinchEventDetail)),a>.03&&!0===this.isPinched&&(this.isPinched=!1,this.pinchEventDetail.position.copy(e).lerp(i,.5),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchended",this.pinchEventDetail)),this.isPinched&&(this.pinchEventDetail.position.copy(e).lerp(i,.5),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchmoved",this.pinchEventDetail)),e.y+=1.5}}}),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){this.el.setAttribute("tracked-controls",{hand:this.data.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var t;this.checkIfControllerPresent(),t=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,this.el.getObject3D("mesh")&&(t&&t.hand&&t.hand[0]||this.el.removeObject3D("mesh"))},initDefaultModel:function(){"dots"===this.data.modelStyle&&this.initDotsModel(),"mesh"===this.data.modelStyle&&this.initMeshHandModel()},initDotsModel:function(){if(0===this.jointEls.length)for(var t=0;t<25;++t){var e=this.jointEl=document.createElement("a-entity");e.setAttribute("geometry",{primitive:"sphere",radius:1}),e.setAttribute("material",{color:this.data.modelColor}),e.object3D.visible=!1,this.el.appendChild(e),this.jointEls.push(e)}},initMeshHandModel:function(){this.el.setAttribute("gltf-model","left"===this.data.hand?"https://cdn.aframe.io/controllers/oculus-hands/unity/left.glb":"https://cdn.aframe.io/controllers/oculus-hands/unity/right.glb")},onModelLoaded:function(){var t=this.mesh=this.el.getObject3D("mesh").children[0],e=this.skinnedMesh=t.children[24];this.skinnedMesh&&(this.bones=e.skeleton.bones,this.el.removeObject3D("mesh"),t.position.set(0,1.5,0),t.rotation.set(0,0,0),e.frustumCulled=!1,e.material=new THREE.MeshStandardMaterial({skinning:!0,color:this.data.modelColor}),this.el.setObject3D("mesh",t))}})},{"../core/component":130,"../utils/bind":198,"../utils/tracked-controls":213}],83:[function(t,e,n){t("./animation"),t("./camera"),t("./cursor"),t("./daydream-controls"),t("./gearvr-controls"),t("./geometry"),t("./generic-tracked-controller-controls"),t("./gltf-model"),t("./hand-tracking-controls"),t("./hand-controls"),t("./layer"),t("./laser-controls"),t("./light"),t("./line"),t("./link"),t("./look-controls"),t("./magicleap-controls"),t("./material"),t("./obj-model"),t("./oculus-go-controls"),t("./oculus-touch-controls"),t("./position"),t("./raycaster"),t("./rotation"),t("./scale"),t("./shadow"),t("./sound"),t("./text"),t("./tracked-controls"),t("./tracked-controls-webvr"),t("./tracked-controls-webxr"),t("./visible"),t("./valve-index-controls"),t("./vive-controls"),t("./vive-focus-controls"),t("./wasd-controls"),t("./windows-motion-controls"),t("./scene/background"),t("./scene/debug"),t("./scene/device-orientation-permission-ui"),t("./scene/embedded"),t("./scene/inspector"),t("./scene/fog"),t("./scene/keyboard-shortcuts"),t("./scene/pool"),t("./scene/screenshot"),t("./scene/stats"),t("./scene/vr-mode-ui")},{"./animation":73,"./camera":74,"./cursor":75,"./daydream-controls":76,"./gearvr-controls":77,"./generic-tracked-controller-controls":78,"./geometry":79,"./gltf-model":80,"./hand-controls":81,"./hand-tracking-controls":82,"./laser-controls":84,"./layer":85,"./light":86,"./line":87,"./link":88,"./look-controls":89,"./magicleap-controls":90,"./material":91,"./obj-model":92,"./oculus-go-controls":93,"./oculus-touch-controls":94,"./position":95,"./raycaster":96,"./rotation":97,"./scale":98,"./scene/background":99,"./scene/debug":100,"./scene/device-orientation-permission-ui":101,"./scene/embedded":102,"./scene/fog":103,"./scene/inspector":104,"./scene/keyboard-shortcuts":105,"./scene/pool":106,"./scene/screenshot":107,"./scene/stats":108,"./scene/vr-mode-ui":109,"./shadow":110,"./sound":111,"./text":112,"./tracked-controls":115,"./tracked-controls-webvr":113,"./tracked-controls-webxr":114,"./valve-index-controls":116,"./visible":117,"./vive-controls":118,"./vive-focus-controls":119,"./wasd-controls":120,"./windows-motion-controls":121}],84:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/");i("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var t=this.config,e=this.data,n=this.el,i=this,o={hand:e.hand,model:e.model};function s(e){var o=t[e.detail.name];if(o){var s=r.extend({showLine:!0},o.raycaster||{});e.detail.rayOrigin&&(s.origin=e.detail.rayOrigin.origin,s.direction=e.detail.rayOrigin.direction,s.showLine=!0),e.detail.rayOrigin||!i.modelReady?n.setAttribute("raycaster",s):n.setAttribute("raycaster","showLine",!0),n.setAttribute("cursor",r.extend({fuse:!1},o.cursor))}}n.setAttribute("daydream-controls",o),n.setAttribute("gearvr-controls",o),n.setAttribute("magicleap-controls",o),n.setAttribute("oculus-go-controls",o),n.setAttribute("oculus-touch-controls",o),n.setAttribute("valve-index-controls",o),n.setAttribute("vive-controls",o),n.setAttribute("vive-focus-controls",o),n.setAttribute("windows-motion-controls",o),n.setAttribute("generic-tracked-controller-controls",o),n.addEventListener("controllerconnected",s),n.addEventListener("controllerdisconnected",(function(){n.setAttribute("raycaster","showLine",!1)})),n.addEventListener("controllermodelready",(function(t){s(t),i.modelReady=!0}))},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"gearvr-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:.001,z:0}}},"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}})},{"../core/component":130,"../utils/":204}],85:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/").debug("components:layer:warn");e.exports.Component=i("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var t=this.el.sceneEl.renderer.getContext();this.quaternion=new THREE.Quaternion,this.position=new THREE.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=t.createFramebuffer();var e=this.el.sceneEl.getAttribute("webxr").requiredFeatures;e.push("layers"),this.el.sceneEl.getAttribute("webxr","requiredFeatures",e),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(t){this.data.src!==t.src&&this.updateSrc()},updateSrc:function(){var t=this.data.type;this.texture=void 0,"quad"!==t?"monocubemap"!==t&&"stereocubemap"!==t||this.loadCubeMapImages():this.loadQuadImage()},loadCubeMapImages:function(){var t,e=this.data.type,n=this.xrGLFactory,i=this.el.sceneEl.frame,r=this.data.src;this.visibilityChanged=!1,this.layer&&(this.pendingCubeMapUpdate=!r.complete,this.loadingScreen=!this.loadingScreen,"monocubemap"===e?(t=n.getSubImage(this.layer,i),this.loadCubeMapImage(t.colorTexture,r,0)):(t=n.getSubImage(this.layer,i,"left"),this.loadCubeMapImage(t.colorTexture,r,0),t=n.getSubImage(this.layer,i,"right"),this.loadCubeMapImage(t.colorTexture,r,6)))},loadQuadImage:function(){var t=this.data.src,e=this;this.el.sceneEl.systems.material.loadTexture(t,{src:t},(function(n){e.el.sceneEl.renderer.initTexture(n),e.texture=n,"VIDEO"===t.tagName&&setTimeout((function(){e.textureIsVideo=!0}),1e3),e.layer&&(e.layer.height=e.data.height/2||e.texture.image.height/1e3,e.layer.width=e.data.width/2||e.texture.image.width/1e3,e.needsRedraw=!0),e.updateQuadPanel()}))},preGenerateCubeMapTextures:function(t,e){"monocubemap"===this.data.type?this.generateCubeMapTextures(t,0,e):(this.generateCubeMapTextures(t,0,e),this.generateCubeMapTextures(t,6,e))},generateCubeMapTextures:function(t,e,n){for(var i,r=this.data,o=this.cubeFaceSize,s=Math.min(t.width,t.height),a=[],l=0;l<6;l++){var c=document.createElement("CANVAS");c.width=c.height=o;var u=c.getContext("2d");r.rotateCubemap&&(2!==l&&3!==l||(u.save(),u.translate(o,o),u.rotate(Math.PI))),u.drawImage(t,(l+e)*s,0,s,s,0,0,o,o),u.restore(),n&&n(),a.push(c)}return r.rotateCubemap&&(i=a[0],a[0]=a[1],a[1]=i,i=a[4],a[4]=a[5],a[5]=i),n&&n(),a},loadCubeMapImage:function(t,e,n){var i,r=this.el.sceneEl.renderer.getContext();r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.bindTexture(r.TEXTURE_CUBE_MAP,t),i=!e.complete||this.loadingScreen?this.loadingScreenImages:this.generateCubeMapTextures(e,n);var o=0;i.forEach((function(t,e){r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,r.RGBA,r.UNSIGNED_BYTE,t),o=r.getError()})),0!==o&&console.log("renderingError, WebGL Error Code: "+o),r.bindTexture(r.TEXTURE_CUBE_MAP,null)},tick:function(){this.el.sceneEl.xrSession&&(!this.layer&&this.el.sceneEl.is("vr-mode")&&this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),(this.needsRedraw||this.layer.needsRedraw||this.textureIsVideo)&&("quad"===this.data.type&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var t=this,e=this.data.type;this.el.sceneEl.xrSession.onvisibilitychange=function(e){t.visibilityChanged="hidden"!==e.session.visibilityState},"quad"!==e?"monocubemap"!==e&&"stereocubemap"!==e||this.initCubeMapLayer():this.initQuadLayer()},initQuadLayer:function(){var t=this.el.sceneEl,e=t.renderer.getContext(),n=this.xrGLFactory=new XRWebGLBinding(t.xrSession,e);this.texture&&(this.layer=n.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),t.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var t=this.data.src,e=this.el.sceneEl,n=e.renderer.getContext(),i=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),r=this.cubeFaceSize=Math.min(i,Math.min(t.width,t.height)),o=this.xrGLFactory=new XRWebGLBinding(e.xrSession,n);this.layer=o.createCubeLayer({space:this.referenceSpace,viewPixelWidth:r,viewPixelHeight:r,layout:"monocubemap"===this.data.type?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),e.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var t=this.cubeFaceSize,e=this.loadingScreenImages=[],n=0;n<6;n++){var i=document.createElement("CANVAS");i.width=i.height=t;var r=i.getContext("2d");i.width=i.height=t,r.fillStyle="black",r.fillRect(0,0,t,t),2!==n&&3!==n&&(r.translate(t,0),r.scale(-1,1),r.fillStyle="white",r.font="30px Arial",r.fillText("Loading",t/2,t/2)),e.push(i)}},destroyLayer:function(){this.layer&&(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(t){this.layerEnabled=t,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var t=this.quadPanelEl;this.quadPanelEl||(t=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(t)),t.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),t.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var t=this.el.sceneEl,e=this.el.sceneEl.renderer.getContext(),n=this.xrGLFactory.getSubImage(this.layer,t.frame),i=t.renderer.properties.get(this.texture).__webglTexture,r=e.getParameter(e.FRAMEBUFFER_BINDING);e.viewport(n.viewport.x,n.viewport.y,n.viewport.width,n.viewport.height),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n.colorTexture,0),function(t,e,n,i){var r=t.createFramebuffer();let o=n.viewport.x,s=n.viewport.y,a=n.viewport.x+n.viewport.width,l=n.viewport.y+n.viewport.height;"VIDEO"===i.tagName&&(t.bindTexture(t.TEXTURE_2D,e),t.texSubImage2D(t.TEXTURE_2D,0,0,0,i.width,i.height,t.RGB,t.UNSIGNED_BYTE,i)),t.bindFramebuffer(t.READ_FRAMEBUFFER,r),t.framebufferTexture2D(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.readBuffer(t.COLOR_ATTACHMENT0),t.blitFramebuffer(0,0,i.width,i.height,o,s,a,l,t.COLOR_BUFFER_BIT,t.NEAREST),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.deleteFramebuffer(r)}(e,i,n,this.data.src),e.bindFramebuffer(e.FRAMEBUFFER,r)},updateTransform:function(){var t=this.el,e=this.position,n=this.quaternion;t.object3D.updateMatrixWorld(),e.setFromMatrixPosition(t.object3D.matrixWorld),n.setFromRotationMatrix(t.object3D.matrixWorld),this.layerEnabled||e.set(0,0,1e8),this.layer.transform=new XRRigidTransform(e,n)},onEnterVR:function(){var t=this.el.sceneEl,e=t.xrSession;t.hasWebXR&&XRWebGLBinding&&e?(e.requestReferenceSpace("local").then(this.onRequestedReferenceSpace),this.needsRedraw=!0,this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()):r("The layer component requires WebXR and the layers API enabled")},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(t){this.referenceSpace=t}})},{"../core/component":130,"../utils/":204}],86:[function(t,e,n){var i=t("../utils/bind"),r=t("../utils").diff,o=t("../utils/debug"),s=t("../core/component").registerComponent,a=t("../lib/three"),l=a.Math.degToRad,c=o("components:light:warn");e.exports.Component=s("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color"},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var t=this.el;this.light=null,this.defaultTarget=null,this.rendererSystem=this.el.sceneEl.systems.renderer,this.system.registerLight(t)},update:function(t){var e=this.data,n=r(e,t),o=this.light,s=this.rendererSystem,a=this;if(!o||"type"in n)this.setLight(this.data),this.updateShadow();else{var c=!1;Object.keys(n).forEach((function(t){var n=e[t];switch(t){case"color":o.color.set(n),s.applyColorCorrection(o.color);break;case"groundColor":o.groundColor.set(n),s.applyColorCorrection(o.groundColor);break;case"angle":o.angle=l(n);break;case"target":null===n?"spot"!==e.type&&"directional"!==e.type||(o.target=a.defaultTarget):n.hasLoaded?a.onSetTarget(n,o):n.addEventListener("loaded",i(a.onSetTarget,a,n,o));break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":c||(a.updateShadow(),c=!0);break;default:o[t]=n}}))}},setLight:function(t){var e=this.el,n=this.getLight(t);n&&(this.light&&e.removeObject3D("light"),this.light=n,this.light.el=e,e.setObject3D("light",this.light),"spot"!==t.type&&"directional"!==t.type&&"hemisphere"!==t.type||e.getObject3D("light").translateY(-1),"spot"===t.type&&(e.setObject3D("light-target",this.defaultTarget),e.getObject3D("light-target").position.set(0,0,-1)))},updateShadow:function(){var t=this.el,e=this.data,n=this.light;n.castShadow=e.castShadow;var i=t.getObject3D("cameraHelper");if(e.shadowCameraVisible&&!i?t.setObject3D("cameraHelper",new a.CameraHelper(n.shadow.camera)):!e.shadowCameraVisible&&i&&t.removeObject3D("cameraHelper"),!e.castShadow)return n;n.shadow.bias=e.shadowBias,n.shadow.radius=e.shadowRadius,n.shadow.mapSize.height=e.shadowMapHeight,n.shadow.mapSize.width=e.shadowMapWidth,n.shadow.camera.near=e.shadowCameraNear,n.shadow.camera.far=e.shadowCameraFar,n.shadow.camera instanceof a.OrthographicCamera?(n.shadow.camera.top=e.shadowCameraTop,n.shadow.camera.right=e.shadowCameraRight,n.shadow.camera.bottom=e.shadowCameraBottom,n.shadow.camera.left=e.shadowCameraLeft):n.shadow.camera.fov=e.shadowCameraFov,n.shadow.camera.updateProjectionMatrix(),i&&i.update()},getLight:function(t){var e=t.angle,n=new a.Color(t.color);this.rendererSystem.applyColorCorrection(n),n=n.getHex();var r=t.decay,o=t.distance,s=new a.Color(t.groundColor);this.rendererSystem.applyColorCorrection(s),s=s.getHex();var u=t.intensity,h=t.type,d=t.target,p=null;switch(h.toLowerCase()){case"ambient":return new a.AmbientLight(n,u);case"directional":return p=new a.DirectionalLight(n,u),this.defaultTarget=p.target,d&&(d.hasLoaded?this.onSetTarget(d,p):d.addEventListener("loaded",i(this.onSetTarget,this,d,p))),p;case"hemisphere":return new a.HemisphereLight(n,s,u);case"point":return new a.PointLight(n,u,o,r);case"spot":return p=new a.SpotLight(n,u,o,l(e),t.penumbra,r),this.defaultTarget=p.target,d&&(d.hasLoaded?this.onSetTarget(d,p):d.addEventListener("loaded",i(this.onSetTarget,this,d,p))),p;default:c("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",h)}},onSetTarget:function(t,e){e.target=t.object3D},remove:function(){var t=this.el;t.removeObject3D("light"),t.getObject3D("cameraHelper")&&t.removeObject3D("cameraHelper")}})},{"../core/component":130,"../lib/three":178,"../utils":204,"../utils/bind":198,"../utils/debug":200}],87:[function(t,e,n){var i=t("../core/component").registerComponent;function r(t,e){return!(!t||!e)&&t.x===e.x&&t.y===e.y&&t.z===e.z}e.exports.Component=i("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var t,e,n=this.data;this.rendererSystem=this.el.sceneEl.systems.renderer,e=this.material=new THREE.LineBasicMaterial({color:n.color,opacity:n.opacity,transparent:n.opacity<1,visible:n.visible}),(t=this.geometry=new THREE.BufferGeometry).setAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.rendererSystem.applyColorCorrection(e.color),this.line=new THREE.Line(t,e),this.el.setObject3D(this.attrName,this.line)},update:function(t){var e=this.data,n=this.geometry,i=!1,o=this.material,s=n.attributes.position.array;r(e.start,t.start)||(s[0]=e.start.x,s[1]=e.start.y,s[2]=e.start.z,i=!0),r(e.end,t.end)||(s[3]=e.end.x,s[4]=e.end.y,s[5]=e.end.z,i=!0),i&&(n.attributes.position.needsUpdate=!0,n.computeBoundingSphere()),o.color.setStyle(e.color),this.rendererSystem.applyColorCorrection(o.color),o.opacity=e.opacity,o.transparent=e.opacity<1,o.visible=e.visible},remove:function(){this.el.removeObject3D("line",this.line)}})},{"../core/component":130}],88:[function(t,e,n){var i,r,o,s,a,l,c,u,h=t("../core/component").registerComponent,d=t("../core/shader").registerShader,p=t("../lib/three");e.exports.Component=h("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new p.Quaternion,this.hiddenEls=[]},update:function(t){var e,n=this.data,i=this.el;n.visualAspectEnabled&&(this.initVisualAspect(),e=n.highlighted?n.highlightedColor:n.borderColor,i.setAttribute("material","backgroundColor",n.highlighted?n.highlightedColor:n.backgroundColor),i.setAttribute("material","strokeColor",e),n.on!==t.on&&this.updateEventListener(),void 0!==t.peekMode&&n.peekMode!==t.peekMode&&this.updatePeekMode(),n.image&&t.image!==n.image&&i.setAttribute("material","pano","string"==typeof n.image?n.image:n.image.src))},updatePeekMode:function(){var t=this.el,e=this.sphereEl;this.data.peekMode?(this.hideAll(),t.getObject3D("mesh").visible=!1,e.setAttribute("visible",!0)):(this.showAll(),t.getObject3D("mesh").visible=!0,e.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var t=this.el;t.isPlaying&&(this.removeEventListener(),t.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var t=this.data.on;t&&this.el.removeEventListener(t,this.navigate)},initVisualAspect:function(){var t,e,n,i=this.el;this.data.visualAspectEnabled&&!this.visualAspectInitialized&&(n=this.textEl=this.textEl||document.createElement("a-entity"),e=this.sphereEl=this.sphereEl||document.createElement("a-entity"),t=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),i.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),i.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),n.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),n.setAttribute("position","0 1.5 0"),i.appendChild(n),t.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),t.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),t.setAttribute("rotation","0 180 0"),t.setAttribute("position","0 0 0"),t.setAttribute("visible",!1),i.appendChild(t),e.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),e.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),e.setAttribute("visible",!1),i.appendChild(e),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:(a=new p.Vector3,l=new p.Vector3,c=new p.Quaternion,u=new p.Vector3,function(){var t,e,n=this.el,i=n.object3D,r=n.sceneEl.camera,o=this.textEl;if(this.data.visualAspectEnabled)if(i.updateMatrixWorld(),r.parent.updateMatrixWorld(),r.updateMatrixWorld(),i.matrix.decompose(l,c,u),l.setFromMatrixPosition(i.matrixWorld),a.setFromMatrixPosition(r.matrixWorld),(e=l.distanceTo(a))>20)this.previousQuaternion||(this.quaternionClone.copy(c),this.previousQuaternion=this.quaternionClone),i.lookAt(a);else{if(t=this.calculateCameraPortalOrientation(),e<.5){if(!0===this.semiSphereEl.getAttribute("visible"))return;o.setAttribute("text","width",1.5),t<=0?(o.setAttribute("position","0 0 0.75"),o.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(o.setAttribute("position","0 0 -0.75"),o.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),n.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=t}else o.setAttribute("rotation",t<=0?"0 180 0":"0 0 0"),o.setAttribute("text","width",5),o.setAttribute("position","0 1.5 0"),n.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(i.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}),hideAll:function(){var t=this.el,e=this.hiddenEls,n=this;e.length>0||t.sceneEl.object3D.traverse((function(i){i&&i.el&&i.el.hasAttribute("link-controls")||i.el&&i!==t.sceneEl.object3D&&i.el!==t&&i.el!==n.sphereEl&&i.el!==t.sceneEl.cameraEl&&!1!==i.el.getAttribute("visible")&&i.el!==n.textEl&&i.el!==n.semiSphereEl&&(i.el.setAttribute("visible",!1),e.push(i.el))}))},showAll:function(){this.hiddenEls.forEach((function(t){t.setAttribute("visible",!0)})),this.hiddenEls=[]},calculateCameraPortalOrientation:(i=new p.Matrix4,r=new p.Vector3,o=new p.Vector3(0,0,1),s=new p.Vector3(0,0,0),function(){var t=this.el,e=t.sceneEl.camera;return r.set(0,0,0),o.set(0,0,1),s.set(0,0,0),t.object3D.matrixWorld.extractRotation(i),o.applyMatrix4(i),t.object3D.updateMatrixWorld(),t.object3D.localToWorld(s),e.parent.parent.updateMatrixWorld(),e.parent.updateMatrixWorld(),e.updateMatrixWorld(),e.localToWorld(r),r.sub(s).normalize(),o.normalize(),Math.sign(o.dot(r))}),remove:function(){this.removeEventListener()}}),d("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));","}","}"].join("\n")})},{"../core/component":130,"../core/shader":140,"../lib/three":178}],89:[function(t,e,n){var i,r=t("../core/component").registerComponent,o=t("../lib/three"),s=t("../utils/"),a=s.bind,l=Math.PI/2;e.exports.Component=r("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new o.Vector3,this.hmdQuaternion=new o.Quaternion,this.magicWindowAbsoluteEuler=new o.Euler,this.magicWindowDeltaEuler=new o.Euler,this.position=new o.Vector3,this.magicWindowObject=new o.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new o.Vector3,rotation:new o.Euler},this.el.sceneEl.is("vr-mode")&&this.onEnterVR()},setupMagicWindowControls:function(){var t,e=this.data;s.device.isMobile()&&(t=this.magicWindowControls=new o.DeviceOrientationControls(this.magicWindowObject),"undefined"!=typeof DeviceOrientationEvent&&DeviceOrientationEvent.requestPermission&&(t.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?t.enabled=e.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",(function(){t.enabled=e.magicWindowTrackingEnabled}))))},update:function(t){var e=this.data;e.enabled!==t.enabled&&this.updateGrabCursor(e.enabled),t&&!e.magicWindowTrackingEnabled&&t.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=e.magicWindowTrackingEnabled),t&&!e.pointerLockEnabled!==t.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(t){this.data.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=a(this.onMouseDown,this),this.onMouseMove=a(this.onMouseMove,this),this.onMouseUp=a(this.onMouseUp,this),this.onTouchStart=a(this.onTouchStart,this),this.onTouchMove=a(this.onTouchMove,this),this.onTouchEnd=a(this.onTouchEnd,this),this.onEnterVR=a(this.onEnterVR,this),this.onExitVR=a(this.onExitVR,this),this.onPointerLockChange=a(this.onPointerLockChange,this),this.onPointerLockError=a(this.onPointerLockError,this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new o.Object3D,this.yawObject=new o.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var t=this.el.sceneEl,e=t.canvas;e?(e.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),e.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),t.addEventListener("enter-vr",this.onEnterVR),t.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))):t.addEventListener("render-target-loaded",a(this.addEventListeners,this))},removeEventListeners:function(){var t=this.el.sceneEl,e=t&&t.canvas;e&&(e.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("enter-vr",this.onEnterVR),t.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:(i=new o.Matrix4,function(){var t,e=this.el.object3D,n=this.pitchObject,r=this.yawObject,o=this.el.sceneEl;o.is("vr-mode")&&o.checkHeadsetConnected()?o.hasWebXR&&(t=o.renderer.xr.getCameraPose())&&(i.elements=t.transform.matrix,i.decompose(e.position,e.rotation,e.scale)):(this.updateMagicWindowOrientation(),e.rotation.x=this.magicWindowDeltaEuler.x+n.rotation.x,e.rotation.y=this.magicWindowDeltaEuler.y+r.rotation.y,e.rotation.z=this.magicWindowDeltaEuler.z)}),updateMagicWindowOrientation:function(){var t=this.magicWindowAbsoluteEuler,e=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),t.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),this.previousMagicWindowYaw||0===t.y||(this.previousMagicWindowYaw=t.y),this.previousMagicWindowYaw&&(e.x=t.x,e.y+=t.y-this.previousMagicWindowYaw,e.z=t.z,this.previousMagicWindowYaw=t.y))},onMouseMove:function(t){var e,n,i,r=this.pitchObject,o=this.previousMouseEvent,s=this.yawObject;this.data.enabled&&(this.mouseDown||this.pointerLocked)&&(this.pointerLocked?(n=t.movementX||t.mozMovementX||0,i=t.movementY||t.mozMovementY||0):(n=t.screenX-o.screenX,i=t.screenY-o.screenY),this.previousMouseEvent.screenX=t.screenX,this.previousMouseEvent.screenY=t.screenY,s.rotation.y+=.002*n*(e=this.data.reverseMouseDrag?1:-1),r.rotation.x+=.002*i*e,r.rotation.x=Math.max(-l,Math.min(l,r.rotation.x)))},onMouseDown:function(t){var e=this.el.sceneEl;if(this.data.enabled&&this.data.mouseEnabled&&(!e.is("vr-mode")||!e.checkHeadsetConnected())&&0===t.button){var n=e&&e.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=t.screenX,this.previousMouseEvent.screenY=t.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(n.requestPointerLock?n.requestPointerLock():n.mozRequestPointerLock&&n.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(t){1===t.touches.length&&this.data.touchEnabled&&!this.el.sceneEl.is("vr-mode")&&(this.touchStart={x:t.touches[0].pageX,y:t.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(t){var e;this.touchStarted&&this.data.touchEnabled&&(e=2*Math.PI*(t.touches[0].pageX-this.touchStart.x)/this.el.sceneEl.canvas.clientWidth,this.yawObject.rotation.y-=.5*e*(this.data.reverseTouchDrag?1:-1),this.touchStart={x:t.touches[0].pageX,y:t.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var t=this.el.sceneEl;t.checkHeadsetConnected()&&(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),t.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!(!document.pointerLockElement&&!document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(t){var e=this.el.sceneEl;function n(){e.canvas.classList.add("a-grab-cursor")}function i(){e.canvas.classList.remove("a-grab-cursor")}e.canvas?t?n():i():e.addEventListener("render-target-loaded",t?n:i)},saveCameraPose:function(){var t=this.el;this.savedPose.position.copy(t.object3D.position),this.savedPose.rotation.copy(t.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var t=this.el,e=this.savedPose;this.hasSavedPose&&(t.object3D.position.copy(e.position),t.object3D.rotation.copy(e.rotation),this.hasSavedPose=!1)}})},{"../core/component":130,"../lib/three":178,"../utils/":204}],90:[function(t,e,n){var i=t("../utils/bind"),r=t("../core/component").registerComponent,o=t("../utils/tracked-controls"),s=o.checkControllerPresentAndSetup,a=o.emitIfAxesChanged,l=o.onButtonEvent;e.exports.Component=r("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]},init:function(){var t=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(e){l(e.detail.id,"down",t)},this.onButtonUp=function(e){l(e.detail.id,"up",t)},this.onButtonTouchEnd=function(e){l(e.detail.id,"touchend",t)},this.onButtonTouchStart=function(e){l(e.detail.id,"touchstart",t)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var t=this.data;this.controllerIndex="right"===t.hand?0:"left"===t.hand?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=i(this.removeControllersUpdateListener,this),this.onAxisMoved=i(this.onAxisMoved,this)},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("axismove",this.onAxisMoved),t.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("axismove",this.onAxisMoved),t.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){s(this,"magicleap-one",{index:this.controllerIndex,hand:this.data.hand})},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{idPrefix:"magicleap-one",hand:t.hand,controller:this.controllerIndex,orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model","https://cdn.aframe.io/controllers/magicleap/magicleap-one-controller.glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id];e&&("trigger"===e&&console.log("analog value of trigger press: "+t.detail.state.value),this.el.emit(e+"changed",t.detail.state))},onModelLoaded:function(t){t.detail.model.scale.set(.01,.01,.01)},onAxisMoved:function(t){a(this,this.mapping.axes,t)},updateModel:function(t,e){},setButtonColor:function(t,e){}})},{"../core/component":130,"../utils/bind":198,"../utils/tracked-controls":213}],91:[function(t,e,n){var i=t("../utils/"),r=t("../core/component"),o=t("../lib/three"),s=t("../core/shader"),a=i.debug("components:material:error"),l=s.shaders;function c(t,e){t.dispose(),e.unregisterMaterial(t)}e.exports.Component=(0,r.registerComponent)("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:s.shaderNames,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColors:{type:"string",default:"none",oneOf:["face","vertex"]},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0}},init:function(){this.material=null},update:function(t){var e=this.data;this.shader&&e.shader===t.shader||this.updateShader(e.shader),this.shader.update(this.data),this.updateMaterial(t)},updateSchema:function(t){var e,n,i,r;e=this.oldData&&this.oldData.shader,(i=l[r=(n=t&&t.shader)||e]&&l[r].schema)||a("Unknown shader schema "+r),e&&n===e||(this.extendSchema(i),this.updateBehavior())},updateBehavior:function(){var t,e,n=this.el.sceneEl,i=this.schema,r=this;function o(t,n){var i;for(i in e)e[i]=t;r.shader.update(e)}for(t in this.tick=void 0,e={},i)"time"===i[t].type&&(this.tick=o,e[t]=!0);n&&(this.tick?n.addBehavior(this):n.removeBehavior(this))},updateShader:function(t){var e,n=this.data,i=l[t]&&l[t].Shader;if(!i)throw new Error("Unknown shader "+t);(e=this.shader=new i).el=this.el,e.init(n),this.setMaterial(e.material),this.updateSchema(n)},updateMaterial:function(t){var e,n=this.data,i=this.material;for(e in i.alphaTest=n.alphaTest,i.depthTest=!1!==n.depthTest,i.depthWrite=!1!==n.depthWrite,i.opacity=n.opacity,i.flatShading=n.flatShading,i.side=function(t){switch(t){case"back":return o.BackSide;case"double":return o.DoubleSide;default:return o.FrontSide}}(n.side),i.transparent=!1!==n.transparent||n.opacity<1,i.vertexColors=function(t){switch(t){case"face":return o.FaceColors;case"vertex":return o.VertexColors;default:return o.NoColors}}(n.vertexColors),i.visible=n.visible,i.blending=function(t){switch(t){case"none":return o.NoBlending;case"additive":return o.AdditiveBlending;case"subtractive":return o.SubtractiveBlending;case"multiply":return o.MultiplyBlending;default:return o.NormalBlending}}(n.blending),i.dithering=n.dithering,t)break;!e||t.alphaTest===n.alphaTest&&t.side===n.side&&t.vertexColors===n.vertexColors||(i.needsUpdate=!0)},remove:function(){var t=new o.MeshBasicMaterial,e=this.material,n=this.el.getObject3D("mesh");n&&(n.material=t),c(e,this.system)},setMaterial:function(t){var e,n=this.el,i=this.system;this.material&&c(this.material,i),this.material=t,i.registerMaterial(t),(e=n.getObject3D("mesh"))?e.material=t:n.addEventListener("object3dset",(function e(i){"mesh"===i.detail.type&&i.target===n&&(n.getObject3D("mesh").material=t,n.removeEventListener("object3dset",e))}))}})},{"../core/component":130,"../core/shader":140,"../lib/three":178,"../utils/":204}],92:[function(t,e,n){var i=t("../utils/debug"),r=t("../core/component").registerComponent,o=t("../lib/three"),s=i("components:obj-model:warn");e.exports.Component=r("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var t=this;this.model=null,this.objLoader=new o.OBJLoader,this.mtlLoader=new o.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",(function(e){t.model&&"material"===e.detail.name&&t.applyMaterial()}))},update:function(){var t=this.data;t.obj&&(this.resetMesh(),this.loadObj(t.obj,t.mtl))},remove:function(){this.model&&this.resetMesh()},resetMesh:function(){this.el.removeObject3D("mesh")},loadObj:function(t,e){var n=this,i=this.el,r=this.mtlLoader,o=this.objLoader,a=this.el.sceneEl.systems.renderer,l=e.substr(0,e.lastIndexOf("/")+1);if(e)return i.hasAttribute("material")&&s("Material component properties are ignored when a .MTL is provided"),r.setResourcePath(l),void r.load(e,(function(e){e.preload(),o.setMaterials(e),o.load(t,(function(t){n.model=t,n.model.traverse((function(t){if(t.isMesh){var e=t.material;e.color&&a.applyColorCorrection(e.color),e.map&&a.applyColorCorrection(e.map),e.emissive&&a.applyColorCorrection(e.emissive),e.emissiveMap&&a.applyColorCorrection(e.emissiveMap)}})),i.setObject3D("mesh",t),i.emit("model-loaded",{format:"obj",model:t})}))}));o.load(t,(function(t){n.model=t,n.applyMaterial(),i.setObject3D("mesh",t),i.emit("model-loaded",{format:"obj",model:t})}))},applyMaterial:function(){var t=this.el.components.material;t&&this.model.traverse((function(e){e instanceof o.Mesh&&(e.material=t.material)}))}})},{"../core/component":130,"../lib/three":178,"../utils/debug":200}],93:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/bind"),o=t("../utils/tracked-controls"),s=o.checkControllerPresentAndSetup,a=o.emitIfAxesChanged,l=o.onButtonEvent,c=t("../utils/").device.isWebXRAvailable,u=c?"oculus-go":"Oculus Go";e.exports.Component=i("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:c?{axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]}:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=r(this.removeControllersUpdateListener,this),this.onAxisMoved=r(this.onAxisMoved,this)},init:function(){var t=this;this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){l(e.detail.id,"down",t)},this.onButtonUp=function(e){l(e.detail.id,"up",t)},this.onButtonTouchStart=function(e){l(e.detail.id,"touchstart",t)},this.onButtonTouchEnd=function(e){l(e.detail.id,"touchend",t)},this.controllerPresent=!1,this.lastControllerCheck=0,this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){s(this,u,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{armModel:t.armModel,hand:t.hand,idPrefix:u,orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model","https://cdn.aframe.io/controllers/oculus/go/oculus-go-controller.gltf")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(t){var e,n=t.detail.model;this.data.model&&((e=this.buttonMeshes={}).trigger=n.getObjectByName("oculus_go_button_trigger"),e.trackpad=n.getObjectByName("oculus_go_touchpad"),e.touchpad=n.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id];e&&this.el.emit(e+"changed",t.detail.state)},onAxisMoved:function(t){a(this,this.mapping.axes,t)},updateModel:function(t,e){this.data.model&&this.updateButtonModel(t,e)},updateButtonModel:function(t,e){var n=this.buttonMeshes;if(n&&n[t]){var i,r;switch(e){case"down":i=this.data.buttonHighlightColor;break;case"touchstart":i=this.data.buttonTouchedColor;break;default:i=this.data.buttonColor}(r=n[t]).material.color.set(i),this.rendererSystem.applyColorCorrection(r.material.color)}}})},{"../core/component":130,"../utils/":204,"../utils/bind":198,"../utils/tracked-controls":213}],94:[function(t,e,n){var i=t("../utils/bind"),r=t("../core/component").registerComponent,o=t("../lib/three"),s=t("../utils/tracked-controls"),a=s.checkControllerPresentAndSetup,l=s.emitIfAxesChanged,c=s.onButtonEvent,u=t("../utils/").device.isWebXRAvailable,h=u?"oculus-touch":"Oculus Touch",d="https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-",p={left:{modelUrl:d+"left.gltf",rayOrigin:{origin:{x:.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new o.Vector3(-.005,.003,-.055),modelPivotRotation:new o.Euler(0,0,0)},right:{modelUrl:d+"right.gltf",rayOrigin:{origin:{x:-.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new o.Vector3(.005,.003,-.055),modelPivotRotation:new o.Euler(0,0,0)}},f={left:{modelUrl:d+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new o.Vector3(-.005,.036,-.037),modelPivotRotation:new o.Euler(Math.PI/4.5,0,0)},right:{modelUrl:d+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new o.Vector3(.005,.036,-.037),modelPivotRotation:new o.Euler(Math.PI/4.5,0,0)}},m={"oculus-touch":u?f:p,"oculus-touch-v2":{left:{modelUrl:d+"gen2-left.gltf",rayOrigin:{origin:{x:-.01,y:0,z:-.02},direction:{x:0,y:-.5,z:-1}},modelPivotOffset:new o.Vector3(0,0,0),modelPivotRotation:new o.Euler(0,0,0)},right:{modelUrl:d+"gen2-right.gltf",rayOrigin:{origin:{x:.01,y:0,z:-.02},direction:{x:0,y:-.5,z:-1}},modelPivotOffset:new o.Vector3(0,0,0),modelPivotRotation:new o.Euler(0,0,0)}},"oculus-touch-v3":{left:{modelUrl:d+"v3-left.glb",rayOrigin:{origin:{x:.015,y:.005,z:0},direction:{x:0,y:0,z:-1}},modelPivotOffset:new o.Vector3(.01,-.01,.05),modelPivotRotation:new o.Euler(Math.PI/4,0,0)},right:{modelUrl:d+"v3-right.glb",rayOrigin:{origin:{x:-.015,y:.005,z:0},direction:{x:0,y:0,z:-1}},modelPivotOffset:new o.Vector3(-.01,-.01,.05),modelPivotRotation:new o.Euler(Math.PI/4,0,0)}}};e.exports.Component=r("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]},orientationOffset:{type:"vec3",default:{x:43,y:0,z:0}}},mapping:u?{left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}}:{left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},bindMethods:function(){this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.onAxisMoved=i(this.onAxisMoved,this)},init:function(){var t=this;this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(e){c(e.detail.id,"down",t,t.data.hand)},this.onButtonUp=function(e){c(e.detail.id,"up",t,t.data.hand)},this.onButtonTouchStart=function(e){c(e.detail.id,"touchstart",t,t.data.hand)},this.onButtonTouchEnd=function(e){c(e.detail.id,"touchend",t,t.data.hand)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("axismove",this.onAxisMoved),t.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("axismove",this.onAxisMoved),t.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){a(this,h,{hand:this.data.hand})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(t){var e,n=this.data;if(n.model){if(this.displayModel=m[n.controllerType]||m["oculus-touch"],"auto"===n.controllerType){var i=this.el.sceneEl.systems["tracked-controls-webvr"];i&&i.vrDisplay?/^Oculus Quest$/.test(i.vrDisplay.displayName)&&(this.displayModel=m["oculus-touch-v2"]):(e="oculus-touch",e=-1!==t.profiles.indexOf("oculus-touch-v2")?"oculus-touch-v2":e,e=-1!==t.profiles.indexOf("oculus-touch-v3")?"oculus-touch-v3":e,this.displayModel=m[e])}this.el.setAttribute("gltf-model",this.displayModel[n.hand].modelUrl)}},injectTrackedControls:function(t){var e=this.data;this.el.setAttribute("tracked-controls",{id:u?"oculus-touch":"right"===e.hand?"Oculus Touch (Right)":"Oculus Touch (Left)",hand:e.hand,orientationOffset:e.orientationOffset,handTrackingEnabled:!1}),this.loadModel(t)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(t){var e,n=this.mapping[this.data.hand].buttons[t.detail.id],i=this.buttonMeshes;n&&("trigger"!==n&&"grip"!==n||(e=t.detail.state.value),i&&("trigger"===n&&i.trigger&&(i.trigger.rotation.x=this.originalXRotationTrigger-e*(Math.PI/26)),"grip"===n&&i.grip&&(i.grip.position.x=this.originalXPositionGrip+("left"===this.data.hand?-1:1)*e*.004)),this.el.emit(n+"changed",t.detail.state))},onModelLoaded:function(t){var e,n=this.controllerObject3D=t.detail.model;this.data.model&&((e=this.buttonMeshes={}).grip=n.getObjectByName("buttonHand"),this.originalXPositionGrip=e.grip&&e.grip.position.x,e.thumbstick=n.getObjectByName("stick"),e.trigger=n.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=e.trigger&&e.trigger.rotation.x,e.xbutton=n.getObjectByName("buttonX"),e.abutton=n.getObjectByName("buttonA"),e.ybutton=n.getObjectByName("buttonY"),e.bbutton=n.getObjectByName("buttonB"),n.position.copy(this.displayModel[this.data.hand].modelPivotOffset),n.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation),this.el.emit("controllermodelready",{name:"oculus-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin}))},onAxisMoved:function(t){l(this,this.mapping[this.data.hand].axes,t)},updateModel:function(t,e){this.data.model&&this.updateButtonModel(t,e)},updateButtonModel:function(t,e){var n,i=this.buttonMeshes;this.data.model&&i&&i[t]&&((n=i[t]).material.color.set("up"===e||"touchend"===e?this.data.buttonColor:"touchstart"===e?this.data.buttonTouchColor:this.data.buttonHighlightColor),this.rendererSystem.applyColorCorrection(n.material.color))}})},{"../core/component":130,"../lib/three":178,"../utils/":204,"../utils/bind":198,"../utils/tracked-controls":213}],95:[function(t,e,n){var i=t("../core/component").registerComponent;e.exports.Component=i("position",{schema:{type:"vec3"},update:function(){var t=this.data;this.el.object3D.position.set(t.x,t.y,t.z)},remove:function(){this.el.object3D.position.set(0,0,0)}})},{"../core/component":130}],96:[function(t,e,n){var i,r,o=t("../core/component").registerComponent,s=t("../lib/three"),a=t("../utils/").debug("components:raycaster:warn"),l=/^[\w\s-.,[\]#]*$/,c={childList:!0,attributes:!0,subtree:!0};function u(t,e){var n;for(t.length=e.length,n=0;n<e.length;n++)t[n]=e[n]}e.exports.Component=o("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new s.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new s.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new s.Vector3,this.otherLineEndVec3=new s.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(t){var e=this.data,n=this.el,i=this.raycaster;i.far=e.far,i.near=e.near,!e.showLine||e.far===t.far&&e.origin===t.origin&&e.direction===t.direction&&t.showLine||(this.unitLineEndVec3.copy(e.origin).add(e.direction).normalize(),this.drawLine()),!e.showLine&&t.showLine&&n.removeAttribute("line"),e.objects===t.objects||l.test(e.objects)||a('[raycaster] Selector "'+e.objects+'" may not update automatically with DOM changes.'),e.objects||a('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),e.autoRefresh!==t.autoRefresh&&n.isPlaying&&(e.autoRefresh?this.addEventListeners():this.removeEventListeners()),t.enabled&&!e.enabled&&this.clearAllIntersections(),this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,c),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var t,e=this.data;t=this.el.sceneEl.querySelectorAll(e.objects?e.objects:"*"),this.objects=this.flattenObject3DMaps(t),this.dirty=!1},tock:function(t){var e=this.data,n=this.prevCheckTime;e.enabled&&(n&&t-n<e.interval||(this.prevCheckTime=t,this.checkIntersections()))},checkIntersections:function(){var t,e,n=this.clearedIntersectedEls,i=this.el,r=this.data,o=this.intersectedEls,s=this.intersections,a=this.newIntersectedEls,l=this.newIntersections,c=this.prevIntersectedEls,h=this.rawIntersections;for(this.dirty&&this.refreshObjects(),u(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),h.length=0,this.raycaster.intersectObjects(this.objects,!0,h),s.length=0,o.length=0,t=0;t<h.length;t++)e=h[t],r.showLine&&e.object===i.getObject3D("line")||e.object.el&&(s.push(e),o.push(e.object.el));for(l.length=0,a.length=0,t=0;t<s.length;t++)-1===c.indexOf(s[t].object.el)&&(l.push(s[t]),a.push(s[t].object.el));for(n.length=0,t=0;t<c.length;t++)-1===o.indexOf(c[t])&&(c[t].emit("raycaster-intersected-cleared",this.intersectedClearedDetail),n.push(c[t]));for(n.length&&i.emit("raycaster-intersection-cleared",this.intersectionClearedDetail),t=0;t<a.length;t++)a[t].emit("raycaster-intersected",this.intersectedDetail);l.length&&(this.intersectionDetail.els=a,this.intersectionDetail.intersections=l,i.emit("raycaster-intersection",this.intersectionDetail)),r.showLine&&setTimeout(this.updateLine)},updateLine:function(){var t,e=this.intersections;e.length&&(t=e[0].object.el===this.el&&e[1]?e[1].distance:e[0].distance),this.drawLine(t)},getIntersection:function(t){var e,n;for(e=0;e<this.intersections.length;e++)if((n=this.intersections[e]).object.el===t)return n;return null},updateOriginDirection:(i=new s.Vector3,r=new s.Vector3,function(){var t=this.el,e=this.data;e.useWorldCoordinates?this.raycaster.set(e.origin,e.direction):(t.object3D.updateMatrixWorld(),r.setFromMatrixPosition(t.object3D.matrixWorld),0===e.origin.x&&0===e.origin.y&&0===e.origin.z||(r=t.object3D.localToWorld(r.copy(e.origin))),i.copy(e.direction).transformDirection(t.object3D.matrixWorld).normalize(),this.raycaster.set(r,i))}),drawLine:function(t){var e,n=this.data,i=this.el;e=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,void 0===t&&(t=n.far===1/0?1e3:n.far),this.lineData.start=n.origin,this.lineData.end=e.copy(this.unitLineEndVec3).multiplyScalar(t),this.lineData.color=n.lineColor,i.setAttribute("line",this.lineData)},flattenObject3DMaps:function(t){var e,n,i=this.objects;for(i.length=0,n=0;n<t.length;n++)if(t[n].isEntity&&t[n].object3D)for(e in t[n].object3DMap)i.push(t[n].getObject3D(e));return i},clearAllIntersections:function(){var t;for(t=0;t<this.intersectedEls.length;t++)this.intersectedEls[t].emit("raycaster-intersected-cleared",this.intersectedClearedDetail);u(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit("raycaster-intersection-cleared",this.intersectionClearedDetail)}})},{"../core/component":130,"../lib/three":178,"../utils/":204}],97:[function(t,e,n){var i=t("../lib/three").Math.degToRad,r=t("../core/component").registerComponent;e.exports.Component=r("rotation",{schema:{type:"vec3"},update:function(){var t=this.data,e=this.el.object3D;e.rotation.set(i(t.x),i(t.y),i(t.z)),e.rotation.order="YXZ"},remove:function(){this.el.object3D.rotation.set(0,0,0)}})},{"../core/component":130,"../lib/three":178}],98:[function(t,e,n){var i=t("../core/component").registerComponent;e.exports.Component=i("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var t=this.data;this.el.object3D.scale.set(0===t.x?1e-5:t.x,0===t.y?1e-5:t.y,0===t.z?1e-5:t.z)},remove:function(){this.el.object3D.scale.set(1,1,1)}})},{"../core/component":130}],99:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../core/component").components;e.exports.Component=i("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},update:function(){var t=this.data;this.el.object3D.background=t.transparent?null:new THREE.Color(t.color)},remove:function(){this.el.object3D.background=this.data.transparent?null:r[this.name].schema.color.default}})},{"../../core/component":130}],100:[function(t,e,n){var i=t("../../core/component").registerComponent;e.exports.Component=i("debug",{schema:{default:!0}})},{"../../core/component":130}],101:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../utils/"),o=r.bind,s=t("../../constants/");function a(t,e,n){var i,r;return(i=document.createElement("div")).classList.add("a-dialog-buttons-container"),(r=document.createElement("button")).classList.add("a-dialog-button","a-dialog-ok-button"),r.setAttribute(s.AFRAME_INJECTED,""),r.innerHTML=t,i.appendChild(r),r.addEventListener("click",(function(t){t.stopPropagation(),n()})),l(e,i)}function l(t,e){var n,i,r,o;return(n=document.createElement("div")).classList.add("a-modal"),n.setAttribute(s.AFRAME_INJECTED,""),(i=document.createElement("div")).className="a-dialog",i.setAttribute(s.AFRAME_INJECTED,""),n.appendChild(i),(r=document.createElement("div")).classList.add("a-dialog-text-container"),i.appendChild(r),(o=document.createElement("div")).classList.add("a-dialog-text"),o.innerHTML=t,r.appendChild(o),i.appendChild(e),n}e.exports.Component=i("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},mobileDesktopMessage:{default:"Set your browser to request the mobile version of the site and reload the page to enjoy immersive mode."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},init:function(){var t=this;this.data.enabled&&("localhost"!==location.hostname&&"127.0.0.1"!==location.hostname&&"http:"===location.protocol&&this.showHTTPAlert(),r.device.isMobileDeviceRequestingDesktopSite()?this.showMobileDesktopModeAlert():"undefined"!=typeof DeviceOrientationEvent&&DeviceOrientationEvent.requestPermission?(this.onDeviceMotionDialogAllowClicked=o(this.onDeviceMotionDialogAllowClicked,this),this.onDeviceMotionDialogDenyClicked=o(this.onDeviceMotionDialogDenyClicked,this),DeviceOrientationEvent.requestPermission().catch((function(){var e,n,i,r,o,a,c,u;t.devicePermissionDialogEl=(e=t.data.denyButtonText,n=t.data.allowButtonText,i=t.data.deviceMotionMessage,r=t.onDeviceMotionDialogAllowClicked,o=t.onDeviceMotionDialogDenyClicked,(a=document.createElement("div")).classList.add("a-dialog-buttons-container"),(c=document.createElement("button")).classList.add("a-dialog-button","a-dialog-deny-button"),c.setAttribute(s.AFRAME_INJECTED,""),c.innerHTML=e,a.appendChild(c),(u=document.createElement("button")).classList.add("a-dialog-button","a-dialog-allow-button"),u.setAttribute(s.AFRAME_INJECTED,""),u.innerHTML=n,a.appendChild(u),u.addEventListener("click",(function(t){t.stopPropagation(),r()})),c.addEventListener("click",(function(t){t.stopPropagation(),o()})),l(i,a)),t.el.appendChild(t.devicePermissionDialogEl)})).then((function(){t.el.emit("deviceorientationpermissiongranted"),t.permissionGranted=!0}))):this.permissionGranted=!0)},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showMobileDesktopModeAlert:function(){var t=this,e=a(t.data.cancelButtonText,t.data.mobileDesktopMessage,(function(){t.el.removeChild(e)}));this.el.appendChild(e)},showHTTPAlert:function(){var t=this,e=a(t.data.cancelButtonText,t.data.httpsMessage,(function(){t.el.removeChild(e)}));this.el.appendChild(e)},onDeviceMotionDialogAllowClicked:function(){var t=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then((function(e){"granted"===e?(t.el.emit("deviceorientationpermissiongranted"),t.permissionGranted=!0):t.el.emit("deviceorientationpermissionrejected"),t.remove()})).catch(console.error)}})},{"../../constants/":122,"../../core/component":130,"../../utils/":204}],102:[function(t,e,n){var i=t("../../core/component").registerComponent;e.exports.Component=i("embedded",{dependencies:["vr-mode-ui"],schema:{default:!0},update:function(){var t=this.el,e=t.querySelector(".a-enter-vr");!0===this.data?(e&&e.classList.add("embedded"),t.removeFullScreenStyles()):(e&&e.classList.remove("embedded"),t.addFullScreenStyles())}})},{"../../core/component":130}],103:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../lib/three"),o=t("../../utils/debug")("components:fog:warn");e.exports.Component=i("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},update:function(){var t=this.data,e=this.el,n=this.el.object3D.fog;if(e.isScene)return n&&t.type===n.name?void Object.keys(this.schema).forEach((function(e){var i=t[e];"color"===e&&(i=new r.Color(i)),n[e]=i})):(e.object3D.fog=function(t){var e;return(e="exponential"===t.type?new r.FogExp2(t.color,t.density):new r.Fog(t.color,t.near,t.far)).name=t.type,e}(t),void e.systems.material.updateMaterials());o("Fog component can only be applied to <a-scene>")},remove:function(){var t=this.el.object3D.fog;t&&(t.far=0,t.near=.1)}})},{"../../core/component":130,"../../lib/three":178,"../../utils/debug":200}],104:[function(t,e,n){(function(n){var i,r=t("../../constants").AFRAME_INJECTED,o=t("../../../package"),s=t("../../core/component").registerComponent,a=t("../../utils/"),l="https://unpkg.com/aframe-inspector@"+((i=o.version.split("."))[2]="x",i.join("."))+"/dist/aframe-inspector.min.js";e.exports.Component=s("inspector",{schema:{url:{default:"dev"===n.env.INSPECTOR_VERSION?"https://aframe.io/aframe-inspector/dist/aframe-inspector.js":l}},init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var t;this.firstPlay&&"false"!==(t=a.getUrlParameter("inspector"))&&t&&(this.openInspector(),this.firstPlay=!1)},initOverlay:function(){this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML='Loading Inspector<span class="dots"><span>.</span><span>.</span><span>.</span></span>'},remove:function(){this.removeEventListeners()},onKeydown:function(t){73===t.keyCode&&t.ctrlKey&&t.altKey&&this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(t){"INJECT_AFRAME_INSPECTOR"===t.data&&this.openInspector()},openInspector:function(t){var e,n=this;AFRAME.INSPECTOR||AFRAME.inspectorInjected?AFRAME.INSPECTOR.open(t):(this.showLoader(),(e=document.createElement("script")).src=this.data.url,e.setAttribute("data-name","aframe-inspector"),e.setAttribute(r,""),e.onload=function(){AFRAME.INSPECTOR.open(t),n.hideLoader(),n.removeEventListeners()},e.onerror=function(){n.loadingMessageEl.innerHTML="Error loading Inspector"},document.head.appendChild(e),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})}).call(this,t("_process"))},{"../../../package":72,"../../constants":122,"../../core/component":130,"../../utils/":204,_process:49}],105:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../utils/").shouldCaptureKeyEvent;e.exports.Component=i("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},init:function(){this.onKeyup=this.onKeyup.bind(this)},update:function(t){this.enterVREnabled=this.data.enterVR},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(t){var e=this.el;r(t)&&(this.enterVREnabled&&70===t.keyCode&&e.enterVR(),this.enterVREnabled&&27===t.keyCode&&e.exitVR())}})},{"../../core/component":130,"../../utils/":204}],106:[function(t,e,n){var i=t("../../utils/debug"),r=t("../../core/component").registerComponent,o=i("components:pool:warn");e.exports.Component=r("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},multiple:!0,initPool:function(){var t;for(this.availableEls=[],this.usedEls=[],this.data.mixin||o("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||o("Container "+this.data.container+" not found.")),this.container=this.container||this.el,t=0;t<this.data.size;++t)this.createEntity()},update:function(t){var e=this.data;t.mixin===e.mixin&&t.size===e.size||this.initPool()},createEntity:function(){var t;(t=document.createElement("a-entity")).play=this.wrapPlay(t.play),t.setAttribute("mixin",this.data.mixin),t.object3D.visible=!1,t.pause(),this.container.appendChild(t),this.availableEls.push(t)},wrapPlay:function(t){var e=this.usedEls;return function(){-1!==e.indexOf(this)&&t.call(this)}},requestEntity:function(){var t;if(0===this.availableEls.length){if(!1===this.data.dynamic)return void o("Requested entity from empty pool: "+this.attrName);o("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName),this.createEntity()}return t=this.availableEls.shift(),this.usedEls.push(t),t.object3D.visible=!0,t},returnEntity:function(t){var e=this.usedEls.indexOf(t);if(-1!==e)return this.usedEls.splice(e,1),this.availableEls.push(t),t.object3D.visible=!1,t.pause(),t;o("The returned entity was not previously pooled from "+this.attrName)}})},{"../../core/component":130,"../../utils/debug":200}],107:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../lib/three"),o=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),s=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join("\n");e.exports.Component=i("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},init:function(){var t=this.el,e=this;function n(){var n=t.renderer.getContext();n&&(e.cubeMapSize=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),e.material=new r.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:o,fragmentShader:s,side:r.DoubleSide}),e.quad=new r.Mesh(new r.PlaneBufferGeometry(1,1),e.material),e.quad.visible=!1,e.camera=new r.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),e.canvas=document.createElement("canvas"),e.ctx=e.canvas.getContext("2d"),t.object3D.add(e.quad),e.onKeyDown=e.onKeyDown.bind(e))}t.renderer?n():t.addEventListener("render-target-loaded",n)},getRenderTarget:function(t,e){return new r.WebGLRenderTarget(t,e,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,wrapS:r.ClampToEdgeWrapping,wrapT:r.ClampToEdgeWrapping,format:r.RGBAFormat,type:r.UnsignedByteType})},resize:function(t,e){this.quad.scale.set(t,e,1),this.camera.left=-1*t/2,this.camera.right=t/2,this.camera.top=e/2,this.camera.bottom=-1*e/2,this.camera.updateProjectionMatrix(),this.canvas.width=t,this.canvas.height=e},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(t){this.data&&83===t.keyCode&&t.ctrlKey&&t.altKey&&this.capture(t.shiftKey?"equirectangular":"perspective")},setCapture:function(t){var e,n,i,o,s=this.el;return"perspective"===t?(this.quad.visible=!1,n=this.data.camera&&this.data.camera.components.camera.camera||s.camera,e={width:this.data.width,height:this.data.height}):(n=this.camera,o=new r.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:r.RGBFormat,generateMipmaps:!0,minFilter:r.LinearMipmapLinearFilter,encoding:r.sRGBEncoding}),i=new r.CubeCamera(s.camera.near,s.camera.far,o),s.camera.getWorldPosition(i.position),s.camera.getWorldQuaternion(i.quaternion),i.update(s.renderer,s.object3D),this.quad.material.uniforms.map.value=i.renderTarget.texture,e={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:n,size:e,projection:t}},capture:function(t){var e,n=this.el.renderer.xr.enabled,i=this.el.renderer;i.xr.enabled=!1,e=this.setCapture(t),this.renderCapture(e.camera,e.size,e.projection),this.saveCapture(),i.xr.enabled=n},getCanvas:function(t){var e=this.el.renderer.xr.enabled,n=this.el.renderer,i=this.setCapture(t);return n.xr.enabled=!1,this.renderCapture(i.camera,i.size,i.projection),n.xr.enabled=e,this.canvas},renderCapture:function(t,e,n){var i,r,o,s=this.el.renderer.autoClear,a=this.el,l=a.renderer;r=this.getRenderTarget(e.width,e.height),o=new Uint8Array(4*e.width*e.height),this.resize(e.width,e.height),l.autoClear=!0,l.clear(),l.setRenderTarget(r),l.render(a.object3D,t),l.autoClear=s,l.readRenderTargetPixels(r,0,0,e.width,e.height,o),l.setRenderTarget(null),"perspective"===n&&(o=this.flipPixelsVertically(o,e.width,e.height)),i=new ImageData(new Uint8ClampedArray(o),e.width,e.height),this.quad.visible=!1,this.ctx.putImageData(i,0,0)},flipPixelsVertically:function(t,e,n){for(var i=t.slice(0),r=0;r<e;++r)for(var o=0;o<n;++o)i[4*r+o*e*4]=t[4*r+(n-o)*e*4],i[4*r+1+o*e*4]=t[4*r+1+(n-o)*e*4],i[4*r+2+o*e*4]=t[4*r+2+(n-o)*e*4],i[4*r+3+o*e*4]=t[4*r+3+(n-o)*e*4];return i},saveCapture:function(){this.canvas.toBlob((function(t){var e="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",n=document.createElement("a"),i=URL.createObjectURL(t);n.href=i,n.setAttribute("download",e),n.innerHTML="downloading...",n.style.display="none",document.body.appendChild(n),setTimeout((function(){n.click(),document.body.removeChild(n)}),1)}),"image/png")}})},{"../../core/component":130,"../../lib/three":178}],108:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../../vendor/rStats"),o=t("../../utils");t("../../../vendor/rStats.extras"),t("../../lib/rStatsAframe");var s=window.aframeStats,a=o.bind,l=window.threeStats;e.exports.Component=i("stats",{schema:{default:!0},init:function(){var t=this.el;"false"!==o.getUrlParameter("stats")&&(this.stats=function(t){var e=new l(t.renderer),n=new s(t);return new r({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:t.isMobile?[]:[e,n]})}(t),this.statsEl=document.querySelector(".rs-base"),this.hideBound=a(this.hide,this),this.showBound=a(this.show,this),t.addEventListener("enter-vr",this.hideBound),t.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var t=this.stats;t&&(t("rAF").tick(),t("FPS").frame(),t().update())},hide:function(){this.statsEl.classList.add("a-hidden")},show:function(){this.statsEl.classList.remove("a-hidden")}})},{"../../../vendor/rStats":216,"../../../vendor/rStats.extras":215,"../../core/component":130,"../../lib/rStatsAframe":177,"../../utils":204}],109:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../constants/"),o=t("../../utils/"),s=o.bind;function a(t){t.addEventListener("touchstart",(function(){t.classList.remove("resethover")})),t.addEventListener("touchend",(function(){t.classList.add("resethover")}))}e.exports.Component=i("vr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},enterVRButton:{default:""},enterARButton:{default:""}},init:function(){var t=this,e=this.el;"false"!==o.getUrlParameter("ui")&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),e.addEventListener("enter-vr",this.updateEnterInterfaces),e.addEventListener("exit-vr",this.updateEnterInterfaces),e.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",(function(e){"loaderReady"===e.data.type&&(t.insideLoader=!0,t.remove())})),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=s(this.onEnterVRButtonClick,this),this.onEnterARButtonClick=s(this.onEnterARButtonClick,this),this.onModalClick=s(this.onModalClick,this),this.toggleOrientationModalIfNeeded=s(this.toggleOrientationModalIfNeeded,this),this.updateEnterInterfaces=s(this.updateEnterInterfaces,this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var t,e,n,i=this.data,s=this.el;if(!i.enabled||this.insideLoader||"false"===o.getUrlParameter("ui"))return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(i.enterVRButton?(this.enterVREl=document.querySelector(i.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=(t=this.onEnterVRButtonClick,(n=document.createElement("div")).classList.add("a-enter-vr"),n.setAttribute(r.AFRAME_INJECTED,""),(e=document.createElement("button")).className="a-enter-vr-button",e.setAttribute("title","Enter VR mode with a headset or fullscreen mode on a desktop. Visit https://webvr.rocks or https://webvr.info for more information."),e.setAttribute(r.AFRAME_INJECTED,""),o.device.isMobile()&&a(e),n.appendChild(e),e.addEventListener("click",(function(e){t(),e.stopPropagation()})),n),s.appendChild(this.enterVREl)),i.enterARButton?(this.enterAREl=document.querySelector(i.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=function(t){var e,n;return(n=document.createElement("div")).classList.add("a-enter-ar"),n.setAttribute(r.AFRAME_INJECTED,""),(e=document.createElement("button")).className="a-enter-ar-button",e.setAttribute("title","Enter AR mode with a headset or handheld device. Visit https://webvr.rocks or https://webvr.info for more information."),e.setAttribute(r.AFRAME_INJECTED,""),o.device.isMobile()&&a(e),n.appendChild(e),e.addEventListener("click",(function(e){t(),e.stopPropagation()})),n}(this.onEnterARButtonClick),s.appendChild(this.enterAREl)),this.orientationModalEl=function(t){var e=document.createElement("div");e.className="a-orientation-modal",e.classList.add("a-hidden"),e.setAttribute(r.AFRAME_INJECTED,"");var n=document.createElement("button");return n.setAttribute(r.AFRAME_INJECTED,""),n.innerHTML="Exit VR",n.addEventListener("click",t),e.appendChild(n),e}(this.onModalClick),s.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach((function(t){t&&t.parentNode&&t.parentNode.removeChild(t)}))},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){this.enterVREl&&(this.el.is("vr-mode")?this.enterVREl.classList.add("a-hidden"):this.enterVREl.classList.remove("a-hidden"))},toggleEnterARButtonIfNeeded:function(){this.enterAREl&&(this.el.is("vr-mode")||!o.device.checkARSupport()?this.enterAREl.classList.add("a-hidden"):this.enterAREl.classList.remove("a-hidden"))},toggleOrientationModalIfNeeded:function(){var t=this.el,e=this.orientationModalEl;e&&t.isMobile&&(!o.device.isLandscape()&&t.is("vr-mode")?e.classList.remove("a-hidden"):e.classList.add("a-hidden"))}})},{"../../constants/":122,"../../core/component":130,"../../utils/":204}],110:[function(t,e,n){var i=t("../core/component"),r=t("../lib/three"),o=t("../utils/bind");e.exports.Component=(0,i.registerComponent)("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=o(this.update,this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var t=this.data;this.updateDescendants(t.cast,t.receive)},remove:function(){this.el.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(t,e){var n=this.el.sceneEl;this.el.object3D.traverse((function(i){if(i instanceof r.Mesh&&(i.castShadow=t,i.receiveShadow=e,n.hasLoaded&&i.material))for(var o=Array.isArray(i.material)?i.material:[i.material],s=0;s<o.length;s++)o[s].needsUpdate=!0}))}})},{"../core/component":130,"../lib/three":178,"../utils/bind":198}],111:[function(t,n,i){var r=t("../core/component").registerComponent,o=t("../utils/debug"),s=t("../lib/three"),a=o("components:sound:warn");n.exports.Component=r("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var t=this;this.listener=null,this.audioLoader=new s.AudioLoader,this.pool=new s.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){t.playSound()}},update:function(t){var e,n,i=this.data,r=i.src!==t.src;if(r){if(!i.src)return;this.setupSound()}for(e=0;e<this.pool.children.length;e++)n=this.pool.children[e],i.positional&&(n.setDistanceModel(i.distanceModel),n.setMaxDistance(i.maxDistance),n.setRefDistance(i.refDistance),n.setRolloffFactor(i.rolloffFactor)),n.setLoop(i.loop),n.setVolume(i.volume),n.isPaused=!1;if(i.on!==t.on&&this.updateEventListener(t.on),r){var o=this;this.loaded=!1,this.audioLoader.load(i.src,(function(t){for(e=0;e<o.pool.children.length;e++)(n=o.pool.children[e]).setBuffer(t);o.loaded=!0,s.Cache.remove(i.src),(o.data.autoplay||o.mustPlay)&&o.playSound(),o.el.emit("sound-loaded",o.evtDetail,!1)}))}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var t;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(t=0;t<this.pool.children.length;t++)this.pool.children[t].disconnect()}catch(e){a("Audio source not properly disconnected")}},updateEventListener:function(t){var e=this.el;t&&e.removeEventListener(t,this.playSoundBound),e.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var t,e,n=this.el,i=n.sceneEl,r=this;this.pool.children.length>0&&(this.stopSound(),n.removeObject3D("sound"));var o=this.listener=i.audioListener||new s.AudioListener;for(i.audioListener=o,i.camera&&i.camera.add(o),i.addEventListener("camera-set-active",(function(t){t.detail.cameraEl.getObject3D("camera").add(o)})),this.pool=new s.Group,t=0;t<this.data.poolSize;t++)e=this.data.positional?new s.PositionalAudio(o):new s.Audio(o),this.pool.add(e);for(n.setObject3D(this.attrName,this.pool),t=0;t<this.pool.children.length;t++)(e=this.pool.children[t]).onEnded=function(){this.isPlaying=!1,r.el.emit("sound-ended",r.evtDetail,!1)}},pauseSound:function(){var t,e;for(this.isPlaying=!1,t=0;t<this.pool.children.length;t++)(e=this.pool.children[t]).source&&e.source.buffer&&e.isPlaying&&!e.isPaused&&(e.isPaused=!0,e.pause())},playSound:function(t){var e,n,i;if(!this.loaded)return a("Sound not loaded yet. It will be played once it finished loading"),void(this.mustPlay=!0);for(e=!1,this.isPlaying=!0,n=0;n<this.pool.children.length;n++)(i=this.pool.children[n]).isPlaying||!i.buffer||e||(t&&t(i),i.play(),i.isPaused=!1,e=!0);e?this.mustPlay=!1:a("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el)},stopSound:function(){var t,e;for(this.isPlaying=!1,t=0;t<this.pool.children.length;t++){if(!(e=this.pool.children[t]).source||!e.source.buffer)return;e.stop()}}})},{"../core/component":130,"../lib/three":178,"../utils/debug":200}],112:[function(t,e,n){var i=t("three-bmfont-text"),r=t("load-bmfont"),o=t("../core/component").registerComponent,s=t("../core/shader"),a=t("../lib/three"),l=t("../utils/"),c=l.debug("components:text:error"),u=s.shaders,h=l.debug("components:text:warn"),d="https://cdn.aframe.io/fonts/",p={aileronsemibold:d+"Aileron-Semibold.fnt",dejavu:d+"DejaVu-sdf.fnt",exo2bold:d+"Exo2Bold.fnt",exo2semibold:d+"Exo2SemiBold.fnt",kelsonsans:d+"KelsonSans.fnt",monoid:d+"Monoid.fnt",mozillavr:d+"mozillavr.fnt",roboto:d+"Roboto-msdf.json",sourcecodepro:d+"SourceCodePro.fnt"},f=["roboto"];e.exports.FONTS=p;var m,g,v,y,b=new function(){var t=this.cache={};this.get=function(e,n){return e in t||(t[e]=n()),t[e]}},_={},w={},A=/^\w+:/;function x(t,e,n){return t||(.5+e)*n}e.exports.Component=o("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:"roboto"},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:u},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=i(),this.createOrUpdateMaterial(),this.mesh=new a.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh)},update:function(t){var e=this.data,n=this.currentFont;w[e.font]?this.texture=w[e.font]:(this.texture=w[e.font]=new a.Texture,this.texture.anisotropy=16),this.createOrUpdateMaterial(),t.font===e.font?n&&(this.updateGeometry(this.geometry,n),this.updateLayout()):this.updateFont()},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var t,e,n,i=this.data,r=this.material,o=this.shaderData;if(n=i.shader,-1!==f.indexOf(i.font)||i.font.indexOf("-msdf.")>=0?n="msdf":i.font in p&&-1===f.indexOf(i.font)&&(n="sdf"),t=(this.shaderObject&&this.shaderObject.name)!==n,o.alphaTest=i.alphaTest,o.color=i.color,o.map=this.texture,o.opacity=i.opacity,o.side=function(t){switch(t){case"back":return a.FrontSide;case"double":return a.DoubleSide;default:return a.BackSide}}(i.side),o.transparent=i.transparent,o.negate=i.negate,!t)return this.shaderObject.update(o),r.transparent=o.transparent,void(r.side=o.side);e=function(t,e,n){var i,r;return(r=new u[e].Shader).el=t,r.init(n),r.update(n),(i=r.material).transparent=n.transparent,{material:i,shader:r}}(this.el,n,o),this.material=e.material,this.shaderObject=e.shader,this.material.side=o.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var t,e=this.data,n=this.el,i=this.geometry,o=this;e.font||h("No font specified. Using the default font."),this.mesh.visible=!1,t=this.lookupFont(e.font||"roboto")||e.font,b.get(t,(function(){return n=t,i=e.yOffset,new Promise((function(t,e){r(n,(function(r,o){if(r)return c("Error loading font",n),void e(r);n.indexOf("/Roboto-msdf.json")>=0&&(i=30),i&&o.chars.map((function(t){t.yoffset+=i})),t(o)}))}));var n,i})).then((function(r){var s;if(1!==r.pages.length)throw new Error("Currently only single-page bitmap fonts are supported.");_[t]||(r.widthFactor=_[r]=function(t){var e=0,n=0,i=0;return t.chars.map((function(t){e+=t.xadvance,t.id>=48&&t.id<=57&&(i++,n+=t.xadvance)})),i?n/i:e/t.chars.length}(r)),o.updateGeometry(i,r),o.currentFont=r,o.updateLayout(),s=o.getFontImageSrc(),b.get(s,(function(){return t=s,new Promise((function(e,n){(new a.ImageLoader).load(t,(function(t){e(t)}),void 0,(function(){c("Error loading font image",t),n(null)}))}));var t})).then((function(t){var i=o.texture;i.image=t,i.needsUpdate=!0,w[e.font]=i,o.texture=i,o.mesh.visible=!0,n.emit("textfontset",{font:e.font,fontObj:r})})).catch((function(t){c(t.message),c(t.stack)}))})).catch((function(t){c(t.message),c(t.stack)}))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var t=this.lookupFont(this.data.font||"roboto")||this.data.font,e=this.currentFont.pages[0];return e.match(A)&&0!==e.indexOf("http")?t.replace(/(\.fnt)|(\.json)/,".png"):a.LoaderUtils.extractUrlBase(t)+e},updateLayout:function(){var t,e,n,i,r,o,s,a,l,c=this.el,u=this.data,h=this.geometry,d=this.mesh;if(h.layout){if(n=c.getAttribute("geometry"),i=(o=(s=u.width||n&&n.width||1)/x(u.wrapPixels,u.wrapCount,this.currentFont.widthFactor))*((r=h.layout).height+r.descender),n&&"plane"===n.primitive&&(n.width||c.setAttribute("geometry","width",s),n.height||c.setAttribute("geometry","height",i)),"left"===(t="align"===u.anchor?u.align:u.anchor))a=0;else if("right"===t)a=-1*r.width;else{if("center"!==t)throw new TypeError("Invalid text.anchor property value",t);a=-1*r.width/2}if("bottom"===(e=u.baseline))l=0;else if("top"===e)l=-1*r.height+r.ascender;else{if("center"!==e)throw new TypeError("Invalid text.baseline property value",e);l=-1*r.height/2}d.position.x=a*o+u.xOffset,d.position.y=l*o,d.position.z=u.zOffset,d.scale.set(o,-1*o,o)}},lookupFont:function(t){return p[t]},updateGeometry:(m={},g={},v=/\\n/g,y=/\\t/g,function(t,e){var n=this.data;g.font=e,g.lineHeight=n.lineHeight&&isFinite(n.lineHeight)?n.lineHeight:e.common.lineHeight,g.text=n.value.toString().replace(v,"\n").replace(y,"\t"),g.width=x(n.wrapPixels,n.wrapCount,e.widthFactor),t.update(l.extend(m,n,g))})})},{"../core/component":130,"../core/shader":140,"../lib/three":178,"../utils/":204,"load-bmfont":37,"three-bmfont-text":62}],113:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/tracked-controls"),o=t("../constants").DEFAULT_CAMERA_HEIGHT,s=t("../lib/three"),a=t("../constants").DEFAULT_HANDEDNESS,l={touches:[]};e.exports.Component=i("tracked-controls-webvr",{schema:{autoHide:{default:!0},controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"}},init:function(){this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.changedAxes=[],this.targetControllerNumber=this.data.controller,this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.deltaControllerPosition=new s.Vector3,this.controllerQuaternion=new s.Quaternion,this.controllerEuler=new s.Euler,this.updateGamepad(),this.buttonEventDetails={}},tick:function(t,e){var n=this.el.getObject3D("mesh");n&&n.update&&n.update(e/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return o},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var t=this.data,e=r.findMatchingControllerWebVR(this.system.controllers,t.id,t.idPrefix,t.hand,t.controller);this.controller=e,this.el.components["tracked-controls"].controller=e,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},applyArmModel:function(t){var e,n,i,r,o=this.controller,s=this.controllerEuler,l=this.controllerQuaternion,c=this.deltaControllerPosition;n=this.getHeadElement().object3D,r=this.defaultUserHeight(),i=o.pose,e=(o?o.hand:void 0)||a,t.copy(n.position),c.set(.175*("left"===e?-1:"right"===e?1:0),-.3,-.03),c.multiplyScalar(r),c.applyAxisAngle(n.up,n.rotation.y),t.add(c),c.set(0,0,-.175),c.multiplyScalar(r),i.orientation?l.fromArray(i.orientation):l.copy(n.quaternion),s.setFromQuaternion(l),s.set(s.x,s.y,0),c.applyEuler(s),t.add(c)},updatePose:function(){var t,e,n=this.controller,i=this.data,r=this.el.object3D,o=this.system.vrDisplay;n&&((t=n.pose).position?r.position.fromArray(t.position):i.armModel&&this.applyArmModel(r.position),t.orientation&&r.quaternion.fromArray(t.orientation),o&&t.position&&(e=this.el.sceneEl.renderer.xr.getStandingMatrix(),r.matrix.compose(r.position,r.quaternion,r.scale),r.matrix.multiplyMatrices(e,r.matrix),r.matrix.decompose(r.position,r.quaternion,r.scale)),r.rotateX(this.data.orientationOffset.x*s.Math.DEG2RAD),r.rotateY(this.data.orientationOffset.y*s.Math.DEG2RAD),r.rotateZ(this.data.orientationOffset.z*s.Math.DEG2RAD))},updateButtons:function(){var t,e=this.controller;if(e){for(t=0;t<e.buttons.length;++t)this.buttonStates[t]||(this.buttonStates[t]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[t]||(this.buttonEventDetails[t]={id:t,state:this.buttonStates[t]}),this.handleButton(t,e.buttons[t]);this.handleAxes()}},handleButton:function(t,e){return!!(this.handlePress(t,e)|this.handleTouch(t,e)|this.handleValue(t,e))&&(this.el.emit("buttonchanged",this.buttonEventDetails[t],!1),!0)},handleAxes:function(){var t,e=!1,n=this.controller.axes,i=this.axis,r=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),t=0;t<n.length;++t)r.push(i[t]!==n[t]),r[t]&&(e=!0);if(!e)return!1;for(this.axis.splice(0,this.axis.length),t=0;t<n.length;t++)this.axis.push(n[t]);return this.el.emit("axismove",this.axisMoveEventDetail,!1),!0},handlePress:function(t,e){var n=this.buttonStates[t];return e.pressed!==n.pressed&&(this.el.emit(e.pressed?"buttondown":"buttonup",this.buttonEventDetails[t],!1),n.pressed=e.pressed,!0)},handleTouch:function(t,e){var n=this.buttonStates[t];return e.touched!==n.touched&&(this.el.emit(e.touched?"touchstart":"touchend",this.buttonEventDetails[t],!1,l),n.touched=e.touched,!0)},handleValue:function(t,e){var n=this.buttonStates[t];return e.value!==n.value&&(n.value=e.value,!0)}})},{"../constants":122,"../core/component":130,"../lib/three":178,"../utils/tracked-controls":213}],114:[function(t,e,n){var i=t("../utils/tracked-controls"),r=t("../core/component").registerComponent;e.exports.Component=r("tracked-controls-webxr",{schema:{id:{type:"string",default:""},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},index:{type:"int",default:-1},iterateControllerProfiles:{default:!1}},init:function(){this.updateController=this.updateController.bind(this),this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes}},update:function(){this.updateController()},play:function(){var t=this.el.sceneEl;this.updateController(),t.addEventListener("controllersupdated",this.updateController)},pause:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(t){return!(!this.controller||this.controller.gamepad||"none"!==t.inputSource.handedness&&t.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=i.findMatchingControllerWebXR(this.system.controllers,this.data.id,this.data.hand,this.data.index,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},tick:function(){var t=this.el.sceneEl,e=this.controller;e&&t.frame&&this.system.referenceSpace&&(e.hand||(this.pose=t.frame.getPose(e.targetRaySpace,this.system.referenceSpace),this.updatePose(),this.updateButtons()))},updatePose:function(){var t=this.el.object3D,e=this.pose;e&&(t.matrix.elements=e.transform.matrix,t.matrix.decompose(t.position,t.rotation,t.scale))},updateButtons:function(){var t,e,n=this.controller;if(n&&n.gamepad){for(e=n.gamepad,t=0;t<e.buttons.length;++t)this.buttonStates[t]||(this.buttonStates[t]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[t]||(this.buttonEventDetails[t]={id:t,state:this.buttonStates[t]}),this.handleButton(t,e.buttons[t]);this.handleAxes()}},handleButton:function(t,e){return!!(this.handlePress(t,e)|this.handleTouch(t,e)|this.handleValue(t,e))&&(this.el.emit("buttonchanged",this.buttonEventDetails[t],!1),!0)},handleAxes:function(){var t,e=!1,n=this.controller.gamepad.axes,i=this.axis,r=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),t=0;t<n.length;++t)r.push(i[t]!==n[t]),r[t]&&(e=!0);if(!e)return!1;for(this.axis.splice(0,this.axis.length),t=0;t<n.length;t++)this.axis.push(n[t]);return this.el.emit("axismove",this.axisMoveEventDetail,!1),!0},handlePress:function(t,e){var n=this.buttonStates[t];return e.pressed!==n.pressed&&(this.el.emit(e.pressed?"buttondown":"buttonup",this.buttonEventDetails[t],!1),n.pressed=e.pressed,!0)},handleTouch:function(t,e){var n=this.buttonStates[t];return e.touched!==n.touched&&(this.el.emit(e.touched?"touchstart":"touchend",this.buttonEventDetails[t],!1),n.touched=e.touched,!0)},handleValue:function(t,e){var n=this.buttonStates[t];return e.value!==n.value&&(n.value=e.value,!0)}})},{"../core/component":130,"../utils/tracked-controls":213}],115:[function(t,e,n){var i=t("../core/component").registerComponent;e.exports.Component=i("tracked-controls",{schema:{autoHide:{default:!0},controller:{default:-1},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},handTrackingEnabled:{default:!1},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"},iterateControllerProfiles:{default:!1}},update:function(){var t=this.data,e=this.el;e.sceneEl.hasWebXR?e.setAttribute("tracked-controls-webxr",{id:t.id,hand:t.hand,index:t.controller,iterateControllerProfiles:t.iterateControllerProfiles,handTrackingEnabled:t.handTrackingEnabled}):e.setAttribute("tracked-controls-webvr",t)}})},{"../core/component":130}],116:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/bind"),o=t("../lib/three"),s=t("../utils/tracked-controls"),a=s.checkControllerPresentAndSetup,l=s.emitIfAxesChanged,c=s.onButtonEvent,u={left:"https://cdn.aframe.io/controllers/valve/index/valve-index-left.glb",right:"https://cdn.aframe.io/controllers/valve/index/valve-index-right.glb"},h=t("../utils/").device.isWebXRAvailable,d={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},p=h?d:{left:{_x:.692295102620542,_y:-.0627618864318427,_z:-.06265893149611756,_order:"XYZ"},right:{_x:.6484021229942998,_y:-.032563619881892894,_z:-.1327973171917482,_order:"XYZ"}},f=h?{left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}}:{left:{x:-.00023692678902063457,y:.04724540367838371,z:-.061959880395271096},right:{x:.002471558599671131,y:.055765208987076195,z:-.061068168708348844}};e.exports.Component=i("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var t=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){c(e.detail.id,"down",t)},this.onButtonUp=function(e){c(e.detail.id,"up",t)},this.onButtonTouchEnd=function(e){c(e.detail.id,"touchend",t)},this.onButtonTouchStart=function(e){c(e.detail.id,"touchstart",t)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=r(this.removeControllersUpdateListener,this),this.onAxisMoved=r(this.onAxisMoved,this)},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var t=this.data;a(this,"valve",{index:"right"===t.hand?0:"left"===t.hand?1:2,iterateControllerProfiles:!0,hand:t.hand})},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{idPrefix:"valve",controller:"right"===t.hand?1:"left"===t.hand?0:2,hand:t.hand,orientationOffset:t.orientationOffset}),this.loadModel()},loadModel:function(){var t=this.data;t.model&&this.el.setAttribute("gltf-model",""+u[t.hand])},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id],n=this.buttonMeshes;e&&("trigger"===e&&n&&n.trigger&&(n.trigger.rotation.x=this.triggerOriginalRotationX-t.detail.state.value*(Math.PI/40)),this.el.emit(e+"changed",t.detail.state))},onModelLoaded:function(t){var e,n=t.detail.model,i=this;this.data.model&&((e=this.buttonMeshes={}).grip={left:n.getObjectByName("leftgrip"),right:n.getObjectByName("rightgrip")},e.menu=n.getObjectByName("menubutton"),e.system=n.getObjectByName("systembutton"),e.trackpad=n.getObjectByName("touchpad"),e.trigger=n.getObjectByName("trigger"),this.triggerOriginalRotationX=e.trigger.rotation.x,Object.keys(e).forEach((function(t){i.setButtonColor(t,i.data.buttonColor)})),n.position.copy(f[this.data.hand]),n.rotation.copy(p[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controlls",model:this.data.model,rayOrigin:new o.Vector3(0,0,0)}))},onAxisMoved:function(t){l(this,this.mapping.axes,t)},updateModel:function(t,e){this.data.model&&(-1!==e.indexOf("touch")||this.setButtonColor(t,"up"===e?this.data.buttonColor:this.data.buttonHighlightColor))},setButtonColor:function(t,e){}})},{"../core/component":130,"../lib/three":178,"../utils/":204,"../utils/bind":198,"../utils/tracked-controls":213}],117:[function(t,e,n){var i=t("../core/component").registerComponent;e.exports.Component=i("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},{"../core/component":130}],118:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/bind"),o=t("../utils/tracked-controls"),s=o.checkControllerPresentAndSetup,a=o.emitIfAxesChanged,l=o.onButtonEvent,c=t("../utils/").device.isWebXRAvailable,u=c?"htc-vive-controller-mv":"OpenVR ";e.exports.Component=i("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:c?{axes:{thumbstick:[0,1]},buttons:["trigger","grip","trackpad","none","menu"]}:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},init:function(){var t=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){l(e.detail.id,"down",t)},this.onButtonUp=function(e){l(e.detail.id,"up",t)},this.onButtonTouchEnd=function(e){l(e.detail.id,"touchend",t)},this.onButtonTouchStart=function(e){l(e.detail.id,"touchstart",t)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var t=this.data;this.controllerIndex="right"===t.hand?0:"left"===t.hand?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=r(this.removeControllersUpdateListener,this),this.onAxisMoved=r(this.onAxisMoved,this)},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){s(this,u,{index:this.controllerIndex,hand:this.data.hand})},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{idPrefix:u,hand:t.hand,controller:this.controllerIndex,orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.obj",mtl:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id],n=this.buttonMeshes;e&&("trigger"===e&&n&&n.trigger&&(n.trigger.rotation.x=-t.detail.state.value*(Math.PI/12)),this.el.emit(e+"changed",t.detail.state))},onModelLoaded:function(t){var e,n=t.detail.model,i=this;this.data.model&&((e=this.buttonMeshes={}).grip={left:n.getObjectByName("leftgrip"),right:n.getObjectByName("rightgrip")},e.menu=n.getObjectByName("menubutton"),e.system=n.getObjectByName("systembutton"),e.trackpad=n.getObjectByName("touchpad"),e.trigger=n.getObjectByName("trigger"),Object.keys(e).forEach((function(t){i.setButtonColor(t,i.data.buttonColor)})),n.position.set(0,-.015,.04))},onAxisMoved:function(t){a(this,this.mapping.axes,t)},updateModel:function(t,e){this.data.model&&(-1!==e.indexOf("touch")||this.setButtonColor(t,"up"===e?this.data.buttonColor:this.data.buttonHighlightColor))},setButtonColor:function(t,e){var n=this.buttonMeshes,i=this.rendererSystem;if(n){if("grip"===t)return n.grip.left.material.color.set(e),n.grip.right.material.color.set(e),i.applyColorCorrection(n.grip.left.material.color),void i.applyColorCorrection(n.grip.right.material.color);n[t].material.color.set(e),i.applyColorCorrection(n[t].material.color)}}})},{"../core/component":130,"../utils/":204,"../utils/bind":198,"../utils/tracked-controls":213}],119:[function(t,e,n){var i=t("../core/component").registerComponent,r=t("../utils/bind"),o=t("../utils/tracked-controls"),s=o.checkControllerPresentAndSetup,a=o.emitIfAxesChanged,l=o.onButtonEvent;e.exports.Component=i("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=r(this.onModelLoaded,this),this.onControllersUpdate=r(this.onControllersUpdate,this),this.checkIfControllerPresent=r(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=r(this.removeControllersUpdateListener,this),this.onAxisMoved=r(this.onAxisMoved,this)},init:function(){var t=this;this.onButtonChanged=r(this.onButtonChanged,this),this.onButtonDown=function(e){l(e.detail.id,"down",t)},this.onButtonUp=function(e){l(e.detail.id,"up",t)},this.onButtonTouchStart=function(e){l(e.detail.id,"touchstart",t)},this.onButtonTouchEnd=function(e){l(e.detail.id,"touchend",t)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("model-loaded",this.onModelLoaded),t.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("model-loaded",this.onModelLoaded),t.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){s(this,"HTC Vive Focus",this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{armModel:t.armModel,idPrefix:"HTC Vive Focus",orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model","https://cdn.aframe.io/controllers/vive/focus-controller/focus-controller.gltf")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(t){var e,n=t.detail.model;this.data.model&&((e=this.buttonMeshes={}).trigger=n.getObjectByName("BumperKey"),e.triggerPressed=n.getObjectByName("BumperKey_Press"),e.triggerPressed&&(e.triggerPressed.visible=!1),e.trackpad=n.getObjectByName("TouchPad"),e.trackpadPressed=n.getObjectByName("TouchPad_Press"),e.trackpadPressed&&(e.trackpadPressed.visible=!1))},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id];e&&this.el.emit(e+"changed",t.detail.state)},onAxisMoved:function(t){a(this,this.mapping.axes,t)},updateModel:function(t,e){this.data.model&&this.updateButtonModel(t,e)},updateButtonModel:function(t,e){var n=this.buttonMeshes,i=t+"Pressed";if(n&&n[t]&&n[i]){var r;switch(e){case"down":r=this.data.buttonHighlightColor;break;case"touchstart":r=this.data.buttonTouchedColor}r&&n[i].material.color.set(r),n[i].visible=!!r,n[t].visible=!r}}})},{"../core/component":130,"../utils/bind":198,"../utils/tracked-controls":213}],120:[function(t,e,n){var i,r,o=t("../constants").keyboardevent.KEYCODE_TO_CODE,s=t("../core/component").registerComponent,a=t("../lib/three"),l=t("../utils/"),c=l.bind,u=l.shouldCaptureKeyEvent,h=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];e.exports.Component=s("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},init:function(){this.keys={},this.easing=1.1,this.velocity=new a.Vector3,this.onBlur=c(this.onBlur,this),this.onFocus=c(this.onFocus,this),this.onKeyDown=c(this.onKeyDown,this),this.onKeyUp=c(this.onKeyUp,this),this.onVisibilityChange=c(this.onVisibilityChange,this),this.attachVisibilityEventListeners()},tick:function(t,e){var n=this.data,i=this.el,r=this.velocity;(r[n.adAxis]||r[n.wsAxis]||!function(t){var e;for(e in t)return!1;return!0}(this.keys))&&(this.updateVelocity(e/=1e3),(r[n.adAxis]||r[n.wsAxis])&&i.object3D.position.add(this.getMovementVector(e)))},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(t){var e,n,i,r,o,s=this.data,a=this.keys,l=this.velocity;if(n=s.adAxis,r=s.wsAxis,t>.2)return l[n]=0,void(l[r]=0);var c=Math.pow(1/this.easing,60*t);0!==l[n]&&(l[n]=l[n]*c),0!==l[r]&&(l[r]=l[r]*c),Math.abs(l[n])<1e-5&&(l[n]=0),Math.abs(l[r])<1e-5&&(l[r]=0),s.enabled&&(e=s.acceleration,s.adEnabled&&(i=s.adInverted?-1:1,(a.KeyA||a.ArrowLeft)&&(l[n]-=i*e*t),(a.KeyD||a.ArrowRight)&&(l[n]+=i*e*t)),s.wsEnabled&&(o=s.wsInverted?-1:1,(a.KeyW||a.ArrowUp)&&(l[r]-=o*e*t),(a.KeyS||a.ArrowDown)&&(l[r]+=o*e*t)))},getMovementVector:(i=new a.Vector3(0,0,0),r=new a.Euler(0,0,0,"YXZ"),function(t){var e=this.el.getAttribute("rotation");return i.copy(this.velocity),i.multiplyScalar(t),e?(r.set(a.Math.degToRad(this.data.fly?e.x:0),a.Math.degToRad(e.y),0),i.applyEuler(r),i):i}),attachVisibilityEventListeners:function(){window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(t){var e;u(t)&&-1!==h.indexOf(e=t.code||o[t.keyCode])&&(this.keys[e]=!0)},onKeyUp:function(t){delete this.keys[t.code||o[t.keyCode]]}})},{"../constants":122,"../core/component":130,"../lib/three":178,"../utils/":204}],121:[function(t,e,n){var i,r=t("../core/component").registerComponent,o=t("../utils/bind"),s=t("../utils/tracked-controls"),a=s.checkControllerPresentAndSetup,l=s.emitIfAxesChanged,c=s.onButtonEvent,u=t("../utils/"),h=u.debug("components:windows-motion-controls:debug"),d=u.debug("components:windows-motion-controls:warn"),p=t("../constants").DEFAULT_HANDEDNESS,f={left:"left.glb",right:"right.glb",default:"universal.glb"},m=t("../utils/").device.isWebXRAvailable,g=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/,v=m?"windows-mixed-reality":"Spatial Controller (Spatial Interaction Source) ";e.exports.Component=r("windows-motion-controls",{schema:{hand:{default:p},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},mapping:m?{axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"}:{axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},bindMethods:function(){this.onModelError=o(this.onModelError,this),this.onModelLoaded=o(this.onModelLoaded,this),this.onControllersUpdate=o(this.onControllersUpdate,this),this.checkIfControllerPresent=o(this.checkIfControllerPresent,this),this.onAxisMoved=o(this.onAxisMoved,this)},init:function(){var t=this,e=this.el;this.onButtonChanged=o(this.onButtonChanged,this),this.onButtonDown=function(e){c(e.detail.id,"down",t)},this.onButtonUp=function(e){c(e.detail.id,"up",t)},this.onButtonTouchStart=function(e){c(e.detail.id,"touchstart",t)},this.onButtonTouchEnd=function(e){c(e.detail.id,"touchend",t)},this.onControllerConnected=function(){t.setModelVisibility(!0)},this.onControllerDisconnected=function(){t.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},e.addEventListener("controllerconnected",this.onControllerConnected),e.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var t=this.el;t.addEventListener("buttonchanged",this.onButtonChanged),t.addEventListener("buttondown",this.onButtonDown),t.addEventListener("buttonup",this.onButtonUp),t.addEventListener("touchstart",this.onButtonTouchStart),t.addEventListener("touchend",this.onButtonTouchEnd),t.addEventListener("axismove",this.onAxisMoved),t.addEventListener("model-error",this.onModelError),t.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var t=this.el;t.removeEventListener("buttonchanged",this.onButtonChanged),t.removeEventListener("buttondown",this.onButtonDown),t.removeEventListener("buttonup",this.onButtonUp),t.removeEventListener("touchstart",this.onButtonTouchStart),t.removeEventListener("touchend",this.onButtonTouchEnd),t.removeEventListener("axismove",this.onAxisMoved),t.removeEventListener("model-error",this.onModelError),t.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){a(this,v,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(this.data.model&&!this.rayOrigin.createdFromMesh){var t=this.createControllerModelUrl();this.loadModel(t)}else this.modelReady()},createControllerModelUrl:function(t){var e=this.el.components["tracked-controls"],n=e?e.controller:null,i="default",r=this.data.hand;if(n&&!window.hasNativeWebXRImplementation&&(r=n.hand,!t)){var o=n.id.match(g);i=o&&o[0]||i}return"https://cdn.aframe.io/controllers/microsoft/"+i+"/"+(f[r]||f.default)},injectTrackedControls:function(){var t=this.data;this.el.setAttribute("tracked-controls",{idPrefix:v,controller:t.pair,hand:t.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(t){var e=this.createControllerModelUrl(!0);t.detail.src!==e?(d("Failed to load controller model for device, attempting to load default."),this.loadModel(e)):d("Failed to load default controller model.")},loadModel:function(t){this.el.setAttribute("gltf-model","url("+t+")")},onModelLoaded:function(t){var e,n,i,r,o=this.controllerModel=t.detail.model,s=this.loadedMeshInfo;if(h("Processing model"),s.buttonMeshes={},s.axisMeshes={},o){for(e=0;e<this.mapping.buttons.length;e++)(n=this.mapping.buttonMeshNames[this.mapping.buttons[e]])?(i=o.getObjectByName(n))?(r={index:e,value:a(i,"VALUE"),pressed:a(i,"PRESSED"),unpressed:a(i,"UNPRESSED")}).value&&r.pressed&&r.unpressed?s.buttonMeshes[this.mapping.buttons[e]]=r:d("Missing button submesh under mesh with name: "+n+"(VALUE: "+!!r.value+", PRESSED: "+!!r.pressed+", UNPRESSED:"+!!r.unpressed+")"):d("Missing button mesh with name: "+n):h("Skipping unknown button at index: "+e+" with mapped name: "+this.mapping.buttons[e]);for(e=0;e<this.mapping.axisMeshNames.length;e++)(n=this.mapping.axisMeshNames[e])?(i=o.getObjectByName(n))?(r={index:e,value:a(i,"VALUE"),min:a(i,"MIN"),max:a(i,"MAX")}).value&&r.min&&r.max?s.axisMeshes[e]=r:d("Missing axis submesh under mesh with name: "+n+"(VALUE: "+!!r.value+", MIN: "+!!r.min+", MAX:"+!!r.max+")"):d("Missing axis mesh with name: "+n):h("Skipping unknown axis at index: "+e);this.calculateRayOriginFromMesh(o),this.setModelVisibility()}function a(t,e){for(var n=0,i=t.children.length;n<i;n++){var r=t.children[n];if(r&&r.name===e)return r}}h("Model load complete.")},calculateRayOriginFromMesh:(i=new THREE.Quaternion,function(t){var e;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,e=t.getObjectByName(this.mapping.pointingPoseMeshName)){var n=t.parent;n&&(t.parent=null,t.updateMatrixWorld(!0),t.parent=n),e.getWorldPosition(this.rayOrigin.origin),e.getWorldQuaternion(i),this.rayOrigin.direction.applyQuaternion(i),n&&t.updateMatrixWorld(!0)}else h("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}),lerpAxisTransform:function(){var t=new THREE.Quaternion;return function(e,n){var i=this.loadedMeshInfo.axisMeshes[e];if(i){var r=i.min,o=i.max,s=i.value,a=.5*n+.5;s.setRotationFromQuaternion(t.copy(r.quaternion).slerp(o.quaternion,a)),s.position.lerpVectors(r.position,o.position,a)}}}(),lerpButtonTransform:function(){var t=new THREE.Quaternion;return function(e,n){var i=this.loadedMeshInfo.buttonMeshes[e];if(i){var r=i.unpressed,o=i.pressed,s=i.value;s.setRotationFromQuaternion(t.copy(r.quaternion).slerp(o.quaternion,n)),s.position.lerpVectors(r.position,o.position,n)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(t){var e=this.mapping.buttons[t.detail.id];e&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(e,t.detail.state.value),this.el.emit(e+"changed",t.detail.state))},onAxisMoved:function(t){var e=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var n=0;n<e;n++)this.lerpAxisTransform(n,t.detail.axis[n]||0);l(this,this.mapping.axes,t)},setModelVisibility:function(t){var e=this.el.getObject3D("mesh");this.modelVisible=t=void 0!==t?t:this.modelVisible,e&&(e.visible=t)}})},{"../constants":122,"../core/component":130,"../utils/":204,"../utils/bind":198,"../utils/tracked-controls":213}],122:[function(t,e,n){e.exports={AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",keyboardevent:t("./keyboardevent")}},{"./keyboardevent":123}],123:[function(t,e,n){e.exports={KEYCODE_TO_CODE:{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}}},{}],124:[function(t,e,n){var i=t("./a-node"),r=t("../utils/bind"),o=t("../utils/debug"),s=t("./a-register-element").registerElement,a=t("../lib/three"),l=new a.FileLoader,c=o("core:a-assets:warn");function u(t){if(t.hasAttribute("autoplay")||"auto"===t.getAttribute("preload"))return new Promise((function(e,n){if(4===t.readyState)return e();if(t.error)return n();function i(){for(var n=0,i=0;i<t.buffered.length;i++)n+=t.buffered.end(i)-t.buffered.start(i);n>=t.duration&&("VIDEO"===t.tagName&&(a.Cache.files[t.getAttribute("src")]=t),e())}t.addEventListener("loadeddata",i,!1),t.addEventListener("progress",i,!1),t.addEventListener("error",n,!1)}))}function h(t){var e=function(t){var e,n,i;if(t.hasAttribute("crossorigin"))return t;if(null!==(e=t.getAttribute("src"))){if(-1===e.indexOf("://"))return t;if((i=(n=e).indexOf("://")>-1?n.split("/")[2]:n.split("/")[0]).substring(0,i.indexOf(":"))===window.location.host)return t}return c('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',e),t.crossOrigin="anonymous",t.cloneNode(!0)}(t);return e.tagName&&"video"===e.tagName.toLowerCase()&&(e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline","")),e!==t&&(t.parentNode.appendChild(e),t.parentNode.removeChild(t)),e}function d(t){var e=p(t),n=e.lastIndexOf(".");return n>=0&&".glb"===e.slice(n,t.search(/\?|#|$/))?"arraybuffer":"text"}function p(t){var e=document.createElement("a");e.href=t;var n=e.search.replace(/^\?/,""),i=t.replace(n,"").replace("?","");return i.substring(i.lastIndexOf("/")+1)}e.exports=s("a-assets",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.isAssets=!0,this.fileLoader=l,this.timeout=null}},attachedCallback:{value:function(){var t,e,n,i,o,s,l=this,d=[];if(!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(o=this.querySelectorAll("img"),t=0;t<o.length;t++)i=h(o[t]),d.push(new Promise((function(e,n){a.Cache.files[o[t].getAttribute("src")]=i,i.onload=e,i.onerror=n})));for(n=this.querySelectorAll("audio, video"),t=0;t<n.length;t++)(e=h(n[t])).src||e.srcObject||c("Audio/video asset has neither `src` nor `srcObject` attributes."),d.push(u(e));Promise.all(d).then(r(this.load,this)),s=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout((function(){l.hasLoaded||(c("Asset loading timed out in ",s,"ms"),l.emit("timeout"),l.load())}),s)}},detachedCallback:{value:function(){this.timeout&&clearTimeout(this.timeout)}},load:{value:function(){i.prototype.load.call(this,null,(function(t){return t.isAssetItem&&t.hasAttribute("src")}))}}})}),s("a-asset-item",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.data=null,this.isAssetItem=!0}},attachedCallback:{value:function(){var t=this,e=this.getAttribute("src");l.setResponseType(this.getAttribute("response-type")||d(e)),l.load(e,(function(e){t.data=e,setTimeout((function(){i.prototype.load.call(t)}))}),(function(e){t.emit("progress",{loadedBytes:e.loaded,totalBytes:e.total,xhr:e})}),(function(e){t.emit("error",{xhr:e})}))}}})}),e.exports.inferResponseType=d,e.exports.getFileNameFromURL=p},{"../lib/three":178,"../utils/bind":198,"../utils/debug":200,"./a-node":128,"./a-register-element":129}],125:[function(t,e,n){var i=t("../utils/debug"),r=t("./a-register-element").registerElement,o=i("core:cubemap:warn");e.exports=r("a-cubemap",{prototype:Object.create(window.HTMLElement.prototype,{attachedCallback:{value:function(){this.srcs=this.validate()},writable:window.debug},validate:{value:function(){var t,e=this.querySelectorAll("[src]"),n=[];if(6===e.length){for(t=0;t<e.length;t++)n.push(e[t].getAttribute("src"));return n}o("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")},writable:window.debug}})})},{"../utils/debug":200,"./a-register-element":129}],126:[function(t,e,n){var i,r,o,s=t("./a-node"),a=t("./component").components,l=t("./a-register-element").registerElement,c=t("../lib/three"),u=t("../utils/"),h=u.debug("core:a-entity:debug"),d=u.debug("core:a-entity:warn"),p=["position","rotation","scale","visible"],f={once:!0},m=Object.create(s.prototype,{createdCallback:{value:function(){this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new c.Group,this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}},attributeChangedCallback:{value:function(t,e,n){var i=this.components[t];i&&i.justInitialized&&""===n?delete i.justInitialized:(i||null!==n)&&this.setEntityAttribute(t,e,n)}},attachedCallback:{value:function(){var t,e=this.sceneEl,n=this;this.addToParent(),this.isScene||(e?!(t=e.querySelector("a-assets"))||t.hasLoaded?this.load():t.addEventListener("loaded",(function(){n.load()})):this.load())}},detachedCallback:{value:function(){var t;if(this.parentEl){for(t in this.components)this.removeComponent(t,!1);this.isScene||(this.removeFromParent(),s.prototype.detachedCallback.call(this),this.object3D.el=null)}}},getObject3D:{value:function(t){return this.object3DMap[t]}},setObject3D:{value:function(t,e){var n,i=this;if(!(e instanceof c.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");(n=this.getObject3D(t))&&this.object3D.remove(n),e.el=this,e.children.length&&e.traverse((function(t){t.el=i})),this.object3D.add(e),this.object3DMap[t]=e,this.emit("object3dset",{object:e,type:t})}},removeObject3D:{value:function(t){var e=this.getObject3D(t);e?(this.object3D.remove(e),delete this.object3DMap[t],this.emit("object3dremove",{type:t})):d("Tried to remove `Object3D` of type:",t,"which was not defined.")}},getOrCreateObject3D:{value:function(t,e){var n=this.getObject3D(t);return!n&&e&&(n=new e,this.setObject3D(t,n)),d("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),n}},add:{value:function(t){if(!t.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(t.object3D),this.emit("child-attached",{el:t})}},addToParent:{value:function(){var t=this.parentEl=this.parentNode;t&&t.add&&!this.attachedToParent&&(t.add(this),this.attachedToParent=!0)}},removeFromParent:{value:function(){var t=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,t.emit("child-detached",{el:this})}},load:{value:function(){var t=this;!this.hasLoaded&&this.parentEl&&s.prototype.load.call(this,(function(){t.parentEl&&(t.updateComponents(),(t.isScene||t.parentEl.isPlaying)&&t.play())}))},writable:window.debug},remove:{value:function(t){t?this.object3D.remove(t.object3D):this.parentNode.removeChild(this)}},getChildEntities:{value:function(){for(var t=this.children,e=[],n=0;n<t.length;n++){var r=t[n];r instanceof i&&e.push(r)}return e}},initComponent:{value:function(t,e,n){var i,r,o,s;if(s=(o=u.split(t,"__"))[0],r=o.length>2?o.slice(1).join("__"):o[1],a[s]&&(g(this,t)||void 0!==e||n)&&!(t in this.components)){if(this.initComponentDependencies(s),r&&!a[s].multiple)throw new Error("Trying to initialize multiple components of type `"+s+"`. There can only be one component of this type per entity.");i=new a[s].Component(this,e,r),this.isPlaying&&i.play(),this.hasAttribute(t)||(i.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,t,"")),h("Component initialized: %s",t)}},writable:window.debug},initComponentDependencies:{value:function(t){var e,n;if(a[t]&&(e=a[t].dependencies))for(n=0;n<e.length;n++)this.initComponent(e[n],window.HTMLElement.prototype.getAttribute.call(this,e[n])||void 0,!0)}},removeComponent:{value:function(t,e){var n;(n=this.components[t])&&(n.initialized?(n.pause(),n.remove(),e&&(n.destroy(),delete this.components[t]),this.emit("componentremoved",n.evtDetail,!1)):this.addEventListener("componentinitialized",(function n(i){i.detail.name===t&&(this.removeComponent(t,e),this.removeEventListener("componentinitialized",n))})))},writable:window.debug},updateComponents:{value:function(){var t,e,n,i,r,o,s=this.componentsToUpdate;if(this.hasLoaded){for(n=0;n<this.mixinEls.length;n++)for(i in this.mixinEls[n].componentCache)v(i)&&(s[i]=!0);if(this.getExtraComponents)for(i in e=this.getExtraComponents())v(i)&&(s[i]=!0);for(n=0;n<this.attributes.length;++n)-1===p.indexOf(i=this.attributes[n].name)&&v(i)&&(s[i]=!0);for(n=0;n<p.length;n++)this.hasAttribute(i=p[n])&&this.updateComponent(i,this.getDOMAttribute(i));for(i in s)r=this.getDOMAttribute(i),t=(o=e&&e[i])?o.constructor===Object?u.extend(o,u.styleParser.parse(r||{})):r||o:r,this.updateComponent(i,t),delete s[i]}},writable:window.debug},updateComponent:{value:function(t,e,n){var i=this.components[t];if(i)return null!==e||g(this,t)?void i.updateProperties(e,n):void this.removeComponent(t,!0);this.initComponent(t,e,!1)}},removeAttribute:{value:function(t,e){var n=this.components[t];n&&void 0===e&&this.removeComponent(t,!0),n&&void 0!==e?n.resetProperty(e):("mixin"===t&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,t))}},play:{value:function(){var t,e,n;if(!this.isPlaying&&this.hasLoaded){for(n in this.isPlaying=!0,this.components)this.components[n].play();for(t=this.getChildEntities(),e=0;e<t.length;e++)t[e].play();this.emit("play")}},writable:!0},pause:{value:function(){var t,e,n;if(this.isPlaying){for(n in this.isPlaying=!1,this.components)this.components[n].pause();for(t=this.getChildEntities(),e=0;e<t.length;e++)t[e].pause();this.emit("pause")}},writable:!0},setEntityAttribute:{value:function(t,e,n){if(a[t]||this.components[t])this.updateComponent(t,n);else if("mixin"===t){if(n===this.computedMixinStr)return;this.mixinUpdate(n,e)}}},mixinUpdate:{value:(o=[],function(t,e){var n,i,r,s,a=this;if(this.hasLoaded){for(e=e||this.getAttribute("mixin"),r=this.updateMixins(t,e),o.length=0,s=0;s<this.mixinEls.length;s++)for(n in this.mixinEls[s].componentCache)-1===o.indexOf(n)&&(this.components[n]?this.components[n].handleMixinUpdate():this.initComponent(n,null),o.push(n));for(s=0;s<r.oldMixinIds.length;s++)if(i=document.getElementById(r.oldMixinIds[s]))for(n in i.componentCache)-1===o.indexOf(n)&&this.components[n]&&(this.getDOMAttribute(n)?this.components[n].handleMixinUpdate():this.removeComponent(n,!0))}else this.addEventListener("loaded",(function(){a.mixinUpdate(t,e)}),f)})},setAttribute:{value:(r={},function(t,e,n){var i,o,l,c,h;if(l=(c=t.indexOf("__"))>0?t.substring(0,c):t,!a[l])return"mixin"===t&&this.mixinUpdate(e),void s.prototype.setAttribute.call(this,t,e);if(!this.components[t]&&this.hasAttribute(t)&&this.updateComponent(t,window.HTMLElement.prototype.getAttribute.call(this,t)),void 0!==n&&"string"==typeof e&&e.length>0&&"string"==typeof u.styleParser.parse(e)){for(h in r)delete r[h];(i=r)[e]=n,o=!1}else i=e,o=!0===n;this.updateComponent(t,i,o),this.sceneEl&&this.sceneEl.getAttribute("debug")&&this.components[t].flushToDOM()}),writable:window.debug},flushToDOM:{value:function(t){var e,n,i,r=this.components,o=this.children;for(i in r)r[i].flushToDOM();if(t)for(n=0;n<o.length;++n)(e=o[n]).flushToDOM&&e.flushToDOM(t)}},getAttribute:{value:function(t){var e,n,i,r;return"position"===t?this.object3D.position:"rotation"===t?((r=this.rotationObj).x=(n=c.Math.radToDeg)((i=this.object3D.rotation).x),r.y=n(i.y),r.z=n(i.z),r):"scale"===t?this.object3D.scale:"visible"===t?this.object3D.visible:(e=this.components[t])?e.data:window.HTMLElement.prototype.getAttribute.call(this,t)},writable:window.debug},getDOMAttribute:{value:function(t){var e=this.components[t];return e?e.attrValue:window.HTMLElement.prototype.getAttribute.call(this,t)},writable:window.debug},addState:{value:function(t){this.is(t)||(this.states.push(t),this.emit("stateadded",t))}},removeState:{value:function(t){var e=this.states.indexOf(t);-1!==e&&(this.states.splice(e,1),this.emit("stateremoved",t))}},is:{value:function(t){return-1!==this.states.indexOf(t)}},inspect:{value:function(){this.sceneEl.components.inspector.openInspector(this)}},destroy:{value:function(){var t;if(this.parentNode)d("Entity can only be destroyed if detached from scenegraph.");else for(t in this.components)this.components[t].destroy()}}});function g(t,e){return!(!t.components[e]||!t.components[e].attrValue)||function(t,e){var n,i=!1;for(n=0;n<e.length&&!(i=e[n].hasAttribute(t));++n);return i}(e,t.mixinEls)}function v(t){return-1!==t.indexOf("__")&&(t=u.split(t,"__")[0]),!!a[t]}i=l("a-entity",{prototype:m}),e.exports=i},{"../lib/three":178,"../utils/":204,"./a-node":128,"./a-register-element":129,"./component":130}],127:[function(t,e,n){var i=t("./a-node"),r=t("./a-register-element").registerElement,o=t("./component").components,s=t("../utils");e.exports=r("a-mixin",{prototype:Object.create(i.prototype,{createdCallback:{value:function(){this.componentCache={},this.id=this.getAttribute("id"),this.isMixin=!0}},attributeChangedCallback:{value:function(t,e,n){this.cacheAttribute(t,n),this.updateEntities()}},attachedCallback:{value:function(){this.sceneEl=this.closestScene(),this.cacheAttributes(),this.updateEntities(),this.load()}},setAttribute:{value:function(t,e){window.HTMLElement.prototype.setAttribute.call(this,t,e),this.cacheAttribute(t,e)}},cacheAttribute:{value:function(t,e){var n,i;i=s.split(t,"__")[0],(n=o[i])&&(void 0===e&&(e=window.HTMLElement.prototype.getAttribute.call(this,t)),this.componentCache[t]=n.parseAttrValueForCache(e))}},getAttribute:{value:function(t){return this.componentCache[t]||window.HTMLElement.prototype.getAttribute.call(this,t)}},cacheAttributes:{value:function(){var t,e=this.attributes;for(t=0;t<e.length;t++)this.cacheAttribute(e[t].name)}},updateEntities:{value:function(){var t,e,n;if(this.sceneEl)for(e=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),n=0;n<e.length;n++)(t=e[n]).hasLoaded&&!t.isMixin&&t.mixinUpdate(this.id)}}})})},{"../utils":204,"./a-node":128,"./a-register-element":129,"./component":130}],128:[function(t,e,n){var i,r,o,s,a=t("./a-register-element").registerElement,l=t("./a-register-element").isNode,c=t("../utils/"),u=c.debug("core:a-node:warn"),h=c.debug("core:a-node:error");e.exports=a("a-node",{prototype:Object.create(window.HTMLElement.prototype,{createdCallback:{value:function(){this.computedMixinStr="",this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[]},writable:window.debug},attachedCallback:{value:function(){var t;this.sceneEl=this.closestScene(),this.sceneEl||u("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(t=this.getAttribute("mixin"))&&this.updateMixins(t)},writable:window.debug},attributeChangedCallback:{value:function(t,e,n){n!==this.computedMixinStr&&("mixin"!==t||this.isMixin||this.updateMixins(n,e))}},closestScene:{value:function(){for(var t=this;t&&!t.isScene;)t=t.parentElement;return t}},closest:{value:function(t){for(var e=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,n=this;n&&!e.call(n,t);)n=n.parentElement;return n}},detachedCallback:{value:function(){this.hasLoaded=!1}},load:{value:function(t,e){var n,i=this;this.hasLoaded||(e=e||l,n=this.getChildren().filter(e).map((function(t){return new Promise((function(e){if(t.hasLoaded)return e();t.addEventListener("loaded",e)}))})),Promise.all(n).then((function(){i.hasLoaded=!0,t&&t(),i.emit("loaded",void 0,!1)})).catch((function(t){h("Failure loading node: ",t)})))},writable:!0},getChildren:{value:function(){return Array.prototype.slice.call(this.children,0)}},updateMixins:{value:(r=[],o=[],s={},function(t,e){var n,i,a;for(r.length=0,o.length=0,i=t?c.split(t.trim(),/\s+/):r,a=e?c.split(e.trim(),/\s+/):o,s.newMixinIds=i,s.oldMixinIds=a,n=0;n<a.length;n++)-1===i.indexOf(a[n])&&this.unregisterMixin(a[n]);for(this.computedMixinStr="",this.mixinEls.length=0,n=0;n<i.length;n++)this.registerMixin(document.getElementById(i[n]));return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),s})},registerMixin:{value:function(t){var e,n,i;if(t){if(i=t.getAttribute("mixin"))for(e=c.split(i.trim(),/\s+/),n=0;n<e.length;n++)this.registerMixin(document.getElementById(e[n]));this.computedMixinStr=this.computedMixinStr+" "+t.id,this.mixinEls.push(t)}}},setAttribute:{value:function(t,e){"mixin"===t&&this.updateMixins(e),window.HTMLElement.prototype.setAttribute.call(this,t,e)}},unregisterMixin:{value:function(t){var e,n=this.mixinEls;for(e=0;e<n.length;++e)if(t===n[e].id){n.splice(e,1);break}}},emit:{value:(i={},function(t,e,n,r){void 0===n&&(n=!0),i.bubbles=!!n,i.detail=e,r&&(i=c.extend({},r,i)),this.dispatchEvent(new CustomEvent(t,i))}),writable:window.debug}})})},{"../utils/":204,"./a-register-element":129}],129:[function(t,e,n){var i,r;t("document-register-element");var o=e.exports.knownTags={};function s(t,e,n,i){e.forEach((function(e){!function(t,e,n,i){var r=n[e],o=i[e];r&&o&&r!==o&&(t[e]={value:function(){return o.apply(this,arguments),r.apply(this,arguments)},writable:window.debug})}(t,e,n,i)}))}function a(t,e){Object.getOwnPropertyNames(t).forEach((function(n){var i;e[n]||(i=Object.getOwnPropertyDescriptor(t,n),e[n]={value:t[n],writable:i.writable})}))}e.exports.isNode=function(t){return t.tagName.toLowerCase()in o||t.isNode},e.exports.registerElement=function(t,e){var n=Object.getPrototypeOf(e.prototype),l=e,c=i&&n===i.prototype,u=r&&n===r.prototype;return(c||u)&&function(t){o[t.toLowerCase()]=!0}(t),c&&(l=function(t){var e={};return s(e,["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"],t,i.prototype),a(t,e),e}(e.prototype),l={prototype:Object.create(n,l)}),u&&(l=function(t){var e={};return s(e,["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"],t,i.prototype),s(e,["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"],t,r.prototype),a(t,e),e}(e.prototype),l={prototype:Object.create(n,l)}),Object.getOwnPropertyNames(l.prototype).forEach((function(t){var e=l.prototype[t];"function"==typeof e&&(e.displayName=t)})),document.registerElement(t,l)},e.exports.wrapMethods=s,i=t("./a-node"),r=t("./a-entity")},{"./a-entity":126,"./a-node":128,"document-register-element":12}],130:[function(t,e,n){var i=t("./schema"),r=t("./scene/scenes"),o=t("./system"),s=t("../utils/"),a=e.exports.components={},l=i.parseProperties,c=i.parseProperty,u=i.process,h=i.isSingleProperty,d=i.stringifyProperties,p=i.stringifyProperty,f=s.styleParser,m=s.debug("core:component:warn"),g=document.currentScript,v=new RegExp("[A-Z]+"),y={},b=e.exports.Component=function(t,e,n){var i=this;this.el=t,this.id=n,this.attrName=this.name+(n?"__"+n:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.isSingleProperty=h(this.schema),this.isSinglePropertyObject=this.isSingleProperty&&C(c(void 0,this.schema))&&!(this.schema.default instanceof window.HTMLElement),this.isObjectBased=!this.isSingleProperty||this.isSinglePropertyObject,this.el.components[this.attrName]=this,this.objectPool=y[this.name];const r=this.events;this.events={},function(t,e){var n;for(n in e)t.events[n]=e[n].bind(t)}(this,r),this.attrValue=void 0,this.isObjectBased?(this.nextData=this.objectPool.use(),s.objectPool.removeUnusedKeys(this.nextData,this.schema),this.oldData=this.objectPool.use(),s.objectPool.removeUnusedKeys(this.oldData,this.schema),this.previousOldData=this.objectPool.use(),s.objectPool.removeUnusedKeys(this.previousOldData,this.schema),this.parsingAttrValue=this.objectPool.use(),s.objectPool.removeUnusedKeys(this.parsingAttrValue,this.schema)):(this.nextData=void 0,this.oldData=void 0,this.previousOldData=void 0,this.parsingAttrValue=void 0),this.throttledEmitComponentChanged=s.throttle((function(){t.emit("componentchanged",i.evtDetail,!1)}),200),this.updateProperties(e)};if(b.prototype={schema:{},init:function(){},events:{},update:function(t){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},parse:function(t,e){var n=this.schema;return this.isSingleProperty?c(t,n):l(f.parse(t),n,!0,this.name,e)},stringify:function(t){var e=this.schema;return"string"==typeof t?t:this.isSingleProperty?p(t,e):(t=d(t,e),f.stringify(t))},updateCachedAttrValue:function(t,e){var n,i,r;if(void 0!==t){if(null===t)return this.isObjectBased&&this.attrValue&&this.objectPool.recycle(this.attrValue),void(this.attrValue=void 0);if(t instanceof Object&&!(t instanceof window.HTMLElement)?(i=this.objectPool.use(),n=s.extend(i,t)):n=this.parseAttrValueForCache(t),this.isObjectBased&&!e&&this.attrValue)for(r in this.attrValue)void 0===n[r]&&(n[r]=this.attrValue[r]);this.isObjectBased&&!this.attrValue&&(this.attrValue=this.objectPool.use()),s.objectPool.clearObject(this.attrValue),this.attrValue=A(this.attrValue,n,this.isObjectBased),s.objectPool.clearObject(i)}},parseAttrValueForCache:function(t){var e;return"string"!=typeof t?t:(this.isSingleProperty?"string"==typeof(e=this.schema.parse(t))&&(e=t):(s.objectPool.clearObject(this.parsingAttrValue),e=f.parse(t,this.parsingAttrValue)),e)},flushToDOM:function(t){var e=t?this.data:this.attrValue;null!=e&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(e))},updateProperties:function(t,e){this.el.hasLoaded?(null!==t&&(t=this.parseAttrValueForCache(t)),this.updateCachedAttrValue(t,e),this.initialized?(this.updateComponent(t,e),this.callUpdateHandler()):this.initComponent()):this.updateCachedAttrValue(t)},initComponent:function(){var t,e=this.el;this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!1,!0)),this.data=this.buildData(this.attrValue),e.initializingComponents[this.name]||(e.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete e.initializingComponents[this.name],this.oldData=A(this.oldData,this.data,this.isObjectBased),t=this.isObjectBased?this.objectPool.use():void 0,this.update(t),this.isObjectBased&&this.objectPool.recycle(t),e.isPlaying&&this.play(),e.emit("componentinitialized",this.evtDetail,!1))},updateComponent:function(t,e){var n,i;if(e)return this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),void(this.data=this.buildData(this.attrValue,!0,!1));if(this.isSingleProperty)return this.isObjectBased&&c(t,this.schema),void(this.data=t);if(l(t,this.schema,!0,this.name),this.schemaChangeKeys.length)for(n in t)if(this.schema[n].schemaChange){i=!0;break}if(i)return this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),void(this.data=this.buildData(this.attrValue,!0,!1));for(n in t)void 0!==t[n]&&(this.data[n]=t[n])},callUpdateHandler:function(){var t;this.previousOldData instanceof Object&&s.objectPool.clearObject(this.previousOldData),this.isObjectBased?w(this.previousOldData,this.oldData):this.previousOldData=this.oldData,t=!s.deepEqual(this.oldData,this.data),(this.isPositionRotationScale||t)&&(this.oldData instanceof Object&&s.objectPool.clearObject(this.oldData),this.oldData=A(this.oldData,this.data,this.isObjectBased),this.update(this.previousOldData),this.throttledEmitComponentChanged())},handleMixinUpdate:function(){this.data=this.buildData(this.attrValue),this.callUpdateHandler()},resetProperty:function(t){if(this.isObjectBased){if(!(t in this.attrValue))return;delete this.attrValue[t],this.data[t]=this.schema[t].default}else this.attrValue=this.schema.default,this.data=this.schema.default;this.updateProperties(this.attrValue)},extendSchema:function(t){var e;e=s.extend({},a[this.name].schema),s.extend(e,t),this.schema=u(e),this.el.emit("schemachanged",this.evtDetail)},buildData:function(t,e,n){var i,r,o,a,u,h,d,p=this.nextData,f=this.schema,m=this.el.mixinEls;if(i=t&&t.constructor===Array?t.length:null!=t,this.isObjectBased&&s.objectPool.clearObject(p),this.isSingleProperty)r=this.isObjectBased?w(p,f.default):E(f.default)?s.clone(f.default):f.default;else for(a in r=(d=!e&&this.attrValue)instanceof Object?w(p,d):p,f)o=f[a].default,void 0===r[a]&&(r[a]=E(o)?s.clone(o):o);for(h=0;h<m.length;h++)(u=m[h].getAttribute(this.attrName))&&(r=A(r,u,this.isObjectBased));if(i){if(this.isSingleProperty)return C(t)?(w(this.parsingAttrValue,t),c(this.parsingAttrValue,f)):c(t,f);r=A(r,t,this.isObjectBased)}else if(this.isSingleProperty)return c(r,f);return l(r,f,void 0,this.name,n)},eventsAttach:function(){var t;for(t in this.eventsDetach(),this.events)this.el.addEventListener(t,this.events[t])},eventsDetach:function(){var t;for(t in this.events)this.el.removeEventListener(t,this.events[t])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.oldData),this.objectPool.recycle(this.parsingAttrValue),this.attrValue=this.oldData=this.parsingAttrValue=void 0}},window.debug)var _=e.exports.registrationOrderWarnings={};function w(t,e){var n,i;for(i in e)void 0!==e[i]&&(t[i]=E(n=e[i])?s.clone(n):n);return t}function A(t,e,n){var i;if(n&&e.constructor===Object){for(i in e)void 0!==e[i]&&(t[i]=e[i]&&e[i].constructor===Object?s.clone(e[i]):e[i]);return t}return e}function x(t){return t.tick||t.tock}function C(t){return t&&t.constructor===Object&&!(t instanceof window.HTMLElement)}function E(t){return t&&(t.constructor===Object||t.constructor===Array)&&!(t instanceof window.HTMLElement)}e.exports.registerComponent=function(t,e){var n,i,l,c,d,p,f={};if(document.currentScript&&document.currentScript!==g&&r.forEach((function(e){e.hasLoaded||document.currentScript.compareDocumentPosition(e)!==Node.DOCUMENT_POSITION_FOLLOWING&&(m("The component `"+t+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(_[t]=!0))})),!0===v.test(t)&&m("The component name `"+t+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+t.toLowerCase()+"`"),-1!==t.indexOf("__"))throw new Error("The component name `"+t+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(e).forEach((function(t){f[t]={value:e[t],writable:!0}})),a[t])throw new Error("The component `"+t+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");if(((n=function(t,e,n){b.call(this,t,e,n)}).prototype=Object.create(b.prototype,f)).name=t,n.prototype.isPositionRotationScale="position"===t||"rotation"===t||"scale"===t,n.prototype.constructor=n,n.prototype.system=o&&o.systems[t],n.prototype.play=(d=n.prototype.play,function(){var t=this.el.sceneEl;this.initialized&&this.el.isPlaying&&!this.isPlaying&&(d.call(this),this.isPlaying=!0,this.eventsAttach(),x(this)&&t.addBehavior(this))}),n.prototype.pause=(p=n.prototype.pause,function(){var t=this.el.sceneEl;this.isPlaying&&(p.call(this),this.isPlaying=!1,this.eventsDetach(),x(this)&&t.removeBehavior(this))}),l=s.extend(u(n.prototype.schema,n.prototype.name)),!(c=h(n.prototype.schema)))for(i in n.prototype.schemaChangeKeys=[],l)l[i].schemaChange&&n.prototype.schemaChangeKeys.push(i);return y[t]=s.objectPool.createPool(),a[t]={Component:n,dependencies:n.prototype.dependencies,isSingleProp:c,multiple:n.prototype.multiple,name:t,parse:n.prototype.parse,parseAttrValueForCache:n.prototype.parseAttrValueForCache,schema:l,stringify:n.prototype.stringify,type:n.prototype.type},n}},{"../utils/":204,"./scene/scenes":137,"./schema":139,"./system":141}],131:[function(t,e,n){var i=t("./schema").process,r=e.exports.geometries={},o=e.exports.geometryNames=[],s=t("../lib/three"),a=e.exports.Geometry=function(){};a.prototype={schema:{},init:function(t){return this.geometry=new s.Geometry,this.geometry},update:function(t){}},e.exports.registerGeometry=function(t,e){var n,s={};if(Object.keys(e).forEach((function(t){s[t]={value:e[t],writable:!0}})),r[t])throw new Error("The geometry `"+t+"` has been already registered");return((n=function(){a.call(this)}).prototype=Object.create(a.prototype,s)).name=t,n.prototype.constructor=n,r[t]={Geometry:n,schema:i(n.prototype.schema)},o.push(t),n}},{"../lib/three":178,"./schema":139}],132:[function(t,e,n){var i=t("../utils/coordinates"),r=t("debug"),o=r("core:propertyTypes:warn"),s=r("core:propertyTypes:warn"),a=e.exports.propertyTypes={},l=/[,> .[\]:]/,c=/\url\((.+)\)/;function u(t,e,n,i){"type"in a?o("Property type "+t+" is already registered."):a[t]={default:e,parse:n||d,stringify:i||p}}function h(t){var e,n;return"string"!=typeof t?t:(n=t.match(c))?n[1]:"#"===t.charAt(0)?(e=document.getElementById(t.substring(1)))?"CANVAS"===e.tagName||"VIDEO"===e.tagName||"IMG"===e.tagName?e:e.getAttribute("src"):void s('"'+t+'" asset not found.'):t}function d(t){return t}function p(t){return null===t?"null":t.toString()}function f(t){return parseInt(t,10)}function m(t){return i.parse(t,this.default)}function g(t,e){return!(null!==t&&("object"!=typeof t||Object.keys(t).length!==e||"number"!=typeof t.x||"number"!=typeof t.y||e>2&&"number"!=typeof t.z||e>3&&"number"!=typeof t.w))}u("audio","",h),u("array",[],(function(t){return Array.isArray(t)?t:t&&"string"==typeof t?t.split(",").map((function(t){return t.trim()})):[]}),(function(t){return t.join(", ")})),u("asset","",h),u("boolean",!1,(function(t){return"false"!==t&&!1!==t})),u("color","#FFF",d,p),u("int",0,f),u("number",0,(function(t){return parseFloat(t,10)})),u("map","",h),u("model","",h),u("selector",null,(function(t){return t?"string"!=typeof t?t:"#"!==t[0]||l.test(t)?document.querySelector(t):document.getElementById(t.substring(1)):null}),(function(t){return t.getAttribute?"#"+t.getAttribute("id"):p(t)})),u("selectorAll",null,(function(t){return t?"string"!=typeof t?t:Array.prototype.slice.call(document.querySelectorAll(t),0):null}),(function(t){return t instanceof Array?t.map((function(t){return"#"+t.getAttribute("id")})).join(", "):p(t)})),u("src","",(function(t){return s("`src` property type is deprecated. Use `asset` instead."),h(t)})),u("string","",d,p),u("time",0,f),u("vec2",{x:0,y:0},m,i.stringify),u("vec3",{x:0,y:0,z:0},m,i.stringify),u("vec4",{x:0,y:0,z:0,w:1},m,i.stringify),e.exports.registerPropertyType=u,e.exports.isValidDefaultValue=function(t,e){return("audio"!==t||"string"==typeof e)&&!("array"===t&&!Array.isArray(e))&&("asset"!==t||"string"==typeof e)&&("boolean"!==t||"boolean"==typeof e)&&("color"!==t||"string"==typeof e)&&("int"!==t||"number"==typeof e)&&("number"!==t||"number"==typeof e)&&("map"!==t||"string"==typeof e)&&("model"!==t||"string"==typeof e)&&("selector"!==t||"string"==typeof e||null===e)&&("selectorAll"!==t||"string"==typeof e||null===e)&&("src"!==t||"string"==typeof e)&&("string"!==t||"string"==typeof e)&&("time"!==t||"number"==typeof e)&&("vec2"===t?g(e,2):"vec3"===t?g(e,3):"vec4"!==t||g(e,4))},e.exports.isValidDefaultCoordinate=g},{"../utils/coordinates":199,debug:8}],133:[function(t,e,n){var i=t("./metaTags").inject,r=t("./wakelock"),o=t("./loadingScreen"),s=t("../a-register-element"),a=t("./scenes"),l=t("../system").systems,c=t("../../lib/three"),u=t("../../utils/"),h=t("../a-entity"),d=t("../a-node"),p=t("./postMessage"),f=u.bind,m=u.device.isIOS(),g=u.device.isMobile(),v=u.device.isWebXRAvailable,y=s.registerElement,b=u.debug("core:a-scene:warn");function _(t,e,n,i){return t.parentElement?e?{height:t.parentElement.offsetHeight,width:t.parentElement.offsetWidth}:function(t,e){var n,i,r=window.devicePixelRatio;return i={height:document.body.offsetHeight,width:document.body.offsetWidth},!t||e||-1===t.width&&-1===t.height||i.width*r<t.width&&i.height*r<t.height||(n=i.width/i.height,i.width*r>t.width&&-1!==t.width&&(i.width=Math.round(t.width/r),i.height=Math.round(t.width/n/r)),i.height*r>t.height&&-1!==t.height&&(i.height=Math.round(t.height/r),i.width=Math.round(t.height*n/r))),i}(n,i):{height:0,width:0}}function w(t){var e;function n(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||t.exitVR(),document.activeElement.blur(),document.body.focus()}(e=document.createElement("canvas")).classList.add("a-canvas"),e.dataset.aframeCanvas=!0,t.appendChild(e),document.addEventListener("fullscreenchange",n),document.addEventListener("mozfullscreenchange",n),document.addEventListener("webkitfullscreenchange",n),document.addEventListener("MSFullscreenChange",n),e.addEventListener("touchmove",(function(t){t.preventDefault()})),t.canvas=e,t.emit("render-target-loaded",{target:e}),setTimeout(f(t.resize,t),0)}m&&t("../../utils/ios-orientationchange-blank-bug"),e.exports.AScene=y("a-scene",{prototype:Object.create(h.prototype,{createdCallback:{value:function(){this.clock=new c.Clock,this.isIOS=m,this.isMobile=g,this.hasWebXR=v,this.isAR=!1,this.isScene=!0,this.object3D=new c.Scene;var t=this;this.object3D.onAfterRender=function(e,n,i){t.isPlaying&&t.tock(t.time,t.delta,i)},this.resize=f(this.resize,this),this.render=f(this.render,this),this.systems={},this.systemNames=[],this.time=this.delta=0,this.behaviors={tick:[],tock:[]},this.hasLoaded=!1,this.isPlaying=!1,this.originalHTML=this.innerHTML,this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("vr-mode-ui",""),this.setAttribute("device-orientation-permission-ui","")}},addFullScreenStyles:{value:function(){document.documentElement.classList.add("a-fullscreen")}},removeFullScreenStyles:{value:function(){document.documentElement.classList.remove("a-fullscreen")}},attachedCallback:{value:function(){var t=this,e=this.hasAttribute("embedded");w(this),this.setupRenderer(),o.setup(this,_),this.resize(),e||this.addFullScreenStyles(),p(this),i(this),r(this),this.onVRPresentChangeBound=f(this.onVRPresentChange,this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){t.enterVR()},this.exitVRBound=function(){t.exitVR()},this.exitVRTrueBound=function(){t.exitVR(!0)},this.pointerRestrictedBound=function(){t.pointerRestricted()},this.pointerUnrestrictedBound=function(){t.pointerUnrestricted()},v||(window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)),window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",(function(){t.attachedCallbackPostCamera()})),this.initSystems(),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",(function(){t.enterVR()}))}},attachedCallbackPostCamera:{value:function(){var t=this;window.addEventListener("load",void 0),window.addEventListener("resize",(function(){t.isIOS?setTimeout(t.resize,100):t.resize()})),this.play(),a.push(this)},writable:window.debug},initSystems:{value:function(){var t;for(t in this.initSystem("camera"),l)"camera"!==t&&this.initSystem(t)}},initSystem:{value:function(t){this.systems[t]||(this.systems[t]=new l[t](this),this.systemNames.push(t))}},detachedCallback:{value:function(){var t=a.indexOf(this);a.splice(t,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound),window.removeEventListener("sessionend",this.resize)}},addBehavior:{value:function(t){var e,n,i=this.behaviors;for(n in i)t[n]&&-1===(e=this.behaviors[n]).indexOf(t)&&e.push(t)}},getPointerLockElement:{value:function(){return document.pointerLockElement},writable:window.debug},checkHeadsetConnected:{value:u.device.checkHeadsetConnected,writable:window.debug},enterAR:{value:function(){var t;if(!this.hasWebXR)throw t="Failed to enter AR mode, WebXR not supported.",new Error(t);if(!u.device.checkARSupport())throw t="Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.",new Error(t);return this.enterVR(!0)}},enterVR:{value:function(t){var e,n,i=this,r=i.renderer.xr;if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){if(r.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound),r.setReferenceSpaceType(this.sceneEl.systems.webxr.sessionReferenceSpaceType);var o=t?"immersive-ar":"immersive-vr";return n=this.sceneEl.systems.webxr.sessionConfiguration,new Promise((function(e,s){navigator.xr.requestSession(o,n).then((function(o){i.xrSession=o,r.layersEnabled=-1!==n.requiredFeatures.indexOf("layers"),r.setSession(o),o.addEventListener("end",i.exitVRBound),i.addState(t?"ar-mode":"vr-mode"),a(e)}),(function(t){throw new Error("Failed to enter "+("immersive-ar"===o?"AR":"VR")+" mode (`requestSession`) "+t)}))}))}if(e=u.device.getVRDisplay(),i.addState("vr-mode"),r.setDevice(e),e.isPresenting&&!window.hasNativeWebVRImplementation)return a(),Promise.resolve();var s=this.getAttribute("renderer");return e.requestPresent([{source:this.canvas,attributes:{highRefreshRate:s.highRefreshRate,foveationLevel:s.foveationLevel}}]).then(a,(function(t){throw i.removeState("vr-mode"),t&&t.message?new Error("Failed to enter VR mode (`requestPresent`): "+t.message):new Error("Failed to enter VR mode (`requestPresent`).")}))}return a(),Promise.resolve();function a(t){var e,n;window.hasNativeWebVRImplementation&&!window.hasNativeWebXRImplementation&&(e=new CustomEvent("vrdisplaypresentchange",{detail:{display:u.device.getVRDisplay()}}),window.dispatchEvent(e)),i.emit("enter-vr",{target:i}),!v&&i.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),i.addFullScreenStyles(),i.isMobile||i.checkHeadsetConnected()||((n=i.canvas).requestFullscreen||n.webkitRequestFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen).apply(n,[{navigationUI:"hide"}]),i.renderer.setAnimationLoop(i.render),i.resize(),t&&t()}},writable:!0},exitVR:{value:function(){var t,e=this,n=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(n.enabled=!1,t=u.device.getVRDisplay(),this.hasWebXR)this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then((function(){}),(function(){})),this.xrSession=void 0,n.setSession(null);else if(t.isPresenting)return t.exitPresent().then(i,(function(t){throw t&&t.message?new Error("Failed to exit VR mode (`exitPresent`): "+t.message):new Error("Failed to exit VR mode (`exitPresent`).")}))}else(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen());return i(),Promise.resolve();function i(){e.removeState("vr-mode"),e.removeState("ar-mode"),e.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.hasAttribute("embedded")&&e.removeFullScreenStyles(),e.resize(),e.isIOS&&u.forceCanvasResizeSafariMobile(e.canvas),e.renderer.setPixelRatio(window.devicePixelRatio),e.emit("exit-vr",{target:e})}},writable:!0},pointerRestricted:{value:function(){if(this.canvas){var t=this.getPointerLockElement();t&&t!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}},pointerUnrestricted:{value:function(){var t=this.getPointerLockElement();t&&t===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}},onVRPresentChange:{value:function(t){var e=t.display||t.detail.display;e&&e.isPresenting?this.enterVR():this.exitVR()}},getAttribute:{value:function(t){var e=this.systems[t];return e?e.data:h.prototype.getAttribute.call(this,t)}},getComputedAttribute:{value:function(t){b("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(t)}},getDOMAttribute:{value:function(t){var e=this.systems[t];return e?e.data:h.prototype.getDOMAttribute.call(this,t)}},setAttribute:{value:function(t,e,n){var i=this.systems[t];if(i)return d.prototype.setAttribute.call(this,t,e),void i.updateProperties(e);h.prototype.setAttribute.call(this,t,e,n)}},removeBehavior:{value:function(t){var e,n,i,r=this.behaviors;for(n in r)t[n]&&-1!==(i=(e=this.behaviors[n]).indexOf(t))&&e.splice(i,1)}},resize:{value:function(){var t,e,n=this.camera,i=this.canvas;t=this.renderer.xr.enabled&&this.renderer.xr.isPresenting,!n||!i||this.is("vr-mode")&&(this.isMobile||t)||(e=_(i,this.getAttribute("embedded")&&!this.is("vr-mode"),this.maxCanvasSize,this.is("vr-mode")),n.aspect=e.width/e.height,n.updateProjectionMatrix(),this.renderer.setSize(e.width,e.height,!1),this.emit("rendererresize",null,!1))},writable:!0},setupRenderer:{value:function(){var t,e,n,i,r=this;i={alpha:!0,antialias:!g,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:1920,width:1920},this.hasAttribute("renderer")&&(n=this.getAttribute("renderer"),(e=u.styleParser.parse(n)).precision&&(i.precision=e.precision+"p"),e.antialias&&"auto"!==e.antialias&&(i.antialias="true"===e.antialias),e.logarithmicDepthBuffer&&"auto"!==e.logarithmicDepthBuffer&&(i.logarithmicDepthBuffer="true"===e.logarithmicDepthBuffer),e.alpha&&(i.alpha="true"===e.alpha),this.maxCanvasSize={width:e.maxCanvasWidth?parseInt(e.maxCanvasWidth):this.maxCanvasSize.width,height:e.maxCanvasHeight?parseInt(e.maxCanvasHeight):this.maxCanvasSize.height}),(t=this.renderer=new c.WebGLRenderer(i)).setPixelRatio(window.devicePixelRatio),t.sortObjects=!1,this.camera&&t.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",(function(){t.xr.setPoseTarget(r.camera.el.object3D)}))},writable:window.debug},play:{value:function(){var t=this,e=this;this.renderStarted?h.prototype.play.call(this):(this.addEventListener("loaded",(function(){var t,n=this.renderer,i=this.renderer.xr;h.prototype.play.call(this),e.renderStarted||(e.resize(),e.renderer&&(window.performance&&window.performance.mark("render-started"),o.remove(),(t=u.device.getVRDisplay())&&t.isPresenting&&(i.setDevice(t),i.enabled=!0,e.enterVR()),n.setAnimationLoop(this.render),e.renderStarted=!0,e.emit("renderstart")))})),setTimeout((function(){h.prototype.load.call(t)})))}},updateComponent:{value:function(t){t in l||h.prototype.updateComponent.apply(this,arguments)}},tick:{value:function(t,e){var n,i=this.systems;for(n=0;n<this.behaviors.tick.length;n++)this.behaviors.tick[n].el.isPlaying&&this.behaviors.tick[n].tick(t,e);for(n=0;n<this.systemNames.length;n++)i[this.systemNames[n]].tick&&i[this.systemNames[n]].tick(t,e)}},tock:{value:function(t,e,n){var i,r=this.systems;for(i=0;i<this.behaviors.tock.length;i++)this.behaviors.tock[i].el.isPlaying&&this.behaviors.tock[i].tock(t,e,n);for(i=0;i<this.systemNames.length;i++)r[this.systemNames[i]].tock&&r[this.systemNames[i]].tock(t,e,n)}},render:{value:function(t,e){var n=this.renderer;this.frame=e,this.delta=1e3*this.clock.getDelta(),this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,this.delta);var i=null;this.is("ar-mode")&&(i=this.object3D.background,this.object3D.background=null),n.render(this.object3D,this.camera),i&&(this.object3D.background=i)},writable:!0}})}),e.exports.setupCanvas=w},{"../../lib/three":178,"../../utils/":204,"../../utils/ios-orientationchange-blank-bug":205,"../a-entity":126,"../a-node":128,"../a-register-element":129,"../system":141,"./loadingScreen":134,"./metaTags":135,"./postMessage":136,"./scenes":137,"./wakelock":138}],134:[function(t,e,n){var i,r,o,s=t("../../utils/").styleParser;function a(t){var e=i.hasAttribute("embedded"),n=o(i.canvas,e,i.maxCanvasSize,i.is("vr-mode"));t.aspect=n.width/n.height,t.updateProjectionMatrix(),i.renderer.setSize(n.width,n.height,!1)}e.exports.setup=function(t,e){o=e;var n,l,c,u,h,d,p,f,m,g,v=(i=t).hasAttribute("loading-screen")?s.parse(i.getAttribute("loading-screen")):void 0,y=v&&v.dotsColor||"white",b=v&&v.backgroundColor||"#24CAFF";(void 0===v||"true"===v.enabled||void 0===v.enabled)&&(n=new THREE.Scene,l=new THREE.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),c=new THREE.MeshBasicMaterial({color:y}),u=new THREE.Mesh(l,c),h=u.clone(),d=u.clone(),p=new THREE.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),f=new THREE.Clock,m=0,g=function(){i.renderer.render(n,p),m=f.getElapsedTime()%4,u.visible=m>=1,h.visible=m>=2,d.visible=m>=3},n.background=new THREE.Color(b),n.add(p),u.position.set(-1,0,-15),h.position.set(0,0,-15),d.position.set(1,0,-15),p.add(u),p.add(h),p.add(d),(r=document.createElement("div")).className="a-loader-title",r.innerHTML=document.title,r.style.display="none",i.appendChild(r),setTimeout((function(){i.hasLoaded||(a(p),r.style.display="block",window.addEventListener("resize",(function(){a(p)})),i.renderer.setAnimationLoop(g))}),200))},e.exports.remove=function(){window.removeEventListener("resize",a),r&&(r.style.display="none")}},{"../../utils/":204}],135:[function(t,e,n){var i,r=t("../../constants/"),o=t("../../utils").extend,s=e.exports.MOBILE_HEAD_TAGS=[l({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),l({name:"mobile-web-app-capable",content:"yes"}),l({name:"theme-color",content:"black"})],a=[l({name:"apple-mobile-web-app-capable",content:"yes"}),l({name:"apple-mobile-web-app-status-bar-style",content:"black"}),(i={rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"},{tagName:"link",attributes:i,exists:function(){return document.querySelector('link[rel="'+i.rel+'"]')}})];function l(t){return{tagName:"meta",attributes:t,exists:function(){return document.querySelector('meta[name="'+t.name+'"]')}}}e.exports.inject=function(t){var e,n=document.head,i=n.querySelector("script"),l=[];return s.forEach(c),t.isIOS&&a.forEach(c),l;function c(t){t&&!t.exists()&&(e=function(t){if(t&&t.tagName){var e=document.createElement(t.tagName);return e.setAttribute(r.AFRAME_INJECTED,""),o(e,t.attributes)}}(t))&&(i?i.parentNode.insertBefore(e,i):n.appendChild(e),l.push(e))}}},{"../../constants/":122,"../../utils":204}],136:[function(t,e,n){var i=t("../../utils/bind"),r=t("../../utils/").isIframed;function o(t){if(t.data)switch(t.data.type){case"vr":switch(t.data.data){case"enter":this.enterVR();break;case"exit":this.exitVR()}}}e.exports=function(t){r()&&window.addEventListener("message",i(o,t))}},{"../../utils/":204,"../../utils/bind":198}],137:[function(t,e,n){e.exports=[]},{}],138:[function(t,e,n){var i=t("../../../vendor/wakelock/wakelock");e.exports=function(t){if(t.isMobile){var e=t.wakelock=new i;t.addEventListener("enter-vr",(function(){e.request()})),t.addEventListener("exit-vr",(function(){e.release()}))}}},{"../../../vendor/wakelock/wakelock":219}],139:[function(t,e,n){var i,r=t("../utils/"),o=t("./propertyTypes"),s=o.isValidDefaultValue,a=o.propertyTypes,l=(0,r.debug)("core:schema:warn");function c(t){return"type"in t?"string"==typeof t.type:"default"in t}function u(t,e){var n,i,r=t.default,o=t.type;return t.type?"bool"===t.type?o="boolean":"float"===t.type&&(o="number"):o=void 0===r||"boolean"!=typeof r&&"number"!=typeof r?Array.isArray(r)?"array":"string":typeof r,(i=a[o])||l("Unknown property type for component `"+e+"`: "+o),n=!!t.parse,t.parse=t.parse||i.parse,t.stringify=t.stringify||i.stringify,t.type=o,"default"in t?n||s(o,r)||l("Default value `"+r+"` does not match type `"+o+"` in component `"+e+"`"):t.default=i.default,t}function h(t,e){return null!=t&&""!==t||(t=e.default,Array.isArray(t)&&(t=t.slice())),e.parse(t,e.default)}function d(t,e){return"object"!=typeof t?t:e&&null!==t?e.stringify(t):JSON.stringify(t)}e.exports.isSingleProperty=c,e.exports.process=function(t,e){var n;if(c(t))return u(t,e);for(n in t)t[n]=u(t[n],e);return t},e.exports.processPropertyDefinition=u,e.exports.parseProperties=(i=[],function(t,e,n,r,o){var s,a;for(a in i.length=0,n?t:e)n&&void 0===t[a]||i.push(a);if(null===t||"object"!=typeof t)return t;for(a in t)void 0===t[a]||e[a]||o||l("Unknown property `"+a+"` for component/system `"+r+"`.");for(s=0;s<i.length;s++){if(!e[a=i[s]])return;t[a]=h(t[a],e[a])}return t}),e.exports.parseProperty=h,e.exports.stringifyProperties=function(t,e){var n,i,r,o,s={};for(n in t)i=e[n],"object"==typeof(o=r=t[n])&&(o=d(r,i),i||l("Unknown component property: "+n)),s[n]=o;return s},e.exports.stringifyProperty=d},{"../utils/":204,"./propertyTypes":132}],140:[function(t,e,n){var i=t("./schema").process,r=e.exports.shaders={},o=e.exports.shaderNames=[],s=t("../lib/three"),a=t("../utils"),l={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},c=e.exports.Shader=function(){};c.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(t){return this.attributes=this.initVariables(t,"attribute"),this.uniforms=this.initVariables(t,"uniform"),this.material=new(this.raw?s.RawShaderMaterial:s.ShaderMaterial)({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initVariables:function(t,e){var n,i=this.schema,r={};for(n in i)i[n].is===e&&(r[n]={type:l[i[n].type],value:void 0});return r},update:function(t){this.updateVariables(t,"attribute"),this.updateVariables(t,"uniform")},updateVariables:function(t,e){var n,i,r,o=this.schema;for(n in r="uniform"===e?this.uniforms:this.attributes,t)if(o[n]&&o[n].is===e)if("map"!==o[n].type)r[n].value=this.parseValue(o[n].type,t[n]),r[n].needsUpdate=!0;else{if(!r[n]||r[n].value===t[n])continue;this.setMapOnTextureLoad(r,n,i="_texture_"+n),a.material.updateMapMaterialFromData(i,n,this,t)}},parseValue:function(t,e){var n;switch(t){case"vec2":return new s.Vector2(e.x,e.y);case"vec3":return new s.Vector3(e.x,e.y,e.z);case"vec4":return new s.Vector4(e.x,e.y,e.z,e.w);case"color":return n=new s.Color(e),new s.Vector3(n.r,n.g,n.b);case"map":return s.ImageUtils.loadTexture(e);default:return e}},setMapOnTextureLoad:function(t,e,n){var i=this;this.el.addEventListener("materialtextureloaded",(function(){t[e].value=i.material[n],t[e].needsUpdate=!0}))}},e.exports.registerShader=function(t,e){var n,s={};if(Object.keys(e).forEach((function(t){s[t]={value:e[t],writable:!0}})),r[t])throw new Error("The shader "+t+" has been already registered");return((n=function(){c.call(this)}).prototype=Object.create(c.prototype,s)).name=t,n.prototype.constructor=n,r[t]={Shader:n,schema:i(n.prototype.schema)},o.push(t),n}},{"../lib/three":178,"../utils":204,"./schema":139}],141:[function(t,e,n){var i=t("./component"),r=t("./schema"),o=t("../utils/"),s=r.parseProperties,a=r.parseProperty,l=r.process,c=r.isSingleProperty,u=o.styleParser,h=e.exports.systems={},d=e.exports.System=function(t){var e=i&&i.components[this.name];this.el=t,this.sceneEl=t,e&&(e.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};d.prototype={schema:{},init:function(){},update:function(t){},updateProperties:function(t){var e=this.data;Object.keys(r).length&&(this.buildData(t),this.update(e))},buildData:function(t){var e=this.schema;Object.keys(e).length&&(t=t||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),this.data=c(e)?a(t,e):s(u.parse(t)||{},e))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},e.exports.registerSystem=function(t,e){var n,i,r={},s=o.findAllScenes(document);if(Object.keys(e).forEach((function(t){r[t]={value:e[t],writable:!0}})),h[t])throw new Error("The system `"+t+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");for(((i=function(t){d.call(this,t)}).prototype=Object.create(d.prototype,r)).name=t,i.prototype.constructor=i,i.prototype.schema=o.extend(l(i.prototype.schema)),h[t]=i,n=0;n<s.length;n++)s[n].initSystem(t)}},{"../utils/":204,"./component":130,"./schema":139}],142:[function(t,e,n){t("./pivot")},{"./pivot":143}],143:[function(t,e,n){var i=t("../../core/component").registerComponent,r=t("../../lib/three"),o=new r.Vector3,s=new r.Vector3;i("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var t=this.data,e=this.el,n=e.object3D.parent,i=e.object3D,a=new r.Group;o.copy(i.position),s.copy(i.rotation),n.remove(i),a.add(i),n.add(a),e.object3D=a,i.position.set(-1*t.x,-1*t.y,-1*t.z),a.position.set(t.x+o.x,t.y+o.y,t.z+o.z),a.rotation.copy(i.rotation),i.rotation.set(0,0,0)}})},{"../../core/component":130,"../../lib/three":178}],144:[function(t,e,n){var i=t("../../core/component").components,r=t("../../core/shader").shaders,o=t("../../utils/"),s={};function a(t){var e=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();"fog"===t&&(e="material-fog"),"visible"===t&&(e="material-visible"),s[e]="material."+t}Object.keys(i.material.schema).forEach(a),Object.keys(r.standard.schema).forEach(a),e.exports=function(){return{defaultComponents:{material:{}},mappings:o.extend({},s)}}},{"../../core/component":130,"../../core/shader":140,"../../utils/":204}],145:[function(t,e,n){t("./primitives/a-camera"),t("./primitives/a-cursor"),t("./primitives/a-curvedimage"),t("./primitives/a-gltf-model"),t("./primitives/a-image"),t("./primitives/a-light"),t("./primitives/a-link"),t("./primitives/a-obj-model"),t("./primitives/a-sky"),t("./primitives/a-sound"),t("./primitives/a-text"),t("./primitives/a-video"),t("./primitives/a-videosphere"),t("./primitives/meshPrimitives")},{"./primitives/a-camera":147,"./primitives/a-cursor":148,"./primitives/a-curvedimage":149,"./primitives/a-gltf-model":150,"./primitives/a-image":151,"./primitives/a-light":152,"./primitives/a-link":153,"./primitives/a-obj-model":154,"./primitives/a-sky":155,"./primitives/a-sound":156,"./primitives/a-text":157,"./primitives/a-video":158,"./primitives/a-videosphere":159,"./primitives/meshPrimitives":160}],146:[function(t,e,n){var i=t("../../core/a-entity"),r=t("../../core/component").components,o=t("../../core/a-register-element").registerElement,s=t("../../utils/"),a=s.debug,l=s.entity.setComponentProperty,c=a("extras:primitives:debug"),u=a("extras:primitives:warn"),h=e.exports.primitives={};e.exports.registerPrimitive=function(t,e){t=t.toLowerCase(),c("Registering <%s>",t),e.defaultAttributes&&u("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var n=o(t,{prototype:Object.create(i.prototype,{defaultComponentsFromPrimitive:{value:e.defaultComponents||e.defaultAttributes||{}},deprecated:{value:e.deprecated||null},deprecatedMappings:{value:e.deprecatedMappings||{}},mappings:{value:e.mappings||{}},createdCallback:{value:function(){e.deprecated&&console.warn(e.deprecated),this.resolveMappingCollisions()}},resolveMappingCollisions:{value:function(){var t=this.mappings,e=this;Object.keys(t).forEach((function(n){var i;n!==n.toLowerCase()&&u("Mapping keys should be specified in lower case. The mapping key "+n+" may not be recognized"),r[n]&&(i=t[n].replace(".","-"),t[i]=t[n],delete t[n],console.warn("The primitive "+e.tagName.toLowerCase()+" has a mapping collision. The attribute "+n+" has the same name as a registered component and has been renamed to "+i))}))}},getExtraComponents:{value:function(){var t,e,n,i,r,o,a=this;for(e=s.clone(this.defaultComponentsFromPrimitive),(r=this.getAttribute("mixin"))&&(r=r.trim().split(" ")).forEach((function(t){var n=a.sceneEl.querySelector("#"+t).componentCache;Object.keys(n).forEach((function(t){var i,r;e[t]=(r=n[t],l(i=e[t])?c(r):l(r)?c(i):u(i)&&u(r)?s.extendDeep(i,r):c(r))}))})),n=0;n<this.attributes.length;n++)(i=this.mappings[(t=this.attributes[n]).name])&&((o=s.entity.getComponentPropertyPath(i)).constructor===Array?(e[o[0]]=e[o[0]]||{},e[o[0]][o[1]]=t.value.trim()):e[o]=t.value.trim());return e;function l(t){return void 0===t}function c(t){return u(t)?s.extendDeep({},t):t}function u(t){return null!==t&&t.constructor===Object}}},attributeChangedCallback:{value:function(t,e,n){var i=this.mappings[t];t in this.deprecatedMappings&&console.warn(this.deprecatedMappings[t]),t&&i&&l(this,i,n)}}})});return h[t]=n,n},e.exports.definePrimitive=function(t,n,i){i=i||{},Object.keys(n).map((function(t){!function(t,e){Object.keys(r[t].schema).map((function(n){var i=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();void 0!==e[i]&&(i=t+"-"+n),e[i]=t+"."+n}))}(t,i)})),e.exports.registerPrimitive(t,s.extendDeep({},null,{defaultComponents:n,mappings:i}))}},{"../../core/a-entity":126,"../../core/a-register-element":129,"../../core/component":130,"../../utils/":204}],147:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}})},{"../primitives":146}],148:[function(t,e,n){var i=t("../getMeshMixin");(0,t("../primitives").registerPrimitive)("a-cursor",t("../../../utils/").extendDeep({},i(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},{"../../../utils/":204,"../getMeshMixin":144,"../primitives":146}],149:[function(t,e,n){var i=t("../getMeshMixin");(0,t("../primitives").registerPrimitive)("a-curvedimage",t("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},{"../../../utils/":204,"../getMeshMixin":144,"../primitives":146}],150:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-gltf-model",{mappings:{src:"gltf-model"}})},{"../primitives":146}],151:[function(t,e,n){var i=t("../getMeshMixin");(0,t("../primitives").registerPrimitive)("a-image",t("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":204,"../getMeshMixin":144,"../primitives":146}],152:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target"}})},{"../primitives":146}],153:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},{"../primitives":146}],154:[function(t,e,n){var i=t("../getMeshMixin")();(0,t("../primitives").registerPrimitive)("a-obj-model",t("../../../utils/").extendDeep({},i,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},{"../../../utils/":204,"../getMeshMixin":144,"../primitives":146}],155:[function(t,e,n){var i=t("../getMeshMixin"),r=t("../primitives").registerPrimitive,o=t("../../../utils/"),s=t("./meshPrimitives");r("a-sky",o.extendDeep({},i(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:o.extendDeep({},s["a-sphere"].prototype.mappings)}))},{"../../../utils/":204,"../getMeshMixin":144,"../primitives":146,"./meshPrimitives":160}],156:[function(t,e,n){(0,t("../primitives").registerPrimitive)("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},{"../primitives":146}],157:[function(t,e,n){(0,t("../primitives").definePrimitive)("a-text",{text:{anchor:"align",width:5}})},{"../primitives":146}],158:[function(t,e,n){var i=t("../getMeshMixin");(0,t("../primitives").registerPrimitive)("a-video",t("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":204,"../getMeshMixin":144,"../primitives":146}],159:[function(t,e,n){var i=t("../getMeshMixin");(0,t("../primitives").registerPrimitive)("a-videosphere",t("../../../utils/").extendDeep({},i(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},{"../../../utils/":204,"../getMeshMixin":144,"../primitives":146}],160:[function(t,e,n){var i=t("../getMeshMixin"),r=t("../../../core/geometry").geometries,o=t("../../../core/geometry").geometryNames,s=t("../primitives").registerPrimitive,a=t("../../../utils/"),l=e.exports={};function c(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}o.forEach((function(t){var e=r[t],n=c(t),o={};Object.keys(e.schema).forEach((function(t){o[c(t)]="geometry."+t}));var u="a-"+n,h=s(u,a.extendDeep({},i(),{defaultComponents:{geometry:{primitive:t}},mappings:o}));l[u]=h}))},{"../../../core/geometry":131,"../../../utils/":204,"../getMeshMixin":144,"../primitives":146}],161:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(t){this.geometry=new r.BoxGeometry(t.width,t.height,t.depth,t.segmentsWidth,t.segmentsHeight,t.segmentsDepth)}})},{"../core/geometry":131,"../lib/three":178}],162:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),o=r.Math.degToRad;i("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new r.CircleGeometry(t.radius,t.segments,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":131,"../lib/three":178}],163:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),o=r.Math.degToRad;i("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new r.CylinderGeometry(t.radiusTop,t.radiusBottom,t.height,t.segmentsRadial,t.segmentsHeight,t.openEnded,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":131,"../lib/three":178}],164:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),o=r.Math.degToRad;i("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new r.CylinderGeometry(t.radius,t.radius,t.height,t.segmentsRadial,t.segmentsHeight,t.openEnded,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":131,"../lib/three":178}],165:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new r.DodecahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":131,"../lib/three":178}],166:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new r.IcosahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":131,"../lib/three":178}],167:[function(t,e,n){t("./box.js"),t("./circle.js"),t("./cone.js"),t("./cylinder.js"),t("./dodecahedron.js"),t("./icosahedron.js"),t("./octahedron.js"),t("./plane.js"),t("./ring.js"),t("./sphere.js"),t("./tetrahedron.js"),t("./torus.js"),t("./torusKnot.js"),t("./triangle.js")},{"./box.js":161,"./circle.js":162,"./cone.js":163,"./cylinder.js":164,"./dodecahedron.js":165,"./icosahedron.js":166,"./octahedron.js":168,"./plane.js":169,"./ring.js":170,"./sphere.js":171,"./tetrahedron.js":172,"./torus.js":173,"./torusKnot.js":174,"./triangle.js":175}],168:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new r.OctahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":131,"../lib/three":178}],169:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(t){this.geometry=new r.PlaneGeometry(t.width,t.height,t.segmentsWidth,t.segmentsHeight)}})},{"../core/geometry":131,"../lib/three":178}],170:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),o=r.Math.degToRad;i("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new r.RingGeometry(t.radiusInner,t.radiusOuter,t.segmentsTheta,t.segmentsPhi,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":131,"../lib/three":178}],171:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),o=r.Math.degToRad;i("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(t){this.geometry=new r.SphereGeometry(t.radius,t.segmentsWidth,t.segmentsHeight,o(t.phiStart),o(t.phiLength),o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":131,"../lib/three":178}],172:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new r.TetrahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":131,"../lib/three":178}],173:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),o=r.Math.degToRad;i("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(t){this.geometry=new r.TorusGeometry(t.radius,2*t.radiusTubular,t.segmentsRadial,t.segmentsTubular,o(t.arc))}})},{"../core/geometry":131,"../lib/three":178}],174:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three");i("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(t){this.geometry=new r.TorusKnotGeometry(t.radius,2*t.radiusTubular,t.segmentsTubular,t.segmentsRadial,t.p,t.q)}})},{"../core/geometry":131,"../lib/three":178}],175:[function(t,e,n){var i=t("../core/geometry").registerGeometry,r=t("../lib/three"),o=new r.Quaternion,s=new r.Vector3(0,0,1),a=new r.Vector2,l=new r.Vector2,c=new r.Vector2;i("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(t){var e,n,i,u,h,d;(i=new r.Triangle).a.set(t.vertexA.x,t.vertexA.y,t.vertexA.z),i.b.set(t.vertexB.x,t.vertexB.y,t.vertexB.z),i.c.set(t.vertexC.x,t.vertexC.y,t.vertexC.z),n=i.getNormal(new r.Vector3),o.setFromUnitVectors(n,s),u=i.a.clone().applyQuaternion(o),h=i.b.clone().applyQuaternion(o),d=i.c.clone().applyQuaternion(o),a.set(Math.min(u.x,h.x,d.x),Math.min(u.y,h.y,d.y)),l.set(Math.max(u.x,h.x,d.x),Math.max(u.y,h.y,d.y)),c.set(0,0).subVectors(l,a),u=(new r.Vector2).subVectors(u,a).divide(c),h=(new r.Vector2).subVectors(h,a).divide(c),d=(new r.Vector2).subVectors(d,a).divide(c),(e=this.geometry=new r.Geometry).vertices.push(i.a),e.vertices.push(i.b),e.vertices.push(i.c),e.faces.push(new r.Face3(0,1,2,n)),e.faceVertexUvs[0]=[[u,h,d]]}})},{"../core/geometry":131,"../lib/three":178}],176:[function(t,e,n){if(window.Promise=window.Promise||t("promise-polyfill"),window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices,window.hasNativeWebXRImplementation=void 0!==navigator.xr,!window.hasNativeWebXRImplementation&&!window.hasNativeWebVRImplementation){var i=t("./utils/isIOSOlderThan10")(window.navigator.userAgent)?1/window.devicePixelRatio:1,r=t("webvr-polyfill"),o={BUFFER_SCALE:i,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0,MOBILE_WAKE_LOCK:!!window.cordova};window.webvrpolyfill=new r(o)}var s=t("./utils/"),a=s.debug;s.isIE11&&(t("custom-event-polyfill"),t("../vendor/starts-with-polyfill"));var l=a("A-Frame:error"),c=a("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&c("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),window.cordova||"file:"!==window.location.protocol||l("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/0.5.0/introduction/getting-started.html#using-a-local-server."),t("present"),s.device.isBrowserEnvironment&&(t("./style/aframe.css"),t("./style/rStats.css"));var u=t("./core/scene/a-scene").AScene,h=t("./core/component").components,d=t("./core/component").registerComponent,p=t("./core/geometry").registerGeometry,f=t("./extras/primitives/primitives").registerPrimitive,m=t("./core/shader").registerShader,g=t("./core/system").registerSystem,v=t("./core/shader").shaders,y=t("./core/system").systems,b=window.THREE=t("./lib/three"),_=t("../package");t("./components/index"),t("./geometries/index"),t("./shaders/index"),t("./systems/index");var w=t("./core/a-node"),A=t("./core/a-entity");t("./core/a-assets"),t("./core/a-cubemap"),t("./core/a-mixin"),t("./extras/components/"),t("./extras/primitives/"),console.log("A-Frame Version: 1.1.0 (Date 2020-12-03, Commit #8aefd214)"),console.log("THREE Version (https://github.com/supermedium/three.js):",_.dependencies["super-three"]),console.log("WebVR Polyfill Version:",_.dependencies["webvr-polyfill"]),e.exports=window.AFRAME={AComponent:t("./core/component").Component,AEntity:A,ANode:w,ANIME:t("super-animejs"),AScene:u,components:h,coreComponents:Object.keys(h),geometries:t("./core/geometry").geometries,registerComponent:d,registerElement:t("./core/a-register-element").registerElement,registerGeometry:p,registerPrimitive:f,registerShader:m,registerSystem:g,primitives:{getMeshMixin:t("./extras/primitives/getMeshMixin"),primitives:t("./extras/primitives/primitives").primitives},scenes:t("./core/scene/scenes"),schema:t("./core/schema"),shaders:v,systems:y,THREE:b,utils:s,version:_.version}},{"../package":72,"../vendor/starts-with-polyfill":217,"./components/index":83,"./core/a-assets":124,"./core/a-cubemap":125,"./core/a-entity":126,"./core/a-mixin":127,"./core/a-node":128,"./core/a-register-element":129,"./core/component":130,"./core/geometry":131,"./core/scene/a-scene":133,"./core/scene/scenes":137,"./core/schema":139,"./core/shader":140,"./core/system":141,"./extras/components/":142,"./extras/primitives/":145,"./extras/primitives/getMeshMixin":144,"./extras/primitives/primitives":146,"./geometries/index":167,"./lib/three":178,"./shaders/index":180,"./style/aframe.css":185,"./style/rStats.css":186,"./systems/index":190,"./utils/":204,"./utils/isIOSOlderThan10":207,"custom-event-polyfill":7,present:48,"promise-polyfill":50,"super-animejs":56,"webvr-polyfill":67}],177:[function(t,e,n){window.aframeStats=function(t){var e=null,n=t;return{update:function(){var t;e("te").set((t=n.querySelectorAll("*"),Array.prototype.slice.call(t).filter((function(t){return t.isEntity})),t.length)),window.performance.getEntriesByName&&e("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))},start:function(){},end:function(){},attach:function(t){e=t},values:{te:{caption:"Entities"},lt:{caption:"Load Time"}},groups:[{caption:"A-Frame",values:["te","lt"]}],fractions:[]}},"object"==typeof e&&(e.exports={aframeStats:window.aframeStats})},{}],178:[function(t,e,n){(function(n){var i=n.THREE=t("super-three");i.TextureLoader&&(i.TextureLoader.prototype.crossOrigin="anonymous"),i.ImageLoader&&(i.ImageLoader.prototype.crossOrigin="anonymous"),i.Cache&&(i.Cache.enabled=!0),t("../../vendor/DeviceOrientationControls"),t("super-three/examples/js/loaders/DRACOLoader"),t("super-three/examples/js/loaders/GLTFLoader"),t("super-three/examples/js/loaders/OBJLoader"),t("super-three/examples/js/loaders/MTLLoader"),i.DRACOLoader.prototype.crossOrigin="anonymous",i.GLTFLoader.prototype.crossOrigin="anonymous",i.MTLLoader.prototype.crossOrigin="anonymous",i.OBJLoader.prototype.crossOrigin="anonymous",e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../vendor/DeviceOrientationControls":214,"super-three":57,"super-three/examples/js/loaders/DRACOLoader":58,"super-three/examples/js/loaders/GLTFLoader":59,"super-three/examples/js/loaders/MTLLoader":60,"super-three/examples/js/loaders/OBJLoader":61}],179:[function(t,e,n){var i=t("../core/shader").registerShader,r=t("../lib/three"),o=t("../utils/");function s(t,e){return e.color.set(t.color),e.fog=t.fog,e.wireframe=t.wireframe,e.wireframeLinewidth=t.wireframeLinewidth,e}e.exports.Shader=i("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(t){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new r.Color},this.textureSrc=null,s(t,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.material=new r.MeshBasicMaterial(this.materialData),o.material.updateMap(this,t)},update:function(t){this.updateMaterial(t),o.material.updateMap(this,t)},updateMaterial:function(t){var e;for(e in s(t,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.materialData)this.material[e]=this.materialData[e]}})},{"../core/shader":140,"../lib/three":178,"../utils/":204}],180:[function(t,e,n){t("./flat"),t("./standard"),t("./sdf"),t("./msdf"),t("./ios10hls")},{"./flat":179,"./ios10hls":181,"./msdf":182,"./sdf":183,"./standard":184}],181:[function(t,e,n){var i=t("../core/shader").registerShader;e.exports.Shader=i("ios10hls",{schema:{src:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["uniform sampler2D src;","uniform float opacity;","varying vec2 vUV;","void main() {","  vec2 offset = vec2(0, 0);","  vec2 repeat = vec2(1, 1);","  vec4 color = texture2D(src, vec2(vUV.x / repeat.x + offset.x, (1.0 - vUV.y) / repeat.y + offset.y)).bgra;","  gl_FragColor = vec4(color.rgb, opacity);","}"].join("\n")})},{"../core/shader":140}],182:[function(t,e,n){var i=t("../core/shader").registerShader,r=!!document.createElement("canvas").getContext("webgl2"),o=["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),s=["#version 300 es","in vec2 uv;","in vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","out vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),a=r?s:o,l=["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture2D(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","}"].join("\n"),c=["#version 300 es","precision highp float;","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","out vec4 fragColor;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  fragColor = vec4(color.xyz, alpha * opacity);","}"].join("\n");e.exports.Shader=i("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:a,fragmentShader:r?c:l})},{"../core/shader":140}],183:[function(t,e,n){var i=t("../core/shader").registerShader;e.exports.Shader=i("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:["#version 300 es","in vec2 uv;","in vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","out vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join("\n"),fragmentShader:["#version 300 es","precision highp float;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","out vec4 fragColor;","#ifdef GL_OES_standard_derivatives","  float contour(float width, float value) {","    return smoothstep(0.5 - value, 0.5 + value, width);","  }","#else","  float aastep(float value, float afwidth) {","    return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","  }","#endif","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","void main() {","  #ifdef GL_OES_standard_derivatives","    vec2 uv = vUV;","    vec4 texColor = texture(map, uv);","    float dist = texColor.a;","    float width = fwidth(dist);","    float alpha = contour(dist, width);","    float dscale = 0.353505;","    vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","    float isBigEnough = max(abs(duv.x), abs(duv.y));","    if (isBigEnough > BIG_ENOUGH) {","      float ratio = BIG_ENOUGH / isBigEnough;","      alpha = ratio * alpha + (1.0 - ratio) * dist;","    }","    if (isBigEnough <= BIG_ENOUGH) {","      vec4 box = vec4 (uv - duv, uv + duv);","      alpha = (alpha + 0.5 * (","        contour(texture(map, box.xy).a, width)","        + contour(texture(map, box.zw).a, width)","        + contour(texture(map, box.xw).a, width)","        + contour(texture(map, box.zy).a, width)","      )) / 3.0;","    }","    if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  #else","    vec4 texColor = texture(map, vUV);","    float value = texColor.a;","    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","    float alpha = aastep(value, afwidth);","    float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);","    if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }","    alpha = alpha * ratio + (1.0 - ratio) * value;","    if (ratio < 1.0 && alpha <= DISCARD_ALPHA) { discard; return; }","  #endif","  fragColor = vec4(color, opacity * alpha);","}"].join("\n")})},{"../core/shader":140}],184:[function(t,e,n){var i=t("../core/shader").registerShader,r=t("../lib/three"),o=t("../utils/"),s=new r.CubeTextureLoader,a={};function l(t,e){return e.color.set(t.color),e.emissive.set(t.emissive),e.emissiveIntensity=t.emissiveIntensity,e.fog=t.fog,e.metalness=t.metalness,e.roughness=t.roughness,e.wireframe=t.wireframe,e.wireframeLinewidth=t.wireframeLinewidth,t.normalMap&&(e.normalScale=t.normalScale),t.ambientOcclusionMap&&(e.aoMapIntensity=t.ambientOcclusionMapIntensity),t.displacementMap&&(e.displacementScale=t.displacementScale,e.displacementBias=t.displacementBias),e}e.exports.Shader=i("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(t){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new r.Color,emissive:new r.Color},l(t,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive),this.material=new r.MeshStandardMaterial(this.materialData),o.material.updateMap(this,t),t.normalMap&&o.material.updateDistortionMap("normal",this,t),t.displacementMap&&o.material.updateDistortionMap("displacement",this,t),t.ambientOcclusionMap&&o.material.updateDistortionMap("ambientOcclusion",this,t),t.metalnessMap&&o.material.updateDistortionMap("metalness",this,t),t.roughnessMap&&o.material.updateDistortionMap("roughness",this,t),this.updateEnvMap(t)},update:function(t){this.updateMaterial(t),o.material.updateMap(this,t),t.normalMap&&o.material.updateDistortionMap("normal",this,t),t.displacementMap&&o.material.updateDistortionMap("displacement",this,t),t.ambientOcclusionMap&&o.material.updateDistortionMap("ambientOcclusion",this,t),t.metalnessMap&&o.material.updateDistortionMap("metalness",this,t),t.roughnessMap&&o.material.updateDistortionMap("roughness",this,t),this.updateEnvMap(t)},updateMaterial:function(t){var e,n=this.material;for(e in l(t,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive),this.materialData)n[e]=this.materialData[e]},updateEnvMap:function(t){var e=this,n=this.material,i=t.envMap,l=t.sphericalEnvMap;if(!i&&!l||this.isLoadingEnvMap)return n.envMap=null,void(n.needsUpdate=!0);this.isLoadingEnvMap=!0,l?this.el.sceneEl.systems.material.loadTexture(l,{src:l},(function(t){e.isLoadingEnvMap=!1,t.mapping=r.SphericalReflectionMapping,n.envMap=t,o.material.handleTextureEvents(e.el,t),n.needsUpdate=!0})):a[i]?a[i].then((function(t){e.isLoadingEnvMap=!1,n.envMap=t,o.material.handleTextureEvents(e.el,t),n.needsUpdate=!0})):a[i]=new Promise((function(t){o.srcLoader.validateCubemapSrc(i,(function(i){s.load(i,(function(i){e.isLoadingEnvMap=!1,n.envMap=i,o.material.handleTextureEvents(e.el,i),t(i)}))}))}))}})},{"../core/shader":140,"../lib/three":178,"../utils/":204}],185:[function(t,e,n){var i="html.a-fullscreen{bottom:0;left:0;position:fixed;right:0;top:0}html.a-fullscreen body{height:100%;margin:0;overflow:hidden;padding:0;width:100%}html.a-fullscreen .a-canvas{width:100%!important;height:100%!important;top:0!important;left:0!important;right:0!important;bottom:0!important;position:fixed!important}html:not(.a-fullscreen) .a-enter-ar,html:not(.a-fullscreen) .a-enter-vr{right:5px;bottom:5px}:-webkit-full-screen{background-color:transparent}.a-hidden{display:none!important}.a-canvas{height:100%;left:0;position:absolute;top:0;width:100%}.a-canvas.a-grab-cursor:hover{cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}canvas.a-canvas.a-mouse-cursor-hover:hover{cursor:pointer}.a-inspector-loader{background-color:#ed3160;position:fixed;left:3px;top:3px;padding:6px 10px;color:#fff;text-decoration:none;font-size:12px;font-family:Roboto,sans-serif;text-align:center;z-index:99999;width:204px}@keyframes dots-1{from{opacity:0}25%{opacity:1}}@keyframes dots-2{from{opacity:0}50%{opacity:1}}@keyframes dots-3{from{opacity:0}75%{opacity:1}}@-webkit-keyframes dots-1{from{opacity:0}25%{opacity:1}}@-webkit-keyframes dots-2{from{opacity:0}50%{opacity:1}}@-webkit-keyframes dots-3{from{opacity:0}75%{opacity:1}}.a-inspector-loader .dots span{animation:dots-1 2s infinite steps(1);-webkit-animation:dots-1 2s infinite steps(1)}.a-inspector-loader .dots span:first-child+span{animation-name:dots-2;-webkit-animation-name:dots-2}.a-inspector-loader .dots span:first-child+span+span{animation-name:dots-3;-webkit-animation-name:dots-3}a-scene{display:block;position:relative;height:100%;width:100%}a-assets,a-scene audio,a-scene img,a-scene video{display:none}.a-enter-vr-modal,.a-orientation-modal{font-family:Consolas,Andale Mono,Courier New,monospace}.a-enter-vr-modal a{border-bottom:1px solid #fff;padding:2px 0;text-decoration:none;transition:.1s color ease-in}.a-enter-vr-modal a:hover{background-color:#fff;color:#111;padding:2px 4px;position:relative;left:-4px}.a-enter-ar,.a-enter-vr{font-family:sans-serif,monospace;font-size:13px;width:100%;font-weight:200;line-height:16px;position:absolute;right:20px;bottom:20px}.a-enter-ar{right:80px}.a-enter-vr-button,.a-enter-vr-modal,.a-enter-vr-modal a{color:#fff;user-select:none;outline:0}.a-enter-vr-button{background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E\") 50% 50% no-repeat rgba(0,0,0,.35)}.a-enter-ar-button{background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E\") 50% 50% no-repeat rgba(0,0,0,.2)}.a-enter-ar-button,.a-enter-vr-button{background-size:90% 90%;border:0;bottom:0;cursor:pointer;min-width:58px;min-height:34px;padding-right:0;padding-top:0;position:absolute;right:0;transition:background-color .05s ease;-webkit-transition:background-color .05s ease;z-index:9999;border-radius:8px;touch-action:manipulation}.a-enter-ar-button{background-size:100% 90%;margin-right:10px;border-radius:7px}.a-enter-ar-button:active,.a-enter-ar-button:hover,.a-enter-vr-button:active,.a-enter-vr-button:hover{background-color:#ef2d5e}.a-enter-vr-button.resethover{background-color:rgba(0,0,0,.35)}[data-a-enter-vr-no-webvr] .a-enter-vr-button{border-color:#666;opacity:.65}[data-a-enter-vr-no-webvr] .a-enter-vr-button:active,[data-a-enter-vr-no-webvr] .a-enter-vr-button:hover{background-color:rgba(0,0,0,.35);cursor:not-allowed}.a-enter-vr-modal{background-color:#666;border-radius:0;display:none;min-height:32px;margin-right:70px;padding:9px;width:280px;right:2%;position:absolute}.a-enter-vr-modal:after{border-bottom:10px solid transparent;border-left:10px solid #666;border-top:10px solid transparent;display:inline-block;content:'';position:absolute;right:-5px;top:5px;width:0;height:0}.a-enter-vr-modal a,.a-enter-vr-modal p{display:inline}.a-enter-vr-modal p{margin:0}.a-enter-vr-modal p:after{content:' '}[data-a-enter-vr-no-headset].a-enter-vr:hover .a-enter-vr-modal,[data-a-enter-vr-no-webvr].a-enter-vr:hover .a-enter-vr-modal{display:block}.a-orientation-modal{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center/50% 50% no-repeat rgba(244,244,244,1);bottom:0;font-size:14px;font-weight:600;left:0;line-height:20px;right:0;position:fixed;top:0;z-index:9999999}.a-orientation-modal:after{color:#666;content:\"Insert phone into Cardboard holder.\";display:block;position:absolute;text-align:center;top:70%;transform:translateY(-70%);width:100%}.a-orientation-modal button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;border:none;height:50px;text-indent:-9999px;width:50px}.a-loader-title{background-color:rgba(0,0,0,.6);font-family:sans-serif,monospace;text-align:center;font-size:20px;height:50px;font-weight:300;line-height:50px;position:absolute;right:0;left:0;top:0;color:#fff}.a-modal{background:0 0/50% 50% rgba(0,0,0,.6);bottom:0;font-size:14px;font-weight:600;left:0;line-height:20px;right:0;position:fixed;top:0;z-index:9999999}.a-dialog{position:relative;left:50%;top:50%;transform:translate(-50%,-50%);z-index:199995;width:300px;height:200px;background-size:contain;background-color:#fff;font-family:sans-serif,monospace;font-size:20px;border-radius:3px;padding:6px}.a-dialog-text-container{width:100%;height:70%;align-self:flex-start;display:flex;justify-content:center;align-content:center;flex-direction:column}.a-dialog-text{display:inline-block;font-weight:400;font-size:14pt;margin:8px}.a-dialog-buttons-container{display:inline-flex;align-self:flex-end;width:100%;height:30%}.a-dialog-button{cursor:pointer;align-self:center;opacity:.9;height:80%;width:50%;font-size:12pt;margin:4px;border-radius:2px;text-align:center;border:none;display:inline-block;-webkit-transition:all .25s ease-in-out;transition:all .25s ease-in-out;box-shadow:0 1px 3px rgba(0,0,0,.1),0 1px 2px rgba(0,0,0,.2);user-select:none}.a-dialog-permission-button:hover{box-shadow:0 7px 14px rgba(0,0,0,.2),0 2px 2px rgba(0,0,0,.2)}.a-dialog-allow-button{background-color:#00ceff}.a-dialog-deny-button{background-color:#ff005b}.a-dialog-ok-button{background-color:#00ceff;width:100%}";t("browserify-css").createStyle(i,{href:"src/style/aframe.css"}),e.exports=i},{"browserify-css":4}],186:[function(t,e,n){var i=".rs-base{background-color:#333;color:#fafafa;border-radius:0;font:10px monospace;left:5px;line-height:1em;opacity:.85;overflow:hidden;padding:10px;position:fixed;top:5px;width:300px;z-index:10000}.rs-base div.hidden{display:none}.rs-base h1{color:#fff;cursor:pointer;font-size:1.4em;font-weight:300;margin:0 0 5px;padding:0}.rs-group{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;margin-bottom:5px}.rs-group:last-child{margin-bottom:0}.rs-counter-base{align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;height:10px;-webkit-justify-content:space-between;justify-content:space-between;margin:2px 0}.rs-counter-base.alarm{color:#b70000;text-shadow:0 0 0 #b70000,0 0 1px #fff,0 0 1px #fff,0 0 2px #fff,0 0 2px #fff,0 0 3px #fff,0 0 3px #fff,0 0 4px #fff,0 0 4px #fff}.rs-counter-id{font-weight:300;-webkit-box-ordinal-group:0;-webkit-order:0;order:0;width:54px}.rs-counter-value{font-weight:300;-webkit-box-ordinal-group:1;-webkit-order:1;order:1;text-align:right;width:35px}.rs-canvas{-webkit-box-ordinal-group:2;-webkit-order:2;order:2}@media (min-width:480px){.rs-base{left:20px;top:20px}}";t("browserify-css").createStyle(i,{href:"src/style/rStats.css"}),e.exports=i},{"browserify-css":4}],187:[function(t,e,n){var i=t("../constants/"),r=t("../core/system").registerSystem;e.exports.System=r("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var t,e,n=this.sceneEl,i=this;if(!n.camera||n.camera.el.getAttribute("camera").spectator)if((t=n.querySelectorAll("a-camera, [camera]")).length)for(this.numUserCameras=t.length,e=0;e<t.length;e++)t[e].addEventListener("object3dset",(function(t){"camera"===t.detail.type&&i.checkUserCamera(this)})),t[e].isNode?t[e].load():t[e].addEventListener("nodeready",(function(){this.load()}));else this.createDefaultCamera();else n.emit("cameraready",{cameraEl:n.camera.el})},checkUserCamera:function(t){var e,n=this.el.sceneEl;this.numUserCamerasChecked++,this.initialCameraFound||((e=t.getAttribute("camera")).active&&!e.spectator?(this.initialCameraFound=!0,n.camera=t.getObject3D("camera"),n.emit("cameraready",{cameraEl:t})):this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera())},createDefaultCamera:function(){var t,e=this.sceneEl;(t=document.createElement("a-entity")).setAttribute("camera",{active:!0}),t.setAttribute("position",{x:0,y:i.DEFAULT_CAMERA_HEIGHT,z:0}),t.setAttribute("wasd-controls",""),t.setAttribute("look-controls",""),t.setAttribute(i.AFRAME_INJECTED,""),t.addEventListener("object3dset",(function(n){"camera"===n.detail.type&&(e.camera=n.detail.object,e.emit("cameraready",{cameraEl:t}))})),e.appendChild(t)},disableActiveCamera:function(){var t;(t=this.sceneEl.querySelectorAll("[camera]"))[t.length-1].setAttribute("camera","active",!0)},setActiveCamera:function(t){var e,n,i,r,o=this.activeCameraEl,s=this.sceneEl;if((r=t.getObject3D("camera"))&&t!==this.activeCameraEl){var a=s.querySelector("[data-aframe-default-camera]");for(t!==(a&&a.querySelector("[camera]"))&&function(t){var e;t.camera&&(e=t.querySelector("[data-aframe-default-camera]"))&&t.removeChild(e)}(s),this.activeCameraEl=t,this.activeCameraEl.play(),s.camera=r,o&&o.setAttribute("camera","active",!1),n=s.querySelectorAll("[camera]"),i=0;i<n.length;i++)(e=n[i]).isEntity&&t!==e&&(e.setAttribute("camera","active",!1),e.pause());s.emit("camera-set-active",{cameraEl:t})}},setSpectatorCamera:function(t){var e,n=this.spectatorCameraEl,i=this.sceneEl;t.getObject3D("camera")&&t!==this.spectatorCameraEl&&(n&&n.setAttribute("camera","spectator",!1),e=this.spectatorCameraEl=t,i.addEventListener("enter-vr",this.wrapRender),i.addEventListener("exit-vr",this.unwrapRender),e.setAttribute("camera","active",!1),e.play(),i.emit("camera-set-spectator",{cameraEl:t}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){this.spectatorCameraEl&&!this.originalRender&&(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){this.originalRender&&(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(t,e){var n,i,r=this.sceneEl;n=r.renderer.xr.enabled,this.originalRender.call(r.renderer,t,e),this.spectatorCameraEl&&!r.isMobile&&n&&(i=this.spectatorCameraEl.components.camera.camera,r.renderer.xr.enabled=!1,this.originalRender.call(r.renderer,t,i),r.renderer.xr.enabled=n)}})},{"../constants/":122,"../core/system":141}],188:[function(t,e,n){var i=t("../core/geometry").geometries,r=t("../core/system").registerSystem,o=t("../lib/three");function s(t){var e,n,r=t.primitive,s=i[r]&&i[r].Geometry,a=new s;if(!s)throw new Error("Unknown geometry `"+r+"`");return a.init(t),e=a.geometry,t.buffer?((n=(new o.BufferGeometry).fromGeometry(e)).metadata={type:e.type,parameters:e.parameters||{}},e.dispose(),n):e}e.exports.System=r("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(t){var e,n,i=this.cache;return t.skipCache?s(t):(e=i[n=this.hash(t)],function(t,e){t[e]=void 0===t[e]?1:t[e]+1}(this.cacheCount,n),e||(e=s(t),i[n]=e,e))},unuseGeometry:function(t){var e,n=this.cache,i=this.cacheCount;t.skipCache||n[e=this.hash(t)]&&(function(t,e){t[e]--}(i,e),i[e]>0||(n[e].dispose(),delete n[e],delete i[e]))},hash:function(t){return JSON.stringify(t)}})},{"../core/geometry":131,"../core/system":141,"../lib/three":178}],189:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../lib/three");e.exports.System=i("gltf-model",{schema:{dracoDecoderPath:{default:""}},init:function(){var t=this.data.dracoDecoderPath;this.dracoLoader=new r.DRACOLoader,this.dracoLoader.setDecoderPath(t)},update:function(){var t;this.dracoLoader||(t=this.data.dracoDecoderPath,this.dracoLoader=new r.DRACOLoader,this.dracoLoader.setDecoderPath(t))},getDRACOLoader:function(){return this.dracoLoader}})},{"../core/system":141,"../lib/three":178}],190:[function(t,e,n){t("./camera"),t("./geometry"),t("./gltf-model"),t("./light"),t("./material"),t("./renderer"),t("./shadow"),t("./tracked-controls-webvr"),t("./tracked-controls-webxr"),t("./webxr")},{"./camera":187,"./geometry":188,"./gltf-model":189,"./light":191,"./material":192,"./renderer":193,"./shadow":194,"./tracked-controls-webvr":195,"./tracked-controls-webxr":196,"./webxr":197}],191:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../utils/bind"),o=t("../constants/");e.exports.System=i("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",r(this.setupDefaultLights,this))},registerLight:function(t){t.hasAttribute("data-aframe-default-light")||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var t,e=this.sceneEl;if(this.defaultLights){t=document.querySelectorAll("[data-aframe-default-light]");for(var n=0;n<t.length;n++)e.removeChild(t[n]);this.defaultLights=!1}},setupDefaultLights:function(){var t,e,n=this.sceneEl;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||((t=document.createElement("a-entity")).setAttribute("light",{color:"#BBB",type:"ambient"}),t.setAttribute("data-aframe-default-light",""),t.setAttribute(o.AFRAME_INJECTED,""),n.appendChild(t),(e=document.createElement("a-entity")).setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),e.setAttribute("position",{x:-.5,y:1,z:1}),e.setAttribute("data-aframe-default-light",""),e.setAttribute(o.AFRAME_INJECTED,""),n.appendChild(e),this.defaultLights=!0)}})},{"../constants/":122,"../core/system":141,"../utils/bind":198}],192:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../lib/three"),o=t("../utils/"),s=t("../utils/material").isHLS,a=o.bind,l=o.debug,c=l("components:texture:error"),u=new r.TextureLoader,h=l("components:texture:warn");function d(t,e){var n=e.offset||{x:0,y:0},i=e.repeat||{x:1,y:1};!!e.npot&&(t.wrapS=r.ClampToEdgeWrapping,t.wrapT=r.ClampToEdgeWrapping,t.magFilter=r.LinearFilter,t.minFilter=r.LinearFilter),1===i.x&&1===i.y||(t.wrapS=r.RepeatWrapping,t.wrapT=r.RepeatWrapping,t.repeat.set(i.x,i.y)),0===n.x&&0===n.y||t.offset.set(n.x,n.y)}u.setCrossOrigin("anonymous"),e.exports.System=i("material",{init:function(){this.materials={},this.textureCounts={},this.textureCache={},this.sceneEl.addEventListener("materialtextureloaded",a(this.onMaterialTextureLoaded,this))},clearTextureCache:function(){this.textureCache={}},loadTexture:function(t,e,n){var i=this;if("CANVAS"!==t.tagName){if("VIDEO"===t.tagName)return t.src||t.srcObject||t.childElementCount||h("Video element was defined with neither `source` elements nor `src` / `srcObject` attributes."),void this.loadVideo(t,e,n);o.srcLoader.validateSrc(t,(function(t){i.loadImage(t,e,n)}),(function(t){i.loadVideo(t,e,n)}))}else this.loadCanvas(t,e,n)},loadImage:function(t,e,n){var i=this.hash(e),o=this.textureCache;o[i]||(o[i]=function(t,e){return new Promise((function(n,i){function o(t){d(t,e),t.needsUpdate=!0,n(t)}"string"==typeof t?u.load(t,o,(function(){}),(function(t){c("`$s` could not be fetched (Error code: %s; Response: %s)",t.status,t.statusText)})):o(new r.Texture(t))}))}(t,e)),o[i].then(n)},loadCanvas:function(t,e,n){var i;d(i=new r.CanvasTexture(t),e),n(i)},loadVideo:function(t,e,n){var i,o,a,l,c=this.textureCache;function u(t){t.texture.needsUpdate=!0,n(t.texture,t.videoEl)}if("string"!=typeof t){if(c[i=this.hashVideo(e,a=t)])return void c[i].then(u);!function(t){t.autoplay=t.hasAttribute("autoplay")&&"false"!==t.getAttribute("autoplay"),t.controls=t.hasAttribute("controls")&&"false"!==t.getAttribute("controls"),"false"===t.getAttribute("loop")&&t.removeAttribute("loop"),"false"===t.getAttribute("preload")&&(t.preload="none"),t.crossOrigin=t.crossOrigin||"anonymous",t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline","")}(a)}a=a||function(t,e,n){var i=document.createElement("video");return i.width=e,i.height=n,i.setAttribute("playsinline",""),i.setAttribute("webkit-playsinline",""),i.autoplay=!0,i.loop=!0,i.crossOrigin="anonymous",i.addEventListener("error",(function(){h("`$s` is not a valid video",t)}),!0),i.src=t,i}(t,e.width,e.height),c[i=this.hashVideo(e,a)]?c[i].then(u):((o=new r.VideoTexture(a)).minFilter=r.LinearFilter,d(o,e),this.sceneEl.isIOS&&s(a.src||a.getAttribute("src"),a.type||a.getAttribute("type"))&&(o.format=r.RGBAFormat,o.needsCorrectionBGRA=!0,o.flipY=!1,o.needsCorrectionFlipY=!0),l={texture:o,videoEl:a},c[i]=Promise.resolve(l),u(l))},hash:function(t){return t.src.tagName&&((t=o.extendDeep({},t)).src=t.src.src),JSON.stringify(t)},hashVideo:function(t,e){return function(t,e){var n,i,r,o=e.getAttribute("id");if(o)return o;for(i="",r=t||{},n=0;n<e.attributes.length;n++)r[e.attributes[n].name]=e.attributes[n].value;return Object.keys(r).sort().forEach((function(t){i+=t+":"+r[t]+";"})),i}(t,e)},registerMaterial:function(t){this.materials[t.uuid]=t},unregisterMaterial:function(t){delete this.materials[t.uuid];var e=this.textureCounts;Object.keys(t).filter((function(e){return t[e]&&t[e].isTexture})).forEach((function(n){e[t[n].uuid]--,e[t[n].uuid]<=0&&t[n].dispose()}))},updateMaterials:function(t){var e=this.materials;Object.keys(e).forEach((function(t){e[t].needsUpdate=!0}))},onMaterialTextureLoaded:function(t){this.textureCounts[t.detail.texture.uuid]||(this.textureCounts[t.detail.texture.uuid]=0),this.textureCounts[t.detail.texture.uuid]++}})},{"../core/system":141,"../lib/three":178,"../utils/":204,"../utils/material":208}],193:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../utils/"),o=t("../lib/three"),s=(0,r.debug)("components:renderer:warn");e.exports.System=i("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:r.device.isOculusBrowser()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:1920},maxCanvasHeight:{default:1920},physicallyCorrectLights:{default:!1},precision:{default:"high",oneOf:["high","medium","low"]},sortObjects:{default:!1},colorManagement:{default:!1},gammaOutput:{default:!1},alpha:{default:!0},foveationLevel:{default:0}},init:function(){var t=this.data,e=this.el,n=e.renderer;n.sortObjects=t.sortObjects,n.physicallyCorrectLights=t.physicallyCorrectLights,(t.colorManagement||t.gammaOutput)&&(n.outputEncoding=o.sRGBEncoding,t.gammaOutput&&s('Property `gammaOutput` is deprecated. Use `renderer="colorManagement: true;"` instead.')),e.hasAttribute("antialias")&&s('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),e.hasAttribute("logarithmicDepthBuffer")&&s('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.')},applyColorCorrection:function(t){this.data.colorManagement&&t&&(t.isColor?t.convertSRGBToLinear():t.isTexture&&(t.encoding=o.sRGBEncoding))}})},{"../core/system":141,"../lib/three":178,"../utils/":204}],194:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../lib/three"),o={basic:r.BasicShadowMap,pcf:r.PCFShadowMap,pcfsoft:r.PCFSoftShadowMap};e.exports.System=i("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var t=this.sceneEl,e=this.data;this.shadowMapEnabled=!1,t.renderer&&(t.renderer.shadowMap.type=o[e.type],t.renderer.shadowMap.autoUpdate=e.autoUpdate,this.setShadowMapEnabled(this.shadowMapEnabled))},update:function(t){t.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.data.enabled)},setShadowMapEnabled:function(t){var e=this.sceneEl.renderer;this.shadowMapEnabled=this.data.enabled&&t,e&&(e.shadowMap.enabled=this.shadowMapEnabled)}})},{"../core/system":141,"../lib/three":178}],195:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../utils"),o=r.device.isWebXRAvailable;e.exports.System=i("tracked-controls-webvr",{init:function(){var t=this;this.controllers=[],this.isChrome=-1!==navigator.userAgent.indexOf("Chrome"),this.updateControllerList(),this.throttledUpdateControllerList=r.throttle(this.updateControllerList,500,this),o||navigator.getVRDisplays&&this.sceneEl.addEventListener("enter-vr",(function(){navigator.getVRDisplays().then((function(e){e.length&&(t.vrDisplay=e[0])}))}))},tick:function(){this.isChrome?this.updateControllerList():this.throttledUpdateControllerList()},updateControllerList:function(){var t,e,n,i,r=this.controllers;if(e=navigator.getGamepads&&navigator.getGamepads()){for(i=r.length,r.length=0,n=0;n<e.length;++n)(t=e[n])&&t.pose&&r.push(t);r.length!==i&&this.el.emit("controllersupdated",void 0,!1)}}})},{"../core/system":141,"../utils":204}],196:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../utils");e.exports.System=i("tracked-controls-webxr",{init:function(){this.controllers=[],this.oldControllers=[],this.oldControllersLength=0,this.throttledUpdateControllerList=r.throttle(this.updateControllerList,500,this),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.addEventListener("enter-vr",this.updateReferenceSpace),this.el.addEventListener("exit-vr",this.updateReferenceSpace)},tick:function(){this.throttledUpdateControllerList()},updateReferenceSpace:function(){var t=this,e=this.el.xrSession;if(!e)return this.referenceSpace=void 0,this.controllers=[],void(this.oldControllersLength>0&&(this.oldControllersLength=0,this.el.emit("controllersupdated",void 0,!1)));var n=t.el.sceneEl.systems.webxr.sessionReferenceSpaceType;e.requestReferenceSpace(n).then((function(e){t.referenceSpace=e})).catch((function(e){throw t.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(n,'tracked-controls-webxr uses reference space "'+n+'".'),e}))},updateControllerList:function(){var t,e=this.el.xrSession,n=this.oldControllers;if(!e){if(0===this.oldControllersLength)return;return this.oldControllersLength=0,this.controllers=[],void this.el.emit("controllersupdated",void 0,!1)}if(e.inputSources){if(this.controllers=e.inputSources,this.oldControllersLength===this.controllers.length){var i=!0;for(t=0;t<this.controllers.length;++t)if(this.controllers[t]!==n[t]||this.controllers[t].gamepad!==n[t].gamepad){i=!1;break}if(i)return}for(n.length=0,t=0;t<this.controllers.length;t++)n.push(this.controllers[t]);this.oldControllersLength=this.controllers.length,this.el.emit("controllersupdated",void 0,!1)}}})},{"../core/system":141,"../utils":204}],197:[function(t,e,n){var i=t("../core/system").registerSystem,r=t("../utils/").debug("systems:webxr:warn");e.exports.System=i("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var t=this.data;this.sessionConfiguration={requiredFeatures:t.requiredFeatures,optionalFeatures:t.optionalFeatures},this.sessionReferenceSpaceType=t.referenceSpaceType,t.overlayElement&&(this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:t.overlayElement})},wasFeatureRequested:function(t){return"viewer"===t||"local"===t||!(!this.sessionConfiguration.requiredFeatures.includes(t)&&!this.sessionConfiguration.optionalFeatures.includes(t))},warnIfFeatureNotRequested:function(t,e){this.wasFeatureRequested(t)||r((e?e+" ":"")+'Please add the feature "'+t+"\" to a-scene's webxr system options in requiredFeatures/optionalFeatures.")}})},{"../core/system":141,"../utils/":204}],198:[function(t,e,n){e.exports=function(t,e){return n=Array.prototype.slice.call(arguments,2),function(){var i=n.concat(Array.prototype.slice.call(arguments,0));return t.apply(e,i)};var n}},{}],199:[function(t,e,n){var i=t("./debug"),r=t("object-assign"),o=i("utils:coordinates:warn"),s=["x","y","z","w"],a=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;e.exports.regex=a;var l=/\s+/g;function c(t){return a.test(t)}function u(t){return null!=t&&t.constructor===String?parseFloat(t,10):t}e.exports.parse=function(t,e){var n,i,o,a,c,h,d,p,f;if(t&&t instanceof Object)return d=void 0===t.y?e&&e.y:t.y,p=void 0===t.z?e&&e.z:t.z,f=void 0===t.w?e&&e.w:t.w,null!=(h=void 0===t.x?e&&e.x:t.x)&&(t.x=u(h)),null!=d&&(t.y=u(d)),null!=p&&(t.z=u(p)),null!=f&&(t.w=u(f)),t;if(null==t)return"object"==typeof e?r({},e):e;for(n=t.trim().split(l),c={},a=0;a<s.length;a++)if(o=s[a],n[a])c[o]=parseFloat(n[a],10);else{if(void 0===(i=e&&e[o]))continue;c[o]=u(i)}return c},e.exports.stringify=function(t){var e;return"object"!=typeof t?t:(e=t.x+" "+t.y,null!=t.z&&(e+=" "+t.z),null!=t.w&&(e+=" "+t.w),e)},e.exports.isCoordinates=c,e.exports.isCoordinate=function(t){return o("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),c(t)},e.exports.toVector3=function(t){return new THREE.Vector3(t.x,t.y,t.z)}},{"./debug":200,"object-assign":39}],200:[function(t,n,i){(function(i){var r=t("debug"),o=t("object-assign"),s={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}},a=function(t){var e=r(t);return e.color=function(t){var e=function(t){var e=t.split(":");return e[e.length-1]}(t);return s.colors&&s.colors[e]||null}(t),e};o(a,r);var l=function(){try{return window.localStorage}catch(e){}}();l&&(parseInt(l.logs,10)||"true"===l.logs)?a.enable("*"):a.enable("*:error,*:info,*:warn"),i.browser&&(window.logs=a),n.exports=a}).call(this,t("_process"))},{_process:49,debug:8,"object-assign":39}],201:[function(t,e,n){(function(n){var i,r=t("debug")("device:error"),o=!1,s=!1,a=e.exports.isWebXRAvailable=!window.debug&&void 0!==navigator.xr;if(window.addEventListener("vrdisplayactivate",(function(t){var e;a||(e=document.createElement("canvas"),i=t.display,e.getContext("webgl",{}),i.requestPresent([{source:e}]).then((function(){}),(function(){})))})),a){var l=function(){var t=document.querySelector("a-scene");t?t.hasLoaded?t.components["vr-mode-ui"].updateEnterInterfaces():t.addEventListener("loaded",l):window.addEventListener("DOMContentLoaded",l)},c=function(t){r("WebXR session support error: "+t.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then((function(t){o=t,l()})).catch(c),navigator.xr.isSessionSupported("immersive-ar").then((function(t){s=t,l()})).catch((function(){}))):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then((function(){o=!0,l()})).catch(c),navigator.xr.supportsSession("immersive-ar").then((function(){s=!0,l()})).catch((function(){}))):r("WebXR has neither isSessionSupported or supportsSession?!")}else navigator.getVRDisplays&&navigator.getVRDisplays().then((function(t){var e=document.querySelector("a-scene");i=t.length&&t[0],e&&e.emit("displayconnected",{vrDisplay:i})}));function u(){return i}e.exports.getVRDisplay=u,e.exports.checkHeadsetConnected=function(){return o||s||!!u()},e.exports.checkARSupport=function(){return s};var h,d,p=(d=!1,h=window.navigator.userAgent||window.navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(h)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(h.substr(0,4)))&&(d=!0),(m()||f()||b())&&(d=!0),y()&&(d=!1),function(){return d});function f(t){var e=t||window.navigator.userAgent;return/ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(e)}function m(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}function g(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}function v(){return/(Mobile VR)/i.test(window.navigator.userAgent)}function y(){return g()||v()}function b(){return/R7 Build/.test(window.navigator.userAgent)}e.exports.isMobile=p,e.exports.isTablet=f,e.exports.isIOS=m,e.exports.isMobileDeviceRequestingDesktopSite=function(){return!p()&&!y()&&void 0!==window.orientation},e.exports.isOculusBrowser=g,e.exports.isFirefoxReality=v,e.exports.isMobileVR=y,e.exports.isR7=b,e.exports.isLandscape=function(){var t=window.orientation;return b()&&(t+=90),90===t||-90===t},e.exports.isBrowserEnvironment=!(n&&!n.browser),e.exports.isNodeEnvironment=!e.exports.isBrowserEnvironment}).call(this,t("_process"))},{_process:49,debug:8}],202:[function(t,e,n){var i={};function r(t,e){return i[e=e||"."]||(i[e]={}),i[e][t]=-1!==t.indexOf(e)?t.split(e):t,i[e][t]}e.exports.getComponentPropertyPath=r,e.exports.propertyPathCache=i,e.exports.getComponentProperty=function(t,e,n){var i;return-1!==e.indexOf(n=n||".")?(i=r(e,n)).constructor===String?t.getAttribute(i):t.getAttribute(i[0])[i[1]]:t.getAttribute(e)},e.exports.setComponentProperty=function(t,e,n,i){var o;-1===e.indexOf(i=i||".")?t.setAttribute(e,n):(o=r(e,i)).constructor===String?t.setAttribute(o,n):t.setAttribute(o[0],o[1],n)}},{}],203:[function(t,e,n){e.exports=function(t){var e=t.style.width,n=t.style.height;t.style.width=parseInt(e,10)+1+"px",t.style.height=parseInt(n,10)+1+"px",setTimeout((function(){t.style.width=e,t.style.height=n}),200)}},{}],204:[function(t,e,n){var i=t("./debug"),r=t("deep-assign"),o=t("./device"),s=t("object-assign"),a=t("./object-pool"),l=i("utils:warn");e.exports.bind=t("./bind"),e.exports.coordinates=t("./coordinates"),e.exports.debug=i,e.exports.device=o,e.exports.entity=t("./entity"),e.exports.forceCanvasResizeSafariMobile=t("./forceCanvasResizeSafariMobile"),e.exports.isIE11=t("./is-ie11"),e.exports.material=t("./material"),e.exports.objectPool=a,e.exports.split=t("./split").split,e.exports.styleParser=t("./styleParser"),e.exports.trackedControls=t("./tracked-controls"),e.exports.checkHeadsetConnected=function(){return l("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),o.checkHeadsetConnected(arguments)},e.exports.isGearVR=e.exports.device.isGearVR=function(){l("`utils.isGearVR` has been deprecated, use `utils.device.isMobileVR`")},e.exports.isIOS=function(){return l("`utils.isIOS` has moved to `utils.device.isIOS`"),o.isIOS(arguments)},e.exports.isOculusGo=e.exports.device.isOculusGo=function(){l("`utils.isOculusGo` has been deprecated, use `utils.device.isMobileVR`")},e.exports.isMobile=function(){return l("`utils.isMobile has moved to `utils.device.isMobile`"),o.isMobile(arguments)},e.exports.throttle=function(t,n,i){var r;return i&&(t=e.exports.bind(t,i)),function(){var e=Date.now(),i=void 0===r?n:e-r;(void 0===r||i>=n)&&(r=e,t.apply(null,arguments))}},e.exports.throttleTick=function(t,n,i){var r;return i&&(t=e.exports.bind(t,i)),function(e,i){var o=void 0===r?i:e-r;(void 0===r||o>=n)&&(r=e,t(e,o))}},e.exports.debounce=function(t,e,n){var i;return function(){var r=this,o=arguments,s=function(){i=null,n||t.apply(r,o)},a=n&&!i;clearTimeout(i),i=setTimeout(s,e),a&&t.apply(r,o)}},e.exports.extend=s,e.exports.extendDeep=r,e.exports.clone=function(t){return JSON.parse(JSON.stringify(t))};var c,u,h=(c=a.createPool((function(){return[]})),function(t,e){var n,i,r,o,s,a;if(void 0===t||void 0===e||null===t||null===e||!(t&&e&&t.constructor===Object&&e.constructor===Object||t.constructor===Array&&e.constructor===Array))return t===e;for(n in i=c.use(),r=c.use(),i.length=0,r.length=0,t)i.push(n);for(n in e)r.push(n);if(i.length!==r.length)return c.recycle(i),c.recycle(r),!1;for(o=0;o<i.length;++o)if(a=e[i[o]],"object"==typeof(s=t[i[o]])||"object"==typeof a||Array.isArray(s)&&Array.isArray(a)){if(s===a)continue;if(!h(s,a))return c.recycle(i),c.recycle(r),!1}else if(s!==a)return c.recycle(i),c.recycle(r),!1;return c.recycle(i),c.recycle(r),!0});e.exports.deepEqual=h,e.exports.diff=(u=[],function(t,e,n){var i,r,o,s,a,l,c;for(a in s=n||{},u.length=0,t)u.push(a);if(!e)return s;for(o in e)-1===u.indexOf(o)&&u.push(o);for(l=0;l<u.length;l++)r=e[a=u[l]],((c=(i=t[a])&&r&&i.constructor===Object&&r.constructor===Object)&&!h(i,r)||!c&&i!==r)&&(s[a]=r);return s}),e.exports.shouldCaptureKeyEvent=function(t){return!t.metaKey&&document.activeElement===document.body},e.exports.splitString=function(t,e){void 0===e&&(e=" ");var n=new RegExp(e,"g");return(t=(t||"").replace(n,e)).split(e)},e.exports.getElData=function(t,e){e=e||{};var n={};return Object.keys(e).forEach((function(e){t.hasAttribute(e)&&(n[e]=t.getAttribute(e))})),n},e.exports.getUrlParameter=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},e.exports.isIframed=function(){return window.top!==window.self},e.exports.findAllScenes=function(t){for(var e=[],n=t.getElementsByTagName("*"),i=0,r=n.length;i<r;i++)n[i].isScene&&e.push(n[i]);return e},e.exports.srcLoader=t("./src-loader")},{"./bind":198,"./coordinates":199,"./debug":200,"./device":201,"./entity":202,"./forceCanvasResizeSafariMobile":203,"./is-ie11":206,"./material":208,"./object-pool":209,"./split":210,"./src-loader":211,"./styleParser":212,"./tracked-controls":213,"deep-assign":10,"object-assign":39}],205:[function(t,e,n){window.addEventListener("orientationchange",(function(){document.documentElement.style.height="initial",setTimeout((function(){document.documentElement.style.height="100%",setTimeout((function(){window.scrollTo(0,1)}),500)}),500)}))},{}],206:[function(t,e,n){var i,r;e.exports=11===(i=-1,r=navigator.userAgent,"Microsoft Internet Explorer"===navigator.appName?null!=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(r)&&(i=parseFloat(RegExp.$1)):"Netscape"===navigator.appName&&null!=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})").exec(r)&&(i=parseFloat(RegExp.$1)),i)},{}],207:[function(t,e,n){e.exports=function(t){return/(iphone|ipod|ipad).*os.(7_|8_|9_)/i.test(t)}},{}],208:[function(t,e,n){var i=t("../lib/three"),r=["application/x-mpegurl","application/vnd.apple.mpegurl"],o=new Set(["emissiveMap","envMap","map","specularMap"]);function s(t,e){e&&(t.emit("materialtextureloaded",{src:e.image,texture:e}),e.image&&"VIDEO"===e.image.tagName&&(e.image.addEventListener("loadeddata",(function(){t.components&&t.components.material&&(e.needsCorrectionBGRA&&e.needsCorrectionFlipY&&-1!==["standard","flat"].indexOf(t.components.material.data.shader)&&t.setAttribute("material","shader","ios10hls"),t.emit("materialvideoloadeddata",{src:e.image,texture:e}))})),e.image.addEventListener("ended",(function(){t.emit("materialvideoended",{src:e.image,texture:e})}))))}e.exports.updateMapMaterialFromData=function(t,e,n,r){var a=n.el,l=n.material,c=a.sceneEl.systems.renderer,u=r[e];if(n.materialSrcs||(n.materialSrcs={}),!u)return delete n.materialSrcs[t],void h(null);function h(e){l[t]=e,e&&o.has(t)&&c.applyColorCorrection(e),l.needsUpdate=!0,s(a,e)}u!==n.materialSrcs[t]&&(n.materialSrcs[t]=u,u instanceof i.Texture?h(u):a.sceneEl.systems.material.loadTexture(u,{src:u,repeat:r.repeat,offset:r.offset,npot:r.npot},(function(e){n.materialSrcs[t]===u&&h(e)})))},e.exports.updateMap=function(t,n){return e.exports.updateMapMaterialFromData("map","src",t,n)},e.exports.updateDistortionMap=function(t,e,n){var i=t;"ambientOcclusion"===t&&(i="ao");var r=e.el,a=e.material,l=r.sceneEl.systems.renderer,c=n[t+"Map"],u={};if(u.src=c,u.offset=n[t+"TextureOffset"],u.repeat=n[t+"TextureRepeat"],u.wrap=n[t+"TextureWrap"],c){if(c===e[t+"TextureSrc"])return;return e[t+"TextureSrc"]=c,void r.sceneEl.systems.material.loadTexture(c,u,h)}function h(t){var e=i+"Map";a[e]=t,t&&o.has(e)&&l.applyColorCorrection(t),a.needsUpdate=!0,s(r,t)}a.map&&h(null)},e.exports.handleTextureEvents=s,e.exports.isHLS=function(t,e){return!(!e||!r.includes(e.toLowerCase()))||!!(t&&t.toLowerCase().indexOf(".m3u8")>0)}},{"../lib/three":178}],209:[function(t,e,n){var i=Object.freeze(Object.create(null));function r(){return{}}function o(t){var e;if(t&&t.constructor===Object)for(e in t)t[e]=void 0}e.exports.createPool=function(t){var e=[],n=null;function s(i){var r,o;if((i=void 0===i?e.length:i)>0&&null==n&&(n=0),i>0)for(r=e.length,e.length+=Number(i),o=r;o<e.length;o++)e[o]=t();return e.length}return t=t||r,{grow:s,pool:e,recycle:function(t){t instanceof Object&&(null!==n&&-1!==n?e[--n]=t:e[e.length]=t)},size:function(){return e.length},use:function(){var t;return null!==n&&n!==e.length||s(e.length||5),t=e[n],e[n++]=i,o(t),t}}},e.exports.clearObject=o,e.exports.removeUnusedKeys=function(t,e){var n;if(t&&t.constructor===Object)for(n in t)n in e||delete t[n]}},{}],210:[function(t,e,n){var i;e.exports.split=(i={},function(t,e){return e in i||(i[e]={}),t in i[e]||(i[e][t]=t.split(e)),i[e][t]})},{}],211:[function(t,n,i){var r=t("./debug")("utils:src-loader:warn");function o(t,e,n){!function(t,e){var n;t.tagName?e("IMG"===t.tagName):((n=new XMLHttpRequest).open("HEAD",t),n.addEventListener("load",(function(i){var r;n.status>=200&&n.status<300?null==(r=n.getResponseHeader("Content-Type"))?a(t,e):r.startsWith("image")?e(!0):e(!1):a(t,e),n.abort()})),n.send())}(t,(function(i){i?e(t):n(t)}))}function s(t){var e=t.match(/\url\((.+)\)/);if(e)return e[1]}function a(t,e){var n=new Image;n.addEventListener("load",(function(){e(!0)})),n.addEventListener("error",(function(){e(!1)})),n.src=t}n.exports={parseUrl:s,validateSrc:o,validateCubemapSrc:function(t,n){var i,a,l,c="",u=[];for(a=0;a<5;a++)c+="(url\\((?:[^\\)]+)\\),\\s*)";function h(t){u.push(t),6===u.length&&n(u)}if(c+="(url\\((?:[^\\)]+)\\)\\s*)",l=t.match(new RegExp(c)))for(a=1;a<7;a++)o(s(l[a]),h);else if(i=function(t){try{var n=document.querySelector(t);return n||r('No element was found matching the selector: "%s"',t),n}catch(e){return void r('"%s" is not a valid selector',t)}}(t))return"A-CUBEMAP"===i.tagName&&i.srcs?n(i.srcs):void r('Selector "%s" does not point to <a-cubemap>',t)}}},{"./debug":200}],212:[function(t,e,n){var i=/-([a-z])/g;function r(t){return t.replace(i,c)}function o(t){var e,n;for(n in t)n!==(e=r(n))&&(t[e]=t[n],delete t[n]);return t}e.exports.parse=function(t,e){var n;return"string"!=typeof t||(n=function(t,e){var n,i,r,o,s,a;for(e=e||{},n=l(t),i=0;i<n.length;i++)(r=n[i])&&(o=r.indexOf(":"),s=r.substr(0,o).trim(),a=r.substr(o+1).trim(),e[s]=a);return e}(t,e))[""]?t:o(n)},e.exports.stringify=function(t){return"string"==typeof t?t:function(t){var e,n=0,i=0,r="";for(e in t)n++;for(e in t)r+=e+": "+t[e],i<n-1&&(r+="; "),i++;return r}(t)},e.exports.toCamelCase=r,e.exports.transformKeysToCamelCase=o;var s,a,l=(s=[],a=/url\([^)]+$/,function(t){var e,n="",i=0;for(s.length=0;i<t.length;)-1===(e=t.indexOf(";",i))&&(e=t.length),n+=t.substring(i,e),a.test(n)?(n+=";",i=e+1):(s.push(n.trim()),n="",i=e+1);return s});function c(t){return t[1].toUpperCase()}},{}],213:[function(t,e,n){var i=t("../constants").DEFAULT_HANDEDNESS,r=["x","y","z","w"];function o(t,e,n){var i,r,o=t.el.sceneEl;return!!(e&&(r=o&&o.systems["tracked-controls-webvr"])&&(i=r.controllers).length&&a(i,null,e,n.hand,n.index||0))}function s(t,e,n){var i,r=t.el.sceneEl,o=r&&r.systems["tracked-controls-webxr"];return!!o&&!(!(i=o.controllers)||!i.length)&&l(i,e,n.hand,n.index,n.iterateControllerProfiles,n.handTracking)}function a(t,e,n,r,o){var s,a,l=0;for(a=0;a<t.length;a++)if(s=t[a],(!n||s.id.startsWith(n))&&(n||s.id===e)&&(!r||!s.hand||r===s.hand)){if(!r||s.hand)return s;if(l===2*o+(r===i?0:1))return s;++l}}function l(t,e,n,i,r,o){var s,a,l,c,u=!1;for(s=0;s<t.length;s++){if(c=(l=t[s]).profiles,o)u=l.hand;else if(r)for(a=0;a<c.length&&!(u=c[a].startsWith(e));a++);else u=c.length>0&&c[0].startsWith(e);if(u)if("right"===l.handedness||"left"===l.handedness){if(l.handedness===n)return t[s]}else if(s===i)return t[s]}}e.exports.checkControllerPresentAndSetup=function(t,e,n){var i,r,a=t.el,l=a.sceneEl.hasWebXR;if(r=!!(i=(l?s:o)(t,e,n)),!t.controllerPresent||t.controllerEventsActive||l||t.addEventListeners(),r===t.controllerPresent)return r;t.controllerPresent=r,r?(t.addEventListeners(),t.injectTrackedControls(i),a.emit("controllerconnected",{name:t.name,component:t})):(t.removeEventListeners(),a.emit("controllerdisconnected",{name:t.name,component:t}))},e.exports.isControllerPresentWebVR=o,e.exports.isControllerPresentWebXR=s,e.exports.findMatchingControllerWebVR=a,e.exports.findMatchingControllerWebXR=l,e.exports.emitIfAxesChanged=function(t,e,n){var i,o,s,a,l;for(o in e){for(i=e[o],s=!1,l=0;l<i.length;l++)n.detail.changed[i[l]]&&(s=!0);if(s){for(a={},l=0;l<i.length;l++)a[r[l]]=n.detail.axis[i[l]];t.el.emit(o+"moved",a)}}},e.exports.onButtonEvent=function(t,e,n,i){var r=(i?n.mapping[i]:n.mapping).buttons[t];n.el.emit(r+e),n.updateModel&&n.updateModel(r,e)}},{"../constants":122}],214:[function(t,e,n){THREE.DeviceOrientationControls=function(t){var e=this;this.object=t,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var n,i,r,o,s=function(t){e.deviceOrientation=t},a=function(){e.screenOrientation=window.orientation||0},l=(n=new THREE.Vector3(0,0,1),i=new THREE.Euler,r=new THREE.Quaternion,o=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(t,e,s,a,l){i.set(s,e,-a,"YXZ"),t.setFromEuler(i),t.multiply(o),t.multiply(r.setFromAxisAngle(n,-l))});this.connect=function(){a(),window.addEventListener("orientationchange",a,!1),window.addEventListener("deviceorientation",s,!1),e.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",a,!1),window.removeEventListener("deviceorientation",s,!1),e.enabled=!1},this.update=function(){if(!1!==e.enabled){var t=e.deviceOrientation;if(t){var n=t.alpha?THREE.Math.degToRad(t.alpha)+e.alphaOffset:0,i=t.beta?THREE.Math.degToRad(t.beta):0,r=t.gamma?THREE.Math.degToRad(t.gamma):0,o=e.screenOrientation?THREE.Math.degToRad(e.screenOrientation):0;l(e.object.quaternion,n,i,r,o)}}},this.dispose=function(){e.disconnect()},this.connect()}},{}],215:[function(t,e,n){window.glStats=function(){var t=null,e=0,n=0,i=0,r=0,o=0,s=0,a=0;function l(t,e){return function(){e.apply(this,arguments),t.apply(this,arguments)}}return WebGLRenderingContext.prototype.drawArrays=l(WebGLRenderingContext.prototype.drawArrays,(function(){e++,arguments[0]==this.POINTS?s+=arguments[2]:o+=arguments[2]})),WebGLRenderingContext.prototype.drawElements=l(WebGLRenderingContext.prototype.drawElements,(function(){n++,r+=arguments[1]/3,o+=arguments[1]})),WebGLRenderingContext.prototype.useProgram=l(WebGLRenderingContext.prototype.useProgram,(function(){i++})),WebGLRenderingContext.prototype.bindTexture=l(WebGLRenderingContext.prototype.bindTexture,(function(){a++})),{update:function(){t("allcalls").set(e+n),t("drawElements").set(n),t("drawArrays").set(e),t("bindTexture").set(a),t("useProgram").set(i),t("glfaces").set(r),t("glvertices").set(o),t("glpoints").set(s)},start:function(){e=0,n=0,i=0,r=0,o=0,s=0,a=0},end:function(){},attach:function(e){t=e},values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(t){var e=null;return{update:function(){e("renderer.info.memory.geometries").set(t.info.memory.geometries),e("renderer.info.programs").set(t.info.programs.length),e("renderer.info.memory.textures").set(t.info.memory.textures),e("renderer.info.render.calls").set(t.info.render.calls),e("renderer.info.render.triangles").set(t.info.render.triangles),e("renderer.info.render.points").set(t.info.render.points)},start:function(){},end:function(){},attach:function(t){e=t},values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],fractions:[]}},window.BrowserStats=function(){var t=null,e=0,n=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),0===performance.memory.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var i=Math.log(1024);function r(t){var e=Math.floor(Math.log(t)/i);return Math.round(100*t/Math.pow(1024,e))/100}return{update:function(){e=r(performance.memory.usedJSHeapSize),n=r(performance.memory.totalJSHeapSize),t("memory").set(e),t("total").set(n)},start:function(){e=0},end:function(){},attach:function(e){t=e},values:{memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},groups:[{caption:"Browser",values:["memory","total"]}],fractions:[{base:"total",steps:["memory"]}]}},"object"==typeof e&&(e.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats})},{}],216:[function(t,e,n){"use strict";!function(){"performance"in window==0&&(window.performance={});var t=window.performance;if("now"in t==0){var e=Date.now();t.timing&&t.timing.navigationStart&&(e=t.timing.navigationStart),t.now=function(){return Date.now()-e}}t.mark||(t.mark=function(){}),t.measure||(t.measure=function(){})}(),window.rStats=function(t){function e(t,e){for(var n=Object.keys(t),i=0,r=n.length;i<r;i++)e(n[i])}var n=t||{},i=n.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"];(n.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",(n.CSSPath?n.CSSPath:"")+"rStats.css"]).forEach((function(t){var e,n;e=t,(n=document.createElement("link")).href=e,n.rel="stylesheet",n.type="text/css",document.getElementsByTagName("head")[0].appendChild(n)})),n.values||(n.values={});var r,o,s={};function a(t,e,n){var i=n||{},r=document.createElement("canvas"),o=r.getContext("2d"),s=0,a=0,l=i.color?i.color:"#666666",c=document.createElement("canvas"),u=c.getContext("2d");c.width=1,c.height=20,u.fillStyle="#444444",u.fillRect(0,0,1,20),u.fillStyle=l,u.fillRect(0,10,1,10),u.fillStyle="#ffffff",u.globalAlpha=.5,u.fillRect(0,10,1,1),u.globalAlpha=1;var h=document.createElement("canvas"),d=h.getContext("2d");return h.width=1,h.height=20,d.fillStyle="#444444",d.fillRect(0,0,1,20),d.fillStyle="#b70000",d.fillRect(0,10,1,10),d.globalAlpha=.5,d.fillStyle="#ffffff",d.fillRect(0,10,1,1),d.globalAlpha=1,r.width=200,r.height=10,r.style.width=r.width+"px",r.style.height=r.height+"px",r.className="rs-canvas",t.appendChild(r),o.fillStyle="#444444",o.fillRect(0,0,r.width,r.height),{draw:function(t,e){(a+=.1*(t-a))>(s*=.99)&&(s=a),o.drawImage(r,1,0,r.width-1,r.height,0,0,r.width-1,r.height),o.drawImage(e?h:c,r.width-1,r.height-a*r.height/s-10)}}}function l(t,n){var r=document.createElement("canvas"),o=r.getContext("2d");return r.width=200,r.height=10*n,r.style.width=r.width+"px",r.style.height=r.height+"px",r.className="rs-canvas",t.appendChild(r),o.fillStyle="#444444",o.fillRect(0,0,r.width,r.height),{draw:function(t){o.drawImage(r,1,0,r.width-1,r.height,0,0,r.width-1,r.height);var n=0;e(t,(function(e){var s=t[e]*r.height;o.fillStyle=i[e],o.fillRect(r.width-1,n,1,s),n+=s}))}}}function c(t,e){var i,r=t,s=0,l=0,c=0,u=0,h=performance.now(),d=0,p=document.createElement("div"),f=document.createElement("span"),m=document.createElement("div"),g=document.createTextNode(""),v=n?n.values[r.toLowerCase()]:null,y=new a(p,r,v),b=!1;function _(t){if(v&&v.average){u+=t,d++;var e=performance.now();e-h>=(v.avgMs||1e3)&&(c=u/d,u=0,h=e,d=0)}}function w(){i=performance.now(),n.userTimingAPI&&performance.mark(r+"-start"),b=!0}function A(){s=performance.now()-i,n.userTimingAPI&&(performance.mark(r+"-end"),b&&performance.measure(r,r+"-start",r+"-end")),_(s)}return f.className="rs-counter-id",f.textContent=v&&v.caption?v.caption:r,m.className="rs-counter-value",m.appendChild(g),p.appendChild(f),p.appendChild(m),e?e.div.appendChild(p):o.appendChild(p),i=performance.now(),{set:function(t){_(s=t)},start:w,tick:function(){A(),w()},end:A,frame:function(){var t=performance.now(),e=t-i;l++,e>1e3&&(s=v&&!1===v.interpolate?l:1e3*l/e,l=0,i=t,_(s))},value:function(){return s},draw:function(){g.nodeValue=Math.round(100*(v&&v.average?c:s))/100;var t=v&&(v.below&&s<v.below||v.over&&s>v.over);y.draw(s,t),p.className=t?"rs-counter-base alarm":"rs-counter-base"}}}function u(t){var i=t.toLowerCase();if(void 0===i&&(i="default"),s[i])return s[i];var r=null;n&&n.groups&&e(n.groups,(function(t){var e=n.groups[parseInt(t,10)];r||-1===e.values.indexOf(i.toLowerCase())||(r=e)}));var o=new c(i,r);return s[i]=o,o}function h(){e(n.plugins,(function(t){n.plugins[t].update()})),e(s,(function(t){s[t].draw()})),n&&n.fractions&&e(n.fractions,(function(t){var i=n.fractions[parseInt(t,10)],r=[],o=s[i.base.toLowerCase()];o&&(o=o.value(),e(n.fractions[t].steps,(function(e){var i=n.fractions[t].steps[parseInt(e,10)].toLowerCase(),a=s[i];a&&r.push(a.value()/o)}))),i.graph.draw(r)}))}return function(){if(n.plugins){n.values||(n.values={}),n.groups||(n.groups=[]),n.fractions||(n.fractions=[]);for(var t=0;t<n.plugins.length;t++)n.plugins[t].attach(u),e(n.plugins[t].values,(function(e){n.values[e]=n.plugins[t].values[e]})),n.groups=n.groups.concat(n.plugins[t].groups),n.fractions=n.fractions.concat(n.plugins[t].fractions)}else n.plugins={};(r=document.createElement("div")).className="rs-base",(o=document.createElement("div")).className="rs-container",o.style.height="auto",r.appendChild(o),document.body.appendChild(r),n&&(n.groups&&e(n.groups,(function(t){var e=n.groups[parseInt(t,10)],i=document.createElement("div");i.className="rs-group",e.div=i;var r=document.createElement("h1");r.textContent=e.caption,r.addEventListener("click",(function(t){this.classList.toggle("hidden"),t.preventDefault()}).bind(i)),o.appendChild(r),o.appendChild(i)})),n.fractions&&e(n.fractions,(function(t){var r=n.fractions[parseInt(t,10)],s=document.createElement("div");s.className="rs-fraction";var a=document.createElement("div");a.className="rs-legend";var c=0;e(n.fractions[t].steps,(function(e){var r=document.createElement("p");r.textContent=n.fractions[t].steps[e],r.style.color=i[c],a.appendChild(r),c++})),s.appendChild(a),s.style.height=10*c+"px",r.div=s;var u=new l(s,c);r.graph=u,o.appendChild(s)})))}(),function(t){return t?u(t):{element:r,update:h}}},"object"==typeof e&&(e.exports=window.rStats)},{}],217:[function(t,e,n){String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e=e||0,t.length)===t})},{}],218:[function(t,n,i){n.exports={base64:function(t,e){return"data:"+t+";base64,"+e},isMobile:function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},isIOS:function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},isIFrame:function(){try{return window.self!==window.top}catch(e){return!0}},appendQueryParameter:function(t,e,n){var i=t.indexOf("?")<0?"?":"&";return t+(i+e+"=")+n},getQueryParameter:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},isLandscapeMode:function(){return 90==window.orientation||-90==window.orientation}}},{}],219:[function(t,e,n){var i,r=t("./util.js");e.exports=(i=navigator.userAgent||navigator.vendor||window.opera).match(/iPhone/i)||i.match(/iPod/i)?function(){var t=null;this.request=function(){t||(t=setInterval((function(){window.location.href="/",setTimeout(window.stop,0)}),15e3))},this.release=function(){t&&(clearInterval(t),t=null)}}:function(){var t=document.createElement("video");t.addEventListener("ended",(function(){t.play()})),this.request=function(){t.paused&&(t.src=r.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),t.play())},this.release=function(){t.pause(),t.src=""}}},{"./util.js":218}]},{},[176])(176)},wj3C:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o,s=i("mrSG"),a=i("zVF4"),l=i("S+S0"),c=i("q/0M"),u=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),h=new a.ErrorFactory("app","Firebase",u),d=((o={})["@firebase/app"]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),p=new c.Logger("@firebase/app"),f=function(){function t(t,e,n){var i,r,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(t),this.container=new l.ComponentContainer(e.name),this._addComponent(new l.Component("app",(function(){return o}),"PUBLIC"));try{for(var c=s.__values(this.firebase_.INTERNAL.components.values()),u=c.next();!u.done;u=c.next())this._addComponent(u.value)}catch(h){i={error:h}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(i)throw i.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();f.prototype.name&&f.prototype.options||f.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var o=r;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw h.create("bad-app-name",{appName:String(s)});if(a.contains(e,s))throw h.create("duplicate-app",{appName:s});var l=new t(n,o,i);return e[s]=l,l},app:r,registerVersion:function(t,e,n){var i,r=null!==(i=d[t])&&void 0!==i?i:t;n&&(r+="-"+n);var s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var c=['Unable to register library "'+r+'" with version "'+e+'":'];return s&&c.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),s&&a&&c.push("and"),a&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new l.Component(r+"-version",(function(){return{library:r,version:e}}),"VERSION"))},setLogLevel:c.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw h.create("invalid-log-argument",{appName:name});c.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.20.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function r(t){if(!a.contains(e,t=t||"[DEFAULT]"))throw h.create("no-app",{appName:t});return e[t]}function o(o){var l,c,u=o.name;if(n.has(u))return p.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===o.type?i[u]:null;if(n.set(u,o),"PUBLIC"===o.type){var d=function(t){if(void 0===t&&(t=r()),"function"!=typeof t[u])throw h.create("invalid-app-argument",{appName:u});return t[u]()};void 0!==o.serviceProps&&a.deepExtend(d,o.serviceProps),i[u]=d,t.prototype[u]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,u);return n.apply(this,o.multipleInstances?t:[])}}try{for(var f=s.__values(Object.keys(e)),m=f.next();!m.done;m=f.next())e[m.value]._addComponent(o)}catch(g){l={error:g}}finally{try{m&&!m.done&&(c=f.return)&&c.call(f)}finally{if(l)throw l.error}}return"PUBLIC"===o.type?i[u]:null}return i.default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),r.App=t,i}(f);return e.INTERNAL=s.__assign(s.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){a.deepExtend(e,t)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(a.isBrowser()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var y=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.isNode()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),y.apply(void 0,t)};var b=m;!function(t,e){t.INTERNAL.registerComponent(new l.Component("platform-logger",(function(t){return new g(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.11",void 0),t.registerVersion("fire-js","")}(b),n.default=b,n.firebase=b},x7I3:function(t,n,i){"use strict";i.r(n),i.d(n,"ErrorCode",(function(){return Jn})),i.d(n,"EventType",(function(){return ti})),i.d(n,"WebChannel",(function(){return ei})),i.d(n,"XhrIo",(function(){return ni})),i.d(n,"createWebChannelTransport",(function(){return Zn}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function o(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var s,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l=l||{},c=a||self;function u(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var f="closure_uid_"+(1e9*Math.random()>>>0),m=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function y(t,e,n){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:v).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now;function w(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function A(){this.j=this.j,this.i=this.i}A.prototype.j=!1,A.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,f)&&t[f]||(t[f]=++m)}(this)},A.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var x=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},C=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r="string"==typeof t?t.split(""):t,o=0;o<i;o++)o in r&&e.call(n,r[o],o,t)};function E(t){return Array.prototype.concat.apply([],arguments)}function S(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}function M(t){return/^[\s\xa0]*$/.test(t)}var T,P=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function k(t,e){return-1!=t.indexOf(e)}function D(t,e){return t<e?-1:t>e?1:0}t:{var O=c.navigator;if(O){var R=O.userAgent;if(R){T=R;break t}}T=""}function I(t,e,n){for(var i in t)e.call(n,t[i],i,t)}function L(t){var e={};for(var n in t)e[n]=t[n];return e}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function B(t){return B[" "](t),t}B[" "]=u;var U,V,j=k(T,"Opera"),z=k(T,"Trident")||k(T,"MSIE"),H=k(T,"Edge"),G=H||z,W=k(T,"Gecko")&&!(k(T.toLowerCase(),"webkit")&&!k(T,"Edge"))&&!(k(T,"Trident")||k(T,"MSIE"))&&!k(T,"Edge"),q=k(T.toLowerCase(),"webkit")&&!k(T,"Edge");function $(){var t=c.document;return t?t.documentMode:void 0}t:{var Y="",Q=(V=T,W?/rv:([^\);]+)(\)|;)/.exec(V):H?/Edge\/([\d\.]+)/.exec(V):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(V):q?/WebKit\/(\S+)/.exec(V):j?/(?:Version)[ \/]?(\S+)/.exec(V):void 0);if(Q&&(Y=Q?Q[1]:""),z){var X=$();if(null!=X&&X>parseFloat(Y)){U=String(X);break t}}U=Y}var K={};function Z(t){return function(t,e){var n=K;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=P(String(U)).split("."),i=P(String(t)).split("."),r=Math.max(n.length,i.length),o=0;0==e&&o<r;o++){var s=n[o]||"",a=i[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=D(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||D(0==s[2].length,0==a[2].length)||D(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var J=c.document&&z&&($()||parseInt(U,10))||void 0,tt=!z||9<=Number(J),et=z&&!Z("9"),nt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{c.addEventListener("test",u,e),c.removeEventListener("test",u,e)}catch(n){}return t}();function it(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function rt(t,e){if(it.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(W){t:{try{B(e.nodeName);var r=!0;break t}catch(o){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ot[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}it.prototype.b=function(){this.defaultPrevented=!0},w(rt,it);var ot={2:"touch",3:"pen",4:"mouse"};rt.prototype.b=function(){rt.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,et)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var st="closure_listenable_"+(1e6*Math.random()|0),at=0;function lt(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ca=r,this.key=++at,this.Y=this.Z=!1}function ct(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ut(t){this.src=t,this.a={},this.b=0}function ht(t,e){var n=e.type;if(n in t.a){var i,r=t.a[n],o=x(r,e);(i=0<=o)&&Array.prototype.splice.call(r,o,1),i&&(ct(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function dt(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==i)return r}return-1}ut.prototype.add=function(t,e,n,i,r){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=dt(t,e,i,r);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new lt(e,this.src,o,!!i,r)).Z=n,t.push(e)),e};var pt="closure_lm_"+(1e6*Math.random()|0),ft={};function mt(t,e,n,i,r){if(i&&i.once)return function t(e,n,i,r,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],i,r,o);return null}return i=xt(i),e&&e[st]?e.wa(n,i,p(r)?!!r.capture:!!r,o):gt(e,n,i,!0,r,o)}(t,e,n,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)mt(t,e[o],n,i,r);return null}return n=xt(n),t&&t[st]?t.va(e,n,p(i)?!!i.capture:!!i,r):gt(t,e,n,!1,i,r)}function gt(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var s=p(r)?!!r.capture:!!r;if(s&&!tt)return null;var a=wt(t);if(a||(t[pt]=a=new ut(t)),(n=a.add(e,n,i,s,o)).proxy)return n;if(i=function(){var t=_t,e=tt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)nt||(r=s),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(yt(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function vt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[st])ht(e.c,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(yt(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=wt(e))?(ht(n,t),0==n.b&&(n.src=null,e[pt]=null)):ct(t)}}}function yt(t){return t in ft?ft[t]:ft[t]="on"+t}function bt(t,e){var n=t.listener,i=t.ca||t.src;return t.Z&&vt(t),n.call(i,e)}function _t(t,e){if(t.Y)return!0;if(!tt){if(!e)t:{e=["window","event"];for(var n=c,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}return bt(t,e=new rt(e,this))}return bt(t,new rt(e,this))}function wt(t){return(t=t[pt])instanceof ut?t:null}var At="__closure_events_fn_"+(1e9*Math.random()>>>0);function xt(t){return"function"==h(t)?t:(t[At]||(t[At]=function(e){return t.handleEvent(e)}),t[At])}function Ct(){A.call(this),this.c=new ut(this),this.J=this,this.C=null}function Et(t,e,n,i){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,l=s.ca||s.src;s.Z&&ht(t.c,s),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}w(Ct,A),Ct.prototype[st]=!0,(s=Ct.prototype).addEventListener=function(t,e,n,i){mt(this,t,e,n,i)},s.removeEventListener=function(t,e,n,i){!function t(e,n,i,r,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],i,r,o);else r=p(r)?!!r.capture:!!r,i=xt(i),e&&e[st]?(e=e.c,(n=String(n).toString())in e.a&&-1<(i=dt(s=e.a[n],i,r,o))&&(ct(s[i]),Array.prototype.splice.call(s,i,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=wt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=dt(n,i,r,o)),(i=-1<e?n[e]:null)&&vt(i))}(this,t,e,n,i)},s.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var i=t.type||t;if("string"==typeof t)t=new it(t,n);else if(t instanceof it)t.target=t.target||n;else{var r=t;N(t=new it(i,n),r)}if(r=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];r=Et(s,i,!0,t)&&r}if(r=Et(s=t.a=n,i,!0,t)&&r,r=Et(s,i,!1,t)&&r,e)for(o=0;o<e.length;o++)r=Et(s=t.a=e[o],i,!1,t)&&r;return r},s.G=function(){if(Ct.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)ct(n[i]);delete e.a[t],e.b--}}this.C=null},s.va=function(t,e,n,i){return this.c.add(String(t),e,!1,n,i)},s.wa=function(t,e,n,i){return this.c.add(String(t),e,!0,n,i)};var St=c.JSON.stringify;function Mt(){this.b=this.a=null}var Tt,Pt=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new Dt}),(function(t){t.reset()}),100);function kt(){var t=Lt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Dt(){this.next=this.b=this.a=null}function Ot(t){c.setTimeout((function(){throw t}),0)}function Rt(t,e){Tt||function(){var t=c.Promise.resolve(void 0);Tt=function(){t.then(Ft)}}(),It||(Tt(),It=!0),Lt.add(t,e)}Mt.prototype.add=function(t,e){var n=Pt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Dt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Dt.prototype.reset=function(){this.next=this.b=this.a=null};var It=!1,Lt=new Mt;function Ft(){for(var t;t=kt();){try{t.a.call(t.b)}catch(n){Ot(n)}var e=Pt;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}It=!1}function Nt(t,e){Ct.call(this),this.b=t||1,this.a=e||c,this.f=y(this.Ya,this),this.g=_()}function Bt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ut(t,e,n){if("function"==h(t))n&&(t=y(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=y(t.handleEvent,t)}return 2147483647<Number(e)?-1:c.setTimeout(t,e||0)}function Vt(t){t.a=Ut((function(){t.a=null,t.c&&(t.c=!1,Vt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}w(Nt,Ct),(s=Nt.prototype).aa=!1,s.M=null,s.Ya=function(){if(this.aa){var t=_()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Bt(this),this.start()))}},s.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=_())},s.G=function(){Nt.S.G.call(this),Bt(this),delete this.a};var jt=function(t){function e(e,n,i){var r=t.call(this)||this;return r.g=null!=i?e.bind(i):e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Vt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(c.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(A);function zt(t){A.call(this),this.b=t,this.a={}}w(zt,A);var Ht=[];function Gt(t,e,n,i){Array.isArray(n)||(n&&(Ht[0]=n.toString()),n=Ht);for(var r=0;r<n.length;r++){var o=mt(e,n[r],i||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Wt(t){I(t.a,(function(t,e){this.a.hasOwnProperty(e)&&vt(t)}),t),t.a={}}function qt(){this.a=!0}function $t(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<r.length;s++)r[s]=""}}}return St(n)}catch(a){return e}}(t,n)+(i?" "+i:"")}))}zt.prototype.G=function(){zt.S.G.call(this),Wt(this)},zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qt.prototype.info=function(){};var Yt=null;function Qt(){return Yt=Yt||new Ct}function Xt(t){it.call(this,"serverreachability",t)}function Kt(t){var e=Qt();e.dispatchEvent(new Xt(e,t))}function Zt(t){it.call(this,"statevent",t)}function Jt(t){var e=Qt();e.dispatchEvent(new Zt(e,t))}function te(t){it.call(this,"timingevent",t)}function ee(t,e){if("function"!=h(t))throw Error("Fn must not be null and must be a function");return c.setTimeout((function(){t()}),e)}w(Xt,it),w(Zt,it),w(te,it);var ne={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},ie={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function re(){}function oe(){}re.prototype.a=null;var se,ae={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function le(){it.call(this,"d")}function ce(){it.call(this,"c")}function ue(){}function he(t,e,n,i){this.g=t,this.c=e,this.f=n,this.T=i||1,this.J=new zt(this),this.P=de,this.R=new Nt(t=G?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}w(le,it),w(ce,it),w(ue,re),se=new ue;var de=45e3,pe={},fe={};function me(t,e,n){t.H=1,t.i=Ne(De(e)),t.j=n,t.I=!0,ge(t,null)}function ge(t,e){t.u=_(),be(t),t.l=De(t.i);var n=t.l,i=t.T;Array.isArray(i)||(i=[String(i)]),Xe(n.b,"t",i),t.D=0,t.a=Wn(t.g,t.g.C?e:null),0<t.O&&(t.F=new jt(y(t.Ca,t,t.a),t.O)),Gt(t.J,t.a,"readystatechange",t.Wa),e=t.B?L(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Kt(1),function(t,e,n,i,r,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");s=2<=h.length&&"type"==h[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function ve(t,e,n){for(var i=!0;!t.A&&t.D<n.length;){var r=ye(t,n);if(r==fe){4==e&&(t.h=4,Jt(14),i=!1),$t(t.c,t.f,null,"[Incomplete Response]");break}if(r==pe){t.h=4,Jt(15),$t(t.c,t.f,n,"[Invalid Chunk]"),i=!1;break}$t(t.c,t.f,r,null),Ce(t,r)}4==e&&0==n.length&&(t.h=1,Jt(16),i=!1),t.b=t.b&&i,i?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Nn(e),e.F=!0)):($t(t.c,t.f,n,"[Invalid Chunked Response]"),xe(t),Ae(t))}function ye(t,e){var n=t.D,i=e.indexOf("\n",n);return-1==i?fe:(n=Number(e.substring(n,i)),isNaN(n)?pe:(i+=1)+n>e.length?fe:(e=e.substr(i,n),t.D=i+n,e))}function be(t){t.U=_()+t.P,_e(t,t.P)}function _e(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ee(y(t.Ua,t),e)}function we(t){t.o&&(c.clearTimeout(t.o),t.o=null)}function Ae(t){0==t.g.v||t.A||Vn(t.g,t)}function xe(t){we(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Bt(t.R),Wt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ce(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||rn(n.b,t)))if(n.I=t.N,!t.C&&rn(n.b,t)&&3==n.v){try{var i=n.ka.a.parse(e)}catch(g){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Un(n),Tn(n)}Fn(n),Jt(18)}}else n.oa=r[1],0<n.oa-n.P&&37500>r[2]&&n.H&&0==n.o&&!n.m&&(n.m=ee(y(n.Ra,n),6e3));if(1>=nn(n.b)&&n.ea){try{n.ea()}catch(g){}n.ea=void 0}}else zn(n,11)}else if((t.C||n.a==t)&&Un(n),!M(e))for(e=i=n.ka.a.parse(e),i=0;i<e.length;i++)if(n.P=(r=e[i])[0],r=r[1],2==n.v)if("c"==r[0]){n.J=r[1],n.ga=r[2];var o=r[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=r[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=r[5];if(null!=a&&"number"==typeof a&&0<a){var l=1.5*a;n.D=l,n.c.info("backChannelRequestTimeoutMs_="+l)}l=n;var c=t.a;if(c){var u=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(u){var h=l.b;!h.a&&(k(u,"spdy")||k(u,"quic")||k(u,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(on(h,h.b),h.b=null))}if(l.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(l.na=d,Fe(l.B,l.A,d))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=_()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((l=n).la=Gn(l,l.C?l.ga:null,l.fa),p.C){sn(l.b,p);var f=p,m=l.D;m&&f.setTimeout(m),f.o&&(we(f),be(f)),l.a=p}else Ln(l);0<n.g.length&&Dn(n)}else"stop"!=r[0]&&"close"!=r[0]||zn(n,7);else 3==n.v&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?zn(n,7):Mn(n):"noop"!=r[0]&&n.f&&n.f.sa(r),n.o=0);Kt(4)}catch(g){}}function Ee(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)C(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(d(t)||"string"==typeof t){n=[];for(var i=t.length,r=0;r<i;r++)n.push(r)}else for(r in n=[],i=0,t)n[i++]=r;r=(i=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}(t)).length;for(var o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}}function Se(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof Se)for(n=t.L(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function Me(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];Te(t.b,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.c!=t.a.length){var r={};for(n=e=0;e<t.a.length;)Te(r,i=t.a[e])||(t.a[n++]=i,r[i]=1),e++;t.a.length=n}}function Te(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(s=he.prototype).setTimeout=function(t){this.P=t},s.Wa=function(t){t=t.target;var e=this.F;e&&3==xn(t)?e.f():this.Ca(t)},s.Ca=function(t){try{if(t==this.a)t:{var e=xn(this.a),n=this.a.ua(),i=this.a.X();if(!(3>e||3==e&&!G&&!this.a.$())){this.A||4!=e||7==n||Kt(8==n||0>=i?3:2),we(this);var r=this.a.X();this.N=r;var o=this.a.$();if(this.b=200==r,function(t,e,n,i,r,o,s){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.T,e,r),this.b){if(this.V&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(s)){var l=s;break e}}l=null}if(!l){this.b=!1,this.h=3,Jt(12),xe(this),Ae(this);break t}$t(this.c,this.f,l,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ce(this,l)}this.I?(ve(this,e,o),G&&this.b&&3==e&&(Gt(this.J,this.R,"tick",this.Va),this.R.start())):($t(this.c,this.f,o,null),Ce(this,o)),4==e&&xe(this),this.b&&!this.A&&(4==e?Vn(this.g,this):(this.b=!1,be(this)))}else 400==r&&0<o.indexOf("Unknown SID")?(this.h=3,Jt(12)):(this.h=0,Jt(13)),xe(this),Ae(this)}}}catch(c){}},s.Va=function(){if(this.a){var t=xn(this.a),e=this.a.$();this.D<e.length&&(we(this),ve(this,t,e),this.b&&4!=t&&be(this))}},s.cancel=function(){this.A=!0,xe(this)},s.Ua=function(){this.o=null;var t=_();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Kt(3),Jt(17)),xe(this),this.h=2,Ae(this)):_e(this,this.U-t)},(s=Se.prototype).K=function(){Me(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},s.L=function(){return Me(this),this.a.concat()},s.get=function(t,e){return Te(this.b,t)?this.b[t]:e},s.set=function(t,e){Te(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},s.forEach=function(t,e){for(var n=this.L(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);t.call(e,o,r,this)}};var Pe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ke(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ke){this.a=void 0!==e?e:t.a,Oe(this,t.f),this.j=t.j,Re(this,t.c),Ie(this,t.h),this.g=t.g,e=t.b;var n=new qe;n.c=e.c,e.a&&(n.a=new Se(e.a),n.b=e.b),Le(this,n),this.i=t.i}else t&&(n=String(t).match(Pe))?(this.a=!!e,Oe(this,n[1]||"",!0),this.j=Be(n[2]||""),Re(this,n[3]||"",!0),Ie(this,n[4]),this.g=Be(n[5]||"",!0),Le(this,n[6]||"",!0),this.i=Be(n[7]||"")):(this.a=!!e,this.b=new qe(null,this.a))}function De(t){return new ke(t)}function Oe(t,e,n){t.f=n?Be(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Re(t,e,n){t.c=n?Be(e,!0):e}function Ie(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Le(t,e,n){e instanceof qe?(t.b=e,function(t,e){e&&!t.f&&($e(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ye(this,e),Xe(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Ue(e,Ge)),t.b=new qe(e,t.a))}function Fe(t,e,n){t.b.set(e,n)}function Ne(t){return Fe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),t}function Be(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ue(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ve),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ve(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ke.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ue(e,je,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ue(e,je,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ue(n,"/"==n.charAt(0)?He:ze,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ue(n,We)),t.join("")};var je=/[#\/\?@]/g,ze=/[#\?:]/g,He=/[#\?]/g,Ge=/[#\?@]/g,We=/#/g;function qe(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $e(t){t.a||(t.a=new Se,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ye(t,e){$e(t),e=Ke(t,e),Te(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Te((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Me(t)))}function Qe(t,e){return $e(t),e=Ke(t,e),Te(t.a.b,e)}function Xe(t,e,n){Ye(t,e),0<n.length&&(t.c=null,t.a.set(Ke(t,e),S(n)),t.b+=n.length)}function Ke(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Ze(t,e){this.b=t,this.a=e}function Je(t){this.g=t||tn,t=c.PerformanceNavigationTiming?0<(t=c.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(c.ia&&c.ia.ya&&c.ia.ya()&&c.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(s=qe.prototype).add=function(t,e){$e(this),this.c=null,t=Ke(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},s.forEach=function(t,e){$e(this),this.a.forEach((function(n,i){C(n,(function(n){t.call(e,n,i,this)}),this)}),this)},s.L=function(){$e(this);for(var t=this.a.K(),e=this.a.L(),n=[],i=0;i<e.length;i++)for(var r=t[i],o=0;o<r.length;o++)n.push(e[i]);return n},s.K=function(t){$e(this);var e=[];if("string"==typeof t)Qe(this,t)&&(e=E(e,this.a.get(Ke(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=E(e,t[n])}return e},s.set=function(t,e){return $e(this),this.c=null,Qe(this,t=Ke(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},s.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},s.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.K(i);for(var o=0;o<i.length;o++){var s=r;""!==i[o]&&(s+="="+encodeURIComponent(String(i[o]))),t.push(s)}}return this.c=t.join("&")};var tn=10;function en(t){return!!t.b||!!t.a&&t.a.size>=t.f}function nn(t){return t.b?1:t.a?t.a.size:0}function rn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function on(t,e){t.a?t.a.add(e):t.b=e}function sn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function an(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var i=t.c;try{for(var r=o(t.a.values()),s=r.next();!s.done;s=r.next())i=i.concat(s.value.s)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}return S(t.c)}function ln(){}function cn(){this.a=new ln}function un(t,n,i){var r=i||"";try{Ee(t,(function(t,e){var i=t;p(t)&&(i=St(t)),n.push(r+e+"="+encodeURIComponent(i))}))}catch(e){throw n.push(r+"type="+encodeURIComponent("_badmap")),e}}function hn(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(o){}}Je.prototype.cancel=function(){var t,e;if(this.c=an(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=o(this.a.values()),i=n.next();!i.done;i=n.next())i.value.cancel()}catch(r){t={error:r}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},ln.prototype.stringify=function(t){return c.JSON.stringify(t,void 0)},ln.prototype.parse=function(t){return c.JSON.parse(t,void 0)};var dn=c.JSON.parse;function pn(t){Ct.call(this),this.headers=new Se,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=fn,this.D=this.F=!1}w(pn,Ct);var fn="",mn=/^https?$/i,gn=["POST","PUT"];function vn(t){return"content-type"==t.toLowerCase()}function yn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,bn(t),wn(t)}function bn(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function _n(t){if(t.b&&void 0!==l&&(!t.s[1]||4!=xn(t)||2!=t.X()))if(t.l&&4==xn(t))Ut(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==xn(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}if(!(e=i)){var r;if(r=0===n){var o=String(t.B).match(Pe)[1]||null;if(!o&&c.self&&c.self.location){var s=c.self.location.protocol;o=s.substr(0,s.length-1)}r=!mn.test(o?o.toLowerCase():"")}e=r}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<xn(t)?t.a.statusText:""}catch(u){a=""}t.f=a+" ["+t.X()+"]",bn(t)}}finally{wn(t)}}}function wn(t,n){if(t.a){An(t);var i=t.a,r=t.s[0]?u:null;t.a=null,t.s=null,n||t.dispatchEvent("ready");try{i.onreadystatechange=r}catch(e){}}}function An(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(c.clearTimeout(t.m),t.m=null)}function xn(t){return t.a?t.a.readyState:0}function Cn(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=function(t){var e="";return I(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Fe(t,e,n))}function En(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Sn(t){this.pa=0,this.g=[],this.c=new qt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=En("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=En("baseRetryDelayMs",5e3,t),this.Ma=En("retryDelaySeedMs",1e4,t),this.Ja=En("forwardChannelMaxRetries",2,t),this.ma=En("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Je(t&&t.concurrentRequestLimit),this.ka=new cn,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Mn(t){if(Pn(t),3==t.v){var e=t.R++,n=De(t.B);Fe(n,"SID",t.J),Fe(n,"RID",e),Fe(n,"TYPE","terminate"),Rn(t,n),(e=new he(t,t.c,e,void 0)).H=2,e.i=Ne(De(n)),n=!1,c.navigator&&c.navigator.sendBeacon&&(n=c.navigator.sendBeacon(e.i.toString(),"")),!n&&c.Image&&((new Image).src=e.i,n=!0),n||(e.a=Wn(e.g,null),e.a.ba(e.i)),e.u=_(),be(e)}Hn(t)}function Tn(t){t.a&&(Nn(t),t.a.cancel(),t.a=null)}function Pn(t){Tn(t),t.j&&(c.clearTimeout(t.j),t.j=null),Un(t),t.b.cancel(),t.h&&("number"==typeof t.h&&c.clearTimeout(t.h),t.h=null)}function kn(t,e){t.g.push(new Ze(t.La++,e)),3==t.v&&Dn(t)}function Dn(t){en(t.b)||t.h||(t.h=!0,Rt(t.Ba,t),t.u=0)}function On(t,e){var n;n=e?e.f:t.R++;var i=De(t.B);Fe(i,"SID",t.J),Fe(i,"RID",n),Fe(i,"AID",t.P),Rn(t,i),t.i&&t.l&&Cn(i,t.i,t.l),n=new he(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=In(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),on(t.b,n),me(n,i,e)}function Rn(t,e){t.f&&Ee({},(function(t,n){Fe(e,n,t)}))}function In(t,e,n){n=Math.min(t.g.length,n);var i=t.f?y(t.f.Ha,t.f,t):null;t:for(var r=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=r[0].b)):o=0:s.push("ofs="+o);for(var a=!0,l=0;l<n;l++){var c=r[l].b,u=r[l].a;if(0>(c-=o))o=Math.max(0,r[l].b-100),a=!1;else try{un(u,s,"req"+c+"_")}catch(h){i&&i(u)}}if(a){i=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,i}function Ln(t){t.a||t.j||(t.U=1,Rt(t.Aa,t),t.o=0)}function Fn(t){return!(t.a||t.j||3<=t.o||(t.U++,t.j=ee(y(t.Aa,t),jn(t,t.o)),t.o++,0))}function Nn(t){null!=t.s&&(c.clearTimeout(t.s),t.s=null)}function Bn(t){t.a=new he(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=De(t.la);Fe(e,"RID","rpc"),Fe(e,"SID",t.J),Fe(e,"CI",t.H?"0":"1"),Fe(e,"AID",t.P),Rn(t,e),Fe(e,"TYPE","xmlhttp"),t.i&&t.l&&Cn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ne(De(e)),n.j=null,n.I=!0,ge(n,t)}function Un(t){null!=t.m&&(c.clearTimeout(t.m),t.m=null)}function Vn(t,e){var n=null;if(t.a==e){Un(t),Nn(t),t.a=null;var i=2}else{if(!rn(t.b,e))return;n=e.s,sn(t.b,e),i=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==i){n=e.j?e.j.length:0,e=_()-e.u;var r=t.u;(i=Qt()).dispatchEvent(new te(i,n,e,r)),Dn(t)}else Ln(t);else if(3==(r=e.h)||0==r&&0<t.I||!(1==i&&function(t,e){return!(nn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=ee(y(t.Ba,t,e),jn(t,t.u)),t.u++,0)))}(t,e)||2==i&&Fn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),r){case 1:zn(t,5);break;case 4:zn(t,10);break;case 3:zn(t,6);break;default:zn(t,2)}}function jn(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function zn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var i=y(t.Xa,t);n||(n=new ke("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||Oe(n,"https"),Ne(n)),function(t,e){var n=new qt;if(c.Image){var i=new Image;i.onload=b(hn,n,i,"TestLoadImage: loaded",!0,e),i.onerror=b(hn,n,i,"TestLoadImage: error",!1,e),i.onabort=b(hn,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=b(hn,n,i,"TestLoadImage: timeout",!1,e),c.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}(n.toString(),i)}else Jt(2);t.v=0,t.f&&t.f.ra(e),Hn(t),Pn(t)}function Hn(t){t.v=0,t.I=-1,t.f&&(0==an(t.b).length&&0==t.g.length||(t.b.c.length=0,S(t.g),t.g.length=0),t.f.qa())}function Gn(t,e,n){var i=function(t){return t instanceof ke?De(t):new ke(t,void 0)}(n);if(""!=i.c)e&&Re(i,e+"."+i.c),Ie(i,i.h);else{var r=c.location;i=function(t,e,n,i){var r=new ke(null,void 0);return t&&Oe(r,t),e&&Re(r,e),n&&Ie(r,n),i&&(r.g=i),r}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,n)}return t.W&&I(t.W,(function(t,e){Fe(i,e,t)})),n=t.na,(e=t.A)&&n&&Fe(i,e,n),Fe(i,"VER",t.ha),Rn(t,i),i}function Wn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pn(t.Ka)).F=t.C,e}function qn(){}function $n(){if(z&&!(10<=Number(J)))throw Error("Environmental error: no available transport.")}function Yn(t,e){Ct.call(this),this.a=new Sn(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!M(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!M(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Kn(this)}function Qn(t){le.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Xn(){ce.call(this),this.status=1}function Kn(t){this.a=t}(s=pn.prototype).ba=function(t,e,n,i){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:se),this.a.onreadystatechange=y(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void yn(this,o)}t=n||"";var r=new Se(this.headers);i&&Ee(i,(function(t,e){r.set(e,t)})),i=function(t){t:{for(var e=vn,n=t.length,i="string"==typeof t?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(r.L()),n=c.FormData&&t instanceof c.FormData,!(0<=x(gn,e))||i||n||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{An(this),0<this.o&&((this.D=function(t){return z&&Z(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=y(this.xa,this)):this.m=Ut(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){yn(this,o)}},s.xa=function(){void 0!==l&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},s.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),wn(this))},s.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),wn(this,!0)),pn.S.G.call(this)},s.za=function(){this.j||(this.A||this.l||this.g?_n(this):this.Ta())},s.Ta=function(){_n(this)},s.X=function(){try{return 2<xn(this)?this.a.status:-1}catch(V){return-1}},s.$=function(){try{return this.a?this.a.responseText:""}catch(V){return""}},s.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),dn(e)}},s.ua=function(){return this.h},s.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(s=Sn.prototype).ha=8,s.v=1,s.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new he(this,this.c,t,void 0),i=this.l;if(this.O&&(i?N(i=L(i),this.O):i=this.O),null===this.i&&(n.B=i),this.da)t:{for(var r=e=0;r<this.g.length;r++){var o=this.g[r];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=r;break t}if(4096===e||r===this.g.length-1){e=r+1;break t}}e=1e3}else e=1e3;e=In(this,n,e),Fe(r=De(this.B),"RID",t),Fe(r,"CVER",22),this.A&&Fe(r,"X-HTTP-Session-Id",this.A),Rn(this,r),this.i&&i&&Cn(r,this.i,i),on(this.b,n),this.Ga&&Fe(r,"TYPE","init"),this.da?(Fe(r,"$req",e),Fe(r,"SID","null"),n.V=!0,me(n,r,null)):me(n,r,e),this.v=2}}else 3==this.v&&(t?On(this,t):0==this.g.length||en(this.b)||On(this))},s.Aa=function(){if(this.j=null,Bn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ee(y(this.Sa,this),t)}},s.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Tn(this),Bn(this))},s.Ra=function(){null!=this.m&&(this.m=null,Tn(this),Fn(this),Jt(19))},s.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),Jt(2)):(this.c.info("Failed to ping google.com"),Jt(1))},(s=qn.prototype).ta=function(){},s.sa=function(){},s.ra=function(){},s.qa=function(){},s.Ha=function(){},$n.prototype.a=function(t,e){return new Yn(t,e)},w(Yn,Ct),(s=Yn.prototype).addEventListener=function(t,e,n,i){Yn.S.addEventListener.call(this,t,e,n,i)},s.removeEventListener=function(t,e,n,i){Yn.S.removeEventListener.call(this,t,e,n,i)},s.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;Jt(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Gn(t,null,t.fa),Dn(t)},s.close=function(){Mn(this.a)},s.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,kn(this.a,e)}else this.g?((e={}).__data__=St(t),kn(this.a,e)):kn(this.a,t)},s.G=function(){this.a.f=null,delete this.f,Mn(this.a),delete this.a,Yn.S.G.call(this)},w(Qn,le),w(Xn,ce),w(Kn,qn),Kn.prototype.ta=function(){this.a.dispatchEvent("a")},Kn.prototype.sa=function(t){this.a.dispatchEvent(new Qn(t))},Kn.prototype.ra=function(t){this.a.dispatchEvent(new Xn(t))},Kn.prototype.qa=function(){this.a.dispatchEvent("b")},$n.prototype.createWebChannel=$n.prototype.a,Yn.prototype.send=Yn.prototype.Pa,Yn.prototype.open=Yn.prototype.Oa,Yn.prototype.close=Yn.prototype.close,ne.NO_ERROR=0,ne.TIMEOUT=8,ne.HTTP_ERROR=6,ie.COMPLETE="complete",oe.EventType=ae,ae.OPEN="a",ae.CLOSE="b",ae.ERROR="c",ae.MESSAGE="d",Ct.prototype.listen=Ct.prototype.va,pn.prototype.listenOnce=pn.prototype.wa,pn.prototype.getLastError=pn.prototype.Qa,pn.prototype.getLastErrorCode=pn.prototype.ua,pn.prototype.getStatus=pn.prototype.X,pn.prototype.getResponseJson=pn.prototype.Na,pn.prototype.getResponseText=pn.prototype.$,pn.prototype.send=pn.prototype.ba;var Zn=function(){return new $n},Jn=ne,ti=ie,ei=oe,ni=pn;n.default={createWebChannelTransport:Zn,ErrorCode:Jn,EventType:ti,WebChannel:ei,XhrIo:ni}},zUnb:function(t,n,i){"use strict";function r(t){return"function"==typeof t}i.r(n);let o=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else o&&console.log("RxJS: Back to a better error behavior. Thank you. <3");o=t},get useDeprecatedSynchronousErrorHandling(){return o}};function a(t){setTimeout(()=>{throw t},0)}const l={closed:!0,next(t){},error(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;a(t)},complete(){}},c=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function u(t){return null!==t&&"object"==typeof t}const h=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let d=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let n;if(this.closed)return;let{_parentOrParents:i,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof t)i.remove(this);else if(null!==i)for(let t=0;t<i.length;++t)i[t].remove(this);if(r(o))try{o.call(this)}catch(e){n=e instanceof h?p(e.errors):[e]}if(c(s)){let t=-1,i=s.length;for(;++t<i;){const i=s[t];if(u(i))try{i.unsubscribe()}catch(e){n=n||[],e instanceof h?n=n.concat(p(e.errors)):n.push(e)}}}if(n)throw new h(n)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function p(t){return t.reduce((t,e)=>t.concat(e instanceof h?e.errors:e),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class m extends d{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=l;break;case 1:if(!t){this.destination=l;break}if("object"==typeof t){t instanceof m?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[f](){return this}static create(t,e,n){const i=new m(t,e,n);return i.syncErrorThrowable=!1,i}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends m{constructor(t,e,n,i){let o;super(),this._parentSubscriber=t;let s=this;r(e)?o=e:e&&(o=e.next,n=e.error,i=e.complete,e!==l&&(s=Object.create(e),r(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):a(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;a(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;a(n)}}__tryOrSetError(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(i){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(a(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const v=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(t){return t}let b=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:i}=this,r=function(t,e,n){if(t){if(t instanceof m)return t;if(t[f])return t[f]()}return t||e||n?new m(t,e,n):new m(l)}(t,e,n);if(r.add(i?i.call(r,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),s.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof m?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=_(e))((e,n)=>{let i;i=this.subscribe(e=>{try{t(e)}catch(r){n(r),i&&i.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[v](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=_(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function _(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const w=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class A extends d{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class x extends m{constructor(t){super(t),this.destination=t}}let C=(()=>{class t extends b{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new x(this)}lift(t){const e=new E(this,this);return e.operator=t,e}next(t){if(this.closed)throw new w;if(!this.isStopped){const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].next(t)}}error(t){if(this.closed)throw new w;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].error(t);this.observers.length=0}complete(){if(this.closed)throw new w;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let i=0;i<e;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new w;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new w;return this.hasError?(t.error(this.thrownError),d.EMPTY):this.isStopped?(t.complete(),d.EMPTY):(this.observers.push(t),new A(this,t))}asObservable(){const t=new b;return t.source=this,t}}return t.create=(t,e)=>new E(t,e),t})();class E extends C{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):d.EMPTY}}function S(t){return t&&"function"==typeof t.schedule}class M extends m{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const T=t=>e=>{for(let n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.complete()};function P(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const k=P(),D=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function O(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const R=t=>{if(t&&"function"==typeof t[v])return i=t,t=>{const e=i[v]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(D(t))return T(t);if(O(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,a),t);if(t&&"function"==typeof t[k])return e=t,t=>{const n=e[k]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=u(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}var e,n,i};function I(t,e,n,i,r=new M(t,n,i)){if(!r.closed)return e instanceof b?e.subscribe(r):R(e)(r)}class L extends m{notifyNext(t,e,n,i,r){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function F(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new N(t,e))}}class N{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new B(t,this.project,this.thisArg))}}class B extends m{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function U(t,e){return new b(n=>{const i=new d;let r=0;return i.add(e.schedule((function(){r!==t.length?(n.next(t[r++]),n.closed||i.add(this.schedule())):n.complete()}))),i})}function V(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[v]}(t))return function(t,e){return new b(n=>{const i=new d;return i.add(e.schedule(()=>{const r=t[v]();i.add(r.subscribe({next(t){i.add(e.schedule(()=>n.next(t)))},error(t){i.add(e.schedule(()=>n.error(t)))},complete(){i.add(e.schedule(()=>n.complete()))}}))})),i})}(t,e);if(O(t))return function(t,e){return new b(n=>{const i=new d;return i.add(e.schedule(()=>t.then(t=>{i.add(e.schedule(()=>{n.next(t),i.add(e.schedule(()=>n.complete()))}))},t=>{i.add(e.schedule(()=>n.error(t)))}))),i})}(t,e);if(D(t))return U(t,e);if(function(t){return t&&"function"==typeof t[k]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new b(n=>{const i=new d;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=t[k](),i.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=r.next();t=n.value,e=n.done}catch(i){return void n.error(i)}e?n.complete():(n.next(t),this.schedule())})))})),i})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof b?t:new b(R(t))}function j(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(j((n,i)=>V(t(n,i)).pipe(F((t,r)=>e(n,t,i,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new z(t,n)))}class z{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new H(t,this.project,this.concurrent))}}class H extends L{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const i=new M(this,e,n),r=this.destination;r.add(i);const o=I(this,t,void 0,void 0,i);o!==i&&r.add(o)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,i,r){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function G(t=Number.POSITIVE_INFINITY){return j(y,t)}function W(t,e){return e?U(t,e):new b(T(t))}function q(...t){let e=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return S(i)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof i&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof b?t[0]:G(e)(W(t,n))}function $(){return function(t){return t.lift(new Y(t))}}class Y{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const i=new Q(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class Q extends m{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}class X extends b{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new d,t.add(this.source.subscribe(new Z(this.getSubject(),this))),t.closed&&(this._connection=null,t=d.EMPTY)),t}refCount(){return $()(this)}}const K=(()=>{const t=X.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Z extends x{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function J(){return new C}function tt(){return t=>{return $()((e=J,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,K);return i.source=t,i.subjectFactory=n,i})(t));var e}}function et(t){return{toString:t}.toString()}function nt(t,e,n){return et(()=>{const i=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function r(...t){if(this instanceof r)return i.apply(this,t),this;const e=new r(...t);return n.annotation=e,n;function n(t,n,i){const r=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(e),t}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}const it=nt("Inject",t=>({token:t})),rt=nt("Optional"),ot=nt("Self"),st=nt("SkipSelf");var at=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function lt(t){for(let e in t)if(t[e]===lt)return e;throw Error("Could not find renamed property on target object.")}function ct(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ut(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ht(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function dt(t){return pt(t,t[mt])||pt(t,t[yt])}function pt(t,e){return e&&e.token===t?e:null}function ft(t){return t&&(t.hasOwnProperty(gt)||t.hasOwnProperty(bt))?t[gt]:null}const mt=lt({"\u0275prov":lt}),gt=lt({"\u0275inj":lt}),vt=lt({"\u0275provFallback":lt}),yt=lt({ngInjectableDef:lt}),bt=lt({ngInjectorDef:lt});function _t(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(_t).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function wt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const At=lt({__forward_ref__:lt});function xt(t){return t.__forward_ref__=xt,t.toString=function(){return _t(this())},t}function Ct(t){return Et(t)?t():t}function Et(t){return"function"==typeof t&&t.hasOwnProperty(At)&&t.__forward_ref__===xt}const St="undefined"!=typeof globalThis&&globalThis,Mt="undefined"!=typeof window&&window,Tt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Pt="undefined"!=typeof global&&global,kt=St||Pt||Mt||Tt,Dt=lt({"\u0275cmp":lt}),Ot=lt({"\u0275dir":lt}),Rt=lt({"\u0275pipe":lt}),It=lt({"\u0275mod":lt}),Lt=lt({"\u0275loc":lt}),Ft=lt({"\u0275fac":lt}),Nt=lt({__NG_ELEMENT_ID__:lt});class Bt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ut({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ut=new Bt("INJECTOR",-1),Vt={},jt=/\n/gm,zt=lt({provide:String,useValue:lt});let Ht,Gt=void 0;function Wt(t){const e=Gt;return Gt=t,e}function qt(t){const e=Ht;return Ht=t,e}function $t(t,e=at.Default){if(void 0===Gt)throw new Error("inject() must be called from an injection context");return null===Gt?Xt(t,void 0,e):Gt.get(t,e&at.Optional?null:void 0,e)}function Yt(t,e=at.Default){return(Ht||$t)(Ct(t),e)}const Qt=Yt;function Xt(t,e,n){const i=dt(t);if(i&&"root"==i.providedIn)return void 0===i.value?i.value=i.factory():i.value;if(n&at.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${_t(t)}]`)}function Kt(t){const e=[];for(let n=0;n<t.length;n++){const i=Ct(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=at.Default;for(let e=0;e<i.length;e++){const r=i[e];r instanceof rt||"Optional"===r.ngMetadataName||r===rt?n|=at.Optional:r instanceof st||"SkipSelf"===r.ngMetadataName||r===st?n|=at.SkipSelf:r instanceof ot||"Self"===r.ngMetadataName||r===ot?n|=at.Self:t=r instanceof it||r===it?r.token:r}e.push(Yt(t,n))}else e.push(Yt(i))}return e}class Zt{get(t,e=Vt){if(e===Vt){const e=new Error(`NullInjectorError: No provider for ${_t(t)}!`);throw e.name="NullInjectorError",e}return e}}class Jt{}class te{}function ee(t,e){for(let n=0;n<t.length;n++)e.push(t[n])}function ne(t,e){t.forEach(t=>Array.isArray(t)?ne(t,e):e(t))}function ie(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function re(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function oe(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}function se(t,e,n){let i=le(t,e);return i>=0?t[1|i]=n:(i=~i,function(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function ae(t,e){const n=le(t,e);if(n>=0)return t[1|n]}function le(t,e){return function(t,e,n){let i=0,r=t.length>>1;for(;r!==i;){const n=i+(r-i>>1),o=t[n<<1];if(e===o)return n<<1;o>e?r=n:i=n+1}return~(r<<1)}(t,e)}var ce=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),ue=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const he={},de=[];let pe=0;function fe(t){return et(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===ce.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||de,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ue.Emulated,id:"c",styles:t.styles||de,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,r=t.features,o=t.pipes;return n.id+=pe++,n.inputs=be(t.inputs,e),n.outputs=be(t.outputs),r&&r.forEach(t=>t(n)),n.directiveDefs=i?()=>("function"==typeof i?i():i).map(me):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(ge):null,n})}function me(t){return Ae(t)||function(t){return t[Ot]||null}(t)}function ge(t){return function(t){return t[Rt]||null}(t)}const ve={};function ye(t){const e={type:t.type,bootstrap:t.bootstrap||de,declarations:t.declarations||de,imports:t.imports||de,exports:t.exports||de,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&et(()=>{ve[t.id]=t.type}),e}function be(t,e){if(null==t)return he;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),n[r]=i,e&&(e[r]=o)}return n}const _e=fe;function we(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ae(t){return t[Dt]||null}function xe(t,e){return t.hasOwnProperty(Ft)?t[Ft]:null}function Ce(t,e){const n=t[It]||null;if(!n&&!0===e)throw new Error(`Type ${_t(t)} does not have '\u0275mod' property.`);return n}function Ee(t){return Array.isArray(t)&&"object"==typeof t[1]}function Se(t){return Array.isArray(t)&&!0===t[1]}function Me(t){return 0!=(8&t.flags)}function Te(t){return 2==(2&t.flags)}function Pe(t){return 1==(1&t.flags)}function ke(t){return null!==t.template}function De(t){return 0!=(512&t[2])}class Oe{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Re(){return Ie}function Ie(t){return t.type.prototype.ngOnChanges&&(t.setInput=Fe),Le}function Le(){const t=Ne(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===he)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Fe(t,e,n,i){const r=Ne(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:he,current:null}),o=r.current||(r.current={}),s=r.previous,a=this.declaredInputs[n],l=s[a];o[a]=new Oe(l&&l.currentValue,e,s===he),t[i]=e}function Ne(t){return t.__ngSimpleChanges__||null}Re.ngInherit=!0;let Be=void 0;function Ue(){return void 0!==Be?Be:"undefined"!=typeof document?document:void 0}function Ve(t){return!!t.listen}const je={createRenderer:(t,e)=>Ue()};function ze(t){for(;Array.isArray(t);)t=t[0];return t}function He(t,e){return ze(e[t+20])}function Ge(t,e){return ze(e[t.index])}function We(t,e){return t.data[e+20]}function qe(t,e){return t[e+20]}function $e(t,e){const n=e[t];return Ee(n)?n:n[0]}function Ye(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Qe(t){return 4==(4&t[2])}function Xe(t){return 128==(128&t[2])}function Ke(t,e){return null===t||null==e?null:t[e]}function Ze(t){t[18]=0}function Je(t,e){t[5]+=e;let n=t,i=t[3];for(;null!==i&&(1===e&&1===n[5]||-1===e&&0===n[5]);)i[5]+=e,n=i,i=i[3]}const tn={lFrame:Cn(null),bindingsEnabled:!0,checkNoChangesMode:!1};function en(){return tn.bindingsEnabled}function nn(){return tn.lFrame.lView}function rn(){return tn.lFrame.tView}function on(t){tn.lFrame.contextLView=t}function sn(){return tn.lFrame.previousOrParentTNode}function an(t,e){tn.lFrame.previousOrParentTNode=t,tn.lFrame.isParent=e}function ln(){return tn.lFrame.isParent}function cn(){tn.lFrame.isParent=!1}function un(){return tn.checkNoChangesMode}function hn(t){tn.checkNoChangesMode=t}function dn(){const t=tn.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function pn(){return tn.lFrame.bindingIndex}function fn(){return tn.lFrame.bindingIndex++}function mn(t){const e=tn.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function gn(t,e){const n=tn.lFrame;n.bindingIndex=n.bindingRootIndex=t,vn(e)}function vn(t){tn.lFrame.currentDirectiveIndex=t}function yn(t){const e=tn.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function bn(){return tn.lFrame.currentQueryIndex}function _n(t){tn.lFrame.currentQueryIndex=t}function wn(t,e){const n=xn();tn.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function An(t,e){const n=xn(),i=t[1];tn.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex}function xn(){const t=tn.lFrame,e=null===t?null:t.child;return null===e?Cn(t):e}function Cn(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function En(){const t=tn.lFrame;return tn.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const Sn=En;function Mn(){const t=En();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Tn(){return tn.lFrame.selectedIndex}function Pn(t){tn.lFrame.selectedIndex=t}function kn(){const t=tn.lFrame;return We(t.tView,t.selectedIndex)}function Dn(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:i,ngAfterContentChecked:r,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;i&&(t.contentHooks||(t.contentHooks=[])).push(-n,i),r&&((t.contentHooks||(t.contentHooks=[])).push(n,r),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,r)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function On(t,e,n){Ln(t,e,3,n)}function Rn(t,e,n,i){(3&t[2])===n&&Ln(t,e,n,i)}function In(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ln(t,e,n,i){const r=null!=i?i:-1;let o=0;for(let s=void 0!==i?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=i&&o>=i)break}else e[s]<0&&(t[18]+=65536),(o<r||-1==r)&&(Fn(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Fn(t,e,n,i){const r=n[i]<0,o=n[i+1],s=t[r?-n[i]:n[i]];r?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}class Nn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Bn(t,e,n){const i=Ve(t);let r=0;for(;r<n.length;){const o=n[r];if("number"==typeof o){if(0!==o)break;r++;const s=n[r++],a=n[r++],l=n[r++];i?t.setAttribute(e,a,l,s):e.setAttributeNS(s,a,l)}else{const s=o,a=n[++r];Vn(s)?i&&t.setProperty(e,s,a):i?t.setAttribute(e,s,a):e.setAttribute(s,a),r++}}return r}function Un(t){return 3===t||4===t||6===t}function Vn(t){return 64===t.charCodeAt(0)}function jn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||zn(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function zn(t,e,n,i,r){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===i)return void(null!==r&&(t[o+1]=r));if(i===t[o+1])return void(t[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==i&&t.splice(o++,0,i),null!==r&&t.splice(o++,0,r)}function Hn(t){return-1!==t}function Gn(t){return 32767&t}function Wn(t){return t>>16}function qn(t,e){let n=Wn(t),i=e;for(;n>0;)i=i[15],n--;return i}function $n(t){return"string"==typeof t?t:null==t?"":""+t}function Yn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():$n(t)}const Qn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(kt))();function Xn(t){return{name:"window",target:t.ownerDocument.defaultView}}function Kn(t){return{name:"document",target:t.ownerDocument}}function Zn(t){return t instanceof Function?t():t}let Jn=!0;function ti(t){const e=Jn;return Jn=t,e}let ei=0;function ni(t,e){const n=ri(t,e);if(-1!==n)return n;const i=e[1];i.firstCreatePass&&(t.injectorIndex=e.length,ii(i.data,t),ii(e,null),ii(i.blueprint,null));const r=oi(t,e),o=t.injectorIndex;if(Hn(r)){const t=Gn(r),n=qn(r,e),i=n[1].data;for(let r=0;r<8;r++)e[o+r]=n[t+r]|i[t+r]}return e[o+8]=r,o}function ii(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ri(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function oi(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],i=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,i++;return n?n.injectorIndex|i<<16:-1}function si(t,e,n){!function(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Nt)&&(i=n[Nt]),null==i&&(i=n[Nt]=ei++);const r=255&i,o=1<<r,s=64&r,a=32&r,l=e.data;128&r?s?a?l[t+7]|=o:l[t+6]|=o:a?l[t+5]|=o:l[t+4]|=o:s?a?l[t+3]|=o:l[t+2]|=o:a?l[t+1]|=o:l[t]|=o}(t,e,n)}function ai(t,e,n,i=at.Default,r){if(null!==t){const r=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Nt)?t[Nt]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof r){wn(e,t);try{const t=r();if(null!=t||i&at.Optional)return t;throw new Error(`No provider for ${Yn(n)}!`)}finally{Sn()}}else if("number"==typeof r){if(-1===r)return new fi(t,e);let o=null,s=ri(t,e),a=-1,l=i&at.Host?e[16][6]:null;for((-1===s||i&at.SkipSelf)&&(a=-1===s?oi(t,e):e[s+8],pi(i,!1)?(o=e[1],s=Gn(a),e=qn(a,e)):s=-1);-1!==s;){a=e[s+8];const t=e[1];if(di(r,s,t.data)){const t=ci(s,e,n,o,i,l);if(t!==li)return t}pi(i,e[1].data[s+8]===l)&&di(r,s,e)?(o=t,s=Gn(a),e=qn(a,e)):s=-1}}}if(i&at.Optional&&void 0===r&&(r=null),0==(i&(at.Self|at.Host))){const t=e[9],o=qt(void 0);try{return t?t.get(n,r,i&at.Optional):Xt(n,r,i&at.Optional)}finally{qt(o)}}if(i&at.Optional)return r;throw new Error(`NodeInjector: NOT_FOUND [${Yn(n)}]`)}const li={};function ci(t,e,n,i,r,o){const s=e[1],a=s.data[t+8],l=ui(a,s,n,null==i?Te(a)&&Jn:i!=s&&3===a.type,r&at.Host&&o===a);return null!==l?hi(e,s,l,a):li}function ui(t,e,n,i,r){const o=t.providerIndexes,s=e.data,a=1048575&o,l=t.directiveStart,c=o>>20,u=r?a+c:t.directiveEnd;for(let h=i?a:a+c;h<u;h++){const t=s[h];if(h<l&&n===t||h>=l&&t.type===n)return h}if(r){const t=s[l];if(t&&ke(t)&&t.type===n)return l}return null}function hi(t,e,n,i){let r=t[n];const o=e.data;if(r instanceof Nn){const s=r;if(s.resolving)throw new Error(`Circular dep for ${Yn(o[n])}`);const a=ti(s.canSeeViewProviders);let l;s.resolving=!0,s.injectImpl&&(l=qt(s.injectImpl)),wn(t,i);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&function(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const i=Ie(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,i)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,r),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{s.injectImpl&&qt(l),ti(a),s.resolving=!1,Sn()}}return r}function di(t,e,n){const i=64&t,r=32&t;let o;return o=128&t?i?r?n[e+7]:n[e+6]:r?n[e+5]:n[e+4]:i?r?n[e+3]:n[e+2]:r?n[e+1]:n[e],!!(o&1<<t)}function pi(t,e){return!(t&at.Self||t&at.Host&&e)}class fi{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return ai(this._tNode,this._lView,t,void 0,e)}}function mi(t){const e=t;if(Et(t))return()=>{const t=mi(Ct(e));return t?t():null};let n=xe(e);if(null===n){const t=ft(e);n=t&&t.factory}return n||null}function gi(t){return et(()=>{const e=t.prototype.constructor,n=e[Ft]||mi(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const t=r[Ft]||mi(r);if(t&&t!==n)return t;r=Object.getPrototypeOf(r)}return t=>new t})}function vi(t){return t.ngDebugContext}function yi(t){return t.ngOriginalError}function bi(t,...e){t.error(...e)}class _i{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),i=function(t){return t.ngErrorLogger||bi}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?vi(t)?vi(t):this._findContext(yi(t)):null}_findOriginalError(t){let e=yi(t);for(;e&&yi(e);)e=yi(e);return e}}class wi{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class Ai extends wi{getTypeName(){return"HTML"}}class xi extends wi{getTypeName(){return"Style"}}class Ci extends wi{getTypeName(){return"Script"}}class Ei extends wi{getTypeName(){return"URL"}}class Si extends wi{getTypeName(){return"ResourceURL"}}function Mi(t){return t instanceof wi?t.changingThisBreaksApplicationSecurity:t}function Ti(t,e){const n=Pi(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function Pi(t){return t instanceof wi&&t.getTypeName()||null}let ki=!0,Di=!1;function Oi(){return Di=!0,ki}function Ri(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Ii:new Li(t)}class Ii{getInertBodyElement(t){t="<body><remove></remove>"+t+"</body>";try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Li{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let i=e.length-1;0<i;i--){const n=e.item(i).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Fi=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Ni=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Bi(t){return(t=String(t)).match(Fi)||t.match(Ni)?t:(Oi()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Ui(t){return(t=String(t)).split(",").map(t=>Bi(t.trim())).join(", ")}function Vi(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function ji(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const zi=Vi("area,br,col,hr,img,wbr"),Hi=Vi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Gi=Vi("rp,rt"),Wi=ji(Gi,Hi),qi=ji(zi,ji(Hi,Vi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ji(Gi,Vi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Wi),$i=Vi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yi=Vi("srcset"),Qi=ji($i,Yi,Vi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Xi=Vi("script,style,template");class Ki{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!qi.hasOwnProperty(e))return this.sanitizedSomething=!0,!Xi.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,r=e.toLowerCase();if(!Qi.hasOwnProperty(r)){this.sanitizedSomething=!0;continue}let o=t.value;$i[r]&&(o=Bi(o)),Yi[r]&&(o=Ui(o)),this.buf.push(" ",e,'="',tr(o),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();qi.hasOwnProperty(e)&&!zi.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(tr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Zi=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ji=/([^\#-~ |!])/g;function tr(t){return t.replace(/&/g,"&amp;").replace(Zi,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(Ji,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let er;function nr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ir=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function rr(t){const e=function(){const t=nn();return t&&t[12]}();return e?e.sanitize(ir.URL,t)||"":Ti(t,"URL")?Mi(t):Bi($n(t))}function or(t,e){t.__ngContext__=e}function sr(t){throw new Error(`Multiple components match node with tagname ${t.tagName}`)}function ar(){throw new Error("Cannot mix multi providers and regular providers")}function lr(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const n=e.length;if(r+n===i||t.charCodeAt(r+n)<=32)return r}n=r+1}}function cr(t,e,n){let i=0;for(;i<t.length;){let r=t[i++];if(n&&"class"===r){if(r=t[i],-1!==lr(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function ur(t){return 0===t.type&&"ng-template"!==t.tagName}function hr(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function dr(t,e,n){let i=4;const r=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Un(t[e]))return e;return t.length}(r);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!hr(t,l,n)||""===l&&1===e.length){if(pr(i))return!1;s=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==t.attrs){if(!cr(t.attrs,c,n)){if(pr(i))return!1;s=!0}continue}const u=fr(8&i?"class":l,r,ur(t),n);if(-1===u){if(pr(i))return!1;s=!0;continue}if(""!==c){let t;t=u>o?"":r[u+1].toLowerCase();const e=8&i?t:null;if(e&&-1!==lr(e,c,0)||2&i&&c!==t){if(pr(i))return!1;s=!0}}}}else{if(!s&&!pr(i)&&!pr(l))return!1;if(s&&pr(l))continue;s=!1,i=l|1&i}}return pr(i)||s}function pr(t){return 0==(1&t)}function fr(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let n=!1;for(;r<e.length;){const i=e[r];if(i===t)return r;if(3===i||6===i)n=!0;else{if(1===i||2===i){let t=e[++r];for(;"string"==typeof t;)t=e[++r];continue}if(4===i)break;if(0===i){r+=4;continue}}r+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function mr(t,e,n=!1){for(let i=0;i<e.length;i++)if(dr(t,e[i],n))return!0;return!1}function gr(t,e){t:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let e=0;e<t.length;e++)if(t[e]!==i[e])continue t;return!0}}return!1}function vr(t,e){return t?":not("+e.trim()+")":e}function yr(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&i){const e=t[++n];r+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""===r||pr(s)||(e+=vr(o,r),r=""),i=s,o=o||!pr(i);n++}return""!==r&&(e+=vr(o,r)),e}const br={};function _r(t){const e=t[3];return Se(e)?e[3]:e}function wr(t){return xr(t[13])}function Ar(t){return xr(t[4])}function xr(t){for(;null!==t&&!Se(t);)t=t[4];return t}function Cr(t){Er(rn(),nn(),Tn()+t,un())}function Er(t,e,n,i){if(!i)if(3==(3&e[2])){const i=t.preOrderCheckHooks;null!==i&&On(e,i,n)}else{const i=t.preOrderHooks;null!==i&&Rn(e,i,0,n)}Pn(n)}const Sr={marker:"element"},Mr={marker:"comment"};function Tr(t,e){return t<<17|e<<2}function Pr(t){return t>>17&32767}function kr(t){return 2|t}function Dr(t){return(131068&t)>>2}function Or(t,e){return-131069&t|e<<2}function Rr(t){return 1|t}function Ir(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],o=n[i+1];if(-1!==o){const n=t.data[o];_n(r),n.contentQueries(2,e[o],o)}}}function Lr(t,e,n){return Ve(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Fr(t,e,n,i,r,o,s,a,l,c){const u=e.blueprint.slice();return u[0]=r,u[2]=140|i,Ze(u),u[3]=u[15]=t,u[8]=n,u[10]=s||t&&t[10],u[11]=a||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=c||t&&t[9]||null,u[6]=o,u[16]=2==e.type?t[16]:u,u}function Nr(t,e,n,i,r,o){const s=n+20,a=t.data[s]||function(t,e,n,i,r,o){const s=sn(),a=ln(),l=a?s:s&&s.parent,c=t.data[n]=Yr(0,l&&l!==e?l:null,i,n,r,o);return null===t.firstChild&&(t.firstChild=c),s&&(!a||null!=s.child||null===c.parent&&2!==s.type?a||(s.next=c):s.child=c),c}(t,e,s,i,r,o);return an(a,!0),a}function Br(t,e,n){An(e,e[6]);try{const i=t.viewQuery;null!==i&&yo(1,i,n);const r=t.template;null!==r&&jr(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ir(t,e),t.staticViewQueries&&yo(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)po(t,e[n])}(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),i}finally{e[2]&=-5,Mn()}}function Ur(t,e,n,i){const r=e[2];if(256==(256&r))return;An(e,e[6]);const o=un();try{Ze(e),tn.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&jr(t,e,n,2,i);const s=3==(3&r);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&On(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Rn(e,n,0,null),In(e,0)}if(function(t){for(let e=wr(t);null!==e;e=Ar(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],i=n[3];0==(1024&n[2])&&Je(i,1),n[2]|=1024}}}(e),function(t){for(let e=wr(t);null!==e;e=Ar(e))for(let t=10;t<e.length;t++){const n=e[t],i=n[1];Xe(n)&&Ur(i,n,i.template,n[8])}}(e),null!==t.contentQueries&&Ir(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&On(e,n)}else{const n=t.contentHooks;null!==n&&Rn(e,n,1),In(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let i=t.expandoStartIndex,r=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,Pn(o),i+=9+n[++t],r=i):i+=s:(null!==s&&(gn(i,r),s(2,e[r])),r++)}}}finally{Pn(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)ho(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&yo(2,l,i),!o)if(s){const n=t.viewCheckHooks;null!==n&&On(e,n)}else{const n=t.viewHooks;null!==n&&Rn(e,n,2),In(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Je(e[3],-1))}finally{Mn()}}function Vr(t,e,n,i){const r=e[10],o=!un(),s=Qe(e);try{o&&!s&&r.begin&&r.begin(),s&&Br(t,e,i),Ur(t,e,n,i)}finally{o&&!s&&r.end&&r.end()}}function jr(t,e,n,i,r){const o=Tn();try{Pn(-1),2&i&&e.length>20&&Er(t,e,0,un()),n(i,r)}finally{Pn(o)}}function zr(t,e,n){if(Me(e)){const i=e.directiveEnd;for(let r=e.directiveStart;r<i;r++){const e=t.data[r];e.contentQueries&&e.contentQueries(1,n[r],r)}}}function Hr(t,e,n){en()&&(function(t,e,n,i){const r=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||ni(n,e),or(i,e);const s=n.initialInputs;for(let a=r;a<o;a++){const i=t.data[a],o=ke(i);o&&so(e,n,i);const l=hi(e,t,a,n);or(l,e),null!==s&&lo(0,a-r,l,i,0,s),o&&($e(n.index,e)[8]=l)}}(t,e,n,Ge(n,e)),128==(128&n.flags)&&function(t,e,n){const i=n.directiveStart,r=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-20,l=tn.lFrame.currentDirectiveIndex;try{Pn(a);for(let n=i;n<r;n++){const i=t.data[n],r=e[n];vn(n),null!==i.hostBindings||0!==i.hostVars||null!==i.hostAttrs?to(i,r):s&&o.push(null)}}finally{Pn(-1),vn(l)}}(t,e,n))}function Gr(t,e,n=Ge){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?n(e,t):t[s];t[r++]=a}}}function Wr(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=qr(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function qr(t,e,n,i,r,o,s,a,l,c){const u=20+i,h=u+r,d=function(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:br);return n}(u,h);return d[1]={type:t,id:e,blueprint:d,template:n,queries:null,viewQuery:a,node:null,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:c,incompleteFirstPass:!1}}function $r(t,e,n,i){const r=_o(e);r.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(i,r.length-1)}function Yr(t,e,n,i,r,o){return{type:n,index:i,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Qr(t,e,n){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(e,r):n[i]=[e,r]}return n}function Xr(t,e,n,i,r,o,s,a){const l=Ge(e,n);let c,u=e.inputs;!a&&null!=u&&(c=u[i])?(xo(t,n,c,i,r),Te(e)&&function(t,e){const n=$e(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(i=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=s?s(r,e.tagName||"",i):r,Ve(o)?o.setProperty(l,i,r):Vn(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function Kr(t,e,n,i){let r=!1;if(en()){const o=function(t,e,n){const i=t.directiveRegistry;let r=null;if(i)for(let o=0;o<i.length;o++){const s=i[o];mr(n,s.selectors,!1)&&(r||(r=[]),si(ni(n,e),t,s.type),ke(s)?(2&n.flags&&sr(n),no(t,n),r.unshift(s)):r.push(s))}return r}(t,e,n),s=null===i?null:{"":-1};if(null!==o){let i=0;r=!0,ro(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}eo(t,n,o.length);let a=!1,l=!1;for(let r=0;r<o.length;r++){const c=o[r];n.mergedAttrs=jn(n.mergedAttrs,c.hostAttrs),oo(t,e,c),io(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const u=c.type.prototype;!a&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),a=!0),l||!u.ngOnChanges&&!u.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),l=!0),Zr(t,c),i+=c.hostVars}!function(t,e){const n=e.directiveEnd,i=t.data,r=e.attrs,o=[];let s=null,a=null;for(let l=e.directiveStart;l<n;l++){const t=i[l],n=t.inputs,c=null===r||ur(e)?null:co(n,r);o.push(c),s=Qr(n,l,s),a=Qr(t.outputs,l,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),Jr(t,e,i)}s&&function(t,e,n){if(e){const i=t.localNames=[];for(let t=0;t<e.length;t+=2){const r=n[e[t+1]];if(null==r)throw new Error(`Export of name '${e[t+1]}' not found!`);i.push(e[t],r)}}}(n,i,s)}return n.mergedAttrs=jn(n.mergedAttrs,n.attrs),r}function Zr(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function Jr(t,e,n){for(let i=0;i<n;i++)e.push(br),t.blueprint.push(br),t.data.push(null)}function to(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function eo(t,e,n){const i=20-e.index,r=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(i,r,n)}function no(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function io(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;ke(e)&&(n[""]=t)}}function ro(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function oo(t,e,n){t.data.push(n);const i=n.factory||(n.factory=xe(n.type)),r=new Nn(i,ke(n),null);t.blueprint.push(r),e.push(r)}function so(t,e,n){const i=Ge(e,t),r=Wr(n),o=t[10],s=fo(t,Fr(t,r,null,n.onPush?64:16,i,e,o,o.createRenderer(i,n)));t[e.index]=s}function ao(t,e,n,i,r,o){const s=Ge(t,e),a=e[11];if(null==i)Ve(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==r?$n(i):r(i,t.tagName||"",n);Ve(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}function lo(t,e,n,i,r,o){const s=o[e];if(null!==s){const t=i.setInput;for(let e=0;e<s.length;){const r=s[e++],o=s[e++],a=s[e++];null!==t?i.setInput(n,a,r,o):n[o]=a}}}function co(t,e){let n=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,t[r],e[i+1])),i+=2}else i+=2;else i+=4}return n}function uo(t,e,n,i){return new Array(t,!0,!1,e,null,0,i,n,null,null)}function ho(t,e){const n=$e(e,t);if(Xe(n)){const t=n[1];80&n[2]?Ur(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let i=wr(e);null!==i;i=Ar(i))for(let e=10;e<i.length;e++){const n=i[e];if(1024&n[2]){const t=n[1];Ur(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let i=0;i<n.length;i++){const r=$e(n[i],e);Xe(r)&&r[5]>0&&t(r)}}(n)}}function po(t,e){const n=$e(e,t),i=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n),Br(i,n,n[8])}function fo(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function mo(t){for(;t;){t[2]|=64;const e=_r(t);if(De(t)&&!e)return t;t=e}return null}function go(t,e,n){const i=e[10];i.begin&&i.begin();try{Ur(t,e,t.template,n)}catch(r){throw Ao(e,r),r}finally{i.end&&i.end()}}function vo(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],i=Ye(n),r=i[1];Vr(r,i,r.template,n)}}(t[8])}function yo(t,e,n){_n(0),e(t,n)}const bo=(()=>Promise.resolve(null))();function _o(t){return t[7]||(t[7]=[])}function wo(t,e,n){return(null===t||ke(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function Ao(t,e){const n=t[9],i=n?n.get(_i,null):null;i&&i.handleError(e)}function xo(t,e,n,i,r){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=e[s],c=t.data[s];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Co(t,e,n){const i=He(e,t),r=t[11];Ve(r)?r.setValue(i,n):i.textContent=n}function Eo(t,e){const n=e[3];return-1===t.index?Se(n)?n:null:n}function So(t,e){const n=Eo(t,e);return n?Uo(e[11],n[7]):null}function Mo(t,e,n,i,r){if(null!=i){let o,s=!1;Se(i)?o=i:Ee(i)&&(s=!0,i=i[0]);const a=ze(i);0===t&&null!==n?null==r?No(e,n,a):Fo(e,n,a,r||null):1===t&&null!==n?Fo(e,n,a,r||null):2===t?Ho(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,i,r){const o=n[7];o!==ze(n)&&Mo(e,t,i,o,r);for(let s=10;s<n.length;s++){const r=n[s];Wo(r[1],r,t,e,i,o)}}(e,t,o,n,r)}}function To(t,e){return Ve(e)?e.createText(t):e.createTextNode(t)}function Po(t,e,n,i){const r=So(t.node,e);r&&Wo(t,e,e[11],n?1:2,r,i)}function ko(t,e){const n=t[9],i=n.indexOf(e);1024&e[2]&&Je(e[3],-1),n.splice(i,1)}function Do(t,e){if(t.length<=10)return;const n=10+e,i=t[n];if(i){const r=i[17];null!==r&&r!==t&&ko(r,i),e>0&&(t[n-1][4]=i[4]);const o=re(t,10+e);Po(i[1],i,!1,null);const s=o[19];null!==s&&s.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}function Oo(t,e){if(!(256&e[2])){const n=e[11];Ve(n)&&n.destroyNode&&Wo(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Io(t[1],t);for(;e;){let n=null;if(Ee(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Ee(e)&&Io(e[1],e),e=Ro(e,t);null===e&&(e=t),Ee(e)&&Io(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ro(t,e){let n;return Ee(t)&&(n=t[6])&&2===n.type?Eo(n,t):t[3]===e?null:t[3]}function Io(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const t=e[n[i]];if(!(t instanceof Nn)){const e=n[i+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const r=n[i+1],o="function"==typeof r?r(e):ze(e[r]),s=t[n[i+2]],a=n[i+3];"boolean"==typeof a?o.removeEventListener(n[i],s,a):a>=0?t[a]():t[-a].unsubscribe(),i+=2}else n[i].call(t[n[i+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&Ve(e[11])&&e[11].destroy();const i=e[17];if(null!==i&&Se(e[3])){i!==e[3]&&ko(i,e);const n=e[19];null!==n&&n.detachView(t)}}}function Lo(t,e,n){let i=e.parent;for(;null!=i&&(4===i.type||5===i.type);)i=(e=i).parent;if(null==i){const t=n[6];return 2===t.type?So(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return Ge(e,n).parentNode;if(2&i.flags){const e=t.data,n=e[e[i.index].directiveStart].encapsulation;if(n!==ue.ShadowDom&&n!==ue.Native)return null}return Ge(i,n)}function Fo(t,e,n,i){Ve(t)?t.insertBefore(e,n,i):e.insertBefore(n,i,!0)}function No(t,e,n){Ve(t)?t.appendChild(e,n):e.appendChild(n)}function Bo(t,e,n,i){null!==i?Fo(t,e,n,i):No(t,e,n)}function Uo(t,e){return Ve(t)?t.parentNode(e):e.parentNode}function Vo(t,e){if(2===t.type){const n=Eo(t,e);return null===n?null:zo(n.indexOf(e,10)-10,n)}return 4===t.type||5===t.type?Ge(t,e):null}function jo(t,e,n,i){const r=Lo(t,i,e);if(null!=r){const t=e[11],o=Vo(i.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)Bo(t,r,n[e],o);else Bo(t,r,n,o)}}function zo(t,e){const n=10+t+1;if(n<e.length){const t=e[n],i=t[1].firstChild;if(null!==i)return function t(e,n){if(null!==n){const i=n.type;if(3===i)return Ge(n,e);if(0===i)return zo(-1,e[n.index]);if(4===i||5===i){const i=n.child;if(null!==i)return t(e,i);{const t=e[n.index];return Se(t)?zo(-1,t):ze(t)}}{const i=e[16],r=i[6],o=_r(i),s=r.projection[n.projection];return null!=s?t(o,s):t(e,n.next)}}return null}(t,i)}return e[7]}function Ho(t,e,n){const i=Uo(t,e);i&&function(t,e,n,i){Ve(t)?t.removeChild(e,n,i):e.removeChild(n)}(t,i,e,n)}function Go(t,e,n,i,r,o,s){for(;null!=n;){const a=i[n.index],l=n.type;s&&0===e&&(a&&or(ze(a),i),n.flags|=4),64!=(64&n.flags)&&(4===l||5===l?(Go(t,e,n.child,i,r,o,!1),Mo(e,t,r,a,o)):1===l?$o(t,e,i,n,r,o):Mo(e,t,r,a,o)),n=s?n.projectionNext:n.next}}function Wo(t,e,n,i,r,o){Go(n,i,t.node.child,e,r,o,!1)}function qo(t,e,n){$o(e[11],0,e,n,Lo(t,n,e),Vo(n.parent||e[6],e))}function $o(t,e,n,i,r,o){const s=n[16],a=s[6].projection[i.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)Mo(e,t,r,a[l],o);else Go(t,e,a,s[3],r,o,!0)}function Yo(t,e,n){Ve(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Qo(t,e,n){Ve(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Xo{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,i,r,o=!1){for(;null!==i;){const s=n[i.index];if(null!==s&&r.push(ze(s)),Se(s))for(let e=10;e<s.length;e++){const n=s[e],i=n[1].firstChild;null!==i&&t(n[1],n,i,r)}const a=i.type;if(4===a||5===a)t(e,n,i.child,r);else if(1===a){const e=n[16],o=e[6].projection[i.projection];if(Array.isArray(o))r.push(...o);else{const n=_r(e);t(n[1],n,o,r,!0)}}i=o?i.projectionNext:i.next}return r}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Oo(this._lView[1],this._lView)}onDestroy(t){$r(this._lView[1],this._lView,null,t)}markForCheck(){mo(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){go(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){hn(!0);try{go(t,e,n)}finally{hn(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Wo(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ko extends Xo{constructor(t){super(t),this._view=t}detectChanges(){vo(this._view)}checkNoChanges(){!function(t){hn(!0);try{vo(t)}finally{hn(!1)}}(this._view)}get context(){return null}}let Zo,Jo,ts;function es(t,e,n){return Zo||(Zo=class extends t{}),new Zo(Ge(e,n))}function ns(t,e,n,i){return Jo||(Jo=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Fr(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const i=this._declarationView[19];return null!==i&&(n[19]=i.createEmbeddedView(e)),Br(e,n,t),new Xo(n)}}),0===n.type?new Jo(i,n,es(e,n,i)):null}function is(t,e,n,i){let r;ts||(ts=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return es(e,this._hostTNode,this._hostView)}get injector(){return new fi(this._hostTNode,this._hostView)}get parentInjector(){const t=oi(this._hostTNode,this._hostView),e=qn(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let i=Wn(t),r=e,o=e[6];for(;i>1;)r=r[15],o=r[6],i--;return o}(t,this._hostView,this._hostTNode);return Hn(t)&&null!=n?new fi(n,e):new fi(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const i=t.createEmbeddedView(e||{});return this.insert(i,n),i}createComponent(t,e,n,i,r){const o=n||this.parentInjector;if(!r&&null==t.ngModule&&o){const t=o.get(Jt,null);t&&(r=t)}const s=t.create(o,i,void 0,r);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,i=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Se(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],i=new ts(e,e[6],e[3]);i.detach(i.indexOf(t))}}const r=this._adjustIndex(e);return function(t,e,n,i){const r=10+i,o=n.length;i>0&&(n[r-1][4]=e),i<o-10?(e[4]=n[r],ie(n,10+i,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,n,this._lContainer,r),Po(i,n,!0,zo(r,this._lContainer)),t.attachToViewContainerRef(this),ie(this._lContainer[8],r,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1);!function(t,e){const n=Do(t,e);n&&Oo(n[1],n)}(this._lContainer,e),re(this._lContainer[8],e)}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Do(this._lContainer,e);return n&&null!=re(this._lContainer[8],e)?new Xo(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=i[n.index];if(Se(o))r=o;else{let t;if(4===n.type)t=ze(o);else if(t=i[11].createComment(""),De(i)){const e=i[11],r=Ge(n,i);Fo(e,Uo(e,r),t,function(t,e){return Ve(t)?t.nextSibling(e):e.nextSibling}(e,r))}else jo(i[1],i,t,n);i[n.index]=r=uo(o,i,t,n),fo(i,r)}return new ts(r,n,i)}function rs(t=!1){return function(t,e,n){if(!n&&Te(t)){const n=$e(t.index,e);return new Xo(n,n)}return 3===t.type||0===t.type||4===t.type||5===t.type?new Xo(e[16],e):null}(sn(),nn(),t)}let os=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ss(),t})();const ss=rs,as=Function,ls=new Bt("Set Injector scope."),cs={},us={},hs=[];let ds=void 0;function ps(){return void 0===ds&&(ds=new Zt),ds}function fs(t,e=null,n=null,i){return new ms(t,n,e||ps(),i)}class ms{constructor(t,e,n,i=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];e&&ne(e,n=>this.processProvider(n,t,e)),ne([t],t=>this.processInjectorType(t,[],r)),this.records.set(Ut,ys(void 0,this));const o=this.records.get(ls);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof t?null:_t(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,n=Vt,i=at.Default){this.assertNotDestroyed();const r=Wt(this);try{if(!(i&at.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(o=t)||"object"==typeof o&&o instanceof Bt)&&dt(t);e=n&&this.injectableDefInScope(n)?ys(gs(t),cs):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(i&at.Self?ps():this.parent).get(t,n=i&at.Optional&&n===Vt?null:n)}catch(e){if("NullInjectorError"===e.name){if((e.ngTempTokenPath=e.ngTempTokenPath||[]).unshift(_t(t)),r)throw e;return function(t,e,n,i){const r=t.ngTempTokenPath;throw e.__source&&r.unshift(e.__source),t.message=function(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=_t(e);if(Array.isArray(e))r=e.map(_t).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];t.push(n+":"+("string"==typeof i?JSON.stringify(i):_t(i)))}r=`{${t.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(jt,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t.ngTempTokenPath=null,t}(e,t,"R3InjectorError",this.source)}throw e}finally{Wt(r)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(_t(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=Ct(t)))return!1;let i=ft(t);const r=null==i&&t.ngModule||void 0,o=void 0===r?t:r,s=-1!==n.indexOf(o);if(void 0!==r&&(i=ft(r)),null==i)return!1;if(null!=i.imports&&!s){let t;n.push(o);try{ne(i.imports,i=>{this.processInjectorType(i,e,n)&&(void 0===t&&(t=[]),t.push(i))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:i}=t[e];ne(i,t=>this.processProvider(t,n,i||hs))}}this.injectorDefTypes.add(o),this.records.set(o,ys(i.factory,cs));const a=i.providers;if(null!=a&&!s){const e=t;ne(a,t=>this.processProvider(t,e,a))}return void 0!==r&&void 0!==t.providers}processProvider(t,e,n){let i=_s(t=Ct(t))?t:Ct(t&&t.provide);const r=function(t,e,n){return bs(t)?ys(void 0,t.useValue):ys(vs(t,e,n),cs)}(t,e,n);if(_s(t)||!0!==t.multi){const t=this.records.get(i);t&&void 0!==t.multi&&ar()}else{let e=this.records.get(i);e?void 0===e.multi&&ar():(e=ys(void 0,cs,!0),e.factory=()=>Kt(e.multi),this.records.set(i,e)),i=t,e.multi.push(t)}this.records.set(i,r)}hydrate(t,e){var n;return e.value===us?function(t){throw new Error(`Cannot instantiate cyclic dependency! ${t}`)}(_t(t)):e.value===cs&&(e.value=us,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function gs(t){const e=dt(t),n=null!==e?e.factory:xe(t);if(null!==n)return n;const i=ft(t);if(null!==i)return i.factory;if(t instanceof Bt)throw new Error(`Token ${_t(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=oe(e,"?");throw new Error(`Can't resolve all parameters for ${_t(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[mt]||t[yt]||t[vt]&&t[vt]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\n`+`This will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function vs(t,e,n){let i=void 0;if(_s(t)){const e=Ct(t);return xe(e)||gs(e)}if(bs(t))i=()=>Ct(t.useValue);else if((r=t)&&r.useFactory)i=()=>t.useFactory(...Kt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))i=()=>Yt(Ct(t.useExisting));else{const r=Ct(t&&(t.useClass||t.provide));if(r||function(t,e,n){let i="";throw t&&e&&(i=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${_t(t)}'`+i)}(e,n,t),!function(t){return!!t.deps}(t))return xe(r)||gs(r);i=()=>new r(...Kt(t.deps))}var r;return i}function ys(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function bs(t){return null!==t&&"object"==typeof t&&zt in t}function _s(t){return"function"==typeof t}const ws=function(t,e,n){return function(t,e=null,n=null,i){const r=fs(t,e,n,i);return r._resolveInjectorDefTypes(),r}({name:n},e,t,n)};let As=(()=>{class t{static create(t,e){return Array.isArray(t)?ws(t,e,""):ws(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Vt,t.NULL=new Zt,t.\u0275prov=ut({token:t,providedIn:"any",factory:()=>Yt(Ut)}),t.__NG_ELEMENT_ID__=-1,t})();const xs=new Bt("AnalyzeForEntryComponents");function Cs(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?r=wt(r,t):2==o&&(i=wt(i,t+": "+e[++s]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}let Es=null;function Ss(){if(!Es){const t=kt.Symbol;if(t&&t.iterator)Es=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Es=n)}}}return Es}class Ms{constructor(t){this.wrapped=t}static wrap(t){return new Ms(t)}static unwrap(t){return Ms.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Ms}}function Ts(t){return!!Ps(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ss()in t)}function Ps(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ks(t,e,n){return t[e]=n}function Ds(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Os(t,e,n,i){const r=Ds(t,e,n);return Ds(t,e+1,i)||r}function Rs(t,e,n,i){const r=nn();return Ds(r,fn(),e)&&(rn(),ao(kn(),r,t,e,n,i)),Rs}function Is(t,e,n,i){return Ds(t,fn(),n)?e+$n(n)+i:br}function Ls(t,e,n,i,r,o,s,a){const l=nn(),c=rn(),u=t+20,h=c.firstCreatePass?function(t,e,n,i,r,o,s,a,l){const c=e.consts,u=Nr(e,n[6],t,0,s||null,Ke(c,a));Kr(e,n,u,Ke(c,l)),Dn(e,u);const h=u.tViews=qr(2,-1,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c),d=Yr(0,null,2,-1,null,null);return d.injectorIndex=u.injectorIndex,h.node=d,null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(t,c,l,e,n,i,r,o,s):c.data[u];an(h,!1);const d=l[11].createComment("");jo(c,l,d,h),or(d,l),fo(l,l[u]=uo(d,l,d,h)),Pe(h)&&Hr(c,l,h),null!=s&&Gr(l,h,a)}function Fs(t){return qe(tn.lFrame.contextLView,t)}function Ns(t,e=at.Default){const n=nn();return null==n?Yt(t,e):ai(sn(),n,Ct(t),e)}function Bs(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let i=0;for(;i<t;){const r=n[i];if(Un(r))break;if(0===r)i+=2;else if("number"==typeof r)for(i++;i<t&&"string"==typeof n[i];)i++;else{if(r===e)return n[i+1];i+=2}}}return null}(sn(),t)}function Us(t,e,n){const i=nn();return Ds(i,fn(),e)&&Xr(rn(),kn(),i,t,e,i[11],n,!1),Us}function Vs(t,e,n,i,r){const o=r?"class":"style";xo(t,n,e.inputs[o],o,i)}function js(t,e,n,i){const r=nn(),o=rn(),s=20+t,a=r[11],l=r[s]=Lr(e,a,tn.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,i,r,o,s){const a=e.consts,l=Ke(a,o),c=Nr(e,n[6],t,3,r,l);return Kr(e,n,c,Ke(a,s)),null!==c.attrs&&Cs(c,c.attrs,!1),null!==c.mergedAttrs&&Cs(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(t,o,r,0,e,n,i):o.data[s];an(c,!0);const u=c.mergedAttrs;null!==u&&Bn(a,l,u);const h=c.classes;null!==h&&Qo(a,l,h);const d=c.styles;null!==d&&Yo(a,l,d),jo(o,r,l,c),0===tn.lFrame.elementDepthCount&&or(l,r),tn.lFrame.elementDepthCount++,Pe(c)&&(Hr(o,r,c),zr(o,c,r)),null!==i&&Gr(r,c)}function zs(){let t=sn();ln()?cn():(t=t.parent,an(t,!1));const e=t;tn.lFrame.elementDepthCount--;const n=rn();n.firstCreatePass&&(Dn(n,t),Me(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Vs(n,e,nn(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Vs(n,e,nn(),e.stylesWithoutHost,!1)}function Hs(t,e,n,i){js(t,e,n,i),zs()}function Gs(t,e,n){const i=nn(),r=rn(),o=t+20,s=r.firstCreatePass?function(t,e,n,i,r){const o=e.consts,s=Ke(o,i),a=Nr(e,n[6],t,4,"ng-container",s);return null!==s&&Cs(a,s,!0),Kr(e,n,a,Ke(o,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(t,r,i,e,n):r.data[o];an(s,!0);const a=i[o]=i[11].createComment("");jo(r,i,a,s),or(a,i),Pe(s)&&(Hr(r,i,s),zr(r,s,i)),null!=n&&Gr(i,s)}function Ws(){let t=sn();const e=rn();ln()?cn():(t=t.parent,an(t,!1)),e.firstCreatePass&&(Dn(e,t),Me(t)&&e.queries.elementEnd(t))}function qs(t,e,n){Gs(t,e,n),Ws()}function $s(){return nn()}function Ys(t){return!!t&&"function"==typeof t.then}function Qs(t){return!!t&&"function"==typeof t.subscribe}function Xs(t,e,n=!1,i){const r=nn(),o=rn(),s=sn();return Zs(o,r,r[11],s,t,e,n,i),Xs}function Ks(t,e,n=!1,i){const r=sn(),o=nn(),s=rn();return Zs(s,o,wo(yn(s.data),r,o),r,t,e,n,i),Ks}function Zs(t,e,n,i,r,o,s=!1,a){const l=Pe(i),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),u=_o(e);let h=!0;if(3===i.type){const d=Ge(i,e),p=a?a(d):he,f=p.target||d,m=u.length,g=a?t=>a(ze(t[i.index])).target:i.index;if(Ve(n)){let s=null;if(!a&&l&&(s=function(t,e,n,i){const r=t.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const t=r[o];if(t===n&&r[o+1]===i){const t=e[7],n=r[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,r,i.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=ta(i,e,o,!1);const t=n.listen(p.name||f,r,o);u.push(o,t),c&&c.push(r,g,m,m+1)}}else o=ta(i,e,o,!0),f.addEventListener(r,o,s),u.push(o),c&&c.push(r,g,m,s)}const d=i.outputs;let p;if(h&&null!==d&&(p=d[r])){const t=p.length;if(t)for(let n=0;n<t;n+=2){const t=e[p[n]][p[n+1]].subscribe(o),s=u.length;u.push(o,t),c&&c.push(r,i.index,s,-(s+1))}}}function Js(t,e,n){try{return!1!==e(n)}catch(i){return Ao(t,i),!1}}function ta(t,e,n,i){return function r(o){if(o===Function)return n;const s=2&t.flags?$e(t.index,e):e;0==(32&e[2])&&mo(s);let a=Js(e,n,o),l=r.__ngNextListenerFn__;for(;l;)a=Js(e,l,o)&&a,l=l.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function ea(t=1){return function(t){return(tn.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,tn.lFrame.contextLView))[8]}(t)}function na(t,e){let n=null;const i=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let r=0;r<e.length;r++){const o=e[r];if("*"!==o){if(null===i?mr(t,o,!0):gr(i,o))return r}else n=r}return n}function ia(t){const e=nn()[16][6];if(!e.projection){const n=e.projection=oe(t?t.length:1,null),i=n.slice();let r=e.child;for(;null!==r;){const e=t?na(r,t):0;null!==e&&(i[e]?i[e].projectionNext=r:n[e]=r,i[e]=r),r=r.next}}}let ra=!1;function oa(t){ra=t}function sa(t,e=0,n){const i=nn(),r=rn(),o=Nr(r,i[6],t,1,null,n||null);null===o.projection&&(o.projection=e),cn(),ra||qo(r,i,o)}function aa(t,e,n){return la(t,"",e,"",n),aa}function la(t,e,n,i,r){const o=nn(),s=Is(o,e,n,i);return s!==br&&Xr(rn(),kn(),o,t,s,o[11],r,!1),la}const ca=[];function ua(t,e,n,i,r){const o=t[n+1],s=null===e;let a=i?Pr(o):Dr(o),l=!1;for(;0!==a&&(!1===l||s);){const n=t[a+1];ha(t[a],e)&&(l=!0,t[a+1]=i?Rr(n):kr(n)),a=i?Pr(n):Dr(n)}l&&(t[n+1]=i?kr(o):Rr(o))}function ha(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&le(t,e)>=0}const da={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function pa(t){return t.substring(da.key,da.keyEnd)}function fa(t,e){const n=da.textEnd;return n===e?-1:(e=da.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,da.key=e,n),ma(t,e,n))}function ma(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function ga(t,e,n){return _a(t,e,n,!1),ga}function va(t,e){return _a(t,e,null,!0),va}function ya(t){wa(se,ba,t,!0)}function ba(t,e){for(let n=function(t){return function(t){da.key=0,da.keyEnd=0,da.value=0,da.valueEnd=0,da.textEnd=t.length}(t),fa(t,ma(t,0,da.textEnd))}(e);n>=0;n=fa(e,n))se(t,pa(e),!0)}function _a(t,e,n,i){const r=nn(),o=rn(),s=mn(2);o.firstUpdatePass&&xa(o,t,s,i),e!==br&&Ds(r,s,e)&&Sa(o,o.data[Tn()+20],r,r[11],t,r[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=_t(Mi(t)))),t}(e,n),i,s)}function wa(t,e,n,i){const r=rn(),o=mn(2);r.firstUpdatePass&&xa(r,null,o,i);const s=nn();if(n!==br&&Ds(s,o,n)){const a=r.data[Tn()+20];if(Pa(a,i)&&!Aa(r,o)){let t=i?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=wt(t,n||"")),Vs(r,a,s,n,i)}else!function(t,e,n,i,r,o,s,a){r===br&&(r=ca);let l=0,c=0,u=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;null!==u||null!==h;){const d=l<r.length?r[l+1]:void 0,p=c<o.length?o[c+1]:void 0;let f=null,m=void 0;u===h?(l+=2,c+=2,d!==p&&(f=h,m=p)):null===h||null!==u&&u<h?(l+=2,f=u):(c+=2,f=h,m=p),null!==f&&Sa(t,e,n,i,f,m,s,a),u=l<r.length?r[l]:null,h=c<o.length?o[c]:null}}(r,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return ca;const i=[],r=Mi(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,o)}}function Aa(t,e){return e>=t.expandoStartIndex}function xa(t,e,n,i){const r=t.data;if(null===r[n+1]){const o=r[Tn()+20],s=Aa(t,n);Pa(o,i)&&null===e&&!s&&(e=!1),e=function(t,e,n,i){const r=yn(t);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=Ea(n=Ca(null,t,e,n,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==r)if(n=Ca(r,t,e,n,i),null===o){let n=function(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==Dr(i))return t[Pr(i)]}(t,e,i);void 0!==n&&Array.isArray(n)&&(n=Ca(null,t,e,n[1],i),n=Ea(n,e.attrs,i),function(t,e,n,i){t[Pr(n?e.classBindings:e.styleBindings)]=i}(t,e,i,n))}else o=function(t,e,n){let i=void 0;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=Ea(i,t[o].hostAttrs,n);return Ea(i,e.attrs,n)}(t,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),n}(r,o,e,i),function(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Pr(s),l=Dr(s);t[i]=n;let c,u=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||le(t,c)>0)&&(u=!0)}else c=n;if(r)if(0!==l){const e=Pr(t[a+1]);t[i+1]=Tr(e,a),0!==e&&(t[e+1]=Or(t[e+1],i)),t[a+1]=131071&t[a+1]|i<<17}else t[i+1]=Tr(a,0),0!==a&&(t[a+1]=Or(t[a+1],i)),a=i;else t[i+1]=Tr(l,0),0===a?a=i:t[l+1]=Or(t[l+1],i),l=i;u&&(t[i+1]=kr(t[i+1])),ua(t,c,i,!0),ua(t,c,i,!1),function(t,e,n,i,r){const o=r?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&le(o,e)>=0&&(n[i+1]=Rr(n[i+1]))}(e,c,t,i,o),s=Tr(a,l),o?e.classBindings=s:e.styleBindings=s}(r,o,e,n,s,i)}}function Ca(t,e,n,i,r){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],i=Ea(i,o.hostAttrs,r),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function Ea(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),se(t,s,!!n||e[++o]))}return void 0===t?null:t}function Sa(t,e,n,i,r,o,s,a){if(3!==e.type)return;const l=t.data,c=l[a+1];Ta(1==(1&c)?Ma(l,e,n,r,Dr(c),s):void 0)||(Ta(o)||function(t){return 2==(2&t)}(c)&&(o=Ma(l,null,n,r,a,s)),function(t,e,n,i,r){const o=Ve(t);if(e)r?o?t.addClass(n,i):n.classList.add(i):o?t.removeClass(n,i):n.classList.remove(i);else{const e=-1==i.indexOf("-")?void 0:2;null==r?o?t.removeStyle(n,i,e):n.style.removeProperty(i):o?t.setStyle(n,i,r,e):n.style.setProperty(i,r)}}(i,s,He(Tn(),n),r,o))}function Ma(t,e,n,i,r,o){const s=null===e;let a=void 0;for(;r>0;){const e=t[r],o=Array.isArray(e),l=o?e[1]:e,c=null===l;let u=n[r+1];u===br&&(u=c?ca:void 0);let h=c?ae(u,i):l===i?u:void 0;if(o&&!Ta(h)&&(h=ae(e,i)),Ta(h)&&(a=h,s))return a;const d=t[r+1];r=s?Pr(d):Dr(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=ae(t,i))}return a}function Ta(t){return void 0!==t}function Pa(t,e){return 0!=(t.flags&(e?16:32))}function ka(t,e=""){const n=nn(),i=rn(),r=t+20,o=i.firstCreatePass?Nr(i,n[6],t,3,null,null):i.data[r],s=n[r]=To(e,n[11]);jo(i,n,s,o),an(o,!1)}function Da(t){return Oa("",t,""),Da}function Oa(t,e,n){const i=nn(),r=Is(i,t,e,n);return r!==br&&Co(i,Tn(),r),Oa}function Ra(t,e,n,i,r){const o=nn(),s=function(t,e,n,i,r,o){const s=Os(t,pn(),n,r);return mn(2),s?e+$n(n)+i+$n(r)+o:br}(o,t,e,n,i,r);return s!==br&&Co(o,Tn(),s),Ra}function Ia(t,e,n){wa(se,ba,Is(nn(),t,e,n),!0)}function La(t,e,n){const i=nn();return Ds(i,fn(),e)&&Xr(rn(),kn(),i,t,e,i[11],n,!0),La}function Fa(t,e,n){const i=nn();if(Ds(i,fn(),e)){const r=rn(),o=kn();Xr(r,o,i,t,e,wo(yn(r.data),o,i),n,!0)}return Fa}function Na(t,e){const n=Ye(t)[1],i=n.data.length-1;Dn(n,{directiveStart:i,directiveEnd:i+1})}function Ba(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const i=[t];for(;e;){let r=void 0;if(ke(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(n){i.push(r);const e=t;e.inputs=Ua(t.inputs),e.declaredInputs=Ua(t.declaredInputs),e.outputs=Ua(t.outputs);const n=r.hostBindings;n&&za(t,n);const o=r.viewQuery,s=r.contentQueries;if(o&&Va(t,o),s&&ja(t,s),ct(t.inputs,r.inputs),ct(t.declaredInputs,r.declaredInputs),ct(t.outputs,r.outputs),ke(r)&&r.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(r.data.animation)}}const e=r.features;if(e)for(let i=0;i<e.length;i++){const r=e[i];r&&r.ngInherit&&r(t),r===Ba&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=jn(r.hostAttrs,n=jn(n,r.hostAttrs))}}(i)}function Ua(t){return t===he?{}:t===de?[]:t}function Va(t,e){const n=t.viewQuery;t.viewQuery=n?(t,i)=>{e(t,i),n(t,i)}:e}function ja(t,e){const n=t.contentQueries;t.contentQueries=n?(t,i,r)=>{e(t,i,r),n(t,i,r)}:e}function za(t,e){const n=t.hostBindings;t.hostBindings=n?(t,i)=>{e(t,i),n(t,i)}:e}function Ha(t,e,n,i,r){if(t=Ct(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ha(t[o],e,n,i,r);else{const o=rn(),s=nn();let a=_s(t)?t:Ct(t.provide),l=vs(t);const c=sn(),u=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(_s(t)||!t.multi){const i=new Nn(l,r,Ns),p=qa(a,e,r?u:u+d,h);-1===p?(si(ni(c,s),o,a),Ga(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(i),s.push(i)):(n[p]=i,s[p]=i)}else{const p=qa(a,e,u+d,h),f=qa(a,e,u,u+d),m=p>=0&&n[p],g=f>=0&&n[f];if(r&&!g||!r&&!m){si(ni(c,s),o,a);const u=function(t,e,n,i,r){const o=new Nn(t,n,Ns);return o.multi=[],o.index=e,o.componentProviders=0,Wa(o,r,i&&!n),o}(r?Ya:$a,n.length,r,i,l);!r&&g&&(n[f].providerFactory=u),Ga(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(u),s.push(u)}else Ga(o,t,p>-1?p:f,Wa(n[r?f:p],l,!r&&i));!r&&i&&g&&n[f].componentProviders++}}}function Ga(t,e,n,i){const r=_s(e);if(r||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[i,o]):s[t+1].push(i,o)}else s.push(n,o)}}}function Wa(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function qa(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function $a(t,e,n,i){return Qa(this.multi,[])}function Ya(t,e,n,i){const r=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=hi(n,n[1],this.providerFactory.index,i);o=e.slice(0,t),Qa(r,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Qa(r,o);return o}function Qa(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Xa(t,e=[]){return n=>{n.providersResolver=(n,i)=>function(t,e,n){const i=rn();if(i.firstCreatePass){const r=ke(t);Ha(n,i.data,i.blueprint,r,!0),Ha(e,i.data,i.blueprint,r,!1)}}(n,i?i(t):t,e)}}class Ka{}class Za{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${_t(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ja=(()=>{class t{}return t.NULL=new Za,t})(),tl=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>el(t),t})();const el=function(t){return es(t,sn(),nn())};class nl{}var il=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let rl=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ol(),t})();const ol=function(){const t=nn(),e=$e(sn().index,t);return function(t){const e=t[11];if(Ve(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Ee(e)?e:t)};let sl=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>null}),t})();class al{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ll=new al("10.0.7");class cl{constructor(){}supports(t){return Ts(t)}create(t){return new hl(t)}}const ul=(t,e)=>e;class hl{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ul}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,i=0,r=null;for(;e||n;){const o=!n||e&&e.currentIndex<ml(n,i,r)?e:n,s=ml(o,i,r),a=o.currentIndex;if(o===n)i--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)i++;else{r||(r=[]);const t=s-i,e=a-i;if(t!=e){for(let n=0;n<t;n++){const i=n<r.length?r[n]:r[n]=0,o=i+n;e<=o&&o<t&&(r[n]=i+1)}r[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ts(t))throw new Error(`Error trying to diff '${_t(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,i,r=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],i=this._trackByFn(e,n),null!==r&&Object.is(r.trackById,i)?(o&&(r=this._verifyReinsertion(r,n,i,e)),Object.is(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,e),o=!0),r=r._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ss()]();let i;for(;!(i=n.next()).done;)e(i.value)}}(t,t=>{i=this._trackByFn(e,t),null!==r&&Object.is(r.trackById,i)?(o&&(r=this._verifyReinsertion(r,t,i,e)),Object.is(r.item,t)||this._addIdentityChange(r,t)):(r=this._mismatch(r,t,i,e),o=!0),r=r._next,e++}),this.length=e;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,i){let r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,i)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,i)):t=this._addAfter(new dl(e,n),r,i),t}_verifyReinsertion(t,e,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?t=this._reinsertAfter(r,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,r=t._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new fl),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fl),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class dl{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pl{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class fl{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new pl,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ml(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}class gl{constructor(){}supports(t){return t instanceof Map||Ps(t)}create(){return new vl}}class vl{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Ps(t)))throw new Error(`Error trying to diff '${_t(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new yl(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class yl{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let bl=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new st,new rt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new t([new cl])}),t})(),_l=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new st,new rt]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new t([new gl])}),t})();const wl=[new gl],Al=new bl([new cl]),xl=new _l(wl);let Cl=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>El(t,tl),t})();const El=function(t,e){return ns(t,e,sn(),nn())};let Sl=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ml(t,tl),t})();const Ml=function(t,e){return is(t,e,sn(),nn())},Tl={};class Pl extends Ja{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ae(t);return new Ol(e,this.ngModule)}}function kl(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Dl=new Bt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Qn});class Ol extends Ka{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(yr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return kl(this.componentDef.inputs)}get outputs(){return kl(this.componentDef.outputs)}create(t,e,n,i){const r=(i=i||this.ngModule)?function(t,e){return{get:(n,i,r)=>{const o=t.get(n,Tl,r);return o!==Tl||i===Tl?o:e.get(n,i,r)}}}(t,i.injector):t,o=r.get(nl,je),s=r.get(sl,null),a=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Ve(t))return t.selectRootElement(e,n===ue.ShadowDom);let i="string"==typeof e?t.querySelector(e):e;return i.textContent="",i}(a,n,this.componentDef.encapsulation):Lr(l,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),u=this.componentDef.onPush?576:528,h={components:[],scheduler:Qn,clean:bo,playerHandler:null,flags:0},d=qr(0,-1,null,1,0,null,null,null,null,null),p=Fr(null,d,h,u,null,null,o,a,s,r);let f,m;An(p,null);try{const t=function(t,e,n,i,r,o){const s=n[1];n[20]=t;const a=Nr(s,null,0,3,null,null),l=a.mergedAttrs=e.hostAttrs;null!==l&&(Cs(a,l,!0),null!==t&&(Bn(r,t,l),null!==a.classes&&Qo(r,t,a.classes),null!==a.styles&&Yo(r,t,a.styles)));const c=i.createRenderer(t,e),u=Fr(n,Wr(e),null,e.onPush?64:16,n[20],a,i,c,void 0);return s.firstCreatePass&&(si(ni(a,n),s,e.type),no(s,a),ro(a,n.length,1)),fo(n,u),n[20]=u}(c,this.componentDef,p,o,a);if(c)if(n)Bn(a,c,["ng-version",ll.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let o=t[i];if("string"==typeof o)2===r?""!==o&&e.push(o,t[++i]):8===r&&n.push(o);else{if(!pr(r))break;r=o}i++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Bn(a,c,t),e&&e.length>0&&Qo(a,c,e.join(" "))}if(m=We(d,0),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const i=e[n];t.push(null!=i?Array.from(i):null)}}f=function(t,e,n,i,r){const o=n[1],s=function(t,e,n){const i=sn();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),eo(t,i,1),oo(t,e,n));const r=hi(e,t,e.length-1,i);or(r,e);const o=Ge(i,e);return o&&or(o,e),r}(o,n,e);i.components.push(s),t[8]=s,r&&r.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=sn();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Pn(a.index-20);const t=n[1];Zr(t,e),Jr(t,n,e.hostVars),to(e,s)}return s}(t,this.componentDef,p,h,[Na]),Br(d,p,null)}finally{Mn()}const g=new Rl(this.componentType,f,es(tl,m,p),p,m);return d.node.child=m,g}}class Rl extends class{}{constructor(t,e,n,i,r){super(),this.location=n,this._rootLView=i,this._tNode=r,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Ko(i),function(t,e,n,i){let r=t.node;null==r&&(t.node=r=Yr(0,null,2,-1,null,null)),i[6]=r}(i[1],0,0,i),this.componentType=t}get injector(){return new fi(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Il=void 0;var Ll=["en",[["a","p"],["AM","PM"],Il],[["AM","PM"],Il,Il],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Il,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Il,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Il,"{1} 'at' {0}",Il],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Fl={};function Nl(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ul(e);if(n)return n;const i=e.split("-")[0];if(n=Ul(i),n)return n;if("en"===i)return Ll;throw new Error(`Missing locale data for the locale "${t}".`)}function Bl(t){return Nl(t)[Vl.PluralCase]}function Ul(t){return t in Fl||(Fl[t]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[t]),Fl[t]}var Vl=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const jl=["zero","one","two","few","many"],zl=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Hl=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Gl=/\ufffd(\/?[#*!]\d+):?\d*\ufffd/gi,Wl=/\ufffd(\d+):?\d*\ufffd/gi,ql=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi;function $l(t){if(!t)return[];let e=0;const n=[],i=[],r=/[{}]/g;let o;for(r.lastIndex=0;o=r.exec(t);){const r=o.index;if("}"==o[0]){if(n.pop(),0==n.length){const n=t.substring(e,r);zl.test(n)?i.push(Yl(n)):i.push(n),e=r+1}}else{if(0==n.length){const n=t.substring(e,r);i.push(n),e=r+1}n.push("{")}}const s=t.substring(e);return i.push(s),i}function Yl(t){const e=[],n=[];let i=1,r=0;const o=$l(t=t.replace(zl,(function(t,e,n){return i="select"===n?0:1,r=parseInt(e.substr(1),10),""})));for(let s=0;s<o.length;){let t=o[s++].trim();1===i&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const r=$l(o[s++]);e.length>n.length&&n.push(r)}return{type:i,mainBinding:r,cases:e,values:n}}function Ql(t){let e,n,i="",r=0,o=!1;for(;null!==(e=Hl.exec(t));)o?e[0]===`\ufffd/*${n}\ufffd`&&(r=e.index,o=!1):(i+=t.substring(r,e.index+e[0].length),n=e[1],o=!0);return i+=t.substr(r),i}function Xl(t,e,n,i=null){const r=[null,null],o=t.split(Wl);let s=0;for(let a=0;a<o.length;a++){const t=o[a];if(1&a){const e=parseInt(t,10);r.push(-1-e),s|=tc(e)}else""!==t&&r.push(t)}return r.push(e<<2|(n?1:0)),n&&r.push(n,i),r[0]=s,r[1]=r.length-2,r}function Kl(t,e=0){let n;e|=tc(t.mainBinding);for(let i=0;i<t.values.length;i++){const r=t.values[i];for(let t=0;t<r.length;t++){const i=r[t];if("string"==typeof i)for(;n=Wl.exec(i);)e|=tc(parseInt(n[1],10));else e=Kl(i,e)}}return e}const Zl=[];let Jl=-1;function tc(t){return 1<<Math.min(t,31)}const ec=[];let nc;function ic(t){return t+nc++}function rc(t,e,n,i,r){const o=e.next;i||(i=n),i===n&&e!==n.child?(e.next=n.child,n.child=e):i!==n&&e!==i.next?(e.next=i.next,i.next=e):e.next=null,n!==r[6]&&(e.parent=n);let s=e.next;for(;s;)s.next===e&&(s.next=o),s=s.next;if(1===e.type)return qo(t,r,e),e;jo(t,r,Ge(e,r),e);const a=r[e.index];return 0!==e.type&&Se(a)&&jo(t,r,a[7],e),e}function oc(t){return void 0===t}function sc(t,e,n,i,r,o){const s=sn();e[n+20]=r;const a=Nr(t,e[6],n,i,o,null);return s&&s.next===a&&(s.next=null),a}function ac(t,e,n,i){const r=i[11];let o=null,s=null;const a=[];for(let l=0;l<e.length;l++){const c=e[l];if("string"==typeof c){const t=To(c,r),u=e[++l];s=o,o=sc(n,i,u,3,t,null),a.push(u),cn()}else if("number"==typeof c)switch(7&c){case 1:const r=c>>>17;let u;u=r===t?i[6]:We(n,r),s=rc(n,o,u,s,i);break;case 0:const h=c>=0,d=(h?c:~c)>>>3;a.push(d),s=o,o=We(n,d),o&&an(o,h);break;case 5:s=o=We(n,c>>>3),an(o,!1);break;case 4:const p=e[++l],f=e[++l];ao(We(n,c>>>3),i,p,f,null,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${c}"`)}else switch(c){case Mr:const t=e[++l],u=e[++l],h=r.createComment(t);s=o,o=sc(n,i,u,5,h,null),a.push(u),or(h,i),o.activeCaseIndex=null,cn();break;case Sr:const d=e[++l],p=e[++l];s=o,o=sc(n,i,p,3,r.createElement(d),d),a.push(p);break;default:throw new Error(`Unable to determine the type of mutate operation for "${c}"`)}}return cn(),a}function lc(t,e,n,i){const r=We(t,n),o=He(n,e);o&&Ho(e[11],o);const s=qe(e,n);if(Se(s)){const t=s;0!==r.type&&Ho(e[11],t[7])}i&&(r.flags|=64)}function cc(t,e,n){(function(t,e,n){const i=rn();Zl[++Jl]=t,oa(!0),i.firstCreatePass&&null===i.data[t+20]&&function(t,e,n,i,r){const o=e.blueprint.length-20;nc=0;const s=sn(),a=ln()?s:s&&s.parent;let l=a&&a!==t[6]?a.index-20:n,c=0;ec[c]=l;const u=[];if(n>0&&s!==a){let t=s.index-20;ln()||(t=~t),u.push(t<<3|0)}const h=[],d=[];if(""===i&&oc(r))u.push(i,ic(o),l<<17|1);else{const t=function(t,e){if(oc(e))return Ql(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,i=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return Ql(t.substring(n,i))}}(i,r),e=(p=t,p.replace(bc," ")).split(Gl);for(let n=0;n<e.length;n++){let i=e[n];if(1&n)if("/"===i.charAt(0)){if("#"===i.charAt(1)){const t=parseInt(i.substr(2),10);l=ec[--c],u.push(t<<3|5)}}else{const t=parseInt(i.substr(1),10),e="#"===i.charAt(0);u.push((e?t:~t)<<3|0,l<<17|1),e&&(ec[++c]=l=t)}else{const e=$l(i);for(let n=0;n<e.length;n++)if(1&n){const i=e[n];if("object"!=typeof i)throw new Error(`Unable to parse ICU expression in "${t}" message.`);const r=ic(o);u.push(Mr,"",r,l<<17|1);const s=Kl(i);gc(d,i,r,r);const a=d.length-1;h.push(tc(i.mainBinding),3,-1-i.mainBinding,r<<2|2,a,s,2,r<<2|3,a)}else if(""!==e[n]){const t=e[n],i=t.match(Wl),r=ic(o);u.push(i?"":t,r,l<<17|1),i&&ee(Xl(t,r),h)}}}}var p;nc>0&&function(t,e,n){if(n>0&&t.firstCreatePass){for(let i=0;i<n;i++)t.blueprint.push(null),t.data.push(null),e.push(null);t.expandoInstructions?t.expandoInstructions.push(n):t.expandoStartIndex+=n}}(e,t,nc),e.data[n+20]={vars:nc,create:u,update:h,icus:d.length?d:null}}(nn(),i,t,e,n)})(t,e,n),function(){const t=nn();!function(t,e){const n=Zl[Jl--],i=t.data[n+20],r=sn(),o=ac(n,i.create,t,e);let s=n+1;for(;s<=r.index-20;){-1===o.indexOf(s)&&lc(t,e,s,!0);const n=We(t,s);!n||0!==n.type&&3!==n.type&&4!==n.type||null===n.localNames||(s+=n.localNames.length>>1),s++}}(rn(),t),oa(!1)}()}function uc(t,e){!function(t,e,n,i){const r=sn().index-20,o=[];for(let s=0;s<i.length;s+=2){const a=i[s],l=i[s+1].split(ql);for(let i=0;i<l.length;i++){const s=l[i];if(1&i)throw new Error("ICU expressions are not yet supported in attributes");if(""!==s)if(s.match(Wl))e.firstCreatePass&&null===e.data[n+20]&&ee(Xl(s,r,a),o);else{const n=We(e,r);3===n.type&&ao(n,t,a,s,null,null);const i=null!==n.inputs&&n.inputs[a];i&&xo(e,t,i,a,s)}}}e.firstCreatePass&&null===e.data[n+20]&&(e.data[n+20]=o)}(nn(),rn(),t,e)}let hc=0,dc=0;function pc(t){return Ds(nn(),fn(),t)&&(hc|=1<<dc),dc++,pc}function fc(t){if(dc){const e=rn(),n=e.data[t+20];let i,r=null;Array.isArray(n)?i=n:(i=n.update,r=n.icus);const o=pn()-dc-1,s=nn();!function t(e,n,i,r,o,s,a=!1){let l=!1;for(let c=0;c<e.length;c++){const u=e[c],h=e[++c];if(a||u&r){let a="";for(let u=c+1;u<=c+h;u++){const c=e[u];if("string"==typeof c)a+=c;else if("number"==typeof c)if(c<0)a+=$n(s[i-c]);else{const h=c>>>2;let d,p,f;switch(3&c){case 1:const c=e[++u],m=e[++u];Xr(o,We(o,h),s,c,a,s[11],m,!1);break;case 0:Co(s,h,a);break;case 2:if(d=e[++u],p=n[d],f=We(o,h),null!==f.activeCaseIndex){const t=p.remove[f.activeCaseIndex];for(let e=0;e<t.length;e++){const i=t[e];switch(7&i){case 3:lc(o,s,i>>>3,!1);break;case 6:const r=We(o,t[e+1]>>>3).activeCaseIndex;null!==r&&ee(n[i>>>3].remove[r],t)}}}const g=mc(p,a);f.activeCaseIndex=-1!==g?g:null,g>-1&&(ac(-1,p.create[g],o,s),l=!0);break;case 3:d=e[++u],p=n[d],f=We(o,h),null!==f.activeCaseIndex&&t(p.update[f.activeCaseIndex],n,i,r,o,s,l)}}}}c+=h}}(i,r,o,hc,e,s),hc=0,dc=0}}function mc(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const i=function(t,e){const n=Bl(e)(parseInt(t,10)),i=jl[n];return void 0!==i?i:"other"}(e,_c);n=t.cases.indexOf(i),-1===n&&"other"!==i&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return n}function gc(t,e,n,i){const r=[],o=[],s=[],a=[],l=[];for(let c=0;c<e.values.length;c++){const u=e.values[c],h=[];for(let t=0;t<u.length;t++){const e=u[t];if("string"!=typeof e){const n=h.push(e)-1;u[t]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}const d=vc(u.join(""),n,h,t,i);r.push(d.create),o.push(d.remove),s.push(d.update),a.push(d.vars),l.push(d.childIcus)}t.push({type:e.type,vars:a,childIcus:l,cases:e.cases,create:r,remove:o,update:s}),nc+=Math.max(...a)}function vc(t,e,n,i,r){const o=Ri(Ue()).getInertBodyElement(t);if(!o)throw new Error("Unable to generate inert body element");const s={vars:0,childIcus:[],create:[],remove:[],update:[]};return function t(e,n,i,r,o,s){if(e){const a=[];for(;e;){const l=e.nextSibling,c=s+ ++n.vars;switch(e.nodeType){case Node.ELEMENT_NODE:const l=e,u=l.tagName.toLowerCase();if(qi.hasOwnProperty(u)){n.create.push(Sr,u,c,i<<17|1);const a=l.attributes;for(let t=0;t<a.length;t++){const e=a.item(t),i=e.name.toLowerCase();e.value.match(Wl)?Qi.hasOwnProperty(i)&&ee($i[i]?Xl(e.value,c,e.name,Bi):Yi[i]?Xl(e.value,c,e.name,Ui):Xl(e.value,c,e.name),n.update):n.create.push(c<<3|4,e.name,e.value)}t(e.firstChild,n,c,r,o,s),n.remove.push(c<<3|3)}else n.vars--;break;case Node.TEXT_NODE:const h=e.textContent||"",d=h.match(Wl);n.create.push(d?"":h,c,i<<17|1),n.remove.push(c<<3|3),d&&ee(Xl(h,c),n.update);break;case Node.COMMENT_NODE:const p=yc.exec(e.textContent||"");if(p){const t=parseInt(p[1],10);n.create.push(Mr,"",c,i<<17|1),a.push([r[t],c])}else n.vars--;break;default:n.vars--}e=l}for(let t=0;t<a.length;t++){const e=a[t][0],i=a[t][1];gc(o,e,i,s+n.vars);const r=o.length-1;n.vars+=Math.max(...o[r].vars),n.childIcus.push(r);const l=Kl(e);n.update.push(tc(e.mainBinding),3,-1-e.mainBinding,i<<2|2,r,l,2,i<<2|3,r),n.remove.push(r<<3|6,i<<3|3)}}}((nr(o)||o).firstChild,s,e,n,i,r),s}const yc=/\ufffd(\d+)\ufffd/,bc=/\uE500/g;let _c="en-US";function wc(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(_c=t.toLowerCase().replace(/_/g,"-"))}const Ac=new Map;class xc extends Jt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Pl(this);const n=Ce(t),i=t[Lt]||null;i&&wc(i),this._bootstrapComponents=Zn(n.bootstrap),this._r3Injector=fs(t,e,[{provide:Jt,useValue:this},{provide:Ja,useValue:this.componentFactoryResolver}],_t(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=As.THROW_IF_NOT_FOUND,n=at.Default){return t===As||t===Jt||t===Ut?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Cc extends te{constructor(t){super(),this.moduleType=t,null!==Ce(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${_t(e)} vs ${_t(e.name)}`)})(t,Ac.get(t),e),Ac.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new xc(this.moduleType,t)}}function Ec(t,e,n){const i=dn()+t,r=nn();return r[i]===br?ks(r,i,n?e.call(n):e()):function(t,e){return t[e]}(r,i)}function Sc(t,e,n,i){return kc(nn(),dn(),t,e,n,i)}function Mc(t,e,n,i,r){return Dc(nn(),dn(),t,e,n,i,r)}function Tc(t,e,n,i,r,o){return function(t,e,n,i,r,o,s,a){const l=e+n;return function(t,e,n,i,r){const o=Os(t,e,n,i);return Ds(t,e+2,r)||o}(t,l,r,o,s)?ks(t,l+3,a?i.call(a,r,o,s):i(r,o,s)):Pc(t,l+3)}(nn(),dn(),t,e,n,i,r,o)}function Pc(t,e){const n=t[e];return n===br?void 0:n}function kc(t,e,n,i,r,o){const s=e+n;return Ds(t,s,r)?ks(t,s+1,o?i.call(o,r):i(r)):Pc(t,s+1)}function Dc(t,e,n,i,r,o,s){const a=e+n;return Os(t,a,r,o)?ks(t,a+2,s?i.call(s,r,o):i(r,o)):Pc(t,a+2)}function Oc(t,e){const n=rn();let i;const r=t+20;n.firstCreatePass?(i=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(r,i.onDestroy)):i=n.data[r];const o=i.factory||(i.factory=xe(i.type)),s=qt(Ns),a=ti(!1),l=o();return ti(a),qt(s),function(t,e,n,i){const r=n+20;r>=t.data.length&&(t.data[r]=null,t.blueprint[r]=null),e[r]=i}(n,nn(),t,l),l}function Rc(t,e,n){const i=nn(),r=qe(i,t);return Lc(i,Ic(i,t)?kc(i,dn(),e,r.transform,n,r):r.transform(n))}function Ic(t,e){return t[1].data[e+20].pure}function Lc(t,e){return Ms.isWrapped(e)&&(e=Ms.unwrap(e),t[pn()]=br),e}const Fc=class extends C{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let i,r=t=>null,o=()=>null;t&&"object"==typeof t?(i=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(r=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(o=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(i=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(i,r,o);return t instanceof d&&t.add(s),s}};function Nc(){return this._results[Ss()]()}class Bc{constructor(){this.dirty=!0,this._results=[],this.changes=new Fc,this.length=0;const t=Ss(),e=Bc.prototype;e[t]||(e[t]=Nc)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?(n===e&&(n=e.slice(0,i)),t(r,n)):n!==e&&n.push(r)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Uc{constructor(t){this.queryList=t,this.matches=null}clone(){return new Uc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vc{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,i=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);i.push(this.queries[n.indexInDeclarationView].clone())}return new Vc(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==iu(t,e).matches&&this.queries[e].setDirty()}}class jc{constructor(t,e,n,i=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=i}}class zc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const i=null!==e?e.length:0,r=this.getByIndex(n).embeddedTView(t,i);r&&(r.indexInDeclarationView=n,null!==e?e.push(r):e=[r])}return null!==e?new zc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Hc{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Hc(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){if(Array.isArray(this.metadata.predicate)){const n=this.metadata.predicate;for(let i=0;i<n.length;i++)this.matchTNodeWithReadOption(t,e,Gc(e,n[i]))}else{const n=this.metadata.predicate;n===Cl?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,ui(e,t,n,!1,!1))}}matchTNodeWithReadOption(t,e,n){if(null!==n){const i=this.metadata.read;if(null!==i)if(i===tl||i===Sl||i===Cl&&0===e.type)this.addMatch(e.index,-2);else{const n=ui(e,t,i,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Gc(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function Wc(t,e,n,i){return-1===n?function(t,e){return 3===t.type||4===t.type?es(tl,t,e):0===t.type?ns(Cl,tl,t,e):null}(e,t):-2===n?function(t,e,n){return n===tl?es(tl,e,t):n===Cl?ns(Cl,tl,e,t):n===Sl?is(Sl,tl,e,t):void 0}(t,e,i):hi(t,t[1],n,e)}function qc(t,e,n,i){const r=e[19].queries[i];if(null===r.matches){const i=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const r=o[t];s.push(r<0?null:Wc(e,i[r],o[t+1],n.metadata.read))}r.matches=s}return r.matches}function $c(t){const e=nn(),n=rn(),i=bn();_n(i+1);const r=iu(n,i);if(t.dirty&&Qe(e)===r.metadata.isStatic){if(null===r.matches)t.reset([]);else{const o=r.crossesNgTemplate?function t(e,n,i,r){const o=e.queries.getByIndex(i),s=o.matches;if(null!==s){const a=qc(e,n,o,i);for(let e=0;e<s.length;e+=2){const i=s[e];if(i>0)r.push(a[e/2]);else{const o=s[e+1],a=n[-i];for(let e=10;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,o,r)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const i=e[n];t(i[1],i,o,r)}}}}}return r}(n,e,i,[]):qc(n,e,r,i);t.reset(o),t.notifyOnChanges()}return!0}return!1}function Yc(t,e,n){Xc(rn(),nn(),t,e,n,!0)}function Qc(t,e,n){Xc(rn(),nn(),t,e,n,!1)}function Xc(t,e,n,i,r,o){t.firstCreatePass&&(nu(t,new jc(n,i,o,r),-1),o&&(t.staticViewQueries=!0)),eu(t,e)}function Kc(t,e,n,i){Jc(rn(),nn(),e,n,i,!1,sn(),t)}function Zc(t,e,n,i){Jc(rn(),nn(),e,n,i,!0,sn(),t)}function Jc(t,e,n,i,r,o,s,a){t.firstCreatePass&&(nu(t,new jc(n,i,o,r),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a),o&&(t.staticContentQueries=!0)),eu(t,e)}function tu(){return t=nn(),e=bn(),t[19].queries[e].queryList;var t,e}function eu(t,e){const n=new Bc;$r(t,e,n,n.destroy),null===e[19]&&(e[19]=new Vc),e[19].queries.push(new Uc(n))}function nu(t,e,n){null===t.queries&&(t.queries=new zc),t.queries.track(new Hc(e,n))}function iu(t,e){return t.queries.getByIndex(e)}function ru(t,e){return ns(Cl,tl,t,e)}const ou=new Bt("Application Initializer");let su=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Ys(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Yt(ou,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const au=new Bt("AppId"),lu={provide:au,useFactory:function(){return`${cu()}${cu()}${cu()}`},deps:[]};function cu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const uu=new Bt("Platform Initializer"),hu=new Bt("Platform ID"),du=new Bt("appBootstrapListener");let pu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const fu=new Bt("LocaleId"),mu=new Bt("DefaultCurrencyCode");class gu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const vu=function(t){return new Cc(t)},yu=vu,bu=function(t){return Promise.resolve(vu(t))},_u=function(t){const e=vu(t),n=Zn(Ce(t).declarations).reduce((t,e)=>{const n=Ae(e);return n&&t.push(new Ol(n)),t},[]);return new gu(e,n)},wu=_u,Au=function(t){return Promise.resolve(_u(t))};let xu=(()=>{class t{constructor(){this.compileModuleSync=yu,this.compileModuleAsync=bu,this.compileModuleAndAllComponentsSync=wu,this.compileModuleAndAllComponentsAsync=Au}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Cu=(()=>Promise.resolve(0))();function Eu(t){"undefined"==typeof Zone?Cu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Su{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fc(!1),this.onMicrotaskEmpty=new Fc(!1),this.onStable=new Fc(!1),this.onError=new Fc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=kt.requestAnimationFrame,e=kt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(kt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ku(t),Pu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ku(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,i,r,o,s,a)=>{try{return Du(t),n.invokeTask(r,o,s,a)}finally{e&&"eventTask"===o.type&&e(),Ou(t)}},onInvoke:(e,n,i,r,o,s,a)=>{try{return Du(t),e.invoke(i,r,o,s,a)}finally{Ou(t)}},onHasTask:(e,n,i,r)=>{e.hasTask(i,r),n===i&&("microTask"==r.change?(t._hasPendingMicrotasks=r.microTask,ku(t),Pu(t)):"macroTask"==r.change&&(t.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,n,i,r)=>(e.handleError(i,r),t.runOutsideAngular(()=>t.onError.emit(r)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Su.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Su.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,i){const r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+i,t,Tu,Mu,Mu);try{return r.runTask(o,e,n)}finally{r.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Mu(){}const Tu={};function Pu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ku(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Du(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ou(t){t._nesting--,Pu(t)}class Ru{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fc,this.onMicrotaskEmpty=new Fc,this.onStable=new Fc,this.onError=new Fc}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,i){return t.apply(e,n)}}let Iu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Su.assertNotInAngularZone(),Eu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Eu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let i=-1;e&&e>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==i),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Yt(Su))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Lu=(()=>{class t{constructor(){this._applications=new Map,Bu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Bu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class Fu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let Nu,Bu=new Fu;const Uu=new Bt("AllowMultipleToken");class Vu{constructor(t,e){this.name=t,this.token=e}}function ju(t,e,n=[]){const i=`Platform: ${e}`,r=new Bt(i);return(e=[])=>{let o=zu();if(!o||o.injector.get(Uu,!1))if(t)t(n.concat(e).concat({provide:r,useValue:!0}));else{const t=n.concat(e).concat({provide:r,useValue:!0},{provide:ls,useValue:"platform"});!function(t){if(Nu&&!Nu.destroyed&&!Nu.injector.get(Uu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Nu=t.get(Hu);const e=t.get(uu,null);e&&e.forEach(t=>t())}(As.create({providers:t,name:i}))}return function(t){const e=zu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function zu(){return Nu&&!Nu.destroyed?Nu:null}let Hu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,n){const i=function(t,e){let n;return n="noop"===t?new Ru:("zone.js"===t?void 0:t)||new Su({enableLongStackTrace:Oi(),shouldCoalesceEventChangeDetection:e}),n}(n?n.ngZone:void 0,n&&n.ngZoneEventCoalescing||!1),r=[{provide:Su,useValue:i}];return i.run(()=>{const n=As.create({providers:r,parent:this.injector,name:t.moduleType.name}),o=t.create(n),s=o.injector.get(_i,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return o.onDestroy(()=>qu(this._modules,o)),i.runOutsideAngular(()=>i.onError.subscribe({next:t=>{s.handleError(t)}})),function(t,n,i){try{const e=i();return Ys(e)?e.catch(e=>{throw n.runOutsideAngular(()=>t.handleError(e)),e}):e}catch(e){throw n.runOutsideAngular(()=>t.handleError(e)),e}}(s,i,()=>{const t=o.injector.get(su);return t.runInitializers(),t.donePromise.then(()=>(wc(o.injector.get(fu,"en-US")||"en-US"),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,e=[]){const n=Gu({},e);return function(t,e,n){const i=new Cc(n);return Promise.resolve(i)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Wu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${_t(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Yt(As))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Gu(t,e){return Array.isArray(e)?e.reduce(Gu,t):Object.assign(Object.assign({},t),e)}let Wu=(()=>{class t{constructor(t,e,n,i,r,o){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=i,this._componentFactoryResolver=r,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Oi(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new b(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new b(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Su.assertNotInAngularZone(),Eu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Su.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=q(s,a.pipe(tt()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Ka?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const i=n.isBoundToModule?void 0:this._injector.get(Jt),r=n.create(As.NULL,[],e||n.selector,i);r.onDestroy(()=>{this._unloadComponent(r)});const o=r.injector.get(Iu,null);return o&&r.injector.get(Lu).registerApplication(r.location.nativeElement,o),this._loadComponent(r),Oi()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;qu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(du,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),qu(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Yt(Su),Yt(pu),Yt(As),Yt(_i),Yt(Ja),Yt(su))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function qu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class $u{}class Yu{}const Qu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Xu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Qu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,n]=t.split("#");return void 0===n&&(n="default"),i("zn8P")(e).then(t=>t[n]).then(t=>Ku(t,e,n)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,n]=t.split("#"),r="NgFactory";return void 0===n&&(n="default",r=""),i("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[n+r]).then(t=>Ku(t,e,n))}}return t.\u0275fac=function(e){return new(e||t)(Yt(xu),Yt(Yu,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Ku(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Zu=ju(null,"core",[{provide:hu,useValue:"unknown"},{provide:Hu,deps:[As]},{provide:Lu,deps:[]},{provide:pu,deps:[]}]),Ju=[{provide:Wu,useClass:Wu,deps:[Su,pu,As,_i,Ja,su]},{provide:Dl,deps:[Su],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:su,useClass:su,deps:[[new rt,ou]]},{provide:xu,useClass:xu,deps:[]},lu,{provide:bl,useFactory:function(){return Al},deps:[]},{provide:_l,useFactory:function(){return xl},deps:[]},{provide:fu,useFactory:function(t){return wc(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new it(fu),new rt,new st]]},{provide:mu,useValue:"USD"}];let th=(()=>{class t{constructor(t){}}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)(Yt(Wu))},providers:Ju}),t})();const eh={apiKey:"AIzaSyDKKCLKNhPcelfhiODauE9mji32yUsN1b0",authDomain:"atrium-870a8.firebaseapp.com",databaseURL:"https://atrium-870a8.firebaseio.com",projectId:"atrium-870a8",storageBucket:"atrium-870a8.appspot.com",messagingSenderId:"258338811862",appId:"1:258338811862:web:745a0f34a4d0eadeb6be77",measurementId:"G-4F7P9G7LJV"};let nh=null;function ih(){return nh}const rh=new Bt("DocumentToken");let oh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:sh,token:t,providedIn:"platform"}),t})();function sh(){return Yt(lh)}const ah=new Bt("Location Initialized");let lh=(()=>{class t extends oh{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=ih().getLocation(),this._history=ih().getHistory()}getBaseHrefFromDOM(){return ih().getBaseHref(this._doc)}onPopState(t){ih().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){ih().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){ch()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){ch()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Yt(rh))},t.\u0275prov=ut({factory:uh,token:t,providedIn:"platform"}),t})();function ch(){return!!window.history.pushState}function uh(){return new lh(Yt(rh))}function hh(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function dh(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function ph(t){return t&&"?"!==t[0]?"?"+t:t}let fh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:mh,token:t,providedIn:"root"}),t})();function mh(t){const e=Yt(rh).location;return new vh(Yt(oh),e&&e.origin||"")}const gh=new Bt("appBaseHref");let vh=(()=>{class t extends fh{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return hh(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+ph(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,i){const r=this.prepareExternalUrl(n+ph(i));this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){const r=this.prepareExternalUrl(n+ph(i));this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Yt(oh),Yt(gh,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),yh=(()=>{class t extends fh{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=hh(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,i){let r=this.prepareExternalUrl(n+ph(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){let r=this.prepareExternalUrl(n+ph(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Yt(oh),Yt(gh,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),bh=(()=>{class t{constructor(t,e){this._subject=new Fc,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=dh(wh(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+ph(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,wh(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ph(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ph(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(Yt(fh),Yt(oh))},t.normalizeQueryParams=ph,t.joinWithSlash=hh,t.stripTrailingSlash=dh,t.\u0275prov=ut({factory:_h,token:t,providedIn:"root"}),t})();function _h(){return new bh(Yt(fh),Yt(oh))}function wh(t){return t.replace(/\/index.html$/,"")}const Ah={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var xh=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}({}),Ch=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),Eh=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),Sh=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),Mh=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),Th=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function Ph(t,e,n){const i=Nl(t),r=Uh([i[Vl.DayPeriodsFormat],i[Vl.DayPeriodsStandalone]],e);return Uh(r,n)}function kh(t,e,n){const i=Nl(t),r=Uh([i[Vl.DaysFormat],i[Vl.DaysStandalone]],e);return Uh(r,n)}function Dh(t,e,n){const i=Nl(t),r=Uh([i[Vl.MonthsFormat],i[Vl.MonthsStandalone]],e);return Uh(r,n)}function Oh(t,e){return Uh(Nl(t)[Vl.DateFormat],e)}function Rh(t,e){return Uh(Nl(t)[Vl.TimeFormat],e)}function Ih(t,e){return Uh(Nl(t)[Vl.DateTimeFormat],e)}function Lh(t,e){const n=Nl(t),i=n[Vl.NumberSymbols][e];if(void 0===i){if(e===Th.CurrencyDecimal)return n[Vl.NumberSymbols][Th.Decimal];if(e===Th.CurrencyGroup)return n[Vl.NumberSymbols][Th.Group]}return i}function Fh(t,e){return Nl(t)[Vl.NumberFormats][e]}const Nh=Bl;function Bh(t){if(!t[Vl.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Vl.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Uh(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function Vh(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const jh=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,zh={},Hh=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Gh=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),Wh=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),qh=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function $h(t,e,n,i){let r=function(t){if(nd(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,n,i]=t.split("-").map(t=>+t);return new Date(e,n-1,i)}let n;if(n=t.match(jh))return function(t){const e=new Date(0);let n=0,i=0;const r=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),i=Number(t[9]+t[11])),r.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-i,l=Number(t[6]||0),c=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,l,c),e}(n)}const e=new Date(t);if(!nd(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=function t(e,n){const i=function(t){return Nl(t)[Vl.LocaleId]}(e);if(zh[i]=zh[i]||{},zh[i][n])return zh[i][n];let r="";switch(n){case"shortDate":r=Oh(e,Mh.Short);break;case"mediumDate":r=Oh(e,Mh.Medium);break;case"longDate":r=Oh(e,Mh.Long);break;case"fullDate":r=Oh(e,Mh.Full);break;case"shortTime":r=Rh(e,Mh.Short);break;case"mediumTime":r=Rh(e,Mh.Medium);break;case"longTime":r=Rh(e,Mh.Long);break;case"fullTime":r=Rh(e,Mh.Full);break;case"short":const n=t(e,"shortTime"),i=t(e,"shortDate");r=Yh(Ih(e,Mh.Short),[n,i]);break;case"medium":const o=t(e,"mediumTime"),s=t(e,"mediumDate");r=Yh(Ih(e,Mh.Medium),[o,s]);break;case"long":const a=t(e,"longTime"),l=t(e,"longDate");r=Yh(Ih(e,Mh.Long),[a,l]);break;case"full":const c=t(e,"fullTime"),u=t(e,"fullDate");r=Yh(Ih(e,Mh.Full),[c,u])}return r&&(zh[i][n]=r),r}(n,e)||e;let o,s=[];for(;e;){if(o=Hh.exec(e),!o){s.push(e);break}{s=s.concat(o.slice(1));const t=s.pop();if(!t)break;e=t}}let a=r.getTimezoneOffset();i&&(a=ed(i,a),r=function(t,e,n){const i=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(ed(e,i)-i))}(r,i));let l="";return s.forEach(t=>{const e=function(t){if(td[t])return td[t];let e;switch(t){case"G":case"GG":case"GGG":e=Kh(qh.Eras,Sh.Abbreviated);break;case"GGGG":e=Kh(qh.Eras,Sh.Wide);break;case"GGGGG":e=Kh(qh.Eras,Sh.Narrow);break;case"y":e=Xh(Wh.FullYear,1,0,!1,!0);break;case"yy":e=Xh(Wh.FullYear,2,0,!0,!0);break;case"yyy":e=Xh(Wh.FullYear,3,0,!1,!0);break;case"yyyy":e=Xh(Wh.FullYear,4,0,!1,!0);break;case"M":case"L":e=Xh(Wh.Month,1,1);break;case"MM":case"LL":e=Xh(Wh.Month,2,1);break;case"MMM":e=Kh(qh.Months,Sh.Abbreviated);break;case"MMMM":e=Kh(qh.Months,Sh.Wide);break;case"MMMMM":e=Kh(qh.Months,Sh.Narrow);break;case"LLL":e=Kh(qh.Months,Sh.Abbreviated,Eh.Standalone);break;case"LLLL":e=Kh(qh.Months,Sh.Wide,Eh.Standalone);break;case"LLLLL":e=Kh(qh.Months,Sh.Narrow,Eh.Standalone);break;case"w":e=Jh(1);break;case"ww":e=Jh(2);break;case"W":e=Jh(1,!0);break;case"d":e=Xh(Wh.Date,1);break;case"dd":e=Xh(Wh.Date,2);break;case"E":case"EE":case"EEE":e=Kh(qh.Days,Sh.Abbreviated);break;case"EEEE":e=Kh(qh.Days,Sh.Wide);break;case"EEEEE":e=Kh(qh.Days,Sh.Narrow);break;case"EEEEEE":e=Kh(qh.Days,Sh.Short);break;case"a":case"aa":case"aaa":e=Kh(qh.DayPeriods,Sh.Abbreviated);break;case"aaaa":e=Kh(qh.DayPeriods,Sh.Wide);break;case"aaaaa":e=Kh(qh.DayPeriods,Sh.Narrow);break;case"b":case"bb":case"bbb":e=Kh(qh.DayPeriods,Sh.Abbreviated,Eh.Standalone,!0);break;case"bbbb":e=Kh(qh.DayPeriods,Sh.Wide,Eh.Standalone,!0);break;case"bbbbb":e=Kh(qh.DayPeriods,Sh.Narrow,Eh.Standalone,!0);break;case"B":case"BB":case"BBB":e=Kh(qh.DayPeriods,Sh.Abbreviated,Eh.Format,!0);break;case"BBBB":e=Kh(qh.DayPeriods,Sh.Wide,Eh.Format,!0);break;case"BBBBB":e=Kh(qh.DayPeriods,Sh.Narrow,Eh.Format,!0);break;case"h":e=Xh(Wh.Hours,1,-12);break;case"hh":e=Xh(Wh.Hours,2,-12);break;case"H":e=Xh(Wh.Hours,1);break;case"HH":e=Xh(Wh.Hours,2);break;case"m":e=Xh(Wh.Minutes,1);break;case"mm":e=Xh(Wh.Minutes,2);break;case"s":e=Xh(Wh.Seconds,1);break;case"ss":e=Xh(Wh.Seconds,2);break;case"S":e=Xh(Wh.FractionalSeconds,1);break;case"SS":e=Xh(Wh.FractionalSeconds,2);break;case"SSS":e=Xh(Wh.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Zh(Gh.Short);break;case"ZZZZZ":e=Zh(Gh.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Zh(Gh.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Zh(Gh.Long);break;default:return null}return td[t]=e,e}(t);l+=e?e(r,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Yh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,(function(t,n){return null!=e&&n in e?e[n]:t}))),t}function Qh(t,e,n="-",i,r){let o="";(t<0||r&&t<=0)&&(r?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return i&&(s=s.substr(s.length-e)),o+s}function Xh(t,e,n=0,i=!1,r=!1){return function(o,s){let a=function(t,e){switch(t){case Wh.FullYear:return e.getFullYear();case Wh.Month:return e.getMonth();case Wh.Date:return e.getDate();case Wh.Hours:return e.getHours();case Wh.Minutes:return e.getMinutes();case Wh.Seconds:return e.getSeconds();case Wh.FractionalSeconds:return e.getMilliseconds();case Wh.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===Wh.Hours)0===a&&-12===n&&(a=12);else if(t===Wh.FractionalSeconds)return l=e,Qh(a,3).substr(0,l);var l;const c=Lh(s,Th.MinusSign);return Qh(a,e,c,i,r)}}function Kh(t,e,n=Eh.Format,i=!1){return function(r,o){return function(t,e,n,i,r,o){switch(n){case qh.Months:return Dh(e,r,i)[t.getMonth()];case qh.Days:return kh(e,r,i)[t.getDay()];case qh.DayPeriods:const s=t.getHours(),a=t.getMinutes();if(o){const t=function(t){const e=Nl(t);return Bh(e),(e[Vl.ExtraData][2]||[]).map(t=>"string"==typeof t?Vh(t):[Vh(t[0]),Vh(t[1])])}(e),n=function(t,e,n){const i=Nl(t);Bh(i);const r=Uh([i[Vl.ExtraData][0],i[Vl.ExtraData][1]],e)||[];return Uh(r,n)||[]}(e,r,i),o=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,i=s>=e.hours&&a>=e.minutes,r=s<n.hours||s===n.hours&&a<n.minutes;if(e.hours<n.hours){if(i&&r)return!0}else if(i||r)return!0}else if(t.hours===s&&t.minutes===a)return!0;return!1});if(-1!==o)return n[o]}return Ph(e,r,i)[s<12?0:1];case qh.Eras:return function(t,e){return Uh(Nl(t)[Vl.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(r,o,t,e,n,i)}}function Zh(t){return function(e,n,i){const r=-1*i,o=Lh(n,Th.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(t){case Gh.Short:return(r>=0?"+":"")+Qh(s,2,o)+Qh(Math.abs(r%60),2,o);case Gh.ShortGMT:return"GMT"+(r>=0?"+":"")+Qh(s,1,o);case Gh.Long:return"GMT"+(r>=0?"+":"")+Qh(s,2,o)+":"+Qh(Math.abs(r%60),2,o);case Gh.Extended:return 0===i?"Z":(r>=0?"+":"")+Qh(s,2,o)+":"+Qh(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}function Jh(t,e=!1){return function(n,i){let r;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();r=1+Math.floor((e+t)/7)}else{const t=function(t){const e=new Date(t,0,1).getDay();return new Date(t,0,1+(e<=4?4:11)-e)}(n.getFullYear()),e=(o=n,new Date(o.getFullYear(),o.getMonth(),o.getDate()+(4-o.getDay()))).getTime()-t.getTime();r=1+Math.round(e/6048e5)}var o;return Qh(r,t,Lh(i,Th.MinusSign))}}const td={};function ed(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function nd(t){return t instanceof Date&&!isNaN(t.valueOf())}const id=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function rd(t,e,n,i,r,o,s=!1){let a="",l=!1;if(isFinite(t)){let c=function(t){let e,n,i,r,o,s=Math.abs(t)+"",a=0;for((n=s.indexOf("."))>-1&&(s=s.replace(".","")),(i=s.search(/e/i))>0?(n<0&&(n=i),n+=+s.slice(i+1),s=s.substring(0,i)):n<0&&(n=s.length),i=0;"0"===s.charAt(i);i++);if(i===(o=s.length))e=[0],n=1;else{for(o--;"0"===s.charAt(o);)o--;for(n-=i,e=[],r=0;i<=o;i++,r++)e[r]=Number(s.charAt(i))}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{digits:e,exponent:a,integerLen:n}}(t);s&&(c=function(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(c));let u=e.minInt,h=e.minFrac,d=e.maxFrac;if(o){const t=o.match(id);if(null===t)throw new Error(`${o} is not a valid digit info`);const e=t[1],n=t[3],i=t[5];null!=e&&(u=sd(e)),null!=n&&(h=sd(n)),null!=i?d=sd(i):null!=n&&h>d&&(d=h)}!function(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let i=t.digits,r=i.length-t.integerLen;const o=Math.min(Math.max(e,r),n);let s=o+t.integerLen,a=i[s];if(s>0){i.splice(Math.max(t.integerLen,s));for(let t=s;t<i.length;t++)i[t]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let t=1;t<s;t++)i[t]=0}if(a>=5)if(s-1<0){for(let e=0;e>s;e--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let l=0!==o;const c=e+t.integerLen,u=i.reduceRight((function(t,e,n,i){return i[n]=(e+=t)<10?e:e-10,l&&(0===i[n]&&n>=c?i.pop():l=!1),e>=10?1:0}),0);u&&(i.unshift(u),t.integerLen++)}(c,h,d);let p=c.digits,f=c.integerLen;const m=c.exponent;let g=[];for(l=p.every(t=>!t);f<u;f++)p.unshift(0);for(;f<0;f++)p.unshift(0);f>0?g=p.splice(f,p.length):(g=p,p=[0]);const v=[];for(p.length>=e.lgSize&&v.unshift(p.splice(-e.lgSize,p.length).join(""));p.length>e.gSize;)v.unshift(p.splice(-e.gSize,p.length).join(""));p.length&&v.unshift(p.join("")),a=v.join(Lh(n,i)),g.length&&(a+=Lh(n,r)+g.join("")),m&&(a+=Lh(n,Th.Exponential)+"+"+m)}else a=Lh(n,Th.Infinity);return a=t<0&&!l?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}function od(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(";"),r=i[0],o=i[1],s=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],a=s[0],l=s[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let u=0;u<l.length;u++){const t=l.charAt(u);"0"===t?n.minFrac=n.maxFrac=u+1:"#"===t?n.maxFrac=u+1:n.posSuf+=t}const c=a.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){const t=r.length-n.posPre.length-n.posSuf.length,e=o.indexOf("#");n.negPre=o.substr(0,e).replace(/'/g,""),n.negSuf=o.substr(e+t).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function sd(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}class ad{}function ld(t,e,n,i){let r=`=${t}`;if(e.indexOf(r)>-1)return r;if(r=n.getPluralCategory(t,i),e.indexOf(r)>-1)return r;if(e.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${t}"`)}let cd=(()=>{class t extends ad{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(Nh(e||this.locale)(t)){case Ch.Zero:return"zero";case Ch.One:return"one";case Ch.Two:return"two";case Ch.Few:return"few";case Ch.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Yt(fu))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),ud=(()=>{class t{constructor(t,e,n,i){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Ts(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${_t(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(Ns(bl),Ns(_l),Ns(tl),Ns(rl))},t.\u0275dir=_e({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})(),hd=(()=>{class t{constructor(t){this._viewContainerRef=t,this._componentRef=null,this._moduleRef=null}ngOnChanges(t){if(this._viewContainerRef.clear(),this._componentRef=null,this.ngComponentOutlet){const e=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;if(t.ngComponentOutletNgModuleFactory)if(this._moduleRef&&this._moduleRef.destroy(),this.ngComponentOutletNgModuleFactory){const t=e.get(Jt);this._moduleRef=this.ngComponentOutletNgModuleFactory.create(t.injector)}else this._moduleRef=null;const n=(this._moduleRef?this._moduleRef.componentFactoryResolver:e.get(Ja)).resolveComponentFactory(this.ngComponentOutlet);this._componentRef=this._viewContainerRef.createComponent(n,this._viewContainerRef.length,e,this.ngComponentOutletContent)}}ngOnDestroy(){this._moduleRef&&this._moduleRef.destroy()}}return t.\u0275fac=function(e){return new(e||t)(Ns(Sl))},t.\u0275dir=_e({type:t,selectors:[["","ngComponentOutlet",""]],inputs:{ngComponentOutlet:"ngComponentOutlet",ngComponentOutletInjector:"ngComponentOutletInjector",ngComponentOutletContent:"ngComponentOutletContent",ngComponentOutletNgModuleFactory:"ngComponentOutletNgModuleFactory"},features:[Re]}),t})();class dd{constructor(t,e,n,i){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pd=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Oi()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. `+"See https://angular.io/api/common/NgForOf#change-propagation for more information."),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,i)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new dd(null,this._ngForOf,-1,-1),null===i?void 0:i),r=new fd(t,n);e.push(r)}else if(null==i)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const o=new fd(t,r);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=i,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Ns(Sl),Ns(Cl),Ns(bl))},t.\u0275dir=_e({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class fd{constructor(t,e){this.record=t,this.view=e}}let md=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new gd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){vd("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){vd("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Ns(Sl),Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class gd{constructor(){this.$implicit=null,this.ngIf=null}}function vd(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${_t(e)}'.`)}class yd{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let bd=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),_d=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new yd(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(Ns(Sl),Ns(Cl),Ns(bd,1))},t.\u0275dir=_e({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),wd=(()=>{class t{constructor(t,e,n){n._addDefault(new yd(t,e))}}return t.\u0275fac=function(e){return new(e||t)(Ns(Sl),Ns(Cl),Ns(bd,1))},t.\u0275dir=_e({type:t,selectors:[["","ngSwitchDefault",""]]}),t})(),Ad=(()=>{class t{constructor(t){this._localization=t,this._caseViews={}}set ngPlural(t){this._switchValue=t,this._updateView()}addCase(t,e){this._caseViews[t]=e}_updateView(){this._clearViews();const t=Object.keys(this._caseViews),e=ld(this._switchValue,t,this._localization);this._activateView(this._caseViews[e])}_clearViews(){this._activeView&&this._activeView.destroy()}_activateView(t){t&&(this._activeView=t,this._activeView.create())}}return t.\u0275fac=function(e){return new(e||t)(Ns(ad))},t.\u0275dir=_e({type:t,selectors:[["","ngPlural",""]],inputs:{ngPlural:"ngPlural"}}),t})(),xd=(()=>{class t{constructor(t,e,n,i){this.value=t;const r=!isNaN(Number(t));i.addCase(r?`=${t}`:t,new yd(n,e))}}return t.\u0275fac=function(e){return new(e||t)(Bs("ngPluralCase"),Ns(Cl),Ns(Sl),Ns(Ad,1))},t.\u0275dir=_e({type:t,selectors:[["","ngPluralCase",""]]}),t})(),Cd=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,i]=t.split(".");null!=(e=null!=e&&i?`${e}${i}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(_l),Ns(rl))},t.\u0275dir=_e({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),Ed=(()=>{class t{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(t){const e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)}_hasContextShapeChanged(t){const e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){for(let t of n)if(-1===e.indexOf(t))return!0;return!1}return!0}_updateExistingContext(t){for(let e of Object.keys(t))this._viewRef.context[e]=this.ngTemplateOutletContext[e]}}return t.\u0275fac=function(e){return new(e||t)(Ns(Sl))},t.\u0275dir=_e({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Re]}),t})();function Sd(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${_t(t)}'`)}class Md{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class Td{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const Pd=new Td,kd=new Md;let Dd=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Ys(e))return Pd;if(Qs(e))return kd;throw Sd(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(function(t=at.Default){const e=rs(!0);if(null!=e||t&at.Optional)return e;throw new Error("No provider for ChangeDetectorRef!")}())},t.\u0275pipe=we({name:"async",type:t,pure:!1}),t})(),Od=(()=>{class t{transform(e){if(!e)return e;if("string"!=typeof e)throw Sd(t,e);return e.toLowerCase()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=we({name:"lowercase",type:t,pure:!0}),t})();const Rd=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g;let Id=(()=>{class t{transform(e){if(!e)return e;if("string"!=typeof e)throw Sd(t,e);return e.replace(Rd,t=>t[0].toUpperCase()+t.substr(1).toLowerCase())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=we({name:"titlecase",type:t,pure:!0}),t})(),Ld=(()=>{class t{transform(e){if(!e)return e;if("string"!=typeof e)throw Sd(t,e);return e.toUpperCase()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=we({name:"uppercase",type:t,pure:!0}),t})(),Fd=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",i,r){if(null==e||""===e||e!=e)return null;try{return $h(e,n,r||this.locale,i)}catch(o){throw Sd(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(Ns(fu))},t.\u0275pipe=we({name:"date",type:t,pure:!0}),t})();const Nd=/#/g;let Bd=(()=>{class t{constructor(t){this._localization=t}transform(e,n,i){if(null==e)return"";if("object"!=typeof n||null===n)throw Sd(t,n);return n[ld(e,Object.keys(n),this._localization,i)].replace(Nd,e.toString())}}return t.\u0275fac=function(e){return new(e||t)(Ns(ad))},t.\u0275pipe=we({name:"i18nPlural",type:t,pure:!0}),t})(),Ud=(()=>{class t{transform(e,n){if(null==e)return"";if("object"!=typeof n||"string"!=typeof e)throw Sd(t,n);return n.hasOwnProperty(e)?n[e]:n.hasOwnProperty("other")?n.other:""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=we({name:"i18nSelect",type:t,pure:!0}),t})(),Vd=(()=>{class t{transform(t){return JSON.stringify(t,null,2)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=we({name:"json",type:t,pure:!1}),t})(),jd=(()=>{class t{constructor(t){this.differs=t,this.keyValues=[]}transform(t,e=zd){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const n=this.differ.diff(t);return n&&(this.keyValues=[],n.forEachItem(t=>{this.keyValues.push({key:t.key,value:t.currentValue})}),this.keyValues.sort(e)),this.keyValues}}return t.\u0275fac=function(e){return new(e||t)(Ns(_l))},t.\u0275pipe=we({name:"keyvalue",type:t,pure:!1}),t})();function zd(t,e){const n=t.key,i=e.key;if(n===i)return 0;if(void 0===n)return 1;if(void 0===i)return-1;if(null===n)return 1;if(null===i)return-1;if("string"==typeof n&&"string"==typeof i)return n<i?-1:1;if("number"==typeof n&&"number"==typeof i)return n-i;if("boolean"==typeof n&&"boolean"==typeof i)return n<i?-1:1;const r=String(n),o=String(i);return r==o?0:r<o?-1:1}let Hd=(()=>{class t{constructor(t){this._locale=t}transform(e,n,i){if(qd(e))return null;i=i||this._locale;try{return function(t,e,n){return rd(t,od(Fh(e,xh.Decimal),Lh(e,Th.MinusSign)),e,Th.Group,Th.Decimal,n)}($d(e),i,n)}catch(r){throw Sd(t,r.message)}}}return t.\u0275fac=function(e){return new(e||t)(Ns(fu))},t.\u0275pipe=we({name:"number",type:t,pure:!0}),t})(),Gd=(()=>{class t{constructor(t){this._locale=t}transform(e,n,i){if(qd(e))return null;i=i||this._locale;try{return function(t,e,n){return rd(t,od(Fh(e,xh.Percent),Lh(e,Th.MinusSign)),e,Th.Group,Th.Decimal,n,!0).replace(new RegExp("%","g"),Lh(e,Th.PercentSign))}($d(e),i,n)}catch(r){throw Sd(t,r.message)}}}return t.\u0275fac=function(e){return new(e||t)(Ns(fu))},t.\u0275pipe=we({name:"percent",type:t,pure:!0}),t})(),Wd=(()=>{class t{constructor(t,e="USD"){this._locale=t,this._defaultCurrencyCode=e}transform(e,n,i="symbol",r,o){if(qd(e))return null;o=o||this._locale,"boolean"==typeof i&&(console&&console.warn&&console.warn('Warning: the currency pipe has been changed in Angular v5. The symbolDisplay option (third parameter) is now a string instead of a boolean. The accepted values are "code", "symbol" or "symbol-narrow".'),i=i?"symbol":"code");let s=n||this._defaultCurrencyCode;"code"!==i&&(s="symbol"===i||"symbol-narrow"===i?function(t,e,n="en"){const i=function(t){return Nl(t)[Vl.Currencies]}(n)[t]||Ah[t]||[],r=i[1];return"narrow"===e&&"string"==typeof r?r:i[0]||t}(s,"symbol"===i?"wide":"narrow",o):i);try{return function(t,e,n,i,r){const o=od(Fh(e,xh.Currency),Lh(e,Th.MinusSign));return o.minFrac=function(t){let e;const n=Ah[t];return n&&(e=n[2]),"number"==typeof e?e:2}(i),o.maxFrac=o.minFrac,rd(t,o,e,Th.CurrencyGroup,Th.CurrencyDecimal,r).replace("\xa4",n).replace("\xa4","").trim()}($d(e),o,s,n,r)}catch(a){throw Sd(t,a.message)}}}return t.\u0275fac=function(e){return new(e||t)(Ns(fu),Ns(mu))},t.\u0275pipe=we({name:"currency",type:t,pure:!0}),t})();function qd(t){return null==t||""===t||t!=t}function $d(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}let Yd=(()=>{class t{transform(e,n,i){if(null==e)return e;if(!this.supports(e))throw Sd(t,e);return e.slice(n,i)}supports(t){return"string"==typeof t||Array.isArray(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=we({name:"slice",type:t,pure:!1}),t})(),Qd=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[{provide:ad,useClass:cd}]}),t})();function Xd(t){return"browser"===t}function Kd(t){return"server"===t}let Zd=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new Jd(Yt(rh),window,Yt(_i))}),t})();class Jd{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const e=this.document.querySelector(`#${t}`);if(e)return void this.scrollToElement(e);const n=this.document.querySelector(`[name='${t}']`);if(n)return void this.scrollToElement(n)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}class tp extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new tp,nh||(nh=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=np||(np=document.querySelector("base"),np)?np.getAttribute("href"):null;return null==e?null:(n=e,ep||(ep=document.createElement("a")),ep.setAttribute("href",n),"/"===ep.pathname.charAt(0)?ep.pathname:"/"+ep.pathname);var n}resetBaseElement(){np=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[i,r]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(i.trim()===e)return decodeURIComponent(r)}return null}(document.cookie,t)}}let ep,np=null;const ip=new Bt("TRANSITION_ID"),rp=[{provide:ou,useFactory:function(t,e,n){return()=>{n.get(su).donePromise.then(()=>{const n=ih();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[ip,rh,As],multi:!0}];class op{static init(){var t;t=new op,Bu=t}addToWindow(t){kt.getAngularTestability=(e,n=!0)=>{const i=t.findTestabilityInTree(e,n);if(null==i)throw new Error("Could not find testability for element.");return i},kt.getAllAngularTestabilities=()=>t.getAllTestabilities(),kt.getAllAngularRootElements=()=>t.getAllRootElements(),kt.frameworkStabilizers||(kt.frameworkStabilizers=[]),kt.frameworkStabilizers.push(t=>{const e=kt.getAllAngularTestabilities();let n=e.length,i=!1;const r=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(r)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:n?ih().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const sp=new Bt("EventManagerPlugins");let ap=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let i=0;i<n.length;i++){const e=n[i];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(Yt(sp),Yt(Su))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class lp{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const i=ih().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,n)}}let cp=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),up=(()=>{class t extends cp{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>ih().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(Yt(rh))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const hp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},dp=/%COMP%/g;function pp(t,e,n){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?pp(t,r,n):(r=r.replace(dp,t),n.push(r))}return n}function fp(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let mp=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new gp(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case ue.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new vp(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case ue.Native:case ue.ShadowDom:return new yp(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=pp(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Yt(ap),Yt(up),Yt(au))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class gp{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(hp[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;const r=hp[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const i=hp[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&il.DashCase?t.style.setProperty(e,n,i&il.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&il.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,fp(n)):this.eventManager.addEventListener(t,e,fp(n))}}class vp extends gp{constructor(t,e,n,i){super(t),this.component=n;const r=pp(i+"-"+n.id,n.styles,[]);e.addStyles(r),this.contentAttr="_ngcontent-%COMP%".replace(dp,i+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(dp,t)}(i+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class yp extends gp{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===ue.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const r=pp(i.id,i.styles,[]);for(let o=0;o<r.length;o++){const t=document.createElement("style");t.textContent=r[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let bp=(()=>{class t extends lp{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Yt(rh))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const _p=["alt","control","meta","shift"],wp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ap={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},xp={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Cp=(()=>{class t extends lp{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,i){const r=t.parseEventName(n),o=t.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ih().onAndCancel(e,r.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const r=t._normalizeKey(n.pop());let o="";if(_p.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=r,0!=n.length||0===r.length)return null;const s={};return s.domEventName=i,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Ap.hasOwnProperty(e)&&(e=Ap[e]))}return wp[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),_p.forEach(i=>{i!=n&&(0,xp[i])(t)&&(e+=i+".")}),e+=n,e}static eventCallback(e,n,i){return r=>{t.getEventFullKey(r)===e&&i.runGuarded(()=>n(r))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Yt(rh))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Ep=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return Yt(Sp)},token:t,providedIn:"root"}),t})(),Sp=(()=>{class t extends Ep{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case ir.NONE:return e;case ir.HTML:return Ti(e,"HTML")?Mi(e):function(t,e){let n=null;try{er=er||Ri(t);let i=e?String(e):"";n=er.getInertBodyElement(i);let r=5,o=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=n.innerHTML,n=er.getInertBodyElement(i)}while(i!==o);const s=new Ki,a=s.sanitizeChildren(nr(n)||n);return Oi()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=nr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}(this._doc,String(e));case ir.STYLE:return Ti(e,"Style")?Mi(e):e;case ir.SCRIPT:if(Ti(e,"Script"))return Mi(e);throw new Error("unsafe value used in a script context");case ir.URL:return Pi(e),Ti(e,"URL")?Mi(e):Bi(String(e));case ir.RESOURCE_URL:if(Ti(e,"ResourceURL"))return Mi(e);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return new Ai(t)}bypassSecurityTrustStyle(t){return new xi(t)}bypassSecurityTrustScript(t){return new Ci(t)}bypassSecurityTrustUrl(t){return new Ei(t)}bypassSecurityTrustResourceUrl(t){return new Si(t)}}return t.\u0275fac=function(e){return new(e||t)(Yt(rh))},t.\u0275prov=ut({factory:function(){return t=Yt(Ut),new Sp(t.get(rh));var t},token:t,providedIn:"root"}),t})();const Mp=ju(Zu,"browser",[{provide:hu,useValue:"browser"},{provide:uu,useValue:function(){tp.makeCurrent(),op.init()},multi:!0},{provide:rh,useFactory:function(){return function(t){Be=t}(document),document},deps:[]}]),Tp=[[],{provide:ls,useValue:"root"},{provide:_i,useFactory:function(){return new _i},deps:[]},{provide:sp,useClass:bp,multi:!0,deps:[rh,Su,hu]},{provide:sp,useClass:Cp,multi:!0,deps:[rh]},[],{provide:mp,useClass:mp,deps:[ap,up,au]},{provide:nl,useExisting:mp},{provide:cp,useExisting:up},{provide:up,useClass:up,deps:[rh]},{provide:Iu,useClass:Iu,deps:[Su]},{provide:ap,useClass:ap,deps:[sp,Su]},[]];let Pp=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:au,useValue:e.appId},{provide:ip,useExisting:au},rp]}}}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)(Yt(t,12))},providers:Tp,imports:[Qd,th]}),t})();function kp(){return new Dp(Yt(rh))}let Dp=(()=>{class t{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return t.\u0275fac=function(e){return new(e||t)(Yt(rh))},t.\u0275prov=ut({factory:kp,token:t,providedIn:"root"}),t})();function Op(...t){let e=t[t.length-1];return S(e)?(t.pop(),U(t,e)):W(t)}"undefined"!=typeof window&&window;class Rp extends C{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new w;return this._value}next(t){super.next(this._value=t)}}const Ip=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),Lp={};function Fp(...t){let e=null,n=null;return S(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&c(t[0])&&(t=t[0]),W(t,n).lift(new Np(e))}class Np{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Bp(t,this.resultSelector))}}class Bp extends L{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Lp),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(I(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,i,r){const o=this.values,s=this.toRespond?o[n]===Lp?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Up=new b(t=>t.complete());function Vp(t){return t?function(t){return new b(e=>t.schedule(()=>e.complete()))}(t):Up}function jp(t){return new b(e=>{let n;try{n=t()}catch(i){return void e.error(i)}return(n?V(n):Vp()).subscribe(e)})}function zp(){return G(1)}function Hp(t,e){return function(n){return n.lift(new Gp(t,e))}}class Gp{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Wp(t,this.predicate,this.thisArg))}}class Wp extends m{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const qp=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function $p(t){return function(e){return 0===t?Vp():e.lift(new Yp(t))}}class Yp{constructor(t){if(this.total=t,this.total<0)throw new qp}call(t,e){return e.subscribe(new Qp(t,this.total))}}class Qp extends m{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,i=this.count++;e.length<n?e.push(t):e[i%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,i=this.ring;for(let r=0;r<n;r++){const r=e++%n;t.next(i[r])}}t.complete()}}function Xp(t=Jp){return e=>e.lift(new Kp(t))}class Kp{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Zp(t,this.errorFactory))}}class Zp extends m{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Jp(){return new Ip}function tf(t=null){return e=>e.lift(new ef(t))}class ef{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new nf(t,this.defaultValue))}}class nf extends m{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function rf(t){return function(e){const n=new of(t),i=e.lift(n);return n.caught=i}}class of{constructor(t){this.selector=t}call(t,e){return e.subscribe(new sf(t,this.selector,this.caught))}}class sf extends L{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const i=new M(this,void 0,void 0);this.add(i);const r=I(this,n,void 0,void 0,i);r!==i&&this.add(r)}}}function af(t){return e=>0===t?Vp():e.lift(new lf(t))}class lf{constructor(t){if(this.total=t,this.total<0)throw new qp}call(t,e){return e.subscribe(new cf(t,this.total))}}class cf extends m{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function uf(t,e){const n=arguments.length>=2;return i=>i.pipe(t?Hp((e,n)=>t(e,n,i)):y,af(1),n?tf(e):Xp(()=>new Ip))}function hf(){}function df(t,e,n){return function(i){return i.lift(new pf(t,e,n))}}class pf{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new ff(t,this.nextOrObserver,this.error,this.complete))}}class ff extends m{constructor(t,e,n,i){super(t),this._tapNext=hf,this._tapError=hf,this._tapComplete=hf,this._tapError=n||hf,this._tapComplete=i||hf,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||hf,this._tapError=e.error||hf,this._tapComplete=e.complete||hf)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class mf{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new gf(t,this.predicate,this.thisArg,this.source))}}class gf extends m{constructor(t,e,n,i){super(t),this.predicate=e,this.thisArg=n,this.source=i,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function vf(t,e){return"function"==typeof e?n=>n.pipe(vf((n,i)=>V(t(n,i)).pipe(F((t,r)=>e(n,t,i,r))))):e=>e.lift(new yf(t))}class yf{constructor(t){this.project=t}call(t,e){return e.subscribe(new bf(t,this.project))}}class bf extends L{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this._innerSub(e,t,n)}_innerSub(t,e,n){const i=this.innerSubscription;i&&i.unsubscribe();const r=new M(this,e,n),o=this.destination;o.add(r),this.innerSubscription=I(this,t,void 0,void 0,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,i,r){this.destination.next(e)}}function _f(...t){return zp()(Op(...t))}function wf(...t){const e=t[t.length-1];return S(e)?(t.pop(),n=>_f(t,n,e)):e=>_f(t,e)}function Af(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new xf(t,e,n))}}class xf{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Cf(t,this.accumulator,this.seed,this.hasSeed))}}class Cf extends m{constructor(t,e,n,i){super(t),this.accumulator=e,this._seed=n,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=n,this.destination.next(n)}}function Ef(t,e){return j(t,e,1)}function Sf(t){return e=>e.lift(new Mf(t))}class Mf{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Tf(t,this.callback))}}class Tf extends m{constructor(t,e){super(t),this.add(new d(e))}}class Pf{constructor(t,e){this.id=t,this.url=e}}class kf extends Pf{constructor(t,e,n="imperative",i=null){super(t,e),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Df extends Pf{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Of extends Pf{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Rf extends Pf{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class If extends Pf{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lf extends Pf{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ff extends Pf{constructor(t,e,n,i,r){super(t,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Nf extends Pf{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bf extends Pf{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uf{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vf{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class jf{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zf{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hf{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gf{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wf{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class qf{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function $f(t){return new qf(t)}function Yf(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Qf(t,e,n){const i=n.path.split("/");if(i.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;const r={};for(let o=0;o<i.length;o++){const e=i[o],n=t[o];if(e.startsWith(":"))r[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Xf(t,e){const n=Object.keys(t),i=Object.keys(e);if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!Kf(t[r],e[r]))return!1;return!0}function Kf(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function Zf(t){return Array.prototype.concat.apply([],t)}function Jf(t){return t.length>0?t[t.length-1]:null}function tm(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function em(t){return Qs(t)?t:Ys(t)?V(Promise.resolve(t)):Op(t)}function nm(t,e,n){return n?function(t,e){return Xf(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!sm(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Kf(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,i,r){if(n.segments.length>r.length)return!!sm(n.segments.slice(0,r.length),r)&&!i.hasChildren();if(n.segments.length===r.length){if(!sm(n.segments,r))return!1;for(const e in i.children){if(!n.children[e])return!1;if(!t(n.children[e],i.children[e]))return!1}return!0}{const t=r.slice(0,n.segments.length),o=r.slice(n.segments.length);return!!sm(n.segments,t)&&!!n.children.primary&&e(n.children.primary,i,o)}}(e,n,n.segments)}(t.root,e.root)}class im{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$f(this.queryParams)),this._queryParamMap}toString(){return um.serialize(this)}}class rm{constructor(t,e){this.segments=t,this.children=e,this.parent=null,tm(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hm(this)}}class om{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=$f(this.parameters)),this._parameterMap}toString(){return vm(this)}}function sm(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function am(t,e){let n=[];return tm(t.children,(t,i)=>{"primary"===i&&(n=n.concat(e(t,i)))}),tm(t.children,(t,i)=>{"primary"!==i&&(n=n.concat(e(t,i)))}),n}class lm{}class cm{parse(t){const e=new Am(t);return new im(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`${`/${function t(e,n){if(!e.hasChildren())return hm(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",i=[];return tm(e.children,(e,n)=>{"primary"!==n&&i.push(`${n}:${t(e,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=am(e,(n,i)=>"primary"===i?[t(e.children.primary,!1)]:[`${i}:${t(n,!1)}`]);return`${hm(e)}/(${n.join("//")})`}}(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${pm(e)}=${pm(t)}`).join("&"):`${pm(e)}=${pm(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const um=new cm;function hm(t){return t.segments.map(t=>vm(t)).join("/")}function dm(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pm(t){return dm(t).replace(/%3B/gi,";")}function fm(t){return dm(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mm(t){return decodeURIComponent(t)}function gm(t){return mm(t.replace(/\+/g,"%20"))}function vm(t){return`${fm(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${fm(t)}=${fm(e[t])}`).join("")}`;var e}const ym=/^[^\/()?;=#]+/;function bm(t){const e=t.match(ym);return e?e[0]:""}const _m=/^[^=?&#]+/,wm=/^[^?&#]+/;class Am{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rm([],{}):new rm([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new rm(t,e)),n}parseSegment(){const t=bm(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new om(mm(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=bm(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=bm(this.remaining);t&&(n=t,this.capture(n))}t[mm(e)]=mm(n)}parseQueryParam(t){const e=function(t){const e=t.match(_m);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(wm);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const i=gm(e),r=gm(n);if(t.hasOwnProperty(i)){let e=t[i];Array.isArray(e)||(e=[e],t[i]=e),e.push(r)}else t[i]=r}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=bm(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let r=void 0;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):t&&(r="primary");const o=this.parseChildren();e[r]=1===Object.keys(o).length?o.primary:new rm([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class xm{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Cm(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Cm(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Em(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Em(t,this._root).map(t=>t.value)}}function Cm(t,e){if(t===e.value)return e;for(const n of e.children){const e=Cm(t,n);if(e)return e}return null}function Em(t,e){if(t===e.value)return[e];for(const n of e.children){const i=Em(t,n);if(i.length)return i.unshift(e),i}return[]}class Sm{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Mm(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Tm extends xm{constructor(t,e){super(t),this.snapshot=e,Im(this,t)}toString(){return this.snapshot.toString()}}function Pm(t,e){const n=function(t,e){const n=new Om([],{},{},"",{},"primary",e,null,t.root,-1,{});return new Rm("",new Sm(n,[]))}(t,e),i=new Rp([new om("",{})]),r=new Rp({}),o=new Rp({}),s=new Rp({}),a=new Rp(""),l=new km(i,r,s,a,o,"primary",e,n.root);return l.snapshot=n.root,new Tm(new Sm(l,[]),n)}class km{constructor(t,e,n,i,r,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(F(t=>$f(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(F(t=>$f(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Dm(t,e="emptyOnly"){const n=t.pathFromRoot;let i=0;if("always"!==e)for(i=n.length-1;i>=1;){const t=n[i],e=n[i-1];if(t.routeConfig&&""===t.routeConfig.path)i--;else{if(e.component)break;i--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class Om{constructor(t,e,n,i,r,o,s,a,l,c,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$f(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$f(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Rm extends xm{constructor(t,e){super(e),this.url=t,Im(this,e)}toString(){return Lm(this._root)}}function Im(t,e){e.value._routerState=t,e.children.forEach(e=>Im(t,e))}function Lm(t){const e=t.children.length>0?` { ${t.children.map(Lm).join(", ")} } `:"";return`${t.value}${e}`}function Fm(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Xf(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Xf(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Xf(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Xf(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Nm(t,e){var n,i;return Xf(t.params,e.params)&&sm(n=t.url,i=e.url)&&n.every((t,e)=>Xf(t.parameters,i[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Nm(t.parent,e.parent))}function Bm(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Um(t,e,n,i,r){let o={};return i&&tm(i,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new im(n.root===t?e:function t(e,n,i){const r={};return tm(e.children,(e,o)=>{r[o]=e===n?i:t(e,n,i)}),new rm(e.segments,r)}(n.root,t,e),o,r)}class Vm{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Bm(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(i&&i!==Jf(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class jm{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function zm(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:`${t}`}function Hm(t,e,n){if(t||(t=new rm([],{})),0===t.segments.length&&t.hasChildren())return Gm(t,e,n);const i=function(t,e,n){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;const e=t.segments[r],s=zm(n[i]),a=i<n.length-1?n[i+1]:null;if(r>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!Ym(s,a,e))return o;i+=2}else{if(!Ym(s,{},e))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const e=new rm(t.segments.slice(0,i.pathIndex),{});return e.children.primary=new rm(t.segments.slice(i.pathIndex),t.children),Gm(e,0,r)}return i.match&&0===r.length?new rm(t.segments,{}):i.match&&!t.hasChildren()?Wm(t,e,n):i.match?Gm(t,0,r):Wm(t,e,n)}function Gm(t,e,n){if(0===n.length)return new rm(t.segments,{});{const i=function(t){return"object"==typeof t[0]&&null!==t[0]&&t[0].outlets?t[0].outlets:{primary:t}}(n),r={};return tm(i,(n,i)=>{null!==n&&(r[i]=Hm(t.children[i],e,n))}),tm(t.children,(t,e)=>{void 0===i[e]&&(r[e]=t)}),new rm(t.segments,r)}}function Wm(t,e,n){const i=t.segments.slice(0,e);let r=0;for(;r<n.length;){if("object"==typeof n[r]&&null!==n[r]&&void 0!==n[r].outlets){const t=qm(n[r].outlets);return new rm(i,t)}if(0===r&&Bm(n[0])){i.push(new om(t.segments[e].path,n[0])),r++;continue}const o=zm(n[r]),s=r<n.length-1?n[r+1]:null;o&&s&&Bm(s)?(i.push(new om(o,$m(s))),r+=2):(i.push(new om(o,{})),r++)}return new rm(i,{})}function qm(t){const e={};return tm(t,(t,n)=>{null!==t&&(e[n]=Wm(new rm([],{}),0,t))}),e}function $m(t){const e={};return tm(t,(t,n)=>e[n]=`${t}`),e}function Ym(t,e,n){return t==n.path&&Xf(e,n.parameters)}class Qm{constructor(t,e,n,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=i}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Fm(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const i=Mm(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,i[e],n),delete i[e]}),tm(i,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(i===r)if(i.component){const r=n.getContext(i.outlet);r&&this.deactivateChildRoutes(t,e,r.children)}else this.deactivateChildRoutes(t,e,n);else r&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:i})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const i=Mm(t),r=t.value.component?n.children:e;tm(i,(t,e)=>this.deactivateRouteAndItsChildren(t,r)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const i=Mm(e);t.children.forEach(t=>{this.activateRoutes(t,i[t.value.outlet],n),this.forwardEvent(new Gf(t.value.snapshot))}),t.children.length&&this.forwardEvent(new zf(t.value.snapshot))}activateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(Fm(i),i===r)if(i.component){const r=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,r.children)}else this.activateChildRoutes(t,e,n);else if(i.component){const e=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const t=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Xm(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),r=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=i,e.resolver=r,e.outlet&&e.outlet.activateWith(i,r),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Xm(t){Fm(t.value),t.children.forEach(Xm)}class Km{constructor(t,e){this.routes=t,this.module=e}}function Zm(t){return"function"==typeof t}function Jm(t){return t instanceof im}class tg{constructor(t){this.segmentGroup=t||null}}class eg{constructor(t){this.urlTree=t}}function ng(t){return new b(e=>e.error(new tg(t)))}function ig(t){return new b(e=>e.error(new eg(t)))}function rg(t){return new b(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class og{constructor(t,e,n,i,r){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=r,this.allowRedirects=!0,this.ngModule=t.get(Jt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(F(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(rf(t=>{if(t instanceof eg)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof tg)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(F(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(rf(t=>{if(t instanceof tg)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const i=t.segments.length>0?new rm([],{primary:t}):t;return new im(i,e,n)}expandSegmentGroup(t,e,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(F(t=>new rm([],t))):this.expandSegment(t,n,e,n.segments,i,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Op({});const n=[],i=[],r={};return tm(t,(t,o)=>{const s=e(o,t).pipe(F(t=>r[o]=t));"primary"===o?n.push(s):i.push(s)}),Op.apply(null,n.concat(i)).pipe(zp(),function(t,e){const n=arguments.length>=2;return i=>i.pipe(t?Hp((e,n)=>t(e,n,i)):y,$p(1),n?tf(e):Xp(()=>new Ip))}(),F(()=>r))}(n.children,(n,i)=>this.expandSegmentGroup(t,e,i,n))}expandSegment(t,e,n,i,r,o){return Op(...n).pipe(F(s=>this.expandSegmentAgainstRoute(t,e,n,s,i,r,o).pipe(rf(t=>{if(t instanceof tg)return Op(null);throw t}))),zp(),uf(t=>!!t),rf((t,n)=>{if(t instanceof Ip||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,i,r))return Op(new rm([],{}));throw new tg(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,i,r,o,s){return cg(i)!==o?ng(e):void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,r):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o):ng(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,i){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ig(r):this.lineralizeSegments(n,r).pipe(j(n=>{const r=new rm(n,{});return this.expandSegment(t,r,e,n,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,o){const{matched:s,consumedSegments:a,lastChild:l,positionalParamSegments:c}=sg(e,i,r);if(!s)return ng(e);const u=this.applyRedirectCommands(a,i.redirectTo,c);return i.redirectTo.startsWith("/")?ig(u):this.lineralizeSegments(i,u).pipe(j(i=>this.expandSegment(t,e,n,i.concat(r.slice(l)),o,!1)))}matchSegmentAgainstRoute(t,e,n,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(F(t=>(n._loadedConfig=t,new rm(i,{})))):Op(new rm(i,{}));const{matched:r,consumedSegments:o,lastChild:s}=sg(e,n,i);if(!r)return ng(e);const a=i.slice(s);return this.getChildConfig(t,n,i).pipe(j(t=>{const n=t.module,i=t.routes,{segmentGroup:r,slicedSegments:s}=function(t,e,n,i){return n.length>0&&function(t,e,n){return n.some(n=>lg(t,e,n)&&"primary"!==cg(n))}(t,n,i)?{segmentGroup:ag(new rm(e,function(t,e){const n={};n.primary=e;for(const i of t)""===i.path&&"primary"!==cg(i)&&(n[cg(i)]=new rm([],{}));return n}(i,new rm(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>lg(t,e,n))}(t,n,i)?{segmentGroup:ag(new rm(t.segments,function(t,e,n,i){const r={};for(const o of n)lg(t,e,o)&&!i[cg(o)]&&(r[cg(o)]=new rm([],{}));return Object.assign(Object.assign({},i),r)}(t,n,i,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,i);return 0===s.length&&r.hasChildren()?this.expandChildren(n,i,r).pipe(F(t=>new rm(o,t))):0===i.length&&0===s.length?Op(new rm(o,{})):this.expandSegment(n,r,i,s,"primary",!0).pipe(F(t=>new rm(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Op(new Km(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Op(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(j(n=>n?this.configLoader.load(t.injector,e).pipe(F(t=>(e._loadedConfig=t,t))):function(t){return new b(e=>e.error(Yf(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Op(new Km([],t))}runCanLoadGuards(t,e,n){const i=e.canLoad;return i&&0!==i.length?V(i).pipe(F(i=>{const r=t.get(i);let o;if(function(t){return t&&Zm(t.canLoad)}(r))o=r.canLoad(e,n);else{if(!Zm(r))throw new Error("Invalid CanLoad guard");o=r(e,n)}return em(o)})).pipe(zp(),df(t=>{if(!Jm(t))return;const e=Yf(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(r=t=>!0===t,t=>t.lift(new mf(r,void 0,t)))):Op(!0);var r}lineralizeSegments(t,e){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return Op(n);if(i.numberOfChildren>1||!i.children.primary)return rg(t.redirectTo);i=i.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,i){const r=this.createSegmentGroup(t,e.root,n,i);return new im(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return tm(t,(t,i)=>{if("string"==typeof t&&t.startsWith(":")){const r=t.substring(1);n[i]=e[r]}else n[i]=t}),n}createSegmentGroup(t,e,n,i){const r=this.createSegments(t,e.segments,n,i);let o={};return tm(e.children,(e,r)=>{o[r]=this.createSegmentGroup(t,e,n,i)}),new rm(r,o)}createSegments(t,e,n,i){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,i):this.findOrReturn(e,n))}findPosParam(t,e,n){const i=n[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let n=0;for(const i of e){if(i.path===t.path)return e.splice(n),i;n++}return t}}function sg(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const i=(e.matcher||Qf)(n,t,e);return i?{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,positionalParamSegments:i.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function ag(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new rm(t.segments.concat(e.segments),e.children)}return t}function lg(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function cg(t){return t.outlet||"primary"}class ug{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class hg{constructor(t,e){this.component=t,this.route=e}}function dg(t,e,n){const i=t._root;return function t(e,n,i,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=Mm(n);return e.children.forEach(e=>{!function(e,n,i,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,l=i?i.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!sm(t.url,e.url);case"pathParamsOrQueryParamsChange":return!sm(t.url,e.url)||!Xf(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nm(t,e)||!Xf(t.queryParams,e.queryParams);case"paramsChange":default:return!Nm(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new ug(r)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?l?l.children:null:i,r,o),c&&o.canDeactivateChecks.push(new hg(l&&l.outlet&&l.outlet.component||null,a))}else a&&fg(n,l,o),o.canActivateChecks.push(new ug(r)),t(e,null,s.component?l?l.children:null:i,r,o)}(e,s[e.value.outlet],i,r.concat([e.value]),o),delete s[e.value.outlet]}),tm(s,(t,e)=>fg(t,i.getContext(e),o)),o}(i,e?e._root:null,n,[i.value])}function pg(t,e,n){const i=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:n).get(t)}function fg(t,e,n){const i=Mm(t),r=t.value;tm(i,(t,i)=>{fg(t,r.component?e?e.children.getContext(i):null:e,n)}),n.canDeactivateChecks.push(new hg(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}const mg=Symbol("INITIAL_VALUE");function gg(){return vf(t=>Fp(...t.map(t=>t.pipe(af(1),wf(mg)))).pipe(Af((t,e)=>{let n=!1;return e.reduce((t,i,r)=>{if(t!==mg)return t;if(i===mg&&(n=!0),!n){if(!1===i)return i;if(r===e.length-1||Jm(i))return i}return t},t)},mg),Hp(t=>t!==mg),F(t=>Jm(t)?t:!0===t),af(1)))}function vg(t,e){return null!==t&&e&&e(new Hf(t)),Op(!0)}function yg(t,e){return null!==t&&e&&e(new jf(t)),Op(!0)}function bg(t,e,n){const i=e.routeConfig?e.routeConfig.canActivate:null;return i&&0!==i.length?Op(i.map(i=>jp(()=>{const r=pg(i,e,n);let o;if(function(t){return t&&Zm(t.canActivate)}(r))o=em(r.canActivate(e,t));else{if(!Zm(r))throw new Error("Invalid CanActivate guard");o=em(r(e,t))}return o.pipe(uf())}))).pipe(gg()):Op(!0)}function _g(t,e,n){const i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>jp(()=>Op(e.guards.map(r=>{const o=pg(r,e.node,n);let s;if(function(t){return t&&Zm(t.canActivateChild)}(o))s=em(o.canActivateChild(i,t));else{if(!Zm(o))throw new Error("Invalid CanActivateChild guard");s=em(o(i,t))}return s.pipe(uf())})).pipe(gg())));return Op(r).pipe(gg())}class wg{}class Ag{constructor(t,e,n,i,r,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=o}recognize(){try{const t=Eg(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new Om([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Sm(n,e),r=new Rm(this.url,i);return this.inheritParamsAndData(r._root),Op(r)}catch(e){return new b(n=>n.error(e))}}inheritParamsAndData(t){const e=t.value,n=Dm(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=am(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),i=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${i}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,n,i,r){for(const o of t)try{return this.processSegmentAgainstRoute(o,n,i,r)}catch(e){if(!(e instanceof wg))throw e}if(this.noLeftoversInUrl(n,i,r))return[];throw new wg}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,i){if(t.redirectTo)throw new wg;if((t.outlet||"primary")!==i)throw new wg;let r,o=[],s=[];if("**"===t.path){const o=n.length>0?Jf(n).parameters:{};r=new Om(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Tg(t),i,t.component,t,xg(e),Cg(e)+n.length,Pg(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new wg;return{consumedSegments:[],lastChild:0,parameters:{}}}const i=(e.matcher||Qf)(n,t,e);if(!i)throw new wg;const r={};tm(i.posParams,(t,e)=>{r[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},r),i.consumed[i.consumed.length-1].parameters):r;return{consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),r=new Om(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Tg(t),i,t.component,t,xg(e),Cg(e)+o.length,Pg(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:c}=Eg(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&l.hasChildren()){const t=this.processChildren(a,l);return[new Sm(r,t)]}if(0===a.length&&0===c.length)return[new Sm(r,[])];const u=this.processSegment(a,l,c,"primary");return[new Sm(r,u)]}}function xg(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Cg(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Eg(t,e,n,i,r){if(n.length>0&&function(t,e,n){return n.some(n=>Sg(t,e,n)&&"primary"!==Mg(n))}(t,n,i)){const r=new rm(e,function(t,e,n,i){const r={};r.primary=i,i._sourceSegment=t,i._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==Mg(o)){const n=new rm([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,r[Mg(o)]=n}return r}(t,e,i,new rm(n,t.children)));return r._sourceSegment=t,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Sg(t,e,n))}(t,n,i)){const o=new rm(t.segments,function(t,e,n,i,r,o){const s={};for(const a of i)if(Sg(t,n,a)&&!r[Mg(a)]){const n=new rm([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Mg(a)]=n}return Object.assign(Object.assign({},r),s)}(t,e,n,i,t.children,r));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new rm(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Sg(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Mg(t){return t.outlet||"primary"}function Tg(t){return t.data||{}}function Pg(t){return t.resolve||{}}function kg(t){return function(e){return e.pipe(vf(e=>{const n=t(e);return n?V(n).pipe(F(()=>e)):V([e])}))}}class Dg{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let Og=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Hs(0,"router-outlet")},directives:function(){return[Xg]},encapsulation:2}),t})();function Rg(t,e=""){for(let n=0;n<t.length;n++){const i=t[n];Ig(i,Lg(e,i))}}function Ig(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&Rg(t.children,e)}function Lg(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Fg(t){const e=t.children&&t.children.map(Fg),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Og),n}const Ng=new Bt("ROUTES");class Bg{constructor(t,e,n,i){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=i}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(F(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Km(Zf(i.injector.get(Ng)).map(Fg),i)}))}loadModuleFactory(t){return"string"==typeof t?V(this.loader.load(t)):em(t()).pipe(j(t=>t instanceof te?Op(t):V(this.compiler.compileModuleAsync(t))))}}class Ug{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Vg,this.attachRef=null}}class Vg{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Ug,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class jg{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function zg(t){throw t}function Hg(t,e,n){return e.parse("/")}function Gg(t,e){return Op(null)}let Wg=(()=>{class t{constructor(t,e,n,i,r,o,s,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new C,this.errorHandler=zg,this.malformedUriErrorHandler=Hg,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Gg,afterPreactivation:Gg},this.urlHandlingStrategy=new jg,this.routeReuseStrategy=new Dg,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=r.get(Jt),this.console=r.get(pu);const l=r.get(Su);this.isNgZoneEnabled=l instanceof Su,this.resetConfig(a),this.currentUrlTree=new im(new rm([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Bg(o,s,t=>this.triggerEvent(new Uf(t)),t=>this.triggerEvent(new Vf(t))),this.routerState=Pm(this.currentUrlTree,this.rootComponentType),this.transitions=new Rp({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Hp(t=>0!==t.id),F(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),vf(t=>{let n=!1,i=!1;return Op(t).pipe(df(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),vf(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Op(t).pipe(vf(t=>{const n=this.transitions.getValue();return e.next(new kf(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Up:[t]}),vf(t=>Promise.resolve(t)),(i=this.ngModule.injector,r=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(vf(t=>function(t,e,n,i,r){return new og(t,e,n,i,r).apply()}(i,r,o,t.extractedUrl,s).pipe(F(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),df(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,i,r){return function(o){return o.pipe(j(o=>function(t,e,n,i,r="emptyOnly",o="legacy"){return new Ag(t,e,n,i,r,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),i,r).pipe(F(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),df(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),df(t=>{const n=new If(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var i,r,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:i,source:r,restoredState:o,extras:s}=t,a=new kf(n,this.serializeUrl(i),r,o);e.next(a);const l=Pm(i,this.rootComponentType).snapshot;return Op(Object.assign(Object.assign({},t),{targetSnapshot:l,urlAfterRedirects:i,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Up}),kg(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!o,replaceUrl:!!s})}),df(t=>{const e=new Lf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),F(t=>Object.assign(Object.assign({},t),{guards:dg(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(j(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Op(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,i){return V(t).pipe(j(t=>function(t,e,n,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Op(o.map(o=>{const s=pg(o,e,r);let a;if(function(t){return t&&Zm(t.canDeactivate)}(s))a=em(s.canDeactivate(t,e,n,i));else{if(!Zm(s))throw new Error("Invalid CanDeactivate guard");a=em(s(t,e,n,i))}return a.pipe(uf())})).pipe(gg()):Op(!0)}(t.component,t.route,n,e,i)),uf(t=>!0!==t,!0))}(s,i,r,t).pipe(j(n=>n&&"boolean"==typeof n?function(t,e,n,i){return V(e).pipe(Ef(e=>V([yg(e.route.parent,i),vg(e.route,i),_g(t,e.path,n),bg(t,e.route,n)]).pipe(zp(),uf(t=>!0!==t,!0))),uf(t=>!0!==t,!0))}(i,o,t,e):Op(n)),F(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),df(t=>{if(Jm(t.guardsResult)){const e=Yf(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),df(t=>{const e=new Ff(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Hp(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Of(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),kg(t=>{if(t.guards.canActivateChecks.length)return Op(t).pipe(df(t=>{const e=new Nf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),vf(t=>{let n=!1;return Op(t).pipe((i=this.paramsInheritanceStrategy,r=this.ngModule.injector,function(t){return t.pipe(j(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Op(t);let o=0;return V(n).pipe(Ef(t=>function(t,e,n,i){return function(t,e,n,i){const r=Object.keys(t);if(0===r.length)return Op({});const o={};return V(r).pipe(j(r=>function(t,e,n,i){const r=pg(t,e,i);return em(r.resolve?r.resolve(e,n):r(e,n))}(t[r],e,n,i).pipe(df(t=>{o[r]=t}))),$p(1),j(()=>Object.keys(o).length===r.length?Op(o):Up))}(t._resolve,t,e,i).pipe(F(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Dm(t,n).resolve),null)))}(t.route,e,i,r)),df(()=>o++),$p(1),j(e=>o===n.length?Op(t):Up))}))}),df({next:()=>n=!0,complete:()=>{if(!n){const n=new Of(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var i,r}),df(t=>{const e=new Bf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),kg(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!o,replaceUrl:!!s})}),F(t=>{const e=function(t,e,n){const i=function t(e,n,i){if(i&&e.shouldReuseRoute(n.value,i.value.snapshot)){const r=i.value;r._futureSnapshot=n.value;const o=function(e,n,i){return n.children.map(n=>{for(const r of i.children)if(e.shouldReuseRoute(r.value.snapshot,n.value))return t(e,n,r);return t(e,n)})}(e,n,i);return new Sm(r,o)}{const i=e.retrieve(n.value);if(i){const t=i.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let i=0;i<e.children.length;++i)t(e.children[i],n.children[i])}(n,t),t}{const i=new km(new Rp((r=n.value).url),new Rp(r.params),new Rp(r.queryParams),new Rp(r.fragment),new Rp(r.data),r.outlet,r.component,r),o=n.children.map(n=>t(e,n));return new Sm(i,o)}}var r}(t,e._root,n?n._root:void 0);return new Tm(i,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),df(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(r=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),F(t=>(new Qm(o,t.targetRouterState,t.currentRouterState,s).activate(r),t))),df({next(){n=!0},complete(){n=!0}}),Sf(()=>{if(!n&&!i){this.resetUrlToCurrentUrlTree();const n=new Of(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),rf(n=>{if(i=!0,(r=n)&&r.ngNavigationCancelingError){const i=Jm(n.url);i||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const r=new Of(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(r),i?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const i=new Rf(t.id,this.serializeUrl(t.extractedUrl),n);e.next(i);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var r;return Up}));var r,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",i=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,i,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Rg(t),this.config=t.map(Fg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:r,preserveQueryParams:o,queryParamsHandling:s,preserveFragment:a}=e;Oi()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const l=n||this.routerState.root,c=a?this.currentUrlTree.fragment:r;let u=null;if(s)switch(s){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}else u=o?this.currentUrlTree.queryParams:i||null;return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,n,i,r){if(0===n.length)return Um(e.root,e.root,e,i,r);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Vm(!0,0,t);let e=0,n=!1;const i=t.reduce((t,i,r)=>{if("object"==typeof i&&null!=i){if(i.outlets){const e={};return tm(i.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(i.segmentPath)return[...t,i.segmentPath]}return"string"!=typeof i?[...t,i]:0===r?(i.split("/").forEach((i,r)=>{0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?e++:""!=i&&t.push(i))}),t):[...t,i]},[]);return new Vm(n,e,i)}(n);if(o.toRoot())return Um(e.root,new rm([],{}),e,i,r);const s=function(t,e,n){if(t.isAbsolute)return new jm(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new jm(t,t===e.root,0)}const i=Bm(t.commands[0])?0:1;return function(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new jm(i,!1,r-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Gm(s.segmentGroup,s.index,o.commands):Hm(s.segmentGroup,s.index,o.commands);return Um(s.segmentGroup,a,e,i,r)}(l,this.currentUrlTree,t,u,c)}navigateByUrl(t,e={skipLocationChange:!1}){Oi()&&this.isNgZoneEnabled&&!Su.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=Jm(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let n;try{n=this.urlSerializer.parse(t)}catch(e){n=this.malformedUriErrorHandler(e,this.urlSerializer,t)}return n}isActive(t,e){if(Jm(t))return nm(this.currentUrlTree,t,e);const n=this.parseUrl(t);return nm(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return null!=i&&(e[n]=i),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Df(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,i,r){const o=this.getTransition();if(o&&"imperative"!==e&&"imperative"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"hashchange"==e&&"popstate"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"popstate"==e&&"hashchange"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);let s,a,l;r?(s=r.resolve,a=r.reject,l=r.promise):l=new Promise((t,e)=>{s=t,a=e});const c=++this.navigationId;return this.setTransition({id:c,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:i,resolve:s,reject:a,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,i){const r=this.urlSerializer.serialize(t);i=i||{},this.location.isCurrentPathEqualTo(r)||e?this.location.replaceState(r,"",Object.assign(Object.assign({},i),{navigationId:n})):this.location.go(r,"",Object.assign(Object.assign({},i),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(Yt(as),Yt(lm),Yt(Vg),Yt(bh),Yt(As),Yt($u),Yt(xu),Yt(void 0))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),qg=(()=>{class t{constructor(t,e,n,i,r){this.router=t,this.route=e,this.commands=[],null==n&&i.setAttribute(r.nativeElement,"tabindex","0")}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Oi()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:Yg(this.skipLocationChange),replaceUrl:Yg(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Yg(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Yg(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(Ns(Wg),Ns(km),Bs("tabindex"),Ns(rl),Ns(tl))},t.\u0275dir=_e({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&Xs("click",(function(){return e.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"}}),t})(),$g=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(t=>{t instanceof Df&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Oi()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,i){if(0!==t||e||n||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const r={skipLocationChange:Yg(this.skipLocationChange),replaceUrl:Yg(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:Yg(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:Yg(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(Ns(Wg),Ns(km),Ns(fh))},t.\u0275dir=_e({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&Xs("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)})),2&t&&(La("href",e.href,rr),Rs("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Re]}),t})();function Yg(t){return""===t||!!t}let Qg=(()=>{class t{constructor(t,e,n,i,r,o){this.router=t,this.element=e,this.renderer=n,this.cdr=i,this.link=r,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=t.events.subscribe(t=>{t instanceof Df&&this.update()})}ngAfterContentInit(){this.links.changes.subscribe(t=>this.update()),this.linksWithHrefs.changes.subscribe(t=>this.update()),this.update()}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){this.subscription.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(Ns(Wg),Ns(tl),Ns(rl),Ns(os),Ns(qg,8),Ns($g,8))},t.\u0275dir=_e({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){var i;1&t&&(Kc(n,qg,!0),Kc(n,$g,!0)),2&t&&($c(i=tu())&&(e.links=i),$c(i=tu())&&(e.linksWithHrefs=i))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[Re]}),t})(),Xg=(()=>{class t{constructor(t,e,n,i,r){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new Fc,this.deactivateEvents=new Fc,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new Kg(t,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Ns(Vg),Ns(Sl),Ns(Ja),Bs("name"),Ns(os))},t.\u0275dir=_e({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Kg{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===km?this.route:t===Vg?this.childContexts:this.parent.get(t,e)}}class Zg{}class Jg{preload(t,e){return Op(null)}}let tv=(()=>{class t{constructor(t,e,n,i,r){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=new Bg(e,n,e=>t.triggerEvent(new Uf(e)),e=>t.triggerEvent(new Vf(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Hp(t=>t instanceof Df),Ef(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Jt);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const i of e)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const t=i._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else i.loadChildren&&!i.canLoad?n.push(this.preloadConfig(t,i)):i.children&&n.push(this.processRoutes(t,i.children));return V(n).pipe(G(),F(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(j(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Yt(Wg),Yt($u),Yt(xu),Yt(As),Yt(Zg))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),ev=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof kf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Df&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Wf&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Wf(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Yt(Wg),Yt(Zd),Yt(void 0))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const nv=new Bt("ROUTER_CONFIGURATION"),iv=new Bt("ROUTER_FORROOT_GUARD"),rv=[bh,{provide:lm,useClass:cm},{provide:Wg,useFactory:function(t,e,n,i,r,o,s,a={},l,c){const u=new Wg(null,t,e,n,i,r,o,Zf(s));if(l&&(u.urlHandlingStrategy=l),c&&(u.routeReuseStrategy=c),a.errorHandler&&(u.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(u.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const t=ih();u.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return a.onSameUrlNavigation&&(u.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(u.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(u.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(u.relativeLinkResolution=a.relativeLinkResolution),u},deps:[lm,Vg,bh,As,$u,xu,Ng,nv,[class{},new rt],[class{},new rt]]},Vg,{provide:km,useFactory:function(t){return t.routerState.root},deps:[Wg]},{provide:$u,useClass:Xu},tv,Jg,class{preload(t,e){return e().pipe(rf(()=>Op(null)))}},{provide:nv,useValue:{enableTracing:!1}}];function ov(){return new Vu("Router",Wg)}let sv=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[rv,uv(e),{provide:iv,useFactory:cv,deps:[[Wg,new rt,new st]]},{provide:nv,useValue:n||{}},{provide:fh,useFactory:lv,deps:[oh,[new it(gh),new rt],nv]},{provide:ev,useFactory:av,deps:[Wg,Zd,nv]},{provide:Zg,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Jg},{provide:Vu,multi:!0,useFactory:ov},[hv,{provide:ou,multi:!0,useFactory:dv,deps:[hv]},{provide:fv,useFactory:pv,deps:[hv]},{provide:du,multi:!0,useExisting:fv}]]}}static forChild(e){return{ngModule:t,providers:[uv(e)]}}}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)(Yt(iv,8),Yt(Wg,8))}}),t})();function av(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ev(t,e,n)}function lv(t,e,n={}){return n.useHash?new yh(t,e):new vh(t,e)}function cv(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function uv(t){return[{provide:xs,multi:!0,useValue:t},{provide:Ng,multi:!0,useValue:t}]}let hv=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new C}appInitializer(){return this.injector.get(ah,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Wg),i=this.injector.get(nv);if(this.isLegacyDisabled(i)||this.isLegacyEnabled(i))t(!0);else if("disabled"===i.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==i.initialNavigation)throw new Error(`Invalid initialNavigation options: '${i.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Op(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(nv),n=this.injector.get(tv),i=this.injector.get(ev),r=this.injector.get(Wg),o=this.injector.get(Wu);t===o.components[0]&&(this.isLegacyEnabled(e)?r.initialNavigation():this.isLegacyDisabled(e)&&r.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),r.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(Yt(As))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function dv(t){return t.appInitializer.bind(t)}function pv(t){return t.bootstrapListener.bind(t)}const fv=new Bt("Router Initializer");let mv=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-forgot-password"]],decls:2,vars:0,template:function(t,e){1&t&&(js(0,"p"),ka(1,"forgot-password works!"),zs())},styles:[""]}),t})();class gv{constructor(){this.userId=null,this.code=null,this.firstName=null,this.lastName=null,this.password=null,this.email=null,this.role=[],this.phoneNumber=null,this.address=null,this.country=null,this.birthDate=null,this.gender=null,this.nationality=null,this.socialMedia=null}}var vv=i("mrSG"),yv=i("Wcq6");function bv(t,e){return new b(e?n=>e.schedule(_v,0,{error:t,subscriber:n}):e=>e.error(t))}function _v({error:t,subscriber:e}){e.error(t)}let wv=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Op(this.value);case"E":return bv(this.error);case"C":return Vp()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function Av(t,e=0){return function(n){return n.lift(new xv(t,e))}}class xv{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new Cv(t,this.scheduler,this.delay))}}class Cv extends m{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(Cv.dispatch,this.delay,new Ev(t,this.destination)))}_next(t){this.scheduleMessage(wv.createNext(t))}_error(t){this.scheduleMessage(wv.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(wv.createComplete()),this.unsubscribe()}}class Ev{constructor(t,e){this.notification=t,this.destination=e}}class Sv extends d{constructor(t,e){super()}schedule(t,e=0){return this}}class Mv extends Sv{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i=!1,r=void 0;try{this.work(t)}catch(e){i=!0,r=!!e&&e||new Error(e)}if(i)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}class Tv extends Mv{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}let Pv=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class kv extends Pv{constructor(t,e=Pv.now){super(t,()=>kv.delegate&&kv.delegate!==this?kv.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return kv.delegate&&kv.delegate!==this?kv.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}class Dv extends kv{}const Ov=new Dv(Tv),Rv=new kv(Mv);let Iv=1;const Lv=(()=>Promise.resolve())(),Fv={};function Nv(t){return t in Fv&&(delete Fv[t],!0)}const Bv={setImmediate(t){const e=Iv++;return Fv[e]=!0,Lv.then(()=>Nv(e)&&t()),e},clearImmediate(t){Nv(t)}};class Uv extends Mv{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=Bv.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(Bv.clearImmediate(e),t.scheduled=void 0)}}class Vv extends kv{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,i=-1,r=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++i<r&&(t=e.shift()));if(this.active=!1,n){for(;++i<r&&(t=e.shift());)t.unsubscribe();throw n}}}const jv=new Vv(Uv);function zv(t){return!c(t)&&t-parseFloat(t)+1>=0}class Hv extends b{constructor(t,e=0,n=jv){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!zv(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=jv)}static create(t,e=0,n=jv){return new Hv(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(Hv.dispatch,this.delayTime,{source:this.source,subscriber:t})}}class Gv{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new Hv(e,this.delay,this.scheduler).subscribe(t)}}function Wv(){}class qv{constructor(t,e=Ov){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const i=this.zone;return this.delegate.schedule((function(e){i.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class $v{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wv,{},Wv,Wv)),e.pipe(df(n,n,n)).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class Yv{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new qv(Zone.current)),this.insideAngular=t.run(()=>new qv(Zone.current,Rv))}}function Qv(t,e){return function(e){return(e=e.lift(new $v(t.ngZone))).pipe(function(t,e=0){return function(n){return n.lift(new Gv(t,e))}}(t.outsideAngular),Av(t.insideAngular))}}const Xv=["ngOnDestroy"],Kv=(t,e,n)=>new Proxy(t,{get:(i,r)=>n.runOutsideAngular(()=>{if(t[r])return t[r];if(Xv.includes(r))return()=>{};let i=e.toPromise().then(t=>{const e=t&&t[r];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>i[e],apply:(t,e,n)=>i.then(t=>t&&t(...n))})})}),Zv=new Bt("angularfire2.app.options"),Jv=new Bt("angularfire2.app.nameOrConfig"),ty=new al("6.0.0");function ey(t,e,n){const i="object"==typeof n&&n||{};return i.name=i.name||"string"==typeof n&&n||"[DEFAULT]",yv.apps.filter(t=>t&&t.name===i.name)[0]||e.runOutsideAngular(()=>Object(yv.initializeApp)(t,i))}const ny={provide:class{},useFactory:ey,deps:[Zv,Su,[new rt,Jv]]};let iy=(()=>{class t{constructor(t){Object(yv.registerVersion)("angularfire",ty.full,t.toString()),Object(yv.registerVersion)("angular",ll.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:Zv,useValue:e},{provide:Jv,useValue:n}]}}}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)(Yt(hu))},providers:[ny]}),t})();var ry=i("wj3C"),oy=i.n(ry),sy=i("S+S0"),ay=function(){function t(t,e){this.code_=ly(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return ly(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.serverResponse_?this.message_+"\n"+this.serverResponse_:this.message_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!1,configurable:!0}),t}();function ly(t){return"storage/"+t}function cy(){return new ay("unknown","An unknown error occurred, please check the error payload for server response.")}function uy(){return new ay("canceled","User canceled the upload/download.")}function hy(){return new ay("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function dy(){return new ay("no-download-url","The given file does not have any download URLs.")}function py(t,e,n){return new ay("invalid-argument","Invalid argument in `"+e+"` at index "+t+": "+n)}function fy(){return new ay("app-deleted","The Firebase app was deleted.")}function my(t,e){return new ay("invalid-format","String does not match format '"+t+"': "+e)}function gy(t){throw new ay("internal-error","Internal error: "+t)}var vy={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function yy(t){switch(t){case vy.RAW:case vy.BASE64:case vy.BASE64URL:case vy.DATA_URL:return;default:throw"Expected one of the event types: ["+vy.RAW+", "+vy.BASE64+", "+vy.BASE64URL+", "+vy.DATA_URL+"]."}}var by=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function _y(t,n){switch(t){case vy.RAW:return new by(wy(n));case vy.BASE64:case vy.BASE64URL:return new by(Ay(t,n));case vy.DATA_URL:return new by((i=new xy(n)).base64?Ay(vy.BASE64,i.rest):function(t){var n;try{n=decodeURIComponent(t)}catch(e){throw my(vy.DATA_URL,"Malformed data URL.")}return wy(n)}(i.rest),function(t){return new xy(t).contentType}(n))}var i;throw cy()}function wy(t){for(var e=[],n=0;n<t.length;n++){var i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|63&i);else if(55296==(64512&i))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var r=i,o=t.charCodeAt(++n);e.push(240|(i=65536|(1023&r)<<10|1023&o)>>18,128|i>>12&63,128|i>>6&63,128|63&i)}else e.push(239,191,189);else 56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function Ay(t,n){switch(t){case vy.BASE64:var i=-1!==n.indexOf("-"),r=-1!==n.indexOf("_");if(i||r)throw my(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break;case vy.BASE64URL:var o=-1!==n.indexOf("+"),s=-1!==n.indexOf("/");if(o||s)throw my(t,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(n)}catch(e){throw my(t,"Invalid character found")}for(var l=new Uint8Array(a.length),c=0;c<a.length;c++)l[c]=a.charCodeAt(c);return l}var xy=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw my(vy.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),Cy={STATE_CHANGED:"state_changed"},Ey={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Sy(t){switch(t){case"running":case"pausing":case"canceling":return Ey.RUNNING;case"paused":return Ey.PAUSED;case"success":return Ey.SUCCESS;case"canceled":return Ey.CANCELED;case"error":default:return Ey.ERROR}}function My(t){return null!=t}function Ty(t){return void 0!==t}function Py(t){return"function"==typeof t}function ky(t){return"object"==typeof t}function Dy(t){return ky(t)&&null!==t}function Oy(t){return"string"==typeof t||t instanceof String}function Ry(t){return Iy(t)&&Number.isInteger(t)}function Iy(t){return"number"==typeof t||t instanceof Number}function Ly(t){return Fy()&&t instanceof Blob}function Fy(){return"undefined"!=typeof Blob}var Ny=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),By=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ny.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Ny.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Ny.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,i){if(this.sent_)throw gy("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),My(i))for(var r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return My(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw gy("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw gy("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw gy("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){My(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){My(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Uy=function(){function t(){}return t.prototype.createXhrIo=function(){return new By},t}();function Vy(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function jy(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Vy();if(void 0!==n){for(var i=new n,r=0;r<t.length;r++)i.append(t[r]);return i.getBlob()}if(Fy())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var zy=function(){function t(t,e){var n=0,i="";Ly(t)?(this.data_=t,n=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=i}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Ly(this.data_)){var i=(o=e,s=n,(r=this.data_).webkitSlice?r.webkitSlice(o,s):r.mozSlice?r.mozSlice(o,s):r.slice?r.slice(o,s):null);return null===i?null:new t(i)}var r,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Fy()){var i=e.map((function(e){return e instanceof t?e.data_:e}));return new t(jy.apply(null,i))}var r=e.map((function(t){return Oy(t)?_y(vy.RAW,t).data:t.data_})),o=0;r.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return r.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),Hy=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(n){var i;try{i=t.makeFromUrl(n)}catch(e){return new t(n,"")}if(""===i.path)return i;throw new ay("invalid-default-bucket","Invalid default bucket '"+n+"'.")},t.makeFromUrl=function(e){var n=null,i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function r(t){t.path_=decodeURIComponent(t.path)}for(var o="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:r},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:r}],a=0;a<s.length;a++){var l=s[a],c=l.regex.exec(e);if(c){var u=c[l.indices.path];u||(u=""),n=new t(c[l.indices.bucket],u),l.postModify(n);break}}if(null==n)throw function(t){return new ay("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function Gy(t){var n,i;try{n=JSON.parse(t)}catch(e){return null}return ky(i=n)&&!Array.isArray(i)?n:null}function Wy(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}function qy(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function $y(t){return"https://firebasestorage.googleapis.com/v0"+t}function Yy(t){var e=encodeURIComponent,n="?";for(var i in t)t.hasOwnProperty(i)&&(n=n+(e(i)+"=")+e(t[i])+"&");return n.slice(0,-1)}function Qy(t,e){return e}var Xy=function(){return function(t,e,n,i){this.server=t,this.local=e||t,this.writable=!!n,this.xform=i||Qy}}(),Ky=null;function Zy(t,e,n){var i=Gy(e);return null===i?null:function(t,e,n){for(var i={type:"file"},r=n.length,o=0;o<r;o++){var s=n[o];i[s.local]=s.xform(i,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Hy(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(i,t),i}(t,i,n)}function Jy(t,e){for(var n={},i=e.length,r=0;r<i;r++){var o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function tb(t){if(!ky(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!ky(n))throw"Expected object for 'customMetadata' mapping."}else if(Dy(n))throw"Mapping for '"+e+"' cannot be an object."}}function eb(t){if(!ky(t)||!t)throw"Expected ListOptions object.";for(var e in t)if("maxResults"===e){if(!Ry(t.maxResults)||t.maxResults<=0)throw"Expected maxResults to be a positive number.";if(t.maxResults>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if("pageToken"!==e)throw"Unknown option: "+e;if(t.pageToken&&!Oy(t.pageToken))throw"Expected pageToken to be string."}}var nb=function(){return function(t,e,n,i){this.url=t,this.method=e,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function ib(t){if(!t)throw cy()}function rb(t,e){return function(n,i){var r=Zy(t,i,e);return ib(null!==r),r}}function ob(t){return function(e,n){var i;return(i=401===e.getStatus()?new ay("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new ay("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new ay("unauthorized","User does not have permission to access '"+t.path+"'."):n).setServerResponseProp(n.serverResponseProp()),i}}function sb(t){var e=ob(t);return function(n,i){var r=e(n,i);return 404===n.getStatus()&&(r=new ay("object-not-found","Object '"+t.path+"' does not exist.")),r.setServerResponseProp(i.serverResponseProp()),r}}function ab(t,e,n){var i=$y(e.fullServerUrl()),r=t.maxOperationRetryTime,o=new nb(i,"GET",rb(t,n),r);return o.errorHandler=sb(e),o}function lb(t,e,n,i,r){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),i&&(o.pageToken=i),r&&(o.maxResults=r);var s=$y(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,l=new nb(s,"GET",function(t,e){return function(n,i){var r=function(t,e,n){var i=Gy(n);return null===i?null:function(t,e,n){var i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var r=0,o=n.prefixes;r<o.length;r++){var s=o[r].replace(/\/$/,""),a=t.makeStorageReference(new Hy(e,s));i.prefixes.push(a)}if(n.items)for(var l=0,c=n.items;l<c.length;l++)a=t.makeStorageReference(new Hy(e,c[l].name)),i.items.push(a);return i}(t,e,i)}(t,e,i);return ib(null!==r),r}}(t,e.bucket),a);return l.urlParams=o,l.errorHandler=ob(e),l}function cb(t,e,n){var i=$y(e.fullServerUrl()),r=t.maxOperationRetryTime,o=new nb(i,"GET",function(t,e){return function(n,i){var r=Zy(t,i,e);return ib(null!==r),function(t,e){var n=Gy(e);if(null===n)return null;if(!Oy(n.downloadTokens))return null;var i=n.downloadTokens;if(0===i.length)return null;var r=encodeURIComponent;return i.split(",").map((function(e){var n=t.fullPath;return $y("/b/"+r(t.bucket)+"/o/"+r(n))+Yy({alt:"media",token:e})}))[0]}(r,i)}}(t,n),r);return o.errorHandler=sb(e),o}function ub(t,e,n,i){var r=$y(e.fullServerUrl()),o=Jy(n,i),s=t.maxOperationRetryTime,a=new nb(r,"PATCH",rb(t,i),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=sb(e),a}function hb(t,e){var n=$y(e.fullServerUrl()),i=new nb(n,"DELETE",(function(t,e){}),t.maxOperationRetryTime);return i.successCodes=[200,204],i.errorHandler=sb(e),i}function db(t,e,n){var i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),i}var pb=function(){return function(t,e,n,i){this.current=t,this.total=e,this.finalized=!!n,this.metadata=i||null}}();function fb(t,n){var i=null;try{i=t.getResponseHeader("X-Goog-Upload-Status")}catch(e){ib(!1)}return ib(!!i&&-1!==(n||["active"]).indexOf(i)),i}var mb=function(){return function(t,e,n){if(Py(t)||My(e)||My(n))this.next=t,this.error=e||null,this.complete=n||null;else{var i=t;this.next=i.next||null,this.error=i.error||null,this.complete=i.complete||null}}}(),gb=function(){return function(t,e,n,i,r,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=i,this.task=r,this.ref=o}}();function vb(t,n,i){for(var r=n.length,o=n.length,s=0;s<n.length;s++)if(n[s].optional){r=s;break}if(!(r<=i.length&&i.length<=o))throw(a=r)===(l=o)?(c=a,u=1===a?"argument":"arguments"):(c="between "+a+" and "+l,u="arguments"),new ay("invalid-argument-count","Invalid argument count in `"+t+"`: Expected "+c+" "+u+", received "+i.length+".");var a,l,c,u;for(s=0;s<i.length;s++)try{n[s].validator(i[s])}catch(e){throw e instanceof Error?py(s,t,e.message):py(s,t,e)}}var yb=function(){return function(t,e){var n=this;this.validator=function(e){n.optional&&!Ty(e)||t(e)},this.optional=!!e}}();function bb(t,e){function n(t){if(!Oy(t))throw"Expected string."}var i,r,o;return t?(r=n,o=t,i=function(t){r(t),o(t)}):i=n,new yb(i,e)}function _b(){return new yb((function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||Fy()&&t instanceof Blob))throw"Expected Blob or File."}))}function wb(t){return new yb(tb,t)}function Ab(t){return new yb(eb,t)}function xb(){return new yb((function(t){if(!(Iy(t)&&t>=0))throw"Expected a number 0 or greater."}))}function Cb(t,e){return new yb((function(e){if(!(null===e||My(e)&&e instanceof Object))throw"Expected an Object.";null!=t&&t(e)}),e)}function Eb(t){return new yb((function(t){if(null!==t&&!Py(t))throw"Expected a Function."}),t)}function Sb(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var Mb,Tb,Pb=function(){function t(t,e,n,i,r,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.service_=e,this.location_=n,this.blob_=r,this.metadata_=o,this.mappings_=i,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_="running",this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals("canceled")?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_("error"))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals("canceled")?s.completeTransitions_():(s.error_=t,s.transition_("error"))},this.promise_=new Promise((function(t,e){s.resolve_=t,s.reject_=e,s.start_()})),this.promise_.then(null,(function(){}))}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){"running"===this.state_&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.service_.getAuthToken().then((function(n){switch(e.state_){case"running":t(n);break;case"canceling":e.transition_("canceled");break;case"pausing":e.transition_("paused")}}))},t.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(n){var i=function(t,n,i,r,o){var s=n.bucketOnlyServerUrl(),a=db(n,r,o),l={name:a.fullPath},c=$y(s),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=Jy(a,i),d=new nb(c,"POST",(function(t){var n;fb(t);try{n=t.getResponseHeader("X-Goog-Upload-URL")}catch(e){ib(!1)}return ib(Oy(n)),n}),t.maxUploadRetryTime);return d.urlParams=l,d.headers=u,d.body=h,d.errorHandler=ob(n),d}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.service_.makeRequest(i,n);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.fetchStatus_=function(){var t=this,n=this.uploadUrl_;this.resolveToken_((function(i){var r=function(t,n,i,r){var o=new nb(i,"POST",(function(t){var n=fb(t,["active","final"]),i=null;try{i=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){ib(!1)}i||ib(!1);var o=Number(i);return ib(!isNaN(o)),new pb(o,r.size(),"final"===n)}),t.maxUploadRetryTime);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=ob(n),o}(t.service_,t.location_,n,t.blob_),o=t.service_.makeRequest(r,i);t.request_=o,o.getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.continueUpload_=function(){var t=this,n=262144*this.chunkMultiplier_,i=new pb(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(o){var s;try{s=function(t,e,n,i,r,o,s,a){var l=new pb(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw new ay("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=l.total-l.current,u=c;r>0&&(u=Math.min(u,r));var h=l.current,d={"X-Goog-Upload-Command":u===c?"upload, finalize":"upload","X-Goog-Upload-Offset":l.current},p=i.slice(h,h+u);if(null===p)throw hy();var f=new nb(n,"POST",(function(t,n){var r,s=fb(t,["active","final"]),a=l.current+u,c=i.size();return r="final"===s?rb(e,o)(t,n):null,new pb(a,c,"final"===s,r)}),e.maxUploadRetryTime);return f.headers=d,f.body=p.uploadData(),f.progressCallback=a||null,f.errorHandler=ob(t),f}(t.location_,t.service_,r,t.blob_,n,t.mappings_,i,t.makeProgressCallback_())}catch(e){return t.error_=e,void t.transition_("error")}var a=t.service_.makeRequest(s,o);t.request_=a,a.getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_("success")):t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=ab(t.service_,t.location_,t.mappings_),i=t.service_.makeRequest(n,e);t.request_=i,i.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_("success")}),t.metadataErrorHandler_)}))},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,i,r){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var l=db(e,i,r),c=Jy(l,n),u=zy.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",i,"\r\n--"+a+"--");if(null===u)throw hy();var h={name:l.fullPath},d=$y(o),p=t.maxUploadRetryTime,f=new nb(d,"POST",rb(t,n),p);return f.urlParams=h,f.headers=s,f.body=u.uploadData(),f.errorHandler=ob(e),f}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),i=t.service_.makeRequest(n,e);t.request_=i,i.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_("success")}),t.errorHandler_)}))},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case"canceling":case"pausing":this.state_=t,null!==this.request_&&this.request_.cancel();break;case"running":var e="paused"===this.state_;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case"paused":this.state_=t,this.notifyObservers_();break;case"canceled":this.error_=uy(),this.state_=t,this.notifyObservers_();break;case"error":case"success":this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case"pausing":this.transition_("paused");break;case"canceling":this.transition_("canceled");break;case"running":this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Sy(this.state_);return new gb(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,n,i,r){function o(){if(t!==Cy.STATE_CHANGED)throw"Expected one of the event types: ["+Cy.STATE_CHANGED+"]."}var s="Expected a function or an Object with one of `next`, `error`, `complete` properties.",a=Eb(!0).validator,l=Cb(null,!0).validator;function c(t){try{return void a(t)}catch(e){}try{if(l(t),!(Ty(t.next)||Ty(t.error)||Ty(t.complete)))throw"";return}catch(e){throw s}}var u=[bb(o),Cb(c,!0),Eb(!0),Eb(!0)];vb("on",u,arguments);var h=this;function d(t){return function(e,n,i){null!==t&&vb("on",t,arguments);var o=new mb(e,n,r);return h.addObserver_(o),function(){h.removeObserver_(o)}}}function p(t){if(null===t)throw s;c(t)}var f=[Cb(p),Eb(!0),Eb(!0)],m=!(Ty(n)||Ty(i)||Ty(r));return m?d(f):d(null)(n,i,r)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach((function(e){t.notifyObserver_(e)}))},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(Sy(this.state_)){case Ey.SUCCESS:Sb(this.resolve_.bind(null,this.snapshot))();break;case Ey.CANCELED:case Ey.ERROR:Sb(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(Sy(this.state_)){case Ey.RUNNING:case Ey.PAUSED:t.next&&Sb(t.next.bind(t,this.snapshot))();break;case Ey.SUCCESS:t.complete&&Sb(t.complete.bind(t))();break;case Ey.CANCELED:case Ey.ERROR:t.error&&Sb(t.error.bind(t,this.error_))();break;default:t.error&&Sb(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){vb("resume",[],arguments);var t="paused"===this.state_||"pausing"===this.state_;return t&&this.transition_("running"),t},t.prototype.pause=function(){vb("pause",[],arguments);var t="running"===this.state_;return t&&this.transition_("pausing"),t},t.prototype.cancel=function(){vb("cancel",[],arguments);var t="running"===this.state_||"pausing"===this.state_;return t&&this.transition_("canceling"),t},t}(),kb=function(){function t(t,e){this.service=t,this.location=e instanceof Hy?e:Hy.makeFromUrl(e)}return t.prototype.toString=function(){return vb("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return function(){if(Ky)return Ky;var t=[];t.push(new Xy("bucket")),t.push(new Xy("generation")),t.push(new Xy("metageneration")),t.push(new Xy("name","fullPath",!0));var e=new Xy("name");e.xform=function(t,e){return function(t){return!Oy(t)||t.length<2?t:qy(t)}(e)},t.push(e);var n=new Xy("size");return n.xform=function(t,e){return My(e)?Number(e):e},t.push(n),t.push(new Xy("timeCreated")),t.push(new Xy("updated")),t.push(new Xy("md5Hash",null,!0)),t.push(new Xy("cacheControl",null,!0)),t.push(new Xy("contentDisposition",null,!0)),t.push(new Xy("contentEncoding",null,!0)),t.push(new Xy("contentLanguage",null,!0)),t.push(new Xy("contentType",null,!0)),t.push(new Xy("metadata","customMetadata",!0)),Ky=t}()},t.prototype.child=function(t){vb("child",[bb()],arguments);var e=Wy(this.location.path,t),n=new Hy(this.location.bucket,e);return this.newRef(this.service,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new Hy(this.location.bucket,t);return this.newRef(this.service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new Hy(this.location.bucket,"");return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return qy(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),vb("put",[_b(),wb(!0)],arguments),this.throwIfRoot_("put"),new Pb(this,this.service,this.location,this.mappings(),new zy(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=vy.RAW),vb("putString",[bb(),bb(yy,!0),wb(!0)],arguments),this.throwIfRoot_("putString");var i=_y(e,t),r=Object.assign({},n);return!My(r.contentType)&&My(i.contentType)&&(r.contentType=i.contentType),new Pb(this,this.service,this.location,this.mappings(),new zy(i.data,!0),r)},t.prototype.delete=function(){var t=this;return vb("delete",[],arguments),this.throwIfRoot_("delete"),this.service.getAuthToken().then((function(e){var n=hb(t.service,t.location);return t.service.makeRequest(n,e).getPromise()}))},t.prototype.listAll=function(){vb("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},t.prototype.listAllHelper=function(t,e){return Object(vv.__awaiter)(this,void 0,void 0,(function(){var n,i,r;return Object(vv.__generator)(this,(function(o){switch(o.label){case 0:return[4,this.list({pageToken:e})];case 1:return n=o.sent(),(i=t.prefixes).push.apply(i,n.prefixes),(r=t.items).push.apply(r,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(t,n.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype.list=function(t){vb("list",[Ab(!0)],arguments);var e=this;return this.service.getAuthToken().then((function(n){var i=t||{},r=lb(e.service,e.location,"/",i.pageToken,i.maxResults);return e.service.makeRequest(r,n).getPromise()}))},t.prototype.getMetadata=function(){var t=this;return vb("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then((function(e){var n=ab(t.service,t.location,t.mappings());return t.service.makeRequest(n,e).getPromise()}))},t.prototype.updateMetadata=function(t){var e=this;return vb("updateMetadata",[wb()],arguments),this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then((function(n){var i=ub(e.service,e.location,t,e.mappings());return e.service.makeRequest(i,n).getPromise()}))},t.prototype.getDownloadURL=function(){var t=this;return vb("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then((function(e){var n=cb(t.service,t.location,t.mappings());return t.service.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw dy();return t}))}))},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new ay("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),Db=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),Ob=function(){function t(t,e,n,i,r,o,s,a,l,c,u){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=i,this.successCodes_=r.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=l,this.pool_=u,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function n(n,i){var r,o=t.resolve_,s=t.reject_,a=i.xhr;if(i.wasSuccessCode)try{var l=t.callback_(a,a.getResponseText());Ty(l)?o(l):o()}catch(e){s(e)}else null!==a?((r=cy()).setServerResponseProp(a.getResponseText()),s(t.errorCallback_?t.errorCallback_(a,r):r)):s(r=i.canceled?t.appDelete_?fy():uy():new ay("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?n(0,new Rb(!1,null,!0)):this.backoffId_=function(e,n,i){var r=1,o=null,s=!1,a=0;function l(){return 2===a}var c=!1;function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new Rb(!1,null,!0));else{var i=t.pool_.createXhrIo();t.pendingXhr_=i,null!==t.progressCallback_&&i.addUploadProgressListener(r),i.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(r),t.pendingXhr_=null;var i=(n=n).getErrorCode()===Ny.NO_ERROR,o=n.getStatus();if(i&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Rb(s,n))}else{var a=n.getErrorCode()===Ny.ABORT;e(!1,new Rb(!1,null,a))}}))}function r(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,l())}),e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)u.call.apply(u,Object(vv.__spreadArrays)([null,t],e));else{var i,o=l()||s;o?u.call.apply(u,Object(vv.__spreadArrays)([null,t],e)):(r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),h(i))}}var p=!1;function f(t){p||(p=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout((function(){s=!0,f(!0)}),i),f}(0,n,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),i=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||i},t}(),Rb=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}(),Ib=function(){function t(e,n,i,r){var o;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=e,this.authProvider_=n,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=i,this.bucket_=null!=r?Hy.makeFromBucketSpec(r):t.extractBucket_(null===(o=this.app_)||void 0===o?void 0:o.options),this.internals_=new Lb(this)}return t.extractBucket_=function(t){var e=null==t?void 0:t.storageBucket;return null==e?null:Hy.makeFromBucketSpec(e)},t.prototype.getAuthToken=function(){return Object(vv.__awaiter)(this,void 0,void 0,(function(){var t,e;return Object(vv.__generator)(this,(function(n){switch(n.label){case 0:return(t=this.authProvider_.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach((function(t){return t.cancel()})),this.requests_.clear()},t.prototype.makeStorageReference=function(t){return new kb(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this.deleted_)return new Db(fy());var i=function(t,e,n,i){var r=Yy(t.urlParams),o=t.url+r,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==oy.a?oy.a.SDK_VERSION:"AppManager")}(s),new Ob(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this.appId_,e,this.pool_);return this.requests_.add(i),i.getPromise().then((function(){return n.requests_.delete(i)}),(function(){return n.requests_.delete(i)})),i},t.prototype.ref=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}if(vb("ref",[bb(e,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new kb(this,this.bucket_);return null!=t?n.child(t):n},t.prototype.refFromURL=function(t){function n(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{Hy.makeFromUrl(t)}catch(e){throw"Expected valid full URL but got an invalid one."}}return vb("refFromURL",[bb(n,!1)],arguments),new kb(this,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){vb("setMaxUploadRetryTime",[xb()],arguments),this.maxUploadRetryTime_=t},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(t){vb("setMaxOperationRetryTime",[xb()],arguments),this.maxOperationRetryTime_=t},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),t}(),Lb=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},t}();function Fb(t){const e=function(t){return new b(e=>(t.on("state_changed",t=>e.next(t),t=>e.error(t),()=>e.complete()),()=>t.cancel()))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(F(t=>t.bytesTransferred/t.totalBytes*100))}}function Nb(t,e,n){return{getDownloadURL:()=>Op(void 0).pipe(Av(e.outsideAngular),vf(()=>t.getDownloadURL()),n),getMetadata:()=>Op().pipe(Av(e.outsideAngular),vf(()=>t.getMetadata()),n),delete:()=>V(t.delete()),child:i=>Nb(t.child(i),e,n),updateMetadata:e=>V(t.updateMetadata(e)),put:(e,n)=>Fb(t.put(e,n)),putString:(e,n,i)=>Fb(t.putString(e,n,i)),listAll:()=>V(t.listAll())}}Tb={TaskState:Ey,TaskEvent:Cy,StringFormat:vy,Storage:Ib,Reference:kb},(Mb=oy.a).INTERNAL.registerComponent(new sy.Component("storage",(function(t,e){var n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new Ib(n,i,new Uy,e)}),"PUBLIC").setServiceProps(Tb).setMultipleInstances(!0)),Mb.registerVersion("@firebase/storage","0.3.43");const Bb=new Bt("angularfire2.storageBucket");let Ub=(()=>{class t{constructor(t,e,n,i,r){this.schedulers=new Yv(r),this.keepUnstableUntilFirst=Qv(this.schedulers),this.storage=r.runOutsideAngular(()=>ey(t,r,e).storage(n||void 0))}ref(t){return Nb(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return Nb(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Yt(Zv),Yt(Jv,8),Yt(Bb,8),Yt(hu),Yt(Su))},t.\u0275prov=ut({factory:function(){return new t(Yt(Zv),Yt(Jv,8),Yt(Bb,8),Yt(hu),Yt(Su))},token:t,providedIn:"any"}),t})(),Vb=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[Ub]}),t})();class jb{constructor(){this.id=Date.now()+"",this.artworkId=null,this.type=null,this.title=null,this.description=null,this.url=null,this.subjectConsentForm=null,this.artistConsentForm=null,this.status=null,this.scored=null,this.userId=null,this.place=null,this.shotDate=null,this.updatedAt=null,this.createdAt=null,this.reviewedBy=null,this.approvedBy=null}}class zb{constructor(){this.challenges=null,this.lifeBefore=null,this.experience=null,this.userId=null}}var Hb=i("6Joi");function Gb(t,e){return function(t,e=Rv){return new b(n=>{let i;return null!=e?e.schedule(()=>{i=t.onSnapshot(n)}):i=t.onSnapshot(n),function(){null!=i&&i()}})}(t,e)}function Wb(t,e){return Gb(t,e).pipe(F(t=>({payload:t,type:"query"})))}function qb(t,e){return Wb(t,e).pipe(F(t=>t.payload.docChanges().map(t=>({type:t.type,payload:t}))))}function $b(t,e,n){return Wb(t,n).pipe(F(t=>t.payload.docChanges()),Af((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e),[]),F(t=>t.map(t=>({type:t.type,payload:t}))))}function Yb(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class Qb{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){return t&&0!==t.length?qb(this.query,this.afs.schedulers.outsideAngular).pipe(F(e=>e.filter(e=>t.indexOf(e.type)>-1)),Hp(t=>t.length>0),this.afs.keepUnstableUntilFirst):qb(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Af((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Yb(t);return $b(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Wb(this.query,this.afs.schedulers.outsideAngular).pipe(F(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return V(this.query.get(t)).pipe(Av(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Xb(this.ref.doc(t),this.afs)}}class Xb{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:i,query:r}=e_(n,e);return new Qb(i,r,this.afs)}snapshotChanges(){return Gb(this.ref,this.afs.schedulers.outsideAngular).pipe(F(t=>({payload:t,type:"value"}))).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return this.snapshotChanges().pipe(F(t=>t.payload.data()))}get(t){return V(this.ref.get(t)).pipe(Av(this.afs.schedulers.insideAngular))}}class Kb{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?qb(this.query,this.afs.schedulers.outsideAngular).pipe(F(e=>e.filter(e=>t.indexOf(e.type)>-1)),Hp(t=>t.length>0),this.afs.keepUnstableUntilFirst):qb(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Af((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Yb(t);return $b(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return Wb(this.query,this.afs.schedulers.outsideAngular).pipe(F(t=>t.payload.docs.map(t=>t.data())),this.afs.keepUnstableUntilFirst)}get(t){return V(this.query.get(t)).pipe(Av(this.afs.schedulers.insideAngular))}}const Zb=new Bt("angularfire2.enableFirestorePersistence"),Jb=new Bt("angularfire2.firestore.persistenceSettings"),t_=new Bt("angularfire2.firestore.settings");function e_(t,e=(t=>t)){return{query:e(t),ref:t}}let n_=(()=>{class t{constructor(t,n,i,r,o,s,a){this.schedulers=new Yv(s),this.keepUnstableUntilFirst=Qv(this.schedulers),this.firestore=s.runOutsideAngular(()=>{const e=ey(t,s,n);Hb.registerFirestore&&Object(Hb.registerFirestore)(oy.a);const i=e.firestore();return r&&i.settings(r),i}),this.persistenceEnabled$=i&&!Kd(o)?s.runOutsideAngular(()=>{try{return V(this.firestore.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(e){return Op(!1)}}):Op(!1)}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:i,query:r}=e_(n,e);return new Qb(i,r,this)}collectionGroup(t,e){const n=e||(t=>t),i=this.firestore.collectionGroup(t);return new Kb(n(i),this)}doc(t){let e;return e="string"==typeof t?this.firestore.doc(t):t,new Xb(e,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(Yt(Zv),Yt(Jv,8),Yt(Zb,8),Yt(t_,8),Yt(hu),Yt(Su),Yt(Jb,8))},t.\u0275prov=ut({factory:function(){return new t(Yt(Zv),Yt(Jv,8),Yt(Zb,8),Yt(t_,8),Yt(hu),Yt(Su),Yt(Jb,8))},token:t,providedIn:"any"}),t})(),i_=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:Zb,useValue:!0},{provide:Jb,useValue:e}]}}}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[n_]}),t})();class r_ extends C{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),super.next(t)}nextTimeWindow(t){this._events.push(new o_(this._getNow(),t)),this._trimBufferThenGetEvents(),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,r=n.length;let o;if(this.closed)throw new w;if(this.isStopped||this.hasError?o=d.EMPTY:(this.observers.push(t),o=new A(this,t)),i&&t.add(t=new Cv(t,i)),e)for(let s=0;s<r&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<r&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Ov).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,i=this._events,r=i.length;let o=0;for(;o<r&&!(t-i[o].time<n);)o++;return r>e&&(o=Math.max(o,r-e)),o>0&&i.splice(0,o),i}}class o_{constructor(t,e){this.time=t,this.value=e}}function s_(t,e,n){let i;return i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:i}){let r,o,s=0,a=!1,l=!1;return function(c){s++,r&&!a||(a=!1,r=new r_(t,e,i),o=c.subscribe({next(t){r.next(t)},error(t){a=!0,r.error(t)},complete(){l=!0,o=void 0,r.complete()}}));const u=r.subscribe(this);this.add(()=>{s--,u.unsubscribe(),o&&!l&&n&&0===s&&(o.unsubscribe(),o=void 0,r=void 0)})}}(i))}let a_=(()=>{class t{constructor(t,e,n,r){const o=new Yv(r),s=Qv(o),a=Op(void 0).pipe(Av(o.outsideAngular),vf(()=>r.runOutsideAngular(()=>i.e(1).then(i.bind(null,"6nsN")))),F(()=>ey(t,r,e)),F(t=>t.auth()),s_({bufferSize:1,refCount:!1}));return this.authState=a.pipe(Av(o.outsideAngular),vf(t=>new b(t.onAuthStateChanged.bind(t))),s),this.user=a.pipe(Av(o.outsideAngular),vf(t=>new b(t.onIdTokenChanged.bind(t))),s),this.idToken=this.user.pipe(vf(t=>t?V(t.getIdToken()):Op(null))),this.idTokenResult=this.user.pipe(vf(t=>t?V(t.getIdTokenResult()):Op(null))),Kv(this,a,r)}}return t.\u0275fac=function(e){return new(e||t)(Yt(Zv),Yt(Jv,8),Yt(hu),Yt(Su))},t.\u0275prov=ut({factory:function(){return new t(Yt(Zv),Yt(Jv,8),Yt(hu),Yt(Su))},token:t,providedIn:"any"}),t})(),l_=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[a_]}),t})();function c_(t,e){return n=>n.lift(new u_(t,e))}class u_{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new h_(t,this.compare,this.keySelector))}}class h_ extends m{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function d_(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new p_(t,n))}}class p_{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new f_(t,this.observables,this.project))}}class f_ extends L{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const i=e.length;this.values=new Array(i);for(let r=0;r<i;r++)this.toRespond.push(r);for(let r=0;r<i;r++){let t=e[r];this.add(I(this,t,t,r))}}notifyNext(t,e,n,i,r){this.values[n]=e;const o=this.toRespond;if(o.length>0){const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class m_{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new g_(t,this.predicate))}}class g_ extends m{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function v_(t){return null==t}function y_(t){return"function"==typeof t.set}function b_(t,e){return y_(e)?e:t.ref(e)}function __(t,e){if("string"==typeof t)return e.stringCase();if(y_(t))return e.firebaseCase();if(function(t){return"function"==typeof t.exportVal}(t))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof t}`)}function w_(t,e,n="on",i=Rv){return new b(r=>{let o=null;return o=t[n](e,(t,e)=>{i.schedule(()=>{r.next({snapshot:t,prevKey:e})}),"once"==n&&i.schedule(()=>r.complete())},t=>{i.schedule(()=>r.error(t))}),"on"==n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(F(t=>{const{snapshot:n,prevKey:i}=t;let r=null;return n.exists()&&(r=n.key),{type:e,payload:n,prevKey:i,key:r}}),tt())}function A_(t,e){const n=t.length;for(let i=0;i<n;i++)if(t[i].payload.key===e)return i;return-1}function x_(t,e){const{payload:n,prevKey:i,key:r}=e,o=A_(t,r),s=function(t,e){if(v_(e))return 0;{const n=A_(t,e);return-1===n?t.length:n+1}}(t,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const i={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,i],!1})}return t;case"child_added":if(o>-1){const r=t[o-1];(r&&r.key||null)!=i&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==i)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===r?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function C_(t){return(v_(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function E_(t,e,n){return function(t,e,n){return w_(t,"value","once",n).pipe(vf(i=>{const r=[Op(i)];return e.forEach(e=>r.push(w_(t,e,"on",n))),q(...r).pipe(Af(x_,[]))}),c_())}(t,e=C_(e),n)}function S_(t,e,n){return q(...(e=C_(e)).map(e=>w_(t,e,"on",n)))}function M_(t,e){return function(n,i){return __(n,{stringCase:()=>t.child(n)[e](i),firebaseCase:()=>n[e](i),snapshotCase:()=>n.ref[e](i)})}}function T_(t,e){return function(){return w_(t,"value","on",e)}}i("NSPt");const P_=new Bt("angularfire2.realtimeDatabaseURL");let k_=(()=>{class t{constructor(t,e,n,i,r){this.schedulers=new Yv(r),this.keepUnstableUntilFirst=Qv(this.schedulers),this.database=r.runOutsideAngular(()=>ey(t,r,e).database(n||void 0))}list(t,e){const n=b_(this.database,t);let i=n;return e&&(i=e(n)),function(t,e){const n=e.schedulers.outsideAngular;return{query:t,update:M_(t.ref,"update"),set:M_(t.ref,"set"),push:e=>t.ref.push(e),remove:(i=t.ref,function(t){return t?__(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:i=>E_(t,i,n).pipe(e.keepUnstableUntilFirst),stateChanges:i=>S_(t,i,n).pipe(e.keepUnstableUntilFirst),auditTrail:i=>function(t,e,n){return function(t,e,n){return function(t,e){return w_(t,"value","on",e).pipe(F(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(d_(e),F(([t,e])=>{let n=t.lastKeyToLoad;const i=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:i}}),(i=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new m_(i))),F(t=>t.actions));var i}(t,S_(t,e).pipe(Af((t,e)=>[...t,e],[])),n)}(t,i,n).pipe(e.keepUnstableUntilFirst),valueChanges:i=>E_(t,i,n).pipe(F(t=>t.map(t=>t.payload.val())),e.keepUnstableUntilFirst)};var i}(i,this)}object(t){const e=b_(this.database,t);return i=this,{query:n=e,snapshotChanges:()=>T_(n,i.schedulers.outsideAngular)().pipe(i.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>T_(n,i.schedulers.outsideAngular)().pipe(i.keepUnstableUntilFirst,F(t=>t.payload.exists()?t.payload.val():null))};var n,i}createPushId(){return this.database.ref().push().key}}return t.\u0275fac=function(e){return new(e||t)(Yt(Zv),Yt(Jv,8),Yt(P_,8),Yt(hu),Yt(Su))},t.\u0275prov=ut({factory:function(){return new t(Yt(Zv),Yt(Jv,8),Yt(P_,8),Yt(hu),Yt(Su))},token:t,providedIn:"any"}),t})(),D_=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[k_]}),t})(),O_=(()=>{class t{constructor(t,e,n,i,r){this.firestore=t,this.fauth=e,this.router=n,this.firebase=i,this.storage=r,this.latestArtWorks=[],this.uploadingArtwork=new jb,this.artwork=new jb,this.extraDetails=new zb,this.percentage=Op(0),this.getCurrentUser()}getCurrentUser(){return this.authState=this.fauth.authState,this.authState}getFirestore(){return this.firestore}generatePushId(){return this.firebase.createPushId()}usersCollection(){return this.firestore.collection("users")}usersCollectionById(t){return this.firestore.collection("users").ref.where("userId","==",t)}curatorsCollection(){return this.firestore.collection("curators")}interviewssCollection(){return this.firestore.collection("interviews")}artworksCollection(){return this.firestore.collection("artworks")}getFeaturedArtworks(){return this.artworksCollection().ref.where("status","==","featured")}getTeamProfileImage(){return this.firestore.collection("site").doc("team")}getHomePageData(){return this.firestore.collection("site").doc("home")}getGuidelinesData(){return this.firestore.collection("site").doc("guidelines")}getStoriesData(){return this.firestore.collection("site").doc("stories")}getArtworkReviewedBy(t){return this.artworksCollection().ref.where("reviewedBy","==",t)}getArtworkApprovedBy(t){return this.artworksCollection().ref.where("approvedBy","==",t)}getArtworkScores(t){return this.scoresCollections().ref.where("artworkId","==",t)}getUserSubmittedArtworks(t){return this.firestore.collection("artworks").ref.where("userId","==",t)}getAllExhibitions(){return this.firestore.collection("artworks").ref.where("status","==","featured")}getExhibitionDetail(){return this.firestore.collection("artworks")}scoresCollections(){return this.firestore.collection("scores")}messageCollections(){return this.firestore.collection("messages")}createCurator(t,e){let n=null,i=null;if(null!=e){const r=`curators/images/${Date.now()+""}_${null==e?void 0:e.name}`,o=this.storage.ref(r),s=this.storage.upload(r,e);i=s.percentageChanges(),s.snapshotChanges().pipe(Sf(()=>Object(vv.__awaiter)(this,void 0,void 0,(function*(){let e=yield o.getDownloadURL().toPromise();t.profileImage=e,n=JSON.parse(JSON.stringify(t)),this.curatorsCollection().doc(t.curatorId).set(n)})))).subscribe()}else this.curatorsCollection().doc(t.curatorId).set(n);return i}uploadSubjectConsentForm(t,e,n,i){if(console.log(t),console.log(e),console.log(i),console.log(n),console.log(localStorage.getItem("currentUser")),null!=t){e.userId=localStorage.getItem("currentUser"),i.userId=localStorage.getItem("currentUser");const r=`artworks/documents/${Date.now()+""}_${t.name}`,o=this.storage.ref(r),s=this.storage.upload(r,t);let a=s.percentageChanges();return s.snapshotChanges().pipe(Sf(()=>Object(vv.__awaiter)(this,void 0,void 0,(function*(){let t=yield o.getDownloadURL().toPromise();e.subjectConsentForm=t})))).subscribe(t=>{t.bytesTransferred==t.totalBytes&&(this.artwork=e,this.extraDetails=i,this.file=n,this.router.navigateByUrl("/project/submit"))}),a}}}return t.\u0275fac=function(e){return new(e||t)(Yt(n_),Yt(a_),Yt(Wg),Yt(k_),Yt(Ub))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),R_=(()=>{class t{constructor(t,e,n,i,r,o){this.storage=t,this.dbOperations=e,this.afs=n,this.afAuth=i,this.router=r,this.ngZone=o,this.downloadUrl=null,this.emailSent=!1}signIn(t){return Object(vv.__awaiter)(this,void 0,void 0,(function*(){this.afAuth.setPersistence(yv.auth.Auth.Persistence.SESSION).then(e=>this.afAuth.signInWithEmailAndPassword(t.email,t.password).then(t=>{this.ngZone.run(()=>{Op(t.user.uid).subscribe(t=>{this.currentUser=t,this.router.navigateByUrl("/artist-profile"),localStorage.setItem("currentUser",this.currentUser)})})}).catch(t=>{})).catch(t=>{})}))}checkIfUserExists(t){return this.user=t,this.dbOperations.usersCollection().ref.where("email","==",t.email).get().then(t=>{t.empty?console.log("resgiter"):t.forEach(t=>{if(t.exists){const e=t.data();let n=e.role;localStorage.setItem("currentUser",e.userId),console.log(e.userId+" current user"),this.ngZone.run(()=>{n.includes("filtering")?this.router.navigateByUrl("/project/admin/filter-artworks"):n.includes("moderator")?this.router.navigateByUrl("/project/admin"):n.includes("artist")?this.router.navigateByUrl("/sorry"):n.includes("scoring")?this.router.navigateByUrl("/project/admin/score"):n.includes("selection")?this.router.navigateByUrl("/project/admin/select-artworks"):this.router.navigateByUrl("/artist-profile")})}})}).catch(t=>{})}convertErrorMessage(t){switch(t){case"auth/user-disabled":return"Sorry your user is disabled.";case"auth/user-not-found":return"Sorry user not found.";case"auth/invalid-user-token":return"Could you please login in again";case"auth/email-already-in-use":return"Email already in use. Please enter your password to log in";default:return"Login error try again later."}}register(t){return this.afAuth.createUserWithEmailAndPassword(t.email,t.password).then(e=>this.signIn(t).then(n=>{t.userId=e.user.uid,t.password="",this.currentUser=e.user.uid,localStorage.setItem("currentUser",t.userId),console.log(t.userId+" user uid");const i=this.dbOperations.usersCollection().doc(t.userId),r=JSON.parse(JSON.stringify(t));return i.set(r).then(e=>{this.router.navigateByUrl("/artist-profile"),console.log(t.userId+" user uid signed in")}).catch(t=>{})}).catch(t=>{}))}sendEmailVerification(){return Object(vv.__awaiter)(this,void 0,void 0,(function*(){}))}sendPasswordResetEmail(t){return Object(vv.__awaiter)(this,void 0,void 0,(function*(){return yield this.afAuth.sendPasswordResetEmail(t)}))}logout(){return Object(vv.__awaiter)(this,void 0,void 0,(function*(){yield this.afAuth.signOut().then(t=>{localStorage.removeItem("currentUser")}).catch(t=>{})}))}signInAnonymously(t){return Object(vv.__awaiter)(this,void 0,void 0,(function*(){yield this.afAuth.signInAnonymously().then(e=>{console.log(e.user.uid),t.userId=e.user.uid,t.password="",console.log(t.userId);const n=this.dbOperations.usersCollection().doc(t.userId),i=JSON.parse(JSON.stringify(t));return n.set(i).then(e=>{this.getUserProfileInfo(t)}).catch(t=>{})}).catch(t=>{})}))}sendVerificationMail(){}forgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{}).catch(t=>{})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}saveUserProfileInfo(t){this.user=t,console.log("set user data "+t.email),this.authState=this.afAuth.authState;let e=localStorage.getItem("currentUser");console.log("set user data "+e),this.user.userId=e,this.user.role.push("artist"),this.user.password="",this.user.code=Date.now()+"";const n=JSON.parse(JSON.stringify(this.user));this.dbOperations.usersCollection().doc(this.user.userId).update(n).then(t=>{this.router.navigateByUrl("/social-links")}).catch(t=>{})}saveUserSociaMediaInfo(t){this.user=t;const e=JSON.parse(JSON.stringify(this.user));this.dbOperations.usersCollection().doc(this.user.userId).update(e).then(t=>{this.getUserProfileInfo(this.user)}).catch(t=>{})}getUserProfileInfo(t){this.dbOperations.usersCollection().ref.where("userId","==",t.userId).get().then(t=>{t.docs.forEach(t=>{const e=t.data();console.log("sign in trial "+e.userId);let n=e.role;this.ngZone.run(()=>{n.includes("filtering")&&this.router.navigateByUrl("/project/admin/filter-artworks"),n.includes("moderator")&&this.router.navigateByUrl("/project/admin"),n.includes("artist")&&this.router.navigateByUrl("/upload-files"),n.includes("scoring")&&this.router.navigateByUrl("/project/admin/score"),n.includes("selection")&&this.router.navigateByUrl("/project/admin/select-artworks")})})}).catch(t=>{})}skipSocialMedia(){this.router.navigateByUrl("/upload-files")}signOut(){}}return t.\u0275fac=function(e){return new(e||t)(Yt(Ub),Yt(O_),Yt(n_),Yt(a_),Yt(Wg),Yt(Su))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function I_(...t){if(1===t.length){const e=t[0];if(c(e))return L_(e,null);if(u(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return L_(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return L_(t=1===t.length&&c(t[0])?t[0]:t,null).pipe(F(t=>e(...t)))}return L_(t,null)}function L_(t,e){return new b(n=>{const i=t.length;if(0===i)return void n.complete();const r=new Array(i);let o=0,s=0;for(let a=0;a<i;a++){const l=V(t[a]);let c=!1;n.add(l.subscribe({next:t=>{c||(c=!0,s++),r[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==i&&c||(s===i&&n.next(e?e.reduce((t,e,n)=>(t[e]=r[n],t),{}):r),n.complete())}}))}})}const F_=new Bt("NgValueAccessor"),N_={provide:F_,useExisting:xt(()=>B_),multi:!0};let B_=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ns(rl),Ns(tl))},t.\u0275dir=_e({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&Xs("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[Xa([N_])]}),t})();const U_={provide:F_,useExisting:xt(()=>j_),multi:!0},V_=new Bt("CompositionEventMode");let j_=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=ih()?ih().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(Ns(rl),Ns(tl),Ns(V_,8))},t.\u0275dir=_e({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Xs("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[Xa([U_])]}),t})(),z_=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t}),t})(),H_=(()=>{class t extends z_{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return G_(e||t)},t.\u0275dir=_e({type:t,features:[Ba]}),t})();const G_=gi(H_);function W_(){throw new Error("unimplemented")}class q_ extends z_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return W_()}get asyncValidator(){return W_()}}class $_{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let Y_=(()=>{class t extends $_{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Ns(q_,2))},t.\u0275dir=_e({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&va("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[Ba]}),t})(),Q_=(()=>{class t extends $_{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Ns(H_,2))},t.\u0275dir=_e({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&va("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[Ba]}),t})();function X_(t){return null==t||0===t.length}function K_(t){return null!=t&&"number"==typeof t.length}const Z_=new Bt("NgValidators"),J_=new Bt("NgAsyncValidators"),tw=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ew{static min(t){return e=>{if(X_(e.value)||X_(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(X_(e.value)||X_(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return X_(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return X_(t.value)||tw.test(t.value)?null:{email:!0}}static minLength(t){return e=>X_(e.value)||!K_(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>K_(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return ew.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(X_(t.value))return null;const i=t.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(nw);return 0==e.length?null:function(t){return rw(function(t,e){return e.map(e=>e(t))}(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(nw);return 0==e.length?null:function(t){return I_(function(t,e){return e.map(e=>e(t))}(t,e).map(iw)).pipe(F(rw))}}}function nw(t){return null!=t}function iw(t){const e=Ys(t)?V(t):t;if(!Qs(e))throw new Error("Expected validator to return Promise or Observable.");return e}function rw(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ow(t){return t.validate?e=>t.validate(e):t}function sw(t){return t.validate?e=>t.validate(e):t}const aw={provide:F_,useExisting:xt(()=>lw),multi:!0};let lw=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ns(rl),Ns(tl))},t.\u0275dir=_e({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&Xs("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[Xa([aw])]}),t})();const cw={provide:F_,useExisting:xt(()=>hw),multi:!0};let uw=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),hw=(()=>{class t{constructor(t,e,n,i){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=i,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(q_),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return t.\u0275fac=function(e){return new(e||t)(Ns(rl),Ns(tl),Ns(uw),Ns(As))},t.\u0275dir=_e({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&Xs("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Xa([cw])]}),t})();const dw={provide:F_,useExisting:xt(()=>pw),multi:!0};let pw=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Ns(rl),Ns(tl))},t.\u0275dir=_e({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&Xs("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[Xa([dw])]}),t})();const fw='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',mw='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',gw='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',vw={provide:F_,useExisting:xt(()=>bw),multi:!0};function yw(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let bw=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=yw(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(Ns(rl),Ns(tl))},t.\u0275dir=_e({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&Xs("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Xa([vw])]}),t})(),_w=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(yw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(rl),Ns(bw,9))},t.\u0275dir=_e({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const ww={provide:F_,useExisting:xt(()=>xw),multi:!0};function Aw(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let xw=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const i=t.item(e),r=this._getOptionValue(i.value);n.push(r)}}else{const t=e.options;for(let e=0;e<t.length;e++){const i=t.item(e);if(i.selected){const t=this._getOptionValue(i.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(Ns(rl),Ns(tl))},t.\u0275dir=_e({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&Xs("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[Xa([ww])]}),t})(),Cw=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Aw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Aw(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(rl),Ns(xw,9))},t.\u0275dir=_e({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();function Ew(t,e){return[...e.path,t]}function Sw(t,e){t||kw(e,"Cannot find control with"),e.valueAccessor||kw(e,"No value accessor for form control with"),t.validator=ew.compose([t.validator,e.validator]),t.asyncValidator=ew.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Mw(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Mw(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function Mw(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Tw(t,e){null==t&&kw(e,"Cannot find control with"),t.validator=ew.compose([t.validator,e.validator]),t.asyncValidator=ew.composeAsync([t.asyncValidator,e.asyncValidator])}function Pw(t){return kw(t,"There is no FormControl instance attached to form control element with")}function kw(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function Dw(t){return null!=t?ew.compose(t.map(ow)):null}function Ow(t){return null!=t?ew.composeAsync(t.map(sw)):null}const Rw=[B_,pw,lw,bw,xw,hw];function Iw(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function Lw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Fw(t){const e=Bw(t)?t.validators:t;return Array.isArray(e)?Dw(e):e||null}function Nw(t,e){const n=Bw(e)?e.asyncValidators:t;return Array.isArray(n)?Ow(n):n||null}function Bw(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Uw{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=Fw(t)}setAsyncValidators(t){this.asyncValidator=Nw(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING";const e=iw(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let i=t;return e.forEach(t=>{i=i instanceof jw?i.controls.hasOwnProperty(t)?i.controls[t]:null:i instanceof zw&&i.at(t)||null}),i}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Fc,this.statusChanges=new Fc}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Bw(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Vw extends Uw{constructor(t=null,e,n){super(Fw(e),Nw(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class jw extends Uw{constructor(t,e,n){super(Fw(e),Nw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Vw?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,i)=>{n=e(n,t,i)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class zw extends Uw{constructor(t,e,n){super(Fw(e),Nw(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Vw?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Hw={provide:H_,useExisting:xt(()=>Ww)},Gw=(()=>Promise.resolve(null))();let Ww=(()=>{class t extends H_{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Fc,this.form=new jw({},Dw(t),Ow(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Gw.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Sw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Gw.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Lw(this._directives,t)})}addFormGroup(t){Gw.then(()=>{const e=this._findContainer(t.path),n=new jw({});Tw(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Gw.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Gw.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Iw(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(Ns(Z_,10),Ns(J_,10))},t.\u0275dir=_e({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&Xs("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Xa([Hw]),Ba]}),t})(),qw=(()=>{class t extends H_{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Ew(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Dw(this._validators)}get asyncValidator(){return Ow(this._asyncValidators)}_checkParentType(){}}return t.\u0275fac=function(e){return $w(e||t)},t.\u0275dir=_e({type:t,features:[Ba]}),t})();const $w=gi(qw);class Yw{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${fw}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  `)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${mw}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${gw}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${mw}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${gw}`)}}const Qw={provide:H_,useExisting:xt(()=>Xw)};let Xw=(()=>{class t extends qw{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof t||this._parent instanceof Ww||Yw.modelGroupParentException()}}return t.\u0275fac=function(e){return new(e||t)(Ns(H_,5),Ns(Z_,10),Ns(J_,10))},t.\u0275dir=_e({type:t,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[Xa([Qw]),Ba]}),t})();const Kw={provide:q_,useExisting:xt(()=>Jw)},Zw=(()=>Promise.resolve(null))();let Jw=(()=>{class t extends q_{constructor(t,e,n,i){super(),this.control=new Vw,this._registered=!1,this.update=new Fc,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||kw(t,"Value accessor was not provided as an array for form control with");let n=void 0,i=void 0,r=void 0;return e.forEach(e=>{var o;e.constructor===j_?n=e:(o=e,Rw.some(t=>o.constructor===t)?(i&&kw(t,"More than one built-in value accessor matches form control with"),i=e):(r&&kw(t,"More than one custom value accessor matches form control with"),r=e))}),r||i||n||(kw(t,"No valid value accessor for form control with"),null)}(this,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Ew(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Dw(this._rawValidators)}get asyncValidator(){return Ow(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Sw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof Xw)&&this._parent instanceof qw?Yw.formGroupNameException():this._parent instanceof Xw||this._parent instanceof Ww||Yw.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Yw.missingNameException()}_updateValue(t){Zw.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Zw.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(Ns(H_,9),Ns(Z_,10),Ns(J_,10),Ns(F_,10))},t.\u0275dir=_e({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Xa([Kw]),Ba,Re]}),t})(),tA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const eA={provide:H_,useExisting:xt(()=>nA)};let nA=(()=>{class t extends H_{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new Fc}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Sw(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Lw(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);Tw(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);Tw(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,Iw(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>Pw(e)),e.valueAccessor.registerOnTouched(()=>Pw(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&Sw(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=Dw(this._validators);this.form.validator=ew.compose([this.form.validator,t]);const e=Ow(this._asyncValidators);this.form.asyncValidator=ew.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||class{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${fw}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${mw}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${gw}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${fw}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${mw}`)}static arrayParentException(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n\n      Example:\n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}.\n    Support for using the ngModel input property and ngModelChange event with\n    reactive form directives has been deprecated in Angular v6 and will be removed\n    in a future version of Angular.\n\n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}.missingFormException()}}return t.\u0275fac=function(e){return new(e||t)(Ns(Z_,10),Ns(J_,10))},t.\u0275dir=_e({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&Xs("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Xa([eA]),Ba,Re]}),t})();const iA={provide:Z_,useExisting:xt(()=>oA),multi:!0},rA={provide:Z_,useExisting:xt(()=>sA),multi:!0};let oA=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!==`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?ew.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&Rs("required",e.required?"":null)},inputs:{required:"required"},features:[Xa([iA])]}),t})(),sA=(()=>{class t extends oA{validate(t){return this.required?ew.requiredTrue(t):null}}return t.\u0275fac=function(e){return aA(e||t)},t.\u0275dir=_e({type:t,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&Rs("required",e.required?"":null)},features:[Xa([rA]),Ba]}),t})();const aA=gi(sA),lA={provide:Z_,useExisting:xt(()=>cA),multi:!0};let cA=(()=>{class t{constructor(){this._enabled=!1}set email(t){this._enabled=""===t||!0===t||"true"===t,this._onChange&&this._onChange()}validate(t){return this._enabled?ew.email(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[Xa([lA])]}),t})();const uA={provide:Z_,useExisting:xt(()=>hA),multi:!0};let hA=(()=>{class t{constructor(){this._validator=ew.nullValidator}ngOnChanges(t){"minlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null==this.minlength?null:this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=ew.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&Rs("minlength",e.minlength?e.minlength:null)},inputs:{minlength:"minlength"},features:[Xa([uA]),Re]}),t})();const dA={provide:Z_,useExisting:xt(()=>pA),multi:!0};let pA=(()=>{class t{constructor(){this._validator=ew.nullValidator}ngOnChanges(t){"maxlength"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return null!=this.maxlength?this._validator(t):null}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=ew.maxLength("number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&Rs("maxlength",e.maxlength?e.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Xa([dA]),Re]}),t})();const fA={provide:Z_,useExisting:xt(()=>mA),multi:!0};let mA=(()=>{class t{constructor(){this._validator=ew.nullValidator}ngOnChanges(t){"pattern"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=ew.pattern(this.pattern)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&Rs("pattern",e.pattern?e.pattern:null)},inputs:{pattern:"pattern"},features:[Xa([fA]),Re]}),t})(),gA=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)}}),t})(),vA=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[uw],imports:[gA]}),t})();const yA=function(){return["/auth/sign-in"]},bA=[{path:"",redirectTo:"landing",pathMatch:"full"},{path:"sign-up",component:(()=>{class t{constructor(t,e){this.authService=t,this.router=e,this.user=new gv}ngOnInit(){}signUp(){}navigateToGallery(){}}return t.\u0275fac=function(e){return new(e||t)(Ns(R_),Ns(Wg))},t.\u0275cmp=fe({type:t,selectors:[["app-sign-up"]],decls:25,vars:4,consts:[[1,"sign-up"],[1,"container-fluid"],[1,"row"],[1,"col-md-8","p-0"],[1,"arts-diplay"],[1,"col-md-4","p-0"],[1,"authblock","d-flex"],[1,"sign-up-form"],[1,"text-center"],[1,"formGroup"],["type","text","placeholder","Email","required","",1,"formControl",3,"ngModel","ngModelChange"],[1,"formGroup","mt-3"],["type","text","placeholder","Role","required","",1,"formControl",3,"ngModel","ngModelChange"],[1,"formGroup","mt-3","p-1"],[1,"redirect"],[1,"redirect-sign-in","p-1"],[3,"routerLink"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),js(2,"div",2),js(3,"div",3),Hs(4,"div",4),zs(),js(5,"div",5),js(6,"div",6),js(7,"div",7),js(8,"h3",8),ka(9,"Sign Up"),zs(),js(10,"div",9),js(11,"input",10),Xs("ngModelChange",(function(t){return e.user.email=t})),zs(),zs(),Hs(12,"div",11),js(13,"div",11),js(14,"input",12),Xs("ngModelChange",(function(t){return e.user.role=t})),zs(),zs(),js(15,"div",13),js(16,"button"),js(17,"span",14),ka(18,"Sign Up"),zs(),zs(),zs(),js(19,"div",15),js(20,"button"),js(21,"span"),ka(22,"Already have an account?"),js(23,"a",16),ka(24,"Sign In"),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs()),2&t&&(Cr(11),Us("ngModel",e.user.email),Cr(3),Us("ngModel",e.user.role),Cr(9),Us("routerLink",Ec(3,yA)))},directives:[j_,oA,Y_,Jw,$g],styles:[""]}),t})()},{path:"forgot-password",component:mv}];let _A=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd,sv.forChild(bA),vA]]}),t})(),wA=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-auth"]],decls:1,vars:0,template:function(t,e){1&t&&Hs(0,"router-outlet")},directives:[Xg],styles:[".auth-wrapper[_ngcontent-%COMP%]{min-height:100vh}"]}),t})();function AA(t,e,n,i){return r(n)&&(i=n,n=void 0),i?AA(t,e,n).pipe(F(t=>c(t)?i(...t):i(t))):new b(i=>{!function t(e,n,i,r,o){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,i,o),s=()=>t.removeEventListener(n,i,o)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,i),s=()=>t.off(n,i)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,i),s=()=>t.removeListener(n,i)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,a=e.length;s<a;s++)t(e[s],n,i,r,o)}r.add(s)}(t,e,(function(t){i.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),i,n)})}function xA(t=0,e,n){let i=-1;return zv(e)?i=Number(e)<1?1:Number(e):S(e)&&(n=e),S(n)||(n=Rv),new b(e=>{const r=zv(t)?t:+t-n.now();return n.schedule(CA,r,{index:0,period:i,subscriber:e})})}function CA(t){const{index:e,period:n,subscriber:i}=t;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}}const EA=["*"];let SA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.VG_ENDED="ended",t.VG_PAUSED="paused",t.VG_PLAYING="playing",t.VG_LOADING="waiting",t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),MA=(()=>{class t{constructor(){this.medias={},this.playerReadyEvent=new Fc(!0),this.isPlayerReady=!1}onPlayerReady(t){this.fsAPI=t,this.isPlayerReady=!0,this.playerReadyEvent.emit(this)}getDefaultMedia(){for(const t in this.medias)if(this.medias[t])return this.medias[t]}getMasterMedia(){let t;for(const e in this.medias)if("true"===this.medias[e].vgMaster||!0===this.medias[e].vgMaster){t=this.medias[e];break}return t||this.getDefaultMedia()}isMasterDefined(){let t=!1;for(const e in this.medias)if("true"===this.medias[e].vgMaster||!0===this.medias[e].vgMaster){t=!0;break}return t}getMediaById(t=null){let e=this.medias[t];return t&&"*"!==t||(e=this),e}play(){for(const t in this.medias)this.medias[t]&&this.medias[t].play()}pause(){for(const t in this.medias)this.medias[t]&&this.medias[t].pause()}get duration(){return this.$$getAllProperties("duration")}set currentTime(t){this.$$setAllProperties("currentTime",t)}get currentTime(){return this.$$getAllProperties("currentTime")}set state(t){this.$$setAllProperties("state",t)}get state(){return this.$$getAllProperties("state")}set volume(t){this.$$setAllProperties("volume",t)}get volume(){return this.$$getAllProperties("volume")}set playbackRate(t){this.$$setAllProperties("playbackRate",t)}get playbackRate(){return this.$$getAllProperties("playbackRate")}get canPlay(){return this.$$getAllProperties("canPlay")}get canPlayThrough(){return this.$$getAllProperties("canPlayThrough")}get isMetadataLoaded(){return this.$$getAllProperties("isMetadataLoaded")}get isWaiting(){return this.$$getAllProperties("isWaiting")}get isCompleted(){return this.$$getAllProperties("isCompleted")}get isLive(){return this.$$getAllProperties("isLive")}get isMaster(){return this.$$getAllProperties("isMaster")}get time(){return this.$$getAllProperties("time")}get buffer(){return this.$$getAllProperties("buffer")}get buffered(){return this.$$getAllProperties("buffered")}get subscriptions(){return this.$$getAllProperties("subscriptions")}get textTracks(){return this.$$getAllProperties("textTracks")}seekTime(t,e=!1){for(const n in this.medias)this.medias[n]&&this.$$seek(this.medias[n],t,e)}$$seek(t,e,n=!1){let i,r=t.duration;n?(this.isMasterDefined()&&(r=this.getMasterMedia().duration),i=e*r/100):i=e,t.currentTime=i}addTextTrack(t,e,n){for(const i in this.medias)this.medias[i]&&this.$$addTextTrack(this.medias[i],t,e,n)}$$addTextTrack(t,e,n,i){t.addTextTrack(e,n,i)}$$getAllProperties(t){const e={};let n;for(const i in this.medias)this.medias[i]&&(e[i]=this.medias[i]);switch(Object.keys(e).length){case 0:switch(t){case"state":n=SA.VG_PAUSED;break;case"playbackRate":case"volume":n=1;break;case"time":n={current:0,total:0,left:0}}break;case 1:n=e[Object.keys(e)[0]][t];break;default:n=e[this.getMasterMedia().id][t]}return n}$$setAllProperties(t,e){for(const n in this.medias)this.medias[n]&&(this.medias[n][t]=e)}registerElement(t){this.videogularElement=t}registerMedia(t){this.medias[t.id]=t}unregisterMedia(t){delete this.medias[t.id]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),TA=(()=>{class t{constructor(){this.isHiddenSubject=new C,this.isHidden=this.isHiddenSubject.asObservable()}state(t){this.isHiddenSubject.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),PA=(()=>{class t{static getZIndex(){let t,e=1;const n=document.getElementsByTagName("*");for(let i=0,r=n.length;i<r;i++)t=parseInt(window.getComputedStyle(n[i])["z-index"],10),t>e&&(e=t+1);return e}static isMobileDevice(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")}static isiOSDevice(){return navigator.userAgent.match(/ip(hone|ad|od)/i)&&!navigator.userAgent.match(/(iemobile)[\/\s]?([\w\.]*)/i)}static isCordova(){return-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),kA=(()=>{class t{constructor(){this.nativeFullscreen=!0,this.isFullscreen=!1,this.onChangeFullscreen=new Fc}init(t,e){this.videogularElement=t,this.medias=e;const n={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",onchange:"fullscreenchange",onerror:"fullscreenerror"},newWebkit:{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",onchange:"webkitfullscreenchange",onerror:"webkitfullscreenerror"},oldWebkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",onchange:"webkitfullscreenchange",onerror:"webkitfullscreenerror"},moz:{enabled:"mozFullScreen",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",onchange:"mozfullscreenchange",onerror:"mozfullscreenerror"},ios:{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitEnterFullscreen",exit:"webkitExitFullscreen",onchange:"webkitendfullscreen",onerror:"webkitfullscreenerror"},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",onchange:"MSFullscreenChange",onerror:"MSFullscreenError"}};for(const r in n)if(n[r].enabled in document){this.polyfill=n[r];break}if(PA.isiOSDevice()&&(this.polyfill=n.ios),this.isAvailable=null!=this.polyfill,null==this.polyfill)return;let i;switch(this.polyfill.onchange){case"mozfullscreenchange":i=document;break;case"webkitendfullscreen":i=this.medias.toArray()[0].elem;break;default:i=t}this.fsChangeSubscription=AA(i,this.polyfill.onchange).subscribe(()=>{this.onFullscreenChange()})}onFullscreenChange(){this.isFullscreen=!!document[this.polyfill.element],this.onChangeFullscreen.emit(this.isFullscreen)}toggleFullscreen(t=null){this.isFullscreen?this.exit():this.request(t)}request(t){t||(t=this.videogularElement),this.isFullscreen=!0,this.onChangeFullscreen.emit(!0),this.isAvailable&&this.nativeFullscreen&&(PA.isMobileDevice()?((!this.polyfill.enabled&&t===this.videogularElement||PA.isiOSDevice())&&(t=this.medias.toArray()[0].elem),this.enterElementInFullScreen(t)):this.enterElementInFullScreen(this.videogularElement))}enterElementInFullScreen(t){t[this.polyfill.request]()}exit(){this.isFullscreen=!1,this.onChangeFullscreen.emit(!1),this.isAvailable&&this.nativeFullscreen&&document[this.polyfill.exit]()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),DA=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.VG_ABORT="abort",t.VG_CAN_PLAY="canplay",t.VG_CAN_PLAY_THROUGH="canplaythrough",t.VG_DURATION_CHANGE="durationchange",t.VG_EMPTIED="emptied",t.VG_ENCRYPTED="encrypted",t.VG_ENDED="ended",t.VG_ERROR="error",t.VG_LOADED_DATA="loadeddata",t.VG_LOADED_METADATA="loadedmetadata",t.VG_LOAD_START="loadstart",t.VG_PAUSE="pause",t.VG_PLAY="play",t.VG_PLAYING="playing",t.VG_PROGRESS="progress",t.VG_RATE_CHANGE="ratechange",t.VG_SEEK="seek",t.VG_SEEKED="seeked",t.VG_SEEKING="seeking",t.VG_STALLED="stalled",t.VG_SUSPEND="suspend",t.VG_TIME_UPDATE="timeupdate",t.VG_VOLUME_CHANGE="volumechange",t.VG_WAITING="waiting",t.VG_LOAD="load",t.VG_ENTER="enter",t.VG_EXIT="exit",t.VG_START_ADS="startads",t.VG_END_ADS="endads",t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),OA=(()=>{class t{constructor(t){this.ref=t,this.onEnterCuePoint=new Fc,this.onUpdateCuePoint=new Fc,this.onExitCuePoint=new Fc,this.onCompleteCuePoint=new Fc,this.subscriptions=[],this.cuesSubscriptions=[],this.totalCues=0}ngOnInit(){this.onLoad$=AA(this.ref.nativeElement,DA.VG_LOAD),this.subscriptions.push(this.onLoad$.subscribe(this.onLoad.bind(this)))}onLoad(t){const e=t.target.track.cues;this.ref.nativeElement.cues=e,this.updateCuePoints(e)}updateCuePoints(t){this.cuesSubscriptions.forEach(t=>t.unsubscribe());for(let e=0,n=t.length;e<n;e++)this.onEnter$=AA(t[e],DA.VG_ENTER),this.cuesSubscriptions.push(this.onEnter$.subscribe(this.onEnter.bind(this))),this.onExit$=AA(t[e],DA.VG_EXIT),this.cuesSubscriptions.push(this.onExit$.subscribe(this.onExit.bind(this)))}onEnter(t){this.onEnterCuePoint.emit(t.target)}onExit(t){this.onExitCuePoint.emit(t.target)}ngDoCheck(){this.ref.nativeElement.track&&this.ref.nativeElement.track.cues&&this.totalCues!==this.ref.nativeElement.track.cues.length&&(this.totalCues=this.ref.nativeElement.track.cues.length,this.ref.nativeElement.cues=this.ref.nativeElement.track.cues,this.updateCuePoints(this.ref.nativeElement.track.cues))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl))},t.\u0275dir=_e({type:t,selectors:[["","vgCuePoints",""]],outputs:{onEnterCuePoint:"onEnterCuePoint",onUpdateCuePoint:"onUpdateCuePoint",onExitCuePoint:"onExitCuePoint",onCompleteCuePoint:"onCompleteCuePoint"}}),t})(),RA=(()=>{class t{constructor(t,e){this.api=t,this.ref=e,this.state=SA.VG_PAUSED,this.time={current:0,total:0,left:0},this.buffer={end:0},this.canPlay=!1,this.canPlayThrough=!1,this.isMetadataLoaded=!1,this.isWaiting=!1,this.isCompleted=!1,this.isLive=!1,this.isBufferDetected=!1,this.checkInterval=200,this.currentPlayPos=0,this.lastPlayPos=0,this.playAtferSync=!1,this.bufferDetected=new C}ngOnInit(){this.elem=this.vgMedia.nodeName?this.vgMedia:this.vgMedia.elem,this.api.registerMedia(this),this.subscriptions={abort:AA(this.elem,DA.VG_ABORT),canPlay:AA(this.elem,DA.VG_CAN_PLAY),canPlayThrough:AA(this.elem,DA.VG_CAN_PLAY_THROUGH),durationChange:AA(this.elem,DA.VG_DURATION_CHANGE),emptied:AA(this.elem,DA.VG_EMPTIED),encrypted:AA(this.elem,DA.VG_ENCRYPTED),ended:AA(this.elem,DA.VG_ENDED),error:AA(this.elem,DA.VG_ERROR),loadedData:AA(this.elem,DA.VG_LOADED_DATA),loadedMetadata:AA(this.elem,DA.VG_LOADED_METADATA),loadStart:AA(this.elem,DA.VG_LOAD_START),pause:AA(this.elem,DA.VG_PAUSE),play:AA(this.elem,DA.VG_PLAY),playing:AA(this.elem,DA.VG_PLAYING),progress:AA(this.elem,DA.VG_PROGRESS),rateChange:AA(this.elem,DA.VG_RATE_CHANGE),seeked:AA(this.elem,DA.VG_SEEKED),seeking:AA(this.elem,DA.VG_SEEKING),stalled:AA(this.elem,DA.VG_STALLED),suspend:AA(this.elem,DA.VG_SUSPEND),timeUpdate:AA(this.elem,DA.VG_TIME_UPDATE),volumeChange:AA(this.elem,DA.VG_VOLUME_CHANGE),waiting:AA(this.elem,DA.VG_WAITING),startAds:AA(window,DA.VG_START_ADS),endAds:AA(window,DA.VG_END_ADS),mutation:new b(t=>{const e=new MutationObserver(e=>{t.next(e)});return e.observe(this.elem,{childList:!0,attributes:!0}),()=>{e.disconnect()}}),bufferDetected:this.bufferDetected},this.mutationObs=this.subscriptions.mutation.subscribe(this.onMutation.bind(this)),this.canPlayObs=this.subscriptions.canPlay.subscribe(this.onCanPlay.bind(this)),this.canPlayThroughObs=this.subscriptions.canPlayThrough.subscribe(this.onCanPlayThrough.bind(this)),this.loadedMetadataObs=this.subscriptions.loadedMetadata.subscribe(this.onLoadMetadata.bind(this)),this.waitingObs=this.subscriptions.waiting.subscribe(this.onWait.bind(this)),this.progressObs=this.subscriptions.progress.subscribe(this.onProgress.bind(this)),this.endedObs=this.subscriptions.ended.subscribe(this.onComplete.bind(this)),this.playingObs=this.subscriptions.playing.subscribe(this.onStartPlaying.bind(this)),this.playObs=this.subscriptions.play.subscribe(this.onPlay.bind(this)),this.pauseObs=this.subscriptions.pause.subscribe(this.onPause.bind(this)),this.timeUpdateObs=this.subscriptions.timeUpdate.subscribe(this.onTimeUpdate.bind(this)),this.volumeChangeObs=this.subscriptions.volumeChange.subscribe(this.onVolumeChange.bind(this)),this.errorObs=this.subscriptions.error.subscribe(this.onError.bind(this)),this.vgMaster&&this.api.playerReadyEvent.subscribe(()=>{this.prepareSync()})}prepareSync(){const t=[];for(const e in this.api.medias)this.api.medias[e]&&t.push(this.api.medias[e].subscriptions.canPlay);this.canPlayAllSubscription=Fp(t).pipe(F((...t)=>{t.some(t=>4===t.target.readyState)&&!this.syncSubscription&&(this.startSync(),this.syncSubscription.unsubscribe())})).subscribe()}startSync(){this.syncSubscription=xA(0,1e3).subscribe(()=>{for(const t in this.api.medias)if(this.api.medias[t]!==this){const e=this.api.medias[t].currentTime-this.currentTime;e<-.3||e>.3?(this.playAtferSync=this.state===SA.VG_PLAYING,this.pause(),this.api.medias[t].pause(),this.api.medias[t].currentTime=this.currentTime):this.playAtferSync&&(this.play(),this.api.medias[t].play(),this.playAtferSync=!1)}})}onMutation(t){for(let e=0,n=t.length;e<n;e++){const n=t[e];if("attributes"===n.type&&"src"===n.attributeName){if(n.target.src&&n.target.src.length>0&&n.target.src.indexOf("blob:")<0){this.loadMedia();break}}else if("childList"===n.type&&n.removedNodes.length&&"source"===n.removedNodes[0].nodeName.toLowerCase()){this.loadMedia();break}}}loadMedia(){this.vgMedia.pause(),this.vgMedia.currentTime=0,this.stopBufferCheck(),this.isBufferDetected=!0,this.bufferDetected.next(this.isBufferDetected),setTimeout(()=>this.vgMedia.load(),10)}play(){if(!(this.playPromise||this.state!==SA.VG_PAUSED&&this.state!==SA.VG_ENDED))return this.playPromise=this.vgMedia.play(),this.playPromise&&this.playPromise.then&&this.playPromise.catch&&this.playPromise.then(()=>{this.playPromise=null}).catch(()=>{this.playPromise=null}),this.playPromise}pause(){this.playPromise?this.playPromise.then(()=>{this.vgMedia.pause()}):this.vgMedia.pause()}get id(){let t;return this.vgMedia&&(t=this.vgMedia.id),t}get duration(){return this.vgMedia.duration===1/0?this.specifiedDuration:this.vgMedia.duration}set currentTime(t){this.vgMedia.currentTime=t}get currentTime(){return this.vgMedia.currentTime}set volume(t){this.vgMedia.volume=t}get volume(){return this.vgMedia.volume}set playbackRate(t){this.vgMedia.playbackRate=t}get playbackRate(){return this.vgMedia.playbackRate}get buffered(){return this.vgMedia.buffered}get textTracks(){return this.vgMedia.textTracks}onCanPlay(t){this.isBufferDetected=!1,this.bufferDetected.next(this.isBufferDetected),this.canPlay=!0,this.ref.detectChanges()}onCanPlayThrough(t){this.isBufferDetected=!1,this.bufferDetected.next(this.isBufferDetected),this.canPlayThrough=!0,this.ref.detectChanges()}onLoadMetadata(t){this.isMetadataLoaded=!0,this.time={current:0,left:0,total:1e3*this.duration},this.state=SA.VG_PAUSED;const e=Math.round(this.time.total);this.isLive=e===1/0,this.ref.detectChanges()}onWait(t){this.isWaiting=!0,this.ref.detectChanges()}onComplete(t){this.isCompleted=!0,this.state=SA.VG_ENDED,this.ref.detectChanges()}onStartPlaying(t){this.state=SA.VG_PLAYING,this.ref.detectChanges()}onPlay(t){this.state=SA.VG_PLAYING,this.vgMaster&&(this.syncSubscription&&!this.syncSubscription.closed||this.startSync()),this.startBufferCheck(),this.ref.detectChanges()}onPause(t){this.state=SA.VG_PAUSED,this.vgMaster&&(this.playAtferSync||this.syncSubscription.unsubscribe()),this.stopBufferCheck(),this.ref.detectChanges()}onTimeUpdate(t){const e=this.buffered.length-1;this.time={current:1e3*this.currentTime,total:this.time.total,left:1e3*(this.duration-this.currentTime)},e>=0&&(this.buffer={end:1e3*this.buffered.end(e)}),this.ref.detectChanges()}onProgress(t){const e=this.buffered.length-1;e>=0&&(this.buffer={end:1e3*this.buffered.end(e)}),this.ref.detectChanges()}onVolumeChange(t){this.ref.detectChanges()}onError(t){this.ref.detectChanges()}bufferCheck(){const t=1/this.checkInterval;this.currentPlayPos=this.currentTime,!this.isBufferDetected&&this.currentPlayPos<this.lastPlayPos+t&&(this.isBufferDetected=!0),this.isBufferDetected&&this.currentPlayPos>this.lastPlayPos+t&&(this.isBufferDetected=!1),this.bufferDetected.closed||this.bufferDetected.next(this.isBufferDetected),this.lastPlayPos=this.currentPlayPos}startBufferCheck(){this.checkBufferSubscription=xA(0,this.checkInterval).subscribe(()=>{this.bufferCheck()})}stopBufferCheck(){this.checkBufferSubscription&&this.checkBufferSubscription.unsubscribe(),this.isBufferDetected=!1,this.bufferDetected.next(this.isBufferDetected)}seekTime(t,e=!1){let n;n=e?t*this.duration/100:t,this.currentTime=n}addTextTrack(t,e,n,i){const r=this.vgMedia.addTextTrack(t,e,n);return i&&(r.mode=i),r}ngOnDestroy(){this.vgMedia.src="",this.mutationObs.unsubscribe(),this.canPlayObs.unsubscribe(),this.canPlayThroughObs.unsubscribe(),this.loadedMetadataObs.unsubscribe(),this.waitingObs.unsubscribe(),this.progressObs.unsubscribe(),this.endedObs.unsubscribe(),this.playingObs.unsubscribe(),this.playObs.unsubscribe(),this.pauseObs.unsubscribe(),this.timeUpdateObs.unsubscribe(),this.volumeChangeObs.unsubscribe(),this.errorObs.unsubscribe(),this.checkBufferSubscription&&this.checkBufferSubscription.unsubscribe(),this.syncSubscription&&this.syncSubscription.unsubscribe(),this.bufferDetected.complete(),this.bufferDetected.unsubscribe(),this.api.unregisterMedia(this)}}return t.\u0275fac=function(e){return new(e||t)(Ns(MA),Ns(os))},t.\u0275dir=_e({type:t,selectors:[["","vgMedia",""]],inputs:{vgMedia:"vgMedia",vgMaster:"vgMaster"}}),t})(),IA=(()=>{class t{constructor(t,e,n,i){this.api=e,this.fsAPI=n,this.controlsHidden=i,this.isFullscreen=!1,this.isNativeFullscreen=!1,this.areControlsHidden=!1,this.onPlayerReady=new Fc,this.onMediaReady=new Fc,this.subscriptions=[],this.elem=t.nativeElement,this.api.registerElement(this.elem)}ngAfterContentInit(){this.medias.toArray().forEach(t=>{this.api.registerMedia(t)}),this.fsAPI.init(this.elem,this.medias),this.subscriptions.push(this.fsAPI.onChangeFullscreen.subscribe(this.onChangeFullscreen.bind(this))),this.subscriptions.push(this.controlsHidden.isHidden.subscribe(this.onHideControls.bind(this))),this.api.onPlayerReady(this.fsAPI),this.onPlayerReady.emit(this.api)}onChangeFullscreen(t){this.fsAPI.nativeFullscreen?this.isNativeFullscreen=t:(this.isFullscreen=t,this.zIndex=t?PA.getZIndex().toString():"auto")}onHideControls(t){this.areControlsHidden=t}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MA),Ns(kA),Ns(TA))},t.\u0275cmp=fe({type:t,selectors:[["vg-player"]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,RA,!1),2&t&&$c(i=tu())&&(e.medias=i)},hostVars:8,hostBindings:function(t,e){2&t&&(ga("z-index",e.zIndex),va("fullscreen",e.isFullscreen)("native-fullscreen",e.isNativeFullscreen)("controls-hidden",e.areControlsHidden))},outputs:{onPlayerReady:"onPlayerReady",onMediaReady:"onMediaReady"},features:[Xa([MA,kA,TA])],ngContentSelectors:EA,decls:1,vars:0,template:function(t,e){1&t&&(ia(),sa(0))},styles:["\n      vg-player {\n        font-family: 'videogular';\n        position: relative;\n        display: flex;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        background-color: black;\n      }\n      vg-player.fullscreen {\n        position: fixed;\n        left: 0;\n        top: 0;\n      }\n      vg-player.native-fullscreen.controls-hidden {\n        cursor: none;\n      }\n    "],encapsulation:2}),t})();const LA=[MA,TA,kA,PA,DA,SA];let FA=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[...LA],imports:[[Qd]]}),t})(),NA=(()=>{class t{constructor(t,e){this.API=e,this.checkInterval=50,this.currentPlayPos=0,this.lastPlayPos=0,this.subscriptions=[],this.isBuffering=!1,this.elem=t.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor),this.subscriptions.push(this.target.subscriptions.bufferDetected.subscribe(t=>this.onUpdateBuffer(t)))}onUpdateBuffer(t){this.isBuffering=t}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MA))},t.\u0275cmp=fe({type:t,selectors:[["vg-buffering"]],hostVars:2,hostBindings:function(t,e){2&t&&va("is-buffering",e.isBuffering)},inputs:{vgFor:"vgFor"},decls:3,vars:0,consts:[[1,"vg-buffering"],[1,"bufferingContainer"],[1,"loadingSpinner"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),Hs(2,"div",2),zs(),zs())},styles:["\n      vg-buffering {\n        display: none;\n        z-index: 201;\n      }\n      vg-buffering.is-buffering {\n        display: block;\n      }\n\n      .vg-buffering {\n        position: absolute;\n        display: block;\n        width: 100%;\n        height: 100%;\n      }\n      .vg-buffering .bufferingContainer {\n        width: 100%;\n        position: absolute;\n        cursor: pointer;\n        top: 50%;\n        margin-top: -50px;\n        zoom: 1;\n        filter: alpha(opacity=60);\n        opacity: 0.6;\n      }\n      /* Loading Spinner\n        * http://www.alessioatzeni.com/blog/css3-loading-animation-loop/\n        */\n      .vg-buffering .loadingSpinner {\n        background-color: rgba(0, 0, 0, 0);\n        border: 5px solid rgba(255, 255, 255, 1);\n        opacity: 0.9;\n        border-top: 5px solid rgba(0, 0, 0, 0);\n        border-left: 5px solid rgba(0, 0, 0, 0);\n        border-radius: 50px;\n        box-shadow: 0 0 35px #ffffff;\n        width: 50px;\n        height: 50px;\n        margin: 0 auto;\n        -moz-animation: spin 0.5s infinite linear;\n        -webkit-animation: spin 0.5s infinite linear;\n      }\n      .vg-buffering .loadingSpinner .stop {\n        -webkit-animation-play-state: paused;\n        -moz-animation-play-state: paused;\n      }\n      @-moz-keyframes spin {\n        0% {\n          -moz-transform: rotate(0deg);\n        }\n        100% {\n          -moz-transform: rotate(360deg);\n        }\n      }\n      @-moz-keyframes spinoff {\n        0% {\n          -moz-transform: rotate(0deg);\n        }\n        100% {\n          -moz-transform: rotate(-360deg);\n        }\n      }\n      @-webkit-keyframes spin {\n        0% {\n          -webkit-transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(360deg);\n        }\n      }\n      @-webkit-keyframes spinoff {\n        0% {\n          -webkit-transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(-360deg);\n        }\n      }\n    "],encapsulation:2}),t})(),BA=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd,FA]]}),t})();const UA=["*"],VA=["volumeBar"],jA=function(t){return{dragging:t}};function zA(t,e){if(1&t&&(js(0,"option",4),ka(1),zs()),2&t){const t=e.$implicit;Us("value",t.id)("selected",!0===t.selected),Cr(1),Oa(" ",t.label," ")}}function HA(t,e){1&t&&(js(0,"span"),ka(1,"LIVE"),zs())}function GA(t,e){if(1&t&&(js(0,"span"),ka(1),Oc(2,"vgUtc"),zs()),2&t){const t=ea();Cr(1),Da(function(t,e,n,i){const r=nn(),o=qe(r,2);return Lc(r,Ic(r,2)?Dc(r,dn(),1,o.transform,n,i,o):o.transform(n,i))}(0,0,t.getTime(),t.vgFormat))}}function WA(t,e){if(1&t&&(js(0,"option",4),ka(1),zs()),2&t){const t=e.$implicit,n=ea();Us("value",t.qualityIndex)("selected",t.qualityIndex===(null==n.bitrateSelected?null:n.bitrateSelected.qualityIndex)),Cr(1),Oa(" ",t.label," ")}}function qA(t,e){if(1&t&&Hs(0,"span",2),2&t){const t=e.$implicit;ga("width",null==t.$$style?null:t.$$style.width)("left",null==t.$$style?null:t.$$style.left)}}function $A(t,e){1&t&&Hs(0,"span",2)}let YA=(()=>{class t{constructor(t,e,n){this.API=t,this.hidden=n,this.isAdsPlaying="initial",this.hideControls=!1,this.vgAutohide=!1,this.vgAutohideTime=3,this.subscriptions=[],this.elem=e.nativeElement}ngOnInit(){this.mouseMove$=AA(this.API.videogularElement,"mousemove"),this.subscriptions.push(this.mouseMove$.subscribe(this.show.bind(this))),this.touchStart$=AA(this.API.videogularElement,"touchstart"),this.subscriptions.push(this.touchStart$.subscribe(this.show.bind(this))),this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor),this.subscriptions.push(this.target.subscriptions.play.subscribe(this.onPlay.bind(this))),this.subscriptions.push(this.target.subscriptions.pause.subscribe(this.onPause.bind(this))),this.subscriptions.push(this.target.subscriptions.startAds.subscribe(this.onStartAds.bind(this))),this.subscriptions.push(this.target.subscriptions.endAds.subscribe(this.onEndAds.bind(this)))}ngAfterViewInit(){this.vgAutohide?this.hide():this.show()}onPlay(){this.vgAutohide&&this.hide()}onPause(){clearTimeout(this.timer),this.hideControls=!1,this.hidden.state(!1)}onStartAds(){this.isAdsPlaying="none"}onEndAds(){this.isAdsPlaying="initial"}hide(){this.vgAutohide&&(clearTimeout(this.timer),this.hideAsync())}show(){clearTimeout(this.timer),this.hideControls=!1,this.hidden.state(!1),this.vgAutohide&&this.hideAsync()}hideAsync(){this.API.state===SA.VG_PLAYING&&(this.timer=setTimeout(()=>{this.hideControls=!0,this.hidden.state(!0)},1e3*this.vgAutohideTime))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(MA),Ns(tl),Ns(TA))},t.\u0275cmp=fe({type:t,selectors:[["vg-controls"]],hostVars:4,hostBindings:function(t,e){2&t&&(ga("pointer-events",e.isAdsPlaying),va("hide",e.hideControls))},inputs:{vgAutohide:"vgAutohide",vgAutohideTime:"vgAutohideTime",vgFor:"vgFor"},ngContentSelectors:UA,decls:1,vars:0,template:function(t,e){1&t&&(ia(),sa(0))},styles:["\n      vg-controls {\n        position: absolute;\n        display: flex;\n        width: 100%;\n        height: 50px;\n        z-index: 300;\n        bottom: 0;\n        background-color: rgba(0, 0, 0, 0.5);\n        -webkit-transition: bottom 1s;\n        -khtml-transition: bottom 1s;\n        -moz-transition: bottom 1s;\n        -ms-transition: bottom 1s;\n        transition: bottom 1s;\n      }\n      vg-controls.hide {\n        bottom: -50px;\n      }\n    "],encapsulation:2}),t})(),QA=(()=>{class t{constructor(t,e){this.API=e,this.subscriptions=[],this.elem=t.nativeElement,this.isDragging=!1}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor),this.ariaValue=100*this.getVolume()}onClick(t){this.setVolume(this.calculateVolume(t.clientX))}onMouseDown(t){this.mouseDownPosX=t.clientX,this.isDragging=!0}onDrag(t){this.isDragging&&this.setVolume(this.calculateVolume(t.clientX))}onStopDrag(t){this.isDragging&&(this.isDragging=!1,this.mouseDownPosX===t.clientX&&this.setVolume(this.calculateVolume(t.clientX)))}arrowAdjustVolume(t){38===t.keyCode||39===t.keyCode?(t.preventDefault(),this.setVolume(Math.max(0,Math.min(100,100*this.getVolume()+10)))):37!==t.keyCode&&40!==t.keyCode||(t.preventDefault(),this.setVolume(Math.max(0,Math.min(100,100*this.getVolume()-10))))}calculateVolume(t){const e=this.volumeBarRef.nativeElement.getBoundingClientRect();return(t-e.left)/e.width*100}setVolume(t){this.target.volume=Math.max(0,Math.min(1,t/100)),this.ariaValue=100*this.target.volume}getVolume(){return this.target?this.target.volume:0}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MA))},t.\u0275cmp=fe({type:t,selectors:[["vg-volume"]],viewQuery:function(t,e){var n;1&t&&Yc(VA,!0),2&t&&$c(n=tu())&&(e.volumeBarRef=n.first)},hostBindings:function(t,e){1&t&&Xs("mousemove",(function(t){return e.onDrag(t)}),!1,Kn)("mouseup",(function(t){return e.onStopDrag(t)}),!1,Kn)("keydown",(function(t){return e.arrowAdjustVolume(t)}))},inputs:{vgFor:"vgFor"},decls:5,vars:9,consts:[["tabindex","0","role","slider","aria-label","volume level","aria-level","polite","aria-valuemin","0","aria-valuemax","100","aria-orientation","horizontal",1,"volumeBar",3,"click","mousedown"],["volumeBar",""],[1,"volumeBackground",3,"ngClass"],[1,"volumeValue"],[1,"volumeKnob"]],template:function(t,e){1&t&&(js(0,"div",0,1),Xs("click",(function(t){return e.onClick(t)}))("mousedown",(function(t){return e.onMouseDown(t)})),js(2,"div",2),Hs(3,"div",3),Hs(4,"div",4),zs(),zs()),2&t&&(Rs("aria-valuenow",e.ariaValue)("aria-valuetext",e.ariaValue+"%"),Cr(2),Us("ngClass",Sc(7,jA,e.isDragging)),Cr(1),ga("width",85*e.getVolume()+"%"),Cr(1),ga("left",85*e.getVolume()+"%"))},directives:[ud],styles:["\n      vg-volume {\n        -webkit-touch-callout: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        display: flex;\n        justify-content: center;\n        height: 50px;\n        width: 100px;\n        cursor: pointer;\n        color: white;\n        line-height: 50px;\n      }\n      vg-volume .volumeBar {\n        position: relative;\n        display: flex;\n        flex-grow: 1;\n        align-items: center;\n      }\n      vg-volume .volumeBackground {\n        display: flex;\n        flex-grow: 1;\n        height: 5px;\n        pointer-events: none;\n        background-color: #333;\n      }\n      vg-volume .volumeValue {\n        display: flex;\n        height: 5px;\n        pointer-events: none;\n        background-color: #fff;\n        transition: all 0.2s ease-out;\n      }\n      vg-volume .volumeKnob {\n        position: absolute;\n        width: 15px;\n        height: 15px;\n        left: 0;\n        top: 50%;\n        transform: translateY(-50%);\n        border-radius: 15px;\n        pointer-events: none;\n        background-color: #fff;\n        transition: all 0.2s ease-out;\n      }\n      vg-volume .volumeBackground.dragging .volumeValue,\n      vg-volume .volumeBackground.dragging .volumeKnob {\n        transition: none;\n      }\n    "],encapsulation:2}),t})(),XA=(()=>{class t{constructor(t,e){this.API=e,this.subscriptions=[],this.elem=t.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor);const t=Array.from(this.API.getMasterMedia().elem.children).filter(t=>"TRACK"===t.tagName).filter(t=>"subtitles"===t.kind).map(t=>({label:t.label,selected:!0===t.default,id:t.srclang}));this.tracks=[...t,{id:null,label:"Off",selected:t.every(t=>!1===t.selected)}];const e=this.tracks.filter(t=>!0===t.selected)[0];this.trackSelected=e.id,this.ariaValue=e.label}selectTrack(t){this.trackSelected="null"===t?null:t,this.ariaValue="No track selected",Array.from(this.API.getMasterMedia().elem.textTracks).forEach(e=>{e.language===t?(this.ariaValue=e.label,e.mode="showing"):e.mode="hidden"})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MA))},t.\u0275cmp=fe({type:t,selectors:[["vg-track-selector"]],inputs:{vgFor:"vgFor"},decls:5,vars:5,consts:[[1,"container"],[1,"track-selected"],["tabindex","0","aria-label","track selector",1,"trackSelector",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),ka(2),zs(),js(3,"select",2),Xs("change",(function(t){return e.selectTrack(t.target.value)})),Ls(4,zA,2,3,"option",3),zs(),zs()),2&t&&(Cr(1),va("vg-icon-closed_caption",!e.trackSelected),Cr(1),Oa(" ",e.trackSelected||""," "),Cr(1),Rs("aria-valuetext",e.ariaValue),Cr(1),Us("ngForOf",e.tracks))},directives:[pd],styles:["\n      vg-track-selector {\n        -webkit-touch-callout: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        display: flex;\n        justify-content: center;\n        width: 50px;\n        height: 50px;\n        cursor: pointer;\n        color: white;\n        line-height: 50px;\n      }\n      vg-track-selector .container {\n        position: relative;\n        display: flex;\n        flex-grow: 1;\n        align-items: center;\n        padding: 0;\n        margin: 5px;\n      }\n      vg-track-selector select.trackSelector {\n        width: 50px;\n        padding: 5px 8px;\n        border: none;\n        background: none;\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        color: transparent;\n        font-size: 16px;\n      }\n      vg-track-selector select.trackSelector::-ms-expand {\n        display: none;\n      }\n      vg-track-selector select.trackSelector option {\n        color: #000;\n      }\n      vg-track-selector .track-selected {\n        position: absolute;\n        width: 100%;\n        height: 50px;\n        top: -6px;\n        text-align: center;\n        text-transform: uppercase;\n        font-family: Helvetica Neue, Helvetica, Arial, sans-serif;\n        padding-top: 2px;\n        pointer-events: none;\n      }\n      vg-track-selector .vg-icon-closed_caption:before {\n        width: 100%;\n      }\n    "],encapsulation:2}),t})(),KA=(()=>{class t{transform(t,e){let n=new Date(t),i=e,r=n.getUTCSeconds(),o=n.getUTCMinutes(),s=n.getUTCHours();return r<10&&(r="0"+r),o<10&&(o="0"+o),s<10&&(s="0"+s),i=i.replace(/ss/g,r),i=i.replace(/mm/g,o),i=i.replace(/hh/g,s),i}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=we({name:"vgUtc",type:t,pure:!0}),t})(),ZA=(()=>{class t{constructor(t,e){this.API=e,this.vgProperty="current",this.vgFormat="mm:ss",this.subscriptions=[],this.elem=t.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor)}getTime(){let t=0;return this.target&&(t=Math.round(this.target.time[this.vgProperty]),t=isNaN(t)||this.target.isLive?0:t),t}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MA))},t.\u0275cmp=fe({type:t,selectors:[["vg-time-display"]],inputs:{vgProperty:"vgProperty",vgFormat:"vgFormat",vgFor:"vgFor"},ngContentSelectors:UA,decls:3,vars:2,consts:[[4,"ngIf"]],template:function(t,e){1&t&&(ia(),Ls(0,HA,2,0,"span",0),Ls(1,GA,3,4,"span",0),sa(2)),2&t&&(Us("ngIf",null==e.target?null:e.target.isLive),Cr(1),Us("ngIf",!(null!=e.target&&e.target.isLive)))},directives:[md],pipes:[KA],styles:["\n      vg-time-display {\n        -webkit-touch-callout: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        display: flex;\n        justify-content: center;\n        height: 50px;\n        width: 60px;\n        cursor: pointer;\n        color: white;\n        line-height: 50px;\n        pointer-events: none;\n        font-family: Helvetica Neue, Helvetica, Arial, sans-serif;\n      }\n    "],encapsulation:2}),t})(),JA=(()=>{class t{constructor(t,e,n){this.API=e,this.hideScrubBar=!1,this.vgSlider=!0,this.isSeeking=!1,this.wasPlaying=!1,this.subscriptions=[],this.elem=t.nativeElement,this.subscriptions.push(n.isHidden.subscribe(t=>this.onHideScrubBar(t)))}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor)}seekStart(){this.target.canPlay&&(this.isSeeking=!0,this.target.state===SA.VG_PLAYING&&(this.wasPlaying=!0),this.target.pause())}seekMove(t){if(this.isSeeking){const e=Math.max(Math.min(100*t/this.elem.scrollWidth,99.9),0);this.target.time.current=e*this.target.time.total/100,this.target.seekTime(e,!0)}}seekEnd(t){if(this.isSeeking=!1,this.target.canPlay){const e=Math.max(Math.min(100*t/this.elem.scrollWidth,99.9),0);this.target.seekTime(e,!0),this.wasPlaying&&(this.wasPlaying=!1,this.target.play())}}touchEnd(){this.isSeeking=!1,this.wasPlaying&&(this.wasPlaying=!1,this.target.play())}getTouchOffset(t){let e=0,n=t.target;for(;n;)e+=n.offsetLeft,n=n.offsetParent;return t.touches[0].pageX-e}onMouseDownScrubBar(t){this.target&&(this.target.isLive||(this.vgSlider?this.seekStart():this.seekEnd(t.offsetX)))}onMouseMoveScrubBar(t){this.target&&!this.target.isLive&&this.vgSlider&&this.isSeeking&&this.seekMove(t.offsetX)}onMouseUpScrubBar(t){this.target&&!this.target.isLive&&this.vgSlider&&this.isSeeking&&this.seekEnd(t.offsetX)}onTouchStartScrubBar(t){this.target&&(this.target.isLive||(this.vgSlider?this.seekStart():this.seekEnd(this.getTouchOffset(t))))}onTouchMoveScrubBar(t){this.target&&!this.target.isLive&&this.vgSlider&&this.isSeeking&&this.seekMove(this.getTouchOffset(t))}onTouchCancelScrubBar(t){this.target&&!this.target.isLive&&this.vgSlider&&this.isSeeking&&this.touchEnd()}onTouchEndScrubBar(t){this.target&&!this.target.isLive&&this.vgSlider&&this.isSeeking&&this.touchEnd()}arrowAdjustVolume(t){this.target&&(38===t.keyCode||39===t.keyCode?(t.preventDefault(),this.target.seekTime((this.target.time.current+5e3)/1e3,!1)):37!==t.keyCode&&40!==t.keyCode||(t.preventDefault(),this.target.seekTime((this.target.time.current-5e3)/1e3,!1)))}getPercentage(){return this.target?Math.round(100*this.target.time.current/this.target.time.total)+"%":"0%"}onHideScrubBar(t){this.hideScrubBar=t}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MA),Ns(TA))},t.\u0275cmp=fe({type:t,selectors:[["vg-scrub-bar"]],hostVars:2,hostBindings:function(t,e){1&t&&Xs("mousedown",(function(t){return e.onMouseDownScrubBar(t)}))("mousemove",(function(t){return e.onMouseMoveScrubBar(t)}),!1,Kn)("mouseup",(function(t){return e.onMouseUpScrubBar(t)}),!1,Kn)("touchstart",(function(t){return e.onTouchStartScrubBar(t)}))("touchmove",(function(t){return e.onTouchMoveScrubBar(t)}),!1,Kn)("touchcancel",(function(t){return e.onTouchCancelScrubBar(t)}),!1,Kn)("touchend",(function(t){return e.onTouchEndScrubBar(t)}),!1,Kn)("keydown",(function(t){return e.arrowAdjustVolume(t)})),2&t&&va("hide",e.hideScrubBar)},inputs:{vgSlider:"vgSlider",vgFor:"vgFor"},ngContentSelectors:UA,decls:2,vars:2,consts:[["tabindex","0","role","slider","aria-label","scrub bar","aria-level","polite","aria-valuemin","0","aria-valuemax","100",1,"scrubBar"]],template:function(t,e){1&t&&(ia(),js(0,"div",0),sa(1),zs()),2&t&&Rs("aria-valuenow",e.getPercentage())("aria-valuetext",e.getPercentage())},styles:["\n      vg-scrub-bar {\n        -webkit-touch-callout: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        position: absolute;\n        width: 100%;\n        height: 5px;\n        bottom: 50px;\n        margin: 0;\n        cursor: pointer;\n        align-items: center;\n        background: rgba(0, 0, 0, 0.75);\n        z-index: 250;\n        -webkit-transition: bottom 1s, opacity 0.5s;\n        -khtml-transition: bottom 1s, opacity 0.5s;\n        -moz-transition: bottom 1s, opacity 0.5s;\n        -ms-transition: bottom 1s, opacity 0.5s;\n        transition: bottom 1s, opacity 0.5s;\n      }\n      vg-scrub-bar .scrubBar {\n        position: relative;\n        display: flex;\n        flex-grow: 1;\n        align-items: center;\n        height: 100%;\n      }\n      vg-controls vg-scrub-bar {\n        position: relative;\n        bottom: 0;\n        background: transparent;\n        height: 50px;\n        flex-grow: 1;\n        flex-basis: 0;\n        margin: 0 10px;\n        -webkit-transition: initial;\n        -khtml-transition: initial;\n        -moz-transition: initial;\n        -ms-transition: initial;\n        transition: initial;\n      }\n      vg-scrub-bar.hide {\n        bottom: 0;\n        opacity: 0;\n      }\n      vg-controls vg-scrub-bar.hide {\n        bottom: initial;\n        opacity: initial;\n      }\n    "],encapsulation:2}),t})(),tx=(()=>{class t{constructor(t,e){this.API=e,this.onBitrateChange=new Fc,this.subscriptions=[],this.elem=t.nativeElement}ngOnInit(){}ngOnChanges(t){t.bitrates.currentValue&&t.bitrates.currentValue.length&&this.bitrates.forEach(t=>t.label=t.label||Math.round(t.bitrate/1e3).toString())}selectBitrate(t){this.bitrateSelected=this.bitrates[t],this.onBitrateChange.emit(this.bitrates[t])}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MA))},t.\u0275cmp=fe({type:t,selectors:[["vg-quality-selector"]],inputs:{bitrates:"bitrates"},outputs:{onBitrateChange:"onBitrateChange"},features:[Re],decls:5,vars:5,consts:[[1,"container"],[1,"quality-selected"],["tabindex","0","aria-label","quality selector",1,"quality-selector",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),ka(2),zs(),js(3,"select",2),Xs("change",(function(t){return e.selectBitrate(t.target.value)})),Ls(4,WA,2,3,"option",3),zs(),zs()),2&t&&(Cr(1),va("vg-icon-hd",!e.bitrateSelected),Cr(1),Oa(" ",null==e.bitrateSelected?null:e.bitrateSelected.label," "),Cr(1),Rs("aria-valuetext",e.ariaValue),Cr(1),Us("ngForOf",e.bitrates))},directives:[pd],styles:["\n      vg-quality-selector {\n        -webkit-touch-callout: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        display: flex;\n        justify-content: center;\n        width: 50px;\n        height: 50px;\n        cursor: pointer;\n        color: white;\n        line-height: 50px;\n      }\n      vg-quality-selector .container {\n        position: relative;\n        display: flex;\n        flex-grow: 1;\n        align-items: center;\n        padding: 0;\n        margin: 5px;\n      }\n      vg-quality-selector select.quality-selector {\n        width: 50px;\n        padding: 5px 8px;\n        border: none;\n        background: none;\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        color: transparent;\n        font-size: 16px;\n      }\n      vg-quality-selector select.quality-selector::-ms-expand {\n        display: none;\n      }\n      vg-quality-selector select.quality-selector option {\n        color: #000;\n      }\n      vg-quality-selector .quality-selected {\n        position: absolute;\n        width: 100%;\n        height: 50px;\n        top: -6px;\n        text-align: center;\n        text-transform: uppercase;\n        font-family: Helvetica Neue, Helvetica, Arial, sans-serif;\n        padding-top: 2px;\n        pointer-events: none;\n      }\n      vg-quality-selector .vg-icon-closed_caption:before {\n        width: 100%;\n      }\n    "],encapsulation:2}),t})(),ex=(()=>{class t{constructor(t,e,n){this.API=e,this.cdr=n,this.subscriptions=[],this.ariaValue=1,this.elem=t.nativeElement,this.playbackValues=["0.5","1.0","1.5","2.0"],this.playbackIndex=1}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor)}onClick(){this.updatePlaybackSpeed()}onKeyDown(t){13!==t.keyCode&&32!==t.keyCode||(t.preventDefault(),this.updatePlaybackSpeed())}updatePlaybackSpeed(){this.playbackIndex=++this.playbackIndex%this.playbackValues.length,this.target instanceof MA?this.target.playbackRate=this.playbackValues[this.playbackIndex]:this.target.playbackRate[this.vgFor]=this.playbackValues[this.playbackIndex],this.detectChanges()}getPlaybackRate(){return this.ariaValue=this.target?this.target.playbackRate:1,this.ariaValue}detectChanges(){try{this.cdr.detectChanges()}catch(e){console.warn(e)}}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MA),Ns(os))},t.\u0275cmp=fe({type:t,selectors:[["vg-playback-button"]],hostBindings:function(t,e){1&t&&Xs("click",(function(){return e.onClick()}))("keydown",(function(t){return e.onKeyDown(t)}))},inputs:{playbackValues:"playbackValues",vgFor:"vgFor"},decls:2,vars:2,consts:[["tabindex","0","role","button","aria-label","playback speed button",1,"button"]],template:function(t,e){1&t&&(js(0,"span",0),ka(1),zs()),2&t&&(Rs("aria-valuetext",e.ariaValue),Cr(1),Oa(" ",e.getPlaybackRate(),"x "))},styles:["\n      vg-playback-button {\n        -webkit-touch-callout: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        display: flex;\n        justify-content: center;\n        height: 50px;\n        width: 50px;\n        cursor: pointer;\n        color: white;\n        line-height: 50px;\n        font-family: Helvetica Neue, Helvetica, Arial, sans-serif;\n      }\n      vg-playback-button .button {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 50px;\n      }\n    "],encapsulation:2}),t})(),nx=(()=>{class t{constructor(t,e){this.API=e,this.subscriptions=[],this.ariaValue=SA.VG_PAUSED,this.elem=t.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor)}onClick(){this.playPause()}onKeyDown(t){13!==t.keyCode&&32!==t.keyCode||(t.preventDefault(),this.playPause())}playPause(){switch(this.getState()){case SA.VG_PLAYING:this.target.pause();break;case SA.VG_PAUSED:case SA.VG_ENDED:this.target.play()}}getState(){return this.ariaValue=this.target?this.target.state:SA.VG_PAUSED,this.ariaValue}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MA))},t.\u0275cmp=fe({type:t,selectors:[["vg-play-pause"]],hostBindings:function(t,e){1&t&&Xs("click",(function(){return e.onClick()}))("keydown",(function(t){return e.onKeyDown(t)}))},inputs:{vgFor:"vgFor"},decls:1,vars:6,consts:[["tabindex","0","role","button",1,"icon"]],template:function(t,e){1&t&&Hs(0,"div",0),2&t&&(va("vg-icon-pause","playing"===e.getState())("vg-icon-play_arrow","paused"===e.getState()||"ended"===e.getState()),Rs("aria-label","paused"===e.getState()?"play":"pause")("aria-valuetext",e.ariaValue))},styles:["\n      vg-play-pause {\n        -webkit-touch-callout: none;\n        -webkit-user-select: none;\n        -khtml-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        display: flex;\n        justify-content: center;\n        height: 50px;\n        width: 50px;\n        cursor: pointer;\n        color: white;\n        line-height: 50px;\n      }\n      vg-play-pause .icon {\n        pointer-events: none;\n      }\n    "],encapsulation:2}),t})(),ix=(()=>{class t{constructor(t,e){this.API=e,this.subscriptions=[],this.ariaValue="unmuted",this.elem=t.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor),this.currentVolume=this.target.volume}onClick(){this.changeMuteState()}onKeyDown(t){13!==t.keyCode&&32!==t.keyCode||(t.preventDefault(),this.changeMuteState())}changeMuteState(){const t=this.getVolume();0===t?(0===this.target.volume&&0===this.currentVolume&&(this.currentVolume=1),this.target.volume=this.currentVolume):(this.currentVolume=t,this.target.volume=0)}getVolume(){const t=this.target?this.target.volume:0;return this.ariaValue=t?"unmuted":"muted",t}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MA))},t.\u0275cmp=fe({type:t,selectors:[["vg-mute"]],hostBindings:function(t,e){1&t&&Xs("click",(function(){return e.onClick()}))("keydown",(function(t){return e.onKeyDown(t)}))},inputs:{vgFor:"vgFor"},decls:1,vars:9,consts:[["tabindex","0","role","button","aria-label","mute button",1,"icon"]],template:function(t,e){1&t&&Hs(0,"div",0),2&t&&(va("vg-icon-volume_up",e.getVolume()>=.75)("vg-icon-volume_down",e.getVolume()>=.25&&e.getVolume()<.75)("vg-icon-volume_mute",e.getVolume()>0&&e.getVolume()<.25)("vg-icon-volume_off",0===e.getVolume()),Rs("aria-valuetext",e.ariaValue))},styles:["\n      vg-mute {\n        -webkit-touch-callout: none;\n        -webkit-user-select: none;\n        -khtml-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        display: flex;\n        justify-content: center;\n        height: 50px;\n        width: 50px;\n        cursor: pointer;\n        color: white;\n        line-height: 50px;\n      }\n      vg-mute .icon {\n        pointer-events: none;\n      }\n    "],encapsulation:2}),t})(),rx=(()=>{class t{constructor(t,e,n){this.API=e,this.fsAPI=n,this.isFullscreen=!1,this.subscriptions=[],this.ariaValue="normal mode",this.elem=t.nativeElement,this.subscriptions.push(this.fsAPI.onChangeFullscreen.subscribe(this.onChangeFullscreen.bind(this)))}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor)}onChangeFullscreen(t){this.ariaValue=t?"fullscreen mode":"normal mode",this.isFullscreen=t}onClick(){this.changeFullscreenState()}onKeyDown(t){13!==t.keyCode&&32!==t.keyCode||(t.preventDefault(),this.changeFullscreenState())}changeFullscreenState(){let t=this.target;this.target instanceof MA&&(t=null),this.fsAPI.toggleFullscreen(t)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MA),Ns(kA))},t.\u0275cmp=fe({type:t,selectors:[["vg-fullscreen"]],hostBindings:function(t,e){1&t&&Xs("click",(function(){return e.onClick()}))("keydown",(function(t){return e.onKeyDown(t)}))},decls:1,vars:5,consts:[["tabindex","0","role","button","aria-label","fullscreen button",1,"icon"]],template:function(t,e){1&t&&Hs(0,"div",0),2&t&&(va("vg-icon-fullscreen",!e.isFullscreen)("vg-icon-fullscreen_exit",e.isFullscreen),Rs("aria-valuetext",e.ariaValue))},styles:["\n      vg-fullscreen {\n        -webkit-touch-callout: none;\n        -webkit-user-select: none;\n        -khtml-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        display: flex;\n        justify-content: center;\n        height: 50px;\n        width: 50px;\n        cursor: pointer;\n        color: white;\n        line-height: 50px;\n      }\n      vg-fullscreen .icon {\n        pointer-events: none;\n      }\n    "],encapsulation:2}),t})(),ox=(()=>{class t{constructor(t,e){this.API=e,this.subscriptions=[],this.elem=t.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor)}getBufferTime(){let t="0%";return this.target&&this.target.buffer&&this.target.buffered.length&&(t=0===this.target.time.total?"0%":this.target.buffer.end/this.target.time.total*100+"%"),t}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MA))},t.\u0275cmp=fe({type:t,selectors:[["vg-scrub-bar-buffering-time"]],inputs:{vgFor:"vgFor"},decls:1,vars:2,consts:[[1,"background"]],template:function(t,e){1&t&&Hs(0,"div",0),2&t&&ga("width",e.getBufferTime())},styles:["\n      vg-scrub-bar-buffering-time {\n        display: flex;\n        width: 100%;\n        height: 5px;\n        pointer-events: none;\n        position: absolute;\n      }\n      vg-scrub-bar-buffering-time .background {\n        background-color: rgba(255, 255, 255, 0.3);\n      }\n      vg-controls vg-scrub-bar-buffering-time {\n        position: absolute;\n        top: calc(50% - 3px);\n      }\n      vg-controls vg-scrub-bar-buffering-time .background {\n        -webkit-border-radius: 2px;\n        -moz-border-radius: 2px;\n        border-radius: 2px;\n      }\n    "],encapsulation:2}),t})(),sx=(()=>{class t{constructor(t,e){this.API=e,this.onLoadedMetadataCalled=!1,this.cuePoints=[],this.subscriptions=[],this.totalCues=0,this.elem=t.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor),this.subscriptions.push(this.target.subscriptions.loadedMetadata.subscribe(this.onLoadedMetadata.bind(this))),this.onLoadedMetadataCalled&&this.onLoadedMetadata()}onLoadedMetadata(){if(this.vgCuePoints){this.cuePoints=[];for(let t=0,e=this.vgCuePoints.length;t<e;t++){const e=1e3*((this.vgCuePoints[t].endTime>=0?this.vgCuePoints[t].endTime:this.vgCuePoints[t].startTime+1)-this.vgCuePoints[t].startTime);let n="0",i="0";"number"==typeof e&&this.target.time.total&&(i=100*e/this.target.time.total+"%",n=100*this.vgCuePoints[t].startTime/Math.round(this.target.time.total/1e3)+"%"),this.vgCuePoints[t].$$style={width:i,left:n},this.cuePoints.push(this.vgCuePoints[t])}}}updateCuePoints(){this.target?this.onLoadedMetadata():this.onLoadedMetadataCalled=!0}ngOnChanges(t){t.vgCuePoints.currentValue&&this.updateCuePoints()}ngDoCheck(){this.vgCuePoints&&this.totalCues!==this.vgCuePoints.length&&(this.totalCues=this.vgCuePoints.length,this.updateCuePoints())}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MA))},t.\u0275cmp=fe({type:t,selectors:[["vg-scrub-bar-cue-points"]],inputs:{vgCuePoints:"vgCuePoints",vgFor:"vgFor"},features:[Re],decls:2,vars:1,consts:[[1,"cue-point-container"],["class","cue-point",3,"width","left",4,"ngFor","ngForOf"],[1,"cue-point"]],template:function(t,e){1&t&&(js(0,"div",0),Ls(1,qA,1,4,"span",1),zs()),2&t&&(Cr(1),Us("ngForOf",e.cuePoints))},directives:[pd],styles:["\n      vg-scrub-bar-cue-points {\n        display: flex;\n        width: 100%;\n        height: 5px;\n        pointer-events: none;\n        position: absolute;\n      }\n      vg-scrub-bar-cue-points .cue-point-container .cue-point {\n        position: absolute;\n        height: 5px;\n        background-color: rgba(255, 204, 0, 0.7);\n      }\n      vg-controls vg-scrub-bar-cue-points {\n        position: absolute;\n        top: calc(50% - 3px);\n      }\n    "],encapsulation:2}),t})(),ax=(()=>{class t{constructor(t,e){this.API=e,this.vgSlider=!1,this.subscriptions=[],this.elem=t.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor)}getPercentage(){return this.target?Math.round(100*this.target.time.current/this.target.time.total)+"%":"0%"}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MA))},t.\u0275cmp=fe({type:t,selectors:[["vg-scrub-bar-current-time"]],inputs:{vgSlider:"vgSlider",vgFor:"vgFor"},decls:2,vars:3,consts:[[1,"background"],["class","slider",4,"ngIf"],[1,"slider"]],template:function(t,e){1&t&&(Hs(0,"div",0),Ls(1,$A,1,0,"span",1)),2&t&&(ga("width",e.getPercentage()),Cr(1),Us("ngIf",e.vgSlider))},directives:[md],styles:["\n      vg-scrub-bar-current-time {\n        display: flex;\n        width: 100%;\n        height: 5px;\n        pointer-events: none;\n        position: absolute;\n      }\n      vg-scrub-bar-current-time .background {\n        background-color: white;\n      }\n      vg-controls vg-scrub-bar-current-time {\n        position: absolute;\n        top: calc(50% - 3px);\n        -webkit-border-radius: 2px;\n        -moz-border-radius: 2px;\n        border-radius: 2px;\n      }\n      vg-controls vg-scrub-bar-current-time .background {\n        border: 1px solid white;\n        -webkit-border-radius: 2px;\n        -moz-border-radius: 2px;\n        border-radius: 2px;\n      }\n      vg-scrub-bar-current-time .slider {\n        background: white;\n        height: 15px;\n        width: 15px;\n        border-radius: 50%;\n        box-shadow: 0px 0px 10px black;\n        margin-top: -5px;\n        margin-left: -10px;\n      }\n    "],encapsulation:2}),t})(),lx=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd,FA]]}),t})();const cx=function(t){return{"background-image":t,"background-repeat":"no-repeat","background-attachment":"fixed","background-size":"cover"}},ux=function(){return["/project/guidelines"]};let hx,dx=(()=>{class t{constructor(t){this.dbOperations=t,this.playlist=[{title:"Pale Blue Dot",src:"http://static.videogular.com/assets/videos/videogular.mp4",type:"video/mp4"},{title:"Big Buck Bunny",src:"http://static.videogular.com/assets/videos/big_buck_bunny_720p_h264.mov",type:"video/mp4"},{title:"Elephants Dream",src:"http://static.videogular.com/assets/videos/elephants-dream.mp4",type:"video/mp4"}],this.headingSize=4,this.video="",this.backgroundImage="",this.callImage="",this.currentIndex=0,this.currentItem=this.playlist[this.currentIndex],this.getScreenSize()}ngOnInit(){this.getHomeData()}onResize(t){let e=t.target.innerWidth;e<800&&(this.headingSize=1.5),e>800&&(this.headingSize=2.5),e>1e3&&(this.headingSize=3),e>1200&&(this.headingSize=4)}onPlayerReady(t){this.api=t,this.api.getDefaultMedia().subscriptions.loadedMetadata.subscribe(this.playVideo.bind(this)),this.api.getDefaultMedia().subscriptions.ended.subscribe(this.nextVideo.bind(this))}nextVideo(){this.currentIndex++,this.currentIndex===this.playlist.length&&(this.currentIndex=0),this.currentItem=this.playlist[this.currentIndex]}playVideo(){this.api.pause()}onClickPlaylistItem(t,e){this.currentIndex=e,this.currentItem=t}onMouseOver(){this.api.play()}onMouseOut(){this.api.pause()}getScreenSize(){let t=window.innerWidth;t<800&&(this.headingSize=1.5),t>800&&(this.headingSize=2.5),t>1e3&&(this.headingSize=3),t>1200&&(this.headingSize=4)}getHomeData(){this.dbOperations.getHomePageData().snapshotChanges().subscribe(t=>{let e=t.payload.data();this.video=e.video,this.backgroundImage=e.backgroundImage,this.callImage=e.call})}}return t.\u0275fac=function(e){return new(e||t)(Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-home"]],hostBindings:function(t,e){1&t&&Xs("resize",(function(t){return e.onResize(t)}),!1,Xn)},decls:83,vars:10,consts:[[1,"home",3,"resize"],[1,"home-bg",3,"ngStyle"],[1,"home-landing"],[1,"container-fluid","p-0"],[1,"home-heading"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-4"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-8"],[1,"home-info","p-3"],[1,"btn","btn-primary",3,"routerLink"],[1,"introduction","p-5"],[1,"about","p-3"],[1,"about-title","mb-0"],[1,"hr-rule","mt-1"],[1,"container"],[1,"submission","p-5"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-6","mt-3"],["alt","bobby pall photography african art in context","title","entrepreneur covid19",3,"src"],[1,"list-unstyled"],[1,"countries","py-5"],[1,"campaign-video"],[1,"mb-5","text-center"],[1,"spotlight-video"],["vg-theme","controller.config.theme.url",3,"onPlayerReady"],["vgProperty","current","vgFormat","mm:ss"],["vgProperty","total","vgFormat","mm:ss"],["id","singleVideo","preload","auto","crossorigin","",3,"vgMedia","src"],["media",""]],template:function(t,e){if(1&t&&(js(0,"div",0),Xs("resize",(function(t){return e.onResize(t)}),!1,Xn),js(1,"div",1),js(2,"div",2),js(3,"div",3),js(4,"div",4),js(5,"div",5),Hs(6,"div",6),js(7,"div",7),js(8,"div",8),js(9,"h3"),ka(10,"ARE YOU A PHOTOGRAPHER OR A VIDEOGRAPHER?"),zs(),js(11,"p"),ka(12,"What\u2019s your COVID-19 story? We\u2019re looking for photo and video submissions that showcase African resilience in the wake of the pandemic. "),zs(),js(13,"button",9),ka(14,"SHARE YOUR STORY "),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),js(15,"div",10),js(16,"div",11),js(17,"h3",12),ka(18,"ABOUT"),zs(),Hs(19,"hr",13),zs(),js(20,"div",14),js(21,"p"),ka(22," A global pandemic dramatically reshaped the world, our continent, and all our lives. But amid the disruption, we\u2019ve also seen hope. Innovators rising to respond to the challenges. Communities stepping up to practice the precautions required. Each of us doing what we can, and what we must, to keep going. Safely. The African Art in Context Call for Submissions seeks to tell those stories. Too often in crises, the narrative surrounding Africa is dominated by inordinate fear and negativity. This is our chance to shape a narrative that showcases to the world what we see everyday: the resilience, ingenuity, and beauty of a continent that is navigating COVID-19 with courage, commitment, and compassion. "),zs(),zs(),zs(),js(23,"div",15),js(24,"div",14),js(25,"div",5),js(26,"div",16),Hs(27,"img",17),zs(),js(28,"div",16),js(29,"h3"),ka(30,"CALL FOR SUBMISSION"),zs(),Hs(31,"hr",13),js(32,"ul",18),js(33,"li"),js(34,"strong"),ka(35,"Dates:"),zs(),ka(36," 9th October \u2013 31st December 2020"),zs(),js(37,"li"),js(38,"strong"),ka(39,"Theme:"),zs(),ka(40," African Resilience in the Wake of a Pandemic"),zs(),js(41,"li"),js(42,"strong"),ka(43,"Eligibility:"),zs(),ka(44," 18 \u2013 35 years"),zs(),js(45,"li"),js(46,"strong"),ka(47,"Categories: "),zs(),ka(48," Photography and Videography"),zs(),js(49,"li"),js(50,"strong"),ka(51,"Participating Countries:"),zs(),ka(52," Submissions are welcome from individuals based anywhere on the African continent and should reflect realities on the continent "),zs(),js(53,"li"),js(54,"strong"),ka(55,"Recognition:"),zs(),ka(56," USD 200 for every selected image and USD 400 for every selected video "),zs(),js(57,"li"),js(58,"strong"),ka(59,"Organisation:"),zs(),ka(60," Bobby Pall Photography in partnership with Mastercard Foundation "),zs(),zs(),zs(),zs(),zs(),zs(),js(61,"div",19),js(62,"div",14),Hs(63,"hr",13),js(64,"div",20),js(65,"h3",21),ka(66,"The Spotlight"),zs(),js(67,"div",22),js(68,"vg-player",23),Xs("onPlayerReady",(function(t){return e.onPlayerReady(t)})),Hs(69,"vg-buffering"),js(70,"vg-controls"),js(71,"vg-play-pause"),ka(72,"Play"),zs(),Hs(73,"vg-time-display",24),js(74,"vg-scrub-bar"),Hs(75,"vg-scrub-bar-current-time"),Hs(76,"vg-scrub-bar-buffering-time"),zs(),Hs(77,"vg-time-display",25),Hs(78,"vg-mute"),Hs(79,"vg-volume"),Hs(80,"vg-fullscreen"),zs(),Hs(81,"video",26,27),zs(),zs(),zs(),zs(),zs(),zs()),2&t){const t=Fs(82);Cr(1),Us("ngStyle",Sc(7,cx,"url("+e.backgroundImage+")")),Cr(8),ga("font-size",e.headingSize,"em"),Cr(4),Us("routerLink",Ec(9,ux)),Cr(14),aa("src",e.callImage,rr),Cr(54),Us("vgMedia",t)("src",e.video,rr)}},directives:[Cd,qg,IA,NA,YA,nx,ZA,JA,ax,ox,ix,QA,rx,RA],styles:[".home[_ngcontent-%COMP%]{height:100%;min-height:100vh}.home[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.home[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2em}.home[_ngcontent-%COMP%]   .introduction[_ngcontent-%COMP%]{background-color:#f5f5f5}.home[_ngcontent-%COMP%]   .introduction[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}.home[_ngcontent-%COMP%]   .home-landing[_ngcontent-%COMP%]{height:100%;min-height:100vh;background-color:transparent}.home[_ngcontent-%COMP%]   .home-landing[_ngcontent-%COMP%]   .home-heading[_ngcontent-%COMP%]{color:#fff;padding:5%}.home[_ngcontent-%COMP%]   .home-landing[_ngcontent-%COMP%]   .home-heading[_ngcontent-%COMP%]   .home-info[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6);width:90%;margin:200px auto 0}.home[_ngcontent-%COMP%]   .home-landing[_ngcontent-%COMP%]   .home-heading[_ngcontent-%COMP%]   .home-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{word-wrap:break-word;font-size:4em}.home[_ngcontent-%COMP%]   .home-landing[_ngcontent-%COMP%]   .home-heading[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-content:center;border-radius:250px 750px 250px 750px/750px 250px 750px 250px;height:60px;border:3px solid;background-color:transparent;color:teal;font-weight:bolder;border-image-slice:1;border-image-source:linear-gradient(90deg,teal 0,#006464)}.home[_ngcontent-%COMP%]   .covid-hq[_ngcontent-%COMP%]   .covid-hq-info[_ngcontent-%COMP%]{background:#fff;text-align:center}.home[_ngcontent-%COMP%]   .covid-hq[_ngcontent-%COMP%]   .covid-hq-info[_ngcontent-%COMP%]   .hashtag[_ngcontent-%COMP%]{color:teal}.home[_ngcontent-%COMP%]   .covid-hq[_ngcontent-%COMP%]   .covid-hq-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px}.home[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%], .home[_ngcontent-%COMP%]   .submission[_ngcontent-%COMP%]{background-color:#f5f5f5}.home[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}.home[_ngcontent-%COMP%]   .countries[_ngcontent-%COMP%]   .countries-bg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.home[_ngcontent-%COMP%]   .campaign-video[_ngcontent-%COMP%]{margin-top:100px;padding-bottom:100px}.home[_ngcontent-%COMP%]   .campaign-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:500px}.home[_ngcontent-%COMP%]   .campaign-video[_ngcontent-%COMP%]   vg-play-pause[_ngcontent-%COMP%]{color:#fff}.home[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{background-color:#1b1b1b}.home[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 auto;width:100px}"]}),t})();function px(t){return e=>e.lift(new fx(t))}class fx{constructor(t){this.notifier=t}call(t,e){const n=new mx(t),i=I(n,this.notifier);return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}class mx extends L{constructor(t){super(t),this.seenValue=!1}notifyNext(t,e,n,i,r){this.seenValue=!0,this.complete()}notifyComplete(){}}class gx{}function vx(t,e){return{type:7,name:t,definitions:e,options:{}}}function yx(t,e=null){return{type:4,styles:e,timings:t}}function bx(t,e=null){return{type:3,steps:t,options:e}}function _x(t,e=null){return{type:2,steps:t,options:e}}function wx(t){return{type:6,styles:t,offset:null}}function Ax(t,e,n){return{type:0,name:t,styles:e,options:n}}function xx(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Cx(t=null){return{type:9,options:t}}function Ex(t,e,n=null){return{type:11,selector:t,animation:e,options:n}}function Sx(t){Promise.resolve(null).then(t)}class Mx{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Sx(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Tx{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,i=0;const r=this.players.length;0==r?Sx(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==r&&this._onFinish()}),t.onDestroy(()=>{++n==r&&this._onDestroy()}),t.onStart(()=>{++i==r&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function Px(t){return null!=t&&"false"!==`${t}`}function kx(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function Dx(t){return Array.isArray(t)?t:[t]}function Ox(t){return null==t?"":"string"==typeof t?t:`${t}px`}function Rx(t){return t instanceof tl?t.nativeElement:t}class Ix{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new Lx(t,this.durationSelector))}}class Lx extends L{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const i=I(this,n);!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))}notifyNext(t,e,n,i){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function Fx(t,e=Rv){return n=()=>xA(t,e),function(t){return t.lift(new Ix(n))};var n}class Nx{call(t,e){return e.subscribe(new Bx(t))}}class Bx extends m{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}try{hx="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(NG){hx=!1}let Ux,Vx=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Xd(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!hx)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(Yt(hu,8))},t.\u0275prov=ut({factory:function(){return new t(Yt(hu,8))},token:t,providedIn:"root"}),t})(),jx=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)}}),t})();const zx=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Hx(){if(Ux)return Ux;if("object"!=typeof document||!document)return Ux=new Set(zx),Ux;let t=document.createElement("input");return Ux=new Set(zx.filter(e=>(t.setAttribute("type",e),t.type===e))),Ux}let Gx,Wx,qx;function $x(t){return function(){if(null==Gx&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Gx=!0}))}finally{Gx=Gx||!1}return Gx}()?t:!!t.capture}function Yx(){if("object"!=typeof document||!document)return 0;if(null==Wx){const t=document.createElement("div"),e=t.style;t.dir="rtl",e.height="1px",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const n=document.createElement("div"),i=n.style;i.width="2px",i.height="1px",t.appendChild(n),document.body.appendChild(t),Wx=0,0===t.scrollLeft&&(t.scrollLeft=1,Wx=0===t.scrollLeft?1:2),t.parentNode.removeChild(t)}return Wx}const Qx=new Bt("cdk-dir-doc",{providedIn:"root",factory:function(){return Qt(rh)}});let Xx=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new Fc,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(Yt(Qx,8))},t.\u0275prov=ut({factory:function(){return new t(Yt(Qx,8))},token:t,providedIn:"root"}),t})(),Kx=(()=>{class t{constructor(){this._dir="ltr",this._isInitialized=!1,this.change=new Fc}get dir(){return this._dir}set dir(t){const e=this._dir,n=t?t.toLowerCase():t;this._rawDir=t,this._dir="ltr"===n||"rtl"===n?n:"ltr",e!==this._dir&&this._isInitialized&&this.change.emit(this._dir)}get value(){return this.dir}ngAfterContentInit(){this._isInitialized=!0}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","dir",""]],hostVars:1,hostBindings:function(t,e){2&t&&Rs("dir",e._rawDir)},inputs:{dir:"dir"},outputs:{change:"dirChange"},exportAs:["dir"],features:[Xa([{provide:Xx,useExisting:t}])]}),t})(),Zx=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)}}),t})();class Jx{constructor(t=!1,e,n=!0){this._multiple=t,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new C,e&&e.length&&(t?e.forEach(t=>this._markSelected(t)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){if(t.length>1&&!this._multiple)throw Error("Cannot pass multiple values into SelectionModel with single-value mode.")}}let tC=(()=>{class t{constructor(){this._listeners=[]}notify(t,e){for(let n of this._listeners)n(t,e)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(e=>t!==e)}}ngOnDestroy(){this._listeners=[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),eC=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._platform=e,this._scrolled=new C,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new b(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(Fx(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Op()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(Hp(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,i)=>{this._scrollableContainsElement(i,t)&&e.push(i)}),e}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollableContainsElement(t,e){let n=e.nativeElement,i=t.getElementRef().nativeElement;do{if(n==i)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>AA(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(Yt(Su),Yt(Vx),Yt(rh,8))},t.\u0275prov=ut({factory:function(){return new t(Yt(Su),Yt(Vx),Yt(rh,8))},token:t,providedIn:"root"}),t})(),nC=(()=>{class t{constructor(t,e,n,i){this.elementRef=t,this.scrollDispatcher=e,this.ngZone=n,this.dir=i,this._destroyed=new C,this._elementScrolled=new b(t=>this.ngZone.runOutsideAngular(()=>AA(this.elementRef.nativeElement,"scroll").pipe(px(this._destroyed)).subscribe(t)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const e=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=n?t.end:t.start),null==t.right&&(t.right=n?t.start:t.end),null!=t.bottom&&(t.top=e.scrollHeight-e.clientHeight-t.bottom),n&&0!=Yx()?(null!=t.left&&(t.right=e.scrollWidth-e.clientWidth-t.left),2==Yx()?t.left=t.right:1==Yx()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=e.scrollWidth-e.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const e=this.elementRef.nativeElement;"object"==typeof document&&"scrollBehavior"in document.documentElement.style?e.scrollTo(t):(null!=t.top&&(e.scrollTop=t.top),null!=t.left&&(e.scrollLeft=t.left))}measureScrollOffset(t){const e=this.elementRef.nativeElement;if("top"==t)return e.scrollTop;if("bottom"==t)return e.scrollHeight-e.clientHeight-e.scrollTop;const n=this.dir&&"rtl"==this.dir.value;return"start"==t?t=n?"right":"left":"end"==t&&(t=n?"left":"right"),n&&2==Yx()?"left"==t?e.scrollWidth-e.clientWidth-e.scrollLeft:e.scrollLeft:n&&1==Yx()?"left"==t?e.scrollLeft+e.scrollWidth-e.clientWidth:-e.scrollLeft:"left"==t?e.scrollLeft:e.scrollWidth-e.clientWidth-e.scrollLeft}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(eC),Ns(Su),Ns(Xx,8))},t.\u0275dir=_e({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),t})(),iC=(()=>{class t{constructor(t,e,n){this._platform=t,this._document=n,e.runOutsideAngular(()=>{const e=this._getWindow();this._change=t.isBrowser?q(AA(e,"resize"),AA(e,"orientationchange")):Op(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._getDocument(),e=this._getWindow(),n=t.documentElement,i=n.getBoundingClientRect();return{top:-i.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-i.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Fx(t)):this._change}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(Yt(Vx),Yt(Su),Yt(rh,8))},t.\u0275prov=ut({factory:function(){return new t(Yt(Vx),Yt(Su),Yt(rh,8))},token:t,providedIn:"root"}),t})(),rC=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)}}),t})(),oC=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Zx,jx,rC],Zx,rC]}),t})();const sC=["*"];let aC=(()=>{class t{constructor(t,e,n,i){this._viewportRuler=t,this._elRef=e,this._ngZone=n,this._cdRef=i,this._isExpanded=!1,this._onDestroy=new C,this._update=new C,this.isExpanded$=q(this._viewportRuler.change(150),this._update).pipe(Hp(()=>lC(this._elRef.nativeElement)),F(()=>{const t=this._elRef.nativeElement;let e;if(this.isExpanded)e=t.scrollWidth-t.offsetWidth;else{const n=t.cloneNode(!0);n.classList.add("navbar-expand"),t.parentElement.appendChild(n),e=n.scrollWidth-n.offsetWidth,t.parentElement.removeChild(n)}if(!e)return!0}),c_(),px(this._onDestroy)),this._ngZone.runOutsideAngular(()=>{this.isExpanded$.subscribe(t=>{this._ngZone.run(()=>{this._isExpanded=t,this._cdRef.markForCheck()})})})}get isExpanded(){return this._isExpanded}ngAfterContentInit(){this._ngZone.runOutsideAngular(()=>{lC(this._elRef.nativeElement)?setTimeout(()=>{this.updateExpansion()},0):setTimeout(()=>{this.ngAfterContentInit()},1e3/60)})}ngOnDestroy(){this._update.complete(),this._onDestroy.next(),this._onDestroy.complete()}updateExpansion(){this._update.next()}}return t.\u0275fac=function(e){return new(e||t)(Ns(iC),Ns(tl),Ns(Su),Ns(os))},t.\u0275dir=_e({type:t,selectors:[["","ngxNavbarDynamicExpand",""]],hostAttrs:[1,"navbar","text-nowrap"],hostVars:2,hostBindings:function(t,e){2&t&&va("navbar-expand",e.isExpanded)}}),t})();function lC(t){const e=getComputedStyle(t);return e&&"nowrap"===e.whiteSpace}const cC={navbarSlide:vx("slideState",[xx("false => true",[wx({opacity:0,height:0,overflow:"hidden"}),yx("300ms ease-out",wx({opacity:1,height:"*"}))]),xx("true => false",[yx("300ms ease-out",wx({display:"block",opacity:0,height:0,overflow:"hidden"}))])])};let uC=(()=>{class t{constructor(t){this._cdr=t,this.isCollapsed=!0,this.isTransitioning=!1}toggle(){this.isTransitioning=!0,this.isCollapsed=!this.isCollapsed,this._cdr.markForCheck()}close(){this.isCollapsed||(this.isTransitioning=!0,this.isCollapsed=!0,this._cdr.markForCheck())}open(){this.isCollapsed&&(this.isTransitioning=!0,this.isCollapsed=!1,this._cdr.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(Ns(os))},t.\u0275cmp=fe({type:t,selectors:[["ngx-navbar-collapse"]],hostAttrs:[1,"navbar-collapse","ngx-navbar-collapse"],hostVars:7,hostBindings:function(t,e){1&t&&Ks("@slideState.done",(function(){return e.isTransitioning=!1})),2&t&&(Fa("@slideState",!e.isCollapsed),va("collapse",!e.isTransitioning)("show",!e.isCollapsed&&!e.isTransitioning)("collapsing",e.isTransitioning))},exportAs:["ngxNavbarCollapse"],ngContentSelectors:sC,decls:1,vars:0,template:function(t,e){1&t&&(ia(),sa(0))},styles:["\n      .ngx-navbar-collapse.collapsing {\n        height: auto;\n      }\n    "],encapsulation:2,data:{animation:[cC.navbarSlide]},changeDetection:0}),t})(),hC=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd]]}),t})();function dC(t,e){if(1&t){const t=$s();js(0,"div",15),js(1,"button",16),Xs("click",(function(){return on(t),ea().goToSubmitArtworks()})),ka(2," Login "),zs(),zs()}}function pC(t,e){if(1&t){const t=$s();js(0,"div",17),js(1,"button",18),Xs("click",(function(){return on(t),ea().logOut()})),ka(2),zs(),zs()}if(2&t){const t=ea();Cr(2),Oa(" ",t.login," ")}}const fC=function(){return["/project/home"]},mC=function(){return["/project/guidelines"]},gC=function(){return["/project/stories"]},vC=function(){return["/gallery"]},yC=function(){return{exact:!0}},bC=function(){return["/project/team"]},_C=function(){return["/project/contact"]};let wC=(()=>{class t{constructor(t,e,n,i){this.router=t,this.ngZone=e,this.authService=n,this.dbOperations=i,this.hidden=!1,this.checked=0,this.role="",this.action="Submit",this.login="Log In",this.userId=null,this.showSubmit=!1,this.showAuthButton=!0,this.isCollapsed=!0}ngOnInit(){this.authState=this.authService.afAuth.authState,this.userId=localStorage.getItem("currentUser")}ngAfterViewInit(){null!=this.userId?(this.getUserRole(this.userId),"admin"===this.role&&(this.login="Log Out",this.showAuthButton=!0),"artist"===this.role&&(this.action="Submit",this.showSubmit=!0,this.showAuthButton=!0)):(this.login="Submit",this.showSubmit=!1,this.showAuthButton=!0)}showHideSidebar(){this.hidden=!this.hidden}goToSubmitArtworks(){null!=this.userId?(console.log(this.userId+" current user"),this.navigateUserAdmin(this.userId)):(console.log(this.userId+" current user"),this.router.navigateByUrl("/create-profile"))}getUserRole(t){this.dbOperations.usersCollectionById(t).get().then(t=>{t.empty||t.forEach(t=>{console.log("AUTHSTATE USER",t.data);const e=t.data();let n=Object.assign({},e).role;console.log(n),n.includes("moderator")?(this.action="Console",this.role="admin",this.login="Log Out",this.showAuthButton=!0,this.showSubmit=!0,console.log("AUTHSTATE USER","admin")):n.includes("scoring")?(this.action="Score",this.role="admin",this.login="Log Out",this.showSubmit=!0,this.showAuthButton=!0):n.includes("selection")?(this.action="Select",this.role="admin",this.login="Log Out",this.showAuthButton=!0,this.showSubmit=!0):n.includes("filtering")?(this.action="Filter",this.role="admin",this.login="Log Out",this.showAuthButton=!0,this.showSubmit=!0):n.includes("artist")&&(console.log("AUTHSTATE USER","artist"),this.action="Submit",this.role="artist",this.login="Log Out",this.showSubmit=!0,this.showAuthButton=!1)})})}logOut(){null!=this.userId?(console.log(this.userId),this.authService.logout().then(t=>{this.userId=null,this.login="Login",this.showSubmit=!1,localStorage.setItem("currentUser",""),this.router.navigateByUrl("/project/home")}).catch(t=>{})):(this.login="Login",this.router.navigateByUrl("/create-profile"))}navigateUserAdmin(t){this.dbOperations.usersCollectionById(t).get().then(t=>{t.empty||t.forEach(t=>{console.log("AUTHSTATE USER",t.data);const e=t.data();let n=Object.assign({},e).role;console.log(n),n.includes("moderator")?(this.action="Console",this.router.navigateByUrl("/project/admin"),console.log("AUTHSTATE USER","admin")):n.includes("scoring")?(this.action="Score",this.router.navigateByUrl("/project/admin/score")):n.includes("selection")?(this.action="Select",this.router.navigateByUrl("/project/admin/select-artworks")):n.includes("filtering")?(this.action="Filter",this.router.navigateByUrl("/project/admin/filter-artworks")):n.includes("artist")?(console.log("AUTHSTATE USER","artist"),this.action="Submit"):(this.router.navigateByUrl("/sorry"),this.action="Submit")})})}crossCheckUserProfileSubmitedDetails(t){this.router.navigateByUrl(null==t.address&&null==t.birthDate&&null==t.country&&null==t.firstName&&null==t.lastName&&null==t.gender&&null==t.nationality&&null==t.phoneNumber?"/create-profile":"/upload-files")}}return t.\u0275fac=function(e){return new(e||t)(Ns(Wg),Ns(Su),Ns(R_),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-navbar"]],decls:28,vars:16,consts:[[1,"custom-navbar"],["ngxNavbarDynamicExpand","",1,"navbar-light","bg-light"],["src","assets/images/african art in context.png","alt","photos and video submissions during pandemic","title","logo\n      African art in context"],["type","button","aria-controls","main-nav","aria-expanded","false","aria-label","Navig\xe1ci\xf3 kapcsol\xf3",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon","d-flex","align-items-center","justify-content-center"],["id","main-nav"],["collapse","ngxNavbarCollapse"],[1,"navbar-nav","ml-auto","mt-2","mt-lg-0"],[1,"nav-item","hand","active"],["routerLinkActive","activeLink",1,"nav-link",3,"routerLink"],[1,"nav-item","hand"],["routerLinkActive","activeLink",1,"nav-link",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","activeLink",1,"nav-link","mr-5",3,"routerLink"],["class","submit-btn hand",4,"ngIf"],["class","auth-btn mx-1 hand",4,"ngIf"],[1,"submit-btn","hand"],[1,"btn","btn-primary","nav-item",3,"click"],[1,"auth-btn","mx-1","hand"],[1,"btn","nav-item",3,"click"]],template:function(t,e){if(1&t){const t=$s();js(0,"div",0),js(1,"nav",1),Hs(2,"img",2),js(3,"button",3),Xs("click",(function(){return on(t),Fs(6).toggle()})),Hs(4,"span",4),zs(),js(5,"ngx-navbar-collapse",5,6),js(7,"ul",7),js(8,"li",8),js(9,"a",9),ka(10,"Home"),zs(),zs(),js(11,"li",10),js(12,"a",9),ka(13,"Participation Guidelines"),zs(),zs(),js(14,"li",10),js(15,"a",9),ka(16,"Spotlight Stories"),zs(),zs(),js(17,"li",10),js(18,"a",11),ka(19,"Gallery"),zs(),zs(),js(20,"li",10),js(21,"a",9),ka(22,"The Team"),zs(),zs(),js(23,"li",10),js(24,"a",12),ka(25,"Contact Us"),zs(),zs(),Ls(26,dC,3,0,"div",13),Ls(27,pC,3,1,"div",14),zs(),zs(),zs(),zs()}2&t&&(Cr(9),Us("routerLink",Ec(9,fC)),Cr(3),Us("routerLink",Ec(10,mC)),Cr(3),Us("routerLink",Ec(11,gC)),Cr(3),Us("routerLink",Ec(12,vC))("routerLinkActiveOptions",Ec(13,yC)),Cr(3),Us("routerLink",Ec(14,bC)),Cr(3),Us("routerLink",Ec(15,_C)),Cr(2),Us("ngIf",e.showSubmit),Cr(1),Us("ngIf",e.showAuthButton))},directives:[aC,uC,$g,Qg,md],styles:[".custom-navbar[_ngcontent-%COMP%]{background-color:#fff;size:3em;background-color:transparent}.custom-navbar[_ngcontent-%COMP%], .custom-navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;font-weight:bolder}.custom-navbar[_ngcontent-%COMP%]   .activeLink[_ngcontent-%COMP%]{background-color:#d3d3d3}.custom-navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;background-color:teal}.custom-navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#fff}.custom-navbar[_ngcontent-%COMP%]   .hand[_ngcontent-%COMP%]:hover{cursor:pointer;cursor:hand}.custom-navbar[_ngcontent-%COMP%]   #main-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;background-color:teal;border:none;width:100px}.custom-navbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px}.custom-navbar[_ngcontent-%COMP%]   .auth-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;background-color:teal}"]}),t})();const AC=["sidenav"];let xC=(()=>{class t{constructor(t,e,n,i){this.router=t,this.ngZone=e,this.fauth=n,this.dbOperations=i,this.opened=!0,this.scrollTop=0,this.hideNav=!1}ngOnInit(){this.authState=this.fauth.authState}checkIfUserIsAdmin(t){this.dbOperations.usersCollectionById(t).onSnapshot(t=>{null!=t&&t.forEach(t=>{console.log("AUTHSTATE USER",t.data);const e=t.data();let n=Object.assign({},e).role;n.includes("moderator")&&(this.role="admin",console.log("AUTHSTATE USER","admin"),this.router.navigateByUrl("/project/admin")),n.includes("admin")&&this.router.navigateByUrl("/project/admin/artworks"),n.includes("artist")&&(this.router.navigateByUrl("/project/add-artworks"),console.log("AUTHSTATE USER","artist"))})})}}return t.\u0275fac=function(e){return new(e||t)(Ns(Wg),Ns(Su),Ns(a_),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-site"]],viewQuery:function(t,e){var n;1&t&&Yc(AC,!0),2&t&&$c(n=tu())&&(e.sidenav=n.first)},decls:15,vars:0,consts:[[1,"app-wrapper"],["id","main-panel",1,"main-panel"],[1,"navbar-wrapper"],[1,"main-wrapper"],[1,"container-fluid"],[1,"footer-info"],[1,"info","mt-4"],[1,"sponsorship"],[1,"theme"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",0),js(2,"div",1),js(3,"div",2),Hs(4,"app-navbar"),zs(),js(5,"div",3),Hs(6,"router-outlet"),js(7,"footer"),js(8,"div",4),js(9,"div",5),js(10,"div",6),js(11,"p",7),ka(12," A partnership with Mastercard Foundation"),zs(),js(13,"p",8),ka(14,"Copyright \xa92020 African Art In Context"),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs())},directives:[wC,Xg],styles:[".app-wrapper[_ngcontent-%COMP%]{font-size:16px;font-family:Poppins,sans-serif;font-style:bold;background-color:#fff;min-height:100vh;height:100%}.app-wrapper[_ngcontent-%COMP%]   .main-wrapper[_ngcontent-%COMP%]   router-outlet[_ngcontent-%COMP%]{background-color:#000;min-height:100vh;height:100%}*[_ngcontent-%COMP%]{padding:0;margin:0}html[_ngcontent-%COMP%]{background-color:#eaf0f2}body[_ngcontent-%COMP%]{font:16px/1.6 Arial,sans-serif}header[_ngcontent-%COMP%]{text-align:center;padding-top:100px;margin-bottom:190px}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;color:#3f71ae;padding-bottom:16px}header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f05283}header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#3f71ea}footer[_ngcontent-%COMP%]{bottom:0;padding:1em}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:#a9a9a9}"]}),t})();var CC=i("sEhn");function EC(t,e){if(1&t&&(js(0,"div"),Hs(1,"img",80),Hs(2,"img",81),Hs(3,"img",82),Hs(4,"img",83),Hs(5,"img",84),Hs(6,"img",85),Hs(7,"img",86),Hs(8,"img",87),Hs(9,"img",88),Hs(10,"img",89),Hs(11,"img",90),Hs(12,"img",91),Hs(13,"img",92),Hs(14,"img",93),Hs(15,"img",94),Hs(16,"img",95),Hs(17,"img",96),zs()),2&t){const t=ea();Cr(1),aa("src",t.images[0],rr),Cr(1),aa("src",t.images[1],rr),Cr(1),aa("src",t.images[2],rr),Cr(1),aa("src",t.images[3],rr),Cr(1),aa("src",t.images[4],rr),Cr(1),aa("src",t.images[5],rr),Cr(1),aa("src",t.images[6],rr),Cr(1),aa("src",t.images[7],rr),Cr(1),aa("src",t.images[8],rr),Cr(1),aa("src",t.images[9],rr),Cr(1),aa("src",t.images[10],rr),Cr(1),aa("src",t.images[11],rr),Cr(1),aa("src",t.images[12],rr),Cr(1),aa("src",t.images[13],rr),Cr(1),aa("src",t.images[14],rr),Cr(1),aa("src",t.images[15],rr),Cr(1),aa("src",t.images[16],rr)}}let SC=(()=>{class t{constructor(t,e){this.dbOperations=t,this.route=e,this.pos="0 0 0",this.artworks=[],this.splash="",this.id=1595330004864,this.image="https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fartist%20during%20covid%2019.jpg?alt=media&token=fd448fc4-e8e3-44f3-bc0b-f9a5aaebff00",this.video="https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site%2FItsUpToUs%20Promo%20Final%20Cut.mp4?alt=media&token=e947661b-8e03-4548-b47c-3269d068be3b",this.images=["https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fartist%20during%20covid%2019.jpg?alt=media&token=fd448fc4-e8e3-44f3-bc0b-f9a5aaebff00","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fartist%20during%20covid%2019.jpg?alt=media&token=fd448fc4-e8e3-44f3-bc0b-f9a5aaebff00","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fchef%20covid%2019.jpg?alt=media&token=a0a473e6-3e1e-4e48-9bd0-ed67f31d2739","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fsocial%20distance%20pandemic.jpg?alt=media&token=cd117c33-f18a-437e-979b-c3c86259abc5","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fhome%20schoolind%20during%20pandemic.jpg?alt=media&token=58b1c390-d8c4-42e6-885d-a011474bb8ba","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fhome%20schoolind%20during%20pandemic.jpg?alt=media&token=58b1c390-d8c4-42e6-885d-a011474bb8ba","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fmothers%20covid%2019.jpg?alt=media&token=0982d57d-6afc-4857-bb3a-76c7582cc24b","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fsanitizing%20during%20pandemic.jpg?alt=media&token=962e55db-4b00-4dbc-a6ab-8793a13f12d6","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fcobbler%20pandemic.jpg?alt=media&token=67df849a-a8b9-40a0-adca-4a31ad2c9146","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Ftailor%20pandemic.jpg?alt=media&token=22f8a676-85fd-4f7a-96ed-c3624e76d6c2","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fcobbler%20pandemic.jpg?alt=media&token=67df849a-a8b9-40a0-adca-4a31ad2c9146","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fentrepreneur%20covid19.jpg?alt=media&token=32422549-f76c-4d37-828f-fa2af6b25509","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fpicture9.png?alt=media&token=f891885d-ce11-4be1-9050-67d3d3c260fd","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fsanitizing%20during%20pandemic.jpg?alt=media&token=962e55db-4b00-4dbc-a6ab-8793a13f12d6","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fmwalimu.png?alt=media&token=26f2695b-6cc7-4802-93ab-7d0de530e2a9","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fsocial%20distance%20pandemic.jpg?alt=media&token=cd117c33-f18a-437e-979b-c3c86259abc5","https://firebasestorage.googleapis.com/v0/b/atrium-870a8.appspot.com/o/site-data%2Fhome%20schoolind%20during%20pandemic.jpg?alt=media&token=58b1c390-d8c4-42e6-885d-a011474bb8ba"]}ngOnInit(){this.getExhibitions(),this.generate(),this.playVideoWhenUserEntersRoom()}getImage(){new Image}getExhibitions(){this.dbOperations.artworksCollection().snapshotChanges().subscribe(t=>{this.artworks=t.map(t=>{const e=t.payload.doc.data(),n=t.payload.doc.id;return console.log(Object.assign({},e)),Object.assign({id:n},e)})})}generate(){const t=[4,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,4,4,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,4,4,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,9,9,9,9,9,9,0,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,4,4,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,4,4,9,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,4,1,1,1,1,1,1,1,1,1,4];document.querySelector("a-scene").addEventListener("render-target-loaded",()=>{const e=document.querySelector("#walls");let n;for(var i=0;i<29;i++){console.log(i);for(var r=0;r<29;r++){const o=29*r+i,s=`${3*(i-14.5)} 1.5 ${3*(r-14.5)}`;if(1===t[o]||2==t[o]||3===t[o]||4===t[o]){let t=document.createElement("a-box");console.log(s),e.appendChild(t),t.setAttribute("width",3..toString()),t.setAttribute("height",10..toString()),t.setAttribute("depth",3..toString()),t.setAttribute("position",s),t.setAttribute("color","#fff"),t.setAttribute("material","src: #wall; repeat: 4 4"),t.setAttribute("static-body","")}8===t[o]&&(console.log(s),n=s),9===t[o]&&console.log(s)}}console.log(n),document.querySelector("#player").setAttribute("position",n)})}playVideoWhenUserEntersRoom(){const t=document.getElementById("theaterVideo");t.pause(),CC.AFRAME.registerComponent("listener",{tick:function(){this.el.getAttribute("position").z<=-17?t.play():t.pause()}})}playAnotherVideo(t,e){document.getElementById(e),this.video=t}exitSplashDisplay(){this.splash="none"}}return t.\u0275fac=function(e){return new(e||t)(Ns(O_),Ns(km))},t.\u0275cmp=fe({type:t,selectors:[["app-vr-gallery"]],hostBindings:function(t,e){1&t&&Xs("resize",(function(t){return e.pos(t)}),!1,Xn)},decls:89,vars:4,consts:[[1,"vr-gallery"],["cursor","rayOrigin: mouse"],[1,"splash"],[1,"splash__card","p-y"],[1,"title","text-center"],[1,"splash__button",3,"click"],["id","floor","src","assets/images/other/tiles.png"],["id","wall","src","assets/images/other/wall-concrete.jpg"],["id","wall-secret","src","assets/images/other/wall-concrete-secret.jpg"],["id","wall-brick","src","assets/images/other/brick.jpg"],["id","room-sign-1","src","assets/images/other/room-sign-1.png"],["id","room-sign-2","src","assets/images/other/room-sign-2.png"],["id","sky","src","assets/images/other/wall-concrete.jpg"],[4,"ngIf"],["id","theaterVideo","autoplay","","loop","true","webkit-playsinline","","playsinline","",3,"src"],["id","theater-curtains","src","assets/images/theater/curtains.png"],["id","couch-obj","src","assets/images/theater/couch/model.obj"],["id","couch-mtl","src","assets/images/theater/couch/materials.mtl"],["id","rig","kinema-body","radius: 0.8","movement-controls","","position-listener","","listener","","position","0 0 0"],["id","player","camera","user-height: 1.5","listener","","look-controls","pointerLockEnabled: true","wasd-controls","acceleration:200","position","0 9 0"],["cursor","fuse: true;","position","0 0 -3","material","color: black; shader: flat"],["begin","click","easing","ease-in","attribute","scale","dur","150","fill","forwards","from","0.1 0.1 0.1","to","0.15 0.15 0.15"],["begin","cursor-fusing","easing","ease-in","attribute","scale","dur","1500","fill","backwards","from","0.15 0.15 0.15","to","0.1 0.1 0.1"],["id","sky","geometry","primitive: sphere; radius: 100","material","src: #sky;  side:front; color:#FFF; shader:flat; npot:true'","scale","-1 1 1"],["position","-41.9 1.5 30","rotation","0 90 0","src","#example6","width","5","height","5"],["position","-41.9 1.5 20","rotation","0 90 0","src","#example7","width","5","height","5"],["position","-41.9 1.5 3","rotation","0 90 0","src","#example8","width","5","height","5"],["position","-41.9 1.5 -10","rotation","0 90 0","src","#example9","width","5","height","5"],["position","-41.9 1.5 -25","rotation","0 90 0","src","#example10","width","5","height","5"],["position","-41.9 1.5 -35","rotation","0 90 0","src","#example11","width","5","height","5"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","rotation","0 90 0","position","-41.9 -1.5 30","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","rotation","0 90 0","position","-41.9 -1.5 20","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","rotation","0 90 0","position","-41.9 -1.5 3","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","rotation","0 90 0","position","-41.9 -1.5 -10","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","rotation","0 90 0","position","-41.9 -1.5 -25","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","rotation","0 90 0","position","-41.9 -1.5 -35","scale","2.2 2.2 2.2"],["position","38.9 1.5 30","rotation","0 -90 0","src","#example0","width","5","height","5"],["position","38.9 1.5 20","rotation","0 -90 0","src","#example1","width","5","height","5"],["position","38.9 1.5 3","rotation","0 -90 0","src","#example2","width","5","height","5"],["position","38.9 1.5 -10","rotation","0 -90 0","src","#example3","width","5","height","5"],["position","38.9 1.5 -25","rotation","0 -90 0","src","#example4","width","5","height","5"],["position","38.9 1.5 -35","rotation","0 -90 0","src","#example5","width","5","height","5"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","rotation","0 -90 0","position","38.9 -1.5 30","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","rotation","0 -90 0","position","38.9 -1.5 20","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","rotation","0 -90 0","position","38.9 -1.5 3","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","rotation","0 -90 0","position","38.9 -1.5 -10","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","rotation","0 -90 0","position","38.9 -1.5 -25","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","rotation","0 -90 0","position","38.9 -1.5 -35","scale","2.2 2.2 2.2"],["position","37 1.5 -14.9","rotation","0 -180 0","src","#example12","width","5","height","5"],["position","20 1.5 -14.9","rotation","0 -180 0","src","#example13","width","5","height","5"],["position","-30 1.5 -14.9","rotation","0 -180 0","src","#example14","width","5","height","5"],["position","-37 1.5 -14.9","rotation","0 -180 0","src","#example15","width","5","height","5"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","37 -1.5 -14.9","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","20 -1.5 -14.9","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","-30 -1.5 -14.9","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","-37 -1.5 -14.9","scale","2.2 2.2 2.2"],["position","-3 1.5 16.5"],["src","#theaterVideo","width","10","height","8","position","0 0 -4.4"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","4.5 4 12.2","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","4.5 3.5 12.2","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","4.5 3 12.2","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","4.5 2.5 12.2","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","4.5 2 12.2","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","4.5 1.5 12.2","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","4.5 1 12.2","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","4.5 0.5 12.2","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","4.5 0 12.2","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","4.5 -0.5 12.2","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","4.5 -1 12.2","scale","2.2 2.2 2.2"],["position","37 1.5 -41.9","rotation","0 -180 0","src","#example","width","5","height","5"],["position","20 1.5 -41.9","rotation","0 -180 0","src","#example","width","5","height","5"],["position","-30 1.5 -41.9","rotation","0 -180 0","src","#example","width","5","height","5"],["position","-37 1.5 -41.9","rotation","0 -180 0","src","#example","width","5","height","5"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","37 -1.5 -41.9","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","20 -1.5 -41.9","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","-30 -1.5 -41.9","scale","2.2 2.2 2.2"],["geometry","primitive: plane; height: auto; width: 2;","material","color: black","text","color: white; align:  center; value: This text will be 4 units wide.","position","-37 -1.5 -41.9","scale","2.2 2.2 2.2"],["id","ground","position","-1 -4 -1","static-body","","material","src: #floor; repeat: 15 15","height","84","width","84","rotation","-90 0 0"],["id","walls"],["position","0 6.5 0","rotation","90 0 0","height","84","width","84","static-body","","material","src: #floor; repeat: 15 15"],["id","example0",3,"src"],["id","example1",3,"src"],["id","example2",3,"src"],["id","example3",3,"src"],["id","example4",3,"src"],["id","example5",3,"src"],["id","example6",3,"src"],["id","example7",3,"src"],["id","example8",3,"src"],["id","example9",3,"src"],["id","example10",3,"src"],["id","example11",3,"src"],["id","example12",3,"src"],["id","example13",3,"src"],["id","example14",3,"src"],["id","example15",3,"src"],["id","example",3,"src"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"a-scene",1),js(2,"div",2),js(3,"div",3),js(4,"div",4),js(5,"h1"),ka(6,"African Art In Context "),Hs(7,"br"),ka(8," Virtual Gallery"),zs(),zs(),js(9,"p"),ka(10,"You can move around with W-A-S-D keys (desktop), by tapping the screen (mobile) or with the button on your Google Cardboard."),zs(),js(11,"button",5),Xs("click",(function(){return e.exitSplashDisplay()})),ka(12,"Enter"),zs(),zs(),zs(),js(13,"a-assets"),Hs(14,"img",6),Hs(15,"img",7),Hs(16,"img",8),Hs(17,"img",9),Hs(18,"img",10),Hs(19,"img",11),Hs(20,"img",12),Ls(21,EC,18,17,"div",13),Hs(22,"video",14),Hs(23,"img",15),Hs(24,"a-asset-item",16),Hs(25,"a-asset-item",17),zs(),js(26,"a-entity",18),js(27,"a-entity",19),js(28,"a-entity",20),Hs(29,"a-animation",21),Hs(30,"a-animation",22),zs(),zs(),zs(),Hs(31,"a-entity",23),Hs(32,"a-image",24),Hs(33,"a-image",25),Hs(34,"a-image",26),Hs(35,"a-image",27),Hs(36,"a-image",28),Hs(37,"a-image",29),Hs(38,"a-entity",30),Hs(39,"a-entity",31),Hs(40,"a-entity",32),Hs(41,"a-entity",33),Hs(42,"a-entity",34),Hs(43,"a-entity",35),Hs(44,"a-image",36),Hs(45,"a-image",37),Hs(46,"a-image",38),Hs(47,"a-image",39),Hs(48,"a-image",40),Hs(49,"a-image",41),Hs(50,"a-entity",42),Hs(51,"a-entity",43),Hs(52,"a-entity",44),Hs(53,"a-entity",45),Hs(54,"a-entity",46),Hs(55,"a-entity",47),Hs(56,"a-image",48),Hs(57,"a-image",49),Hs(58,"a-image",50),Hs(59,"a-image",51),Hs(60,"a-entity",52),Hs(61,"a-entity",53),Hs(62,"a-entity",54),Hs(63,"a-entity",55),js(64,"a-entity",56),Hs(65,"a-video",57),zs(),Hs(66,"a-entity",58),Hs(67,"a-entity",59),Hs(68,"a-entity",60),Hs(69,"a-entity",61),Hs(70,"a-entity",62),Hs(71,"a-entity",63),Hs(72,"a-entity",64),Hs(73,"a-entity",65),Hs(74,"a-entity",66),Hs(75,"a-entity",67),Hs(76,"a-entity",68),Hs(77,"a-image",69),Hs(78,"a-image",70),Hs(79,"a-image",71),Hs(80,"a-image",72),Hs(81,"a-entity",73),Hs(82,"a-entity",74),Hs(83,"a-entity",75),Hs(84,"a-entity",76),Hs(85,"a-plane",77),ka(86,") "),Hs(87,"a-entity",78),Hs(88,"a-plane",79),zs(),zs()),2&t&&(Cr(2),ga("display",e.splash),Cr(19),Us("ngIf",e.images),Cr(1),aa("src",e.video,rr))},directives:[md],styles:[".vr-gallery[_ngcontent-%COMP%]{min-height:100vh;max-height:100vh}.vr-gallery[_ngcontent-%COMP%]   .splash[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100vh;background-color:rgba(0,0,0,.7);z-index:99999;display:flex;align-items:center;justify-content:center}.vr-gallery[_ngcontent-%COMP%]   .splash__card[_ngcontent-%COMP%]{max-width:50%;background-color:#f1f1f1;text-align:center;padding:15px;border-radius:4px}@media only screen and (max-width:700px){.vr-gallery[_ngcontent-%COMP%]   .splash__card[_ngcontent-%COMP%]{max-width:88%}}.vr-gallery[_ngcontent-%COMP%]   .splash__button[_ngcontent-%COMP%]{padding:20px 30px;border:none;background-color:#000;color:#fff;cursor:pointer;font-size:18px;text-transform:uppercase;font-weight:700;border-radius:4px}.vr-gallery[_ngcontent-%COMP%]   .splash__img[_ngcontent-%COMP%]{max-width:100%;display:block;height:160px;margin:20px auto}.vr-gallery[_ngcontent-%COMP%]   .vr-loader[_ngcontent-%COMP%]{display:none}"]}),t})();const MC=[];let TC=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd,sv.forChild(MC)]]}),t})(),PC=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-categories"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})();const kC=function(){return["/main/artists"]},DC=function(){return["/main/categories"]},OC=function(){return["/main/events"]},RC=function(){return["/main/contests"]},IC=function(){return["/main/artworks"]},LC=function(){return["/main/curators"]};let FC=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-dashboard"]],decls:43,vars:12,consts:[[1,"dashboard"],[1,"container"],[1,"row"],[1,"col-md-4","my-3",3,"routerLink"],[1,"card"],[1,"module-title"],[1,"module-desc"],[1,"module","description"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),js(2,"div",2),js(3,"div",3),js(4,"div",4),js(5,"h3",5),ka(6,"Categories"),zs(),zs(),zs(),js(7,"div",3),Hs(8,"div",4),js(9,"div",6),js(10,"h3",5),ka(11,"Artists"),zs(),js(12,"p",7),ka(13,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Error accusantium, rerum quia, veniam ratione est facilis sint nobis aspernatur tempore molestiae unde labore suscipit deserunt, tenetur corrupti distinctio. Earum, quos."),zs(),zs(),zs(),js(14,"div",3),Hs(15,"div",4),js(16,"div",6),js(17,"h3",5),ka(18,"Categories"),zs(),js(19,"p",7),ka(20,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Error accusantium, rerum quia, veniam ratione est facilis sint nobis aspernatur tempore molestiae unde labore suscipit deserunt, tenetur corrupti distinctio. Earum, quos."),zs(),zs(),zs(),zs(),js(21,"div",2),js(22,"div",3),Hs(23,"div",4),js(24,"div",6),js(25,"h3",5),ka(26,"Categories"),zs(),js(27,"p",7),ka(28,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Error accusantium, rerum quia, veniam ratione est facilis sint nobis aspernatur tempore molestiae unde labore suscipit deserunt, tenetur corrupti distinctio. Earum, quos."),zs(),zs(),zs(),js(29,"div",3),Hs(30,"div",4),js(31,"div",6),js(32,"h3",5),ka(33,"Categories"),zs(),js(34,"p",7),ka(35,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Error accusantium, rerum quia, veniam ratione est facilis sint nobis aspernatur tempore molestiae unde labore suscipit deserunt, tenetur corrupti distinctio. Earum, quos."),zs(),zs(),zs(),js(36,"div",3),Hs(37,"div",4),js(38,"div",6),js(39,"h3",5),ka(40,"Categories"),zs(),js(41,"p",7),ka(42,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Error accusantium, rerum quia, veniam ratione est facilis sint nobis aspernatur tempore molestiae unde labore suscipit deserunt, tenetur corrupti distinctio. Earum, quos."),zs(),zs(),zs(),zs(),zs(),zs()),2&t&&(Cr(3),Us("routerLink",Ec(6,kC)),Cr(4),Us("routerLink",Ec(7,DC)),Cr(7),Us("routerLink",Ec(8,OC)),Cr(8),Us("routerLink",Ec(9,RC)),Cr(7),Us("routerLink",Ec(10,IC)),Cr(7),Us("routerLink",Ec(11,LC)))},directives:[qg],styles:[""]}),t})();function NC(t,e){if(1&t&&(js(0,"div",4),js(1,"div",5),js(2,"div",6),js(3,"p",7),js(4,"strong"),ka(5,"Name: "),zs(),ka(6),zs(),js(7,"p",7),js(8,"strong"),ka(9,"Email: "),zs(),ka(10),zs(),js(11,"p",7),js(12,"strong"),ka(13,"Phone Number: "),zs(),ka(14),zs(),js(15,"p",7),js(16,"strong"),ka(17,"Place: "),zs(),ka(18),zs(),js(19,"p",7),js(20,"strong"),ka(21,"Nationality: "),zs(),ka(22),zs(),js(23,"p",7),js(24,"strong"),ka(25,"Birth Date: "),zs(),ka(26),zs(),js(27,"p",7),js(28,"strong"),ka(29,"Address: "),zs(),ka(30),zs(),zs(),zs(),zs()),2&t){const t=e.$implicit;Cr(6),Da(t.firstName+" "+t.lastName),Cr(4),Da(t.email),Cr(4),Da(t.phoneNumber),Cr(4),Da(t.country),Cr(4),Da(t.nationality),Cr(4),Da(t.birthDate),Cr(4),Da(t.address)}}let BC=(()=>{class t{constructor(t){this.dbOperations=t,this.artists=[]}ngOnInit(){this.getArtist()}getArtist(){this.dbOperations.usersCollection().snapshotChanges().subscribe(t=>{t.map(e=>{const n=e.payload.doc.data();null!=n.role?n.role.includes("admin")&&null!=n.role||this.artists.push(n):(console.log(t.length),this.artists.push(n))})})}}return t.\u0275fac=function(e){return new(e||t)(Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-artists"]],decls:4,vars:1,consts:[[1,"artists"],[1,"conatainer-fluid","p-0"],[1,"row"],["class","col-md-3 mt-3",4,"ngFor","ngForOf"],[1,"col-md-3","mt-3"],[1,"card","p-3"],[1,"artist"],[1,"mb-0"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),js(2,"div",2),Ls(3,NC,31,7,"div",3),zs(),zs(),zs()),2&t&&(Cr(3),Us("ngForOf",e.artists))},directives:[pd],styles:[""]}),t})(),UC=(()=>{class t{constructor(t){this.router=t}ngOnInit(){this.router.navigateByUrl("/project/home")}}return t.\u0275fac=function(e){return new(e||t)(Ns(Wg))},t.\u0275cmp=fe({type:t,selectors:[["app-page-not-found"]],decls:2,vars:0,template:function(t,e){1&t&&(js(0,"p"),ka(1,"page-not-found works!"),zs())},styles:[""]}),t})(),VC=(()=>{class t{constructor(){this.progress=0}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-progress"]],inputs:{progress:"progress"},decls:4,vars:7,consts:[[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped","bg-success"]],template:function(t,e){1&t&&(js(0,"div",0),Hs(1,"div",1),Oc(2,"async"),Oc(3,"async"),zs()),2&t&&(Cr(1),ga("width",Rc(2,3,e.uploadProgress)+"%"),Rs("aria-valuenow",Rc(3,5,e.uploadProgress)))},pipes:[Dd],styles:[""]}),t})(),jC=(()=>{class t{constructor(t){this.activateRoute=t,this.path=""}ngOnInit(){this.activateRoute.url.subscribe(t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(Ns(km))},t.\u0275cmp=fe({type:t,selectors:[["app-sidebar"]],decls:42,vars:0,consts:[["id","sidebar",1,"container-fluid","p-0"],[1,"sidebar-title","p-3"],[1,"sidebar-title"],[1,"m-3"],[1,"sidebar-navs"],[1,"list-unstyled"],[1,"sidebar-dashboard","p-2"],["routerLink","/admin/dashboard",1,"nav-link","p-2"],[1,"fa","fa-dashboard","mr-3"],[1,"departments","p-2"],["routerLink","/admin/departments",1,"nav-link","p-2"],[1,"fa","fa-columns","mr-3"],[1,"professors","p-2"],["routerLink","/admin/professors",1,"nav-link","p-2"],[1,"fa","fa-user-md","mr-3"],[1,"students","p-2"],["routerLink","/admin/students",1,"nav-link","p-2"],[1,"fa","fa-user","mr-3"],[1,"library","p-2"],["routerLink","/admin/library",1,"nav-link","p-2"],[1,"fa","fa-book","mr-3"],[1,"extras"],["data-toggle","collapse","href","#extras","aria-expanded","true","aria-controls","extras",1,"nav-link"],[1,"fa","fa-angle-down","pull-right"],["id","extras",1,"collapse"],[1,"layouts","p-2"],["routerLink","/sign-in",1,"nav-link","p-2"],[1,"fa","fa-sign-in","mr-3"],["routerLink","/sign-up",1,"nav-link","p-2"],[1,"fa","fa-registered","mr-3"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),js(2,"h4",2),ka(3,"Dashboard"),zs(),zs(),Hs(4,"hr",3),js(5,"div",4),js(6,"ul",5),js(7,"li",6),js(8,"a",7),Hs(9,"i",8),ka(10,"Dashboard"),zs(),zs(),js(11,"li",9),js(12,"a",10),Hs(13,"i",11),ka(14,"Departments"),zs(),zs(),js(15,"li",12),js(16,"a",13),Hs(17,"i",14),ka(18," Professors"),zs(),zs(),js(19,"li",15),js(20,"a",16),Hs(21,"i",17),ka(22," Students"),zs(),zs(),js(23,"li",18),js(24,"a",19),Hs(25,"i",20),ka(26," Library"),zs(),zs(),zs(),zs(),Hs(27,"hr",3),js(28,"div",21),js(29,"a",22),ka(30,"Extras "),Hs(31,"i",23),zs(),js(32,"div",24),js(33,"ul",5),js(34,"li",25),js(35,"a",26),Hs(36,"i",27),ka(37,"Sign In"),zs(),zs(),js(38,"li",25),js(39,"a",28),Hs(40,"i",29),ka(41,"Sign Up"),zs(),zs(),zs(),zs(),zs(),zs())},directives:[$g],styles:[""]}),t})();function zC(){throw Error("Host already has a portal attached")}class HC{attach(t){return null==t&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),t.hasAttached()&&zC(),this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null==t?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class GC extends HC{constructor(t,e,n,i){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=i}}class WC extends HC{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class qC extends HC{constructor(t){super(),this.element=t instanceof tl?t.nativeElement:t}}class $C{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&zC(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),t instanceof GC?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof WC?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof qC?(this._attachedPortal=t,this.attachDomPortal(t)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class YC extends $C{constructor(t,e,n,i,r){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=i,this.attachDomPortal=t=>{if(!this._document)throw Error("Cannot attach DOM portal without _document constructor parameter");const e=t.element;if(!e.parentNode)throw Error("DOM portal content must be attached to a parent node.");const n=this._document.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=r}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.detectChanges(),n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let QC=(()=>{class t extends $C{constructor(t,e,n){super(),this._componentFactoryResolver=t,this._viewContainerRef=e,this._isInitialized=!1,this.attached=new Fc,this.attachDomPortal=t=>{if(!this._document)throw Error("Cannot attach DOM portal without _document constructor parameter");const e=t.element;if(!e.parentNode)throw Error("DOM portal content must be attached to a parent node.");const n=this._document.createComment("dom-portal");t.setAttachedHost(this),e.parentNode.insertBefore(n,e),this._getRootNode().appendChild(e),super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=n}get portal(){return this._attachedPortal}set portal(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),i=e.createComponent(n,e.length,t.injector||e.injector);return e!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(t){t.setAttachedHost(this);const e=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=e,this.attached.emit(e),e}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return t.\u0275fac=function(e){return new(e||t)(Ns(Ja),Ns(Sl),Ns(rh))},t.\u0275dir=_e({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Ba]}),t})(),XC=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)}}),t})();class KC{constructor(t,e){this._parentInjector=t,this._customTokens=e}get(t,e){const n=this._customTokens.get(t);return void 0!==n?n:this._parentInjector.get(t,e)}}function ZC(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class JC{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Ox(-this._previousScrollPosition.left),t.style.top=Ox(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,i=e.scrollBehavior||"",r=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),e.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),e.scrollBehavior=i,n.scrollBehavior=r}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}function tE(){return Error("Scroll strategy has already been attached.")}class eE{constructor(t,e,n,i){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){if(this._overlayRef)throw tE();this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class nE{enable(){}disable(){}attach(){}}function iE(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function rE(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class oE{constructor(t,e,n,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=i,this._scrollSubscription=null}attach(t){if(this._overlayRef)throw tE();this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();iE(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let sE=(()=>{class t{constructor(t,e,n,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new nE,this.close=t=>new eE(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new JC(this._viewportRuler,this._document),this.reposition=t=>new oE(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=i}}return t.\u0275fac=function(e){return new(e||t)(Yt(eC),Yt(iC),Yt(Su),Yt(rh))},t.\u0275prov=ut({factory:function(){return new t(Yt(eC),Yt(iC),Yt(Su),Yt(rh))},token:t,providedIn:"root"}),t})();class aE{constructor(t){if(this.scrollStrategy=new nE,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class lE{constructor(t,e,n,i,r){this.offsetX=n,this.offsetY=i,this.panelClass=r,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class cE{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}function uE(t,e){if("top"!==e&&"bottom"!==e&&"center"!==e)throw Error(`ConnectedPosition: Invalid ${t} "${e}". `+'Expected "top", "bottom" or "center".')}function hE(t,e){if("start"!==e&&"end"!==e&&"center"!==e)throw Error(`ConnectedPosition: Invalid ${t} "${e}". `+'Expected "start", "end" or "center".')}let dE=(()=>{class t{constructor(t){this._attachedOverlays=[],this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEventSubscriptions>0){e[n]._keydownEvents.next(t);break}},this._document=t}ngOnDestroy(){this._detach()}add(t){this.remove(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this._detach()}_detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(Yt(rh))},t.\u0275prov=ut({factory:function(){return new t(Yt(rh))},token:t,providedIn:"root"}),t})();const pE=!("undefined"==typeof window||!window||!window.__karma__&&!window.jasmine);let fE=(()=>{class t{constructor(t,e){this._platform=e,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._platform?this._platform.isBrowser:"undefined"!=typeof window;if(t||pE){const t=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]');for(let e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])}const e=this._document.createElement("div");e.classList.add("cdk-overlay-container"),pE?e.setAttribute("platform","test"):t||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return t.\u0275fac=function(e){return new(e||t)(Yt(rh),Yt(Vx))},t.\u0275prov=ut({factory:function(){return new t(Yt(rh),Yt(Vx))},token:t,providedIn:"root"}),t})();class mE{constructor(t,e,n,i,r,o,s,a){this._portalOutlet=t,this._host=e,this._pane=n,this._config=i,this._ngZone=r,this._keyboardDispatcher=o,this._document=s,this._location=a,this._backdropElement=null,this._backdropClick=new C,this._attachments=new C,this._detachments=new C,this._locationChanges=d.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEventsObservable=new b(t=>{const e=this._keydownEvents.subscribe(t);return this._keydownEventSubscriptions++,()=>{e.unsubscribe(),this._keydownEventSubscriptions--}}),this._keydownEvents=new C,this._keydownEventSubscriptions=0,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(af(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick.asObservable()}attachments(){return this._attachments.asObservable()}detachments(){return this._detachments.asObservable()}keydownEvents(){return this._keydownEventsObservable}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Ox(this._config.width),t.height=Ox(this._config.height),t.minWidth=Ox(this._config.minWidth),t.minHeight=Ox(this._config.minHeight),t.maxWidth=Ox(this._config.maxWidth),t.maxHeight=Ox(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"auto":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const i=t.classList;Dx(e).forEach(t=>{t&&(n?i.add(t):i.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.asObservable().pipe(px(q(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const gE=/([A-Za-z%]+)$/;class vE{constructor(t,e,n,i,r){this._viewportRuler=e,this._document=n,this._platform=i,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new C,this._resizeSubscription=d.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){if(this._overlayRef&&t!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),t.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,i=[];let r;for(let o of this._preferredPositions){let s=this._getOriginPoint(t,o),a=this._getOverlayPoint(s,e,o),l=this._getOverlayFit(a,e,n,o);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,s);this._canFitWithFlexibleDimensions(l,a,n)?i.push({position:o,origin:s,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(s,o)}):(!r||r.overlayFit.visibleArea<l.visibleArea)&&(r={overlayFit:l,overlayPoint:a,originPoint:s,position:o,overlayRect:e})}if(i.length){let t=null,e=-1;for(const n of i){const i=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);i>e&&(e=i,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(r.position,r.originPoint);this._applyPosition(r.position,r.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&yE(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,i;if("center"==e.originX)n=t.left+t.width/2;else{const i=this._isRtl()?t.right:t.left,r=this._isRtl()?t.left:t.right;n="start"==e.originX?i:r}return i="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:n,y:i}}_getOverlayPoint(t,e,n){let i,r;return i="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,r="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+i,y:t.y+r}}_getOverlayFit(t,e,n,i){let{x:r,y:o}=t,s=this._getOffset(i,"x"),a=this._getOffset(i,"y");s&&(r+=s),a&&(o+=a);let l=0-o,c=o+e.height-n.height,u=this._subtractOverflows(e.width,0-r,r+e.width-n.width),h=this._subtractOverflows(e.height,l,c),d=u*h;return{visibleArea:d,isCompletelyWithinViewport:e.width*e.height===d,fitsInViewportVertically:h===e.height,fitsInViewportHorizontally:u==e.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const i=n.bottom-e.y,r=n.right-e.x,o=bE(this._overlayRef.getConfig().minHeight),s=bE(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=s&&s<=r;return(t.fitsInViewportVertically||null!=o&&o<=i)&&a}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const i=this._viewportRect,r=Math.max(t.x+e.width-i.right,0),o=Math.max(t.y+e.height-i.bottom,0),s=Math.max(i.top-n.top-t.y,0),a=Math.max(i.left-n.left-t.x,0);let l=0,c=0;return l=e.width<=i.width?a||-r:t.x<this._viewportMargin?i.left-n.left-t.x:0,c=e.height<=i.height?s||-o:t.y<this._viewportMargin?i.top-n.top-t.y:0,this._previousPushAmount={x:l,y:c},{x:t.x+l,y:t.y+c}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new cE(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,i=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let r=0;r<e.length;r++)e[r].style.transformOrigin=`${n} ${i}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,i=this._isRtl();let r,o,s,a,l,c;if("top"===e.overlayY)o=t.y,r=n.height-o+this._viewportMargin;else if("bottom"===e.overlayY)s=n.height-t.y+2*this._viewportMargin,r=n.height-s+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),i=this._lastBoundingBoxSize.height;r=2*e,o=t.y-e,r>i&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-i/2)}if("end"===e.overlayX&&!i||"start"===e.overlayX&&i)c=n.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!i||"end"===e.overlayX&&i)l=t.x,a=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),i=this._lastBoundingBoxSize.width;a=2*e,l=t.x-e,a>i&&!this._isInitialRender&&!this._growAfterOpen&&(l=t.x-i/2)}return{top:o,left:l,bottom:s,right:c,width:a,height:r}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,r=this._overlayRef.getConfig().maxWidth;i.height=Ox(n.height),i.top=Ox(n.top),i.bottom=Ox(n.bottom),i.width=Ox(n.width),i.left=Ox(n.left),i.right=Ox(n.right),i.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",i.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(i.maxHeight=Ox(t)),r&&(i.maxWidth=Ox(r))}this._lastBoundingBoxSize=n,yE(this._boundingBox.style,i)}_resetBoundingBoxStyles(){yE(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){yE(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},i=this._hasExactPosition(),r=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const i=this._viewportRuler.getViewportScrollPosition();yE(n,this._getExactOverlayY(e,t,i)),yE(n,this._getExactOverlayX(e,t,i))}else n.position="static";let s="",a=this._getOffset(e,"x"),l=this._getOffset(e,"y");a&&(s+=`translateX(${a}px) `),l&&(s+=`translateY(${l}px)`),n.transform=s.trim(),o.maxHeight&&(i?n.maxHeight=Ox(o.maxHeight):r&&(n.maxHeight="")),o.maxWidth&&(i?n.maxWidth=Ox(o.maxWidth):r&&(n.maxWidth="")),yE(this._pane.style,n)}_getExactOverlayY(t,e,n){let i={top:"",bottom:""},r=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return r.y-=o,"bottom"===t.overlayY?i.bottom=`${this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)}px`:i.top=Ox(r.y),i}_getExactOverlayX(t,e,n){let i,r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),i=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===i?r.right=`${this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)}px`:r.left=Ox(o.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:rE(t,n),isOriginOutsideView:iE(t,n),isOverlayClipped:rE(e,n),isOverlayOutsideView:iE(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach(t=>{hE("originX",t.originX),uE("originY",t.originY),hE("overlayX",t.overlayX),uE("overlayY",t.overlayY)})}_addPanelClasses(t){this._pane&&Dx(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof tl)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function yE(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function bE(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(gE);return n&&"px"!==n?null:parseFloat(e)}return t||null}class _E{constructor(t,e,n,i,r,o,s){this._preferredPositions=[],this._positionStrategy=new vE(n,i,r,o,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e)}get _isRtl(){return"rtl"===this._overlayRef.getDirection()}get onPositionChange(){return this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,i){const r=new lE(t,e,n,i);return this._preferredPositions.push(r),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}class wE{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:i,height:r,maxWidth:o,maxHeight:s}=n,a=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==r&&"100vh"!==r||s&&"100%"!==s&&"100vh"!==s);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove("cdk-global-overlay-wrapper"),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let AE=(()=>{class t{constructor(t,e,n,i){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=i}global(){return new wE}connectedTo(t,e,n){return new _E(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new vE(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(Yt(iC),Yt(rh),Yt(Vx),Yt(fE))},t.\u0275prov=ut({factory:function(){return new t(Yt(iC),Yt(rh),Yt(Vx),Yt(fE))},token:t,providedIn:"root"}),t})(),xE=0,CE=(()=>{class t{constructor(t,e,n,i,r,o,s,a,l,c){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=i,this._keyboardDispatcher=r,this._injector=o,this._ngZone=s,this._document=a,this._directionality=l,this._location=c}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),i=this._createPortalOutlet(n),r=new aE(t);return r.direction=r.direction||this._directionality.value,new mE(i,e,n,r,this._ngZone,this._keyboardDispatcher,this._document,this._location)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id=`cdk-overlay-${xE++}`,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Wu)),new YC(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(Yt(sE),Yt(fE),Yt(Ja),Yt(AE),Yt(dE),Yt(As),Yt(Su),Yt(rh),Yt(Xx),Yt(bh,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const EE={provide:new Bt("cdk-connected-overlay-scroll-strategy"),deps:[CE],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let SE=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[CE,EE],imports:[[Zx,XC,oC],oC]}),t})();function ME(t,e=Rv){return n=>n.lift(new TE(t,e))}class TE{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new PE(t,this.dueTime,this.scheduler))}}class PE extends m{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(kE,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function kE(t){t.debouncedNext()}let DE=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),OE=(()=>{class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=Rx(t);return new b(t=>{const n=this._observeElement(e).subscribe(t);return()=>{n.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new C,n=this._mutationObserverFactory.create(t=>e.next(t));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:n}=this._observedElements.get(t);e&&e.disconnect(),n.complete(),this._observedElements.delete(t)}}}return t.\u0275fac=function(e){return new(e||t)(Yt(DE))},t.\u0275prov=ut({factory:function(){return new t(Yt(DE))},token:t,providedIn:"root"}),t})(),RE=(()=>{class t{constructor(t,e,n){this._contentObserver=t,this._elementRef=e,this._ngZone=n,this.event=new Fc,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Px(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=kx(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(ME(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription&&this._currentSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Ns(OE),Ns(tl),Ns(Su))},t.\u0275dir=_e({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),IE=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[DE]}),t})();class LE extends class{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new C,this._typeaheadSubscription=d.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new C,this.change=new C,t instanceof Bc&&t.changes.subscribe(t=>{if(this._activeItem){const e=t.toArray().indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){if(this._items.length&&this._items.some(t=>"function"!=typeof t.getLabel))throw Error("ListKeyManager items in typeahead mode must implement the `getLabel` method.");return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(df(t=>this._pressedLetters.push(t)),ME(t),Hp(()=>this._pressedLetters.length>0),F(()=>this._pressedLetters.join(""))).subscribe(t=>{const e=this._getItemsArray();for(let n=1;n<e.length+1;n++){const i=(this._activeItemIndex+n)%e.length,r=e[i];if(!this._skipPredicateFn(r)&&0===r.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(i);break}}this._pressedLetters=[]}),this}setActiveItem(t){const e=this._activeItemIndex;this.updateActiveItem(t),this._activeItemIndex!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(e=>!t[e]||this._allowedModifierKeys.indexOf(e)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&n){this.setNextItemActive();break}return;case 38:if(this._vertical&&n){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;default:return void((n||ZC(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),i=e[n];this._activeItem=null==i?null:i,this._activeItemIndex=n}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const i=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof Bc?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let FE=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(NG){return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){const t=e&&e.nodeName.toLowerCase();if(-1===BE(e))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===t)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(e))return!1}let i=t.nodeName.toLowerCase(),r=BE(t);if(t.hasAttribute("contenteditable"))return-1!==r;if("iframe"===i)return!1;if("audio"===i){if(!t.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===i){if(!t.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==i||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&t.tabIndex>=0}isFocusable(t){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||NE(t))}(t)&&!this.isDisabled(t)&&this.isVisible(t)}}return t.\u0275fac=function(e){return new(e||t)(Yt(Vx))},t.\u0275prov=ut({factory:function(){return new t(Yt(Vx))},token:t,providedIn:"root"}),t})();function NE(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function BE(t){if(!NE(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class UE{constructor(t,e,n,i,r=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement()))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], `+`[cdkFocusRegion${t}], `+`[cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', `+`use 'cdkFocusRegion${t}' instead. The deprecated `+"attribute will be removed in 8.0.0.",e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', `+`use 'cdkFocusRegion${t}' instead. The deprecated attribute `+"will be removed in 8.0.0.",e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return t?(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),Oi()&&!this._checker.isFocusable(t)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",t),t.focus(),!0):this.focusFirstTabbableElement()}focusFirstTabbableElement(){const t=this._getRegionBoundary("start");return t&&t.focus(),!!t}focusLastTabbableElement(){const t=this._getRegionBoundary("end");return t&&t.focus(),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.asObservable().pipe(af(1)).subscribe(t)}}let VE=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new UE(t,this._checker,this._ngZone,this._document,e)}}return t.\u0275fac=function(e){return new(e||t)(Yt(FE),Yt(Su),Yt(rh))},t.\u0275prov=ut({factory:function(){return new t(Yt(FE),Yt(Su),Yt(rh))},token:t,providedIn:"root"}),t})(),jE=(()=>{class t{constructor(t,e,n){this._elementRef=t,this._focusTrapFactory=e,this._previouslyFocusedElement=null,this._document=n,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=Px(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=Px(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&(this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady())}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(VE),Ns(rh))},t.\u0275dir=_e({type:t,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"]}),t})();"undefined"!=typeof Element&&Element;const zE=new Bt("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),HE=new Bt("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let GE=(()=>{class t{constructor(t,e,n,i){this._ngZone=e,this._defaultOptions=i,this._document=n,this._liveElement=t||this._createLiveElement()}announce(t,...e){const n=this._defaultOptions;let i,r;return 1===e.length&&"number"==typeof e[0]?r=e[0]:[i,r]=e,this.clear(),clearTimeout(this._previousTimeout),i||(i=n&&n.politeness?n.politeness:"polite"),null==r&&n&&(r=n.duration),this._liveElement.setAttribute("aria-live",i),this._ngZone.runOutsideAngular(()=>new Promise(e=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,e(),"number"==typeof r&&(this._previousTimeout=setTimeout(()=>this.clear(),r))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const t=this._document.getElementsByClassName("cdk-live-announcer-element"),e=this._document.createElement("div");for(let n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);return e.classList.add("cdk-live-announcer-element"),e.classList.add("cdk-visually-hidden"),e.setAttribute("aria-atomic","true"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),e}}return t.\u0275fac=function(e){return new(e||t)(Yt(zE,8),Yt(Su),Yt(rh),Yt(HE,8))},t.\u0275prov=ut({factory:function(){return new t(Yt(zE,8),Yt(Su),Yt(rh),Yt(HE,8))},token:t,providedIn:"root"}),t})(),WE=(()=>{class t{constructor(t,e,n,i){this._elementRef=t,this._liveAnnouncer=e,this._contentObserver=n,this._ngZone=i,this._politeness="off"}get politeness(){return this._politeness}set politeness(t){this._politeness="polite"===t||"assertive"===t?t:"off","off"===this._politeness?this._subscription&&(this._subscription.unsubscribe(),this._subscription=null):this._subscription||(this._subscription=this._ngZone.runOutsideAngular(()=>this._contentObserver.observe(this._elementRef).subscribe(()=>{const t=this._elementRef.nativeElement.textContent;t!==this._previousAnnouncedText&&(this._liveAnnouncer.announce(t,this._politeness),this._previousAnnouncedText=t)})))}ngOnDestroy(){this._subscription&&this._subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(GE),Ns(OE),Ns(Su))},t.\u0275dir=_e({type:t,selectors:[["","cdkAriaLive",""]],inputs:{politeness:["cdkAriaLive","politeness"]},exportAs:["cdkAriaLive"]}),t})();function qE(t){return 0===t.buttons}const $E=new Bt("cdk-focus-monitor-default-options"),YE=$x({passive:!0,capture:!0});let QE=(()=>{class t{constructor(t,e,n,i){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=t=>{if(!this._lastTouchTarget){const e=qE(t)?"keyboard":"mouse";this._setOriginForCurrentEventQueue(e)}},this._documentTouchstartListener=t=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=XE(t),this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,650)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._rootNodeFocusAndBlurListener=t=>{const e=XE(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let i=e;i;i=i.parentElement)n.call(this,t,i)},this._document=n,this._detectionMode=(null==i?void 0:i.detectionMode)||0}monitor(t,e=!1){if(!this._platform.isBrowser)return Op(null);const n=Rx(t),i=function(t){if(function(){if(null==qx){const t="undefined"!=typeof document?document.head:null;qx=!(!t||!t.createShadowRoot&&!t.attachShadow)}return qx}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument();if(this._elementInfo.has(n)){const t=this._elementInfo.get(n);return t.checkChildren=e,t.subject.asObservable()}const r={checkChildren:e,subject:new C,rootNode:i};return this._elementInfo.set(n,r),this._registerGlobalListeners(r),r.subject.asObservable()}stopMonitoring(t){const e=Rx(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const i=Rx(t);this._setOriginForCurrentEventQueue(e),"function"==typeof i.focus&&i.focus(n)}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,0===this._detectionMode&&(this._originTimeoutId=setTimeout(()=>this._origin=null,1))})}_wasCausedByTouch(t){const e=XE(t);return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);if(!n||!n.checkChildren&&e!==XE(t))return;const i=this._getFocusOrigin(t);this._setClasses(e,i),this._emitOrigin(n.subject,i),this._lastFocusOrigin=i}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,YE),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,YE)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&this._ngZone.runOutsideAngular(()=>{const t=this._getDocument(),e=this._getWindow();t.addEventListener("keydown",this._documentKeydownListener,YE),t.addEventListener("mousedown",this._documentMousedownListener,YE),t.addEventListener("touchstart",this._documentTouchstartListener,YE),e.addEventListener("focus",this._windowFocusListener)})}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,YE),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,YE),this._rootNodeFocusListenerCount.delete(e))}if(!--this._monitoredElementCount){const t=this._getDocument(),e=this._getWindow();t.removeEventListener("keydown",this._documentKeydownListener,YE),t.removeEventListener("mousedown",this._documentMousedownListener,YE),t.removeEventListener("touchstart",this._documentTouchstartListener,YE),e.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId)}}}return t.\u0275fac=function(e){return new(e||t)(Yt(Su),Yt(Vx),Yt(rh,8),Yt($E,8))},t.\u0275prov=ut({factory:function(){return new t(Yt(Su),Yt(Vx),Yt(rh,8),Yt($E,8))},token:t,providedIn:"root"}),t})();function XE(t){return t.composedPath?t.composedPath()[0]:t.target}let KE=(()=>{class t{constructor(t,e){this._elementRef=t,this._focusMonitor=e,this.cdkFocusChange=new Fc,this._monitorSubscription=this._focusMonitor.monitor(this._elementRef,this._elementRef.nativeElement.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(t=>this.cdkFocusChange.emit(t))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(QE))},t.\u0275dir=_e({type:t,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),t})(),ZE=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,i=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),i){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove("cdk-high-contrast-active"),t.remove("cdk-high-contrast-black-on-white"),t.remove("cdk-high-contrast-white-on-black");const e=this.getHighContrastMode();1===e?(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-black-on-white")):2===e&&(t.add("cdk-high-contrast-active"),t.add("cdk-high-contrast-white-on-black"))}}}return t.\u0275fac=function(e){return new(e||t)(Yt(Vx),Yt(rh))},t.\u0275prov=ut({factory:function(){return new t(Yt(Vx),Yt(rh))},token:t,providedIn:"root"}),t})(),JE=(()=>{class t{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)(Yt(ZE))},imports:[[jx,IE]]}),t})();const tS=new al("9.2.2");function eS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function nS(t){switch(t.length){case 0:return new Mx;case 1:return t[0];default:return new Tx(t)}}function iS(t,e,n,i,r={},o={}){const s=[],a=[];let l=-1,c=null;if(i.forEach(t=>{const n=t.offset,i=n==l,u=i&&c||{};Object.keys(t).forEach(n=>{let i=n,a=t[n];if("offset"!==n)switch(i=e.normalizePropertyName(i,s),a){case"!":a=r[n];break;case"*":a=o[n];break;default:a=e.normalizeStyleValue(n,i,a,s)}u[i]=a}),i||a.push(u),c=u,l=n}),s.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${s.join(t)}`)}return a}function rS(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&oS(n,"start",t)));break;case"done":t.onDone(()=>i(n&&oS(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&oS(n,"destroy",t)))}}function oS(t,e,n){const i=n.totalTime,r=sS(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==i?t.totalTime:i,!!n.disabled),o=t._data;return null!=o&&(r._data=o),r}function sS(t,e,n,i,r="",o=0,s){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function aS(t,e,n){let i;return t instanceof Map?(i=t.get(e),i||t.set(e,i=n)):(i=t[e],i||(i=t[e]=n)),i}function lS(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let cS=(t,e)=>!1,uS=(t,e)=>!1,hS=(t,e,n)=>[];const dS=eS();(dS||"undefined"!=typeof Element)&&(cS=(t,e)=>t.contains(e),uS=(()=>{if(dS||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):uS}})(),hS=(t,e,n)=>{let i=[];if(n)i.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&i.push(n)}return i});let pS=null,fS=!1;function mS(t){pS||(pS=("undefined"!=typeof document?document.body:null)||{},fS=!!pS.style&&"WebkitAppearance"in pS.style);let e=!0;return pS.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in pS.style,!e&&fS)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in pS.style),e}const gS=uS,vS=cS,yS=hS;function bS(t){const e={};return Object.keys(t).forEach(n=>{const i=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=t[n]}),e}let _S=(()=>{class t{validateStyleProperty(t){return mS(t)}matchesElement(t,e){return gS(t,e)}containsElement(t,e){return vS(t,e)}query(t,e,n){return yS(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,i,r,o=[],s){return new Mx(n,i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),wS=(()=>{class t{}return t.NOOP=new _S,t})();function AS(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:xS(parseFloat(e[1]),e[2])}function xS(t,e){switch(e){case"s":return 1e3*t;default:return t}}function CS(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let i,r=0,o="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};i=xS(parseFloat(n[1]),n[2]);const s=n[3];null!=s&&(r=xS(parseFloat(s),n[4]));const a=n[5];a&&(o=a)}else i=t;if(!n){let n=!1,o=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),r<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(o,0,`The provided timing value "${t}" is invalid.`)}return{duration:i,delay:r,easing:o}}(t,e,n)}function ES(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function SS(t,e,n={}){if(e)for(let i in t)n[i]=t[i];else ES(t,n);return n}function MS(t,e,n){return n?e+":"+n+";":""}function TS(t){let e="";for(let n=0;n<t.style.length;n++){const i=t.style.item(n);e+=MS(0,i,t.style.getPropertyValue(i))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=MS(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function PS(t,e,n){t.style&&(Object.keys(e).forEach(i=>{const r=NS(i);n&&!n.hasOwnProperty(i)&&(n[i]=t.style[r]),t.style[r]=e[i]}),eS()&&TS(t))}function kS(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=NS(e);t.style[n]=""}),eS()&&TS(t))}function DS(t){return Array.isArray(t)?1==t.length?t[0]:_x(t):t}const OS=new RegExp("{{\\s*(.+?)\\s*}}","g");function RS(t){let e=[];if("string"==typeof t){let n;for(;n=OS.exec(t);)e.push(n[1]);OS.lastIndex=0}return e}function IS(t,e,n){const i=t.toString(),r=i.replace(OS,(t,i)=>{let r=e[i];return e.hasOwnProperty(i)||(n.push(`Please provide a value for the animation param ${i}`),r=""),r.toString()});return r==i?t:r}function LS(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const FS=/-+([a-z0-9])/g;function NS(t){return t.replace(FS,(...t)=>t[1].toUpperCase())}function BS(t,e){return 0===t||0===e}function US(t,e,n){const i=Object.keys(n);if(i.length&&e.length){let o=e[0],s=[];if(i.forEach(t=>{o.hasOwnProperty(t)||s.push(t),o[t]=n[t]}),s.length)for(var r=1;r<e.length;r++){let n=e[r];s.forEach((function(e){n[e]=jS(t,e)}))}}return e}function VS(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function jS(t,e){return window.getComputedStyle(t)[e]}function zS(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const i=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof i)return void e.push(i);t=i}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const r=i[1],o=i[2],s=i[3];e.push(WS(r,s)),"<"!=o[0]||"*"==r&&"*"==s||e.push(WS(s,r))}(t,n,e)):n.push(t),n}const HS=new Set(["true","1"]),GS=new Set(["false","0"]);function WS(t,e){const n=HS.has(t)||GS.has(t),i=HS.has(e)||GS.has(e);return(r,o)=>{let s="*"==t||t==r,a="*"==e||e==o;return!s&&n&&"boolean"==typeof r&&(s=r?HS.has(t):GS.has(t)),!a&&i&&"boolean"==typeof o&&(a=o?HS.has(e):GS.has(e)),s&&a}}const qS=new RegExp("s*:selfs*,?","g");function $S(t,e,n){return new YS(t).build(e,n)}class YS{constructor(t){this._driver=t}build(t,e){const n=new QS(e);return this._resetContextStyleTimingState(n),VS(this,DS(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,i=e.depCount=0;const r=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,i=n.name;i.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,r.push(this.visitState(n,e))}),n.name=i}else if(1==t.type){const r=this.visitTransition(t,e);n+=r.queryCount,i+=r.depCount,o.push(r)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:r,transitions:o,queryCount:n,depCount:i,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(n.containsDynamicStyles){const r=new Set,o=i||{};if(n.styles.forEach(t=>{if(XS(t)){const e=t;Object.keys(e).forEach(t=>{RS(e[t]).forEach(t=>{o.hasOwnProperty(t)||r.add(t)})})}}),r.size){const n=LS(r.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=VS(this,DS(t.animation),e);return{type:1,matchers:zS(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:KS(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>VS(this,t,e)),options:KS(t.options)}}visitGroup(t,e){const n=e.currentTime;let i=0;const r=t.steps.map(t=>{e.currentTime=n;const r=VS(this,t,e);return i=Math.max(i,e.currentTime),r});return e.currentTime=i,{type:3,steps:r,options:KS(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return ZS(CS(t,e).duration,0,"");const i=t;if(i.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=ZS(0,0,"");return t.dynamic=!0,t.strValue=i,t}return n=n||CS(i,e),ZS(n.duration,n.delay,n.easing)}(t.timings,e.errors);let i;e.currentAnimateTimings=n;let r=t.styles?t.styles:wx({});if(5==r.type)i=this.visitKeyframes(r,e);else{let r=t.styles,o=!1;if(!r){o=!0;const t={};n.easing&&(t.easing=n.easing),r=wx(t)}e.currentTime+=n.duration+n.delay;const s=this.visitStyle(r,e);s.isEmptyStep=o,i=s}return e.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?"*"==t?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let i=!1,r=null;return n.forEach(t=>{if(XS(t)){const e=t,n=e.easing;if(n&&(r=n,delete e.easing),!i)for(let t in e)if(e[t].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:n,easing:r,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let i=e.currentTime,r=e.currentTime;n&&r>0&&(r-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const o=e.collectedStyles[e.currentQuerySelector],s=o[n];let a=!0;s&&(r!=i&&r>=s.startTime&&i<=s.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${s.startTime}ms" and "${s.endTime}ms" is also being animated in a parallel animation between the times of "${r}ms" and "${i}ms"`),a=!1),r=s.startTime),a&&(o[n]={startTime:r,endTime:i}),e.options&&function(t,e,n){const i=e.params||{},r=RS(t);r.length&&r.forEach(t=>{i.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let i=0;const r=[];let o=!1,s=!1,a=0;const l=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let l=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(XS(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(XS(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=l&&(i++,c=n.offset=l),s=s||c<0||c>1,o=o||c<a,a=c,r.push(c),n});s&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),o&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let u=0;i>0&&i<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(u=1/(c-1));const h=c-1,d=e.currentTime,p=e.currentAnimateTimings,f=p.duration;return l.forEach((t,i)=>{const o=u>0?i==h?1:u*i:r[i],s=o*f;e.currentTime=d+p.delay+s,p.duration=s,this._validateStyleAst(t,e),t.offset=o,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:VS(this,DS(t.animation),e),options:KS(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:KS(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:KS(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[r,o]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(qS,"")),[t=t.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,".ng-animating"),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+r:r,aS(e.collectedStyles,e.currentQuerySelector,{});const s=VS(this,DS(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:r,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:s,originalSelector:t.selector,options:KS(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:CS(t.timings,e.errors,!0);return{type:12,animation:VS(this,DS(t.animation),e),timings:n,options:null}}}class QS{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function XS(t){return!Array.isArray(t)&&"object"==typeof t}function KS(t){var e;return t?(t=ES(t)).params&&(t.params=(e=t.params)?ES(e):null):t={},t}function ZS(t,e,n){return{duration:t,delay:e,easing:n}}function JS(t,e,n,i,r,o,s=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class tM{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const eM=new RegExp(":enter","g"),nM=new RegExp(":leave","g");function iM(t,e,n,i,r,o={},s={},a,l,c=[]){return(new rM).buildKeyframes(t,e,n,i,r,o,s,a,l,c)}class rM{buildKeyframes(t,e,n,i,r,o,s,a,l,c=[]){l=l||new tM;const u=new sM(t,e,l,i,r,c,[]);u.options=a,u.currentTimeline.setStyles([o],null,u.errors,a),VS(this,n,u);const h=u.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(s).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([s],null,u.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[JS(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const i=e.createSubContext(t.options),r=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,i,i.options);r!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let i=e.currentTimeline.currentTime;const r=null!=n.duration?AS(n.duration):null,o=null!=n.delay?AS(n.delay):null;return 0!==r&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,r,o);i=Math.max(i,n.duration+n.delay)}),i}visitReference(t,e){e.updateOptions(t.options,!0),VS(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let i=e;const r=t.options;if(r&&(r.params||r.delay)&&(i=e.createSubContext(r),i.transformIntoNewTimeline(),null!=r.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=oM);const t=AS(r.delay);i.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>VS(this,t,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let i=e.currentTimeline.currentTime;const r=t.options&&t.options.delay?AS(t.options.delay):0;t.steps.forEach(o=>{const s=e.createSubContext(t.options);r&&s.delayNextStep(r),VS(this,o,s),i=Math.max(i,s.currentTimeline.currentTime),n.push(s.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return CS(e.params?IS(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),i.snapshotCurrentStyles());const r=t.style;5==r.type?this.visitKeyframes(r,e):(e.incrementTime(n.duration),this.visitStyle(r,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,i=e.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();const r=i&&i.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(r):n.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,i=e.currentTimeline.duration,r=n.duration,o=e.createSubContext().currentTimeline;o.easing=n.easing,t.styles.forEach(t=>{o.forwardTime((t.offset||0)*r),o.setStyles(t.styles,t.easing,e.errors,e.options),o.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(o),e.transformIntoNewTimeline(i+r),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,i=t.options||{},r=i.delay?AS(i.delay):0;r&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=oM);let o=n;const s=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=s.length;let a=null;s.forEach((n,i)=>{e.currentQueryIndex=i;const s=e.createSubContext(t.options,n);r&&s.delayNextStep(r),n===e.element&&(a=s.currentTimeline),VS(this,t.animation,s),s.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,s.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,i=e.currentTimeline,r=t.timings,o=Math.abs(r.duration),s=o*(e.currentQueryTotal-1);let a=o*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":a=s-a;break;case"full":a=n.currentStaggerTime}const l=e.currentTimeline;a&&l.delayNextStep(a);const c=l.currentTime;VS(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=i.currentTime-c+(i.startTime-n.currentTimeline.startTime)}}const oM={};class sM{constructor(t,e,n,i,r,o,s,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=r,this.errors=o,this.timelines=s,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=oM,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new aM(this._driver,e,0),s.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let i=this.options;null!=n.duration&&(i.duration=AS(n.duration)),null!=n.delay&&(i.delay=AS(n.delay));const r=n.params;if(r){let t=i.params;t||(t=this.options.params={}),Object.keys(r).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=IS(r[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const i=e||this.element,r=new sM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(t),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(t){return this.previousNode=oM,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},r=new lM(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(r),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,i,r,o){let s=[];if(i&&s.push(this.element),t.length>0){t=(t=t.replace(eM,"."+this._enterClassName)).replace(nM,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),s.push(...e)}return r||0!=s.length||o.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),s}}class aM{constructor(t,e,n,i){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new aM(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||"*",this._currentKeyframe[t]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,i){e&&(this._previousKeyframe.easing=e);const r=i&&i.params||{},o=function(t,e){const n={};let i;return t.forEach(t=>{"*"===t?(i=i||Object.keys(e),i.forEach(t=>{n[t]="*"})):SS(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=IS(o[t],r,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:"*"),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],i=t._styleSummary[e];(!n||i.time>n.time)&&this._updateStyle(e,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((r,o)=>{const s=SS(r,!0);Object.keys(s).forEach(n=>{const i=s[n];"!"==i?t.add(n):"*"==i&&e.add(n)}),n||(s.offset=o/this.duration),i.push(s)});const r=t.size?LS(t.values()):[],o=e.size?LS(e.values()):[];if(n){const t=i[0],e=ES(t);t.offset=0,e.offset=1,i=[t,e]}return JS(this.element,i,r,o,this.duration,this.startTime,this.easing,!1)}}class lM extends aM{constructor(t,e,n,i,r,o,s=!1){super(t,e,o.delay),this.element=e,this.keyframes=n,this.preStyleProps=i,this.postStyleProps=r,this._stretchStartingKeyframe=s,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const r=[],o=n+e,s=e/o,a=SS(t[0],!1);a.offset=0,r.push(a);const l=SS(t[0],!1);l.offset=cM(s),r.push(l);const c=t.length-1;for(let i=1;i<=c;i++){let s=SS(t[i],!1);s.offset=cM((e+s.offset*n)/o),r.push(s)}n=o,e=0,i="",t=r}return JS(this.element,t,this.preStyleProps,this.postStyleProps,n,e,i,!0)}}function cM(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class uM{}class hM extends uM{normalizePropertyName(t,e){return NS(t)}normalizeStyleValue(t,e,n,i){let r="";const o=n.toString().trim();if(dM[e]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&i.push(`Please provide a CSS unit value for ${t}:${n}`)}return o+r}}const dM=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function pM(t,e,n,i,r,o,s,a,l,c,u,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:d}}const fM={};class mM{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,i){return function(t,e,n,i,r){return t.some(t=>t(e,n,i,r))}(this.ast.matchers,t,e,n,i)}buildStyles(t,e,n){const i=this._stateStyles["*"],r=this._stateStyles[t],o=i?i.buildStyles(e,n):{};return r?r.buildStyles(e,n):o}build(t,e,n,i,r,o,s,a,l,c){const u=[],h=this.ast.options&&this.ast.options.params||fM,d=this.buildStyles(n,s&&s.params||fM,u),p=a&&a.params||fM,f=this.buildStyles(i,p,u),m=new Set,g=new Map,v=new Map,y="void"===i,b={params:Object.assign(Object.assign({},h),p)},_=c?[]:iM(t,e,this.ast.animation,r,o,d,f,b,l,u);let w=0;if(_.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),u.length)return pM(e,this._triggerName,n,i,y,d,f,[],[],g,v,w,u);_.forEach(t=>{const n=t.element,i=aS(g,n,{});t.preStyleProps.forEach(t=>i[t]=!0);const r=aS(v,n,{});t.postStyleProps.forEach(t=>r[t]=!0),n!==e&&m.add(n)});const A=LS(m.values());return pM(e,this._triggerName,n,i,y,d,f,_,A,g,v,w)}}class gM{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},i=ES(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(i[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const r=t;Object.keys(r).forEach(t=>{let o=r[t];o.length>1&&(o=IS(o,i,e)),n[t]=o})}}),n}}class vM{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new gM(t.style,t.options&&t.options.params||{})}),yM(this.states,"true","1"),yM(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new mM(t,e,this.states))}),this.fallbackTransition=new mM(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,i){return this.transitionFactories.find(r=>r.match(t,e,n,i))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function yM(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const bM=new tM;class _M{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],i=$S(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=i}_buildPlayer(t,e,n){const i=t.element,r=iS(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(i,r,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const i=[],r=this._animations[t];let o;const s=new Map;if(r?(o=iM(this._driver,e,r,"ng-enter","ng-leave",{},{},n,bM,i),o.forEach(t=>{const e=aS(s,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),o=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);s.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,"*")})});const a=nS(o.map(t=>{const e=s.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,i){const r=sS(e,"","","");return rS(this._getPlayer(t),n,r,i),()=>{}}command(t,e,n,i){if("register"==n)return void this.register(t,i[0]);if("create"==n)return void this.create(t,e,i[0]||{});const r=this._getPlayer(t);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const wM=[],AM={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},xM={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class CM{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(i=n?t.value:t)?i:null,n){const e=ES(t);delete e.value,this.options=e}else this.options={};var i;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const EM=new CM("void");class SM{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,RM(e,this._hostClassName)}listen(t,e,n,i){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(r=n)&&"done"!=r)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var r;const o=aS(this._elementListeners,t,[]),s={name:e,phase:n,callback:i};o.push(s);const a=aS(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(RM(t,"ng-trigger"),RM(t,"ng-trigger-"+e),a[e]=EM),()=>{this._engine.afterFlush(()=>{const t=o.indexOf(s);t>=0&&o.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,i=!0){const r=this._getTrigger(e),o=new TM(this.id,e,t);let s=this._engine.statesByElement.get(t);s||(RM(t,"ng-trigger"),RM(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,s={}));let a=s[e];const l=new CM(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),s[e]=l,a||(a=EM),"void"!==l.value&&a.value===l.value){if(!function(t,e){const n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const i=n[r];if(!e.hasOwnProperty(i)||t[i]!==e[i])return!1}return!0}(a.params,l.params)){const e=[],n=r.matchStyles(a.value,a.params,e),i=r.matchStyles(l.value,l.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{kS(t,n),PS(t,i)})}return}const c=aS(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let u=r.matchTransition(a.value,l.value,t,l.params),h=!1;if(!u){if(!i)return;u=r.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:u,fromState:a,toState:l,player:o,isFallbackTransition:h}),h||(RM(t,"ng-animate-queued"),o.onStart(()=>{IM(t,"ng-animate-queued")})),o.onDone(()=>{let e=this.players.indexOf(o);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(o);t>=0&&n.splice(t,1)}}),this.players.push(o),c.push(o),o}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,".ng-trigger",!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,i){const r=this._engine.statesByElement.get(t);if(r){const o=[];if(Object.keys(r).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,"void",i);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&nS(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const i=e.name;if(n.has(i))return;n.add(i);const r=this._triggers[i].fallbackTransition,o=this._engine.statesByElement.get(t)[i]||EM,s=new CM("void"),a=new TM(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:r,fromState:o,toState:s,player:a,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)i=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)n.markElementAsRemoved(this.id,t,!1,e);else{const i=t.__ng_removed;i&&i!==AM||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){RM(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const i=n.player;if(i.destroyed)return;const r=n.element,o=this._elementListeners.get(r);o&&o.forEach(e=>{if(e.name==n.triggerName){const i=sS(r,n.triggerName,n.fromState.value,n.toState.value);i._data=t,rS(n.player,e.phase,i,e.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,i=e.transition.ast.depCount;return 0==n||0==i?n-i:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class MM{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new SM(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let i=!1;for(let r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,e)){this._namespaceList.splice(r+1,0,t),i=!0;break}i||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let i=this._namespaceLookup[t];i&&i.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=n[t[i]].namespaceId;if(r){const t=this._fetchNamespace(r);t&&e.add(t)}}}return e}trigger(t,e,n,i){if(PM(e)){const r=this._fetchNamespace(t);if(r)return r.trigger(e,n,i),!0}return!1}insertNode(t,e,n,i){if(!PM(e))return;const r=e.__ng_removed;if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const i=this._fetchNamespace(t);i&&i.insertNode(e,n)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),RM(t,"ng-animate-disabled")):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),IM(t,"ng-animate-disabled"))}removeNode(t,e,n,i){if(PM(e)){const r=t?this._fetchNamespace(t):null;if(r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,n,i){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,i,r){return PM(e)?this._fetchNamespace(t).listen(e,n,i,r):()=>{}}_buildInstruction(t,e,n,i,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,i,t.fromState.options,t.toState.options,e,r)}destroyInnerAnimations(t){let e=this.driver.query(t,".ng-trigger",!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,".ng-animating",!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return nS(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=AM,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,".ng-animate-disabled")&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)RM(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?nS(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new tM,i=[],r=new Map,o=[],s=new Map,a=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=OM(h,this.collectedEnterElements),p=new Map;let f=0;d.forEach((t,e)=>{const n="ng-enter"+f++;p.set(e,n),t.forEach(t=>RM(t,n))});const m=[],g=new Set,v=new Set;for(let k=0;k<this.collectedLeaveElements.length;k++){const t=this.collectedLeaveElements[k],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):v.add(t))}const y=new Map,b=OM(h,Array.from(g));b.forEach((t,e)=>{const n="ng-leave"+f++;y.set(e,n),t.forEach(t=>RM(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=p.get(e);t.forEach(t=>IM(t,n))}),b.forEach((t,e)=>{const n=y.get(e);t.forEach(t=>IM(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const _=[],w=[];for(let k=this._namespaceList.length-1;k>=0;k--)this._namespaceList[k].drainQueuedTransitions(e).forEach(t=>{const e=t.player,r=t.element;if(_.push(e),this.collectedEnterElements.length){const t=r.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!u||!this.driver.containsElement(u,r),h=y.get(r),d=p.get(r),f=this._buildInstruction(t,n,d,h,c);if(!f.errors||!f.errors.length)return c||t.isFallbackTransition?(e.onStart(()=>kS(r,f.fromStyles)),e.onDestroy(()=>PS(r,f.toStyles)),void i.push(e)):(f.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(r,f.timelines),o.push({instruction:f,player:e,element:r}),f.queriedElements.forEach(t=>aS(s,t,[]).push(e)),f.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),void f.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let i=l.get(e);i||l.set(e,i=new Set),n.forEach(t=>i.add(t))}));w.push(f)});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),_.forEach(t=>t.destroy()),this.reportError(t)}const A=new Map,x=new Map;o.forEach(t=>{const e=t.element;n.has(e)&&(x.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,A))}),i.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{aS(A,e,[]).push(t),t.destroy()})});const C=m.filter(t=>FM(t,a,l)),E=new Map;DM(E,this.driver,v,l,"*").forEach(t=>{FM(t,a,l)&&C.push(t)});const S=new Map;d.forEach((t,e)=>{DM(S,this.driver,new Set(t),a,"!")}),C.forEach(t=>{const e=E.get(t),n=S.get(t);E.set(t,Object.assign(Object.assign({},e),n))});const M=[],T=[],P={};o.forEach(t=>{const{element:e,player:o,instruction:s}=t;if(n.has(e)){if(c.has(e))return o.onDestroy(()=>PS(e,s.toStyles)),o.disabled=!0,o.overrideTotalTime(s.totalTime),void i.push(o);let t=P;if(x.size>1){let n=e;const i=[];for(;n=n.parentNode;){const e=x.get(n);if(e){t=e;break}i.push(n)}i.forEach(e=>x.set(e,t))}const n=this._buildAnimation(o.namespaceId,s,A,r,S,E);if(o.setRealPlayer(n),t===P)M.push(o);else{const e=this.playersByElement.get(t);e&&e.length&&(o.parentPlayer=nS(e)),i.push(o)}}else kS(e,s.fromStyles),o.onDestroy(()=>PS(e,s.toStyles)),T.push(o),c.has(e)&&i.push(o)}),T.forEach(t=>{const e=r.get(t.element);if(e&&e.length){const n=nS(e);t.setRealPlayer(n)}}),i.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let k=0;k<m.length;k++){const t=m[k],e=t.__ng_removed;if(IM(t,"ng-leave"),e&&e.hasAnimation)continue;let n=[];if(s.size){let e=s.get(t);e&&e.length&&n.push(...e);let i=this.driver.query(t,".ng-animating",!0);for(let t=0;t<i.length;t++){let e=s.get(i[t]);e&&e.length&&n.push(...e)}}const i=n.filter(t=>!t.destroyed);i.length?LM(this,t,i):this.processLeaveNode(t)}return m.length=0,M.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),M}elementContainsData(t,e){let n=!1;const i=e.__ng_removed;return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,i,r){let o=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(o=e)}else{const e=this.playersByElement.get(t);if(e){const t=!r||"void"==r;e.forEach(e=>{e.queued||(t||e.triggerName==i)&&o.push(e)})}}return(n||i)&&(o=o.filter(t=>!(n&&n!=t.namespaceId||i&&i!=t.triggerName))),o}_beforeAnimationBuild(t,e,n){const i=e.element,r=e.isRemovalTransition?void 0:t,o=e.isRemovalTransition?void 0:e.triggerName;for(const s of e.timelines){const t=s.element,a=t!==i,l=aS(n,t,[]);this._getPreviousPlayers(t,a,r,o,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})}kS(i,e.fromStyles)}_buildAnimation(t,e,n,i,r,o){const s=e.triggerName,a=e.element,l=[],c=new Set,u=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new Mx(e.duration,e.delay);const p=h!==a,f=function(t){const e=[];return function t(e,n){for(let i=0;i<e.length;i++){const r=e[i];r instanceof Tx?t(r.players,n):n.push(r)}}(t,e),e}((n.get(h)||wM).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=r.get(h),g=o.get(h),v=iS(0,this._normalizer,0,e.keyframes,m,g),y=this._buildPlayer(e,v,f);if(e.subTimeline&&i&&u.add(h),p){const e=new TM(t,s,h);e.setRealPlayer(y),l.push(e)}return y});l.forEach(t=>{aS(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let i;if(t instanceof Map){if(i=t.get(e),i){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&t.delete(e)}}else if(i=t[e],i){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&delete t[e]}return i}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>RM(t,"ng-animating"));const d=nS(h);return d.onDestroy(()=>{c.forEach(t=>IM(t,"ng-animating")),PS(a,e.toStyles)}),u.forEach(t=>{aS(i,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Mx(t.duration,t.delay)}}class TM{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Mx,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>rS(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){aS(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function PM(t){return t&&1===t.nodeType}function kM(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function DM(t,e,n,i,r){const o=[];n.forEach(t=>o.push(kM(t)));const s=[];i.forEach((n,i)=>{const o={};n.forEach(t=>{const n=o[t]=e.computeStyle(i,t,r);n&&0!=n.length||(i.__ng_removed=xM,s.push(i))}),t.set(i,o)});let a=0;return n.forEach(t=>kM(t,o[a++])),s}function OM(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const i=new Set(e),r=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let o=r.get(e);if(o)return o;const s=e.parentNode;return o=n.has(s)?s:i.has(s)?1:t(s),r.set(e,o),o}(t);1!==e&&n.get(e).push(t)}),n}function RM(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function IM(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function LM(t,e,n){nS(n).onDone(()=>t.processLeaveNode(e))}function FM(t,e,n){const i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(t=>r.add(t)):e.set(t,i),n.delete(t),!0}class NM{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new MM(t,e,n),this._timelineEngine=new _M(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,i,r){const o=t+"-"+i;let s=this._triggerCache[o];if(!s){const t=[],e=$S(this._driver,r,t);if(t.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);s=function(t,e){return new vM(t,e)}(i,e),this._triggerCache[o]=s}this._transitionEngine.registerTrigger(e,i,s)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,i){this._transitionEngine.insertNode(t,e,n,i)}onRemove(t,e,n,i){this._transitionEngine.removeNode(t,e,i||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,i){if("@"==n.charAt(0)){const[t,r]=lS(n);this._timelineEngine.command(t,e,r,i)}else this._transitionEngine.trigger(t,e,n,i)}listen(t,e,n,i,r){if("@"==n.charAt(0)){const[t,i]=lS(n);return this._timelineEngine.listen(t,e,i,r)}return this._transitionEngine.listen(t,e,n,i,r)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function BM(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=VM(e[0]),e.length>1&&(i=VM(e[e.length-1]))):e&&(n=VM(e)),n||i?new UM(t,n,i):null}let UM=(()=>{class t{constructor(e,n,i){this._element=e,this._startStyles=n,this._endStyles=i,this._state=0;let r=t.initialStylesByElement.get(e);r||t.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&PS(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(PS(this._element,this._initialStyles),this._endStyles&&(PS(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(kS(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(kS(this._element,this._endStyles),this._endStyles=null),PS(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function VM(t){let e=null;const n=Object.keys(t);for(let i=0;i<n.length;i++){const r=n[i];jM(r)&&(e=e||{},e[r]=t[r])}return e}function jM(t){return"display"===t||"position"===t}class zM{constructor(t,e,n,i,r,o,s){this._element=t,this._name=e,this._duration=n,this._delay=i,this._easing=r,this._fillMode=o,this._onDoneFn=s,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=YM(t,"").trim();n.length&&(function(t,e){let n=0;for(let i=0;i<t.length;i++)","===t.charAt(i)&&n++}(n),e=`${n}, ${e}`),$M(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),qM(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){HM(this._element,this._name,"paused")}resume(){HM(this._element,this._name,"running")}setPosition(t){const e=GM(this._element,this._name);this._position=t*this._duration,$M(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),qM(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=YM(t,"").split(","),i=WM(n,e);i>=0&&(n.splice(i,1),$M(t,"",n.join(",")))}(this._element,this._name))}}function HM(t,e,n){$M(t,"PlayState",n,GM(t,e))}function GM(t,e){const n=YM(t,"");return n.indexOf(",")>0?WM(n.split(","),e):WM([n],e)}function WM(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function qM(t,e,n){n?t.removeEventListener("animationend",e):t.addEventListener("animationend",e)}function $M(t,e,n,i){const r="animation"+e;if(null!=i){const e=t.style[r];if(e.length){const t=e.split(",");t[i]=n,n=t.join(",")}}t.style[r]=n}function YM(t,e){return t.style["animation"+e]}class QM{constructor(t,e,n,i,r,o,s,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=i,this._delay=r,this._finalStyles=s,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=o||"linear",this.totalTime=i+r,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new zM(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:jS(this.element,n))})}this.currentSnapshot=t}}class XM extends Mx{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=bS(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class KM{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return mS(t)}matchesElement(t,e){return gS(t,e)}containsElement(t,e){return vS(t,e)}query(t,e,n){return yS(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>bS(t));let i=`@keyframes ${e} {\n`,r="";n.forEach(t=>{r=" ";const e=parseFloat(t.offset);i+=`${r}${100*e}% {\n`,r+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(i+=`${r}animation-timing-function: ${n};\n`));default:return void(i+=`${r}${e}: ${n};\n`)}}),i+=`${r}}\n`}),i+="}\n";const o=document.createElement("style");return o.innerHTML=i,o}animate(t,e,n,i,r,o=[],s){s&&this._notifyFaultyScrubber();const a=o.filter(t=>t instanceof QM),l={};BS(n,i)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=US(t,e,l));if(0==n)return new XM(t,c);const u=`gen_css_kf_${this._count++}`,h=this.buildKeyframeElement(t,u,e);document.querySelector("head").appendChild(h);const d=BM(t,e),p=new QM(t,e,u,n,i,r,c,d);return p.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),p}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class ZM{constructor(t,e,n,i){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:jS(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class JM{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(tT().toString()),this._cssKeyframesDriver=new KM}validateStyleProperty(t){return mS(t)}matchesElement(t,e){return gS(t,e)}containsElement(t,e){return vS(t,e)}query(t,e,n){return yS(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,i,r,o=[],s){if(!s&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,i,r,o);const a={duration:n,delay:i,fill:0==i?"both":"forwards"};r&&(a.easing=r);const l={},c=o.filter(t=>t instanceof ZM);BS(n,i)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const u=BM(t,e=US(t,e=e.map(t=>SS(t,!1)),l));return new ZM(t,e,a,u)}}function tT(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let eT=(()=>{class t extends gx{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:ue.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?_x(t):t;return rT(this._renderer,null,e,"register",[n]),new nT(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(Yt(nl),Yt(rh))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class nT extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new iT(this._id,t,e||{},this._renderer)}}class iT{constructor(t,e,n,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return rT(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function rT(t,e,n,i,r){return t.setProperty(e,`@@${n}:${i}`,r)}let oT=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new sT("",n,this.engine),this._rendererCache.set(n,t)),t}const i=e.id,r=e.id+"-"+this._currentId;this._currentId++,this.engine.register(r,t);const o=e=>{Array.isArray(e)?e.forEach(o):this.engine.registerTrigger(i,r,t,e.name,e)};return e.data.animation.forEach(o),new aT(this,r,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(Yt(nl),Yt(NM),Yt(Su))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class sT{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,i){this.delegate.setAttribute(t,e,n,i)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,i){this.delegate.setStyle(t,e,n,i)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&"@.disabled"==e?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class aT extends sT{constructor(t,e,n,i){super(e,n,i),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&"@.disabled"==e?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const i=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let r=e.substr(1),o="";return"@"!=r.charAt(0)&&([r,o]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(r)),this.engine.listen(this.namespaceId,i,r,o,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let lT=(()=>{class t extends NM{constructor(t,e,n){super(t.body,e,n)}}return t.\u0275fac=function(e){return new(e||t)(Yt(rh),Yt(wS),Yt(uM))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const cT=new Bt("AnimationModuleType"),uT=[{provide:wS,useFactory:function(){return"function"==typeof tT()?new JM:new KM}},{provide:cT,useValue:"BrowserAnimations"},{provide:gx,useClass:eT},{provide:uM,useFactory:function(){return new hM}},{provide:NM,useClass:lT},{provide:nl,useFactory:function(t,e,n){return new oT(t,e,n)},deps:[mp,NM,Su]}];let hT=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:uT,imports:[Pp]}),t})();const dT=new al("9.2.2"),pT=new Bt("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let fT=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getDocument(){const t=this._document||document;return"object"==typeof t&&t?t:null}_getWindow(){const t=this._getDocument(),e=(null==t?void 0:t.defaultView)||window;return"object"==typeof e&&e?e:null}_checksAreEnabled(){return Oi()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){const t=this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype),e=this._getDocument();t&&e&&!e.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){const t=!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme,e=this._getDocument();if(t||!e||!e.body||"function"!=typeof getComputedStyle)return;const n=e.createElement("div");n.classList.add("mat-theme-loaded-marker"),e.body.appendChild(n);const i=getComputedStyle(n);i&&"none"!==i.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),e.body.removeChild(n)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&dT.full!==tS.full&&console.warn("The Angular Material version ("+dT.full+") does not match the Angular CDK version ("+tS.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)(Yt(ZE),Yt(pT,8),Yt(rh,8))},imports:[[Zx],Zx]}),t})();function mT(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Px(t)}}}function gT(t,e){return class extends t{constructor(...t){super(...t),this.color=e}get color(){return this._color}set color(t){const n=t||e;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}}}function vT(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Px(t)}}}function yT(t){return class extends t{constructor(...t){super(...t),this.errorState=!1,this.stateChanges=new C}updateErrorState(){const t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}}const bT=new Bt("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return Qt(fu)}});class _T{constructor(){this._localeChanges=new C}get localeChanges(){return this._localeChanges}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let n=this.isValid(t),i=this.isValid(e);return n&&i?!this.compareDate(t,e):n==i}return t==e}clampDate(t,e,n){return e&&this.compareDate(t,e)<0?e:n&&this.compareDate(t,n)>0?n:t}}const wT=new Bt("mat-date-formats");let AT;try{AT="undefined"!=typeof Intl}catch(NG){AT=!1}const xT={long:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"]},CT=MT(31,t=>String(t+1)),ET={long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"]},ST=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function MT(t,e){const n=Array(t);for(let i=0;i<t;i++)n[i]=e(i);return n}let TT=(()=>{class t extends _T{constructor(t,e){super(),this.useUtcForDisplay=!0,super.setLocale(t),this.useUtcForDisplay=!e.TRIDENT,this._clampDate=e.TRIDENT||e.EDGE}getYear(t){return t.getFullYear()}getMonth(t){return t.getMonth()}getDate(t){return t.getDate()}getDayOfWeek(t){return t.getDay()}getMonthNames(t){if(AT){const e=new Intl.DateTimeFormat(this.locale,{month:t,timeZone:"utc"});return MT(12,t=>this._stripDirectionalityCharacters(this._format(e,new Date(2017,t,1))))}return xT[t]}getDateNames(){if(AT){const t=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return MT(31,e=>this._stripDirectionalityCharacters(this._format(t,new Date(2017,0,e+1))))}return CT}getDayOfWeekNames(t){if(AT){const e=new Intl.DateTimeFormat(this.locale,{weekday:t,timeZone:"utc"});return MT(7,t=>this._stripDirectionalityCharacters(this._format(e,new Date(2017,0,t+1))))}return ET[t]}getYearName(t){if(AT){const e=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._stripDirectionalityCharacters(this._format(e,t))}return String(this.getYear(t))}getFirstDayOfWeek(){return 0}getNumDaysInMonth(t){return this.getDate(this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+1,0))}clone(t){return new Date(t.getTime())}createDate(t,e,n){if(e<0||e>11)throw Error(`Invalid month index "${e}". Month index has to be between 0 and 11.`);if(n<1)throw Error(`Invalid date "${n}". Date has to be greater than 0.`);let i=this._createDateWithOverflow(t,e,n);if(i.getMonth()!=e)throw Error(`Invalid date "${n}" for month with index "${e}".`);return i}today(){return new Date}parse(t){return"number"==typeof t?new Date(t):t?new Date(Date.parse(t)):null}format(t,e){if(!this.isValid(t))throw Error("NativeDateAdapter: Cannot format invalid date.");if(AT){this._clampDate&&(t.getFullYear()<1||t.getFullYear()>9999)&&(t=this.clone(t)).setFullYear(Math.max(1,Math.min(9999,t.getFullYear()))),e=Object.assign(Object.assign({},e),{timeZone:"utc"});const n=new Intl.DateTimeFormat(this.locale,e);return this._stripDirectionalityCharacters(this._format(n,t))}return this._stripDirectionalityCharacters(t.toDateString())}addCalendarYears(t,e){return this.addCalendarMonths(t,12*e)}addCalendarMonths(t,e){let n=this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+e,this.getDate(t));return this.getMonth(n)!=((this.getMonth(t)+e)%12+12)%12&&(n=this._createDateWithOverflow(this.getYear(n),this.getMonth(n),0)),n}addCalendarDays(t,e){return this._createDateWithOverflow(this.getYear(t),this.getMonth(t),this.getDate(t)+e)}toIso8601(t){return[t.getUTCFullYear(),this._2digit(t.getUTCMonth()+1),this._2digit(t.getUTCDate())].join("-")}deserialize(t){if("string"==typeof t){if(!t)return null;if(ST.test(t)){let e=new Date(t);if(this.isValid(e))return e}}return super.deserialize(t)}isDateInstance(t){return t instanceof Date}isValid(t){return!isNaN(t.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(t,e,n){const i=new Date(t,e,n);return t>=0&&t<100&&i.setFullYear(this.getYear(i)-1900),i}_2digit(t){return("00"+t).slice(-2)}_stripDirectionalityCharacters(t){return t.replace(/[\u200e\u200f]/g,"")}_format(t,e){const n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.format(n)}}return t.\u0275fac=function(e){return new(e||t)(Yt(bT,8),Yt(Vx))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),PT=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[{provide:_T,useClass:TT}],imports:[[jx]]}),t})();const kT={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let DT=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[{provide:wT,useValue:kT}],imports:[[PT]]}),t})(),OT=(()=>{class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),RT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),t})();function IT(t,e,n="mat"){t.changes.pipe(wf(t)).subscribe(({length:t})=>{LT(e,`${n}-2-line`,!1),LT(e,`${n}-3-line`,!1),LT(e,`${n}-multi-line`,!1),2===t||3===t?LT(e,`${n}-${t}-line`,!0):t>3&&LT(e,`${n}-multi-line`,!0)})}function LT(t,e,n){const i=t.nativeElement.classList;n?i.add(e):i.remove(e)}let FT=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[fT],fT]}),t})();class NT{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const BT={enterDuration:450,exitDuration:400},UT=$x({passive:!0}),VT=["mousedown","touchstart"],jT=["mouseup","mouseleave","touchend","touchcancel"];class zT{constructor(t,e,n,i){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Rx(n))}fadeInRipple(t,e,n={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=Object.assign(Object.assign({},BT),n.animation);n.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);const o=n.radius||function(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(t,e,i),s=t-i.left,a=e-i.top,l=r.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=`${s-o}px`,c.style.top=`${a-o}px`,c.style.height=`${2*o}px`,c.style.width=`${2*o}px`,null!=n.color&&(c.style.backgroundColor=n.color),c.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const u=new NT(this,c,n);return u.state=0,this._activeRipples.add(u),n.persistent||(this._mostRecentTransientRipple=u),this._runTimeoutOutsideZone(()=>{const t=u===this._mostRecentTransientRipple;u.state=1,n.persistent||t&&this._isPointerDown||u.fadeOut()},l),u}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,i=Object.assign(Object.assign({},BT),t.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}setupTriggerEvents(t){const e=Rx(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(VT))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(jT),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=qE(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,UT)})})}_removeTriggerEvents(){this._triggerElement&&(VT.forEach(t=>{this._triggerElement.removeEventListener(t,this,UT)}),this._pointerUpEventsRegistered&&jT.forEach(t=>{this._triggerElement.removeEventListener(t,this,UT)}))}}const HT=new Bt("mat-ripple-global-options");let GT=(()=>{class t{constructor(t,e,n,i,r){this._elementRef=t,this._animationMode=r,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new zT(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(Su),Ns(Vx),Ns(HT,8),Ns(cT,8))},t.\u0275dir=_e({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&va("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),WT=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[fT,jx],fT]}),t})(),qT=(()=>{class t{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return t.\u0275fac=function(e){return new(e||t)(Ns(cT,8))},t.\u0275cmp=fe({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,e){2&t&&va("mat-pseudo-checkbox-indeterminate","indeterminate"===e.state)("mat-pseudo-checkbox-checked","checked"===e.state)("mat-pseudo-checkbox-disabled",e.disabled)("_mat-animation-noopable","NoopAnimations"===e._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,e){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),t})(),$T=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)}}),t})();const YT=new Bt("mat-label-global-options");function QT(t,e){}class XT{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const KT={dialogContainer:vx("dialogContainer",[Ax("void, exit",wx({opacity:0,transform:"scale(0.7)"})),Ax("enter",wx({transform:"none"})),xx("* => enter",yx("150ms cubic-bezier(0, 0, 0.2, 1)",wx({transform:"none",opacity:1}))),xx("* => void, * => exit",yx("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",wx({opacity:0})))])};function ZT(){throw Error("Attempting to attach dialog content after content is already attached")}let JT=(()=>{class t extends $C{constructor(t,e,n,i,r){super(),this._elementRef=t,this._focusTrapFactory=e,this._changeDetectorRef=n,this._config=r,this._elementFocusedBeforeDialogWasOpened=null,this._state="enter",this._animationStateChanged=new Fc,this.attachDomPortal=t=>(this._portalOutlet.hasAttached()&&ZT(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachDomPortal(t)),this._ariaLabelledBy=r.ariaLabelledBy||null,this._document=i}attachComponentPortal(t){return this._portalOutlet.hasAttached()&&ZT(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached()&&ZT(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._getFocusTrap().focusInitialElement()||this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._getFocusTrap().focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const e=this._document.activeElement,n=this._elementRef.nativeElement;e&&e!==this._document.body&&e!==n&&!n.contains(e)||t.focus()}this._focusTrap&&this._focusTrap.destroy()}_savePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then(()=>this._elementRef.nativeElement.focus()))}_containsFocus(){const t=this._elementRef.nativeElement,e=this._document.activeElement;return t===e||t.contains(e)}_getFocusTrap(){return this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)),this._focusTrap}_onAnimationDone(t){"enter"===t.toState?this._trapFocus():"exit"===t.toState&&this._restoreFocus(),this._animationStateChanged.emit(t)}_onAnimationStart(t){this._animationStateChanged.emit(t)}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(VE),Ns(os),Ns(rh,8),Ns(XT))},t.\u0275cmp=fe({type:t,selectors:[["mat-dialog-container"]],viewQuery:function(t,e){var n;1&t&&Yc(QC,!0),2&t&&$c(n=tu())&&(e._portalOutlet=n.first)},hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,e){1&t&&Ks("@dialogContainer.start",(function(t){return e._onAnimationStart(t)}))("@dialogContainer.done",(function(t){return e._onAnimationDone(t)})),2&t&&(Rs("id",e._id)("role",e._config.role)("aria-labelledby",e._config.ariaLabel?null:e._ariaLabelledBy)("aria-label",e._config.ariaLabel)("aria-describedby",e._config.ariaDescribedBy||null),Fa("@dialogContainer",e._state))},features:[Ba],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&Ls(0,QT,0,0,"ng-template",0)},directives:[QC],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[KT.dialogContainer]}}),t})(),tP=0;class eP{constructor(t,e,n=`mat-dialog-${tP++}`){this._overlayRef=t,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new C,this._afterClosed=new C,this._beforeClosed=new C,this._state=0,e._id=n,e._animationStateChanged.pipe(Hp(t=>"done"===t.phaseName&&"enter"===t.toState),af(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(Hp(t=>"done"===t.phaseName&&"exit"===t.toState),af(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(Hp(t=>27===t.keyCode&&!this.disableClose&&!ZC(t))).subscribe(t=>{t.preventDefault(),this.close()}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():this.close()})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Hp(t=>"start"===t.phaseName),af(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._containerInstance._startExitAnimation(),this._state=1}afterOpened(){return this._afterOpened.asObservable()}afterClosed(){return this._afterClosed.asObservable()}beforeClosed(){return this._beforeClosed.asObservable()}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._getPositionStrategy().width(t).height(e),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}const nP=new Bt("MatDialogData"),iP=new Bt("mat-dialog-default-options"),rP=new Bt("mat-dialog-scroll-strategy"),oP={provide:rP,deps:[CE],useFactory:function(t){return()=>t.scrollStrategies.block()}};let sP=(()=>{class t{constructor(t,e,n,i,r,o,s){this._overlay=t,this._injector=e,this._defaultOptions=i,this._parentDialog=o,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new C,this._afterOpenedAtThisLevel=new C,this._ariaHiddenElements=new Map,this.afterAllClosed=jp(()=>this.openDialogs.length?this._afterAllClosed:this._afterAllClosed.pipe(wf(void 0))),this._scrollStrategy=r}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}get _afterAllClosed(){const t=this._parentDialog;return t?t._afterAllClosed:this._afterAllClosedAtThisLevel}open(t,e){if((e=function(t,e){return Object.assign(Object.assign({},e),t)}(e,this._defaultOptions||new XT)).id&&this.getDialogById(e.id))throw Error(`Dialog with id "${e.id}" exists already. The dialog id must be unique.`);const n=this._createOverlay(e),i=this._attachDialogContainer(n,e),r=this._attachDialogContent(t,i,n,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(r),r.afterClosed().subscribe(()=>this._removeOpenDialog(r)),this.afterOpened.next(r),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(e=>e.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const e=this._getOverlayConfig(t);return this._overlay.create(e)}_getOverlayConfig(t){const e=new aE({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}_attachDialogContainer(t,e){const n=As.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:XT,useValue:e}]}),i=new GC(JT,e.viewContainerRef,n,e.componentFactoryResolver);return t.attach(i).instance}_attachDialogContent(t,e,n,i){const r=new eP(n,e,i.id);if(t instanceof Cl)e.attachTemplatePortal(new WC(t,null,{$implicit:i.data,dialogRef:r}));else{const n=this._createInjector(i,r,e),o=e.attachComponentPortal(new GC(t,i.viewContainerRef,n));r.componentInstance=o.instance}return r.updateSize(i.width,i.height).updatePosition(i.position),r}_createInjector(t,e,n){const i=t&&t.viewContainerRef&&t.viewContainerRef.injector,r=[{provide:JT,useValue:n},{provide:nP,useValue:t.data},{provide:eP,useValue:e}];return!t.direction||i&&i.get(Xx,null)||r.push({provide:Xx,useValue:{value:t.direction,change:Op()}}),As.create({parent:i||this._injector,providers:r})}_removeOpenDialog(t){const e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._afterAllClosed.next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const e=t.parentElement.children;for(let n=e.length-1;n>-1;n--){let i=e[n];i===t||"SCRIPT"===i.nodeName||"STYLE"===i.nodeName||i.hasAttribute("aria-live")||(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let e=t.length;for(;e--;)t[e].close()}}return t.\u0275fac=function(e){return new(e||t)(Yt(CE),Yt(As),Yt(bh,8),Yt(iP,8),Yt(rP),Yt(t,12),Yt(fE))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),aP=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[sP,oP],imports:[[SE,XC,fT],fT]}),t})(),lP=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}ngOnInit(){this.info=this.data.info,this.img=this.data.img,this.name=this.data.name,console.log(this.data)}}return t.\u0275fac=function(e){return new(e||t)(Ns(eP),Ns(nP,8))},t.\u0275cmp=fe({type:t,selectors:[["app-host-profile-modal"]],decls:7,vars:3,consts:[[1,"bio","p-3"],["alt","",1,"img",3,"src"],[1,"name","mt-3"],[1,"hr-rule","mt-1"],[1,"info"]],template:function(t,e){1&t&&(js(0,"div",0),Hs(1,"img",1),js(2,"h3",2),ka(3),zs(),Hs(4,"hr",3),js(5,"p",4),ka(6),zs(),zs()),2&t&&(Cr(1),aa("src",e.img,rr),Cr(2),Da(e.name),Cr(3),Da(e.info))},styles:[".bio[_ngcontent-%COMP%]{color:#000}.bio[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.bio[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:2em}"]}),t})(),cP=0,uP=(()=>{class t{constructor(){this._stateChanges=new C,this._openCloseAllActions=new C,this.id=`cdk-accordion-${cP++}`,this._multi=!1}get multi(){return this._multi}set multi(t){this._multi=Px(t)}openAll(){this._openCloseAll(!0)}closeAll(){this._openCloseAll(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete()}_openCloseAll(t){this.multi&&this._openCloseAllActions.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[Re]}),t})(),hP=0,dP=(()=>{class t{constructor(t,e,n){this.accordion=t,this._changeDetectorRef=e,this._expansionDispatcher=n,this._openCloseAllSubscription=d.EMPTY,this.closed=new Fc,this.opened=new Fc,this.destroyed=new Fc,this.expandedChange=new Fc,this.id=`cdk-accordion-child-${hP++}`,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=n.listen((t,e)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===e&&this.id!==t&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=Px(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=Px(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return t.\u0275fac=function(e){return new(e||t)(Ns(uP,12),Ns(os),Ns(tC))},t.\u0275dir=_e({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Xa([{provide:uP,useValue:void 0}])]}),t})(),pP=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)}}),t})();const fP=["body"];function mP(t,e){}const gP=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],vP=["mat-expansion-panel-header","*","mat-action-row"],yP=function(t,e){return{collapsedHeight:t,expandedHeight:e}},bP=function(t,e){return{value:t,params:e}};function _P(t,e){1&t&&Hs(0,"span",2),2&t&&Us("@indicatorRotate",ea()._getExpandedState())}const wP=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],AP=["mat-panel-title","mat-panel-description","*"],xP=new Bt("MAT_ACCORDION"),CP={indicatorRotate:vx("indicatorRotate",[Ax("collapsed, void",wx({transform:"rotate(0deg)"})),Ax("expanded",wx({transform:"rotate(180deg)"})),xx("expanded <=> collapsed, void => collapsed",yx("225ms cubic-bezier(0.4,0.0,0.2,1)"))]),expansionHeaderHeight:vx("expansionHeight",[Ax("collapsed, void",wx({height:"{{collapsedHeight}}"}),{params:{collapsedHeight:"48px"}}),Ax("expanded",wx({height:"{{expandedHeight}}"}),{params:{expandedHeight:"64px"}}),xx("expanded <=> collapsed, void => collapsed",bx([Ex("@indicatorRotate",Cx(),{optional:!0}),yx("225ms cubic-bezier(0.4,0.0,0.2,1)")]))]),bodyExpansion:vx("bodyExpansion",[Ax("collapsed, void",wx({height:"0px",visibility:"hidden"})),Ax("expanded",wx({height:"*",visibility:"visible"})),xx("expanded <=> collapsed, void => collapsed",yx("225ms cubic-bezier(0.4,0.0,0.2,1)"))])};let EP=(()=>{class t{constructor(t){this._template=t}}return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","matExpansionPanelContent",""]]}),t})(),SP=0;const MP=new Bt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let TP=(()=>{class t extends dP{constructor(t,e,n,i,r,o,s){super(t,e,n),this._viewContainerRef=i,this._animationMode=o,this._hideToggle=!1,this.afterExpand=new Fc,this.afterCollapse=new Fc,this._inputChanges=new C,this._headerId=`mat-expansion-panel-header-${SP++}`,this._bodyAnimationDone=new C,this.accordion=t,this._document=r,this._bodyAnimationDone.pipe(c_((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{"void"!==t.fromState&&("expanded"===t.toState?this.afterExpand.emit():"collapsed"===t.toState&&this.afterCollapse.emit())}),s&&(this.hideToggle=s.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=Px(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(wf(null),Hp(()=>this.expanded&&!this._portal),af(1)).subscribe(()=>{this._portal=new WC(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,e=this._body.nativeElement;return t===e||e.contains(t)}return!1}}return t.\u0275fac=function(e){return new(e||t)(Ns(xP,12),Ns(os),Ns(tC),Ns(Sl),Ns(rh),Ns(cT,8),Ns(MP,8))},t.\u0275cmp=fe({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,EP,!0),2&t&&$c(i=tu())&&(e._lazyContent=i.first)},viewQuery:function(t,e){var n;1&t&&Qc(fP,!0),2&t&&$c(n=tu())&&(e._body=n.first)},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,e){2&t&&va("mat-expanded",e.expanded)("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-expansion-panel-spacing",e._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Xa([{provide:xP,useValue:void 0}]),Ba,Re],ngContentSelectors:vP,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,e){1&t&&(ia(gP),sa(0),js(1,"div",0,1),Xs("@bodyExpansion.done",(function(t){return e._bodyAnimationDone.next(t)})),js(3,"div",2),sa(4,1),Ls(5,mP,0,0,"ng-template",3),zs(),sa(6,2),zs()),2&t&&(Cr(1),Us("@bodyExpansion",e._getExpandedState())("id",e.id),Rs("aria-labelledby",e._headerId),Cr(4),Us("cdkPortalOutlet",e._portal))},directives:[QC],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[CP.bodyExpansion]},changeDetection:0}),t})(),PP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["mat-action-row"]],hostAttrs:[1,"mat-action-row"]}),t})(),kP=(()=>{class t{constructor(t,e,n,i,r){this.panel=t,this._element=e,this._focusMonitor=n,this._changeDetectorRef=i,this._parentChangeSubscription=d.EMPTY,this._animationsDisabled=!0;const o=t.accordion?t.accordion._stateChanges.pipe(Hp(t=>!(!t.hideToggle&&!t.togglePosition))):Up;this._parentChangeSubscription=q(t.opened,t.closed,o,t._inputChanges.pipe(Hp(t=>!!(t.hideToggle||t.disabled||t.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Hp(()=>t._containsFocus())).subscribe(()=>n.focusVia(e,"program")),n.monitor(e).subscribe(e=>{e&&t.accordion&&t.accordion._handleHeaderFocus(this)}),r&&(this.expandedHeight=r.expandedHeight,this.collapsedHeight=r.collapsedHeight)}_animationStarted(){this._animationsDisabled=!1}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_keydown(t){switch(t.keyCode){case 32:case 13:ZC(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t="program",e){this._focusMonitor.focusVia(this._element,t,e)}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return t.\u0275fac=function(e){return new(e||t)(Ns(TP,1),Ns(tl),Ns(QE),Ns(os),Ns(MP,8))},t.\u0275cmp=fe({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:19,hostBindings:function(t,e){1&t&&(Ks("@expansionHeight.start",(function(){return e._animationStarted()})),Xs("click",(function(){return e._toggle()}))("keydown",(function(t){return e._keydown(t)}))),2&t&&(Rs("id",e.panel._headerId)("tabindex",e.disabled?-1:0)("aria-controls",e._getPanelId())("aria-expanded",e._isExpanded())("aria-disabled",e.panel.disabled),Fa("@.disabled",e._animationsDisabled)("@expansionHeight",Mc(16,bP,e._getExpandedState(),Mc(13,yP,e.collapsedHeight,e.expandedHeight))),va("mat-expanded",e._isExpanded())("mat-expansion-toggle-indicator-after","after"===e._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===e._getTogglePosition()))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},ngContentSelectors:AP,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,e){1&t&&(ia(wP),js(0,"span",0),sa(1),sa(2,1),sa(3,2),zs(),Ls(4,_P,1,1,"span",1)),2&t&&(Cr(4),Us("ngIf",e._showToggle()))},directives:[md],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;position:relative}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}\n'],encapsulation:2,data:{animation:[CP.indicatorRotate,CP.expansionHeaderHeight]},changeDetection:0}),t})(),DP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),t})(),OP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),t})(),RP=(()=>{class t extends uP{constructor(){super(...arguments),this._ownHeaders=new Bc,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(t){this._hideToggle=Px(t)}ngAfterContentInit(){this._headers.changes.pipe(wf(this._headers)).subscribe(t=>{this._ownHeaders.reset(t.filter(t=>t.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new LE(this._ownHeaders).withWrap()}_handleHeaderKeydown(t){const{keyCode:e}=t,n=this._keyManager;36===e?ZC(t)||(n.setFirstItemActive(),t.preventDefault()):35===e?ZC(t)||(n.setLastItemActive(),t.preventDefault()):this._keyManager.onKeydown(t)}_handleHeaderFocus(t){this._keyManager.updateActiveItem(t)}}return t.\u0275fac=function(e){return IP(e||t)},t.\u0275dir=_e({type:t,selectors:[["mat-accordion"]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,kP,!0),2&t&&$c(i=tu())&&(e._headers=i)},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(t,e){2&t&&va("mat-accordion-multi",e.multi)},inputs:{multi:"multi",displayMode:"displayMode",togglePosition:"togglePosition",hideToggle:"hideToggle"},exportAs:["matAccordion"],features:[Xa([{provide:xP,useExisting:t}]),Ba]}),t})();const IP=gi(RP);let LP=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd,pP,XC]]}),t})();var FP=i("Iab2");const NP=new b(hf);class BP{call(t,e){return e.subscribe(new UP(t))}}class UP extends L{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){let e=t[n],i=I(this,e,e,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}}notifyNext(t,e,n,i,r){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}function VP(t,e=Rv){var n;const i=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new jP(i,e))}class jP{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new zP(t,this.delay,this.scheduler))}}class zP extends m{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,i=t.scheduler,r=t.destination;for(;n.length>0&&n[0].time-i.now()<=0;)n.shift().notification.observe(r);if(n.length>0){const e=Math.max(0,n[0].time-i.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(zP.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new HP(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(wv.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(wv.createComplete()),this.unsubscribe()}}class HP{constructor(t,e){this.time=t,this.notification=e}}function GP(t,e){}function WP(t,e){if(1&t&&(js(0,"button",3),ka(1),Ls(2,GP,0,0,"ng-template",4),zs()),2&t){const t=e.$implicit;Us("ngbPanelToggle",t),Cr(1),Oa(" ",t.title,""),Cr(1),Us("ngTemplateOutlet",null==t.titleTpl?null:t.titleTpl.templateRef)}}function qP(t,e){}function $P(t,e){}function YP(t,e){if(1&t&&(js(0,"div",8),js(1,"div",9),Ls(2,$P,0,0,"ng-template",4),zs(),zs()),2&t){const t=ea().$implicit;va("show",t.isOpen),aa("id",t.id),Rs("aria-labelledby",t.id+"-header"),Cr(2),Us("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)}}const QP=function(t,e){return{$implicit:t,opened:e}};function XP(t,e){if(1&t&&(js(0,"div"),js(1,"div",5),Ls(2,qP,0,0,"ng-template",6),zs(),Ls(3,YP,3,5,"div",7),zs()),2&t){const t=e.$implicit,n=ea(),i=Fs(1);ya("card "+(t.cardClass||"")),Cr(1),ya("card-header "+(t.type?"bg-"+t.type:n.type?"bg-"+n.type:"")),la("id","",t.id,"-header"),Cr(1),Us("ngTemplateOutlet",(null==t.headerTpl?null:t.headerTpl.templateRef)||i)("ngTemplateOutletContext",Mc(8,QP,t,t.isOpen)),Cr(1),Us("ngIf",!n.destroyOnHide||t.isOpen)}}const KP=["aria-label",$localize`:@@ngb.alert.close␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`];function ZP(t,e){if(1&t){const t=$s();js(0,"button",1),uc(1,KP),Xs("click",(function(){return on(t),ea().closeHandler()})),js(2,"span",2),ka(3,"\xd7"),zs(),zs()}}const JP=["*"];function tk(t,e){if(1&t){const t=$s();js(0,"li",7),Xs("click",(function(){on(t);const n=e.$implicit,i=ea(2);return i.select(n.id,i.NgbSlideEventSource.INDICATOR)})),zs()}if(2&t){const t=e.$implicit,n=ea(2);va("active",t.id===n.activeId),Us("id",t.id)}}function ek(t,e){if(1&t&&(js(0,"ol",5),Ls(1,tk,1,3,"li",6),zs()),2&t){const t=ea();Cr(1),Us("ngForOf",t.slides)}}function nk(t,e){}function ik(t,e){if(1&t&&(js(0,"div",8),Ls(1,nk,0,0,"ng-template",9),zs()),2&t){const t=e.$implicit,n=ea();va("active",t.id===n.activeId),Cr(1),Us("ngTemplateOutlet",t.tplRef)}}var rk,ok;function sk(t,e){if(1&t){const t=$s();js(0,"a",10),Xs("click",(function(){on(t);const e=ea();return e.prev(e.NgbSlideEventSource.ARROW_LEFT)})),Hs(1,"span",11),js(2,"span",12),cc(3,rk),zs(),zs()}}function ak(t,e){if(1&t){const t=$s();js(0,"a",13),Xs("click",(function(){on(t);const e=ea();return e.next(e.NgbSlideEventSource.ARROW_RIGHT)})),Hs(1,"span",14),js(2,"span",12),cc(3,ok),zs(),zs()}}rk=$localize`:@@ngb.carousel.previous␟680d5c75b7fd8d37961083608b9fcdc4167b4c43␟4452427314943113135:Previous`,ok=$localize`:@@ngb.carousel.next␟f732c304c7433e5a83ffcd862c3dce709a0f4982␟3885497195825665706:Next`;const lk=["defaultDayTemplate"],ck=["content"];function uk(t,e){if(1&t&&Hs(0,"div",7),2&t){const t=e.currentMonth,n=e.selected,i=e.disabled,r=e.focused;Us("date",e.date)("currentMonth",t)("selected",n)("disabled",i)("focused",r)}}function hk(t,e){if(1&t&&(js(0,"div",12),ka(1),zs()),2&t){const t=ea().$implicit,e=ea(2);Cr(1),Ra(" ",e.i18n.getMonthFullName(t.number,t.year)," ",e.i18n.getYearNumerals(t.year)," ")}}function dk(t,e){if(1&t&&(js(0,"div",9),Ls(1,hk,2,2,"div",10),Hs(2,"ngb-datepicker-month",11),zs()),2&t){const t=e.$implicit,n=ea(2);Cr(1),Us("ngIf","none"===n.navigation||n.displayMonths>1&&"select"===n.navigation),Cr(1),Us("month",t.firstDate)}}function pk(t,e){1&t&&Ls(0,dk,3,2,"div",8),2&t&&Us("ngForOf",ea().model.months)}function fk(t,e){if(1&t){const t=$s();js(0,"ngb-datepicker-navigation",13),Xs("navigate",(function(e){return on(t),ea().onNavigateEvent(e)}))("select",(function(e){return on(t),ea().onNavigateDateSelect(e)})),zs()}if(2&t){const t=ea();Us("date",t.model.firstDate)("months",t.model.months)("disabled",t.model.disabled)("showSelect","select"===t.model.navigation)("prevDisabled",t.model.prevDisabled)("nextDisabled",t.model.nextDisabled)("selectBoxes",t.model.selectBoxes)}}function mk(t,e){}function gk(t,e){}function vk(t,e){1&t&&Hs(0,"div",5)}function yk(t,e){if(1&t&&(js(0,"div",6),ka(1),zs()),2&t){const t=e.$implicit,n=ea(2);Cr(1),Oa(" ",n.i18n.getWeekdayShortName(t)," ")}}function bk(t,e){if(1&t&&(js(0,"div",2),Ls(1,vk,1,0,"div",3),Ls(2,yk,2,1,"div",4),zs()),2&t){const t=ea();Cr(1),Us("ngIf",t.datepicker.showWeekNumbers),Cr(1),Us("ngForOf",t.viewModel.weekdays)}}function _k(t,e){if(1&t&&(js(0,"div",11),ka(1),zs()),2&t){const t=ea(2).$implicit,e=ea();Cr(1),Da(e.i18n.getWeekNumerals(t.number))}}function wk(t,e){}function Ak(t,e){if(1&t&&Ls(0,wk,0,0,"ng-template",14),2&t){const t=ea().$implicit;Us("ngTemplateOutlet",ea(3).datepicker.dayTemplate)("ngTemplateOutletContext",t.context)}}function xk(t,e){if(1&t){const t=$s();js(0,"div",12),Xs("click",(function(n){on(t);const i=e.$implicit;return ea(3).doSelect(i),n.preventDefault()})),Ls(1,Ak,1,2,"ng-template",13),zs()}if(2&t){const t=e.$implicit;va("disabled",t.context.disabled)("hidden",t.hidden)("ngb-dp-today",t.context.today),Us("tabindex",t.tabindex),Rs("aria-label",t.ariaLabel),Cr(1),Us("ngIf",!t.hidden)}}function Ck(t,e){if(1&t&&(js(0,"div",8),Ls(1,_k,2,1,"div",9),Ls(2,xk,2,9,"div",10),zs()),2&t){const t=ea().$implicit,e=ea();Cr(1),Us("ngIf",e.datepicker.showWeekNumbers),Cr(1),Us("ngForOf",t.days)}}function Ek(t,e){1&t&&Ls(0,Ck,3,2,"div",7),2&t&&Us("ngIf",!e.$implicit.collapsed)}const Sk=["aria-label",$localize`:@@ngb.datepicker.previous-month␟c3b08b07b5ab98e7cdcf18df39355690ab7d3884␟8586908745456864217:Previous month`,"title",$localize`:@@ngb.datepicker.previous-month␟c3b08b07b5ab98e7cdcf18df39355690ab7d3884␟8586908745456864217:Previous month`],Mk=["aria-label",$localize`:@@ngb.datepicker.next-month␟4bd046985cfe13040d5ef0cd881edce0968a111a␟3628374603023447227:Next month`,"title",$localize`:@@ngb.datepicker.next-month␟4bd046985cfe13040d5ef0cd881edce0968a111a␟3628374603023447227:Next month`];function Tk(t,e){if(1&t){const t=$s();js(0,"ngb-datepicker-navigation-select",6),Xs("select",(function(e){return on(t),ea().select.emit(e)})),zs()}if(2&t){const t=ea();Us("date",t.date)("disabled",t.disabled)("months",t.selectBoxes.months)("years",t.selectBoxes.years)}}function Pk(t,e){1&t&&Hs(0,"div",0)}function kk(t,e){1&t&&Hs(0,"div",0)}function Dk(t,e){if(1&t&&(Ls(0,Pk,1,0,"div",8),js(1,"div",9),ka(2),zs(),Ls(3,kk,1,0,"div",8)),2&t){const t=e.$implicit,n=e.index,i=ea(2);Us("ngIf",n>0),Cr(2),Ra(" ",i.i18n.getMonthFullName(t.number,t.year)," ",i.i18n.getYearNumerals(t.year)," "),Cr(1),Us("ngIf",n!==i.months.length-1)}}function Ok(t,e){1&t&&Ls(0,Dk,4,4,"ng-template",7),2&t&&Us("ngForOf",ea().months)}const Rk=["ngbDatepickerDayView",""],Ik=["month"],Lk=["year"],Fk=["aria-label",$localize`:@@ngb.datepicker.select-month␟1dbc84807f35518112f62e5775d1daebd3d8462b␟2253869508135064750:Select month`,"title",$localize`:@@ngb.datepicker.select-month␟1dbc84807f35518112f62e5775d1daebd3d8462b␟2253869508135064750:Select month`],Nk=["aria-label",$localize`:@@ngb.datepicker.select-year␟8ceb09d002bf0c5d1cac171dfbffe1805d2b3962␟8852264961585484321:Select year`,"title",$localize`:@@ngb.datepicker.select-year␟8ceb09d002bf0c5d1cac171dfbffe1805d2b3962␟8852264961585484321:Select year`];function Bk(t,e){if(1&t&&(js(0,"option",4),ka(1),zs()),2&t){const t=e.$implicit,n=ea();Us("value",t),Rs("aria-label",n.i18n.getMonthFullName(t,null==n.date?null:n.date.year)),Cr(1),Da(n.i18n.getMonthShortName(t,null==n.date?null:n.date.year))}}function Uk(t,e){if(1&t&&(js(0,"option",4),ka(1),zs()),2&t){const t=e.$implicit,n=ea();Us("value",t),Cr(1),Da(n.i18n.getYearNumerals(t))}}const Vk=["dialog"],jk=["ngbNavOutlet",""];function zk(t,e){}const Hk=function(t){return{$implicit:t}};function Gk(t,e){if(1&t&&(js(0,"div",2),Ls(1,zk,0,0,"ng-template",3),zs()),2&t){const t=ea().$implicit,e=ea();va("active",t.active),Us("id",t.panelDomId),Rs("role",e.paneRole?e.paneRole:e.nav.roles?"tabpanel":void 0)("aria-labelledby",t.domId),Cr(1),Us("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)("ngTemplateOutletContext",Sc(7,Hk,t.active))}}function Wk(t,e){1&t&&Ls(0,Gk,2,9,"div",1),2&t&&Us("ngIf",e.$implicit.isPanelInDom())}var qk,$k,Yk,Qk;function Xk(t,e){1&t&&(js(0,"span",8),cc(1,qk),zs())}function Kk(t,e){1&t&&(js(0,"span",8),cc(1,$k),zs())}function Zk(t,e){1&t&&(js(0,"span",8),cc(1,Yk),zs())}function Jk(t,e){1&t&&(js(0,"span",8),cc(1,Qk),zs())}function tD(t,e){1&t&&ka(0,"...")}function eD(t,e){1&t&&(js(0,"span",10),ka(1,"(current)"),zs())}function nD(t,e){if(1&t&&(ka(0),Ls(1,eD,2,0,"span",9)),2&t){const t=e.$implicit,n=e.currentPage;Oa(" ",t," "),Cr(1),Us("ngIf",t===n)}}qk=$localize`:@@ngb.pagination.first␟656506dfd46380956a655f919f1498d018f75ca0␟6867721956102594380:««`,$k=$localize`:@@ngb.pagination.previous␟6e52b6ee77a4848d899dd21b591c6fd499e3aef3␟6479320895410098858:«`,Yk=$localize`:@@ngb.pagination.next␟ba9cbb4ff311464308a3627e4f1c3345d9fe6d7d␟5458177150283468089:»`,Qk=$localize`:@@ngb.pagination.last␟49f27a460bc97e7e00be5b37098bfa79884fc7d9␟5277020320267646988:»»`;const iD=["aria-label",$localize`:@@ngb.pagination.first-aria␟f2f852318759c6396b5d3d17031d53817d7b38cc␟2241508602425256033:First`];function rD(t,e){}const oD=function(t,e){return{disabled:t,currentPage:e}};function sD(t,e){if(1&t){const t=$s();js(0,"li",11),js(1,"a",12),uc(2,iD),Xs("click",(function(e){return on(t),ea().selectPage(1),e.preventDefault()})),Ls(3,rD,0,0,"ng-template",13),zs(),zs()}if(2&t){const t=ea(),e=Fs(1);va("disabled",t.previousDisabled()),Cr(1),Rs("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),Cr(2),Us("ngTemplateOutlet",(null==t.tplFirst?null:t.tplFirst.templateRef)||e)("ngTemplateOutletContext",Mc(6,oD,t.previousDisabled(),t.page))}}const aD=["aria-label",$localize`:@@ngb.pagination.previous-aria␟680d5c75b7fd8d37961083608b9fcdc4167b4c43␟4452427314943113135:Previous`];function lD(t,e){}const cD=function(t){return{disabled:t}};function uD(t,e){if(1&t){const t=$s();js(0,"li",11),js(1,"a",12),uc(2,aD),Xs("click",(function(e){on(t);const n=ea();return n.selectPage(n.page-1),e.preventDefault()})),Ls(3,lD,0,0,"ng-template",13),zs(),zs()}if(2&t){const t=ea(),e=Fs(3);va("disabled",t.previousDisabled()),Cr(1),Rs("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),Cr(2),Us("ngTemplateOutlet",(null==t.tplPrevious?null:t.tplPrevious.templateRef)||e)("ngTemplateOutletContext",Sc(6,cD,t.previousDisabled()))}}function hD(t,e){}const dD=function(t){return{disabled:!0,currentPage:t}};function pD(t,e){if(1&t&&(js(0,"a",16),Ls(1,hD,0,0,"ng-template",13),zs()),2&t){const t=ea(2),e=Fs(9);Cr(1),Us("ngTemplateOutlet",(null==t.tplEllipsis?null:t.tplEllipsis.templateRef)||e)("ngTemplateOutletContext",Sc(2,dD,t.page))}}function fD(t,e){}const mD=function(t,e,n){return{disabled:t,$implicit:e,currentPage:n}};function gD(t,e){if(1&t){const t=$s();js(0,"a",17),Xs("click",(function(e){on(t);const n=ea().$implicit;return ea().selectPage(n),e.preventDefault()})),Ls(1,fD,0,0,"ng-template",13),zs()}if(2&t){const t=ea().$implicit,e=ea(),n=Fs(11);Rs("tabindex",e.disabled?"-1":null)("aria-disabled",e.disabled?"true":null),Cr(1),Us("ngTemplateOutlet",(null==e.tplNumber?null:e.tplNumber.templateRef)||n)("ngTemplateOutletContext",Tc(4,mD,e.disabled,t,e.page))}}function vD(t,e){if(1&t&&(js(0,"li",11),Ls(1,pD,2,4,"a",14),Ls(2,gD,2,8,"a",15),zs()),2&t){const t=e.$implicit,n=ea();va("active",t===n.page)("disabled",n.isEllipsis(t)||n.disabled),Rs("aria-current",t===n.page?"page":null),Cr(1),Us("ngIf",n.isEllipsis(t)),Cr(1),Us("ngIf",!n.isEllipsis(t))}}const yD=["aria-label",$localize`:@@ngb.pagination.next-aria␟f732c304c7433e5a83ffcd862c3dce709a0f4982␟3885497195825665706:Next`];function bD(t,e){}function _D(t,e){if(1&t){const t=$s();js(0,"li",11),js(1,"a",12),uc(2,yD),Xs("click",(function(e){on(t);const n=ea();return n.selectPage(n.page+1),e.preventDefault()})),Ls(3,bD,0,0,"ng-template",13),zs(),zs()}if(2&t){const t=ea(),e=Fs(5);va("disabled",t.nextDisabled()),Cr(1),Rs("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),Cr(2),Us("ngTemplateOutlet",(null==t.tplNext?null:t.tplNext.templateRef)||e)("ngTemplateOutletContext",Mc(6,oD,t.nextDisabled(),t.page))}}const wD=["aria-label",$localize`:@@ngb.pagination.last-aria␟5c729788ba138508aca1bec050b610f7bf81db3e␟4882268002141858767:Last`];function AD(t,e){}function xD(t,e){if(1&t){const t=$s();js(0,"li",11),js(1,"a",12),uc(2,wD),Xs("click",(function(e){on(t);const n=ea();return n.selectPage(n.pageCount),e.preventDefault()})),Ls(3,AD,0,0,"ng-template",13),zs(),zs()}if(2&t){const t=ea(),e=Fs(7);va("disabled",t.nextDisabled()),Cr(1),Rs("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),Cr(2),Us("ngTemplateOutlet",(null==t.tplLast?null:t.tplLast.templateRef)||e)("ngTemplateOutletContext",Mc(6,oD,t.nextDisabled(),t.page))}}function CD(t,e){1&t&&ka(0),2&t&&Da(ea(2).title)}function ED(t,e){}function SD(t,e){if(1&t&&(js(0,"h3",3),Ls(1,CD,1,1,"ng-template",null,4,ru),Ls(3,ED,0,0,"ng-template",5),zs()),2&t){const t=Fs(2),e=ea();Cr(3),Us("ngTemplateOutlet",e.isTitleTemplate()?e.title:t)("ngTemplateOutletContext",e.context)}}var MD;function TD(t,e){if(1&t&&(js(0,"span"),cc(1,MD),Oc(2,"percent"),zs()),2&t){const t=ea();Cr(2),pc(Rc(2,1,t.getValue()/t.max)),fc(1)}}function PD(t,e){1&t&&ka(0),2&t&&Da(100===e.fill?"\u2605":"\u2606")}function kD(t,e){}function DD(t,e){if(1&t){const t=$s();js(0,"span",2),ka(1),zs(),js(2,"span",3),Xs("mouseenter",(function(){on(t);const n=e.index;return ea().enter(n+1)}))("click",(function(){on(t);const n=e.index;return ea().handleClick(n+1)})),Ls(3,kD,0,0,"ng-template",4),zs()}if(2&t){const t=e.index,n=ea(),i=Fs(1);Cr(1),Oa("(",t<n.nextRate?"*":" ",")"),Cr(1),ga("cursor",n.readonly||n.disabled?"default":"pointer"),Cr(1),Us("ngTemplateOutlet",n.starTemplate||n.starTemplateFromContent||i)("ngTemplateOutletContext",n.contexts[t])}}function OD(t,e){}function RD(t,e){if(1&t){const t=$s();js(0,"li",4),js(1,"a",5),Xs("click",(function(n){on(t);const i=e.$implicit;return ea().select(i.id),n.preventDefault()})),ka(2),Ls(3,OD,0,0,"ng-template",6),zs(),zs()}if(2&t){const t=e.$implicit,n=ea();Cr(1),va("active",t.id===n.activeId)("disabled",t.disabled),Us("id",t.id),Rs("tabindex",t.disabled?"-1":void 0)("aria-controls",n.destroyOnHide&&t.id!==n.activeId?null:t.id+"-panel")("aria-selected",t.id===n.activeId)("aria-disabled",t.disabled),Cr(1),Oa(" ",t.title,""),Cr(1),Us("ngTemplateOutlet",(null==t.titleTpl?null:t.titleTpl.templateRef)||null)}}function ID(t,e){}function LD(t,e){if(1&t&&(js(0,"div",8),Ls(1,ID,0,0,"ng-template",6),zs()),2&t){const t=ea().$implicit,e=ea();Ia("tab-pane ",t.id===e.activeId?"active":null,""),la("id","",t.id,"-panel"),Rs("aria-labelledby",t.id),Cr(1),Us("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)}}function FD(t,e){if(1&t&&Ls(0,LD,2,6,"div",7),2&t){const t=e.$implicit,n=ea();Us("ngIf",!n.destroyOnHide||t.id===n.activeId)}}MD=$localize`:@@ngb.progressbar.value␟f8e9a947b9db4252c0e9905765338712f2fd032f␟3720830768741091151:${"\ufffd0\ufffd"}:INTERPOLATION:`;const ND=["placeholder",$localize`:@@ngb.timepicker.HH␟ce676ab1d6d98f85c836381cf100a4a91ef95a1f␟4043638465245303811:HH`,"aria-label",$localize`:@@ngb.timepicker.hours␟3bbce5fef7e1151da052a4e529453edb340e3912␟8070396816726827304:Hours`],BD=["placeholder",$localize`:@@ngb.timepicker.MM␟72c8edf6a50068a05bde70991e36b1e881f4ca54␟1647282246509919852:MM`,"aria-label",$localize`:@@ngb.timepicker.minutes␟41e62daa962947c0d23ded0981975d1bddf0bf38␟5531237363767747080:Minutes`];var UD,VD,jD,zD;function HD(t,e){if(1&t){const t=$s();js(0,"button",10),Xs("click",(function(){on(t);const e=ea();return e.changeHour(e.hourStep)})),Hs(1,"span",11),js(2,"span",12),cc(3,UD),zs(),zs()}if(2&t){const t=ea();va("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),Us("disabled",t.disabled)}}function GD(t,e){if(1&t){const t=$s();js(0,"button",10),Xs("click",(function(){on(t);const e=ea();return e.changeHour(0-e.hourStep)})),Hs(1,"span",13),js(2,"span",12),cc(3,VD),zs(),zs()}if(2&t){const t=ea();va("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),Us("disabled",t.disabled)}}function WD(t,e){if(1&t){const t=$s();js(0,"button",10),Xs("click",(function(){on(t);const e=ea();return e.changeMinute(e.minuteStep)})),Hs(1,"span",11),js(2,"span",12),cc(3,jD),zs(),zs()}if(2&t){const t=ea();va("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),Us("disabled",t.disabled)}}function qD(t,e){if(1&t){const t=$s();js(0,"button",10),Xs("click",(function(){on(t);const e=ea();return e.changeMinute(0-e.minuteStep)})),Hs(1,"span",13),js(2,"span",12),cc(3,zD),zs(),zs()}if(2&t){const t=ea();va("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),Us("disabled",t.disabled)}}function $D(t,e){1&t&&(js(0,"div",5),ka(1,":"),zs())}UD=$localize`:@@ngb.timepicker.increment-hours␟cb74bc1d625a6c1742f0d7d47306cf495780c218␟5939278348542933629:Increment hours`,VD=$localize`:@@ngb.timepicker.decrement-hours␟147c7a19429da7d999e247d22e33fee370b1691b␟3651829882940481818:Decrement hours`,jD=$localize`:@@ngb.timepicker.increment-minutes␟f5a4a3bc05e053f6732475d0e74875ec01c3a348␟180147720391025024:Increment minutes`,zD=$localize`:@@ngb.timepicker.decrement-minutes␟c1a6899e529c096da5b660385d4e77fe1f7ad271␟7447789825403243588:Decrement minutes`;const YD=["placeholder",$localize`:@@ngb.timepicker.SS␟ebe38d36a40a2383c5fefa9b4608ffbda08bd4a3␟3628127143071124194:SS`,"aria-label",$localize`:@@ngb.timepicker.seconds␟4f2ed9e71a7c981db3e50ae2fedb28aff2ec4e6c␟8874012390997067175:Seconds`];var QD,XD,KD,ZD;function JD(t,e){if(1&t){const t=$s();js(0,"button",10),Xs("click",(function(){on(t);const e=ea(2);return e.changeSecond(e.secondStep)})),Hs(1,"span",11),js(2,"span",12),cc(3,QD),zs(),zs()}if(2&t){const t=ea(2);va("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),Us("disabled",t.disabled)}}function tO(t,e){if(1&t){const t=$s();js(0,"button",10),Xs("click",(function(){on(t);const e=ea(2);return e.changeSecond(0-e.secondStep)})),Hs(1,"span",13),js(2,"span",12),cc(3,XD),zs(),zs()}if(2&t){const t=ea(2);va("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),Us("disabled",t.disabled)}}function eO(t,e){if(1&t){const t=$s();js(0,"div",14),Ls(1,JD,4,7,"button",3),js(2,"input",4),uc(3,YD),Xs("change",(function(e){return on(t),ea().updateSecond(e.target.value)}))("input",(function(e){return on(t),ea().formatInput(e.target)}))("keydown.ArrowUp",(function(e){on(t);const n=ea();return n.changeSecond(n.secondStep),e.preventDefault()}))("keydown.ArrowDown",(function(e){on(t);const n=ea();return n.changeSecond(0-n.secondStep),e.preventDefault()})),zs(),Ls(4,tO,4,7,"button",3),zs()}if(2&t){const t=ea();Cr(1),Us("ngIf",t.spinners),Cr(1),va("form-control-sm",t.isSmallSize)("form-control-lg",t.isLargeSize),Us("value",t.formatMinSec(null==t.model?null:t.model.second))("readOnly",t.readonlyInputs)("disabled",t.disabled),Cr(2),Us("ngIf",t.spinners)}}function nO(t,e){1&t&&Hs(0,"div",5)}function iO(t,e){if(1&t&&(Gs(0),cc(1,KD),Ws()),2&t){const t=ea(2);Cr(1),pc(t.i18n.getAfternoonPeriod()),fc(1)}}function rO(t,e){1&t&&cc(0,ZD),2&t&&(pc(ea(2).i18n.getMorningPeriod()),fc(0))}function oO(t,e){if(1&t){const t=$s();js(0,"div",15),js(1,"button",16),Xs("click",(function(){return on(t),ea().toggleMeridian()})),Ls(2,iO,2,1,"ng-container",17),Ls(3,rO,1,1,"ng-template",null,18,ru),zs(),zs()}if(2&t){const t=Fs(4),e=ea();Cr(1),va("btn-sm",e.isSmallSize)("btn-lg",e.isLargeSize)("disabled",e.disabled),Us("disabled",e.disabled),Cr(1),Us("ngIf",e.model&&e.model.hour>=12)("ngIfElse",t)}}function sO(t,e){if(1&t&&(js(0,"strong",3),ka(1),zs()),2&t){const t=ea();Cr(1),Da(t.header)}}QD=$localize`:@@ngb.timepicker.increment-seconds␟912322ecee7d659d04dcf494a70e22e49d334b26␟5364772110539092174:Increment seconds`,XD=$localize`:@@ngb.timepicker.decrement-seconds␟5db47ac104294243a70eb9124fbea9d0004ddf69␟753633511487974857:Decrement seconds`,KD=$localize`:@@ngb.timepicker.PM␟8d6e691e10306c1b34c6b26805151aaea320ef7f␟3564199131264287502:${"\ufffd0\ufffd"}:INTERPOLATION:`,ZD=$localize`:@@ngb.timepicker.AM␟69a1f176a93998876952adac57c3bc3863b6105e␟4592818992509942761:${"\ufffd0\ufffd"}:INTERPOLATION:`;const aO=["aria-label",$localize`:@@ngb.toast.close-aria␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`];function lO(t,e){}function cO(t,e){if(1&t){const t=$s();js(0,"div",4),Ls(1,lO,0,0,"ng-template",5),js(2,"button",6),uc(3,aO),Xs("click",(function(){return on(t),ea().hide()})),js(4,"span",7),ka(5,"\xd7"),zs(),zs(),zs()}if(2&t){const t=ea(),e=Fs(1);Cr(1),Us("ngTemplateOutlet",t.contentHeaderTpl||e)}}function uO(t,e){if(1&t&&(js(0,"span"),ka(1),zs()),2&t){const t=ea().$implicit;ya(ea().highlightClass),Cr(1),Da(t)}}function hO(t,e){1&t&&ka(0),2&t&&Da(ea().$implicit)}function dO(t,e){if(1&t&&(Ls(0,uO,2,3,"span",1),Ls(1,hO,1,1,"ng-template",null,2,ru)),2&t){const t=e.odd,n=Fs(2);Us("ngIf",t)("ngIfElse",n)}}function pO(t,e){if(1&t&&Hs(0,"ngb-highlight",2),2&t){const t=e.term;Us("result",(0,e.formatter)(e.result))("term",t)}}function fO(t,e){}const mO=function(t,e,n){return{result:t,term:e,formatter:n}};function gO(t,e){if(1&t){const t=$s();js(0,"button",3),Xs("mouseenter",(function(){on(t);const n=e.index;return ea().markActive(n)}))("click",(function(){on(t);const n=e.$implicit;return ea().select(n)})),Ls(1,fO,0,0,"ng-template",4),zs()}if(2&t){const t=e.$implicit,n=e.index,i=ea(),r=Fs(1);va("active",n===i.activeIdx),Us("id",i.id+"-"+n),Cr(1),Us("ngTemplateOutlet",i.resultTemplate||r)("ngTemplateOutletContext",Tc(5,mO,t,i.term,i.formatter))}}function vO(t){return parseInt(`${t}`,10)}function yO(t){return null!=t?`${t}`:""}function bO(t,e,n=0){return Math.max(Math.min(t,e),n)}function _O(t){return"string"==typeof t}function wO(t){return!isNaN(vO(t))}function AO(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}function xO(t){return null!=t}function CO(t){return wO(t)?`0${t}`.slice(-2):""}function EO(t,e){return t&&t.className&&t.className.split&&t.className.split(/\s+/).indexOf(e)>=0}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});let SO=(()=>{let t=class{constructor(){this.closeOthers=!1}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),MO=0,TO=(()=>{let t=class{constructor(t){this.templateRef=t}};return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","ngbPanelHeader",""]]}),t})(),PO=(()=>{let t=class{constructor(t){this.templateRef=t}};return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","ngbPanelTitle",""]]}),t})(),kO=(()=>{let t=class{constructor(t){this.templateRef=t}};return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","ngbPanelContent",""]]}),t})(),DO=(()=>{let t=class{constructor(){this.disabled=!1,this.id=`ngb-panel-${MO++}`,this.isOpen=!1}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["ngb-panel"]],contentQueries:function(t,e,n){var i;1&t&&(Kc(n,PO,!1),Kc(n,TO,!1),Kc(n,kO,!1)),2&t&&($c(i=tu())&&(e.titleTpls=i),$c(i=tu())&&(e.headerTpls=i),$c(i=tu())&&(e.contentTpls=i))},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"}}),t})(),OO=(()=>{let t=class{constructor(t){this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new Fc,this.type=t.type,this.closeOtherPanels=t.closeOthers}isExpanded(t){return this.activeIds.indexOf(t)>-1}expand(t){this._changeOpenState(this._findPanelById(t),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(t=>this._changeOpenState(t,!0))}collapse(t){this._changeOpenState(this._findPanelById(t),!1)}collapseAll(){this.panels.forEach(t=>{this._changeOpenState(t,!1)})}toggle(t){const e=this._findPanelById(t);e&&this._changeOpenState(e,!e.isOpen)}ngAfterContentChecked(){_O(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(t=>t.isOpen=!t.disabled&&this.activeIds.indexOf(t.id)>-1),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0]),this._updateActiveIds())}_changeOpenState(t,e){if(null!=t&&!t.disabled&&t.isOpen!==e){let n=!1;this.panelChange.emit({panelId:t.id,nextState:e,preventDefault:()=>{n=!0}}),n||(t.isOpen=e,e&&this.closeOtherPanels&&this._closeOthers(t.id),this._updateActiveIds())}}_closeOthers(t){this.panels.forEach(e=>{e.id!==t&&(e.isOpen=!1)})}_findPanelById(t){return this.panels.find(e=>e.id===t)||null}_updateActiveIds(){this.activeIds=this.panels.filter(t=>t.isOpen&&!t.disabled).map(t=>t.id)}};return t.\u0275fac=function(e){return new(e||t)(Ns(SO))},t.\u0275cmp=fe({type:t,selectors:[["ngb-accordion"]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,DO,!1),2&t&&$c(i=tu())&&(e.panels=i)},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(t,e){2&t&&Rs("aria-multiselectable",!e.closeOtherPanels)},inputs:{activeIds:"activeIds",destroyOnHide:"destroyOnHide",type:"type",closeOtherPanels:["closeOthers","closeOtherPanels"]},outputs:{panelChange:"panelChange"},exportAs:["ngbAccordion"],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"btn","btn-link",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel","class","collapse",3,"id","show",4,"ngIf"],["role","tabpanel",1,"collapse",3,"id"],[1,"card-body"]],template:function(t,e){1&t&&(Ls(0,WP,3,3,"ng-template",0,1,ru),Ls(2,XP,4,11,"ng-template",2)),2&t&&(Cr(2),Us("ngForOf",e.panels))},directives:function(){return[TO,pd,RO,Ed,md]},encapsulation:2}),t})(),RO=(()=>{let t=class{constructor(t,e){this.accordion=t,this.panel=e}set ngbPanelToggle(t){t&&(this.panel=t)}};return t.\u0275fac=function(e){return new(e||t)(Ns(OO),Ns(DO,9))},t.\u0275dir=_e({type:t,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(t,e){1&t&&Xs("click",(function(){return e.accordion.toggle(e.panel.id)})),2&t&&(La("disabled",e.panel.disabled),Rs("aria-expanded",e.panel.isOpen)("aria-controls",e.panel.id),va("collapsed",!e.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"}}),t})(),IO=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd]]}),t})(),LO=(()=>{let t=class{constructor(){this.dismissible=!0,this.type="warning"}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),FO=(()=>{let t=class{constructor(t,e,n){this._renderer=e,this._element=n,this.close=new Fc,this.dismissible=t.dismissible,this.type=t.type}closeHandler(){this.close.emit()}ngOnChanges(t){const e=t.type;e&&!e.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${e.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${e.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}};return t.\u0275fac=function(e){return new(e||t)(Ns(LO),Ns(rl),Ns(tl))},t.\u0275cmp=fe({type:t,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert"],hostVars:2,hostBindings:function(t,e){2&t&&va("alert-dismissible",e.dismissible)},inputs:{dismissible:"dismissible",type:"type"},outputs:{close:"close"},features:[Re],ngContentSelectors:JP,decls:2,vars:1,consts:[["type","button","class","close",3,"click",4,"ngIf",6,"aria-label"],["type","button",1,"close",3,"click",6,"aria-label"],["aria-hidden","true"]],template:function(t,e){1&t&&(ia(),sa(0),Ls(1,ZP,4,0,"button",0)),2&t&&(Cr(1),Us("ngIf",e.dismissible))},directives:[md],styles:["ngb-alert{display:block}"],encapsulation:2,changeDetection:0}),t})(),NO=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd]]}),t})(),BO=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","ngbButtonLabel",""]],hostVars:8,hostBindings:function(t,e){2&t&&va("btn",!0)("active",e.active)("disabled",e.disabled)("focus",e.focused)}}),t})();const UO={provide:F_,useExisting:xt(()=>VO),multi:!0};let VO=(()=>{let t=class{constructor(t,e){this._label=t,this._cd=e,this.disabled=!1,this.valueChecked=!0,this.valueUnChecked=!1,this.onChange=t=>{},this.onTouched=()=>{}}set focused(t){this._label.focused=t,t||this.onTouched()}onInputChange(t){const e=t.target.checked?this.valueChecked:this.valueUnChecked;this.onChange(e),this.onTouched(),this.writeValue(e)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t,this._label.disabled=t}writeValue(t){this.checked=t===this.valueChecked,this._label.active=this.checked,this._cd.markForCheck()}};return t.\u0275fac=function(e){return new(e||t)(Ns(BO),Ns(os))},t.\u0275dir=_e({type:t,selectors:[["","ngbButton","","type","checkbox"]],hostVars:2,hostBindings:function(t,e){1&t&&Xs("change",(function(t){return e.onInputChange(t)}))("focus",(function(){return e.focused=!0}))("blur",(function(){return e.focused=!1})),2&t&&La("checked",e.checked)("disabled",e.disabled)},inputs:{disabled:"disabled",valueChecked:"valueChecked",valueUnChecked:"valueUnChecked"},features:[Xa([UO])]}),t})();const jO={provide:F_,useExisting:xt(()=>HO),multi:!0};let zO=0,HO=(()=>{let t=class{constructor(){this._radios=new Set,this._value=null,this.name=`ngb-radio-${zO++}`,this.onChange=t=>{},this.onTouched=()=>{}}get disabled(){return this._disabled}set disabled(t){this.setDisabledState(t)}onRadioChange(t){this.writeValue(t.value),this.onChange(t.value)}onRadioValueUpdate(){this._updateRadiosValue()}register(t){this._radios.add(t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._disabled=t,this._updateRadiosDisabled()}unregister(t){this._radios.delete(t)}writeValue(t){this._value=t,this._updateRadiosValue()}_updateRadiosValue(){this._radios.forEach(t=>t.updateValue(this._value))}_updateRadiosDisabled(){this._radios.forEach(t=>t.updateDisabled())}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","ngbRadioGroup",""]],hostAttrs:["role","radiogroup"],inputs:{name:"name"},features:[Xa([jO])]}),t})(),GO=(()=>{let t=class{constructor(t,e,n,i,r){this._group=t,this._label=e,this._renderer=n,this._element=i,this._cd=r,this._value=null,this._group.register(this),this.updateDisabled()}set value(t){this._value=t;const e=t?t.toString():"";this._renderer.setProperty(this._element.nativeElement,"value",e),this._group.onRadioValueUpdate()}set disabled(t){this._disabled=!1!==t,this.updateDisabled()}set focused(t){this._label&&(this._label.focused=t),t||this._group.onTouched()}get checked(){return this._checked}get disabled(){return this._group.disabled||this._disabled}get value(){return this._value}get nameAttr(){return this.name||this._group.name}ngOnDestroy(){this._group.unregister(this)}onChange(){this._group.onRadioChange(this)}updateValue(t){this.value!==t&&this._cd.markForCheck(),this._checked=this.value===t,this._label.active=this._checked}updateDisabled(){this._label.disabled=this.disabled}};return t.\u0275fac=function(e){return new(e||t)(Ns(HO),Ns(BO),Ns(rl),Ns(tl),Ns(os))},t.\u0275dir=_e({type:t,selectors:[["","ngbButton","","type","radio"]],hostVars:3,hostBindings:function(t,e){1&t&&Xs("change",(function(){return e.onChange()}))("focus",(function(){return e.focused=!0}))("blur",(function(){return e.focused=!1})),2&t&&La("checked",e.checked)("disabled",e.disabled)("name",e.nameAttr)},inputs:{value:"value",disabled:"disabled",name:"name"}}),t})(),WO=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)}}),t})(),qO=(()=>{let t=class{constructor(){this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),$O=0,YO=(()=>{let t=class{constructor(t){this.tplRef=t,this.id=`ngb-slide-${$O++}`}};return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"}}),t})(),QO=(()=>{let t=class{constructor(t,e,n,i){this._platformId=e,this._ngZone=n,this._cd=i,this.NgbSlideEventSource=KO,this._destroy$=new C,this._interval$=new Rp(0),this._mouseHover$=new Rp(!1),this._pauseOnHover$=new Rp(!1),this._pause$=new Rp(!1),this._wrap$=new Rp(!1),this.slide=new Fc,this.interval=t.interval,this.wrap=t.wrap,this.keyboard=t.keyboard,this.pauseOnHover=t.pauseOnHover,this.showNavigationArrows=t.showNavigationArrows,this.showNavigationIndicators=t.showNavigationIndicators}set interval(t){this._interval$.next(t)}get interval(){return this._interval$.value}set wrap(t){this._wrap$.next(t)}get wrap(){return this._wrap$.value}set pauseOnHover(t){this._pauseOnHover$.next(t)}get pauseOnHover(){return this._pauseOnHover$.value}mouseEnter(){this._mouseHover$.next(!0)}mouseLeave(){this._mouseHover$.next(!1)}ngAfterContentInit(){Xd(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const t=Fp([this.slide.pipe(F(t=>t.current),wf(this.activeId)),this._wrap$,this.slides.changes.pipe(wf(null))]).pipe(F(([t,e])=>{const n=this.slides.toArray(),i=this._getSlideIdxById(t);return e?n.length>1:i<n.length-1}),c_());Fp([this._pause$,this._pauseOnHover$,this._mouseHover$,this._interval$,t]).pipe(F(([t,e,n,i,r])=>t||e&&n||!r?0:i),c_(),vf(t=>t>0?xA(t,t):NP),px(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(KO.TIMER)))}),this.slides.changes.pipe(px(this._destroy$)).subscribe(()=>this._cd.markForCheck())}ngAfterContentChecked(){let t=this._getSlideById(this.activeId);this.activeId=t?t.id:this.slides.length?this.slides.first.id:""}ngOnDestroy(){this._destroy$.next()}select(t,e){this._cycleToSelected(t,this._getSlideEventDirection(this.activeId,t),e)}prev(t){this._cycleToSelected(this._getPrevSlide(this.activeId),XO.RIGHT,t)}next(t){this._cycleToSelected(this._getNextSlide(this.activeId),XO.LEFT,t)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}_cycleToSelected(t,e,n){let i=this._getSlideById(t);i&&i.id!==this.activeId&&(this.slide.emit({prev:this.activeId,current:i.id,direction:e,paused:this._pause$.value,source:n}),this.activeId=i.id),this._cd.markForCheck()}_getSlideEventDirection(t,e){return this._getSlideIdxById(t)>this._getSlideIdxById(e)?XO.RIGHT:XO.LEFT}_getSlideById(t){return this.slides.find(e=>e.id===t)||null}_getSlideIdxById(t){const e=this._getSlideById(t);return null!=e?this.slides.toArray().indexOf(e):-1}_getNextSlide(t){const e=this.slides.toArray(),n=this._getSlideIdxById(t);return n===e.length-1?this.wrap?e[0].id:e[e.length-1].id:e[n+1].id}_getPrevSlide(t){const e=this.slides.toArray(),n=this._getSlideIdxById(t);return 0===n?this.wrap?e[e.length-1].id:e[0].id:e[n-1].id}};return t.\u0275fac=function(e){return new(e||t)(Ns(qO),Ns(hu),Ns(Su),Ns(os))},t.\u0275cmp=fe({type:t,selectors:[["ngb-carousel"]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,YO,!1),2&t&&$c(i=tu())&&(e.slides=i)},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:2,hostBindings:function(t,e){1&t&&Xs("keydown.arrowLeft",(function(){return e.keyboard&&e.prev(e.NgbSlideEventSource.ARROW_LEFT)}))("keydown.arrowRight",(function(){return e.keyboard&&e.next(e.NgbSlideEventSource.ARROW_RIGHT)}))("mouseenter",(function(){return e.mouseEnter()}))("mouseleave",(function(){return e.mouseLeave()})),2&t&&ga("display","block")},inputs:{interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators",activeId:"activeId"},outputs:{slide:"slide"},exportAs:["ngbCarousel"],decls:5,vars:4,consts:[["class","carousel-indicators",4,"ngIf"],[1,"carousel-inner"],["class","carousel-item",3,"active",4,"ngFor","ngForOf"],["class","carousel-control-prev","role","button",3,"click",4,"ngIf"],["class","carousel-control-next","role","button",3,"click",4,"ngIf"],[1,"carousel-indicators"],[3,"id","active","click",4,"ngFor","ngForOf"],[3,"id","click"],[1,"carousel-item"],[3,"ngTemplateOutlet"],["role","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],["role","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"]],template:function(t,e){1&t&&(Ls(0,ek,2,1,"ol",0),js(1,"div",1),Ls(2,ik,2,3,"div",2),zs(),Ls(3,sk,4,0,"a",3),Ls(4,ak,4,0,"a",4)),2&t&&(Us("ngIf",e.showNavigationIndicators),Cr(2),Us("ngForOf",e.slides),Cr(1),Us("ngIf",e.showNavigationArrows),Cr(1),Us("ngIf",e.showNavigationArrows))},directives:[md,pd,Ed],encapsulation:2,changeDetection:0}),t})();var XO=function(t){return t[t.LEFT="left"]="LEFT",t[t.RIGHT="right"]="RIGHT",t}({}),KO=function(t){return t.TIMER="timer",t.ARROW_LEFT="arrowLeft",t.ARROW_RIGHT="arrowRight",t.INDICATOR="indicator",t}({});let ZO=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd]]}),t})(),JO=(()=>{let t=class{constructor(){this.collapsed=!1}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","ngbCollapse",""]],hostVars:4,hostBindings:function(t,e){2&t&&va("collapse",!0)("show",!e.collapsed)},inputs:{collapsed:["ngbCollapse","collapsed"]},exportAs:["ngbCollapse"]}),t})(),tR=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)}}),t})();class eR{constructor(t,e,n){this.year=AO(t)?t:null,this.month=AO(e)?e:null,this.day=AO(n)?n:null}static from(t){return t instanceof eR?t:t?new eR(t.year,t.month,t.day):null}equals(t){return null!=t&&this.year===t.year&&this.month===t.month&&this.day===t.day}before(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day<t.day:this.month<t.month:this.year<t.year)}after(t){return!!t&&(this.year===t.year?this.month===t.month?this.day!==t.day&&this.day>t.day:this.month>t.month:this.year>t.year)}}function nR(t){return new eR(t.getFullYear(),t.getMonth()+1,t.getDate())}function iR(t){const e=new Date(t.year,t.month-1,t.day,12);return isNaN(e.getTime())||e.setFullYear(t.year),e}function rR(){return new sR}let oR=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:rR,token:t,providedIn:"root"}),t})(),sR=(()=>{let t=class extends oR{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(t,e="d",n=1){let i=iR(t),r=!0,o=i.getMonth();switch(e){case"y":i.setFullYear(i.getFullYear()+n);break;case"m":o+=n,i.setMonth(o),o%=12,o<0&&(o+=12);break;case"d":i.setDate(i.getDate()+n),r=!1;break;default:return t}return r&&i.getMonth()!==o&&i.setDate(0),nR(i)}getPrev(t,e="d",n=1){return this.getNext(t,e,-n)}getWeekday(t){let e=iR(t).getDay();return 0===e?7:e}getWeekNumber(t,e){7===e&&(e=0);const n=iR(t[(11-e)%7]);n.setDate(n.getDate()+4-(n.getDay()||7));const i=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((i-n.getTime())/864e5)/7)+1}getToday(){return nR(new Date)}isValid(t){if(!(t&&AO(t.year)&&AO(t.month)&&AO(t.day)))return!1;if(0===t.year)return!1;const e=iR(t);return!isNaN(e.getTime())&&e.getFullYear()===t.year&&e.getMonth()+1===t.month&&e.getDate()===t.day}};return t.\u0275fac=function(e){return IL(e||t)},t.\u0275prov=ut({token:t,factory:function(e){return t.\u0275fac(e)}}),t})();function aR(t,e){return!function(t,e){return!t&&!e||!!t&&!!e&&t.equals(e)}(t,e)}function lR(t,e){return!(!t&&!e||t&&e&&t.year===e.year&&t.month===e.month)}function cR(t,e,n){return t&&e&&t.before(e)?e:t&&n&&t.after(n)?n:t||null}function uR(t,e){const{minDate:n,maxDate:i,disabled:r,markDisabled:o}=e;return!(null==t||r||o&&o(t,{year:t.year,month:t.month})||n&&t.before(n)||i&&t.after(i))}let hR=(()=>{let t=class{getDayNumerals(t){return`${t.day}`}getWeekNumerals(t){return`${t}`}getYearNumerals(t){return`${t}`}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return t=Yt(fu),new dR(t);var t},token:t,providedIn:"root"}),t})(),dR=(()=>{let t=class extends hR{constructor(t){super(),this._locale=t;const e=kh(t,Eh.Standalone,Sh.Short);this._weekdaysShort=e.map((t,n)=>e[(n+1)%7]),this._monthsShort=Dh(t,Eh.Standalone,Sh.Abbreviated),this._monthsFull=Dh(t,Eh.Standalone,Sh.Wide)}getWeekdayShortName(t){return this._weekdaysShort[t-1]||""}getMonthShortName(t){return this._monthsShort[t-1]||""}getMonthFullName(t){return this._monthsFull[t-1]||""}getDayAriaLabel(t){return $h(new Date(t.year,t.month-1,t.day),"fullDate",this._locale)}};return t.\u0275fac=function(e){return new(e||t)(Yt(fu))},t.\u0275prov=ut({token:t,factory:function(e){return t.\u0275fac(e)}}),t})(),pR=(()=>{let t=class{constructor(t,e){this._calendar=t,this._i18n=e,this._VALIDATORS={dayTemplateData:t=>{if(this._state.dayTemplateData!==t)return{dayTemplateData:t}},displayMonths:t=>{if(AO(t=vO(t))&&t>0&&this._state.displayMonths!==t)return{displayMonths:t}},disabled:t=>{if(this._state.disabled!==t)return{disabled:t}},firstDayOfWeek:t=>{if(AO(t=vO(t))&&t>=0&&this._state.firstDayOfWeek!==t)return{firstDayOfWeek:t}},focusVisible:t=>{if(this._state.focusVisible!==t&&!this._state.disabled)return{focusVisible:t}},markDisabled:t=>{if(this._state.markDisabled!==t)return{markDisabled:t}},maxDate:t=>{const e=this.toValidDate(t,null);if(aR(this._state.maxDate,e))return{maxDate:e}},minDate:t=>{const e=this.toValidDate(t,null);if(aR(this._state.minDate,e))return{minDate:e}},navigation:t=>{if(this._state.navigation!==t)return{navigation:t}},outsideDays:t=>{if(this._state.outsideDays!==t)return{outsideDays:t}}},this._model$=new C,this._dateSelect$=new C,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]}}}get model$(){return this._model$.pipe(Hp(t=>t.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(Hp(t=>null!==t))}set(t){let e=Object.keys(t).map(e=>this._VALIDATORS[e](t[e])).reduce((t,e)=>Object.assign(Object.assign({},t),e),{});Object.keys(e).length>0&&this._nextState(e)}focus(t){const e=this.toValidDate(t,null);null!=e&&!this._state.disabled&&aR(this._state.focusDate,e)&&this._nextState({focusDate:t})}focusSelect(){uR(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(t){const e=this.toValidDate(t,this._calendar.getToday());null==e||this._state.disabled||this._state.firstDate&&!lR(this._state.firstDate,e)||this._nextState({firstDate:e})}select(t,e={}){const n=this.toValidDate(t,null);null==n||this._state.disabled||(aR(this._state.selectedDate,n)&&this._nextState({selectedDate:n}),e.emitEvent&&uR(n,this._state)&&this._dateSelect$.next(n))}toValidDate(t,e){const n=eR.from(t);return void 0===e&&(e=this._calendar.getToday()),this._calendar.isValid(n)?n:e}getMonth(t){for(let e of this._state.months)if(t.month===e.number&&t.year===e.year)return e;throw new Error(`month ${t.month} of year ${t.year} not found`)}_nextState(t){const e=this._updateState(t);this._patchContexts(e),this._state=e,this._model$.next(this._state)}_patchContexts(t){const{months:e,displayMonths:n,selectedDate:i,focusDate:r,focusVisible:o,disabled:s,outsideDays:a}=t;t.months.forEach(t=>{t.weeks.forEach(l=>{l.days.forEach(l=>{r&&(l.context.focused=r.equals(l.date)&&o),l.tabindex=!s&&r&&l.date.equals(r)&&r.month===t.number?0:-1,!0===s&&(l.context.disabled=!0),void 0!==i&&(l.context.selected=null!==i&&i.equals(l.date)),t.number!==l.date.month&&(l.hidden="hidden"===a||"collapsed"===a||n>1&&l.date.after(e[0].firstDate)&&l.date.before(e[n-1].lastDate))})})})}_updateState(t){const e=Object.assign({},this._state,t);let n=e.firstDate;if(("minDate"in t||"maxDate"in t)&&(function(t,e){if(e&&t&&e.before(t))throw new Error(`'maxDate' ${e} should be greater than 'minDate' ${t}`)}(e.minDate,e.maxDate),e.focusDate=cR(e.focusDate,e.minDate,e.maxDate),e.firstDate=cR(e.firstDate,e.minDate,e.maxDate),n=e.focusDate),"disabled"in t&&(e.focusVisible=!1),"selectedDate"in t&&0===this._state.months.length&&(n=e.selectedDate),"focusVisible"in t)return e;if("focusDate"in t&&(e.focusDate=cR(e.focusDate,e.minDate,e.maxDate),n=e.focusDate,0!==e.months.length&&e.focusDate&&!e.focusDate.before(e.firstDate)&&!e.focusDate.after(e.lastDate)))return e;if("firstDate"in t&&(e.firstDate=cR(e.firstDate,e.minDate,e.maxDate),n=e.firstDate),n){const i=function(t,e,n,i,r){const{displayMonths:o,months:s}=n,a=s.splice(0,s.length);return Array.from({length:o},(n,i)=>{const o=Object.assign(t.getNext(e,"m",i),{day:1});if(s[i]=null,!r){const t=a.findIndex(t=>t.firstDate.equals(o));-1!==t&&(s[i]=a.splice(t,1)[0])}return o}).forEach((e,r)=>{null===s[r]&&(s[r]=function(t,e,n,i,r={}){const{dayTemplateData:o,minDate:s,maxDate:a,firstDayOfWeek:l,markDisabled:c,outsideDays:u}=n,h=t.getToday();r.firstDate=null,r.lastDate=null,r.number=e.month,r.year=e.year,r.weeks=r.weeks||[],r.weekdays=r.weekdays||[],e=function(t,e,n){const i=t.getDaysPerWeek(),r=new eR(e.year,e.month,1),o=t.getWeekday(r)%i;return t.getPrev(r,"d",(i+o-n)%i)}(t,e,l);for(let d=0;d<t.getWeeksPerMonth();d++){let n=r.weeks[d];n||(n=r.weeks[d]={number:0,days:[],collapsed:!0});const p=n.days;for(let l=0;l<t.getDaysPerWeek();l++){0===d&&(r.weekdays[l]=t.getWeekday(e));const n=new eR(e.year,e.month,e.day),u=t.getNext(n),f=i.getDayAriaLabel(n);let m=!!(s&&n.before(s)||a&&n.after(a));!m&&c&&(m=c(n,{month:r.number,year:r.year}));let g=n.equals(h),v=o?o(n,{month:r.number,year:r.year}):void 0;null===r.firstDate&&n.month===r.number&&(r.firstDate=n),n.month===r.number&&u.month!==r.number&&(r.lastDate=n);let y=p[l];y||(y=p[l]={}),y.date=n,y.context=Object.assign(y.context||{},{$implicit:n,date:n,data:v,currentMonth:r.number,currentYear:r.year,disabled:m,focused:!1,selected:!1,today:g}),y.tabindex=-1,y.ariaLabel=f,y.hidden=!1,e=u}n.number=t.getWeekNumber(p.map(t=>t.date),l),n.collapsed="collapsed"===u&&p[0].date.month!==r.number&&p[p.length-1].date.month!==r.number}return r}(t,e,n,i,a.shift()||{}))}),s}(this._calendar,n,e,this._i18n,"dayTemplateData"in t||"firstDayOfWeek"in t||"markDisabled"in t||"minDate"in t||"maxDate"in t||"disabled"in t||"outsideDays"in t);e.months=i,e.firstDate=i[0].firstDate,e.lastDate=i[i.length-1].lastDate,"selectedDate"in t&&!uR(e.selectedDate,e)&&(e.selectedDate=null),"firstDate"in t&&(!e.focusDate||e.focusDate.before(e.firstDate)||e.focusDate.after(e.lastDate))&&(e.focusDate=n);const r=!this._state.firstDate||this._state.firstDate.year!==e.firstDate.year,o=!this._state.firstDate||this._state.firstDate.month!==e.firstDate.month;"select"===e.navigation?(("minDate"in t||"maxDate"in t||0===e.selectBoxes.years.length||r)&&(e.selectBoxes.years=function(t,e,n){if(!t)return[];const i=e?Math.max(e.year,t.year-500):t.year-10,r=(n?Math.min(n.year,t.year+500):t.year+10)-i+1,o=Array(r);for(let s=0;s<r;s++)o[s]=i+s;return o}(e.firstDate,e.minDate,e.maxDate)),("minDate"in t||"maxDate"in t||0===e.selectBoxes.months.length||r)&&(e.selectBoxes.months=function(t,e,n,i){if(!e)return[];let r=t.getMonths(e.year);if(n&&e.year===n.year){const t=r.findIndex(t=>t===n.month);r=r.slice(t)}if(i&&e.year===i.year){const t=r.findIndex(t=>t===i.month);r=r.slice(0,t+1)}return r}(this._calendar,e.firstDate,e.minDate,e.maxDate))):e.selectBoxes={years:[],months:[]},"arrows"!==e.navigation&&"select"!==e.navigation||!(o||r||"minDate"in t||"maxDate"in t||"disabled"in t)||(e.prevDisabled=e.disabled||function(t,e,n){const i=Object.assign(t.getPrev(e,"m"),{day:1});return null!=n&&(i.year===n.year&&i.month<n.month||i.year<n.year&&1===n.month)}(this._calendar,e.firstDate,e.minDate),e.nextDisabled=e.disabled||function(t,e,n){const i=Object.assign(t.getNext(e,"m"),{day:1});return null!=n&&i.after(n)}(this._calendar,e.lastDate,e.maxDate))}return e}};return t.\u0275fac=function(e){return new(e||t)(Yt(oR),Yt(hR))},t.\u0275prov=ut({token:t,factory:function(e){return t.\u0275fac(e)}}),t})();var fR=function(t){return t[t.PREV=0]="PREV",t[t.NEXT=1]="NEXT",t}({});let mR=(()=>{let t=class{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekdays=!0,this.showWeekNumbers=!1}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();function gR(){return new yR}let vR=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:gR,token:t,providedIn:"root"}),t})(),yR=(()=>{let t=class extends vR{fromModel(t){return t&&AO(t.year)&&AO(t.month)&&AO(t.day)?{year:t.year,month:t.month,day:t.day}:null}toModel(t){return t&&AO(t.year)&&AO(t.month)&&AO(t.day)?{year:t.year,month:t.month,day:t.day}:null}};return t.\u0275fac=function(e){return LL(e||t)},t.\u0275prov=ut({token:t,factory:function(e){return t.\u0275fac(e)}}),t})();const bR={provide:F_,useExisting:xt(()=>wR),multi:!0};let _R=(()=>{let t=class{constructor(t){this.templateRef=t}};return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","ngbDatepickerContent",""]]}),t})(),wR=(()=>{let t=class{constructor(t,e,n,i,r,o,s,a){this._service=t,this._calendar=e,this.i18n=n,this._elementRef=o,this._ngbDateAdapter=s,this._ngZone=a,this._controlValue=null,this._destroyed$=new C,this._publicState={},this.navigate=new Fc,this.dateSelect=new Fc,this.select=this.dateSelect,this.onChange=t=>{},this.onTouched=()=>{},["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekdays","showWeekNumbers","startDate"].forEach(t=>this[t]=i[t]),t.dateSelect$.pipe(px(this._destroyed$)).subscribe(t=>{this.dateSelect.emit(t)}),t.model$.pipe(px(this._destroyed$)).subscribe(t=>{const e=t.firstDate,n=this.model?this.model.firstDate:null;this._publicState={maxDate:t.maxDate,minDate:t.minDate,firstDate:t.firstDate,lastDate:t.lastDate,focusedDate:t.focusDate,months:t.months.map(t=>t.firstDate)};let i=!1;if(!e.equals(n)&&(this.navigate.emit({current:n?{year:n.year,month:n.month}:null,next:{year:e.year,month:e.month},preventDefault:()=>i=!0}),i&&null!==n))return void this._service.open(n);const o=t.selectedDate,s=t.focusDate,a=this.model?this.model.focusDate:null;this.model=t,aR(o,this._controlValue)&&(this._controlValue=o,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(o))),aR(s,a)&&a&&t.focusVisible&&this.focus(),r.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}focusDate(t){this._service.focus(eR.from(t))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(af(1)).subscribe(()=>{const t=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');t&&t.focus()})}navigateTo(t){this._service.open(eR.from(t?t.day?t:Object.assign(Object.assign({},t),{day:1}):null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=AA(this._contentEl.nativeElement,"focusin"),e=AA(this._contentEl.nativeElement,"focusout"),{nativeElement:n}=this._elementRef;q(t,e).pipe(Hp(({target:t,relatedTarget:e})=>!(EO(t,"ngb-dp-day")&&EO(e,"ngb-dp-day")&&n.contains(t)&&n.contains(e))),px(this._destroyed$)).subscribe(({type:t})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===t})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const t={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays"].forEach(e=>t[e]=this[e]),this._service.set(t),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(t){const e={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays"].filter(e=>e in t).forEach(t=>e[t]=this[t]),this._service.set(e),"startDate"in t){const{currentValue:e,previousValue:n}=t.startDate;lR(n,e)&&this.navigateTo(this.startDate)}}onDateSelect(t){this._service.focus(t),this._service.select(t,{emitEvent:!0})}onNavigateDateSelect(t){this._service.open(t)}onNavigateEvent(t){switch(t){case fR.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case fR.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._service.set({disabled:t})}writeValue(t){this._controlValue=eR.from(this._ngbDateAdapter.fromModel(t)),this._service.select(this._controlValue)}};return t.\u0275fac=function(e){return new(e||t)(Ns(pR),Ns(oR),Ns(hR),Ns(mR),Ns(os),Ns(tl),Ns(vR),Ns(Su))},t.\u0275cmp=fe({type:t,selectors:[["ngb-datepicker"]],contentQueries:function(t,e,n){var i;1&t&&Zc(n,_R,!0),2&t&&$c(i=tu())&&(e.contentTemplate=i.first)},viewQuery:function(t,e){var n;1&t&&(Yc(lk,!0),Yc(ck,!0)),2&t&&($c(n=tu())&&(e._defaultDayTemplate=n.first),$c(n=tu())&&(e._contentEl=n.first))},inputs:{dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekdays:"showWeekdays",showWeekNumbers:"showWeekNumbers",startDate:"startDate"},outputs:{navigate:"navigate",dateSelect:"dateSelect",select:"select"},exportAs:["ngbDatepicker"],features:[Xa([bR,pR]),Re],decls:10,vars:5,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(t,e){if(1&t&&(Ls(0,uk,1,5,"ng-template",null,0,ru),Ls(2,pk,1,1,"ng-template",null,1,ru),js(4,"div",2),Ls(5,fk,1,7,"ngb-datepicker-navigation",3),zs(),js(6,"div",4,5),Ls(8,mk,0,0,"ng-template",6),zs(),Ls(9,gk,0,0,"ng-template",6)),2&t){const t=Fs(3);Cr(5),Us("ngIf","none"!==e.navigation),Cr(1),va("ngb-dp-months",!e.contentTemplate),Cr(2),Us("ngTemplateOutlet",(null==e.contentTemplate?null:e.contentTemplate.templateRef)||t),Cr(1),Us("ngTemplateOutlet",e.footerTemplate)}},directives:function(){return[md,Ed,GR,pd,CR,ER]},styles:["ngb-datepicker{border:1px solid #dfdfdf;border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}.ngb-dp-body{z-index:1050}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-months{display:-ms-flexbox;display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}"],encapsulation:2,changeDetection:0}),t})();var AR=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});let xR=(()=>{let t=class{processKey(t,e){const{state:n,calendar:i}=e;switch(t.which){case AR.PageUp:e.focusDate(i.getPrev(n.focusedDate,t.shiftKey?"y":"m",1));break;case AR.PageDown:e.focusDate(i.getNext(n.focusedDate,t.shiftKey?"y":"m",1));break;case AR.End:e.focusDate(t.shiftKey?n.maxDate:n.lastDate);break;case AR.Home:e.focusDate(t.shiftKey?n.minDate:n.firstDate);break;case AR.ArrowLeft:e.focusDate(i.getPrev(n.focusedDate,"d",1));break;case AR.ArrowUp:e.focusDate(i.getPrev(n.focusedDate,"d",i.getDaysPerWeek()));break;case AR.ArrowRight:e.focusDate(i.getNext(n.focusedDate,"d",1));break;case AR.ArrowDown:e.focusDate(i.getNext(n.focusedDate,"d",i.getDaysPerWeek()));break;case AR.Enter:case AR.Space:e.focusSelect();break;default:return}t.preventDefault(),t.stopPropagation()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),CR=(()=>{let t=class{constructor(t,e,n,i){this.i18n=t,this.datepicker=e,this._keyboardService=n,this._service=i}set month(t){this.viewModel=this._service.getMonth(t)}onKeyDown(t){this._keyboardService.processKey(t,this.datepicker)}doSelect(t){t.context.disabled||t.hidden||this.datepicker.onDateSelect(t.date)}};return t.\u0275fac=function(e){return new(e||t)(Ns(hR),Ns(wR),Ns(xR),Ns(pR))},t.\u0275cmp=fe({type:t,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(t,e){1&t&&Xs("keydown",(function(t){return e.onKeyDown(t)}))},inputs:{month:"month"},decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(Ls(0,bk,3,2,"div",0),Ls(1,Ek,1,1,"ng-template",1)),2&t&&(Us("ngIf",e.datepicker.showWeekdays),Cr(1),Us("ngForOf",e.viewModel.weeks))},directives:[md,pd,Ed],styles:['ngb-datepicker-month{display:block}.ngb-dp-week-number,.ngb-dp-weekday{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:#5bc0de;color:var(--info)}.ngb-dp-week{border-radius:.25rem;display:-ms-flexbox;display:flex}.ngb-dp-weekdays{border-bottom:1px solid rgba(0,0,0,.125);border-radius:0;background-color:#f8f9fa;background-color:var(--light)}.ngb-dp-day,.ngb-dp-week-number,.ngb-dp-weekday{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}'],encapsulation:2}),t})(),ER=(()=>{let t=class{constructor(t){this.i18n=t,this.navigation=fR,this.months=[],this.navigate=new Fc,this.select=new Fc}onClickPrev(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}};return t.\u0275fac=function(e){return new(e||t)(Ns(hR))},t.\u0275cmp=fe({type:t,selectors:[["ngb-datepicker-navigation"]],inputs:{months:"months",date:"date",disabled:"disabled",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},decls:10,vars:4,consts:[[1,"ngb-dp-arrow"],["type","button",1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click",6,"aria-label","title"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"button",1),uc(2,Sk),Xs("click",(function(t){return e.onClickPrev(t)})),Hs(3,"span",2),zs(),zs(),Ls(4,Tk,1,4,"ngb-datepicker-navigation-select",3),Ls(5,Ok,1,1,void 0,4),js(6,"div",5),js(7,"button",1),uc(8,Mk),Xs("click",(function(t){return e.onClickNext(t)})),Hs(9,"span",2),zs(),zs()),2&t&&(Cr(1),Us("disabled",e.prevDisabled),Cr(3),Us("ngIf",e.showSelect),Cr(1),Us("ngIf",!e.showSelect),Cr(2),Us("disabled",e.nextDisabled))},directives:function(){return[md,WR,pd]},styles:["ngb-datepicker-navigation{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;-webkit-transform:rotate(-135deg);transform:rotate(-135deg)}.right .ngb-dp-navigation-chevron{-webkit-transform:rotate(45deg);transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow{display:-ms-flexbox;display:flex;-ms-flex:1 1 auto;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{-ms-flex-pack:end;justify-content:flex-end}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:-ms-flexbox;display:flex;-ms-flex:1 1 9rem;flex:1 1 9rem}"],encapsulation:2,changeDetection:0}),t})();const SR=(t,e)=>!!e&&e.some(e=>e.contains(t)),MR=(t,e)=>!e||null!=function(t,e){return e?void 0===t.closest?null:t.closest(e):null}(t,e),TR=(()=>"undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent)))();function PR(t,e,n,i,r,o,s,a){var l;n&&t.runOutsideAngular((l=()=>{const l=AA(e,"keydown").pipe(px(r),Hp(t=>t.which===AR.Escape),df(t=>t.preventDefault())),u=AA(e,"mousedown").pipe(F(t=>{const e=t.target;return 2!==t.button&&!SR(e,s)&&("inside"===n?SR(e,o)&&MR(e,a):"outside"===n?!SR(e,o):MR(e,a)||!SR(e,o))}),px(r)),h=AA(e,"mouseup").pipe(d_(u),Hp(([t,e])=>e),VP(0),px(r));(function(...t){if(1===t.length){if(!c(t[0]))return t[0];t=t[0]}return W(t,void 0).lift(new BP)})([l.pipe(F(t=>0)),h.pipe(F(t=>1))]).subscribe(e=>t.run(()=>i(e)))},TR?()=>setTimeout(()=>l(),100):l))}const kR=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function DR(t){const e=Array.from(t.querySelectorAll(kR)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}const OR=(t,e,n,i=!1)=>{t.runOutsideAngular(()=>{const t=AA(e,"focusin").pipe(px(n),F(t=>t.target));AA(e,"keydown").pipe(px(n),Hp(t=>t.which===AR.Tab),d_(t)).subscribe(([t,n])=>{const[i,r]=DR(e);n!==i&&n!==e||!t.shiftKey||(r.focus(),t.preventDefault()),n!==r||t.shiftKey||(i.focus(),t.preventDefault())}),i&&AA(e,"click").pipe(px(n),d_(t),F(t=>t[1])).subscribe(t=>t.focus())})};class RR{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(i=this.offset(e,!1)),i.top+=e.clientTop,i.left+=e.clientLeft}return n.top-=i.top,n.bottom-=i.top,n.left-=i.left,n.right-=i.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),i=window.pageYOffset-document.documentElement.clientTop,r=window.pageXOffset-document.documentElement.clientLeft;let o={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+i,bottom:n.bottom+i,left:n.left+r,right:n.right+r};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}positionElements(t,e,n,i){const[r="top",o="center"]=n.split("-"),s=i?this.offset(t,!1):this.position(t,!1),a=this.getAllStyles(e),l=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),u=parseFloat(a.marginLeft),h=parseFloat(a.marginRight);let d=0,p=0;switch(r){case"top":d=s.top-(e.offsetHeight+l+c);break;case"bottom":d=s.top+s.height;break;case"left":p=s.left-(e.offsetWidth+u+h);break;case"right":p=s.left+s.width}switch(o){case"top":d=s.top;break;case"bottom":d=s.top+s.height-e.offsetHeight;break;case"left":p=s.left;break;case"right":p=s.left+s.width-e.offsetWidth;break;case"center":"top"===r||"bottom"===r?p=s.left+s.width/2-e.offsetWidth/2:d=s.top+s.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(p)}px, ${Math.round(d)}px)`;const f=e.getBoundingClientRect(),m=document.documentElement,g=window.innerHeight||m.clientHeight,v=window.innerWidth||m.clientWidth;return f.left>=0&&f.top>=0&&f.right<=v&&f.bottom<=g}}const IR=/\s+/,LR=new RR;function FR(t,e,n,i,r){let o=Array.isArray(n)?n:n.split(IR);const s=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=e.classList,l=t=>{const[e,n]=t.split("-"),i=[];return r&&(i.push(`${r}-${e}`),n&&i.push(`${r}-${e}-${n}`),i.forEach(t=>{a.add(t)})),i};r&&s.forEach(t=>{a.remove(`${r}-${t}`)});let c=o.findIndex(t=>"auto"===t);c>=0&&s.forEach((function(t){null==o.find(e=>-1!==e.search("^"+t))&&o.splice(c++,1,t)}));const u=e.style;u.position="absolute",u.top="0",u.left="0",u["will-change"]="transform";let h=null,d=!1;for(h of o){let n=l(h);if(LR.positionElements(t,e,h,i)){d=!0;break}r&&n.forEach(t=>{a.remove(t)})}return d||(h=o[0],l(h),LR.positionElements(t,e,h,i)),h}function NR(){return new UR}let BR=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:NR,token:t,providedIn:"root"}),t})(),UR=(()=>{let t=class extends BR{parse(t){if(null!=t){const e=t.trim().split("-");if(1===e.length&&wO(e[0]))return{year:vO(e[0]),month:null,day:null};if(2===e.length&&wO(e[0])&&wO(e[1]))return{year:vO(e[0]),month:vO(e[1]),day:null};if(3===e.length&&wO(e[0])&&wO(e[1])&&wO(e[2]))return{year:vO(e[0]),month:vO(e[1]),day:vO(e[2])}}return null}format(t){return t?`${t.year}-${wO(t.month)?CO(t.month):""}-${wO(t.day)?CO(t.day):""}`:""}};return t.\u0275fac=function(e){return FL(e||t)},t.\u0275prov=ut({token:t,factory:function(e){return t.\u0275fac(e)}}),t})(),VR=(()=>{let t=class extends mR{constructor(){super(...arguments),this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"],this.restoreFocus=!0}};return t.\u0275fac=function(e){return NL(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();const jR={provide:F_,useExisting:xt(()=>HR),multi:!0},zR={provide:Z_,useExisting:xt(()=>HR),multi:!0};let HR=(()=>{let t=class{constructor(t,e,n,i,r,o,s,a,l,c,u){this._parserFormatter=t,this._elRef=e,this._vcRef=n,this._renderer=i,this._cfr=r,this._ngZone=o,this._calendar=s,this._dateAdapter=a,this._document=l,this._changeDetector=c,this._cRef=null,this._disabled=!1,this._elWithFocus=null,this._model=null,this.dateSelect=new Fc,this.navigate=new Fc,this.closed=new Fc,this._onChange=t=>{},this._onTouched=()=>{},this._validatorChange=()=>{},["autoClose","container","positionTarget","placement"].forEach(t=>this[t]=u[t]),this._zoneSubscription=o.onStable.subscribe(()=>this._updatePopupPosition())}get disabled(){return this._disabled}set disabled(t){this._disabled=""===t||t&&"false"!==t,this.isOpen()&&this._cRef.instance.setDisabledState(this._disabled)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}registerOnValidatorChange(t){this._validatorChange=t}setDisabledState(t){this.disabled=t}validate(t){const{value:e}=t;if(null!=e){const t=this._fromDateStruct(this._dateAdapter.fromModel(e));if(!t)return{ngbDate:{invalid:e}};if(this.minDate&&t.before(eR.from(this.minDate)))return{ngbDate:{minDate:{minDate:this.minDate,actual:e}}};if(this.maxDate&&t.after(eR.from(this.maxDate)))return{ngbDate:{maxDate:{maxDate:this.maxDate,actual:e}}}}return null}writeValue(t){this._model=this._fromDateStruct(this._dateAdapter.fromModel(t)),this._writeModelValue(this._model)}manualDateChange(t,e=!1){const n=t!==this._inputValue;n&&(this._inputValue=t,this._model=this._fromDateStruct(this._parserFormatter.parse(t))),!n&&e||this._onChange(this._model?this._dateAdapter.toModel(this._model):""===t?null:t),e&&this._model&&this._writeModelValue(this._model)}isOpen(){return!!this._cRef}open(){if(!this.isOpen()){const t=this._cfr.resolveComponentFactory(wR);this._cRef=this._vcRef.createComponent(t),this._applyPopupStyling(this._cRef.location.nativeElement),this._applyDatepickerInputs(this._cRef.instance),this._subscribeForDatepickerOutputs(this._cRef.instance),this._cRef.instance.ngOnInit(),this._cRef.instance.writeValue(this._dateAdapter.toModel(this._model)),this._cRef.instance.registerOnChange(t=>{this.writeValue(t),this._onChange(t),this._onTouched()}),this._cRef.changeDetectorRef.detectChanges(),this._cRef.instance.setDisabledState(this.disabled),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._cRef.location.nativeElement),this._elWithFocus=this._document.activeElement,OR(this._ngZone,this._cRef.location.nativeElement,this.closed,!0),this._cRef.instance.focus(),PR(this._ngZone,this._document,this.autoClose,()=>this.close(),this.closed,[],[this._elRef.nativeElement,this._cRef.location.nativeElement])}}close(){if(this.isOpen()){this._vcRef.remove(this._vcRef.indexOf(this._cRef.hostView)),this._cRef=null,this.closed.emit(),this._changeDetector.markForCheck();let t=this._elWithFocus;_O(this.restoreFocus)?t=this._document.querySelector(this.restoreFocus):void 0!==this.restoreFocus&&(t=this.restoreFocus),t&&t.focus?t.focus():this._document.body.focus()}}toggle(){this.isOpen()?this.close():this.open()}navigateTo(t){this.isOpen()&&this._cRef.instance.navigateTo(t)}onBlur(){this._onTouched()}onFocus(){this._elWithFocus=this._elRef.nativeElement}ngOnChanges(t){(t.minDate||t.maxDate)&&(this._validatorChange(),this.isOpen()&&(t.minDate&&(this._cRef.instance.minDate=this.minDate),t.maxDate&&(this._cRef.instance.maxDate=this.maxDate),this._cRef.instance.ngOnChanges(t)))}ngOnDestroy(){this.close(),this._zoneSubscription.unsubscribe()}_applyDatepickerInputs(t){["dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showNavigation","showWeekdays","showWeekNumbers"].forEach(e=>{void 0!==this[e]&&(t[e]=this[e])}),t.startDate=this.startDate||this._model}_applyPopupStyling(t){this._renderer.addClass(t,"dropdown-menu"),this._renderer.addClass(t,"show"),"body"===this.container&&this._renderer.addClass(t,"ngb-dp-body")}_subscribeForDatepickerOutputs(t){t.navigate.subscribe(t=>this.navigate.emit(t)),t.dateSelect.subscribe(t=>{this.dateSelect.emit(t),!0!==this.autoClose&&"inside"!==this.autoClose||this.close()})}_writeModelValue(t){const e=this._parserFormatter.format(t);this._inputValue=e,this._renderer.setProperty(this._elRef.nativeElement,"value",e),this.isOpen()&&(this._cRef.instance.writeValue(this._dateAdapter.toModel(t)),this._onTouched())}_fromDateStruct(t){const e=t?new eR(t.year,t.month,t.day):null;return this._calendar.isValid(e)?e:null}_updatePopupPosition(){if(!this._cRef)return;let t;if(t=_O(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget instanceof HTMLElement?this.positionTarget:this._elRef.nativeElement,this.positionTarget&&!t)throw new Error("ngbDatepicker could not find element declared in [positionTarget] to position against.");FR(t,this._cRef.location.nativeElement,this.placement,"body"===this.container)}};return t.\u0275fac=function(e){return new(e||t)(Ns(BR),Ns(tl),Ns(Sl),Ns(rl),Ns(Ja),Ns(Su),Ns(oR),Ns(vR),Ns(rh),Ns(os),Ns(VR))},t.\u0275dir=_e({type:t,selectors:[["input","ngbDatepicker",""]],hostVars:1,hostBindings:function(t,e){1&t&&Xs("input",(function(t){return e.manualDateChange(t.target.value)}))("change",(function(t){return e.manualDateChange(t.target.value,!0)}))("focus",(function(){return e.onFocus()}))("blur",(function(){return e.onBlur()})),2&t&&La("disabled",e.disabled)},inputs:{disabled:"disabled",autoClose:"autoClose",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",minDate:"minDate",maxDate:"maxDate",navigation:"navigation",outsideDays:"outsideDays",placement:"placement",restoreFocus:"restoreFocus",showWeekdays:"showWeekdays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",container:"container",positionTarget:"positionTarget"},outputs:{dateSelect:"dateSelect",navigate:"navigate",closed:"closed"},exportAs:["ngbDatepicker"],features:[Xa([jR,zR,{provide:mR,useExisting:VR}]),Re]}),t})(),GR=(()=>{let t=class{constructor(t){this.i18n=t}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}};return t.\u0275fac=function(e){return new(e||t)(Ns(hR))},t.\u0275cmp=fe({type:t,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(t,e){2&t&&va("bg-primary",e.selected)("text-white",e.selected)("text-muted",e.isMuted())("outside",e.isMuted())("active",e.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},attrs:Rk,decls:1,vars:1,template:function(t,e){1&t&&ka(0),2&t&&Da(e.i18n.getDayNumerals(e.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:0 0}[ngbDatepickerDayView].outside{opacity:.5}"],encapsulation:2,changeDetection:0}),t})(),WR=(()=>{let t=class{constructor(t,e){this.i18n=t,this._renderer=e,this.select=new Fc,this._month=-1,this._year=-1}changeMonth(t){this.select.emit(new eR(this.date.year,vO(t),1))}changeYear(t){this.select.emit(new eR(vO(t),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}};return t.\u0275fac=function(e){return new(e||t)(Ns(hR),Ns(rl))},t.\u0275cmp=fe({type:t,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(t,e){var n;1&t&&(Yc(Ik,!0,tl),Yc(Lk,!0,tl)),2&t&&($c(n=tu())&&(e.monthSelect=n.first),$c(n=tu())&&(e.yearSelect=n.first))},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},decls:8,vars:4,consts:[[1,"custom-select",3,"disabled","change",6,"aria-label","title"],["month",""],[3,"value",4,"ngFor","ngForOf"],["year",""],[3,"value"]],template:function(t,e){1&t&&(js(0,"select",0,1),uc(2,Fk),Xs("change",(function(t){return e.changeMonth(t.target.value)})),Ls(3,Bk,2,3,"option",2),zs(),js(4,"select",0,3),uc(6,Nk),Xs("change",(function(t){return e.changeYear(t.target.value)})),Ls(7,Uk,2,2,"option",2),zs()),2&t&&(Us("disabled",e.disabled),Cr(3),Us("ngForOf",e.months),Cr(1),Us("disabled",e.disabled),Cr(3),Us("ngForOf",e.years))},directives:[pd,_w,Cw],styles:["ngb-datepicker-navigation-select>.custom-select{-ms-flex:1 1 auto;flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.custom-select:focus{z-index:1}ngb-datepicker-navigation-select>.custom-select::-ms-value{background-color:transparent!important}"],encapsulation:2,changeDetection:0}),t})(),qR=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd,vA]]}),t})(),$R=(()=>{let t=class{constructor(){this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"]}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();var YR;let QR=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["",8,"navbar"]]}),t})(),XR=(()=>{let t=class{constructor(t){this.elementRef=t,this._disabled=!1}set disabled(t){this._disabled=""===t||!0===t}get disabled(){return this._disabled}};return t.\u0275fac=function(e){return new(e||t)(Ns(tl))},t.\u0275dir=_e({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(t,e){2&t&&va("disabled",e.disabled)},inputs:{disabled:"disabled"}}),t})(),KR=(()=>{let t=class{constructor(t,e){this.dropdown=t,this.placement="bottom",this.isOpen=!1,this.nativeElement=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Ns(xt(()=>tI)),Ns(tl))},t.\u0275dir=_e({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,XR,!1),2&t&&$c(i=tu())&&(e.menuItems=i)},hostVars:5,hostBindings:function(t,e){1&t&&Xs("keydown.ArrowUp",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.ArrowDown",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.Home",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.End",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.Enter",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.Space",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.Tab",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.Shift.Tab",(function(t){return e.dropdown.onKeyDown(t)})),2&t&&(Rs("x-placement",e.placement),va("dropdown-menu",!0)("show",e.dropdown.isOpen()))}}),t})(),ZR=(()=>{let t=class{constructor(t,e){this.dropdown=t,this.nativeElement=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Ns(xt(()=>tI)),Ns(tl))},t.\u0275dir=_e({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,e){2&t&&Rs("aria-expanded",e.dropdown.isOpen())}}),t})(),JR=(()=>{let t=YR=class extends ZR{constructor(t,e){super(t,e)}};return t.\u0275fac=function(e){return new(e||t)(Ns(xt(()=>tI)),Ns(tl))},t.\u0275dir=_e({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,e){1&t&&Xs("click",(function(){return e.dropdown.toggle()}))("keydown.ArrowUp",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.ArrowDown",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.Home",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.End",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.Tab",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.Shift.Tab",(function(t){return e.dropdown.onKeyDown(t)})),2&t&&Rs("aria-expanded",e.dropdown.isOpen())},features:[Xa([{provide:ZR,useExisting:xt(()=>YR)}]),Ba]}),t})(),tI=(()=>{let t=class{constructor(t,e,n,i,r,o,s){this._changeDetector=t,this._document=n,this._ngZone=i,this._elementRef=r,this._renderer=o,this._closed$=new C,this._bodyContainer=null,this._open=!1,this.openChange=new Fc,this.placement=e.placement,this.container=e.container,this.autoClose=e.autoClose,this.display=s?"static":"dynamic",this._zoneSubscription=i.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(af(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(t){t.container&&this._open&&this._applyContainer(this.container),t.placement&&!t.placement.isFirstChange&&this._applyPlacementClasses()}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&this._anchor.nativeElement.focus())}_setCloseHandlers(){PR(this._ngZone,this._document,this.autoClose,t=>{this.close(),0===t&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(t){const e=t.which,n=this._getMenuElements();let i=-1,r=null;const o=this._isEventFromToggle(t);if(!o&&n.length&&n.forEach((e,n)=>{e.contains(t.target)&&(r=e),e===this._document.activeElement&&(i=n)}),e!==AR.Space&&e!==AR.Enter){if(e!==AR.Tab){if(o||r){if(this.open(),n.length){switch(e){case AR.ArrowDown:i=Math.min(i+1,n.length-1);break;case AR.ArrowUp:if(this._isDropup()&&-1===i){i=n.length-1;break}i=Math.max(i-1,0);break;case AR.Home:i=0;break;case AR.End:i=n.length-1}n[i].focus()}t.preventDefault()}}else if(t.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===t.target)return void("body"!==this.container||t.shiftKey?t.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const e=this._menu.nativeElement.querySelectorAll(kR);t.shiftKey&&t.target===e[0]?(this._anchor.nativeElement.focus(),t.preventDefault()):t.shiftKey||t.target!==e[e.length-1]||(this._anchor.nativeElement.focus(),this.close())}else AA(t.target,"focusout").pipe(af(1)).subscribe(({relatedTarget:t})=>{this._elementRef.nativeElement.contains(t)||this.close()})}}else!r||!0!==this.autoClose&&"inside"!==this.autoClose||AA(r,"click").pipe(af(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(t){return this._anchor.nativeElement.contains(t.target)}_getMenuElements(){const t=this._menu;return null==t?[]:t.menuItems.filter(t=>!t.disabled).map(t=>t.elementRef.nativeElement)}_positionMenu(){const t=this._menu;this.isOpen()&&t&&this._applyPlacementClasses("dynamic"===this.display?FR(this._anchor.nativeElement,this._bodyContainer||this._menu.nativeElement,this.placement,"body"===this.container):this._getFirstPlacement(this.placement))}_getFirstPlacement(t){return Array.isArray(t)?t[0]:t.split(" ")[0]}_resetContainer(){const t=this._renderer;if(this._menu){const e=this._menu.nativeElement;t.appendChild(this._elementRef.nativeElement,e),t.removeStyle(e,"position"),t.removeStyle(e,"transform")}this._bodyContainer&&(t.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(t=null){if(this._resetContainer(),"body"===t){const t=this._renderer,e=this._menu.nativeElement,n=this._bodyContainer=this._bodyContainer||t.createElement("div");t.setStyle(n,"position","absolute"),t.setStyle(e,"position","static"),t.setStyle(n,"z-index","1050"),t.appendChild(n,e),t.appendChild(this._document.body,n)}}_applyPlacementClasses(t){const e=this._menu;if(e){t||(t=this._getFirstPlacement(this.placement));const n=this._renderer,i=this._elementRef.nativeElement;n.removeClass(i,"dropup"),n.removeClass(i,"dropdown"),e.placement="static"===this.display?null:t;const r=-1!==t.search("^top")?"dropup":"dropdown";n.addClass(i,r);const o=this._bodyContainer;o&&(n.removeClass(o,"dropup"),n.removeClass(o,"dropdown"),n.addClass(o,r))}}};return t.\u0275fac=function(e){return new(e||t)(Ns(os),Ns($R),Ns(rh),Ns(Su),Ns(tl),Ns(rl),Ns(QR,8))},t.\u0275dir=_e({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(t,e,n){var i;1&t&&(Kc(n,KR,!0),Kc(n,ZR,!0)),2&t&&($c(i=tu())&&(e._menu=i.first),$c(i=tu())&&(e._anchor=i.first))},hostVars:2,hostBindings:function(t,e){2&t&&va("show",e.isOpen())},inputs:{_open:["open","_open"],placement:"placement",container:"container",autoClose:"autoClose",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[Re]}),t})(),eI=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)}}),t})(),nI=(()=>{let t=class{constructor(){this.backdrop=!0,this.keyboard=!0}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();class iI{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}class rI{constructor(t,e,n,i,r,o){this._type=t,this._injector=e,this._viewContainerRef=n,this._renderer=i,this._componentFactoryResolver=r,this._applicationRef=o,this._windowRef=null,this._contentRef=null}open(t,e){return this._windowRef||(this._contentRef=this._getContentRef(t,e),this._windowRef=this._viewContainerRef.createComponent(this._componentFactoryResolver.resolveComponentFactory(this._type),this._viewContainerRef.length,this._injector,this._contentRef.nodes)),this._windowRef}close(){var t;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null,(null===(t=this._contentRef)||void 0===t?void 0:t.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null))}_getContentRef(t,e){if(t){if(t instanceof Cl){const n=t.createEmbeddedView(e);return this._applicationRef.attachView(n),new iI([n.rootNodes],n)}return new iI([[this._renderer.createText(`${t}`)]])}return new iI([])}}const oI=()=>{};let sI=(()=>{let t=class{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):oI}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,i=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=`${i+t}px`,()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}};return t.\u0275fac=function(e){return new(e||t)(Yt(rh))},t.\u0275prov=ut({factory:function(){return new t(Yt(rh))},token:t,providedIn:"root"}),t})(),aI=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:2,hostBindings:function(t,e){2&t&&ya("modal-backdrop fade show"+(e.backdropClass?" "+e.backdropClass:""))},inputs:{backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class lI{close(t){}dismiss(t){}}class cI{constructor(t,e,n,i){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=i,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}close(t){this._windowCmptRef&&(this._resolve(t),this._removeModalElements())}_dismiss(t){this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.location.nativeElement;if(t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._backdropCmptRef){const t=this._backdropCmptRef.location.nativeElement;t.parentNode.removeChild(t),this._backdropCmptRef.destroy()}this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._backdropCmptRef=null,this._contentRef=null}}var uI=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let hI=(()=>{let t=class{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new C,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Fc}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement}ngAfterViewInit(){const{nativeElement:t}=this._elRef;if(this._zone.runOutsideAngular(()=>{AA(t,"keydown").pipe(px(this._closed$),Hp(t=>t.which===AR.Escape&&this.keyboard)).subscribe(t=>requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(uI.ESC))}));let e=!1;AA(this._dialogEl.nativeElement,"mousedown").pipe(px(this._closed$),df(()=>e=!1),vf(()=>AA(t,"mouseup").pipe(px(this._closed$),af(1))),Hp(({target:e})=>t===e)).subscribe(()=>{e=!0}),AA(t,"click").pipe(px(this._closed$)).subscribe(({target:n})=>{!0!==this.backdrop||t!==n||e||this._zone.run(()=>this.dismiss(uI.BACKDROP_CLICK)),e=!1})}),!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=DR(t)[0];(e||n||t).focus()}}ngOnDestroy(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null}),this._closed$.next()}};return t.\u0275fac=function(e){return new(e||t)(Ns(rh),Ns(tl),Ns(Su))},t.\u0275cmp=fe({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){var n;1&t&&Yc(Vk,!0),2&t&&$c(n=tu())&&(e._dialogEl=n.first)},hostAttrs:["role","dialog","tabindex","-1"],hostVars:5,hostBindings:function(t,e){2&t&&(Rs("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),ya("modal fade show d-block"+(e.windowClass?" "+e.windowClass:"")))},inputs:{backdrop:"backdrop",keyboard:"keyboard",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:JP,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(ia(),js(0,"div",0,1),js(2,"div",2),sa(3),zs(),zs()),2&t&&ya("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":""))},styles:["ngb-modal-window .component-host-scrollable{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),dI=(()=>{let t=class{constructor(t,e,n,i,r,o){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=r,this._ngZone=o,this._activeWindowCmptHasChanged=new C,this._ariaHiddenValues=new Map,this._backdropAttributes=["backdropClass"],this._modalRefs=[],this._windowAttributes=["ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeInstances=new Fc,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];OR(this._ngZone,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,i){const r=i.container instanceof HTMLElement?i.container:xO(i.container)?this._document.querySelector(i.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),s=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!r)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);const l=new lI,c=this._getContentRef(t,i.injector||e,n,l,i);let u=!1!==i.backdrop?this._attachBackdrop(t,r):void 0,h=this._attachWindowComponent(t,r,c),d=new cI(h,c,u,i.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(h),d.result.then(s,s),d.result.then(a,a),l.close=t=>{d.close(t)},l.dismiss=t=>{d.dismiss(t)},this._applyWindowOptions(h.instance,i),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),u&&u.instance&&this._applyBackdropOptions(u.instance,i),d}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(aI).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let i=t.resolveComponentFactory(hI).create(this._injector,n.nodes);return this._applicationRef.attachView(i.hostView),e.appendChild(i.location.nativeElement),i}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{xO(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{xO(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,i,r){return n?n instanceof Cl?this._createFromTemplateRef(n,i):_O(n)?this._createFromString(n):this._createFromComponent(t,e,n,i,r):new iI([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new iI([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(`${t}`);return new iI([[e]])}_createFromComponent(t,e,n,i,r){const o=t.resolveComponentFactory(n),s=As.create({providers:[{provide:lI,useValue:i}],parent:e}),a=o.create(s),l=a.location.nativeElement;return r.scrollable&&l.classList.add("component-host-scrollable"),this._applicationRef.attachView(a.hostView),new iI([[l]],a.hostView,a)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}};return t.\u0275fac=function(e){return new(e||t)(Yt(Wu),Yt(As),Yt(rh),Yt(sI),Yt(nl),Yt(Su))},t.\u0275prov=ut({factory:function(){return new t(Yt(Wu),Yt(Ut),Yt(rh),Yt(sI),Yt(nl),Yt(Su))},token:t,providedIn:"root"}),t})(),pI=(()=>{let t=class{constructor(t,e,n,i){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=i}open(t,e={}){const n=Object.assign({},this._config,e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}};return t.\u0275fac=function(e){return new(e||t)(Yt(Ja),Yt(As),Yt(dI),Yt(nI))},t.\u0275prov=ut({factory:function(){return new t(Yt(Ja),Yt(Ut),Yt(dI),Yt(nI))},token:t,providedIn:"root"}),t})(),fI=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[pI]}),t})(),mI=(()=>{let t=class{constructor(){this.destroyOnHide=!0,this.orientation="horizontal",this.roles="tablist",this.keyboard=!1}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();const gI=t=>xO(t)&&""!==t;let vI=0,yI=(()=>{let t=class{constructor(t){this.templateRef=t}};return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","ngbNavContent",""]]}),t})(),bI=(()=>{let t=class{constructor(t,e){this.elementRef=e,this.disabled=!1,this._nav=t}ngAfterContentChecked(){this.contentTpl=this.contentTpls.first}ngOnInit(){xO(this.domId)||(this.domId=`ngb-nav-${vI++}`)}get active(){return this._nav.activeId===this.id}get id(){return gI(this._id)?this._id:this.domId}get panelDomId(){return`${this.domId}-panel`}isPanelInDom(){return(xO(this.destroyOnHide)?!this.destroyOnHide:!this._nav.destroyOnHide)||this.active}};return t.\u0275fac=function(e){return new(e||t)(Ns(xt(()=>_I)),Ns(tl))},t.\u0275dir=_e({type:t,selectors:[["","ngbNavItem",""]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,yI,!1),2&t&&$c(i=tu())&&(e.contentTpls=i)},hostVars:2,hostBindings:function(t,e){2&t&&va("nav-item",!0)},inputs:{disabled:"disabled",domId:"domId",destroyOnHide:"destroyOnHide",_id:["ngbNavItem","_id"]},exportAs:["ngbNavItem"]}),t})(),_I=(()=>{let t=class{constructor(t,e,n,i){this.role=t,this._cd=n,this._document=i,this.activeIdChange=new Fc,this.navChange=new Fc,this.destroyOnHide=e.destroyOnHide,this.orientation=e.orientation,this.roles=e.roles,this.keyboard=e.keyboard}click(t){t.disabled||this._updateActiveId(t.id)}onKeyDown(t){if("tablist"!==this.roles||!this.keyboard)return;const e=t.which,n=this.links.filter(t=>!t.navItem.disabled),{length:i}=n;let r=-1;if(n.forEach((t,e)=>{t.elRef.nativeElement===this._document.activeElement&&(r=e)}),i){switch(e){case AR.ArrowLeft:if("vertical"===this.orientation)return;r=(r-1+i)%i;break;case AR.ArrowRight:if("vertical"===this.orientation)return;r=(r+1)%i;break;case AR.ArrowDown:if("horizontal"===this.orientation)return;r=(r+1)%i;break;case AR.ArrowUp:if("horizontal"===this.orientation)return;r=(r-1+i)%i;break;case AR.Home:r=0;break;case AR.End:r=i-1}"changeWithArrows"===this.keyboard&&this.select(n[r].navItem.id),n[r].elRef.nativeElement.focus(),t.preventDefault()}}select(t){this._updateActiveId(t,!1)}ngAfterContentInit(){if(!xO(this.activeId)){const t=this.items.first?this.items.first.id:null;gI(t)&&(this._updateActiveId(t,!1),this._cd.detectChanges())}}_updateActiveId(t,e=!0){if(this.activeId!==t){let n=!1;e&&this.navChange.emit({activeId:this.activeId,nextId:t,preventDefault:()=>{n=!0}}),n||(this.activeId=t,this.activeIdChange.emit(t))}}};return t.\u0275fac=function(e){return new(e||t)(Bs("role"),Ns(mI),Ns(os),Ns(rh))},t.\u0275dir=_e({type:t,selectors:[["","ngbNav",""]],contentQueries:function(t,e,n){var i;1&t&&(Kc(n,bI,!1),Kc(n,wI,!0)),2&t&&($c(i=tu())&&(e.items=i),$c(i=tu())&&(e.links=i))},hostVars:6,hostBindings:function(t,e){1&t&&Xs("keydown.arrowLeft",(function(t){return e.onKeyDown(t)}))("keydown.arrowRight",(function(t){return e.onKeyDown(t)}))("keydown.arrowDown",(function(t){return e.onKeyDown(t)}))("keydown.arrowUp",(function(t){return e.onKeyDown(t)}))("keydown.Home",(function(t){return e.onKeyDown(t)}))("keydown.End",(function(t){return e.onKeyDown(t)})),2&t&&(Rs("aria-orientation","vertical"===e.orientation&&"tablist"===e.roles?"vertical":void 0)("role",e.role?e.role:e.roles?"tablist":void 0),va("nav",!0)("flex-column","vertical"===e.orientation))},inputs:{destroyOnHide:"destroyOnHide",orientation:"orientation",roles:"roles",keyboard:"keyboard",activeId:"activeId"},outputs:{activeIdChange:"activeIdChange",navChange:"navChange"},exportAs:["ngbNav"]}),t})(),wI=(()=>{let t=class{constructor(t,e,n,i){this.role=t,this.navItem=e,this.nav=n,this.elRef=i}hasNavItemClass(){return this.navItem.elementRef.nativeElement.nodeType===Node.COMMENT_NODE}};return t.\u0275fac=function(e){return new(e||t)(Bs("role"),Ns(bI),Ns(_I),Ns(tl))},t.\u0275dir=_e({type:t,selectors:[["a","ngbNavLink",""]],hostAttrs:["href",""],hostVars:14,hostBindings:function(t,e){1&t&&Xs("click",(function(t){return e.nav.click(e.navItem),t.preventDefault()})),2&t&&(La("id",e.navItem.domId),Rs("role",e.role?e.role:e.nav.roles?"tab":void 0)("tabindex",e.navItem.disabled?-1:void 0)("aria-controls",e.navItem.isPanelInDom()?e.navItem.panelDomId:null)("aria-selected",e.navItem.active)("aria-disabled",e.navItem.disabled),va("nav-link",!0)("nav-item",e.hasNavItemClass())("active",e.navItem.active)("disabled",e.navItem.disabled))}}),t})(),AI=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["","ngbNavOutlet",""]],hostVars:2,hostBindings:function(t,e){2&t&&va("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},attrs:jk,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["class","tab-pane",3,"id","active",4,"ngIf"],[1,"tab-pane",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&Ls(0,Wk,1,1,"ng-template",0),2&t&&Us("ngForOf",e.nav.items)},directives:[pd,md,Ed],encapsulation:2}),t})(),xI=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd]]}),t})(),CI=(()=>{let t=class{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),EI=(()=>{let t=class{constructor(t){this.templateRef=t}};return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","ngbPaginationEllipsis",""]]}),t})(),SI=(()=>{let t=class{constructor(t){this.templateRef=t}};return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","ngbPaginationFirst",""]]}),t})(),MI=(()=>{let t=class{constructor(t){this.templateRef=t}};return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","ngbPaginationLast",""]]}),t})(),TI=(()=>{let t=class{constructor(t){this.templateRef=t}};return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","ngbPaginationNext",""]]}),t})(),PI=(()=>{let t=class{constructor(t){this.templateRef=t}};return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","ngbPaginationNumber",""]]}),t})(),kI=(()=>{let t=class{constructor(t){this.templateRef=t}};return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","ngbPaginationPrevious",""]]}),t})(),DI=(()=>{let t=class{constructor(t){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new Fc(!0),this.disabled=t.disabled,this.boundaryLinks=t.boundaryLinks,this.directionLinks=t.directionLinks,this.ellipses=t.ellipses,this.maxSize=t.maxSize,this.pageSize=t.pageSize,this.rotate=t.rotate,this.size=t.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(t){this._updatePages(t)}ngOnChanges(t){this._updatePages(this.page)}isEllipsis(t){return-1===t}_applyEllipses(t,e){this.ellipses&&(t>0&&(t>2?this.pages.unshift(-1):2===t&&this.pages.unshift(2),this.pages.unshift(1)),e<this.pageCount&&(e<this.pageCount-2?this.pages.push(-1):e===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let t=0,e=this.pageCount,n=Math.floor(this.maxSize/2);return this.page<=n?e=this.maxSize:this.pageCount-this.page<n?t=this.pageCount-this.maxSize:(t=this.page-n-1,e=this.page+(this.maxSize%2==0?n-1:n)),[t,e]}_applyPagination(){let t=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[t,t+this.maxSize]}_setPageInRange(t){const e=this.page;this.page=bO(t,this.pageCount,1),this.page!==e&&wO(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(t){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),wO(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let e=1;e<=this.pageCount;e++)this.pages.push(e);if(this._setPageInRange(t),this.maxSize>0&&this.pageCount>this.maxSize){let t=0,e=this.pageCount;[t,e]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(t,e),this._applyEllipses(t,e)}}};return t.\u0275fac=function(e){return new(e||t)(Ns(CI))},t.\u0275cmp=fe({type:t,selectors:[["ngb-pagination"]],contentQueries:function(t,e,n){var i;1&t&&(Kc(n,EI,!0),Kc(n,SI,!0),Kc(n,MI,!0),Kc(n,TI,!0),Kc(n,PI,!0),Kc(n,kI,!0)),2&t&&($c(i=tu())&&(e.tplEllipsis=i.first),$c(i=tu())&&(e.tplFirst=i.first),$c(i=tu())&&(e.tplLast=i.first),$c(i=tu())&&(e.tplNext=i.first),$c(i=tu())&&(e.tplNumber=i.first),$c(i=tu())&&(e.tplPrevious=i.first))},hostAttrs:["role","navigation"],inputs:{page:"page",disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",maxSize:"maxSize",pageSize:"pageSize",rotate:"rotate",size:"size",collectionSize:"collectionSize"},outputs:{pageChange:"pageChange"},features:[Re],decls:18,vars:7,consts:[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["class","page-item",3,"disabled",4,"ngIf"],["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],["aria-hidden","true"],["class","sr-only",4,"ngIf"],[1,"sr-only"],[1,"page-item"],["href","",1,"page-link",3,"click",6,"aria-label"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"]],template:function(t,e){1&t&&(Ls(0,Xk,2,0,"ng-template",null,0,ru),Ls(2,Kk,2,0,"ng-template",null,1,ru),Ls(4,Zk,2,0,"ng-template",null,2,ru),Ls(6,Jk,2,0,"ng-template",null,3,ru),Ls(8,tD,1,0,"ng-template",null,4,ru),Ls(10,nD,2,2,"ng-template",null,5,ru),js(12,"ul"),Ls(13,sD,4,9,"li",6),Ls(14,uD,4,8,"li",6),Ls(15,vD,3,7,"li",7),Ls(16,_D,4,9,"li",6),Ls(17,xD,4,9,"li",6),zs()),2&t&&(Cr(12),ya("pagination"+(e.size?" pagination-"+e.size:"")),Cr(1),Us("ngIf",e.boundaryLinks),Cr(1),Us("ngIf",e.directionLinks),Cr(1),Us("ngForOf",e.pages),Cr(1),Us("ngIf",e.directionLinks),Cr(1),Us("ngIf",e.boundaryLinks))},directives:[md,pd,Ed],encapsulation:2,changeDetection:0}),t})(),OI=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd]]}),t})();class RI{constructor(t,e){this.open=t,this.close=e,e||(this.close=t)}isManual(){return"manual"===this.open||"manual"===this.close}}const II={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},LI=t=>t>0?VP(t):t=>t;function FI(t,e,n,i,r,o,s=0,a=0){const l=function(t,e=II){const n=(t||"").trim();if(0===n.length)return[];const i=n.split(/\s+/).map(t=>t.split(":")).map(t=>{let n=e[t[0]]||t;return new RI(n[0],n[1])}),r=i.filter(t=>t.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&i.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i}(n);if(1===l.length&&l[0].isManual())return()=>{};const c=function(t,e,n,i){return new b(r=>{const o=[],s=()=>r.next(!0),a=()=>r.next(!1),l=()=>r.next(!i());return n.forEach(n=>{n.open===n.close?o.push(t.listen(e,n.open,l)):o.push(t.listen(e,n.open,s),t.listen(e,n.close,a))}),()=>{o.forEach(t=>t())}})}(t,e,l,i).pipe(function(t,e,n){return i=>{let r=null;const o=i.pipe(F(t=>({open:t})),Hp(t=>{const e=n();return e===t.open||r&&r.open!==e?(r&&r.open!==t.open&&(r=null),!1):(r=t,!0)}),tt());return q(o.pipe(Hp(t=>t.open),LI(t)),o.pipe(Hp(t=>!t.open),LI(e))).pipe(Hp(t=>t===r&&(r=null,t.open!==n())),F(t=>t.open))}}(s,a,i)).subscribe(t=>t?r():o());return()=>c.unsubscribe()}let NI=(()=>{let t=class{constructor(){this.autoClose=!0,this.placement="auto",this.triggers="click",this.disablePopover=!1,this.openDelay=0,this.closeDelay=0}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),BI=0,UI=(()=>{let t=class{isTitleTemplate(){return this.title instanceof Cl}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["ngb-popover-window"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(t,e){2&t&&(La("id",e.id),ya("popover"+(e.popoverClass?" "+e.popoverClass:"")))},inputs:{title:"title",id:"id",popoverClass:"popoverClass",context:"context"},ngContentSelectors:JP,decls:4,vars:1,consts:[[1,"arrow"],["class","popover-header",4,"ngIf"],[1,"popover-body"],[1,"popover-header"],["simpleTitle",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(ia(),Hs(0,"div",0),Ls(1,SD,4,2,"h3",1),js(2,"div",2),sa(3),zs()),2&t&&(Cr(1),Us("ngIf",null!=e.title))},directives:[md,Ed],styles:["ngb-popover-window.bs-popover-bottom>.arrow,ngb-popover-window.bs-popover-top>.arrow{left:50%;margin-left:-.5rem}ngb-popover-window.bs-popover-bottom-left>.arrow,ngb-popover-window.bs-popover-top-left>.arrow{left:2em}ngb-popover-window.bs-popover-bottom-right>.arrow,ngb-popover-window.bs-popover-top-right>.arrow{left:auto;right:2em}ngb-popover-window.bs-popover-left>.arrow,ngb-popover-window.bs-popover-right>.arrow{top:50%;margin-top:-.5rem}ngb-popover-window.bs-popover-left-top>.arrow,ngb-popover-window.bs-popover-right-top>.arrow{top:.7em}ngb-popover-window.bs-popover-left-bottom>.arrow,ngb-popover-window.bs-popover-right-bottom>.arrow{top:auto;bottom:.7em}"],encapsulation:2,changeDetection:0}),t})(),VI=(()=>{let t=class{constructor(t,e,n,i,r,o,s,a,l,c){this._elementRef=t,this._renderer=e,this._ngZone=s,this._document=a,this._changeDetector=l,this.shown=new Fc,this.hidden=new Fc,this._ngbPopoverWindowId=`ngb-popover-${BI++}`,this._windowRef=null,this.autoClose=o.autoClose,this.placement=o.placement,this.triggers=o.triggers,this.container=o.container,this.disablePopover=o.disablePopover,this.popoverClass=o.popoverClass,this.openDelay=o.openDelay,this.closeDelay=o.closeDelay,this._popupService=new rI(UI,n,r,e,i,c),this._zoneSubscription=s.onStable.subscribe(()=>{this._windowRef&&FR(this._elementRef.nativeElement,this._windowRef.location.nativeElement,this.placement,"body"===this.container,"bs-popover")})}_isDisabled(){return!!this.disablePopover||!this.ngbPopover&&!this.popoverTitle}open(t){this._windowRef||this._isDisabled()||(this._windowRef=this._popupService.open(this.ngbPopover,t),this._windowRef.instance.title=this.popoverTitle,this._windowRef.instance.context=t,this._windowRef.instance.popoverClass=this.popoverClass,this._windowRef.instance.id=this._ngbPopoverWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbPopoverWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),PR(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),this.shown.emit())}close(){this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(),this._windowRef=null,this.hidden.emit(),this._changeDetector.markForCheck())}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=FI(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({ngbPopover:t,popoverTitle:e,disablePopover:n,popoverClass:i}){i&&this.isOpen()&&(this._windowRef.instance.popoverClass=i.currentValue),(t||e||n)&&this._isDisabled()&&this.close()}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}};return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(rl),Ns(As),Ns(Ja),Ns(Sl),Ns(NI),Ns(Su),Ns(rh),Ns(os),Ns(Wu))},t.\u0275dir=_e({type:t,selectors:[["","ngbPopover",""]],inputs:{autoClose:"autoClose",placement:"placement",triggers:"triggers",container:"container",disablePopover:"disablePopover",popoverClass:"popoverClass",openDelay:"openDelay",closeDelay:"closeDelay",ngbPopover:"ngbPopover",popoverTitle:"popoverTitle"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbPopover"],features:[Re]}),t})(),jI=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd]]}),t})(),zI=(()=>{let t=class{constructor(){this.max=100,this.animated=!1,this.striped=!1,this.showValue=!1}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),HI=(()=>{let t=class{constructor(t){this.value=0,this.max=t.max,this.animated=t.animated,this.striped=t.striped,this.textType=t.textType,this.type=t.type,this.showValue=t.showValue,this.height=t.height}set max(t){this._max=!wO(t)||t<=0?100:t}get max(){return this._max}getValue(){return bO(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}};return t.\u0275fac=function(e){return new(e||t)(Ns(zI))},t.\u0275cmp=fe({type:t,selectors:[["ngb-progressbar"]],inputs:{value:"value",max:"max",animated:"animated",striped:"striped",textType:"textType",type:"type",showValue:"showValue",height:"height"},ngContentSelectors:JP,decls:4,vars:13,consts:[[1,"progress"],["role","progressbar","aria-valuemin","0"],[4,"ngIf"]],template:function(t,e){var n,i,r,o;1&t&&(ia(),js(0,"div",0),js(1,"div",1),Ls(2,TD,3,3,"span",2),sa(3),zs(),zs()),2&t&&(ga("height",e.height),Cr(1),"progress-bar",n=e.type?" bg-"+e.type:"","",i=e.textType?" text-"+e.textType:"","\n      ",r=e.animated?" progress-bar-animated":"","",o=e.striped?" progress-bar-striped":"","",wa(se,ba,function(t,e,n,i,r,o,s,a,l,c){const u=function(t,e,n,i,r,o){const s=Os(t,e,n,i);return Os(t,e+2,r,o)||s}(t,pn(),n,r,s,l);return mn(4),u?e+$n(n)+i+$n(r)+o+$n(s)+a+$n(l)+c:br}(nn(),"progress-bar",n,"",i,"\n      ",r,"",o,""),!0),ga("width",e.getPercentValue(),"%"),Rs("aria-valuenow",e.getValue())("aria-valuemax",e.max),Cr(1),Us("ngIf",e.showValue))},directives:[md],pipes:[Gd],encapsulation:2,changeDetection:0}),t})(),GI=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd]]}),t})(),WI=(()=>{let t=class{constructor(){this.max=10,this.readonly=!1,this.resettable=!1}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();const qI={provide:F_,useExisting:xt(()=>$I),multi:!0};let $I=(()=>{let t=class{constructor(t,e){this._changeDetectorRef=e,this.contexts=[],this.disabled=!1,this.hover=new Fc,this.leave=new Fc,this.rateChange=new Fc(!0),this.onChange=t=>{},this.onTouched=()=>{},this.max=t.max,this.readonly=t.readonly}ariaValueText(){return`${this.nextRate} out of ${this.max}`}enter(t){this.readonly||this.disabled||this._updateState(t),this.hover.emit(t)}handleBlur(){this.onTouched()}handleClick(t){this.readonly||this.disabled||this.update(this.resettable&&this.rate===t?0:t)}handleKeyDown(t){switch(t.which){case AR.ArrowDown:case AR.ArrowLeft:this.update(this.rate-1);break;case AR.ArrowUp:case AR.ArrowRight:this.update(this.rate+1);break;case AR.Home:this.update(0);break;case AR.End:this.update(this.max);break;default:return}t.preventDefault()}ngOnChanges(t){t.rate&&this.update(this.rate)}ngOnInit(){this.contexts=Array.from({length:this.max},(t,e)=>({fill:0,index:e})),this._updateState(this.rate)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(t){this.disabled=t}update(t,e=!0){const n=bO(t,this.max,0);this.readonly||this.disabled||this.rate===n||(this.rate=n,this.rateChange.emit(this.rate)),e&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(t){this.update(t,!1),this._changeDetectorRef.markForCheck()}_getFillValue(t){const e=this.nextRate-t;return e>=1?100:e<1&&e>0?parseInt((100*e).toFixed(2),10):0}_updateState(t){this.nextRate=t,this.contexts.forEach((t,e)=>t.fill=this._getFillValue(e))}};return t.\u0275fac=function(e){return new(e||t)(Ns(WI),Ns(os))},t.\u0275cmp=fe({type:t,selectors:[["ngb-rating"]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,Cl,!0),2&t&&$c(i=tu())&&(e.starTemplateFromContent=i.first)},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(t,e){1&t&&Xs("blur",(function(){return e.handleBlur()}))("keydown",(function(t){return e.handleKeyDown(t)}))("mouseleave",(function(){return e.reset()})),2&t&&(La("tabindex",e.disabled?-1:0),Rs("aria-valuemax",e.max)("aria-valuenow",e.nextRate)("aria-valuetext",e.ariaValueText())("aria-disabled",!!e.readonly||null))},inputs:{max:"max",readonly:"readonly",rate:"rate",resettable:"resettable",starTemplate:"starTemplate"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},features:[Xa([qI]),Re],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"sr-only"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(Ls(0,PD,1,1,"ng-template",null,0,ru),Ls(2,DD,4,5,"ng-template",1)),2&t&&(Cr(2),Us("ngForOf",e.contexts))},directives:[pd,Ed],encapsulation:2,changeDetection:0}),t})(),YI=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd]]}),t})(),QI=(()=>{let t=class{constructor(){this.justify="start",this.orientation="horizontal",this.type="tabs"}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),XI=0,KI=(()=>{let t=class{constructor(t){this.templateRef=t}};return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","ngbTabTitle",""]]}),t})(),ZI=(()=>{let t=class{constructor(t){this.templateRef=t}};return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","ngbTabContent",""]]}),t})(),JI=(()=>{let t=class{constructor(){this.id=`ngb-tab-${XI++}`,this.disabled=!1}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.contentTpl=this.contentTpls.first}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["ngb-tab"]],contentQueries:function(t,e,n){var i;1&t&&(Kc(n,KI,!1),Kc(n,ZI,!1)),2&t&&($c(i=tu())&&(e.titleTpls=i),$c(i=tu())&&(e.contentTpls=i))},inputs:{id:"id",disabled:"disabled",title:"title"}}),t})(),tL=(()=>{let t=class{constructor(t){this.destroyOnHide=!0,this.tabChange=new Fc,this.type=t.type,this.justify=t.justify,this.orientation=t.orientation}set justify(t){this.justifyClass="fill"===t||"justified"===t?`nav-${t}`:`justify-content-${t}`}select(t){let e=this._getTabById(t);if(e&&!e.disabled&&this.activeId!==e.id){let t=!1;this.tabChange.emit({activeId:this.activeId,nextId:e.id,preventDefault:()=>{t=!0}}),t||(this.activeId=e.id)}}ngAfterContentChecked(){let t=this._getTabById(this.activeId);this.activeId=t?t.id:this.tabs.length?this.tabs.first.id:null}_getTabById(t){let e=this.tabs.filter(e=>e.id===t);return e.length?e[0]:null}};return t.\u0275fac=function(e){return new(e||t)(Ns(QI))},t.\u0275cmp=fe({type:t,selectors:[["ngb-tabset"]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,JI,!1),2&t&&$c(i=tu())&&(e.tabs=i)},inputs:{destroyOnHide:"destroyOnHide",type:"type",justify:"justify",orientation:"orientation",activeId:"activeId"},outputs:{tabChange:"tabChange"},exportAs:["ngbTabset"],decls:4,vars:4,consts:[["role","tablist"],["class","nav-item",4,"ngFor","ngForOf"],[1,"tab-content"],["ngFor","",3,"ngForOf"],[1,"nav-item"],["href","","role","tab",1,"nav-link",3,"id","click"],[3,"ngTemplateOutlet"],["role","tabpanel",3,"class","id",4,"ngIf"],["role","tabpanel",3,"id"]],template:function(t,e){1&t&&(js(0,"ul",0),Ls(1,RD,4,11,"li",1),zs(),js(2,"div",2),Ls(3,FD,1,1,"ng-template",3),zs()),2&t&&(ya("nav nav-"+e.type+("horizontal"==e.orientation?" "+e.justifyClass:" flex-column")),Cr(1),Us("ngForOf",e.tabs),Cr(2),Us("ngForOf",e.tabs))},directives:[pd,Ed,md],encapsulation:2}),t})(),eL=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd]]}),t})();class nL{constructor(t,e,n){this.hour=vO(t),this.minute=vO(e),this.second=vO(n)}changeHour(t=1){this.updateHour((isNaN(this.hour)?0:this.hour)+t)}updateHour(t){this.hour=wO(t)?(t<0?24+t:t)%24:NaN}changeMinute(t=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+t)}updateMinute(t){wO(t)?(this.minute=t%60<0?60+t%60:t%60,this.changeHour(Math.floor(t/60))):this.minute=NaN}changeSecond(t=1){this.updateSecond((isNaN(this.second)?0:this.second)+t)}updateSecond(t){wO(t)?(this.second=t<0?60+t%60:t%60,this.changeMinute(Math.floor(t/60))):this.second=NaN}isValid(t=!0){return wO(this.hour)&&wO(this.minute)&&(!t||wO(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let iL=(()=>{let t=class{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();function rL(){return new sL}let oL=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:rL,token:t,providedIn:"root"}),t})(),sL=(()=>{let t=class extends oL{fromModel(t){return t&&AO(t.hour)&&AO(t.minute)?{hour:t.hour,minute:t.minute,second:AO(t.second)?t.second:null}:null}toModel(t){return t&&AO(t.hour)&&AO(t.minute)?{hour:t.hour,minute:t.minute,second:AO(t.second)?t.second:null}:null}};return t.\u0275fac=function(e){return BL(e||t)},t.\u0275prov=ut({token:t,factory:function(e){return t.\u0275fac(e)}}),t})(),aL=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return t=Yt(fu),new lL(t);var t},token:t,providedIn:"root"}),t})(),lL=(()=>{let t=class extends aL{constructor(t){super(),this._periods=Ph(t,Eh.Standalone,Sh.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}};return t.\u0275fac=function(e){return new(e||t)(Yt(fu))},t.\u0275prov=ut({token:t,factory:function(e){return t.\u0275fac(e)}}),t})();const cL=/[^0-9]/g,uL={provide:F_,useExisting:xt(()=>hL),multi:!0};let hL=(()=>{let t=class{constructor(t,e,n,i){this._config=t,this._ngbTimeAdapter=e,this._cd=n,this.i18n=i,this.onChange=t=>{},this.onTouched=()=>{},this.meridian=t.meridian,this.spinners=t.spinners,this.seconds=t.seconds,this.hourStep=t.hourStep,this.minuteStep=t.minuteStep,this.secondStep=t.secondStep,this.disabled=t.disabled,this.readonlyInputs=t.readonlyInputs,this.size=t.size}set hourStep(t){this._hourStep=AO(t)?t:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(t){this._minuteStep=AO(t)?t:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(t){this._secondStep=AO(t)?t:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(t){const e=this._ngbTimeAdapter.fromModel(t);this.model=e?new nL(e.hour,e.minute,e.second):new nL,this.seconds||e&&wO(e.second)||(this.model.second=0),this._cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}changeHour(t){this.model.changeHour(t),this.propagateModelChange()}changeMinute(t){this.model.changeMinute(t),this.propagateModelChange()}changeSecond(t){this.model.changeSecond(t),this.propagateModelChange()}updateHour(t){const e=this.model.hour>=12,n=vO(t);this.model.updateHour(this.meridian&&(e&&n<12||!e&&12===n)?n+12:n),this.propagateModelChange()}updateMinute(t){this.model.updateMinute(vO(t)),this.propagateModelChange()}updateSecond(t){this.model.updateSecond(vO(t)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(t){t.value=t.value.replace(cL,"")}formatHour(t){return wO(t)?CO(this.meridian?t%12==0?12:t%12:t%24):CO(NaN)}formatMinSec(t){return CO(wO(t)?t:NaN)}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(t){t.seconds&&!this.seconds&&this.model&&!wO(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(t=!0){t&&this.onTouched(),this.model.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}};return t.\u0275fac=function(e){return new(e||t)(Ns(iL),Ns(oL),Ns(os),Ns(aL))},t.\u0275cmp=fe({type:t,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},features:[Xa([uL]),Re],decls:18,vars:25,consts:[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric",1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","input","keydown.ArrowUp","keydown.ArrowDown",6,"placeholder","aria-label"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"sr-only"],[1,"chevron","ngb-tp-chevron","bottom"],[1,"ngb-tp-input-container","ngb-tp-second"],[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""]],template:function(t,e){1&t&&(js(0,"fieldset",0),js(1,"div",1),js(2,"div",2),Ls(3,HD,4,7,"button",3),js(4,"input",4),uc(5,ND),Xs("change",(function(t){return e.updateHour(t.target.value)}))("input",(function(t){return e.formatInput(t.target)}))("keydown.ArrowUp",(function(t){return e.changeHour(e.hourStep),t.preventDefault()}))("keydown.ArrowDown",(function(t){return e.changeHour(0-e.hourStep),t.preventDefault()})),zs(),Ls(6,GD,4,7,"button",3),zs(),js(7,"div",5),ka(8,":"),zs(),js(9,"div",6),Ls(10,WD,4,7,"button",3),js(11,"input",4),uc(12,BD),Xs("change",(function(t){return e.updateMinute(t.target.value)}))("input",(function(t){return e.formatInput(t.target)}))("keydown.ArrowUp",(function(t){return e.changeMinute(e.minuteStep),t.preventDefault()}))("keydown.ArrowDown",(function(t){return e.changeMinute(0-e.minuteStep),t.preventDefault()})),zs(),Ls(13,qD,4,7,"button",3),zs(),Ls(14,$D,2,0,"div",7),Ls(15,eO,5,9,"div",8),Ls(16,nO,1,0,"div",7),Ls(17,oO,5,9,"div",9),zs(),zs()),2&t&&(va("disabled",e.disabled),Us("disabled",e.disabled),Cr(3),Us("ngIf",e.spinners),Cr(1),va("form-control-sm",e.isSmallSize)("form-control-lg",e.isLargeSize),Us("value",e.formatHour(null==e.model?null:e.model.hour))("readOnly",e.readonlyInputs)("disabled",e.disabled),Cr(2),Us("ngIf",e.spinners),Cr(4),Us("ngIf",e.spinners),Cr(1),va("form-control-sm",e.isSmallSize)("form-control-lg",e.isLargeSize),Us("value",e.formatMinSec(null==e.model?null:e.model.minute))("readOnly",e.readonlyInputs)("disabled",e.disabled),Cr(2),Us("ngIf",e.spinners),Cr(1),Us("ngIf",e.seconds),Cr(1),Us("ngIf",e.seconds),Cr(1),Us("ngIf",e.meridian),Cr(1),Us("ngIf",e.meridian))},directives:[md],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron::before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;-webkit-transform:rotate(135deg);transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-meridian,.ngb-tp-minute,.ngb-tp-second{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}'],encapsulation:2}),t})(),dL=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd]]}),t})(),pL=(()=>{let t=class{constructor(){this.autohide=!0,this.delay=500,this.ariaLive="polite"}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),fL=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","ngbToastHeader",""]]}),t})(),mL=(()=>{let t=class{constructor(t,e){this.ariaLive=t,this.contentHeaderTpl=null,this.hideOutput=new Fc,null==this.ariaLive&&(this.ariaLive=e.ariaLive),this.delay=e.delay,this.autohide=e.autohide}ngAfterContentInit(){this._init()}ngOnChanges(t){"autohide"in t&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout(),this.hideOutput.emit()}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}};return t.\u0275fac=function(e){return new(e||t)(Bs("aria-live"),Ns(pL))},t.\u0275cmp=fe({type:t,selectors:[["ngb-toast"]],contentQueries:function(t,e,n){var i;1&t&&Zc(n,fL,!0,Cl),2&t&&$c(i=tu())&&(e.contentHeaderTpl=i.first)},hostAttrs:["role","alert","aria-atomic","true"],hostVars:5,hostBindings:function(t,e){2&t&&(Rs("aria-live",e.ariaLive),va("toast",!0)("show",!0))},inputs:{delay:"delay",autohide:"autohide",header:"header"},outputs:{hideOutput:"hide"},exportAs:["ngbToast"],features:[Re],ngContentSelectors:JP,decls:5,vars:1,consts:[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"mr-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button",1,"close",3,"click",6,"aria-label"],["aria-hidden","true"]],template:function(t,e){1&t&&(ia(),Ls(0,sO,2,1,"ng-template",null,0,ru),Ls(2,cO,6,1,"ng-template",1),js(3,"div",2),sa(4),zs()),2&t&&(Cr(2),Us("ngIf",e.contentHeaderTpl||e.header))},directives:[md,Ed],styles:[".ngb-toasts{position:fixed;top:0;right:0;margin:.5em;z-index:1200}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}"],encapsulation:2}),t})(),gL=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd]]}),t})(),vL=(()=>{let t=class{constructor(){this.autoClose=!0,this.placement="auto",this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),yL=0,bL=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:3,hostBindings:function(t,e){2&t&&(La("id",e.id),ya("tooltip show"+(e.tooltipClass?" "+e.tooltipClass:"")))},inputs:{id:"id",tooltipClass:"tooltipClass"},ngContentSelectors:JP,decls:3,vars:0,consts:[[1,"arrow"],[1,"tooltip-inner"]],template:function(t,e){1&t&&(ia(),Hs(0,"div",0),js(1,"div",1),sa(2),zs())},styles:["ngb-tooltip-window.bs-tooltip-bottom .arrow,ngb-tooltip-window.bs-tooltip-top .arrow{left:calc(50% - .4rem)}ngb-tooltip-window.bs-tooltip-bottom-left .arrow,ngb-tooltip-window.bs-tooltip-top-left .arrow{left:1em}ngb-tooltip-window.bs-tooltip-bottom-right .arrow,ngb-tooltip-window.bs-tooltip-top-right .arrow{left:auto;right:.8rem}ngb-tooltip-window.bs-tooltip-left .arrow,ngb-tooltip-window.bs-tooltip-right .arrow{top:calc(50% - .4rem)}ngb-tooltip-window.bs-tooltip-left-top .arrow,ngb-tooltip-window.bs-tooltip-right-top .arrow{top:.4rem}ngb-tooltip-window.bs-tooltip-left-bottom .arrow,ngb-tooltip-window.bs-tooltip-right-bottom .arrow{top:auto;bottom:.4rem}"],encapsulation:2,changeDetection:0}),t})(),_L=(()=>{let t=class{constructor(t,e,n,i,r,o,s,a,l,c){this._elementRef=t,this._renderer=e,this._ngZone=s,this._document=a,this._changeDetector=l,this.shown=new Fc,this.hidden=new Fc,this._ngbTooltipWindowId=`ngb-tooltip-${yL++}`,this._windowRef=null,this.autoClose=o.autoClose,this.placement=o.placement,this.triggers=o.triggers,this.container=o.container,this.disableTooltip=o.disableTooltip,this.tooltipClass=o.tooltipClass,this.openDelay=o.openDelay,this.closeDelay=o.closeDelay,this._popupService=new rI(bL,n,r,e,i,c),this._zoneSubscription=s.onStable.subscribe(()=>{this._windowRef&&FR(this._elementRef.nativeElement,this._windowRef.location.nativeElement,this.placement,"body"===this.container,"bs-tooltip")})}set ngbTooltip(t){this._ngbTooltip=t,!t&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(t){this._windowRef||!this._ngbTooltip||this.disableTooltip||(this._windowRef=this._popupService.open(this._ngbTooltip,t),this._windowRef.instance.tooltipClass=this.tooltipClass,this._windowRef.instance.id=this._ngbTooltipWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbTooltipWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),PR(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),this.shown.emit())}close(){null!=this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(),this._windowRef=null,this.hidden.emit(),this._changeDetector.markForCheck())}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=FI(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:t}){t&&this.isOpen()&&(this._windowRef.instance.tooltipClass=t.currentValue)}ngOnDestroy(){this.close(),this._unregisterListenersFn&&this._unregisterListenersFn(),this._zoneSubscription.unsubscribe()}};return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(rl),Ns(As),Ns(Ja),Ns(Sl),Ns(vL),Ns(Su),Ns(rh),Ns(os),Ns(Wu))},t.\u0275dir=_e({type:t,selectors:[["","ngbTooltip",""]],inputs:{autoClose:"autoClose",placement:"placement",triggers:"triggers",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],features:[Re]}),t})(),wL=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)}}),t})(),AL=(()=>{let t=class{constructor(){this.highlightClass="ngb-highlight"}ngOnChanges(t){const e=yO(this.result),n=(Array.isArray(this.term)?this.term:[this.term]).map(t=>yO(t).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")).filter(t=>t);this.parts=n.length?e.split(new RegExp(`(${n.join("|")})`,"gmi")):[e]}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term"},features:[Re],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(t,e){1&t&&Ls(0,dO,3,2,"ng-template",0),2&t&&Us("ngForOf",e.parts)},directives:[pd,md],styles:[".ngb-highlight{font-weight:700}"],encapsulation:2,changeDetection:0}),t})(),xL=(()=>{let t=class{constructor(){this.activeIdx=0,this.focusFirst=!0,this.formatter=yO,this.selectEvent=new Fc,this.activeChangeEvent=new Fc}hasActive(){return this.activeIdx>-1&&this.activeIdx<this.results.length}getActive(){return this.results[this.activeIdx]}markActive(t){this.activeIdx=t,this._activeChanged()}next(){this.activeIdx===this.results.length-1?this.activeIdx=this.focusFirst?(this.activeIdx+1)%this.results.length:-1:this.activeIdx++,this._activeChanged()}prev(){this.activeIdx<0?this.activeIdx=this.results.length-1:0===this.activeIdx?this.activeIdx=this.focusFirst?this.results.length-1:-1:this.activeIdx--,this._activeChanged()}resetActive(){this.activeIdx=this.focusFirst?0:-1,this._activeChanged()}select(t){this.selectEvent.emit(t)}ngOnInit(){this.resetActive()}_activeChanged(){this.activeChangeEvent.emit(this.activeIdx>=0?this.id+"-"+this.activeIdx:void 0)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["ngb-typeahead-window"]],hostAttrs:["role","listbox",1,"dropdown-menu","show"],hostVars:1,hostBindings:function(t,e){1&t&&Xs("mousedown",(function(t){return t.preventDefault()})),2&t&&La("id",e.id)},inputs:{focusFirst:"focusFirst",formatter:"formatter",id:"id",results:"results",term:"term",resultTemplate:"resultTemplate"},outputs:{selectEvent:"select",activeChangeEvent:"activeChange"},exportAs:["ngbTypeaheadWindow"],decls:3,vars:1,consts:[["rt",""],["ngFor","",3,"ngForOf"],[3,"result","term"],["type","button","role","option",1,"dropdown-item",3,"id","mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(Ls(0,pO,1,2,"ng-template",null,0,ru),Ls(2,gO,2,9,"ng-template",1)),2&t&&(Cr(2),Us("ngForOf",e.results))},directives:[pd,AL,Ed],encapsulation:2}),t})();const CL=new Bt("live announcer delay",{providedIn:"root",factory:function(){return 100}});function EL(t,e=!1){let n=t.body.querySelector("#ngb-live");return null==n&&e&&(n=t.createElement("div"),n.setAttribute("id","ngb-live"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),n.classList.add("sr-only"),t.body.appendChild(n)),n}let SL=(()=>{let t=class{constructor(t,e){this._document=t,this._delay=e}ngOnDestroy(){const t=EL(this._document);t&&t.parentElement.removeChild(t)}say(t){const e=EL(this._document,!0),n=this._delay;if(null!=e){e.textContent="";const i=()=>e.textContent=t;null===n?i():setTimeout(i,n)}}};return t.\u0275fac=function(e){return new(e||t)(Yt(rh),Yt(CL))},t.\u0275prov=ut({factory:function(){return new t(Yt(rh),Yt(CL))},token:t,providedIn:"root"}),t})(),ML=(()=>{let t=class{constructor(){this.editable=!0,this.focusFirst=!0,this.showHint=!1,this.placement=["bottom-left","bottom-right","top-left","top-right"]}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();const TL={provide:F_,useExisting:xt(()=>kL),multi:!0};let PL=0,kL=(()=>{let t=class{constructor(t,e,n,i,r,o,s,a,l,c,u,h){this._elementRef=t,this._renderer=n,this._live=a,this._document=l,this._ngZone=c,this._changeDetector=u,this._subscription=null,this._closed$=new C,this._inputValueBackup=null,this._windowRef=null,this.autocomplete="off",this.placement="bottom-left",this.selectItem=new Fc,this.activeDescendant=null,this.popupId=`ngb-typeahead-${PL++}`,this._onTouched=()=>{},this._onChange=t=>{},this.container=o.container,this.editable=o.editable,this.focusFirst=o.focusFirst,this.showHint=o.showHint,this.placement=o.placement,this._valueChanges=AA(t.nativeElement,"input").pipe(F(t=>t.target.value)),this._resubscribeTypeahead=new Rp(null),this._popupService=new rI(xL,i,e,n,r,h),this._zoneSubscription=s.onStable.subscribe(()=>{this.isPopupOpen()&&FR(this._elementRef.nativeElement,this._windowRef.location.nativeElement,this.placement,"body"===this.container)})}ngOnInit(){const t=this._valueChanges.pipe(df(t=>{this._inputValueBackup=this.showHint?t:null,this._onChange(this.editable?t:void 0)})).pipe(this.ngbTypeahead),e=this._resubscribeTypeahead.pipe(vf(()=>t));this._subscription=this._subscribeToUserInput(e)}ngOnDestroy(){this._closePopup(),this._unsubscribeFromUserInput(),this._zoneSubscription.unsubscribe()}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}writeValue(t){this._writeInputValue(this._formatItemForInput(t)),this.showHint&&(this._inputValueBackup=t)}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}dismissPopup(){this.isPopupOpen()&&(this._resubscribeTypeahead.next(null),this._closePopup(),this.showHint&&null!==this._inputValueBackup&&this._writeInputValue(this._inputValueBackup),this._changeDetector.markForCheck())}isPopupOpen(){return null!=this._windowRef}handleBlur(){this._resubscribeTypeahead.next(null),this._onTouched()}handleKeyDown(t){if(this.isPopupOpen())switch(t.which){case AR.ArrowDown:t.preventDefault(),this._windowRef.instance.next(),this._showHint();break;case AR.ArrowUp:t.preventDefault(),this._windowRef.instance.prev(),this._showHint();break;case AR.Enter:case AR.Tab:const e=this._windowRef.instance.getActive();xO(e)&&(t.preventDefault(),t.stopPropagation(),this._selectResult(e)),this._closePopup()}}_openPopup(){this.isPopupOpen()||(this._inputValueBackup=this._elementRef.nativeElement.value,this._windowRef=this._popupService.open(),this._windowRef.instance.id=this.popupId,this._windowRef.instance.selectEvent.subscribe(t=>this._selectResultClosePopup(t)),this._windowRef.instance.activeChangeEvent.subscribe(t=>this.activeDescendant=t),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._changeDetector.markForCheck(),PR(this._ngZone,this._document,"outside",()=>this.dismissPopup(),this._closed$,[this._elementRef.nativeElement,this._windowRef.location.nativeElement]))}_closePopup(){this._closed$.next(),this._popupService.close(),this._windowRef=null,this.activeDescendant=null}_selectResult(t){let e=!1;this.selectItem.emit({item:t,preventDefault:()=>{e=!0}}),this._resubscribeTypeahead.next(null),e||(this.writeValue(t),this._onChange(t))}_selectResultClosePopup(t){this._selectResult(t),this._closePopup()}_showHint(){var t;if(this.showHint&&(null===(t=this._windowRef)||void 0===t?void 0:t.instance.hasActive())&&null!=this._inputValueBackup){const t=this._inputValueBackup.toLowerCase(),e=this._formatItemForInput(this._windowRef.instance.getActive());t===e.substr(0,this._inputValueBackup.length).toLowerCase()?(this._writeInputValue(this._inputValueBackup+e.substr(this._inputValueBackup.length)),this._elementRef.nativeElement.setSelectionRange.apply(this._elementRef.nativeElement,[this._inputValueBackup.length,e.length])):this._writeInputValue(e)}}_formatItemForInput(t){return null!=t&&this.inputFormatter?this.inputFormatter(t):yO(t)}_writeInputValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",yO(t))}_subscribeToUserInput(t){return t.subscribe(t=>{t&&0!==t.length?(this._openPopup(),this._windowRef.instance.focusFirst=this.focusFirst,this._windowRef.instance.results=t,this._windowRef.instance.term=this._elementRef.nativeElement.value,this.resultFormatter&&(this._windowRef.instance.formatter=this.resultFormatter),this.resultTemplate&&(this._windowRef.instance.resultTemplate=this.resultTemplate),this._windowRef.instance.resetActive(),this._windowRef.changeDetectorRef.detectChanges(),this._showHint()):this._closePopup();const e=t?t.length:0;this._live.say(0===e?"No results available":`${e} result${1===e?"":"s"} available`)})}_unsubscribeFromUserInput(){this._subscription&&this._subscription.unsubscribe(),this._subscription=null}};return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(Sl),Ns(rl),Ns(As),Ns(Ja),Ns(ML),Ns(Su),Ns(SL),Ns(rh),Ns(Su),Ns(os),Ns(Wu))},t.\u0275dir=_e({type:t,selectors:[["input","ngbTypeahead",""]],hostAttrs:["autocapitalize","off","autocorrect","off","role","combobox","aria-multiline","false"],hostVars:7,hostBindings:function(t,e){1&t&&Xs("blur",(function(){return e.handleBlur()}))("keydown",(function(t){return e.handleKeyDown(t)})),2&t&&(La("autocomplete",e.autocomplete),Rs("aria-autocomplete",e.showHint?"both":"list")("aria-activedescendant",e.activeDescendant)("aria-owns",e.isPopupOpen()?e.popupId:null)("aria-expanded",e.isPopupOpen()),va("open",e.isPopupOpen()))},inputs:{autocomplete:"autocomplete",placement:"placement",container:"container",editable:"editable",focusFirst:"focusFirst",showHint:"showHint",inputFormatter:"inputFormatter",ngbTypeahead:"ngbTypeahead",resultFormatter:"resultFormatter",resultTemplate:"resultTemplate"},outputs:{selectItem:"selectItem"},exportAs:["ngbTypeahead"],features:[Xa([TL])]}),t})(),DL=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd]]}),t})();const OL=[IO,NO,WO,ZO,tR,qR,eI,fI,xI,OI,jI,GI,YI,dL,gL,wL,DL,eL];let RL=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[OL,IO,NO,WO,ZO,tR,qR,eI,fI,xI,OI,jI,GI,YI,dL,gL,wL,DL,eL]}),t})();const IL=gi(sR),LL=gi(yR),FL=gi(UR),NL=gi(VR),BL=gi(sL),UL=function(t){return{"background-image":t,"background-repeat":"no-repeat","background-attachment":"fixed","background-size":"cover"}};let VL=(()=>{class t{constructor(t,e,n,i){this.dbOperations=t,this.storage=e,this.matDialog=n,this.config=i,this.dotAnimation=!0,this.contentAnimation=!0,this.size=40,this.mobileWidthThreshold=640,this.landingImages=[],this.covidPhotos=[],this.headingSize=4,this.backgroundImage="",this.submissionFormat="",this.submissionProcess="",this.participate="",this.copyright="",this.timelinePhoto="",this.getScreenSize(),this.getLandinPageImages(),this.carouselConfig(),this.purposeOfCompetion()}ngOnInit(){this.getGuidelinesData()}onExpand(t){console.log(t)}onResize(t){let e=t.target.innerWidth;e<800&&(this.headingSize=1.5),e>800&&(this.headingSize=2.5),e>1e3&&(this.headingSize=3),e>1200&&(this.headingSize=4)}getScreenSize(){let t=window.innerWidth;t<800&&(this.headingSize=1.5),t>800&&(this.headingSize=2.5),t>1e3&&(this.headingSize=3),t>1200&&(this.headingSize=4)}downloadConsentForm(){this.storage.ref("consent/PARTICIPANT CONSENT AND RELEASE FORM.pdf").getDownloadURL().subscribe(t=>{console.log(t),Object(FP.saveAs)(t,"PARTICIPANT CONSENT AND RELEASE FORM.pdf");var e=new XMLHttpRequest;e.responseType="blob",e.onload=function(t){var n=e.response;Object(FP.saveAs)(n,"PARTICIPANT CONSENT AND RELEASE FORM.pdf")}})}downloadArtistCOnsentForm(){this.storage.ref("consent/PARTICIPANT CONSENT AND RELEASE FORM.pdf").getDownloadURL().subscribe(t=>{console.log(t),Object(FP.saveAs)(t,"PARTICIPANT CONSENT AND RELEASE FORM.pdf");var e=new XMLHttpRequest;e.responseType="blob",e.onload=function(t){var n=e.response;Object(FP.saveAs)(n,"PARTICIPANT CONSENT AND RELEASE FORM.pdf")}})}getLandinPageImages(){this.landingImages=["assets/images/gallery/sample/poster1.png","assets/images/gallery/sample/poster2.png","assets/images/gallery/sample/poster3.png","assets/images/gallery/sample/poster4.png","assets/images/gallery/sample/poster5.png"]}carouselConfig(){this.config.interval=4e3,this.config.wrap=!1,this.config.keyboard=!1,this.config.pauseOnHover=!1,this.config.wrap=!1}lauchMoreInfoModal(t){const e=new XT;e.disableClose=!1,e.id="modal-component",e.height="60%",e.width="60%",e.data={info:t},this.matDialog.open(lP,e)}purposeOfCompetion(){return this.purpose="As part of the COVID-19 Recovery and Resilience Program, Mastercard Foundation is running a public\n    awareness campaign to share timely, accurate information about the coronavirus, how it is spread, and how\n    young people are adapting to their new reality. The Campaign seeks to enhance dissemination, understanding\n    and uptake of public health information as a key outcome. The Campaign targets to reach the majority of\n    populations, making use of multi-communication\n    channels and tactics. The goal is to engage young people across seven countries (Kenya, Uganda, Ethiopia,\n    Rwanda, Nigeria, Ghana and Senegal) to share stories about their personal experiences navigating life\n    during the global pandemic. The storytelling should take the form of photographs and videos. Bobby Pall\n    Photography (The Organizer) is partnering with the Foundation on this Campaign that provides\n    photographers and videographers with the opportunity to actively participate in the COVID-19 Recovery and\n    Resilience Programme and to acquire international exposure when their work is published in the\n    online/virtual\n    gallery. By choosing to participate in this Campaign, the Entrant agrees to the following official\n    guidelines and rules, which create a contract between him/her and the Organizer. The theme of the\n    photography and videography campaign is: \u2018African Resilience in the Wake of a Pandemic\u2019.\n    Please read the guidelines and rules carefully before submitting your entry",this.purpose.substring(0,600)}getGuidelinesData(){this.dbOperations.getGuidelinesData().snapshotChanges().subscribe(t=>{let e=t.payload.data();this.backgroundImage=e.backgroundImage,this.submissionFormat=e.submissionFormat,this.submissionProcess=e.submissionProcess,this.copyright=e.copyright,this.timelinePhoto=e.timeline,this.participate=e.participate})}}return t.\u0275fac=function(e){return new(e||t)(Ns(O_),Ns(Ub),Ns(sP),Ns(qO))},t.\u0275cmp=fe({type:t,selectors:[["app-call"]],viewQuery:function(t,e){var n;1&t&&Qc(RP,!0),2&t&&$c(n=tu())&&(e.accordion=n.first)},hostBindings:function(t,e){1&t&&Xs("resize",(function(t){return e.onResize(t)}),!1,Xn)},decls:213,vars:10,consts:[[1,"call",3,"resize"],[1,"landing",3,"ngStyle"],[1,"container","py-5"],[1,"row"],[1,"info"],[1,"container"],[1,"accordion-action-buttons","my-4"],[1,"btn","mx-3",3,"click"],["multi","",1,"accordion-headers-align"],["hideToggle","true"],["rules",""],[1,"guidelines"],[1,"rules"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-6","py-5"],["alt","bobby pall life during pandemic ","title","hygiene covid 19",3,"src"],[1,"hr-rule","mt-1"],[1,"px-2"],[1,"pdf-consent","hand","p-2","d-flex",3,"click"],["src","assets/images/pdf.png","alt",""],[1,"m-1"],["href","https://africanartincontext.com/"],["submission",""],[1,"submission"],[1,"format"],[1,"p-2"],[1,"row","pr-3"],[1,"col-md-12","pr-0","pl-0","mt-3"],["alt","bobby pall photography African art in the pandemic","title","tailor pandemic",3,"src"],["criteria",""],[1,"selection-info"],[1,"card","my-5"],[1,"mt-5"],[1,"text-center","mt-3"],[1,"criteria","mt-5"],[1,"col-xs-12","col-sm-12","col-md-6","col-lg-6","py-5"],[1,"criteria-title"],[1,"criteria-points"],[1,"card"],["alt","bobby pall social distance during covid 19 ","title","social distance pandemic",3,"src"],["compensation",""],[1,"compensation"],[1,"container","p-0"],[1,"card","p-3"],["conditions",""],[1,"container","mt-5"],["alt","bobby pall sharing challenges during pandemic ","title","home schooling during pandemic",3,"src"],["timeline",""],[1,"timeline","py-5"],[1,"winnners-calendar","container","py-5"],["src","assets/images/Timeline Calendar for Winners.png","alt","bobby pall sharing challenges during pandemic ","title","home schooling during pandemic"],[1,"terms","container","py-5"],[1,"text-center"],[1,"privacy"],[1,"mt-3"]],template:function(t,e){1&t&&(js(0,"div",0),Xs("resize",(function(t){return e.onResize(t)}),!1,Xn),js(1,"div",1),js(2,"div",2),js(3,"div",3),js(4,"div",4),js(5,"h3"),ka(6,"AFRICAN RESILIENCE IN THE WAKE OF A PANDEMIC"),zs(),zs(),zs(),zs(),zs(),js(7,"div",5),js(8,"div",6),js(9,"button",7),Xs("click",(function(){return e.accordion.openAll()})),ka(10,"Expand All"),zs(),js(11,"button",7),Xs("click",(function(){return e.accordion.closeAll()})),ka(12,"Collapse All"),zs(),zs(),js(13,"mat-accordion",8),js(14,"mat-expansion-panel",9,10),js(16,"mat-expansion-panel-header"),js(17,"mat-panel-title"),js(18,"h4"),ka(19,"HOW TO PARTICIPATE"),zs(),zs(),zs(),js(20,"div",11),js(21,"div",12),js(22,"div",5),js(23,"div",3),js(24,"div",13),Hs(25,"img",14),zs(),js(26,"div",13),js(27,"h3"),ka(28,"HOW TO PARTICIPATE"),zs(),Hs(29,"hr",15),js(30,"ol",16),js(31,"li"),ka(32," Entry is not open to employees and family members of Mastercard Foundation, NAMU Communications and Bobby Pall Photography. "),zs(),js(33,"li"),ka(34," Entrants must be between 18 to 35 years "),zs(),js(35,"li"),ka(36," Each entrant may submit a maximum of two photograph(s) OR a video that is no more than one minute (60 seconds) long. Entrants may not submit both photo and video content. "),zs(),js(37,"li"),ka(38," To avoid disqualification, each entrant MUST also fill and submit the following forms: "),js(39,"ul"),js(40,"li"),ka(41," Registration Form (Online); "),zs(),js(42,"li"),ka(43," Photographer/Videography Consent and Release Form (Online); and "),zs(),js(44,"li"),ka(45," Subject Consent and Release Form (to be printed, filled and signed by every subject depicted in the submitted photograph(s)/video). "),zs(),js(46,"div",17),Xs("click",(function(){return e.downloadConsentForm()})),Hs(47,"img",18),js(48,"p",19),ka(49,"Download participant consent and release form"),zs(),zs(),zs(),zs(),js(50,"li"),ka(51,"All entries must be submitted directly on the website, "),js(52,"a",20),ka(53,"africanartincontext.com"),zs(),ka(54,", using the "),js(55,"strong"),ka(56,"Submit"),zs(),ka(57," button. "),zs(),js(58,"li"),ka(59,"Entrants must own the copyright and must have taken the photographs/videos themselves. The photograph(s)/video may have been taken at any point during the pandemic"),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),js(60,"mat-expansion-panel",9,21),js(62,"mat-expansion-panel-header"),js(63,"mat-panel-title"),js(64,"h4"),ka(65,"SUBMISSION FORMAT"),zs(),zs(),zs(),js(66,"div",22),js(67,"div",5),js(68,"div",3),js(69,"div",13),js(70,"div",23),js(71,"h3"),ka(72,"SUBMISSION FORMAT"),zs(),Hs(73,"hr",15),js(74,"ol",24),js(75,"li"),ka(76,"Photographs must be submitted in "),js(77,"strong"),ka(78,".jpeg"),zs(),ka(79," and "),js(80,"strong"),ka(81,".png"),zs(),ka(82," format. Photos should be submitted with the highest quality possible regarding file size, bit depth and resolution. Both colour and/or black and white images will be accepted."),zs(),js(83,"li"),ka(84,"Videos must be submitted in "),js(85,"strong"),ka(86,".mp4"),zs(),ka(87," and "),js(88,"strong"),ka(89,".mov"),zs(),ka(90," format. They may not exceed 1 minute in run-time. Videos should be submitted with the highest quality possible regarding file size, bit depth and resolution."),zs(),js(91,"li"),ka(92," The material must not constitute copyright infringement or otherwise violate or infringe Mastercard Foundation or third party rights, including but not limited to trademark, privacy, publicity or other intellectual property rights."),zs(),js(93,"li"),ka(94,"The submission must not contain dates, texts, brand names, logos and/or trademarks."),zs(),js(95,"li"),ka(96,"The submission description and captions must be in English or contain English translations."),zs(),js(97,"li"),ka(98,"Filmmaker must have rights to use any soundtrack (music bed), sound-effects and any graphic/animation assets."),zs(),zs(),zs(),zs(),js(99,"div",13),js(100,"div",25),js(101,"div",26),Hs(102,"img",27),zs(),zs(),zs(),zs(),zs(),zs(),zs(),js(103,"mat-expansion-panel",9,28),js(105,"mat-expansion-panel-header"),js(106,"mat-panel-title"),js(107,"h4"),ka(108,"SELECTION PROCESS AND CRITERIA"),zs(),zs(),zs(),js(109,"div",29),js(110,"div",5),js(111,"div",30),js(112,"h3",31),ka(113,"SELECTION PROCESS"),zs(),Hs(114,"hr",15),js(115,"p",32),ka(116," The finalists will be selected by a panel with different areas of expertise in photography and videography. "),zs(),zs(),zs(),zs(),js(117,"div",5),js(118,"div",33),js(119,"div",3),js(120,"div",34),js(121,"div",35),js(122,"h3"),ka(123,"SELECTION CRITERIA"),zs(),Hs(124,"hr",15),ka(125," The finalists will be selected based on the following criteria: "),zs(),js(126,"div",36),js(127,"p"),ka(128,"Creativity/Originality"),zs(),js(129,"p"),ka(130,"Informational Content/Relevance to Theme"),zs(),js(131,"p"),ka(132,"Technical Proficiency (colour, lighting, and focus)"),zs(),js(133,"p"),ka(134," Artistic and Visual Impact"),zs(),zs(),zs(),js(135,"div",34),js(136,"div",37),Hs(137,"img",38),zs(),zs(),zs(),zs(),zs(),zs(),js(138,"mat-expansion-panel",9,39),js(140,"mat-expansion-panel-header"),js(141,"mat-panel-title"),js(142,"h4"),ka(143,"RECOGNITION"),zs(),zs(),zs(),js(144,"div",40),js(145,"div",41),js(146,"div",42),js(147,"h3",31),ka(148,"RECOGNITION"),zs(),Hs(149,"hr",15),js(150,"p"),ka(151,"Finalists in the photography category will receive a USD $200 honorarium for every selected photo, while finalists in the videography category will receive USD $400 for every selected video. Finalists will also be considered by Bobby Pall for future training and exhibition opportunities."),zs(),zs(),zs(),zs(),zs(),js(152,"mat-expansion-panel",9,43),js(154,"mat-expansion-panel-header"),js(155,"mat-panel-title"),js(156,"h4"),ka(157,"CONDITIONS AND COPYRIGHT"),zs(),zs(),zs(),js(158,"div",44),js(159,"div",3),js(160,"div",13),Hs(161,"img",45),zs(),js(162,"div",13),js(163,"h3"),ka(164,"CONDITIONS AND COPYRIGHT"),zs(),Hs(165,"hr",15),js(166,"ol",16),js(167,"li"),ka(168,"Mastercard Foundation respects the rights of the photographers and videographers and does not claim copyright over images/videos submitted to this Campaign. The author retains full copyright in each entry. Whenever the image/video is published, the author will be credited."),zs(),js(169,"li"),ka(170,"Participation in the Campaign grants Mastercard Foundation permission to exhibit and/or publish the photos/videos, either in part or in their entirety."),zs(),js(171,"li"),ka(172,"Mastercard Foundation has the right to apply minor changes or amendments without damaging the integrity of the project, e.g. change colours, cut the background or parts of it."),zs(),js(173,"li"),ka(174,"Mastercard Foundation does NOT own copyright and authors are free to use the photos/videos for other purposes at their choosing."),zs(),zs(),zs(),zs(),zs(),zs(),js(175,"mat-expansion-panel",9,46),js(177,"mat-expansion-panel-header"),js(178,"mat-panel-title"),js(179,"h4"),ka(180,"THE TIMELINE"),zs(),zs(),zs(),js(181,"div",47),js(182,"div",5),js(183,"div",37),js(184,"div",3),js(185,"div",34),js(186,"h3"),ka(187,"THE TIMELINE"),zs(),Hs(188,"hr",15),js(189,"div",48),js(190,"div",37),Hs(191,"img",49),zs(),zs(),zs(),js(192,"div",34),js(193,"div",37),Hs(194,"img",45),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),js(195,"div",50),js(196,"div",37),js(197,"h3",51),ka(198,"PRIVACY POLICY"),zs(),Hs(199,"hr",15),js(200,"p",32),js(201,"strong"),ka(202,"Please read the guidelines and rules carefully before submitting your entry"),zs(),zs(),zs(),js(203,"div",52),js(204,"div",53),js(205,"p"),ka(206," This privacy policy applies to everyone who wishes to participate in this Campaign. This privacy policy explains how the Organizer will use the submitted personal data, such as names or e-mail addresses (Personal Data) and how your privacy will be protected. It is the responsibility of the Organizer to ensure that your Personal Data is handled with due care. The Organizer will neither sell nor trade your Personal Data nor infringe your personal rights in any way. If you register to participate in the Campaign, you disclose your Personal Data. This Personal Data will only be collected, processed and used for the purpose of organizing the Campaign, or informing you about the COVID-19 Public Awareness Campaign, or making a payment to you (if you are selected as a finalist), in accordance with this Privacy Policy. The Organizer will not share your personal data without your permission nor use the contact details for other private or commercial purposes, e.g. for promotional purposes especially, but not limited to, unrequested and uninvited advertising by email, or to be contacted by mail. The Organizer will collect, process and use the Personal Data provided in the Registration Form and Payment Details Form. As a condition of participating in the Campaign, each Entrant gives consent for the Organizer to obtain and deliver his or her name, address and other information to third parties for the purpose of administering and organizing the Campaign and to comply with applicable laws, regulations and rules. The Organizer will comply with all privacy and data protection laws applicable to its processing of Personal Data. "),zs(),js(207,"h3",51),ka(208,"AGREEMENTS, CHANGES TO DATES AND DEADLINES"),zs(),js(209,"p"),ka(210," These Submission Guidelines and Rules are the only agreement between the Entrant and the Organizer, and that is why the submission of any entry, within its scope, expresses acceptance by the Entrant of the terms and conditions stipulated herein. The deadlines and dates set out in these Submission Guidelines and Rules may be amended by decision of the Organizer. Any change will be notified through the website: "),js(211,"a",20),ka(212,"africanartincontext.com"),zs(),zs(),zs(),zs(),zs(),zs()),2&t&&(Cr(1),Us("ngStyle",Sc(8,UL,"url("+e.backgroundImage+")")),Cr(4),ga("font-size",e.headingSize,"em"),Cr(20),aa("src",e.participate,rr),Cr(77),aa("src",e.submissionFormat,rr),Cr(35),aa("src",e.submissionProcess,rr),Cr(24),aa("src",e.copyright,rr),Cr(33),aa("src",e.timelinePhoto,rr))},directives:[Cd,RP,TP,kP,OP],styles:['.call[_ngcontent-%COMP%]{color:#000}.call[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:bolder;font-size:2em}.call[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.call[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:none;border:none}.call[_ngcontent-%COMP%]   .hand[_ngcontent-%COMP%]:hover{cursor:pointer;cursor:hand}.call[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%]{min-height:80vh;width:100%}.call[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:100%;background-color:rgba(0,0,0,.4);padding:5%;margin-top:300px}.call[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{word-wrap:break-word;color:#fff;font-weight:bolder;height:inherit}.call[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";display:block;height:10px}.call[_ngcontent-%COMP%]   .call-landing[_ngcontent-%COMP%], .call[_ngcontent-%COMP%]   .call-landing[_ngcontent-%COMP%]   ngb-carousel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.call[_ngcontent-%COMP%]   .rules[_ngcontent-%COMP%]{background-color:#f5f5f5}.call[_ngcontent-%COMP%]   .rules[_ngcontent-%COMP%]   .pdf-consent[_ngcontent-%COMP%]{color:teal}.call[_ngcontent-%COMP%]   .rules[_ngcontent-%COMP%]   .pdf-consent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.call[_ngcontent-%COMP%]   .winnners-calendar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.call[_ngcontent-%COMP%]   .selection[_ngcontent-%COMP%], .call[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]{background-color:#f5f5f5}.call[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%;border:none;background-color:transparent;color:#000;text-align:left}.call[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:left}.call[_ngcontent-%COMP%]   .criteria-points[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .call[_ngcontent-%COMP%]   .timeline-process[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;line-height:1.75em;-o-border-image:linear-gradient(90deg,#0077b5 0,teal);border-image:linear-gradient(90deg,#0077b5 0,teal);border-image-slice:1;border-width:3px;border-top:3px solid;margin:0;padding:10px 40px;counter-increment:section;position:relative;color:#000}.call[_ngcontent-%COMP%]   .criteria-points[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:before, .call[_ngcontent-%COMP%]   .timeline-process[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:before{content:counter(section);position:absolute;border-radius:50%;padding:0;height:1.25em;width:1.25em;background-color:#000;text-align:center;line-height:1.25em;color:#fff;font-size:1em}.call[_ngcontent-%COMP%]   .criteria-points[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(odd), .call[_ngcontent-%COMP%]   .timeline-process[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(odd){border-right:3px solid;padding-left:0}.call[_ngcontent-%COMP%]   .criteria-points[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(odd):before, .call[_ngcontent-%COMP%]   .timeline-process[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(odd):before{left:100%;margin-left:-20px}.call[_ngcontent-%COMP%]   .criteria-points[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2n), .call[_ngcontent-%COMP%]   .timeline-process[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2n){border-left:3px solid;padding-right:0}.call[_ngcontent-%COMP%]   .criteria-points[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2n):before, .call[_ngcontent-%COMP%]   .timeline-process[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2n):before{right:100%;margin-right:-20px}.call[_ngcontent-%COMP%]   .criteria-points[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child, .call[_ngcontent-%COMP%]   .timeline-process[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{border-top:0;border-top-right-radius:0;border-top-left-radius:0}.call[_ngcontent-%COMP%]   .criteria-points[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child, .call[_ngcontent-%COMP%]   .timeline-process[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:0;border-bottom-left-radius:0}.call[_ngcontent-%COMP%]   .compensation[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .call[_ngcontent-%COMP%]   .sample-images[_ngcontent-%COMP%]{text-align:center}.call[_ngcontent-%COMP%]   .sample-images[_ngcontent-%COMP%]   .artistic-images[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;width:100%;height:100%}.call[_ngcontent-%COMP%]   .sample-images[_ngcontent-%COMP%]   .artistic-images[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.call[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{background-color:#1b1b1b}.call[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 auto;width:100px}mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000}mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#000}mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#000;font-size:1em;text-align:center}mat-accordion[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#000;font-size:.8em}.accordion-action-buttons[_ngcontent-%COMP%]{padding:1em;border:3px solid;text-align:center}.accordion-action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:teal;color:#fff;font-weight:bolder;height:100%}.accordion-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%], .accordion-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.accordion-headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}.accordion-headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}']}),t})(),jL=(()=>{class t{constructor(t,e,n,i){this.API=e,this.fsAPI=n,this.controlsHidden=i,this.isNativeFullscreen=!1,this.areControlsHidden=!1,this.subscriptions=[],this.isBuffering=!1,this.elem=t.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor),this.subscriptions.push(this.fsAPI.onChangeFullscreen.subscribe(this.onChangeFullscreen.bind(this))),this.subscriptions.push(this.controlsHidden.isHidden.subscribe(this.onHideControls.bind(this))),this.subscriptions.push(this.target.subscriptions.bufferDetected.subscribe(t=>this.onUpdateBuffer(t)))}onUpdateBuffer(t){this.isBuffering=t}onChangeFullscreen(t){this.fsAPI.nativeFullscreen&&(this.isNativeFullscreen=t)}onHideControls(t){this.areControlsHidden=t}onClick(){switch(this.getState()){case SA.VG_PLAYING:this.target.pause();break;case SA.VG_PAUSED:case SA.VG_ENDED:this.target.play()}}getState(){let t=SA.VG_PAUSED;if(this.target)if(this.target.state instanceof Array){for(let e=0,n=this.target.state.length;e<n;e++)if(this.target.state[e]===SA.VG_PLAYING){t=SA.VG_PLAYING;break}}else t=this.target.state;return t}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MA),Ns(kA),Ns(TA))},t.\u0275cmp=fe({type:t,selectors:[["vg-overlay-play"]],hostVars:2,hostBindings:function(t,e){1&t&&Xs("click",(function(){return e.onClick()})),2&t&&va("is-buffering",e.isBuffering)},inputs:{vgFor:"vgFor"},decls:2,vars:6,consts:[[1,"vg-overlay-play"],[1,"overlay-play-container"]],template:function(t,e){1&t&&(js(0,"div",0),Hs(1,"div",1),zs()),2&t&&(va("native-fullscreen",e.isNativeFullscreen)("controls-hidden",e.areControlsHidden),Cr(1),va("vg-icon-play_arrow","playing"!==e.getState()))},styles:["\n      vg-overlay-play {\n        z-index: 200;\n      }\n      vg-overlay-play.is-buffering {\n        display: none;\n      }\n      vg-overlay-play .vg-overlay-play {\n        transition: all 0.5s;\n        cursor: pointer;\n        position: absolute;\n        display: block;\n        color: white;\n        width: 100%;\n        height: 100%;\n        font-size: 80px;\n        filter: alpha(opacity=60);\n        opacity: 0.6;\n      }\n      vg-overlay-play .vg-overlay-play.native-fullscreen.controls-hidden {\n        cursor: none;\n      }\n      vg-overlay-play\n        .vg-overlay-play\n        .overlay-play-container.vg-icon-play_arrow {\n        pointer-events: none;\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 80px;\n      }\n      vg-overlay-play .vg-overlay-play:hover {\n        filter: alpha(opacity=100);\n        opacity: 1;\n      }\n      vg-overlay-play\n        .vg-overlay-play:hover\n        .overlay-play-container.vg-icon-play_arrow:before {\n        transform: scale(1.2);\n      }\n    "],encapsulation:2}),t})(),zL=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd,FA]]}),t})();const HL=["*"],GL=[[["mgl-timeline-entry-side"]],[["mgl-timeline-entry-dot"]],[["mgl-timeline-entry-header"]],[["mgl-timeline-entry-content"]]],WL=["mgl-timeline-entry-side","mgl-timeline-entry-dot","mgl-timeline-entry-header","mgl-timeline-entry-content"];let qL=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["mgl-timeline-entry-header"]],ngContentSelectors:HL,decls:1,vars:0,template:function(t,e){1&t&&(ia(),sa(0))},styles:["mgl-timeline-entry-header{position:relative;display:block;overflow:hidden;padding:15px;text-align:center}"],encapsulation:2}),t})(),$L=(()=>{let t=class{constructor(t,e,n,i,r){this.animationBuilder=t,this.elementRef=e,this.renderer=n,this.changeDetectorRef=i,this.document=r,this._expanded=!1,this._alternate=!1,this._mobile=!1,this._size=50,this.animationDone=new Fc,this.expandAnimationTiming="200ms ease",this.collapseAnimationTiming="100ms ease",this.clazz="primary"}set size(t){this._size=t,this.setStyle()}get size(){return this._size}set alternate(t){this._alternate=t,this.setStyle()}get alternate(){return this._alternate}set mobile(t){this._mobile=t,this.setStyle()}get mobile(){return this._mobile}set expanded(t){const e=this._expanded!==t;this._expanded=t,e?this.animate():this.setStyle()}get expanded(){return this._expanded}ngAfterViewInit(){this.initialStyle=this.document.defaultView.getComputedStyle(this.elementRef.nativeElement),this.setStyle(),this.changeDetectorRef.detectChanges()}getCollapsedStyle(){return{top:"50%",left:this.alternate||this.mobile?"-5px":"calc(100% + 5px)",width:this.size+"px",height:this.size+"px",opacity:1,transform:"translateY(-50%) translateX(-50%)",boxShadow:this.initialStyle&&this.initialStyle.boxShadow,borderRadius:"100px"}}getTransitionStyle(){return Object.assign(Object.assign({},this.getCollapsedStyle()),{left:"50%",opacity:.5,boxShadow:"none"})}getExpandedStyle(){return Object.assign(Object.assign({},this.getTransitionStyle()),{left:"0",transform:"translateX(0) translateY(-50%)",width:"100%",height:"100%",opacity:1,borderRadius:0})}animate(){this.destroyAnimation(),this.expanded?(this.animation=this.animationBuilder.build([wx(this.getCollapsedStyle()),yx(this.expandAnimationTiming,wx(this.getTransitionStyle())),yx(this.expandAnimationTiming,wx(this.getExpandedStyle()))]).create(this.elementRef.nativeElement),this.animation.onDone(()=>this.animationDone.emit({toState:"expanded"})),this.animation.play()):(this.animation=this.animationBuilder.build([wx(this.getExpandedStyle()),yx(this.collapseAnimationTiming,wx(this.getTransitionStyle())),yx(this.collapseAnimationTiming,wx(this.getCollapsedStyle()))]).create(this.elementRef.nativeElement),this.animation.onDone(()=>this.animationDone.emit({toState:"collapsed"})),this.animation.play())}setStyle(){this.destroyAnimation();const t=this.expanded?this.getExpandedStyle():this.getCollapsedStyle();Object.keys(t).forEach(e=>{this.renderer.setStyle(this.elementRef.nativeElement,e,t[e])})}destroyAnimation(){this.animation&&(this.animation.destroy(),delete this.animation)}};return t.\u0275fac=function(e){return new(e||t)(Ns(gx),Ns(tl),Ns(rl),Ns(os),Ns(rh))},t.\u0275cmp=fe({type:t,selectors:[["mgl-timeline-entry-dot"]],hostVars:2,hostBindings:function(t,e){2&t&&ya(e.clazz)},inputs:{expandAnimationTiming:"expandAnimationTiming",collapseAnimationTiming:"collapseAnimationTiming",clazz:["class","clazz"],size:"size"},ngContentSelectors:HL,decls:1,vars:0,template:function(t,e){1&t&&(ia(),sa(0))},styles:["mgl-timeline-entry-dot{display:block;position:absolute}"],encapsulation:2}),t})(),YL=(()=>{let t=class{constructor(t,e,n){this.elementRef=t,this.animationBuilder=e,this.renderer=n,this.expandAnimationTiming="200ms ease",this.collapseAnimationTiming="100ms ease",this.animationDone=new Fc,this._expanded=!1}set expanded(t){this.contentHeight=this.elementRef.nativeElement.scrollHeight;const e=this._expanded!==t;this._expanded=t,e&&this.animate()}get expanded(){return this._expanded}ngAfterViewInit(){this.contentHeight=this.elementRef.nativeElement.scrollHeight,this.setStyle()}getCollapsedStyle(){return{height:"0px"}}getExpandedStyle(){return{height:this.contentHeight+"px"}}animate(){if(this.expanded){const t=this.animationBuilder.build([wx(this.getCollapsedStyle()),yx(this.expandAnimationTiming,wx(this.getExpandedStyle()))]).create(this.elementRef.nativeElement);t.onDone(()=>this.animationDone.emit({toState:"expanded"})),t.play()}else{const t=this.animationBuilder.build([wx(this.getExpandedStyle()),yx(this.collapseAnimationTiming,wx(this.getCollapsedStyle()))]).create(this.elementRef.nativeElement);t.onDone(()=>this.animationDone.emit({toState:"collapsed"})),t.play()}}setStyle(){const t=this.expanded?this.getExpandedStyle():this.getCollapsedStyle();Object.keys(t).forEach(e=>{this.renderer.setStyle(this.elementRef.nativeElement,e,t[e])})}};return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(gx),Ns(rl))},t.\u0275cmp=fe({type:t,selectors:[["mgl-timeline-entry-content"]],inputs:{expandAnimationTiming:"expandAnimationTiming",collapseAnimationTiming:"collapseAnimationTiming"},ngContentSelectors:HL,decls:2,vars:0,template:function(t,e){1&t&&(ia(),js(0,"div"),sa(1),zs())},styles:["mgl-timeline-entry-content{position:relative;display:block;overflow:hidden}mgl-timeline-entry-content>div{padding:10px}"],encapsulation:2}),t})(),QL=(()=>{let t=class{constructor(t){this.elementRef=t}set alternate(t){this.elementRef.nativeElement.classList.toggle("alternate",t)}set mobile(t){this.elementRef.nativeElement.classList.toggle("mobile",t)}};return t.\u0275fac=function(e){return new(e||t)(Ns(tl))},t.\u0275cmp=fe({type:t,selectors:[["mgl-timeline-entry-side"]],ngContentSelectors:HL,decls:1,vars:0,template:function(t,e){1&t&&(ia(),sa(0))},styles:["mgl-timeline-entry-side{position:absolute;top:0;left:100%;width:100%;text-align:center}mgl-timeline-entry-side.alternate{left:-100%}mgl-timeline-entry-side.mobile{display:none}"],encapsulation:2}),t})(),XL=(()=>{let t=class{constructor(t){this.elementRef=t,this.subscriptions=[],this.focusOnOpen=!1,this._mobile=!1,this.changed=new Fc,this.animationDone=new Fc}set expanded(t){this.dot&&t?this.dot.expanded=t:this.content.expanded=t,this.changed.emit(t)}get expanded(){return this.dot?this.dot.expanded&&this.content.expanded:this.content.expanded}set mobile(t){this.elementRef.nativeElement.classList.toggle("mobile",t),this.dot&&(this.dot.mobile=t),this.side&&(this.side.mobile=t)}ngAfterViewInit(){this.dot&&this.subscriptions.push(this.dot.animationDone.subscribe(t=>{"expanded"===t.toState?this.content.expanded=!0:this.animationDone.emit(t)})),this.content&&this.subscriptions.push(this.content.animationDone.subscribe(t=>{this.dot&&"collapsed"===t.toState?this.dot.expanded=!1:(this.focusOnOpen&&this.elementRef.nativeElement.scrollIntoView({behavior:"smooth"}),this.animationDone.emit(t))}))}set alternate(t){this.elementRef.nativeElement.classList.toggle("alternate",t),this.dot&&(this.dot.alternate=t),this.side&&(this.side.alternate=t)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}collapse(){this.expanded=!1}expand(){this.expanded=!0}toggle(t){const e=this.containsInPath(t,"mgl-timeline-entry-header"),n=this.containsInPath(t,"mgl-timeline-entry-dot");(e||n)&&(this.expanded=!this.expanded)}containsInPath(t,e){let n=t.target;for(;n;){if(n.localName===e)return!0;n=n.parentElement}return!1}};return t.\u0275fac=function(e){return new(e||t)(Ns(tl))},t.\u0275cmp=fe({type:t,selectors:[["mgl-timeline-entry"]],contentQueries:function(t,e,n){var i;1&t&&(Kc(n,YL,!0),Kc(n,qL,!0),Kc(n,$L,!0),Kc(n,QL,!0)),2&t&&($c(i=tu())&&(e.content=i.first),$c(i=tu())&&(e.header=i.first),$c(i=tu())&&(e.dot=i.first),$c(i=tu())&&(e.side=i.first))},hostVars:2,hostBindings:function(t,e){2&t&&va("expanded",e.expanded)},outputs:{changed:"expand",animationDone:"animationDone"},ngContentSelectors:WL,decls:6,vars:0,consts:[[1,"mgl-timeline-entry-card"],[1,"mgl-timeline-entry-card-header",3,"click"]],template:function(t,e){1&t&&(ia(GL),sa(0),js(1,"div",0),js(2,"div",1),Xs("click",(function(t){return e.toggle(t)})),sa(3,1),sa(4,2),zs(),sa(5,3),zs())},styles:["mgl-timeline-entry{display:block;position:relative;margin-bottom:50px;width:calc(50% - 5px)}mgl-timeline-entry.alternate{margin-left:calc(50% + 5px)}mgl-timeline-entry.mobile{width:calc(100% - 30px);margin-left:30px}mgl-timeline-entry .mgl-timeline-entry-card{background-color:#f0f0f0}mgl-timeline-entry .mgl-timeline-entry-card .mgl-timeline-entry-card-header{position:relative;background-color:#e6e6e6}"],encapsulation:2}),t})(),KL=(()=>{let t=class{constructor(t,e){this.elementRef=t,this.changeDetectorRef=e,this.toggle=!0,this.mobileWidthThreshold=640,this.alternate=!0,this.side="left",this._focusOnOpen=!1,this.subscriptions=[]}set mobile(t){this.content&&this.content.forEach(e=>e.mobile=t),this.elementRef.nativeElement.classList.toggle("mobile",t)}get mobile(){return this.elementRef.nativeElement.classList.contains("mobile")}set focusOnOpen(t){this.content&&this.content.forEach(e=>e.focusOnOpen=t),this._focusOnOpen=t}get focusOnOpen(){return this._focusOnOpen}ngOnChanges(t){this.updateContent()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}ngAfterViewInit(){this.mobile=this.elementRef.nativeElement.clientWidth<this.mobileWidthThreshold,setTimeout(()=>this.updateContent()),this.content.changes.subscribe(t=>{this.updateContent()})}updateContent(){this.ngOnDestroy(),this.content&&this.content.forEach((t,e)=>{this.toggle&&this.subscriptions.push(t.changed.subscribe(e=>{!0===e&&this.content.filter(e=>e!==t).forEach(t=>t.collapse())})),t.alternate=this.alternate?e%2!=0:"right"===this.side,t.mobile=this.mobile,t.focusOnOpen=this.focusOnOpen})}onResize(t){this.mobile=this.elementRef.nativeElement.clientWidth<this.mobileWidthThreshold}};return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(os))},t.\u0275cmp=fe({type:t,selectors:[["mgl-timeline"]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,XL,!1),2&t&&$c(i=tu())&&(e.content=i)},hostBindings:function(t,e){1&t&&Xs("resize",(function(t){return e.onResize(t)}),!1,Xn)},inputs:{toggle:"toggle",mobileWidthThreshold:"mobileWidthThreshold",alternate:"alternate",side:"side",focusOnOpen:"focusOnOpen"},features:[Re],ngContentSelectors:HL,decls:2,vars:0,consts:[[1,"mgl-timeline-line"]],template:function(t,e){1&t&&(ia(),Hs(0,"div",0),sa(1))},styles:["mgl-timeline{position:relative;display:block;padding:50px 0}mgl-timeline .mgl-timeline-line{position:absolute;top:0;height:100%;background-color:#a0a0a0;left:50%;width:10px;-webkit-transform:translateX(-50%);transform:translateX(-50%)}mgl-timeline.mobile .mgl-timeline-line{left:20px;-webkit-transform:none;transform:none}"],encapsulation:2}),t})(),ZL=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)}}),t})();const JL=["mat-button",""],tF=["*"],eF=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"];class nF{constructor(t){this._elementRef=t}}const iF=gT(mT(vT(nF)));let rF=(()=>{class t extends iF{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const i of eF)this._hasHostAttributes(i)&&this._getHostElement().classList.add(i);t.nativeElement.classList.add("mat-button-base"),this._focusMonitor.monitor(this._elementRef,!0),this.isRoundButton&&(this.color="accent")}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",e){this._focusMonitor.focusVia(this._getHostElement(),t,e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(QE),Ns(cT,8))},t.\u0275cmp=fe({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){var n;1&t&&Qc(GT,!0),2&t&&$c(n=tu())&&(e.ripple=n.first)},hostAttrs:[1,"mat-focus-indicator"],hostVars:3,hostBindings:function(t,e){2&t&&(Rs("disabled",e.disabled||null),va("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Ba],attrs:JL,ngContentSelectors:tF,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(ia(),js(0,"span",0),sa(1),zs(),Hs(2,"div",1),Hs(3,"div",2)),2&t&&(Cr(2),va("mat-button-ripple-round",e.isRoundButton||e.isIconButton),Us("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[GT],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled],.mat-flat-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.cdk-high-contrast-active .mat-button-focus-overlay{background-color:#fff}.cdk-high-contrast-black-on-white .mat-button-focus-overlay{background-color:#000}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}\n"],encapsulation:2,changeDetection:0}),t})(),oF=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[WT,fT],fT]}),t})();class sF{constructor(t){this.total=t}call(t,e){return e.subscribe(new aF(t,this.total))}}class aF extends m{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}const lF=new Set;let cF,uF=(()=>{class t{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):hF}matchMedia(t){return this._platform.WEBKIT&&function(t){if(!lF.has(t))try{cF||(cF=document.createElement("style"),cF.setAttribute("type","text/css"),document.head.appendChild(cF)),cF.sheet&&(cF.sheet.insertRule(`@media ${t} {.fx-query-test{ }}`,0),lF.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return t.\u0275fac=function(e){return new(e||t)(Yt(Vx))},t.\u0275prov=ut({factory:function(){return new t(Yt(Vx))},token:t,providedIn:"root"}),t})();function hF(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let dF=(()=>{class t{constructor(t,e){this._mediaMatcher=t,this._zone=e,this._queries=new Map,this._destroySubject=new C}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return pF(Dx(t)).some(t=>this._registerQuery(t).mql.matches)}observe(t){let e=Fp(pF(Dx(t)).map(t=>this._registerQuery(t).observable));return e=_f(e.pipe(af(1)),e.pipe(t=>t.lift(new sF(1)),ME(0))),e.pipe(F(t=>{const e={matches:!1,breakpoints:{}};return t.forEach(t=>{e.matches=e.matches||t.matches,e.breakpoints[t.query]=t.matches}),e}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const e=this._mediaMatcher.matchMedia(t),n={observable:new b(t=>{const n=e=>this._zone.run(()=>t.next(e));return e.addListener(n),()=>{e.removeListener(n)}}).pipe(wf(e),F(e=>({query:t,matches:e.matches})),px(this._destroySubject)),mql:e};return this._queries.set(t,n),n}}return t.\u0275fac=function(e){return new(e||t)(Yt(uF),Yt(Su))},t.\u0275prov=ut({factory:function(){return new t(Yt(uF),Yt(Su))},token:t,providedIn:"root"}),t})();function pF(t){return t.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function fF(t,e){if(1&t){const t=$s();js(0,"div",1),js(1,"button",2),Xs("click",(function(){return on(t),ea().action()})),ka(2),zs(),zs()}if(2&t){const t=ea();Cr(2),Da(t.data.action)}}function mF(t,e){}const gF=Math.pow(2,31)-1;class vF{constructor(t,e){this._overlayRef=e,this._afterDismissed=new C,this._afterOpened=new C,this._onAction=new C,this._dismissedByAction=!1,this.containerInstance=t,this.onAction().subscribe(()=>this.dismiss()),t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete())}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,gF))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed.asObservable()}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction.asObservable()}}const yF=new Bt("MatSnackBarData");class bF{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let _F=(()=>{class t{constructor(t,e){this.snackBarRef=t,this.data=e}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return t.\u0275fac=function(e){return new(e||t)(Ns(vF),Ns(yF))},t.\u0275cmp=fe({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(js(0,"span"),ka(1),zs(),Ls(2,fF,3,1,"div",0)),2&t&&(Cr(1),Da(e.data.message),Cr(1),Us("ngIf",e.hasAction))},directives:[md,rF],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),t})();const wF={snackBarState:vx("state",[Ax("void, hidden",wx({transform:"scale(0.8)",opacity:0})),Ax("visible",wx({transform:"scale(1)",opacity:1})),xx("* => visible",yx("150ms cubic-bezier(0, 0, 0.2, 1)")),xx("* => void, * => hidden",yx("75ms cubic-bezier(0.4, 0.0, 1, 1)",wx({opacity:0})))])};let AF=(()=>{class t extends $C{constructor(t,e,n,i){super(),this._ngZone=t,this._elementRef=e,this._changeDetectorRef=n,this.snackBarConfig=i,this._destroyed=!1,this._onExit=new C,this._onEnter=new C,this._animationState="void",this.attachDomPortal=t=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(t)),this._role="assertive"!==i.politeness||i.announcementMessage?"off"===i.politeness?null:"status":"alert"}attachComponentPortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(t)}onAnimationEnd(t){const{fromState:e,toState:n}=t;if(("void"===n&&"void"!==e||"hidden"===n)&&this._completeExit(),"visible"===n){const t=this._onEnter;this._ngZone.run(()=>{t.next(),t.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.asObservable().pipe(af(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const t=this._elementRef.nativeElement,e=this.snackBarConfig.panelClass;e&&(Array.isArray(e)?e.forEach(e=>t.classList.add(e)):t.classList.add(e)),"center"===this.snackBarConfig.horizontalPosition&&t.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&t.classList.add("mat-snack-bar-top")}_assertNotAttached(){if(this._portalOutlet.hasAttached())throw Error("Attempting to attach snack bar content after content is already attached")}}return t.\u0275fac=function(e){return new(e||t)(Ns(Su),Ns(tl),Ns(os),Ns(bF))},t.\u0275cmp=fe({type:t,selectors:[["snack-bar-container"]],viewQuery:function(t,e){var n;1&t&&Yc(QC,!0),2&t&&$c(n=tu())&&(e._portalOutlet=n.first)},hostAttrs:[1,"mat-snack-bar-container"],hostVars:2,hostBindings:function(t,e){1&t&&Ks("@state.done",(function(t){return e.onAnimationEnd(t)})),2&t&&(Rs("role",e._role),Fa("@state",e._animationState))},features:[Ba],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&Ls(0,mF,0,0,"ng-template",0)},directives:[QC],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[wF.snackBarState]}}),t})(),xF=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[SE,XC,Qd,oF,fT],fT]}),t})();const CF=new Bt("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new bF}});let EF=(()=>{class t{constructor(t,e,n,i,r,o){this._overlay=t,this._live=e,this._injector=n,this._breakpointObserver=i,this._parentSnackBar=r,this._defaultConfig=o,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,e){return this._attach(t,e)}openFromTemplate(t,e){return this._attach(t,e)}open(t,e="",n){const i=Object.assign(Object.assign({},this._defaultConfig),n);return i.data={message:t,action:e},i.announcementMessage||(i.announcementMessage=t),this.openFromComponent(_F,i)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,e){const n=new KC(e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,new WeakMap([[bF,e]])),i=new GC(AF,e.viewContainerRef,n),r=t.attach(i);return r.instance.snackBarConfig=e,r.instance}_attach(t,e){const n=Object.assign(Object.assign(Object.assign({},new bF),this._defaultConfig),e),i=this._createOverlay(n),r=this._attachSnackBarContainer(i,n),o=new vF(r,i);if(t instanceof Cl){const e=new WC(t,null,{$implicit:n.data,snackBarRef:o});o.instance=r.attachTemplatePortal(e)}else{const e=this._createInjector(n,o),i=new GC(t,void 0,e),s=r.attachComponentPortal(i);o.instance=s.instance}return this._breakpointObserver.observe("(max-width: 599.99px) and (orientation: portrait)").pipe(px(i.detachments())).subscribe(t=>{const e=i.overlayElement.classList;t.matches?e.add("mat-snack-bar-handset"):e.remove("mat-snack-bar-handset")}),this._animateSnackBar(o,n),this._openedSnackBarRef=o,this._openedSnackBarRef}_animateSnackBar(t,e){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),e.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),e.duration&&e.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(e.duration)),e.announcementMessage&&this._live.announce(e.announcementMessage,e.politeness)}_createOverlay(t){const e=new aE;e.direction=t.direction;let n=this._overlay.position().global();const i="rtl"===t.direction,r="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!i||"end"===t.horizontalPosition&&i,o=!r&&"center"!==t.horizontalPosition;return r?n.left("0"):o?n.right("0"):n.centerHorizontally(),"top"===t.verticalPosition?n.top("0"):n.bottom("0"),e.positionStrategy=n,this._overlay.create(e)}_createInjector(t,e){return new KC(t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,new WeakMap([[vF,e],[yF,t.data]]))}}return t.\u0275fac=function(e){return new(e||t)(Yt(CE),Yt(GE),Yt(As),Yt(dF),Yt(t,12),Yt(CF))},t.\u0275prov=ut({factory:function(){return new t(Yt(CE),Yt(GE),Yt(Ut),Yt(dF),Yt(t,12),Yt(CF))},token:t,providedIn:xF}),t})();function SF(t,e){1&t&&sa(0)}const MF=["*"];let TF=(()=>{class t{constructor(t){this._elementRef=t}focus(){this._elementRef.nativeElement.focus()}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl))},t.\u0275dir=_e({type:t,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"]}),t})(),PF=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["","cdkStepLabel",""]]}),t})(),kF=0;const DF=new Bt("STEPPER_GLOBAL_OPTIONS");let OF=(()=>{class t{constructor(t,e){this._stepper=t,this.interacted=!1,this._editable=!0,this._optional=!1,this._completedOverride=null,this._customError=null,this._stepperOptions=e||{},this._displayDefaultIndicatorType=!1!==this._stepperOptions.displayDefaultIndicatorType,this._showError=!!this._stepperOptions.showError}get editable(){return this._editable}set editable(t){this._editable=Px(t)}get optional(){return this._optional}set optional(t){this._optional=Px(t)}get completed(){return null==this._completedOverride?this._getDefaultCompleted():this._completedOverride}set completed(t){this._completedOverride=Px(t)}_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return null==this._customError?this._getDefaultError():this._customError}set hasError(t){this._customError=Px(t)}_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}select(){this._stepper.selected=this}reset(){this.interacted=!1,null!=this._completedOverride&&(this._completedOverride=!1),null!=this._customError&&(this._customError=!1),this.stepControl&&this.stepControl.reset()}ngOnChanges(){this._stepper._stateChanged()}}return t.\u0275fac=function(e){return new(e||t)(Ns(xt(()=>RF)),Ns(DF,8))},t.\u0275cmp=fe({type:t,selectors:[["cdk-step"]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,PF,!0),2&t&&$c(i=tu())&&(e.stepLabel=i.first)},viewQuery:function(t,e){var n;1&t&&Yc(Cl,!0),2&t&&$c(n=tu())&&(e.content=n.first)},inputs:{editable:"editable",optional:"optional",completed:"completed",hasError:"hasError",stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],state:"state"},exportAs:["cdkStep"],features:[Re],ngContentSelectors:MF,decls:1,vars:0,template:function(t,e){1&t&&(ia(),Ls(0,SF,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),t})(),RF=(()=>{class t{constructor(t,e,n,i){this._dir=t,this._changeDetectorRef=e,this._elementRef=n,this._destroyed=new C,this._linear=!1,this._selectedIndex=0,this.selectionChange=new Fc,this._orientation="horizontal",this._groupId=kF++,this._document=i}get steps(){return this._steps}get linear(){return this._linear}set linear(t){this._linear=Px(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){const e=kx(t);if(this.steps){if(e<0||e>this.steps.length-1)throw Error("cdkStepper: Cannot assign out-of-bounds value to `selectedIndex`.");this._selectedIndex!=e&&!this._anyControlsInvalidOrPending(e)&&(e>=this._selectedIndex||this.steps.toArray()[e].editable)&&this._updateSelectedItemIndex(t)}else this._selectedIndex=e}get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(t){this.selectedIndex=this.steps?this.steps.toArray().indexOf(t):-1}ngAfterViewInit(){this._keyManager=new LE(this._stepHeader).withWrap().withVerticalOrientation("vertical"===this._orientation),(this._dir?this._dir.change:Op()).pipe(wf(this._layoutDirection()),px(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.updateActiveItem(this._selectedIndex),this.steps.changes.pipe(px(this._destroyed)).subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))})}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(t=>t.reset()),this._stateChanged()}_getStepLabelId(t){return`cdk-step-label-${this._groupId}-${t}`}_getStepContentId(t){return`cdk-step-content-${this._groupId}-${t}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(t){const e=t-this._selectedIndex;return e<0?"rtl"===this._layoutDirection()?"next":"previous":e>0?"rtl"===this._layoutDirection()?"previous":"next":"current"}_getIndicatorType(t,e="number"){const n=this.steps.toArray()[t],i=this._isCurrentStep(t);return n._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(n,i):this._getGuidelineLogic(n,i,e)}_getDefaultIndicatorLogic(t,e){return t._showError&&t.hasError&&!e?"error":!t.completed||e?"number":t.editable?"edit":"done"}_getGuidelineLogic(t,e,n="number"){return t._showError&&t.hasError&&!e?"error":t.completed&&!e?"done":t.completed&&e?n:t.editable&&e?"edit":n}_isCurrentStep(t){return this._selectedIndex===t}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(t){const e=this.steps.toArray();this.selectionChange.emit({selectedIndex:t,previouslySelectedIndex:this._selectedIndex,selectedStep:e[t],previouslySelectedStep:e[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(t):this._keyManager.updateActiveItem(t),this._selectedIndex=t,this._stateChanged()}_onKeydown(t){const e=ZC(t),n=t.keyCode,i=this._keyManager;null==i.activeItemIndex||e||32!==n&&13!==n?36===n?(i.setFirstItemActive(),t.preventDefault()):35===n?(i.setLastItemActive(),t.preventDefault()):i.onKeydown(t):(this.selectedIndex=i.activeItemIndex,t.preventDefault())}_anyControlsInvalidOrPending(t){const e=this.steps.toArray();return e[this._selectedIndex].interacted=!0,!!(this._linear&&t>=0)&&e.slice(0,t).some(t=>{const e=t.stepControl;return(e?e.invalid||e.pending||!t.interacted:!t.completed)&&!t.optional&&!t._completedOverride})}_layoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_containsFocus(){if(!this._document||!this._elementRef)return!1;const t=this._elementRef.nativeElement,e=this._document.activeElement;return t===e||t.contains(e)}}return t.\u0275fac=function(e){return new(e||t)(Ns(Xx,8),Ns(os),Ns(tl),Ns(rh))},t.\u0275dir=_e({type:t,selectors:[["","cdkStepper",""]],contentQueries:function(t,e,n){var i;1&t&&(Kc(n,OF,!0),Kc(n,TF,!0)),2&t&&($c(i=tu())&&(e._steps=i),$c(i=tu())&&(e._stepHeader=i))},inputs:{linear:"linear",selectedIndex:"selectedIndex",selected:"selected"},outputs:{selectionChange:"selectionChange"},exportAs:["cdkStepper"]}),t})(),IF=(()=>{class t{constructor(t){this._stepper=t,this.type="submit"}_handleClick(){this._stepper.next()}}return t.\u0275fac=function(e){return new(e||t)(Ns(RF))},t.\u0275dir=_e({type:t,selectors:[["button","cdkStepperNext",""]],hostVars:1,hostBindings:function(t,e){1&t&&Xs("click",(function(){return e._handleClick()})),2&t&&La("type",e.type)},inputs:{type:"type"}}),t})(),LF=(()=>{class t{constructor(t){this._stepper=t,this.type="button"}_handleClick(){this._stepper.previous()}}return t.\u0275fac=function(e){return new(e||t)(Ns(RF))},t.\u0275dir=_e({type:t,selectors:[["button","cdkStepperPrevious",""]],hostVars:1,hostBindings:function(t,e){1&t&&Xs("click",(function(){return e._handleClick()})),2&t&&La("type",e.type)},inputs:{type:"type"}}),t})(),FF=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Zx]]}),t})();class NF{}class BF{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),i=n.toLowerCase(),r=t.slice(e+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(r):this.headers.set(i,[r])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const i=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof BF?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new BF;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof BF?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...n),this.headers.set(e,i);break;case"d":const r=t.value;if(r){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===r.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class UF{encodeKey(t){return VF(t)}encodeValue(t){return VF(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function VF(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class jF{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new UF,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const i=t.indexOf("="),[r,o]=-1==i?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,i)),e.decodeValue(t.slice(i+1))],s=n.get(r)||[];s.push(o),n.set(r,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new jF({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function zF(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function HF(t){return"undefined"!=typeof Blob&&t instanceof Blob}function GF(t){return"undefined"!=typeof FormData&&t instanceof FormData}class WF{constructor(t,e,n,i){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new BF),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new jF,this.urlWithParams=e}serializeBody(){return null===this.body?null:zF(this.body)||HF(this.body)||GF(this.body)||"string"==typeof this.body?this.body:this.body instanceof jF?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||GF(this.body)?null:HF(this.body)?this.body.type||null:zF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof jF?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,i=t.responseType||this.responseType,r=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(l=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),l)),new WF(e,n,r,{params:l,headers:a,reportProgress:s,responseType:i,withCredentials:o})}}var qF=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class $F extends class{constructor(t,e=200,n="OK"){this.headers=t.headers||new BF,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=qF.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new $F({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function YF(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let QF=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let i;if(t instanceof WF)i=t;else{let r=void 0;r=n.headers instanceof BF?n.headers:new BF(n.headers);let o=void 0;n.params&&(o=n.params instanceof jF?n.params:new jF({fromObject:n.params})),i=new WF(t,e,void 0!==n.body?n.body:null,{headers:r,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const r=Op(i).pipe(Ef(t=>this.handler.handle(t)));if(t instanceof WF||"events"===n.observe)return r;const o=r.pipe(Hp(t=>t instanceof $F));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return o.pipe(F(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(F(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(F(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(F(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new jF).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,YF(n,e))}post(t,e,n={}){return this.request("POST",t,YF(n,e))}put(t,e,n={}){return this.request("PUT",t,YF(n,e))}}return t.\u0275fac=function(e){return new(e||t)(Yt(NF))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const XF=["*"];function KF(t){return Error(`Unable to find icon with the name "${t}"`)}function ZF(t){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL "+`via Angular's DomSanitizer. Attempted URL was "${t}".`)}function JF(t){return Error("The literal provided to MatIconRegistry was not trusted as safe HTML by "+`Angular's DomSanitizer. Attempted literal was "${t}".`)}class tN{constructor(t,e){this.options=e,t.nodeName?this.svgElement=t:this.url=t}}let eN=(()=>{class t{constructor(t,e,n,i){this._httpClient=t,this._sanitizer=e,this._errorHandler=i,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,i){return this._addSvgIconConfig(t,e,new tN(n,i))}addSvgIconLiteralInNamespace(t,e,n,i){const r=this._sanitizer.sanitize(ir.HTML,n);if(!r)throw JF(n);const o=this._createSvgElementForSingleIcon(r,i);return this._addSvgIconConfig(t,e,new tN(o,i))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new tN(e,n))}addSvgIconSetLiteralInNamespace(t,e,n){const i=this._sanitizer.sanitize(ir.HTML,e);if(!i)throw JF(e);const r=this._svgElementFromString(i);return this._addSvgIconSetConfig(t,new tN(r,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(ir.RESOURCE_URL,t);if(!e)throw ZF(t);const n=this._cachedIconsByUrl.get(e);return n?Op(nN(n)):this._loadSvgIconFromConfig(new tN(t)).pipe(df(t=>this._cachedIconsByUrl.set(e,t)),F(t=>nN(t)))}getNamedSvgIcon(t,e=""){const n=iN(e,t),i=this._svgIconConfigs.get(n);if(i)return this._getSvgFromConfig(i);const r=this._iconSetConfigs.get(e);return r?this._getSvgFromIconSetConfigs(t,r):bv(KF(n))}ngOnDestroy(){this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgElement?Op(nN(t.svgElement)):this._loadSvgIconFromConfig(t).pipe(df(e=>t.svgElement=e),F(t=>nN(t)))}_getSvgFromIconSetConfigs(t,e){const n=this._extractIconWithNameFromAnySet(t,e);return n?Op(n):I_(e.filter(t=>!t.svgElement).map(t=>this._loadSvgIconSetFromConfig(t).pipe(rf(e=>{const n=`Loading icon set URL: ${this._sanitizer.sanitize(ir.RESOURCE_URL,t.url)} failed: ${e.message}`;return this._errorHandler?this._errorHandler.handleError(new Error(n)):console.error(n),Op(null)})))).pipe(F(()=>{const n=this._extractIconWithNameFromAnySet(t,e);if(!n)throw KF(t);return n}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.svgElement){const e=this._extractSvgIconFromSet(i.svgElement,t,i.options);if(e)return e}}return null}_loadSvgIconFromConfig(t){return this._fetchUrl(t.url).pipe(F(e=>this._createSvgElementForSingleIcon(e,t.options)))}_loadSvgIconSetFromConfig(t){return t.svgElement?Op(t.svgElement):this._fetchUrl(t.url).pipe(F(e=>(t.svgElement||(t.svgElement=this._svgElementFromString(e)),t.svgElement)))}_createSvgElementForSingleIcon(t,e){const n=this._svgElementFromString(t);return this._setSvgAttributes(n,e),n}_extractSvgIconFromSet(t,e,n){const i=t.querySelector(`[id="${e}"]`);if(!i)return null;const r=i.cloneNode(!0);if(r.removeAttribute("id"),"svg"===r.nodeName.toLowerCase())return this._setSvgAttributes(r,n);if("symbol"===r.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(r),n);const o=this._svgElementFromString("<svg></svg>");return o.appendChild(r),this._setSvgAttributes(o,n)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),n=t.attributes;for(let i=0;i<n.length;i++){const{name:t,value:r}=n[i];"id"!==t&&e.setAttribute(t,r)}for(let i=0;i<t.childNodes.length;i++)t.childNodes[i].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[i].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchUrl(t){if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==t)throw Error(`Cannot fetch icon from URL "${t}".`);const e=this._sanitizer.sanitize(ir.RESOURCE_URL,t);if(!e)throw ZF(t);const n=this._inProgressUrlFetches.get(e);if(n)return n;const i=this._httpClient.get(e,{responseType:"text"}).pipe(Sf(()=>this._inProgressUrlFetches.delete(e)),tt());return this._inProgressUrlFetches.set(e,i),i}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(iN(t,e),n),this}_addSvgIconSetConfig(t,e){const n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}}return t.\u0275fac=function(e){return new(e||t)(Yt(QF,8),Yt(Ep),Yt(rh,8),Yt(_i,8))},t.\u0275prov=ut({factory:function(){return new t(Yt(QF,8),Yt(Ep),Yt(rh,8),Yt(_i,8))},token:t,providedIn:"root"}),t})();function nN(t){return t.cloneNode(!0)}function iN(t,e){return t+":"+e}class rN{constructor(t){this._elementRef=t}}const oN=gT(rN),sN=new Bt("mat-icon-location",{providedIn:"root",factory:function(){const t=Qt(rh),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),aN=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],lN=aN.map(t=>`[${t}]`).join(", "),cN=/^url\(['"]?#(.*?)['"]?\)$/;let uN=(()=>{class t extends oN{constructor(t,e,n,i,r){super(t),this._iconRegistry=e,this._location=i,this._errorHandler=r,this._inline=!1,n||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Px(t)}get fontSet(){return this._fontSet}set fontSet(t){this._fontSet=this._cleanupFontValue(t)}get fontIcon(){return this._fontIcon}set fontIcon(t){this._fontIcon=this._cleanupFontValue(t)}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnChanges(t){const e=t.svgIcon;if(e)if(this.svgIcon){const[t,e]=this._splitIconName(this.svgIcon);this._iconRegistry.getNamedSvgIcon(e,t).pipe(af(1)).subscribe(t=>this._setSvgElement(t),n=>{const i=`Error retrieving icon ${t}:${e}! ${n.message}`;this._errorHandler?this._errorHandler.handleError(new Error(i)):console.error(i)})}else e.previousValue&&this._clearSvgElement();this._usingFontIcon()&&this._updateFontIconClasses()}ngOnInit(){this._usingFontIcon()&&this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&this._location&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let n=0;n<e.length;n++)e[n].textContent+=" ";if(this._location){const e=this._location.getPathname();this._previousPath=e,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(e)}this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,n)=>{e.forEach(e=>{n.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(lN),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let i=0;i<e.length;i++)aN.forEach(t=>{const r=e[i],o=r.getAttribute(t),s=o?o.match(cN):null;if(s){let e=n.get(r);e||(e=[],n.set(r,e)),e.push({name:t,value:s[1]})}})}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(eN),Bs("aria-hidden"),Ns(sN,8),Ns(_i,8))},t.\u0275cmp=fe({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:4,hostBindings:function(t,e){2&t&&va("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color)},inputs:{color:"color",inline:"inline",fontSet:"fontSet",fontIcon:"fontIcon",svgIcon:"svgIcon"},exportAs:["matIcon"],features:[Ba,Re],ngContentSelectors:XF,decls:1,vars:0,template:function(t,e){1&t&&(ia(),sa(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),hN=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[fT],fT]}),t})();function dN(t,e){if(1&t&&qs(0,9),2&t){const t=ea();Us("ngTemplateOutlet",t.iconOverrides[t.state])("ngTemplateOutletContext",t._getIconContext())}}function pN(t,e){if(1&t&&(js(0,"span"),ka(1),zs()),2&t){const t=ea(2);Cr(1),Da(t._getDefaultTextForState(t.state))}}function fN(t,e){if(1&t&&(js(0,"mat-icon"),ka(1),zs()),2&t){const t=ea(2);Cr(1),Da(t._getDefaultTextForState(t.state))}}function mN(t,e){1&t&&(Gs(0,10),Ls(1,pN,2,1,"span",11),Ls(2,fN,2,1,"mat-icon",12),Ws()),2&t&&(Us("ngSwitch",ea().state),Cr(1),Us("ngSwitchCase","number"))}function gN(t,e){1&t&&qs(0,13),2&t&&Us("ngTemplateOutlet",ea()._templateLabel().template)}function vN(t,e){if(1&t&&(js(0,"div",14),ka(1),zs()),2&t){const t=ea();Cr(1),Da(t.label)}}function yN(t,e){if(1&t&&(js(0,"div",15),ka(1),zs()),2&t){const t=ea();Cr(1),Da(t._intl.optionalLabel)}}function bN(t,e){if(1&t&&(js(0,"div",16),ka(1),zs()),2&t){const t=ea();Cr(1),Da(t.errorMessage)}}function _N(t,e){1&t&&sa(0)}const wN=["*"];function AN(t,e){1&t&&Hs(0,"div",6)}function xN(t,e){if(1&t){const t=$s();Gs(0),js(1,"mat-step-header",4),Xs("click",(function(){return e.$implicit.select()}))("keydown",(function(e){return on(t),ea()._onKeydown(e)})),zs(),Ls(2,AN,1,0,"div",5),Ws()}if(2&t){const t=e.$implicit,n=e.index,i=e.last,r=ea();Cr(1),Us("tabIndex",r._getFocusIndex()===n?0:-1)("id",r._getStepLabelId(n))("index",n)("state",r._getIndicatorType(n,t.state))("label",t.stepLabel||t.label)("selected",r.selectedIndex===n)("active",t.completed||r.selectedIndex===n||!r.linear)("optional",t.optional)("errorMessage",t.errorMessage)("iconOverrides",r._iconOverrides)("disableRipple",r.disableRipple),Rs("aria-posinset",n+1)("aria-setsize",r.steps.length)("aria-controls",r._getStepContentId(n))("aria-selected",r.selectedIndex==n)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),Cr(1),Us("ngIf",!i)}}function CN(t,e){if(1&t){const t=$s();js(0,"div",7),Xs("@stepTransition.done",(function(e){return on(t),ea()._animationDone.next(e)})),qs(1,8),zs()}if(2&t){const t=e.$implicit,n=e.index,i=ea();Us("@stepTransition",i._getAnimationDirection(n))("id",i._getStepContentId(n)),Rs("tabindex",i.selectedIndex===n?0:null)("aria-labelledby",i._getStepLabelId(n))("aria-expanded",i.selectedIndex===n),Cr(1),Us("ngTemplateOutlet",t.content)}}function EN(t,e){if(1&t){const t=$s();js(0,"div",1),js(1,"mat-step-header",2),Xs("click",(function(){return e.$implicit.select()}))("keydown",(function(e){return on(t),ea()._onKeydown(e)})),zs(),js(2,"div",3),js(3,"div",4),Xs("@stepTransition.done",(function(e){return on(t),ea()._animationDone.next(e)})),js(4,"div",5),qs(5,6),zs(),zs(),zs(),zs()}if(2&t){const t=e.$implicit,n=e.index,i=e.last,r=ea();Cr(1),Us("tabIndex",r._getFocusIndex()==n?0:-1)("id",r._getStepLabelId(n))("index",n)("state",r._getIndicatorType(n,t.state))("label",t.stepLabel||t.label)("selected",r.selectedIndex===n)("active",t.completed||r.selectedIndex===n||!r.linear)("optional",t.optional)("errorMessage",t.errorMessage)("iconOverrides",r._iconOverrides)("disableRipple",r.disableRipple),Rs("aria-posinset",n+1)("aria-setsize",r.steps.length)("aria-controls",r._getStepContentId(n))("aria-selected",r.selectedIndex===n)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),Cr(1),va("mat-stepper-vertical-line",!i),Cr(1),Us("@stepTransition",r._getAnimationDirection(n))("id",r._getStepContentId(n)),Rs("tabindex",r.selectedIndex===n?0:null)("aria-labelledby",r._getStepLabelId(n))("aria-expanded",r.selectedIndex===n),Cr(2),Us("ngTemplateOutlet",t.content)}}const SN='.mat-stepper-vertical,.mat-stepper-horizontal{display:block}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative;top:36px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;top:36px;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto;padding:24px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;padding:24px;height:24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-content{outline:0}.mat-horizontal-stepper-content[aria-expanded=false]{height:0;overflow:hidden}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:"";position:absolute;top:-16px;bottom:-16px;left:0;border-left-width:1px;border-left-style:solid}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}\n';let MN=(()=>{class t extends PF{}return t.\u0275fac=function(e){return TN(e||t)},t.\u0275dir=_e({type:t,selectors:[["","matStepLabel",""]],features:[Ba]}),t})();const TN=gi(MN);let PN=(()=>{class t{constructor(){this.changes=new C,this.optionalLabel="Optional"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();const kN={provide:PN,deps:[[new rt,new st,PN]],useFactory:function(t){return t||new PN}};let DN=(()=>{class t extends TF{constructor(t,e,n,i){super(n),this._intl=t,this._focusMonitor=e,e.monitor(n,!0),this._intlSubscription=t.changes.subscribe(()=>i.markForCheck())}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(){this._focusMonitor.focusVia(this._elementRef,"program")}_stringLabel(){return this.label instanceof MN?null:this.label}_templateLabel(){return this.label instanceof MN?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getIconContext(){return{index:this.index,active:this.active,optional:this.optional}}_getDefaultTextForState(t){return"number"==t?`${this.index+1}`:"edit"==t?"create":"error"==t?"warning":t}}return t.\u0275fac=function(e){return new(e||t)(Ns(PN),Ns(QE),Ns(tl),Ns(os))},t.\u0275cmp=fe({type:t,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header","mat-focus-indicator"],inputs:{state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple"},features:[Ba],decls:10,vars:19,consts:[["matRipple","",1,"mat-step-header-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content",3,"ngSwitch"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchCase"],[3,"ngSwitch",4,"ngSwitchDefault"],[1,"mat-step-label"],[3,"ngTemplateOutlet",4,"ngIf"],["class","mat-step-text-label",4,"ngIf"],["class","mat-step-optional",4,"ngIf"],["class","mat-step-sub-label-error",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngTemplateOutlet"],[1,"mat-step-text-label"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"]],template:function(t,e){1&t&&(Hs(0,"div",0),js(1,"div"),js(2,"div",1),Ls(3,dN,1,2,"ng-container",2),Ls(4,mN,3,2,"ng-container",3),zs(),zs(),js(5,"div",4),Ls(6,gN,1,1,"ng-container",5),Ls(7,vN,2,1,"div",6),Ls(8,yN,2,1,"div",7),Ls(9,bN,2,1,"div",8),zs()),2&t&&(Us("matRippleTrigger",e._getHostElement())("matRippleDisabled",e.disableRipple),Cr(1),Ia("mat-step-icon-state-",e.state," mat-step-icon"),va("mat-step-icon-selected",e.selected),Cr(1),Us("ngSwitch",!(!e.iconOverrides||!e.iconOverrides[e.state])),Cr(1),Us("ngSwitchCase",!0),Cr(2),va("mat-step-label-active",e.active)("mat-step-label-selected",e.selected)("mat-step-label-error","error"==e.state),Cr(1),Us("ngIf",e._templateLabel()),Cr(1),Us("ngIf",e._stringLabel()),Cr(1),Us("ngIf",e.optional&&"error"!=e.state),Cr(1),Us("ngIf","error"==e.state))},directives:[GT,bd,_d,wd,md,Ed,uN],styles:[".mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:transparent}.mat-step-optional,.mat-step-sub-label-error{font-size:12px}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative}.mat-step-icon-content,.mat-step-icon .mat-icon{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,changeDetection:0}),t})();const ON={horizontalStepTransition:vx("stepTransition",[Ax("previous",wx({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"})),Ax("current",wx({transform:"none",visibility:"visible"})),Ax("next",wx({transform:"translate3d(100%, 0, 0)",visibility:"hidden"})),xx("* => *",yx("500ms cubic-bezier(0.35, 0, 0.25, 1)"))]),verticalStepTransition:vx("stepTransition",[Ax("previous",wx({height:"0px",visibility:"hidden"})),Ax("next",wx({height:"0px",visibility:"hidden"})),Ax("current",wx({height:"*",visibility:"visible"})),xx("* <=> current",yx("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])};let RN=(()=>{class t{constructor(t){this.templateRef=t}}return t.\u0275fac=function(e){return new(e||t)(Ns(Cl))},t.\u0275dir=_e({type:t,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:["matStepperIcon","name"]}}),t})(),IN=(()=>{class t extends OF{constructor(t,e,n){super(t,n),this._errorStateMatcher=e}isErrorState(t,e){return this._errorStateMatcher.isErrorState(t,e)||!!(t&&t.invalid&&this.interacted)}}return t.\u0275fac=function(e){return new(e||t)(Ns(xt(()=>LN)),Ns(OT,4),Ns(DF,8))},t.\u0275cmp=fe({type:t,selectors:[["mat-step"]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,MN,!0),2&t&&$c(i=tu())&&(e.stepLabel=i.first)},exportAs:["matStep"],features:[Xa([{provide:OT,useExisting:t},{provide:OF,useExisting:t}]),Ba],ngContentSelectors:wN,decls:1,vars:0,template:function(t,e){1&t&&(ia(),Ls(0,_N,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),t})(),LN=(()=>{class t extends RF{constructor(){super(...arguments),this.animationDone=new Fc,this._iconOverrides={},this._animationDone=new C}ngAfterContentInit(){this._icons.forEach(({name:t,templateRef:e})=>this._iconOverrides[t]=e),this._steps.changes.pipe(px(this._destroyed)).subscribe(()=>{this._stateChanged()}),this._animationDone.pipe(c_((t,e)=>t.fromState===e.fromState&&t.toState===e.toState),px(this._destroyed)).subscribe(t=>{"current"===t.toState&&this.animationDone.emit()})}}return t.\u0275fac=function(e){return FN(e||t)},t.\u0275dir=_e({type:t,selectors:[["","matStepper",""]],contentQueries:function(t,e,n){var i;1&t&&(Kc(n,IN,!0),Kc(n,RN,!0)),2&t&&($c(i=tu())&&(e._steps=i),$c(i=tu())&&(e._icons=i))},viewQuery:function(t,e){var n;1&t&&Qc(DN,!0),2&t&&$c(n=tu())&&(e._stepHeader=n)},inputs:{disableRipple:"disableRipple"},outputs:{animationDone:"animationDone"},features:[Xa([{provide:RF,useExisting:t}]),Ba]}),t})();const FN=gi(LN);let NN=(()=>{class t extends LN{constructor(){super(...arguments),this.labelPosition="end"}}return t.\u0275fac=function(e){return BN(e||t)},t.\u0275cmp=fe({type:t,selectors:[["mat-horizontal-stepper"]],hostAttrs:["aria-orientation","horizontal","role","tablist",1,"mat-stepper-horizontal"],hostVars:4,hostBindings:function(t,e){2&t&&va("mat-stepper-label-position-end","end"==e.labelPosition)("mat-stepper-label-position-bottom","bottom"==e.labelPosition)},inputs:{selectedIndex:"selectedIndex",labelPosition:"labelPosition"},exportAs:["matHorizontalStepper"],features:[Xa([{provide:LN,useExisting:t},{provide:RF,useExisting:t}]),Ba],decls:4,vars:2,consts:[[1,"mat-horizontal-stepper-header-container"],[4,"ngFor","ngForOf"],[1,"mat-horizontal-content-container"],["class","mat-horizontal-stepper-content","role","tabpanel",3,"id",4,"ngFor","ngForOf"],[1,"mat-horizontal-stepper-header",3,"tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","click","keydown"],["class","mat-stepper-horizontal-line",4,"ngIf"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"]],template:function(t,e){1&t&&(js(0,"div",0),Ls(1,xN,3,18,"ng-container",1),zs(),js(2,"div",2),Ls(3,CN,2,6,"div",3),zs()),2&t&&(Cr(1),Us("ngForOf",e.steps),Cr(2),Us("ngForOf",e.steps))},directives:[pd,DN,md,Ed],styles:[SN],encapsulation:2,data:{animation:[ON.horizontalStepTransition]},changeDetection:0}),t})();const BN=gi(NN);let UN=(()=>{class t extends LN{constructor(t,e,n,i){super(t,e,n,i),this._orientation="vertical"}}return t.\u0275fac=function(e){return new(e||t)(Ns(Xx,8),Ns(os),Ns(tl),Ns(rh))},t.\u0275cmp=fe({type:t,selectors:[["mat-vertical-stepper"]],hostAttrs:["aria-orientation","vertical","role","tablist",1,"mat-stepper-vertical"],inputs:{selectedIndex:"selectedIndex"},exportAs:["matVerticalStepper"],features:[Xa([{provide:LN,useExisting:t},{provide:RF,useExisting:t}]),Ba],decls:1,vars:1,consts:[["class","mat-step",4,"ngFor","ngForOf"],[1,"mat-step"],[1,"mat-vertical-stepper-header",3,"tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","click","keydown"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],[3,"ngTemplateOutlet"]],template:function(t,e){1&t&&Ls(0,EN,6,25,"div",0),2&t&&Us("ngForOf",e.steps)},directives:[pd,DN,Ed],styles:[SN],encapsulation:2,data:{animation:[ON.verticalStepTransition]},changeDetection:0}),t})(),VN=(()=>{class t extends IF{}return t.\u0275fac=function(e){return jN(e||t)},t.\u0275dir=_e({type:t,selectors:[["button","matStepperNext",""]],hostVars:1,hostBindings:function(t,e){2&t&&La("type",e.type)},inputs:{type:"type"},features:[Ba]}),t})();const jN=gi(VN);let zN=(()=>{class t extends LF{}return t.\u0275fac=function(e){return HN(e||t)},t.\u0275dir=_e({type:t,selectors:[["button","matStepperPrevious",""]],hostVars:1,hostBindings:function(t,e){2&t&&La("type",e.type)},inputs:{type:"type"},features:[Ba]}),t})();const HN=gi(zN);let GN=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[kN,OT],imports:[[fT,Qd,XC,oF,FF,hN,WT],fT]}),t})();const WN=["underline"],qN=["connectionContainer"],$N=["inputContainer"],YN=["label"];function QN(t,e){1&t&&(Gs(0),js(1,"div",14),Hs(2,"div",15),Hs(3,"div",16),Hs(4,"div",17),zs(),js(5,"div",18),Hs(6,"div",15),Hs(7,"div",16),Hs(8,"div",17),zs(),Ws())}function XN(t,e){1&t&&(js(0,"div",19),sa(1,1),zs())}function KN(t,e){if(1&t&&(Gs(0),sa(1,2),js(2,"span"),ka(3),zs(),Ws()),2&t){const t=ea(2);Cr(3),Da(t._control.placeholder)}}function ZN(t,e){1&t&&sa(0,3,["*ngSwitchCase","true"])}function JN(t,e){1&t&&(js(0,"span",23),ka(1," *"),zs())}function tB(t,e){if(1&t){const t=$s();js(0,"label",20,21),Xs("cdkObserveContent",(function(){return on(t),ea().updateOutlineGap()})),Ls(2,KN,4,1,"ng-container",12),Ls(3,ZN,1,0,"ng-content",12),Ls(4,JN,2,0,"span",22),zs()}if(2&t){const t=ea();va("mat-empty",t._control.empty&&!t._shouldAlwaysFloat)("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat)("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),Us("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),Rs("for",t._control.id)("aria-owns",t._control.id),Cr(2),Us("ngSwitchCase",!1),Cr(1),Us("ngSwitchCase",!0),Cr(1),Us("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function eB(t,e){1&t&&(js(0,"div",24),sa(1,4),zs())}function nB(t,e){if(1&t&&(js(0,"div",25,26),Hs(2,"span",27),zs()),2&t){const t=ea();Cr(2),va("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function iB(t,e){1&t&&(js(0,"div"),sa(1,5),zs()),2&t&&Us("@transitionMessages",ea()._subscriptAnimationState)}function rB(t,e){if(1&t&&(js(0,"div",31),ka(1),zs()),2&t){const t=ea(2);Us("id",t._hintLabelId),Cr(1),Da(t.hintLabel)}}function oB(t,e){if(1&t&&(js(0,"div",28),Ls(1,rB,2,2,"div",29),sa(2,6),Hs(3,"div",30),sa(4,7),zs()),2&t){const t=ea();Us("@transitionMessages",t._subscriptAnimationState),Cr(1),Us("ngIf",t.hintLabel)}}const sB=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],aB=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let lB=0,cB=(()=>{class t{constructor(){this.id=`mat-error-${lB++}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["mat-error"]],hostAttrs:["role","alert",1,"mat-error"],hostVars:1,hostBindings:function(t,e){2&t&&Rs("id",e.id)},inputs:{id:"id"}}),t})();const uB={transitionMessages:vx("transitionMessages",[Ax("enter",wx({opacity:1,transform:"translateY(0%)"})),xx("void => enter",[wx({opacity:0,transform:"translateY(-100%)"}),yx("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let hB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t}),t})();function dB(t){return Error(`A hint was already declared for 'align="${t}"'.`)}let pB=0,fB=(()=>{class t{constructor(){this.align="start",this.id=`mat-hint-${pB++}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-hint"],hostVars:4,hostBindings:function(t,e){2&t&&(Rs("id",e.id)("align",null),va("mat-right","end"==e.align))},inputs:{align:"align",id:"id"}}),t})(),mB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["mat-label"]]}),t})(),gB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["mat-placeholder"]]}),t})(),vB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","matPrefix",""]]}),t})(),yB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","matSuffix",""]]}),t})(),bB=0;class _B{constructor(t){this._elementRef=t}}const wB=gT(_B,"primary"),AB=new Bt("MAT_FORM_FIELD_DEFAULT_OPTIONS"),xB=new Bt("MatFormField");let CB=(()=>{class t extends wB{constructor(t,e,n,i,r,o,s,a){super(t),this._elementRef=t,this._changeDetectorRef=e,this._dir=i,this._defaults=r,this._platform=o,this._ngZone=s,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new C,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId=`mat-hint-${bB++}`,this._labelId=`mat-form-field-label-${bB++}`,this._labelOptions=n||{},this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==a,this.appearance=r&&r.appearance?r.appearance:"legacy",this._hideRequiredMarker=!(!r||null==r.hideRequiredMarker)&&r.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Px(t)}get _shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}get _canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}get _labelChild(){return this._labelChildNonStatic||this._labelChildStatic}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(wf(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(px(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.asObservable().pipe(px(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),q(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(wf(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(wf(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(px(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const e=this._control?this._control.ngControl:null;return e&&e[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!!this._labelChild}_shouldLabelFloat(){return this._canLabelFloat&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat)}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,AA(this._label.nativeElement,"transitionend").pipe(af(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){if(this._control.placeholder&&this._placeholderChild)throw Error("Placeholder attribute and child element were both specified.")}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){if(this._hintChildren){let t,e;this._hintChildren.forEach(n=>{if("start"===n.align){if(t||this.hintLabel)throw dB("start");t=n}else if("end"===n.align){if(e)throw dB("end");e=n}})}}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||this._labelOptions.float||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if("hint"===this._getDisplayedMessages()){const e=this._hintChildren?this._hintChildren.find(t=>"start"===t.align):null,n=this._hintChildren?this._hintChildren.find(t=>"end"===t.align):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&(t=this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(t)}}_validateControlChild(){if(!this._control)throw Error("mat-form-field must contain a MatFormFieldControl.")}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!t||!t.children.length||!t.textContent.trim())return;if(!this._platform.isBrowser)return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let e=0,n=0;const i=this._connectionContainerRef.nativeElement,r=i.querySelectorAll(".mat-form-field-outline-start"),o=i.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const r=i.getBoundingClientRect();if(0===r.width&&0===r.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const o=this._getStartEnd(r),s=this._getStartEnd(t.children[0].getBoundingClientRect());let a=0;for(const e of t.children)a+=e.offsetWidth;e=Math.abs(s-o)-5,n=a>0?.75*a+10:0}for(let s=0;s<r.length;s++)r[s].style.width=`${e}px`;for(let s=0;s<o.length;s++)o[s].style.width=`${n}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const e=t.getRootNode();return e&&e!==t}return document.documentElement.contains(t)}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(os),Ns(YT,8),Ns(Xx,8),Ns(AB,8),Ns(Vx),Ns(Su),Ns(cT,8))},t.\u0275cmp=fe({type:t,selectors:[["mat-form-field"]],contentQueries:function(t,e,n){var i;1&t&&(Kc(n,hB,!0),Zc(n,hB,!0),Kc(n,mB,!0),Zc(n,mB,!0),Kc(n,gB,!0),Kc(n,cB,!0),Kc(n,fB,!0),Kc(n,vB,!0),Kc(n,yB,!0)),2&t&&($c(i=tu())&&(e._controlNonStatic=i.first),$c(i=tu())&&(e._controlStatic=i.first),$c(i=tu())&&(e._labelChildNonStatic=i.first),$c(i=tu())&&(e._labelChildStatic=i.first),$c(i=tu())&&(e._placeholderChild=i.first),$c(i=tu())&&(e._errorChildren=i),$c(i=tu())&&(e._hintChildren=i),$c(i=tu())&&(e._prefixChildren=i),$c(i=tu())&&(e._suffixChildren=i))},viewQuery:function(t,e){var n;1&t&&(Qc(WN,!0),Yc(qN,!0),Qc($N,!0),Qc(YN,!0)),2&t&&($c(n=tu())&&(e.underlineRef=n.first),$c(n=tu())&&(e._connectionContainerRef=n.first),$c(n=tu())&&(e._inputContainerRef=n.first),$c(n=tu())&&(e._label=n.first))},hostAttrs:[1,"mat-form-field"],hostVars:44,hostBindings:function(t,e){2&t&&va("mat-form-field-appearance-standard","standard"==e.appearance)("mat-form-field-appearance-fill","fill"==e.appearance)("mat-form-field-appearance-outline","outline"==e.appearance)("mat-form-field-appearance-legacy","legacy"==e.appearance)("mat-form-field-invalid",e._control.errorState)("mat-form-field-can-float",e._canLabelFloat)("mat-form-field-should-float",e._shouldLabelFloat())("mat-form-field-has-label",e._hasFloatingLabel())("mat-form-field-hide-placeholder",e._hideControlPlaceholder())("mat-form-field-disabled",e._control.disabled)("mat-form-field-autofilled",e._control.autofilled)("mat-focused",e._control.focused)("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)("ng-untouched",e._shouldForward("untouched"))("ng-touched",e._shouldForward("touched"))("ng-pristine",e._shouldForward("pristine"))("ng-dirty",e._shouldForward("dirty"))("ng-valid",e._shouldForward("valid"))("ng-invalid",e._shouldForward("invalid"))("ng-pending",e._shouldForward("pending"))("_mat-animation-noopable",!e._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Xa([{provide:xB,useExisting:t}]),Ba],ngContentSelectors:aB,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,e){1&t&&(ia(sB),js(0,"div",0),js(1,"div",1,2),Xs("click",(function(t){return e._control.onContainerClick&&e._control.onContainerClick(t)})),Ls(3,QN,9,0,"ng-container",3),Ls(4,XN,2,0,"div",4),js(5,"div",5,6),sa(7),js(8,"span",7),Ls(9,tB,5,16,"label",8),zs(),zs(),Ls(10,eB,2,0,"div",9),zs(),Ls(11,nB,3,4,"div",10),js(12,"div",11),Ls(13,iB,2,1,"div",12),Ls(14,oB,5,2,"div",13),zs(),zs()),2&t&&(Cr(3),Us("ngIf","outline"==e.appearance),Cr(1),Us("ngIf",e._prefixChildren.length),Cr(5),Us("ngIf",e._hasFloatingLabel()),Cr(1),Us("ngIf",e._suffixChildren.length),Cr(1),Us("ngIf","outline"!=e.appearance),Cr(1),Us("ngSwitch",e._getDisplayedMessages()),Cr(1),Us("ngSwitchCase","error"),Cr(1),Us("ngSwitchCase","hint"))},directives:[md,bd,_d,RE],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:scaleX(1);transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[uB.transitionMessages]},changeDetection:0}),t})(),EB=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd,IE]]}),t})();const SB=$x({passive:!0});let MB=(()=>{class t{constructor(t,e){this._platform=t,this._ngZone=e,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Up;const e=Rx(t),n=this._monitoredElements.get(e);if(n)return n.subject.asObservable();const i=new C,r="cdk-text-field-autofilled",o=t=>{"cdk-text-field-autofill-start"!==t.animationName||e.classList.contains(r)?"cdk-text-field-autofill-end"===t.animationName&&e.classList.contains(r)&&(e.classList.remove(r),this._ngZone.run(()=>i.next({target:t.target,isAutofilled:!1}))):(e.classList.add(r),this._ngZone.run(()=>i.next({target:t.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{e.addEventListener("animationstart",o,SB),e.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(e,{subject:i,unlisten:()=>{e.removeEventListener("animationstart",o,SB)}}),i.asObservable()}stopMonitoring(t){const e=Rx(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}ngOnDestroy(){this._monitoredElements.forEach((t,e)=>this.stopMonitoring(e))}}return t.\u0275fac=function(e){return new(e||t)(Yt(Vx),Yt(Su))},t.\u0275prov=ut({factory:function(){return new t(Yt(Vx),Yt(Su))},token:t,providedIn:"root"}),t})(),TB=(()=>{class t{constructor(t,e){this._elementRef=t,this._autofillMonitor=e,this.cdkAutofill=new Fc}ngOnInit(){this._autofillMonitor.monitor(this._elementRef).subscribe(t=>this.cdkAutofill.emit(t))}ngOnDestroy(){this._autofillMonitor.stopMonitoring(this._elementRef)}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(MB))},t.\u0275dir=_e({type:t,selectors:[["","cdkAutofill",""]],outputs:{cdkAutofill:"cdkAutofill"}}),t})(),PB=(()=>{class t{constructor(t,e,n,i){this._elementRef=t,this._platform=e,this._ngZone=n,this._destroyed=new C,this._enabled=!0,this._previousMinRows=-1,this._document=i,this._textareaElement=this._elementRef.nativeElement}get minRows(){return this._minRows}set minRows(t){this._minRows=kx(t),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(t){this._maxRows=kx(t),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(t){t=Px(t),this._enabled!==t&&((this._enabled=t)?this.resizeToFitContent(!0):this.reset())}_setMinHeight(){const t=this.minRows&&this._cachedLineHeight?`${this.minRows*this._cachedLineHeight}px`:null;t&&(this._textareaElement.style.minHeight=t)}_setMaxHeight(){const t=this.maxRows&&this._cachedLineHeight?`${this.maxRows*this._cachedLineHeight}px`:null;t&&(this._textareaElement.style.maxHeight=t)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{AA(this._getWindow(),"resize").pipe(Fx(16),px(this._destroyed)).subscribe(()=>this.resizeToFitContent(!0))}))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let t=this._textareaElement.cloneNode(!1);t.rows=1,t.style.position="absolute",t.style.visibility="hidden",t.style.border="none",t.style.padding="0",t.style.height="",t.style.minHeight="",t.style.maxHeight="",t.style.overflow="hidden",this._textareaElement.parentNode.appendChild(t),this._cachedLineHeight=t.clientHeight,this._textareaElement.parentNode.removeChild(t),this._setMinHeight(),this._setMaxHeight()}ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(t=!1){if(!this._enabled)return;if(this._cacheTextareaLineHeight(),!this._cachedLineHeight)return;const e=this._elementRef.nativeElement,n=e.value;if(!t&&this._minRows===this._previousMinRows&&n===this._previousValue)return;const i=e.placeholder;e.classList.add("cdk-textarea-autosize-measuring"),e.placeholder="",e.style.height=`${e.scrollHeight-4}px`,e.classList.remove("cdk-textarea-autosize-measuring"),e.placeholder=i,this._ngZone.runOutsideAngular(()=>{"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(()=>this._scrollToCaretPosition(e)):setTimeout(()=>this._scrollToCaretPosition(e))}),this._previousValue=n,this._previousMinRows=this._minRows}reset(){void 0!==this._initialHeight&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollToCaretPosition(t){const{selectionStart:e,selectionEnd:n}=t,i=this._getDocument();this._destroyed.isStopped||i.activeElement!==t||t.setSelectionRange(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(Vx),Ns(Su),Ns(rh,8))},t.\u0275dir=_e({type:t,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(t,e){1&t&&Xs("input",(function(){return e._noopInputHandler()}))},inputs:{minRows:["cdkAutosizeMinRows","minRows"],maxRows:["cdkAutosizeMaxRows","maxRows"],enabled:["cdkTextareaAutosize","enabled"]},exportAs:["cdkTextareaAutosize"]}),t})(),kB=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[jx]]}),t})(),DB=(()=>{class t extends PB{get matAutosizeMinRows(){return this.minRows}set matAutosizeMinRows(t){this.minRows=t}get matAutosizeMaxRows(){return this.maxRows}set matAutosizeMaxRows(t){this.maxRows=t}get matAutosize(){return this.enabled}set matAutosize(t){this.enabled=t}get matTextareaAutosize(){return this.enabled}set matTextareaAutosize(t){this.enabled=t}}return t.\u0275fac=function(e){return OB(e||t)},t.\u0275dir=_e({type:t,selectors:[["textarea","mat-autosize",""],["textarea","matTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize","mat-autosize"],inputs:{cdkAutosizeMinRows:"cdkAutosizeMinRows",cdkAutosizeMaxRows:"cdkAutosizeMaxRows",matAutosizeMinRows:"matAutosizeMinRows",matAutosizeMaxRows:"matAutosizeMaxRows",matAutosize:["mat-autosize","matAutosize"],matTextareaAutosize:"matTextareaAutosize"},exportAs:["matTextareaAutosize"],features:[Ba]}),t})();const OB=gi(DB),RB=new Bt("MAT_INPUT_VALUE_ACCESSOR"),IB=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let LB=0;class FB{constructor(t,e,n,i){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=i}}const NB=yT(FB);let BB=(()=>{class t extends NB{constructor(t,e,n,i,r,o,s,a,l){super(o,i,r,n),this._elementRef=t,this._platform=e,this.ngControl=n,this._autofillMonitor=a,this._uid=`mat-input-${LB++}`,this._isServer=!1,this._isNativeSelect=!1,this.focused=!1,this.stateChanges=new C,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>Hx().has(t));const c=this._elementRef.nativeElement;this._inputValueAccessor=s||c,this._previousNativeValue=this.value,this.id=this.id,e.IOS&&l.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",t=>{let e=t.target;e.value||e.selectionStart||e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===c.nodeName.toLowerCase(),this._isNativeSelect&&(this.controlType=c.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Px(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=Px(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea()&&Hx().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Px(t)}ngOnInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t===this.focused||this.readonly&&t||(this.focused=t,this.stateChanges.next())}_onInput(){}_isTextarea(){return"textarea"===this._elementRef.nativeElement.nodeName.toLowerCase()}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){if(IB.indexOf(this._type)>-1)throw Error(`Input type "${this._type}" isn't supported by matInput.`)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focused||this.focus()}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(Vx),Ns(q_,10),Ns(Ww,8),Ns(nA,8),Ns(OT),Ns(RB,10),Ns(MB),Ns(Su))},t.\u0275dir=_e({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:10,hostBindings:function(t,e){1&t&&Xs("focus",(function(){return e._focusChanged(!0)}))("blur",(function(){return e._focusChanged(!1)}))("input",(function(){return e._onInput()})),2&t&&(La("disabled",e.disabled)("required",e.required),Rs("id",e.id)("placeholder",e.placeholder)("readonly",e.readonly&&!e._isNativeSelect||null)("aria-describedby",e._ariaDescribedby||null)("aria-invalid",e.errorState)("aria-required",e.required.toString()),va("mat-input-server",e._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher"},exportAs:["matInput"],features:[Xa([{provide:hB,useExisting:t}]),Ba,Re]}),t})(),UB=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[OT],imports:[[kB,EB],kB,EB]}),t})();const VB=["mat-calendar-body",""];function jB(t,e){if(1&t&&(js(0,"tr",2),js(1,"td",3),ka(2),zs(),zs()),2&t){const t=ea();Cr(1),ga("padding-top",t._cellPadding)("padding-bottom",t._cellPadding),Rs("colspan",t.numCols),Cr(1),Oa(" ",t.label," ")}}function zB(t,e){if(1&t&&(js(0,"td",7),ka(1),zs()),2&t){const t=ea(2);ga("padding-top",t._cellPadding)("padding-bottom",t._cellPadding),Rs("colspan",t._firstRowOffset),Cr(1),Oa(" ",t._firstRowOffset>=t.labelMinRequiredCells?t.label:""," ")}}function HB(t,e){if(1&t){const t=$s();js(0,"td",8),Xs("click",(function(){on(t);const n=e.$implicit;return ea(2)._cellClicked(n)})),js(1,"div",9),ka(2),zs(),zs()}if(2&t){const t=e.$implicit,n=e.index,i=ea().index,r=ea();ga("width",r._cellWidth)("padding-top",r._cellPadding)("padding-bottom",r._cellPadding),va("mat-calendar-body-disabled",!t.enabled)("mat-calendar-body-active",r._isActiveCell(i,n)),Us("ngClass",t.cssClasses)("tabindex",r._isActiveCell(i,n)?0:-1),Rs("aria-label",t.ariaLabel)("aria-disabled",!t.enabled||null)("aria-selected",r.selectedValue===t.value),Cr(1),va("mat-calendar-body-selected",r.selectedValue===t.value)("mat-calendar-body-today",r.todayValue===t.value),Cr(1),Oa(" ",t.displayValue," ")}}function GB(t,e){if(1&t&&(js(0,"tr",4),Ls(1,zB,2,6,"td",5),Ls(2,HB,3,20,"td",6),zs()),2&t){const t=e.$implicit,n=e.index,i=ea();Cr(1),Us("ngIf",0===n&&i._firstRowOffset),Cr(1),Us("ngForOf",t)}}function WB(t,e){if(1&t&&(js(0,"th",5),ka(1),zs()),2&t){const t=e.$implicit;Rs("aria-label",t.long),Cr(1),Da(t.narrow)}}const qB=["*"];function $B(t,e){}function YB(t,e){if(1&t){const t=$s();js(0,"mat-month-view",5),Xs("activeDateChange",(function(e){return on(t),ea().activeDate=e}))("selectedChange",(function(e){return on(t),ea()._dateSelected(e)}))("_userSelection",(function(){return on(t),ea()._userSelected()})),zs()}if(2&t){const t=ea();Us("activeDate",t.activeDate)("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)("dateClass",t.dateClass)}}function QB(t,e){if(1&t){const t=$s();js(0,"mat-year-view",6),Xs("activeDateChange",(function(e){return on(t),ea().activeDate=e}))("monthSelected",(function(e){return on(t),ea()._monthSelectedInYearView(e)}))("selectedChange",(function(e){return on(t),ea()._goToDateInView(e,"month")})),zs()}if(2&t){const t=ea();Us("activeDate",t.activeDate)("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)}}function XB(t,e){if(1&t){const t=$s();js(0,"mat-multi-year-view",7),Xs("activeDateChange",(function(e){return on(t),ea().activeDate=e}))("yearSelected",(function(e){return on(t),ea()._yearSelectedInMultiYearView(e)}))("selectedChange",(function(e){return on(t),ea()._goToDateInView(e,"year")})),zs()}if(2&t){const t=ea();Us("activeDate",t.activeDate)("selected",t.selected)("dateFilter",t.dateFilter)("maxDate",t.maxDate)("minDate",t.minDate)}}const KB=["button"];function ZB(t,e){1&t&&(tn.lFrame.currentNamespace="http://www.w3.org/2000/svg",js(0,"svg",3),Hs(1,"path",4),zs())}const JB=[[["","matDatepickerToggleIcon",""]]],tU=["[matDatepickerToggleIcon]"];function eU(t){return Error(`MatDatepicker: No provider found for ${t}. You must import one of the following `+"modules at your application root: MatNativeDateModule, MatMomentDateModule, or provide a custom implementation.")}let nU=(()=>{class t{constructor(){this.changes=new C,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 20 years",this.nextMultiYearLabel="Next 20 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(t,e){return`${t} \u2013 ${e}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();class iU{constructor(t,e,n,i,r={}){this.value=t,this.displayValue=e,this.ariaLabel=n,this.enabled=i,this.cssClasses=r}}let rU=(()=>{class t{constructor(t,e){this._elementRef=t,this._ngZone=e,this.numCols=7,this.activeCell=0,this.cellAspectRatio=1,this.selectedValueChange=new Fc}_cellClicked(t){t.enabled&&this.selectedValueChange.emit(t.value)}ngOnChanges(t){const e=t.numCols,{rows:n,numCols:i}=this;(t.rows||e)&&(this._firstRowOffset=n&&n.length&&n[0].length?i-n[0].length:0),(t.cellAspectRatio||e||!this._cellPadding)&&(this._cellPadding=`${50*this.cellAspectRatio/i}%`),!e&&this._cellWidth||(this._cellWidth=`${100/i}%`)}_isActiveCell(t,e){let n=t*this.numCols+e;return t&&(n-=this._firstRowOffset),n==this.activeCell}_focusActiveCell(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.asObservable().pipe(af(1)).subscribe(()=>{const t=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");t&&t.focus()})})}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(Su))},t.\u0275cmp=fe({type:t,selectors:[["","mat-calendar-body",""]],hostAttrs:["role","grid","aria-readonly","true",1,"mat-calendar-body"],inputs:{numCols:"numCols",activeCell:"activeCell",cellAspectRatio:"cellAspectRatio",label:"label",rows:"rows",todayValue:"todayValue",selectedValue:"selectedValue",labelMinRequiredCells:"labelMinRequiredCells"},outputs:{selectedValueChange:"selectedValueChange"},exportAs:["matCalendarBody"],features:[Re],attrs:VB,decls:2,vars:2,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["aria-hidden","true","class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell mat-focus-indicator","role","button",3,"ngClass","tabindex","mat-calendar-body-disabled","mat-calendar-body-active","width","paddingTop","paddingBottom","click",4,"ngFor","ngForOf"],["aria-hidden","true",1,"mat-calendar-body-label"],["role","gridcell","role","button",1,"mat-calendar-body-cell","mat-focus-indicator",3,"ngClass","tabindex","click"],[1,"mat-calendar-body-cell-content"]],template:function(t,e){1&t&&(Ls(0,jB,3,6,"tr",0),Ls(1,GB,3,2,"tr",1)),2&t&&(Us("ngIf",e._firstRowOffset<e.labelMinRequiredCells),Cr(1),Us("ngForOf",e.rows))},directives:[md,pd,ud],styles:[".mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-cell{position:relative;height:0;line-height:0;text-align:center;outline:none;cursor:pointer}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-cell-content{position:absolute;top:5%;left:5%;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected),.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected){outline:dotted 2px}[dir=rtl] .mat-calendar-body-label{text-align:right}@media(hover: none){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected){background-color:transparent}}\n"],encapsulation:2,changeDetection:0}),t})(),oU=(()=>{class t{constructor(t,e,n,i){if(this._changeDetectorRef=t,this._dateFormats=e,this._dateAdapter=n,this._dir=i,this._rerenderSubscription=d.EMPTY,this.selectedChange=new Fc,this._userSelection=new Fc,this.activeDateChange=new Fc,!this._dateAdapter)throw eU("DateAdapter");if(!this._dateFormats)throw eU("MAT_DATE_FORMATS");this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(t){const e=this._activeDate,n=this._getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),this._hasSameMonthAndYear(e,this._activeDate)||this._init()}get selected(){return this._selected}set selected(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._selectedDate=this._getDateInCurrentMonth(this._selected)}get minDate(){return this._minDate}set minDate(t){this._minDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(wf(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(t){if(this._selectedDate!=t){const e=this._dateAdapter.getYear(this.activeDate),n=this._dateAdapter.getMonth(this.activeDate),i=this._dateAdapter.createDate(e,n,t);this.selectedChange.emit(i)}this._userSelection.emit()}_handleCalendarBodyKeydown(t){const e=this._activeDate,n=this._isRtl();switch(t.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,n?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,n?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=t.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return void(this.dateFilter&&!this.dateFilter(this._activeDate)||(this._dateSelected(this._dateAdapter.getDate(this._activeDate)),this._userSelection.emit(),t.preventDefault()));default:return}this._dateAdapter.compareDate(e,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),t.preventDefault()}_init(){this._selectedDate=this._getDateInCurrentMonth(this.selected),this._todayDate=this._getDateInCurrentMonth(this._dateAdapter.today()),this._monthLabel=this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let t=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(t)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_initWeekdays(){const t=this._dateAdapter.getFirstDayOfWeek(),e=this._dateAdapter.getDayOfWeekNames("narrow");let n=this._dateAdapter.getDayOfWeekNames("long").map((t,n)=>({long:t,narrow:e[n]}));this._weekdays=n.slice(t).concat(n.slice(0,t))}_createWeekCells(){const t=this._dateAdapter.getNumDaysInMonth(this.activeDate),e=this._dateAdapter.getDateNames();this._weeks=[[]];for(let n=0,i=this._firstWeekOffset;n<t;n++,i++){7==i&&(this._weeks.push([]),i=0);const t=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),n+1),r=this._shouldEnableDate(t),o=this._dateAdapter.format(t,this._dateFormats.display.dateA11yLabel),s=this.dateClass?this.dateClass(t):void 0;this._weeks[this._weeks.length-1].push(new iU(n+1,e[n],o,r,s))}}_shouldEnableDate(t){return!!t&&(!this.minDate||this._dateAdapter.compareDate(t,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(t,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(t))}_getDateInCurrentMonth(t){return t&&this._hasSameMonthAndYear(t,this.activeDate)?this._dateAdapter.getDate(t):null}_hasSameMonthAndYear(t,e){return!(!t||!e||this._dateAdapter.getMonth(t)!=this._dateAdapter.getMonth(e)||this._dateAdapter.getYear(t)!=this._dateAdapter.getYear(e))}_getValidDateOrNull(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}_isRtl(){return this._dir&&"rtl"===this._dir.value}}return t.\u0275fac=function(e){return new(e||t)(Ns(os),Ns(wT,8),Ns(_T,8),Ns(Xx,8))},t.\u0275cmp=fe({type:t,selectors:[["mat-month-view"]],viewQuery:function(t,e){var n;1&t&&Qc(rU,!0),2&t&&$c(n=tu())&&(e._matCalendarBody=n.first)},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],decls:7,vars:7,consts:[["role","presentation",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["colspan","7","aria-hidden","true",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","selectedValue","labelMinRequiredCells","activeCell","selectedValueChange","keydown"],["scope","col"]],template:function(t,e){1&t&&(js(0,"table",0),js(1,"thead",1),js(2,"tr"),Ls(3,WB,2,2,"th",2),zs(),js(4,"tr"),Hs(5,"th",3),zs(),zs(),js(6,"tbody",4),Xs("selectedValueChange",(function(t){return e._dateSelected(t)}))("keydown",(function(t){return e._handleCalendarBodyKeydown(t)})),zs(),zs()),2&t&&(Cr(3),Us("ngForOf",e._weekdays),Cr(3),Us("label",e._monthLabel)("rows",e._weeks)("todayValue",e._todayDate)("selectedValue",e._selectedDate)("labelMinRequiredCells",3)("activeCell",e._dateAdapter.getDate(e.activeDate)-1))},directives:[pd,rU],encapsulation:2,changeDetection:0}),t})(),sU=(()=>{class t{constructor(t,e,n){if(this._changeDetectorRef=t,this._dateAdapter=e,this._dir=n,this._rerenderSubscription=d.EMPTY,this.selectedChange=new Fc,this.yearSelected=new Fc,this.activeDateChange=new Fc,!this._dateAdapter)throw eU("DateAdapter");this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(t){let e=this._activeDate;const n=this._getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),aU(this._dateAdapter,e,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._selectedYear=this._selected&&this._dateAdapter.getYear(this._selected)}get minDate(){return this._minDate}set minDate(t){this._minDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(wf(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const t=this._dateAdapter.getYear(this._activeDate)-lU(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let e=0,n=[];e<24;e++)n.push(t+e),4==n.length&&(this._years.push(n.map(t=>this._createCellForYear(t))),n=[]);this._changeDetectorRef.markForCheck()}_yearSelected(t){this.yearSelected.emit(this._dateAdapter.createDate(t,0,1));let e=this._dateAdapter.getMonth(this.activeDate),n=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(t,e,1));this.selectedChange.emit(this._dateAdapter.createDate(t,e,Math.min(this._dateAdapter.getDate(this.activeDate),n)))}_handleCalendarBodyKeydown(t){const e=this._activeDate,n=this._isRtl();switch(t.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,n?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-lU(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-lU(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?-240:-24);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?240:24);break;case 13:case 32:this._yearSelected(this._dateAdapter.getYear(this._activeDate));break;default:return}this._dateAdapter.compareDate(e,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),t.preventDefault()}_getActiveCell(){return lU(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_createCellForYear(t){let e=this._dateAdapter.getYearName(this._dateAdapter.createDate(t,0,1));return new iU(t,e,e,this._shouldEnableYear(t))}_shouldEnableYear(t){if(null==t||this.maxDate&&t>this._dateAdapter.getYear(this.maxDate)||this.minDate&&t<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let e=this._dateAdapter.createDate(t,0,1);this._dateAdapter.getYear(e)==t;e=this._dateAdapter.addCalendarDays(e,1))if(this.dateFilter(e))return!0;return!1}_getValidDateOrNull(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}_isRtl(){return this._dir&&"rtl"===this._dir.value}}return t.\u0275fac=function(e){return new(e||t)(Ns(os),Ns(_T,8),Ns(Xx,8))},t.\u0275cmp=fe({type:t,selectors:[["mat-multi-year-view"]],viewQuery:function(t,e){var n;1&t&&Qc(rU,!0),2&t&&$c(n=tu())&&(e._matCalendarBody=n.first)},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:6,consts:[["role","presentation",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","selectedValue","numCols","cellAspectRatio","activeCell","selectedValueChange","keydown"]],template:function(t,e){1&t&&(js(0,"table",0),js(1,"thead",1),js(2,"tr"),Hs(3,"th",2),zs(),zs(),js(4,"tbody",3),Xs("selectedValueChange",(function(t){return e._yearSelected(t)}))("keydown",(function(t){return e._handleCalendarBodyKeydown(t)})),zs(),zs()),2&t&&(Cr(4),Us("rows",e._years)("todayValue",e._todayYear)("selectedValue",e._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",e._getActiveCell()))},directives:[rU],encapsulation:2,changeDetection:0}),t})();function aU(t,e,n,i,r){const o=t.getYear(e),s=t.getYear(n),a=cU(t,i,r);return Math.floor((o-a)/24)===Math.floor((s-a)/24)}function lU(t,e,n,i){return((t.getYear(e)-cU(t,n,i))%24+24)%24}function cU(t,e,n){let i=0;return n?i=t.getYear(n)-24+1:e&&(i=t.getYear(e)),i}let uU=(()=>{class t{constructor(t,e,n,i){if(this._changeDetectorRef=t,this._dateFormats=e,this._dateAdapter=n,this._dir=i,this._rerenderSubscription=d.EMPTY,this.selectedChange=new Fc,this.monthSelected=new Fc,this.activeDateChange=new Fc,!this._dateAdapter)throw eU("DateAdapter");if(!this._dateFormats)throw eU("MAT_DATE_FORMATS");this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(t){let e=this._activeDate;const n=this._getValidDateOrNull(this._dateAdapter.deserialize(t))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(n,this.minDate,this.maxDate),this._dateAdapter.getYear(e)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._selectedMonth=this._getMonthInCurrentYear(this._selected)}get minDate(){return this._minDate}set minDate(t){this._minDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(wf(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(t){const e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1);this.monthSelected.emit(e);const n=this._dateAdapter.getNumDaysInMonth(e);this.selectedChange.emit(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,Math.min(this._dateAdapter.getDate(this.activeDate),n)))}_handleCalendarBodyKeydown(t){const e=this._activeDate,n=this._isRtl();switch(t.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,n?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,n?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,t.altKey?10:1);break;case 13:case 32:this._monthSelected(this._dateAdapter.getMonth(this._activeDate));break;default:return}this._dateAdapter.compareDate(e,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),t.preventDefault()}_init(){this._selectedMonth=this._getMonthInCurrentYear(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let t=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(e=>e.map(e=>this._createCellForMonth(e,t[e]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_getMonthInCurrentYear(t){return t&&this._dateAdapter.getYear(t)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(t):null}_createCellForMonth(t,e){let n=this._dateAdapter.format(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),t,1),this._dateFormats.display.monthYearA11yLabel);return new iU(t,e.toLocaleUpperCase(),n,this._shouldEnableMonth(t))}_shouldEnableMonth(t){const e=this._dateAdapter.getYear(this.activeDate);if(null==t||this._isYearAndMonthAfterMaxDate(e,t)||this._isYearAndMonthBeforeMinDate(e,t))return!1;if(!this.dateFilter)return!0;for(let n=this._dateAdapter.createDate(e,t,1);this._dateAdapter.getMonth(n)==t;n=this._dateAdapter.addCalendarDays(n,1))if(this.dateFilter(n))return!0;return!1}_isYearAndMonthAfterMaxDate(t,e){if(this.maxDate){const n=this._dateAdapter.getYear(this.maxDate),i=this._dateAdapter.getMonth(this.maxDate);return t>n||t===n&&e>i}return!1}_isYearAndMonthBeforeMinDate(t,e){if(this.minDate){const n=this._dateAdapter.getYear(this.minDate),i=this._dateAdapter.getMonth(this.minDate);return t<n||t===n&&e<i}return!1}_getValidDateOrNull(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}_isRtl(){return this._dir&&"rtl"===this._dir.value}}return t.\u0275fac=function(e){return new(e||t)(Ns(os),Ns(wT,8),Ns(_T,8),Ns(Xx,8))},t.\u0275cmp=fe({type:t,selectors:[["mat-year-view"]],viewQuery:function(t,e){var n;1&t&&Qc(rU,!0),2&t&&$c(n=tu())&&(e._matCalendarBody=n.first)},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:8,consts:[["role","presentation",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","selectedValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","keydown"]],template:function(t,e){1&t&&(js(0,"table",0),js(1,"thead",1),js(2,"tr"),Hs(3,"th",2),zs(),zs(),js(4,"tbody",3),Xs("selectedValueChange",(function(t){return e._monthSelected(t)}))("keydown",(function(t){return e._handleCalendarBodyKeydown(t)})),zs(),zs()),2&t&&(Cr(4),Us("label",e._yearLabel)("rows",e._months)("todayValue",e._todayMonth)("selectedValue",e._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",e._dateAdapter.getMonth(e.activeDate)))},directives:[rU],encapsulation:2,changeDetection:0}),t})(),hU=(()=>{class t{constructor(t,e,n,i,r){this._intl=t,this.calendar=e,this._dateAdapter=n,this._dateFormats=i,this.calendar.stateChanges.subscribe(()=>r.markForCheck())}get periodButtonText(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);const t=this._dateAdapter.getYear(this.calendar.activeDate)-lU(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),e=t+24-1,n=this._dateAdapter.getYearName(this._dateAdapter.createDate(t,0,1)),i=this._dateAdapter.getYearName(this._dateAdapter.createDate(e,0,1));return this._intl.formatYearRange(n,i)}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-24)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:24)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(t,e){return"month"==this.calendar.currentView?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(e)&&this._dateAdapter.getMonth(t)==this._dateAdapter.getMonth(e):"year"==this.calendar.currentView?this._dateAdapter.getYear(t)==this._dateAdapter.getYear(e):aU(this._dateAdapter,t,e,this.calendar.minDate,this.calendar.maxDate)}}return t.\u0275fac=function(e){return new(e||t)(Ns(nU),Ns(xt(()=>dU)),Ns(_T,8),Ns(wT,8),Ns(os))},t.\u0275cmp=fe({type:t,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:qB,decls:9,vars:8,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","cdkAriaLive","polite",1,"mat-calendar-period-button",3,"click"],[1,"mat-calendar-arrow"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"]],template:function(t,e){1&t&&(ia(),js(0,"div",0),js(1,"div",1),js(2,"button",2),Xs("click",(function(){return e.currentPeriodClicked()})),ka(3),Hs(4,"div",3),zs(),Hs(5,"div",4),sa(6),js(7,"button",5),Xs("click",(function(){return e.previousClicked()})),zs(),js(8,"button",6),Xs("click",(function(){return e.nextClicked()})),zs(),zs(),zs()),2&t&&(Cr(2),Rs("aria-label",e.periodButtonLabel),Cr(1),Oa(" ",e.periodButtonText," "),Cr(1),va("mat-calendar-invert","month"!=e.calendar.currentView),Cr(3),Us("disabled",!e.previousEnabled()),Rs("aria-label",e.prevButtonLabel),Cr(1),Us("disabled",!e.nextEnabled()),Rs("aria-label",e.nextButtonLabel))},directives:[rF,WE],encapsulation:2,changeDetection:0}),t})(),dU=(()=>{class t{constructor(t,e,n,i){if(this._dateAdapter=e,this._dateFormats=n,this._changeDetectorRef=i,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new Fc,this.yearSelected=new Fc,this.monthSelected=new Fc,this._userSelection=new Fc,this.stateChanges=new C,!this._dateAdapter)throw eU("DateAdapter");if(!this._dateFormats)throw eU("MAT_DATE_FORMATS");this._intlChanges=t.changes.subscribe(()=>{i.markForCheck(),this.stateChanges.next()})}get startAt(){return this._startAt}set startAt(t){this._startAt=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}get selected(){return this._selected}set selected(t){this._selected=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}get minDate(){return this._minDate}set minDate(t){this._minDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}get maxDate(){return this._maxDate}set maxDate(t){this._maxDate=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}get activeDate(){return this._clampedActiveDate}set activeDate(t){this._clampedActiveDate=this._dateAdapter.clampDate(t,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(t){this._currentView=t,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck()}ngAfterContentInit(){this._calendarHeaderPortal=new GC(this.headerComponent||hU),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(t){const e=t.minDate||t.maxDate||t.dateFilter;if(e&&!e.firstChange){const t=this._getCurrentViewComponent();t&&(this._changeDetectorRef.detectChanges(),t._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell()}updateTodaysDate(){const t=this.currentView;let e;e="month"===t?this.monthView:"year"===t?this.yearView:this.multiYearView,e._init()}_dateSelected(t){t&&!this._dateAdapter.sameDate(t,this.selected)&&this.selectedChange.emit(t)}_yearSelectedInMultiYearView(t){this.yearSelected.emit(t)}_monthSelectedInYearView(t){this.monthSelected.emit(t)}_userSelected(){this._userSelection.emit()}_goToDateInView(t,e){this.activeDate=t,this.currentView=e}_getValidDateOrNull(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return t.\u0275fac=function(e){return new(e||t)(Ns(nU),Ns(_T,8),Ns(wT,8),Ns(os))},t.\u0275cmp=fe({type:t,selectors:[["mat-calendar"]],viewQuery:function(t,e){var n;1&t&&(Qc(oU,!0),Qc(uU,!0),Qc(sU,!0)),2&t&&($c(n=tu())&&(e.monthView=n.first),$c(n=tu())&&(e.yearView=n.first),$c(n=tu())&&(e.multiYearView=n.first))},hostAttrs:[1,"mat-calendar"],inputs:{startView:"startView",startAt:"startAt",selected:"selected",minDate:"minDate",maxDate:"maxDate",headerComponent:"headerComponent",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[Re],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","selectedChange","_userSelection",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","selectedChange","_userSelection"],[3,"activeDate","selected","dateFilter","maxDate","minDate","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","activeDateChange","yearSelected","selectedChange"]],template:function(t,e){1&t&&(Ls(0,$B,0,0,"ng-template",0),js(1,"div",1),Ls(2,YB,1,6,"mat-month-view",2),Ls(3,QB,1,5,"mat-year-view",3),Ls(4,XB,1,5,"mat-multi-year-view",4),zs()),2&t&&(Us("cdkPortalOutlet",e._calendarHeaderPortal),Cr(1),Us("ngSwitch",e.currentView),Cr(1),Us("ngSwitchCase","month"),Cr(1),Us("ngSwitchCase","year"),Cr(1),Us("ngSwitchCase","multi-year"))},directives:[QC,KE,bd,_d,oU,uU,sU],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;margin:5% calc(33% / 7 - 16px)}.mat-calendar-controls .mat-icon-button:hover .mat-button-focus-overlay{opacity:.04}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top-width:5px;border-top-style:solid;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}\n'],encapsulation:2,changeDetection:0}),t})();const pU={transformPanel:vx("transformPanel",[Ax("void",wx({opacity:0,transform:"scale(1, 0.8)"})),xx("void => enter",yx("120ms cubic-bezier(0, 0, 0.2, 1)",wx({opacity:1,transform:"scale(1, 1)"}))),xx("* => void",yx("100ms linear",wx({opacity:0})))]),fadeInCalendar:vx("fadeInCalendar",[Ax("void",wx({opacity:0})),Ax("enter",wx({opacity:1})),xx("void => *",yx("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let fU=0;const mU=new Bt("mat-datepicker-scroll-strategy"),gU={provide:mU,deps:[CE],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};class vU{constructor(t){this._elementRef=t}}const yU=gT(vU);let bU=(()=>{class t extends yU{constructor(t,e){super(t),this._changeDetectorRef=e,this._animationState="enter",this._animationDone=new C}ngAfterViewInit(){this._calendar.focusActiveCell()}ngOnDestroy(){this._animationDone.complete()}_startExitAnimation(){this._animationState="void",this._changeDetectorRef&&this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(os))},t.\u0275cmp=fe({type:t,selectors:[["mat-datepicker-content"]],viewQuery:function(t,e){var n;1&t&&Qc(dU,!0),2&t&&$c(n=tu())&&(e._calendar=n.first)},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(t,e){1&t&&Ks("@transformPanel.done",(function(){return e._animationDone.next()})),2&t&&(Fa("@transformPanel",e._animationState),va("mat-datepicker-content-touch",e.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[Ba],decls:1,vars:11,consts:[["cdkTrapFocus","",3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","selectedChange","yearSelected","monthSelected","_userSelection"]],template:function(t,e){1&t&&(js(0,"mat-calendar",0),Xs("selectedChange",(function(t){return e.datepicker.select(t)}))("yearSelected",(function(t){return e.datepicker._selectYear(t)}))("monthSelected",(function(t){return e.datepicker._selectMonth(t)}))("_userSelection",(function(){return e.datepicker.close()})),zs()),2&t&&Us("id",e.datepicker.id)("ngClass",e.datepicker.panelClass)("startAt",e.datepicker.startAt)("startView",e.datepicker.startView)("minDate",e.datepicker._minDate)("maxDate",e.datepicker._maxDate)("dateFilter",e.datepicker._dateFilter)("headerComponent",e.datepicker.calendarHeaderComponent)("selected",e.datepicker._selected)("dateClass",e.datepicker.dateClass)("@fadeInCalendar","enter")},directives:[dU,jE,ud],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content-touch{display:block;max-height:80vh;overflow:auto;margin:-24px}.mat-datepicker-content-touch .mat-calendar{min-width:250px;min-height:312px;max-width:750px;max-height:788px}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-calendar{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-calendar{width:80vw;height:100vw}}\n"],encapsulation:2,data:{animation:[pU.transformPanel,pU.fadeInCalendar]},changeDetection:0}),t})(),_U=(()=>{class t{constructor(t,e,n,i,r,o,s,a){if(this._dialog=t,this._overlay=e,this._ngZone=n,this._viewContainerRef=i,this._dateAdapter=o,this._dir=s,this._document=a,this.startView="month",this._touchUi=!1,this.yearSelected=new Fc,this.monthSelected=new Fc,this.openedStream=new Fc,this.closedStream=new Fc,this._opened=!1,this.id=`mat-datepicker-${fU++}`,this._validSelected=null,this._focusedElementBeforeOpen=null,this._inputSubscription=d.EMPTY,this._disabledChange=new C,this._selectedChanged=new C,!this._dateAdapter)throw eU("DateAdapter");this._scrollStrategy=r}get startAt(){return this._startAt||(this._datepickerInput?this._datepickerInput.value:null)}set startAt(t){this._startAt=this._getValidDateOrNull(this._dateAdapter.deserialize(t))}get color(){return this._color||(this._datepickerInput?this._datepickerInput._getThemePalette():void 0)}set color(t){this._color=t}get touchUi(){return this._touchUi}set touchUi(t){this._touchUi=Px(t)}get disabled(){return void 0===this._disabled&&this._datepickerInput?this._datepickerInput.disabled:!!this._disabled}set disabled(t){const e=Px(t);e!==this._disabled&&(this._disabled=e,this._disabledChange.next(e))}get opened(){return this._opened}set opened(t){t?this.open():this.close()}get _selected(){return this._validSelected}set _selected(t){this._validSelected=t}get _minDate(){return this._datepickerInput&&this._datepickerInput.min}get _maxDate(){return this._datepickerInput&&this._datepickerInput.max}get _dateFilter(){return this._datepickerInput&&this._datepickerInput._dateFilter}ngOnDestroy(){this._destroyPopup(),this.close(),this._inputSubscription.unsubscribe(),this._disabledChange.complete()}select(t){let e=this._selected;this._selected=t,this._dateAdapter.sameDate(e,this._selected)||this._selectedChanged.next(t)}_selectYear(t){this.yearSelected.emit(t)}_selectMonth(t){this.monthSelected.emit(t)}_registerInput(t){if(this._datepickerInput)throw Error("A MatDatepicker can only be associated with a single input.");this._datepickerInput=t,this._inputSubscription=this._datepickerInput._valueChange.subscribe(t=>this._selected=t)}open(){if(!this._opened&&!this.disabled){if(!this._datepickerInput)throw Error("Attempted to open an MatDatepicker with no associated input.");this._document&&(this._focusedElementBeforeOpen=this._document.activeElement),this.touchUi?this._openAsDialog():this._openAsPopup(),this._opened=!0,this.openedStream.emit()}}close(){if(!this._opened)return;if(this._popupComponentRef&&this._popupRef){const t=this._popupComponentRef.instance;t._startExitAnimation(),t._animationDone.pipe(af(1)).subscribe(()=>this._destroyPopup())}this._dialogRef&&(this._dialogRef.close(),this._dialogRef=null);const t=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(t)):t()}_openAsDialog(){this._dialogRef&&this._dialogRef.close(),this._dialogRef=this._dialog.open(bU,{direction:this._dir?this._dir.value:"ltr",viewContainerRef:this._viewContainerRef,panelClass:"mat-datepicker-dialog",hasBackdrop:!0,disableClose:!1,width:"",height:"",minWidth:"",minHeight:"",maxWidth:"80vw",maxHeight:"",position:{},autoFocus:!0,restoreFocus:!1}),this._dialogRef.afterClosed().subscribe(()=>this.close()),this._dialogRef.componentInstance.datepicker=this,this._dialogRef.componentInstance.color=this.color}_openAsPopup(){const t=new GC(bU,this._viewContainerRef);this._destroyPopup(),this._createPopup();const e=this._popupComponentRef=this._popupRef.attach(t);e.instance.datepicker=this,e.instance.color=this.color,this._ngZone.onStable.asObservable().pipe(af(1)).subscribe(()=>{this._popupRef.updatePosition()})}_createPopup(){const t=new aE({positionStrategy:this._createPopupPositionStrategy(),hasBackdrop:!0,backdropClass:"mat-overlay-transparent-backdrop",direction:this._dir,scrollStrategy:this._scrollStrategy(),panelClass:"mat-datepicker-popup"});this._popupRef=this._overlay.create(t),this._popupRef.overlayElement.setAttribute("role","dialog"),q(this._popupRef.backdropClick(),this._popupRef.detachments(),this._popupRef.keydownEvents().pipe(Hp(t=>27===t.keyCode||this._datepickerInput&&t.altKey&&38===t.keyCode))).subscribe(t=>{t&&t.preventDefault(),this.close()})}_destroyPopup(){this._popupRef&&(this._popupRef.dispose(),this._popupRef=this._popupComponentRef=null)}_createPopupPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition().withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])}_getValidDateOrNull(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}}return t.\u0275fac=function(e){return new(e||t)(Ns(sP),Ns(CE),Ns(Su),Ns(Sl),Ns(mU),Ns(_T,8),Ns(Xx,8),Ns(rh,8))},t.\u0275cmp=fe({type:t,selectors:[["mat-datepicker"]],inputs:{startView:"startView",startAt:"startAt",color:"color",touchUi:"touchUi",disabled:"disabled",opened:"opened",calendarHeaderComponent:"calendarHeaderComponent",panelClass:"panelClass",dateClass:"dateClass"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",openedStream:"opened",closedStream:"closed"},exportAs:["matDatepicker"],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})();const wU={provide:F_,useExisting:xt(()=>CU),multi:!0},AU={provide:Z_,useExisting:xt(()=>CU),multi:!0};class xU{constructor(t,e){this.target=t,this.targetElement=e,this.value=this.target.value}}let CU=(()=>{class t{constructor(t,e,n,i){if(this._elementRef=t,this._dateAdapter=e,this._dateFormats=n,this._formField=i,this.dateChange=new Fc,this.dateInput=new Fc,this._valueChange=new Fc,this._disabledChange=new Fc,this._onTouched=()=>{},this._cvaOnChange=()=>{},this._validatorOnChange=()=>{},this._datepickerSubscription=d.EMPTY,this._localeSubscription=d.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._minValidator=t=>{const e=this._getValidDateOrNull(this._dateAdapter.deserialize(t.value));return!this.min||!e||this._dateAdapter.compareDate(this.min,e)<=0?null:{matDatepickerMin:{min:this.min,actual:e}}},this._maxValidator=t=>{const e=this._getValidDateOrNull(this._dateAdapter.deserialize(t.value));return!this.max||!e||this._dateAdapter.compareDate(this.max,e)>=0?null:{matDatepickerMax:{max:this.max,actual:e}}},this._filterValidator=t=>{const e=this._getValidDateOrNull(this._dateAdapter.deserialize(t.value));return this._dateFilter&&e&&!this._dateFilter(e)?{matDatepickerFilter:!0}:null},this._validator=ew.compose([this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]),this._lastValueValid=!1,!this._dateAdapter)throw eU("DateAdapter");if(!this._dateFormats)throw eU("MAT_DATE_FORMATS");this._localeSubscription=e.localeChanges.subscribe(()=>{this.value=this.value})}set matDatepicker(t){t&&(this._datepicker=t,this._datepicker._registerInput(this),this._datepickerSubscription.unsubscribe(),this._datepickerSubscription=this._datepicker._selectedChanged.subscribe(t=>{this.value=t,this._cvaOnChange(t),this._onTouched(),this.dateInput.emit(new xU(this,this._elementRef.nativeElement)),this.dateChange.emit(new xU(this,this._elementRef.nativeElement))}))}set matDatepickerFilter(t){this._dateFilter=t,this._validatorOnChange()}get value(){return this._value}set value(t){t=this._dateAdapter.deserialize(t),this._lastValueValid=!t||this._dateAdapter.isValid(t),t=this._getValidDateOrNull(t);const e=this.value;this._value=t,this._formatValue(t),this._dateAdapter.sameDate(e,t)||this._valueChange.emit(t)}get min(){return this._min}set min(t){this._min=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._validatorOnChange()}get max(){return this._max}set max(t){this._max=this._getValidDateOrNull(this._dateAdapter.deserialize(t)),this._validatorOnChange()}get disabled(){return!!this._disabled}set disabled(t){const e=Px(t),n=this._elementRef.nativeElement;this._disabled!==e&&(this._disabled=e,this._disabledChange.emit(e)),e&&this._isInitialized&&n.blur&&n.blur()}ngAfterViewInit(){this._isInitialized=!0}ngOnDestroy(){this._datepickerSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this._valueChange.complete(),this._disabledChange.complete()}registerOnValidatorChange(t){this._validatorOnChange=t}validate(t){return this._validator?this._validator(t):null}getPopupConnectionElementRef(){return this.getConnectedOverlayOrigin()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}writeValue(t){this.value=t}registerOnChange(t){this._cvaOnChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_onKeydown(t){this._datepicker&&t.altKey&&40===t.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._datepicker.open(),t.preventDefault())}_onInput(t){const e=this._lastValueValid;let n=this._dateAdapter.parse(t,this._dateFormats.parse.dateInput);this._lastValueValid=!n||this._dateAdapter.isValid(n),n=this._getValidDateOrNull(n),this._dateAdapter.sameDate(n,this._value)?e!==this._lastValueValid&&this._validatorOnChange():(this._value=n,this._cvaOnChange(n),this._valueChange.emit(n),this.dateInput.emit(new xU(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new xU(this,this._elementRef.nativeElement))}_getThemePalette(){return this._formField?this._formField.color:void 0}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(t){this._elementRef.nativeElement.value=t?this._dateAdapter.format(t,this._dateFormats.display.dateInput):""}_getValidDateOrNull(t){return this._dateAdapter.isDateInstance(t)&&this._dateAdapter.isValid(t)?t:null}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(_T,8),Ns(wT,8),Ns(xB,8))},t.\u0275dir=_e({type:t,selectors:[["input","matDatepicker",""]],hostVars:5,hostBindings:function(t,e){1&t&&Xs("input",(function(t){return e._onInput(t.target.value)}))("change",(function(){return e._onChange()}))("blur",(function(){return e._onBlur()}))("keydown",(function(t){return e._onKeydown(t)})),2&t&&(La("disabled",e.disabled),Rs("aria-haspopup",e._datepicker?"dialog":null)("aria-owns",(null==e._datepicker?null:e._datepicker.opened)&&e._datepicker.id||null)("min",e.min?e._dateAdapter.toIso8601(e.min):null)("max",e.max?e._dateAdapter.toIso8601(e.max):null))},inputs:{value:"value",matDatepicker:"matDatepicker",matDatepickerFilter:"matDatepickerFilter",min:"min",max:"max",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},exportAs:["matDatepickerInput"],features:[Xa([wU,AU,{provide:RB,useExisting:t}])]}),t})(),EU=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","matDatepickerToggleIcon",""]]}),t})(),SU=(()=>{class t{constructor(t,e,n){this._intl=t,this._changeDetectorRef=e,this._stateChanges=d.EMPTY;const i=Number(n);this.tabIndex=i||0===i?i:null}get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(t){this._disabled=Px(t)}ngOnChanges(t){t.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(t){this.datepicker&&!this.disabled&&(this.datepicker.open(),t.stopPropagation())}_watchStateChanges(){const t=this.datepicker?this.datepicker._disabledChange:Op(),e=this.datepicker&&this.datepicker._datepickerInput?this.datepicker._datepickerInput._disabledChange:Op(),n=this.datepicker?q(this.datepicker.openedStream,this.datepicker.closedStream):Op();this._stateChanges.unsubscribe(),this._stateChanges=q(this._intl.changes,t,e,n).subscribe(()=>this._changeDetectorRef.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(Ns(nU),Ns(os),Bs("tabindex"))},t.\u0275cmp=fe({type:t,selectors:[["mat-datepicker-toggle"]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,EU,!0),2&t&&$c(i=tu())&&(e._customIcon=i.first)},viewQuery:function(t,e){var n;1&t&&Qc(KB,!0),2&t&&$c(n=tu())&&(e._button=n.first)},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:7,hostBindings:function(t,e){1&t&&Xs("focus",(function(){return e._button.focus()})),2&t&&(Rs("tabindex",e.disabled?null:-1),va("mat-datepicker-toggle-active",e.datepicker&&e.datepicker.opened)("mat-accent",e.datepicker&&"accent"===e.datepicker.color)("mat-warn",e.datepicker&&"warn"===e.datepicker.color))},inputs:{tabIndex:"tabIndex",disabled:"disabled",datepicker:["for","datepicker"],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[Re],ngContentSelectors:tU,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple","click"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(t,e){1&t&&(ia(JB),js(0,"button",0,1),Xs("click",(function(t){return e._open(t)})),Ls(2,ZB,2,0,"svg",2),sa(3),zs()),2&t&&(Us("disabled",e.disabled)("disableRipple",e.disableRipple),Rs("aria-haspopup",e.datepicker?"dialog":null)("aria-label",e._intl.openCalendarLabel)("tabindex",e.disabled?-1:e.tabIndex),Cr(2),Us("ngIf",!e._customIcon))},directives:[rF,md],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-datepicker-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-datepicker-toggle-default-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),MU=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[nU,gU],imports:[[Qd,oF,aP,SE,JE,XC],rC]}),t})();const TU=["fileDropRef"];function PU(t,e){1&t&&(js(0,"div"),ka(1,"Please tell us your country "),zs())}function kU(t,e){if(1&t&&(js(0,"div",46),Ls(1,PU,2,0,"div",36),js(2,"small",14),ka(3,"Tell us your country"),zs(),zs()),2&t){ea();const t=Fs(58);Cr(1),Us("ngIf",t.errors.required)}}function DU(t,e){1&t&&(js(0,"div"),ka(1,"Add a title to your submission "),zs())}function OU(t,e){if(1&t&&(js(0,"div",46),Ls(1,DU,2,0,"div",36),js(2,"small",14),ka(3,"What is the title of this submission?"),zs(),zs()),2&t){ea();const t=Fs(65);Cr(1),Us("ngIf",t.errors.required)}}function RU(t,e){1&t&&(js(0,"div"),ka(1,"Add a description to your submission "),zs())}function IU(t,e){if(1&t&&(js(0,"div",46),Ls(1,RU,2,0,"div",36),js(2,"small",14),ka(3,"Describe your submission in 150 words"),zs(),zs()),2&t){ea();const t=Fs(72);Cr(1),Us("ngIf",t.errors.required)}}function LU(t,e){1&t&&(js(0,"div"),ka(1,"Tell us challenges encountered in the process of taking this video/photo "),zs())}function FU(t,e){if(1&t&&(js(0,"div",46),Ls(1,LU,2,0,"div",36),js(2,"small",14),ka(3,"What are some of the challenges you encountered in the process of taking the photo(s)/video?"),zs(),zs()),2&t){ea();const t=Fs(6);Cr(1),Us("ngIf",t.errors.required)}}function NU(t,e){1&t&&(js(0,"div"),ka(1,"Tell us your experience in the process of taking this video/photo "),zs())}function BU(t,e){if(1&t&&(js(0,"div",46),Ls(1,NU,2,0,"div",36),js(2,"small",14),ka(3,"Describe your experience"),zs(),zs()),2&t){ea();const t=Fs(13);Cr(1),Us("ngIf",t.errors.required)}}function UU(t,e){1&t&&(js(0,"div"),ka(1,"Please describe to us your normal routine prior to Covid - 19 "),zs())}function VU(t,e){if(1&t&&(js(0,"div",46),Ls(1,UU,2,0,"div",36),zs()),2&t){ea();const t=Fs(20);Cr(1),Us("ngIf",t.errors.required)}}const jU=function(t){return{"is-invalid":t}};function zU(t,e){if(1&t){const t=$s();js(0,"div"),js(1,"div",10),js(2,"div",11),js(3,"label"),ka(4,"Challenges"),zs(),js(5,"textarea",47,48),Xs("ngModelChange",(function(e){return on(t),ea().extraDetails.challenges=e})),zs(),Ls(7,FU,4,1,"div",29),zs(),zs(),js(8,"div",10),js(9,"div",11),js(10,"label"),ka(11,"Experience"),zs(),js(12,"textarea",49,50),Xs("ngModelChange",(function(e){return on(t),ea().extraDetails.experience=e})),zs(),Ls(14,BU,4,1,"div",29),zs(),zs(),js(15,"div",10),js(16,"div",11),js(17,"label"),ka(18,"Prior to Covid - 19"),zs(),js(19,"textarea",51,52),Xs("ngModelChange",(function(e){return on(t),ea().extraDetails.lifeBefore=e})),zs(),Ls(21,VU,2,1,"div",29),js(22,"small",14),ka(23,"Please describe to us your normal routine prior to Covid - 19"),zs(),zs(),zs(),zs()}if(2&t){const t=Fs(6),e=Fs(13),n=Fs(20),i=ea(),r=Fs(83);Cr(5),Us("ngModel",i.extraDetails.challenges)("ngClass",Sc(9,jU,r.submitted&&t.invalid)),Cr(2),Us("ngIf",r.submitted&&t.invalid),Cr(5),Us("ngModel",i.extraDetails.experience)("ngClass",Sc(11,jU,r.submitted&&e.invalid)),Cr(2),Us("ngIf",r.submitted&&e.invalid),Cr(5),Us("ngModel",i.extraDetails.lifeBefore)("ngClass",Sc(13,jU,r.submitted&&n.invalid)),Cr(2),Us("ngIf",r.submitted&&n.invalid)}}let HU=(()=>{class t{constructor(t,e,n,i,r,o){this.snackBar=t,this.router=e,this.matDialog=n,this.fauth=i,this.storage=r,this.dbOperations=o,this.progress=0,this.durationInSeconds=5,this.artwork=new jb,this.extraDetails=new zb,this.artworks=[],this.submittedWorks=[],this.files=[],this.pdfs=[],this.uploadedDocuments=0,this.checkedTerms=!1,this.checkedPrivacy=!1,this.formWidth=100,this.answered=!1,this.currentUser="",this.disabled=!1,this.isLinear=!0,this.submit=!1,this.thirdMatStep="Interview",this.forwardText="Next"}onResize(t){let e=t.target.innerWidth;e>800&&(this.formWidth=80),e>1e3&&(this.formWidth=70),e>1200&&(this.formWidth=60)}getScreenSize(){let t=window.innerWidth;t>800&&(this.formWidth=80),t>1e3&&(this.formWidth=70),t>1200&&(this.formWidth=60)}ngOnInit(){this.getScreenSize(),this.getCurrentUser()}goBack(t){t.previous()}goForward(t){null!=this.artworkFile&&null!=this.consentForm&&t.next()}checkReadTermsValue(){console.log(this.checkedTerms),this.checkedTerms=!this.checkedTerms}checkReadPrivacy(){this.checkedPrivacy=!this.checkedPrivacy}getCurrentUser(){this.currentUser=localStorage.getItem("currentUser"),this.getSubmittedArtworks(this.currentUser),this.getArtistInterview(this.currentUser)}getSubmittedArtworks(t){this.dbOperations.getUserSubmittedArtworks(t).onSnapshot(t=>{t.forEach(t=>{const e=t.data();let n=Object.assign({id:t.id},e);this.submittedWorks.push(n)})})}getArtistInterview(t){this.dbOperations.interviewssCollection().ref.where("userId","==",t).onSnapshot(t=>{null!=t&&(t.empty||(this.thirdMatStep="Confirm Submission",this.answered=!0,this.submit=!0))})}onFileSelected(t){this.artworkFile=t.target.files[0],this.artworkFile.type.includes("video")||this.artworkFile.type.includes("image")&&this.files.push(this.artworkFile)}onSubjectConsentSelected(t){this.consentForm=t.target.files[0],console.log(this.consentForm+"subject form")}downloadConsentForm(){this.storage.ref("consent/PARTICIPANT CONSENT AND RELEASE FORM.pdf").getDownloadURL().subscribe(t=>{console.log(t),Object(FP.saveAs)(t,"subject-consent-form.pdf");var e=new XMLHttpRequest;e.responseType="blob",e.onload=function(t){var n=e.response;Object(FP.saveAs)(n,"PARTICIPANT CONSENT AND RELEASE FORM.pdf")}})}downloadArtistCOnsentForm(){this.storage.ref("consent/PARTICIPANT CONSENT AND RELEASE FORM.pdf").getDownloadURL().subscribe(t=>{console.log(t),Object(FP.saveAs)(t,"PARTICIPANT CONSENT AND RELEASE FORM.pdf");var e=new XMLHttpRequest;e.responseType="blob",e.onload=function(t){}})}OnDateChange(t){this.artwork.shotDate=t}onSubmit(){2==this.submittedWorks.length?window.alert("You have reached the maximum number of submissions"):this.submittedWorks.length<2&&(this.disabled=!0,this.checkedPrivacy&&this.checkReadTermsValue?this.dbOperations.uploadSubjectConsentForm(this.consentForm,this.artwork,this.artworkFile,this.extraDetails):window.alert("Confirm that you have read the Terms and Conditions"))}onFileDropped(t){this.prepareFilesList(t)}fileBrowseHandler(t){console.log("on dropped"+t.length),this.prepareFilesList(t)}deleteFile(t){this.files[t].progress<100?console.log("Upload in progress."):this.files.splice(t,1)}uploadFilesSimulator(t){t!==this.files.length&&(console.log("on dropped"+this.submittedWorks.length),this.artworks=this.dbOperations.latestArtWorks,console.log("on dropped"+this.files.length))}prepareFilesList(t){if(this.artworks.length+t.length>=10)window.confirm("You can only submit 10 pieces of artwork");else{for(const e of t)e.progress=0,this.files.push(e);this.fileDropEl.nativeElement.value="",this.uploadFilesSimulator(0)}}formatBytes(t,e=2){if(0===t)return"0 Bytes";const n=e<=0?0:e,i=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,i)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]}}return t.\u0275fac=function(e){return new(e||t)(Ns(EF),Ns(Wg),Ns(sP),Ns(a_),Ns(Ub),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-add-artworks"]],viewQuery:function(t,e){var n;1&t&&Qc(TU,!0),2&t&&$c(n=tu())&&(e.fileDropEl=n.first)},hostBindings:function(t,e){1&t&&Xs("resize",(function(t){return e.onResize(t)}),!1,Xn)},inputs:{progress:"progress"},decls:108,vars:29,consts:[[1,"add-artwork",3,"resize"],[1,"artwork-bg"],[1,"container-fluid"],[1,"artwork-form","py-5"],["ref","http",3,"includeSpinner"],[3,"linear"],["stepper",""],["firstForm","ngForm"],["label","Upload files",3,"stepControl"],[1,"artwork-type"],[1,"card","p-3","mt-3"],[1,"form-group"],["type","file","id","file","name","image","autocomplete","off",1,"form-control",3,"change"],["userPhoto",""],[1,"help-text"],[1,"pdf-consent","hand","p-2","mt-3","d-flex",3,"click"],["src","assets/images/pdf.png","alt",""],[1,"m-2"],[1,"move"],[1,"row"],[1,"col-6","mt-3"],["mat-button","",1,"btn",3,"click"],["secondForm","ngForm"],["label","Artwork Info",3,"stepControl"],["matInput","",1,"form-control",3,"matDatepicker","dateInput"],["matSuffix","",3,"for"],["picker",""],["type","text","name","place","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["place","ngModel"],["class","invalid-feedback",4,"ngIf"],["type","text","name","title","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["title","ngModel"],["type","text","name","description","maxlength","150","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["description","ngModel"],["thirdForm","ngForm"],[3,"label","stepControl"],[4,"ngIf"],[1,"confirm-terms","mt-3"],[1,"form-check"],[1,"form-check-label"],["type","checkbox","name","read","value","checked",1,"form-check-input",3,"change"],["type","checkbox","name","terms","value","checked",1,"form-check-input",3,"change"],[1,"next"],[1,"form-group","mt-3"],[1,"btn","btn-primary",3,"disabled","click"],["type","number","matInput","",3,"ngModel","ngModelChange"],[1,"invalid-feedback"],["maxlength","150","required","","name","challenges","id","challenges","rows","3",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["challenges","ngModel"],["maxlength","150","required","","name","experience","id","experience","rows","3",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["experience","ngModel"],["maxlength","150","required","","name","lifeBefore","id","lifeBefore","rows","3",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["lifeBefore","ngModel"]],template:function(t,e){if(1&t){const t=$s();js(0,"div",0),Xs("resize",(function(t){return e.onResize(t)}),!1,Xn),js(1,"div",1),js(2,"div",2),js(3,"div",3),Hs(4,"ngx-loading-bar",4),js(5,"mat-horizontal-stepper",5,6),js(7,"form",null,7),js(9,"mat-step",8),js(10,"div",9),js(11,"div",10),js(12,"div",11),js(13,"label"),ka(14,"Browse a photograph or video to submit"),zs(),js(15,"input",12,13),Xs("change",(function(t){return e.onFileSelected(t)})),zs(),js(17,"small",14),ka(18,"Select a photo or video from your device"),zs(),zs(),zs(),zs(),js(19,"div",10),js(20,"div",11),js(21,"input",12,13),Xs("change",(function(t){return e.onSubjectConsentSelected(t)})),zs(),js(23,"small",14),ka(24,"Please download, fill and upload the consent form"),zs(),js(25,"div",15),Xs("click",(function(){return e.downloadConsentForm()})),Hs(26,"img",16),js(27,"p",17),ka(28,"Download the participant consent and release form"),zs(),zs(),zs(),zs(),js(29,"div",18),js(30,"div",19),js(31,"div",20),js(32,"button",21),Xs("click",(function(){on(t);const n=Fs(6);return e.goBack(n)})),ka(33,"Back"),zs(),zs(),js(34,"div",20),js(35,"button",21),Xs("click",(function(){on(t);const n=Fs(6);return e.goForward(n)})),ka(36,"Next"),zs(),zs(),zs(),zs(),zs(),zs(),js(37,"form",null,22),js(39,"mat-step",23),js(40,"div",10),js(41,"div",11),js(42,"div"),js(43,"label"),ka(44,"Date Shot"),zs(),zs(),js(45,"mat-form-field"),js(46,"input",24),Xs("dateInput",(function(t){return e.OnDateChange(t.value)})),zs(),Hs(47,"mat-datepicker-toggle",25),Hs(48,"mat-datepicker",null,26),zs(),zs(),js(50,"div"),js(51,"small",14),ka(52,"Which date did you shoot this? "),zs(),zs(),zs(),js(53,"div",10),js(54,"div",11),js(55,"label"),ka(56,"Town/Country"),zs(),js(57,"input",27,28),Xs("ngModelChange",(function(t){return e.artwork.place=t})),zs(),Ls(59,kU,4,1,"div",29),zs(),zs(),js(60,"div",10),js(61,"div",11),js(62,"label"),ka(63,"Title"),zs(),js(64,"input",30,31),Xs("ngModelChange",(function(t){return e.artwork.title=t})),zs(),Ls(66,OU,4,1,"div",29),zs(),zs(),js(67,"div",10),js(68,"div",11),js(69,"label"),ka(70,"Description"),zs(),js(71,"input",32,33),Xs("ngModelChange",(function(t){return e.artwork.description=t})),zs(),Ls(73,IU,4,1,"div",29),zs(),zs(),js(74,"div",18),js(75,"div",19),js(76,"div",20),js(77,"button",21),Xs("click",(function(){on(t);const n=Fs(6);return e.goBack(n)})),ka(78,"Back"),zs(),zs(),js(79,"div",20),js(80,"button",21),Xs("click",(function(){on(t);const n=Fs(6);return e.goForward(n)})),ka(81),zs(),zs(),zs(),zs(),zs(),zs(),js(82,"form",null,34),js(84,"mat-step",35),Ls(85,zU,24,15,"div",36),js(86,"div",37),js(87,"div",2),js(88,"div",38),js(89,"p"),ka(90,"Please check the boxes below:"),zs(),js(91,"label",39),js(92,"input",40),Xs("change",(function(){return e.checkReadTermsValue()})),zs(),js(93,"p"),ka(94,"I have read the Submission Guidelines and Rules (including the copyright conditions) below and agree to the terms and conditions of the photo(s) and video call for submission."),zs(),zs(),zs(),js(95,"div",38),js(96,"label",39),js(97,"input",41),Xs("change",(function(){return e.checkReadPrivacy()})),zs(),js(98,"p"),ka(99,"I have read the Submission Guidelines and Rules (including the copyright conditions) below and agree to the terms and conditions of the photo(s) and video call for submission."),zs(),zs(),zs(),zs(),zs(),js(100,"div",42),js(101,"div",43),js(102,"button",44),Xs("click",(function(){return e.onSubmit()})),ka(103,"Proceed to submit"),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),js(104,"mat-form-field"),js(105,"mat-label"),ka(106,"Your submission is successful"),zs(),js(107,"input",45),Xs("ngModelChange",(function(t){return e.durationInSeconds=t})),zs(),zs(),zs()}if(2&t){const t=Fs(8),n=Fs(38),i=Fs(49),r=Fs(58),o=Fs(65),s=Fs(72),a=Fs(83);Cr(2),ga("width",e.formWidth,"%"),Cr(2),Us("includeSpinner",!1),Cr(1),Us("linear",e.isLinear),Cr(4),Us("stepControl",t),Cr(30),Us("stepControl",n),Cr(7),Us("matDatepicker",i),Cr(1),Us("for",i),Cr(10),Us("ngModel",e.artwork.place)("ngClass",Sc(23,jU,n.submitted&&r.invalid)),Cr(2),Us("ngIf",n.submitted&&r.invalid),Cr(5),Us("ngModel",e.artwork.title)("ngClass",Sc(25,jU,n.submitted&&o.invalid)),Cr(2),Us("ngIf",n.submitted&&o.invalid),Cr(5),Us("ngModel",e.artwork.description)("ngClass",Sc(27,jU,n.submitted&&s.invalid)),Cr(2),Us("ngIf",n.submitted&&s.invalid),Cr(8),Da(e.forwardText),Cr(3),aa("label",e.thirdMatStep),Us("stepControl",a),Cr(1),Us("ngIf",!e.answered),Cr(17),Us("disabled",e.disabled),Cr(5),Us("ngModel",e.durationInSeconds)}},directives:[NN,tA,Q_,Ww,IN,CB,BB,CU,SU,yB,_U,j_,oA,Y_,Jw,ud,md,pA,mB,lw],styles:[".add-artwork[_ngcontent-%COMP%]{min-height:100vh;max-height:100vh;background-image:url(/assets/images/gallery/sample/picture7.png);background-size:cover;background-repeat:no-repeat;background-attachment:fixed;overflow:auto}.add-artwork[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{margin-right:8px}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.8);height:100%;min-height:100vh}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%;height:100%}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .hand[_ngcontent-%COMP%]:hover{cursor:pointer;cursor:hand}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6);padding:1em;border:none;color:#f5f5f5;border-radius:1em}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.9);border-radius:.5em;border-color:teal;color:#fff}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:2em}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f5f5f5}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .pdf-consent[_ngcontent-%COMP%]{background-color:teal}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .pdf-consent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:teal;color:#fff;border:none;width:100%}"]}),t})(),GU=(()=>{class t{constructor(t,e){this.router=t,this.dbOperations=e}ngOnInit(){this.getAllExhibitions()}getAllExhibitions(){this.dbOperations.artworksCollection().snapshotChanges().subscribe(t=>{this.artworks=t.map(t=>{const e=t.payload.doc.data();return Object.assign({id:t.payload.doc.id},e)})})}navigateToFilterArtworks(){this.router.navigateByUrl("project/admin/filter-artworks")}navigateToScoringArtworks(){this.router.navigateByUrl("project/admin/score")}navigateToAllCurators(){this.router.navigateByUrl("project/admin/curators")}navigateToScoredArtworks(){this.router.navigateByUrl("project/admin/select-artworks")}navigateToArtist(){this.router.navigateByUrl("project/admin/artists")}navigateToMessages(){this.router.navigateByUrl("project/admin/messages")}navigateToSubmissions(){this.router.navigateByUrl("project/admin/submissions")}navigateToFollowUp(){this.router.navigateByUrl("project/admin/follow-up")}navigateToExhibit(){this.router.navigateByUrl("project/admin/exhibit")}}return t.\u0275fac=function(e){return new(e||t)(Ns(Wg),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-admin"]],decls:84,vars:0,consts:[[1,"admin","py-5","mt-5"],[1,"container"],[1,"row"],[1,"col-md-3","mt-3"],[1,"card","p-3"],[1,"title"],[1,"description","p-3"],[1,"description-tag"],[1,"btn","px-5","btn-primary",3,"click"],[1,"row","mt-5"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),js(2,"div",2),js(3,"div",3),js(4,"div",4),js(5,"div"),js(6,"h5",5),ka(7,"Filtering"),zs(),zs(),zs(),js(8,"div",6),js(9,"p",7),ka(10," Filter submitted artworks"),zs(),js(11,"button",8),Xs("click",(function(){return e.navigateToFilterArtworks()})),ka(12,"View"),zs(),zs(),zs(),js(13,"div",3),js(14,"div",4),js(15,"div"),js(16,"h5",5),ka(17,"Scoring"),zs(),zs(),zs(),js(18,"div",6),js(19,"p",7),ka(20," Still to score"),zs(),js(21,"button",8),Xs("click",(function(){return e.navigateToScoringArtworks()})),ka(22,"View"),zs(),zs(),zs(),js(23,"div",3),js(24,"div",4),js(25,"div"),js(26,"h5",5),ka(27,"Scored"),zs(),zs(),zs(),js(28,"div",6),js(29,"p",7),ka(30," Scored artworks"),zs(),js(31,"button",8),Xs("click",(function(){return e.navigateToScoredArtworks()})),ka(32,"View"),zs(),zs(),zs(),js(33,"div",3),js(34,"div",4),js(35,"div"),js(36,"h5",5),ka(37,"Follow Up"),zs(),zs(),zs(),js(38,"div",6),js(39,"p",7),ka(40," Follow up artworks"),zs(),js(41,"button",8),Xs("click",(function(){return e.navigateToFollowUp()})),ka(42,"View"),zs(),zs(),zs(),zs(),js(43,"div",9),js(44,"div",3),js(45,"div",4),js(46,"div"),js(47,"h5",5),ka(48,"Exhibit"),zs(),zs(),zs(),js(49,"div",6),js(50,"p",7),ka(51,"Exhibit in the Virtual Gallery"),zs(),js(52,"button",8),Xs("click",(function(){return e.navigateToExhibit()})),ka(53,"View"),zs(),zs(),zs(),js(54,"div",3),js(55,"div",4),js(56,"div"),js(57,"h5",5),ka(58,"Artist"),zs(),zs(),zs(),js(59,"div",6),js(60,"p",7),ka(61," View all the artist"),zs(),js(62,"button",8),Xs("click",(function(){return e.navigateToArtist()})),ka(63,"View"),zs(),zs(),zs(),js(64,"div",3),js(65,"div",4),js(66,"div"),js(67,"h5",5),ka(68,"Messages"),zs(),zs(),zs(),js(69,"div",6),js(70,"p",7),ka(71," View all messages"),zs(),js(72,"button",8),Xs("click",(function(){return e.navigateToMessages()})),ka(73,"View"),zs(),zs(),zs(),js(74,"div",3),js(75,"div",4),js(76,"div"),js(77,"h5",5),ka(78,"Submissions"),zs(),zs(),zs(),js(79,"div",6),js(80,"p",7),ka(81," Artists by submissions"),zs(),js(82,"button",8),Xs("click",(function(){return e.navigateToSubmissions()})),ka(83,"View"),zs(),zs(),zs(),zs(),zs(),zs())},styles:[".admin[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%;height:20em}.admin[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .admin[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{text-align:center}.admin[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-style:bolder}"]}),t})();const WU=["*"];function qU(t,e){if(1&t){const t=$s();js(0,"div",2),Xs("click",(function(){return on(t),ea()._onBackdropClicked()})),zs()}2&t&&va("mat-drawer-shown",ea()._isShowingBackdrop())}function $U(t,e){1&t&&(js(0,"mat-drawer-content"),sa(1,2),zs())}const YU=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],QU=["mat-drawer","mat-drawer-content","*"];function XU(t,e){if(1&t){const t=$s();js(0,"div",2),Xs("click",(function(){return on(t),ea()._onBackdropClicked()})),zs()}2&t&&va("mat-drawer-shown",ea()._isShowingBackdrop())}function KU(t,e){1&t&&(js(0,"mat-sidenav-content",3),sa(1,2),zs())}const ZU=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],JU=["mat-sidenav","mat-sidenav-content","*"],tV=".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n",eV={transformDrawer:vx("transform",[Ax("open, open-instant",wx({transform:"none",visibility:"visible"})),Ax("void",wx({"box-shadow":"none",visibility:"hidden"})),xx("void => open-instant",yx("0ms")),xx("void <=> open, open-instant => void",yx("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])};function nV(t){throw Error(`A drawer was already declared for 'position="${t}"'`)}const iV=new Bt("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),rV=new Bt("MAT_DRAWER_CONTAINER");let oV=(()=>{class t extends nC{constructor(t,e,n,i,r){super(n,i,r),this._changeDetectorRef=t,this._container=e}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return t.\u0275fac=function(e){return new(e||t)(Ns(os),Ns(xt(()=>aV)),Ns(tl),Ns(eC),Ns(Su))},t.\u0275cmp=fe({type:t,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,e){2&t&&ga("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[Ba],ngContentSelectors:WU,decls:1,vars:0,template:function(t,e){1&t&&(ia(),sa(0))},encapsulation:2,changeDetection:0}),t})(),sV=(()=>{class t{constructor(t,e,n,i,r,o,s){this._elementRef=t,this._focusTrapFactory=e,this._focusMonitor=n,this._platform=i,this._ngZone=r,this._doc=o,this._container=s,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new C,this._animationEnd=new C,this._animationState="void",this.openedChange=new Fc(!0),this._destroyed=new C,this.onPositionChanged=new Fc,this._modeChanged=new C,this.openedChange.subscribe(t=>{t?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._restoreFocus()}),this._ngZone.runOutsideAngular(()=>{AA(this._elementRef.nativeElement,"keydown").pipe(Hp(t=>27===t.keyCode&&!this.disableClose&&!ZC(t)),px(this._destroyed)).subscribe(t=>this._ngZone.run(()=>{this.close(),t.stopPropagation(),t.preventDefault()}))}),this._animationEnd.pipe(c_((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{const{fromState:e,toState:n}=t;(0===n.indexOf("open")&&"void"===e||"void"===n&&0===e.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!=this._position&&(this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=Px(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"!==this.mode:t}set autoFocus(t){this._autoFocus=Px(t)}get opened(){return this._opened}set opened(t){this.toggle(Px(t))}get _openedStream(){return this.openedChange.pipe(Hp(t=>t),F(()=>{}))}get openedStart(){return this._animationStarted.pipe(Hp(t=>t.fromState!==t.toState&&0===t.toState.indexOf("open")),F(()=>{}))}get _closedStream(){return this.openedChange.pipe(Hp(t=>!t),F(()=>{}))}get closedStart(){return this._animationStarted.pipe(Hp(t=>t.fromState!==t.toState&&"void"===t.toState),F(()=>{}))}_takeFocus(){this.autoFocus&&this._focusTrap&&this._focusTrap.focusInitialElementWhenReady().then(t=>{t||"function"!=typeof this._elementRef.nativeElement.focus||this._elementRef.nativeElement.focus()})}_restoreFocus(){if(!this.autoFocus)return;const t=this._doc&&this._doc.activeElement;t&&this._elementRef.nativeElement.contains(t)&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur()),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}toggle(t=!this.opened,e="program"){return this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=e):(this._animationState="void",this._restoreFocus()),this._updateFocusTrapState(),new Promise(t=>{this.openedChange.pipe(af(1)).subscribe(e=>t(e?"open":"close"))})}get _width(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_animationStartListener(t){this._animationStarted.next(t)}_animationDoneListener(t){this._animationEnd.next(t)}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(VE),Ns(QE),Ns(Vx),Ns(Su),Ns(rh,8),Ns(rV,8))},t.\u0275cmp=fe({type:t,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,e){1&t&&Ks("@transform.start",(function(t){return e._animationStartListener(t)}))("@transform.done",(function(t){return e._animationDoneListener(t)})),2&t&&(Rs("align",null),Fa("@transform",e._animationState),va("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",onPositionChanged:"positionChanged",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart"},exportAs:["matDrawer"],ngContentSelectors:WU,decls:2,vars:0,consts:[[1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(ia(),js(0,"div",0),sa(1),zs())},encapsulation:2,data:{animation:[eV.transformDrawer]},changeDetection:0}),t})(),aV=(()=>{class t{constructor(t,e,n,i,r,o=!1,s){this._dir=t,this._element=e,this._ngZone=n,this._changeDetectorRef=i,this._animationMode=s,this._drawers=new Bc,this.backdropClick=new Fc,this._destroyed=new C,this._doCheckSubject=new C,this._contentMargins={left:null,right:null},this._contentMarginChanges=new C,t&&t.change.pipe(px(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),r.change().pipe(px(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=o}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=Px(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:Px(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(wf(this._allDrawers),px(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(t=>!t._container||t._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(wf(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._doCheckSubject.pipe(ME(10),px(this._destroyed)).subscribe(()=>this.updateContentMargins())}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,e=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._width;else if("push"==this._left.mode){const n=this._left._width;t+=n,e-=n}if(this._right&&this._right.opened)if("side"==this._right.mode)e+=this._right._width;else if("push"==this._right.mode){const n=this._right._width;e+=n,t-=n}t=t||null,e=e||null,t===this._contentMargins.left&&e===this._contentMargins.right||(this._contentMargins={left:t,right:e},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(Hp(t=>t.fromState!==t.toState),px(this._drawers.changes)).subscribe(t=>{"open-instant"!==t.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(px(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t&&t.onPositionChanged.pipe(px(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.asObservable().pipe(af(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(px(q(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const e=this._element.nativeElement.classList,n="mat-drawer-container-has-open";t?e.add(n):e.remove(n)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?(null!=this._end&&nV("end"),this._end=t):(null!=this._start&&nV("start"),this._start=t)}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawer()}_closeModalDrawer(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t.close())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return t.\u0275fac=function(e){return new(e||t)(Ns(Xx,8),Ns(tl),Ns(Su),Ns(os),Ns(iC),Ns(iV),Ns(cT,8))},t.\u0275cmp=fe({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(t,e,n){var i;1&t&&(Kc(n,oV,!0),Kc(n,sV,!0)),2&t&&($c(i=tu())&&(e._content=i.first),$c(i=tu())&&(e._allDrawers=i))},viewQuery:function(t,e){var n;1&t&&Qc(oV,!0),2&t&&$c(n=tu())&&(e._userContent=n.first)},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,e){2&t&&va("mat-drawer-container-explicit-backdrop",e._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Xa([{provide:rV,useExisting:t}])],ngContentSelectors:QU,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,e){1&t&&(ia(YU),Ls(0,qU,1,2,"div",0),sa(1),sa(2,1),Ls(3,$U,2,0,"mat-drawer-content",1)),2&t&&(Us("ngIf",e.hasBackdrop),Cr(3),Us("ngIf",!e._content))},directives:[md,oV],styles:[tV],encapsulation:2,changeDetection:0}),t})(),lV=(()=>{class t extends oV{constructor(t,e,n,i,r){super(t,e,n,i,r)}}return t.\u0275fac=function(e){return new(e||t)(Ns(os),Ns(xt(()=>hV)),Ns(tl),Ns(eC),Ns(Su))},t.\u0275cmp=fe({type:t,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,e){2&t&&ga("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[Ba],ngContentSelectors:WU,decls:1,vars:0,template:function(t,e){1&t&&(ia(),sa(0))},encapsulation:2,changeDetection:0}),t})(),cV=(()=>{class t extends sV{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=Px(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=kx(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=kx(t)}}return t.\u0275fac=function(e){return uV(e||t)},t.\u0275cmp=fe({type:t,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,e){2&t&&(Rs("align",null),ga("top",e.fixedInViewport?e.fixedTopGap:null,"px")("bottom",e.fixedInViewport?e.fixedBottomGap:null,"px"),va("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened)("mat-sidenav-fixed",e.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[Ba],ngContentSelectors:WU,decls:2,vars:0,consts:[[1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(ia(),js(0,"div",0),sa(1),zs())},encapsulation:2,data:{animation:[eV.transformDrawer]},changeDetection:0}),t})();const uV=gi(cV);let hV=(()=>{class t extends aV{}return t.\u0275fac=function(e){return dV(e||t)},t.\u0275cmp=fe({type:t,selectors:[["mat-sidenav-container"]],contentQueries:function(t,e,n){var i;1&t&&(Kc(n,lV,!0),Kc(n,cV,!0)),2&t&&($c(i=tu())&&(e._content=i.first),$c(i=tu())&&(e._allDrawers=i))},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,e){2&t&&va("mat-drawer-container-explicit-backdrop",e._backdropOverride)},exportAs:["matSidenavContainer"],features:[Xa([{provide:rV,useExisting:t}]),Ba],ngContentSelectors:JU,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(t,e){1&t&&(ia(ZU),Ls(0,XU,1,2,"div",0),sa(1),sa(2,1),Ls(3,KU,2,0,"mat-sidenav-content",1)),2&t&&(Us("ngIf",e.hasBackdrop),Cr(3),Us("ngIf",!e._content))},directives:[md,lV,nC],styles:[tV],encapsulation:2,changeDetection:0}),t})();const dV=gi(hV);let pV=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd,fT,jx,rC],rC,fT]}),t})();const fV=["*"],mV=[[["","mat-grid-avatar",""],["","matGridAvatar",""]],[["","mat-line",""],["","matLine",""]],"*"],gV=["[mat-grid-avatar], [matGridAvatar]","[mat-line], [matLine]","*"],vV=".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-figure{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}\n",yV=new Bt("MAT_GRID_LIST");let bV=(()=>{class t{constructor(t,e){this._element=t,this._gridList=e,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(t){this._rowspan=Math.round(kx(t))}get colspan(){return this._colspan}set colspan(t){this._colspan=Math.round(kx(t))}_setStyle(t,e){this._element.nativeElement.style[t]=e}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(yV,8))},t.\u0275cmp=fe({type:t,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(t,e){2&t&&Rs("rowspan",e.rowspan)("colspan",e.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:fV,decls:2,vars:0,consts:[[1,"mat-figure"]],template:function(t,e){1&t&&(ia(),js(0,"figure",0),sa(1),zs())},styles:[vV],encapsulation:2,changeDetection:0}),t})(),_V=(()=>{class t{constructor(t){this._element=t}ngAfterContentInit(){IT(this._lines,this._element)}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl))},t.\u0275cmp=fe({type:t,selectors:[["mat-grid-tile-header"],["mat-grid-tile-footer"]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,RT,!0),2&t&&$c(i=tu())&&(e._lines=i)},ngContentSelectors:gV,decls:4,vars:0,consts:[[1,"mat-grid-list-text"]],template:function(t,e){1&t&&(ia(mV),sa(0),js(1,"div",0),sa(2,1),zs(),sa(3,2))},encapsulation:2,changeDetection:0}),t})(),wV=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","mat-grid-avatar",""],["","matGridAvatar",""]],hostAttrs:[1,"mat-grid-avatar"]}),t})(),AV=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["mat-grid-tile-header"]],hostAttrs:[1,"mat-grid-tile-header"]}),t})(),xV=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["mat-grid-tile-footer"]],hostAttrs:[1,"mat-grid-tile-footer"]}),t})();class CV{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(t=>this._trackTile(t))}_trackTile(t){const e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new EV(this.rowIndex,e)}_findMatchingGap(t){if(t>this.tracker.length)throw Error(`mat-grid-list: tile with colspan ${t} is wider than `+`grid with cols="${this.tracker.length}".`);let e=-1,n=-1;do{this.columnIndex+t>this.tracker.length?(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),n=this._findGapEndIndex(e)):(e=this.tracker.indexOf(0,this.columnIndex),-1!=e?(n=this._findGapEndIndex(e),this.columnIndex=e+1):(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),n=this._findGapEndIndex(e)))}while(n-e<t||0==n);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(0!=this.tracker[e])return e;return this.tracker.length}_markTilePosition(t,e){for(let n=0;n<e.colspan;n++)this.tracker[t+n]=e.rowspan}}class EV{constructor(t,e){this.row=t,this.col=e}}const SV=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class MV{constructor(){this._rows=0,this._rowspan=0}init(t,e,n,i){this._gutterSize=OV(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=n,this._direction=i}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return 0===e?"0":DV(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,n){let i=100/this._cols,r=(this._cols-1)/this._cols;this.setColStyles(t,n,i,r),this.setRowStyles(t,e,i,r)}setColStyles(t,e,n,i){let r=this.getBaseTileSize(n,i);t._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(r,e)),t._setStyle("width",DV(this.getTileSize(r,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}}class TV extends MV{constructor(t){super(),this.fixedRowHeight=t}init(t,e,n,i){if(super.init(t,e,n,i),this.fixedRowHeight=OV(this.fixedRowHeight),!SV.test(this.fixedRowHeight))throw Error(`Invalid value "${this.fixedRowHeight}" set as rowHeight.`)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",DV(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",DV(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}class PV extends MV{constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,n,i){this.baseTileHeight=this.getBaseTileSize(n/this.rowHeightRatio,i),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",DV(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",DV(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(t=>{t._setStyle("marginTop",null),t._setStyle("paddingTop",null)})}_parseRatio(t){const e=t.split(":");if(2!==e.length)throw Error(`mat-grid-list: invalid ratio given for row-height: "${t}"`);this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}}class kV extends MV{setRowStyles(t,e){let n=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);t._setStyle("top",this.getTilePosition(n,e)),t._setStyle("height",DV(this.getTileSize(n,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(t=>{t._setStyle("top",null),t._setStyle("height",null)})}}function DV(t){return`calc(${t})`}function OV(t){return t.match(/([A-Za-z%]+)$/)?t:`${t}px`}let RV=(()=>{class t{constructor(t,e){this._element=t,this._dir=e,this._gutter="1px"}get cols(){return this._cols}set cols(t){this._cols=Math.max(1,Math.round(kx(t)))}get gutterSize(){return this._gutter}set gutterSize(t){this._gutter=`${null==t?"":t}`}get rowHeight(){return this._rowHeight}set rowHeight(t){const e=`${null==t?"":t}`;e!==this._rowHeight&&(this._rowHeight=e,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){if(!this.cols)throw Error('mat-grid-list: must pass in number of columns. Example: <mat-grid-list cols="3">')}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(t){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===t?new kV:t&&t.indexOf(":")>-1?new PV(t):new TV(t)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new CV);const t=this._tileCoordinator,e=this._tiles.filter(t=>!t._gridList||t._gridList===this),n=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,e),this._tileStyler.init(this.gutterSize,t,this.cols,n),e.forEach((e,n)=>{const i=t.positions[n];this._tileStyler.setStyle(e,i.row,i.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(t){t&&(this._element.nativeElement.style[t[0]]=t[1])}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(Xx,8))},t.\u0275cmp=fe({type:t,selectors:[["mat-grid-list"]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,bV,!0),2&t&&$c(i=tu())&&(e._tiles=i)},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(t,e){2&t&&Rs("cols",e.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[Xa([{provide:yV,useExisting:t}])],ngContentSelectors:fV,decls:2,vars:0,template:function(t,e){1&t&&(ia(),js(0,"div"),sa(1),zs())},styles:[vV],encapsulation:2,changeDetection:0}),t})(),IV=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[FT,fT],FT,fT]}),t})(),LV=(()=>{class t{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=Px(t)}get inset(){return this._inset}set inset(t){this._inset=Px(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,e){2&t&&(Rs("aria-orientation",e.vertical?"vertical":"horizontal"),va("mat-divider-vertical",e.vertical)("mat-divider-horizontal",!e.vertical)("mat-divider-inset",e.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,e){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),t})(),FV=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[fT],fT]}),t})();const NV=["*"],BV='.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0;position:relative}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0;position:relative}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n',UV=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],VV=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],jV=["text"];function zV(t,e){if(1&t&&Hs(0,"mat-pseudo-checkbox",5),2&t){const t=ea();Us("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}const HV=["*",[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]]],GV=["*","[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]"];class WV{}const qV=mT(vT(WV));class $V{}const YV=vT($V);let QV=(()=>{class t extends qV{constructor(){super(...arguments),this._stateChanges=new C}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(e){return XV(e||t)},t.\u0275cmp=fe({type:t,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[Ba,Re],ngContentSelectors:NV,decls:1,vars:0,template:function(t,e){1&t&&(ia(),sa(0))},styles:[BV],encapsulation:2,changeDetection:0}),t})();const XV=gi(QV);let KV=(()=>{class t extends qV{constructor(t){super(),this._elementRef=t,this._stateChanges=new C,"action-list"===this._getListType()&&t.nativeElement.classList.add("mat-action-list")}_getListType(){const t=this._elementRef.nativeElement.nodeName.toLowerCase();return"mat-list"===t?"list":"mat-action-list"===t?"action-list":null}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl))},t.\u0275cmp=fe({type:t,selectors:[["mat-list"],["mat-action-list"]],hostAttrs:[1,"mat-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matList"],features:[Ba,Re],ngContentSelectors:NV,decls:1,vars:0,template:function(t,e){1&t&&(ia(),sa(0))},styles:[BV],encapsulation:2,changeDetection:0}),t})(),ZV=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),t})(),JV=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),t})(),tj=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["","mat-subheader",""],["","matSubheader",""]],hostAttrs:[1,"mat-subheader"]}),t})(),ej=(()=>{class t extends YV{constructor(t,e,n,i){super(),this._element=t,this._isInteractiveList=!1,this._destroyed=new C,this._disabled=!1,this._isInteractiveList=!!(n||i&&"action-list"===i._getListType()),this._list=n||i;const r=this._getHostElement();"button"!==r.nodeName.toLowerCase()||r.hasAttribute("type")||r.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(px(this._destroyed)).subscribe(()=>{e.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(t){this._disabled=Px(t)}ngAfterContentInit(){IT(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(os),Ns(QV,8),Ns(KV,8))},t.\u0275cmp=fe({type:t,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(t,e,n){var i;1&t&&(Kc(n,ZV,!0),Kc(n,JV,!0),Kc(n,RT,!0)),2&t&&($c(i=tu())&&(e._avatar=i.first),$c(i=tu())&&(e._icon=i.first),$c(i=tu())&&(e._lines=i))},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(t,e){2&t&&va("mat-list-item-disabled",e.disabled)("mat-list-item-avatar",e._avatar||e._icon)("mat-list-item-with-avatar",e._avatar||e._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[Ba],ngContentSelectors:VV,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(t,e){1&t&&(ia(UV),js(0,"div",0),Hs(1,"div",1),sa(2),js(3,"div",2),sa(4,1),zs(),sa(5,2),zs()),2&t&&(Cr(1),Us("matRippleTrigger",e._getHostElement())("matRippleDisabled",e._isRippleDisabled()))},directives:[GT],encapsulation:2,changeDetection:0}),t})();class nj{}const ij=vT(nj);class rj{}const oj=vT(rj),sj={provide:F_,useExisting:xt(()=>cj),multi:!0};class aj{constructor(t,e){this.source=t,this.option=e}}let lj=(()=>{class t extends oj{constructor(t,e,n){super(),this._element=t,this._changeDetector=e,this.selectionList=n,this._selected=!1,this._disabled=!1,this._hasFocus=!1,this.checkboxPosition="after",this._inputsInitialized=!1}get color(){return this._color||this.selectionList.color}set color(t){this._color=t}get value(){return this._value}set value(t){this.selected&&t!==this.value&&this._inputsInitialized&&(this.selected=!1),this._value=t}get disabled(){return this._disabled||this.selectionList&&this.selectionList.disabled}set disabled(t){const e=Px(t);e!==this._disabled&&(this._disabled=e,this._changeDetector.markForCheck())}get selected(){return this.selectionList.selectedOptions.isSelected(this)}set selected(t){const e=Px(t);e!==this._selected&&(this._setSelected(e),this.selectionList._reportValueChange())}ngOnInit(){const t=this.selectionList;t._value&&t._value.some(e=>t.compareWith(e,this._value))&&this._setSelected(!0);const e=this._selected;Promise.resolve().then(()=>{(this._selected||e)&&(this.selected=!0,this._changeDetector.markForCheck())}),this._inputsInitialized=!0}ngAfterContentInit(){IT(this._lines,this._element)}ngOnDestroy(){this.selected&&Promise.resolve().then(()=>{this.selected=!1});const t=this._hasFocus,e=this.selectionList._removeOptionFromList(this);t&&e&&e.focus()}toggle(){this.selected=!this.selected}focus(){this._element.nativeElement.focus()}getLabel(){return this._text&&this._text.nativeElement.textContent||""}_isRippleDisabled(){return this.disabled||this.disableRipple||this.selectionList.disableRipple}_handleClick(){this.disabled||!this.selectionList.multiple&&this.selected||(this.toggle(),this.selectionList._emitChangeEvent(this))}_handleFocus(){this.selectionList._setFocusedOption(this),this._hasFocus=!0}_handleBlur(){this.selectionList._onTouched(),this._hasFocus=!1}_getHostElement(){return this._element.nativeElement}_setSelected(t){return t!==this._selected&&(this._selected=t,t?this.selectionList.selectedOptions.select(this):this.selectionList.selectedOptions.deselect(this),this._changeDetector.markForCheck(),!0)}_markForCheck(){this._changeDetector.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(os),Ns(xt(()=>cj)))},t.\u0275cmp=fe({type:t,selectors:[["mat-list-option"]],contentQueries:function(t,e,n){var i;1&t&&(Kc(n,ZV,!0),Kc(n,JV,!0),Kc(n,RT,!0)),2&t&&($c(i=tu())&&(e._avatar=i.first),$c(i=tu())&&(e._icon=i.first),$c(i=tu())&&(e._lines=i))},viewQuery:function(t,e){var n;1&t&&Qc(jV,!0),2&t&&$c(n=tu())&&(e._text=n.first)},hostAttrs:["role","option",1,"mat-list-item","mat-list-option","mat-focus-indicator"],hostVars:15,hostBindings:function(t,e){1&t&&Xs("focus",(function(){return e._handleFocus()}))("blur",(function(){return e._handleBlur()}))("click",(function(){return e._handleClick()})),2&t&&(Rs("aria-selected",e.selected)("aria-disabled",e.disabled)("tabindex",-1),va("mat-list-item-disabled",e.disabled)("mat-list-item-with-avatar",e._avatar||e._icon)("mat-primary","primary"===e.color)("mat-accent","primary"!==e.color&&"warn"!==e.color)("mat-warn","warn"===e.color)("mat-list-single-selected-option",e.selected&&!e.selectionList.multiple))},inputs:{disableRipple:"disableRipple",checkboxPosition:"checkboxPosition",color:"color",value:"value",selected:"selected",disabled:"disabled"},exportAs:["matListOption"],features:[Ba],ngContentSelectors:GV,decls:7,vars:5,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[3,"state","disabled",4,"ngIf"],[1,"mat-list-text"],["text",""],[3,"state","disabled"]],template:function(t,e){1&t&&(ia(HV),js(0,"div",0),Hs(1,"div",1),Ls(2,zV,1,2,"mat-pseudo-checkbox",2),js(3,"div",3,4),sa(5),zs(),sa(6,1),zs()),2&t&&(va("mat-list-item-content-reverse","after"==e.checkboxPosition),Cr(1),Us("matRippleTrigger",e._getHostElement())("matRippleDisabled",e._isRippleDisabled()),Cr(1),Us("ngIf",e.selectionList.multiple))},directives:[GT,md,qT],encapsulation:2,changeDetection:0}),t})(),cj=(()=>{class t extends ij{constructor(t,e,n){super(),this._element=t,this._changeDetector=n,this._multiple=!0,this._contentInitialized=!1,this.selectionChange=new Fc,this.tabIndex=0,this.color="accent",this.compareWith=(t,e)=>t===e,this._disabled=!1,this.selectedOptions=new Jx(this._multiple),this._tabIndex=-1,this._onChange=t=>{},this._destroyed=new C,this._onTouched=()=>{}}get disabled(){return this._disabled}set disabled(t){this._disabled=Px(t),this._markOptionsForCheck()}get multiple(){return this._multiple}set multiple(t){const e=Px(t);if(e!==this._multiple){if(Oi()&&this._contentInitialized)throw new Error("Cannot change `multiple` mode of mat-selection-list after initialization.");this._multiple=e,this.selectedOptions=new Jx(this._multiple,this.selectedOptions.selected)}}ngAfterContentInit(){this._contentInitialized=!0,this._keyManager=new LE(this.options).withWrap().withTypeAhead().skipPredicate(()=>!1).withAllowedModifierKeys(["shiftKey"]),this._value&&this._setOptionsFromValues(this._value),this._keyManager.tabOut.pipe(px(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.options.changes.pipe(wf(null),px(this._destroyed)).subscribe(()=>{this._updateTabIndex()}),this.selectedOptions.changed.pipe(px(this._destroyed)).subscribe(t=>{if(t.added)for(let e of t.added)e.selected=!0;if(t.removed)for(let e of t.removed)e.selected=!1})}ngOnChanges(t){const e=t.disableRipple,n=t.color;(e&&!e.firstChange||n&&!n.firstChange)&&this._markOptionsForCheck()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0}focus(t){this._element.nativeElement.focus(t)}selectAll(){this._setAllOptionsSelected(!0)}deselectAll(){this._setAllOptionsSelected(!1)}_setFocusedOption(t){this._keyManager.updateActiveItem(t)}_removeOptionFromList(t){const e=this._getOptionIndex(t);return e>-1&&this._keyManager.activeItemIndex===e&&(e>0?this._keyManager.updateActiveItem(e-1):0===e&&this.options.length>1&&this._keyManager.updateActiveItem(Math.min(e+1,this.options.length-1))),this._keyManager.activeItem}_keydown(t){const e=t.keyCode,n=this._keyManager,i=n.activeItemIndex,r=ZC(t);switch(e){case 32:case 13:r||n.isTyping()||(this._toggleFocusedOption(),t.preventDefault());break;case 36:case 35:r||(36===e?n.setFirstItemActive():n.setLastItemActive(),t.preventDefault());break;default:if(65===e&&this.multiple&&ZC(t,"ctrlKey")&&!n.isTyping()){const e=this.options.some(t=>!t.disabled&&!t.selected);this._setAllOptionsSelected(e,!0),t.preventDefault()}else n.onKeydown(t)}this.multiple&&(38===e||40===e)&&t.shiftKey&&n.activeItemIndex!==i&&this._toggleFocusedOption()}_reportValueChange(){if(this.options&&!this._isDestroyed){const t=this._getSelectedOptionValues();this._onChange(t),this._value=t}}_emitChangeEvent(t){this.selectionChange.emit(new aj(this,t))}_onFocus(){const t=this._keyManager.activeItemIndex;t&&-1!==t?this._keyManager.setActiveItem(t):this._keyManager.setFirstItemActive()}writeValue(t){this._value=t,this.options&&this._setOptionsFromValues(t||[])}setDisabledState(t){this.disabled=t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}_setOptionsFromValues(t){this.options.forEach(t=>t._setSelected(!1)),t.forEach(t=>{const e=this.options.find(e=>!e.selected&&this.compareWith(e.value,t));e&&e._setSelected(!0)})}_getSelectedOptionValues(){return this.options.filter(t=>t.selected).map(t=>t.value)}_toggleFocusedOption(){let t=this._keyManager.activeItemIndex;if(null!=t&&this._isValidIndex(t)){let e=this.options.toArray()[t];!e||e.disabled||!this._multiple&&e.selected||(e.toggle(),this._emitChangeEvent(e))}}_setAllOptionsSelected(t,e){let n=!1;this.options.forEach(i=>{e&&i.disabled||!i._setSelected(t)||(n=!0)}),n&&this._reportValueChange()}_isValidIndex(t){return t>=0&&t<this.options.length}_getOptionIndex(t){return this.options.toArray().indexOf(t)}_markOptionsForCheck(){this.options&&this.options.forEach(t=>t._markForCheck())}_allowFocusEscape(){this._tabIndex=-1,setTimeout(()=>{this._tabIndex=0,this._changeDetector.markForCheck()})}_updateTabIndex(){this._tabIndex=0===this.options.length?-1:0}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Bs("tabindex"),Ns(os))},t.\u0275cmp=fe({type:t,selectors:[["mat-selection-list"]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,lj,!0),2&t&&$c(i=tu())&&(e.options=i)},hostAttrs:["role","listbox",1,"mat-selection-list","mat-list-base"],hostVars:3,hostBindings:function(t,e){1&t&&Xs("focus",(function(){return e._onFocus()}))("blur",(function(){return e._onTouched()}))("keydown",(function(t){return e._keydown(t)})),2&t&&Rs("aria-multiselectable",e.multiple)("aria-disabled",e.disabled.toString())("tabindex",e._tabIndex)},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex",color:"color",compareWith:"compareWith",disabled:"disabled",multiple:"multiple"},outputs:{selectionChange:"selectionChange"},exportAs:["matSelectionList"],features:[Xa([sj]),Ba,Re],ngContentSelectors:NV,decls:1,vars:0,template:function(t,e){1&t&&(ia(),sa(0))},styles:[BV],encapsulation:2,changeDetection:0}),t})(),uj=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[FT,WT,fT,$T,Qd],FT,fT,$T,FV]}),t})();const hj=["*",[["mat-toolbar-row"]]],dj=["*","mat-toolbar-row"];class pj{constructor(t){this._elementRef=t}}const fj=gT(pj);let mj=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=_e({type:t,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),t})(),gj=(()=>{class t extends fj{constructor(t,e,n){super(t),this._platform=e,this._document=n}ngAfterViewInit(){Oi()&&this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length&&Array.from(this._elementRef.nativeElement.childNodes).filter(t=>!(t.classList&&t.classList.contains("mat-toolbar-row"))).filter(t=>t.nodeType!==(this._document?this._document.COMMENT_NODE:8)).some(t=>!(!t.textContent||!t.textContent.trim()))&&function(){throw Error("MatToolbar: Attempting to combine different toolbar modes. Either specify multiple `<mat-toolbar-row>` elements explicitly or just place content inside of a `<mat-toolbar>` for a single row.")}()}}return t.\u0275fac=function(e){return new(e||t)(Ns(tl),Ns(Vx),Ns(rh))},t.\u0275cmp=fe({type:t,selectors:[["mat-toolbar"]],contentQueries:function(t,e,n){var i;1&t&&Kc(n,mj,!0),2&t&&$c(i=tu())&&(e._toolbarRows=i)},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,e){2&t&&va("mat-toolbar-multiple-rows",e._toolbarRows.length>0)("mat-toolbar-single-row",0===e._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Ba],ngContentSelectors:dj,decls:2,vars:0,template:function(t,e){1&t&&(ia(hj),sa(0),sa(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}.mat-toolbar-multiple-rows{min-height:64px}.mat-toolbar-row,.mat-toolbar-single-row{height:64px}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:56px}.mat-toolbar-row,.mat-toolbar-single-row{height:56px}}\n"],encapsulation:2,changeDetection:0}),t})(),vj=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[fT],fT]}),t})(),yj=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-tips"]],decls:2,vars:0,template:function(t,e){1&t&&(js(0,"p"),ka(1,"tips works!"),zs())},styles:[""]}),t})();function bj(t,e){if(1&t&&(js(0,"div",3),Hs(1,"img",4),zs()),2&t){const t=ea();Cr(1),aa("src",t.work.url,rr)}}function _j(t,e){if(1&t){const t=$s();js(0,"div",3),js(1,"vg-player",5),Xs("onPlayerReady",(function(e){return on(t),ea().onPlayerReady(e)})),Hs(2,"vg-buffering"),js(3,"vg-controls"),Hs(4,"vg-play-pause"),Hs(5,"vg-time-display",6),js(6,"vg-scrub-bar"),Hs(7,"vg-scrub-bar-current-time"),Hs(8,"vg-scrub-bar-buffering-time"),zs(),Hs(9,"vg-time-display",7),Hs(10,"vg-mute"),Hs(11,"vg-volume"),Hs(12,"vg-fullscreen"),zs(),Hs(13,"video",8,9),zs(),zs()}if(2&t){const t=Fs(14),e=ea();Cr(13),Us("vgMedia",t)("src",e.video,rr)}}let wj=(()=>{class t{constructor(){this.video=""}ngOnInit(){"video"===this.work.type&&(this.video=this.work.url,console.log(this.video+"work"))}onPlayerReady(t){this.api=t,this.api.getDefaultMedia().subscriptions.loadedMetadata.subscribe(this.playVideo.bind(this))}playVideo(){this.api.pause()}onMouseOver(){this.api.play()}onMouseOut(){this.api.pause()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-artwork-item"]],inputs:{work:"work"},decls:4,vars:2,consts:[[1,"artwork-item"],[1,"container-fluid","p-0"],["class","card",4,"ngIf"],[1,"card"],["alt","",1,"img-fluid","artwork-image",3,"src"],[3,"onPlayerReady"],["vgProperty","current","vgFormat","mm:ss"],["vgProperty","total","vgFormat","mm:ss"],["id","singleVideo","preload","auto","crossorigin","",3,"vgMedia","src"],["media",""]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),Ls(2,bj,2,1,"div",2),Ls(3,_j,15,2,"div",2),zs(),zs()),2&t&&(Cr(2),Us("ngIf","image"==e.work.type),Cr(1),Us("ngIf","video"==e.work.type))},directives:[md,IA,NA,YA,nx,ZA,JA,ax,ox,ix,QA,rx,RA],styles:["vg-player[_ngcontent-%COMP%]{width:100%}vg-player[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{height:200px;margin:0 auto}.artwork-item[_ngcontent-%COMP%]{height:200px}.artwork-item[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{text-align:center;background-color:#000}.artwork-item[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px}"]}),t})();class Aj{constructor(){this.firstName=null,this.lastName=null,this.phoneNumber=null,this.email=null,this.password=null,this.profileImage=null,this.curatorId=null,this.role=null,this.authorizorId=null}}let xj=(()=>{class t{constructor(t){this.dbOperations=t,this.curator=new Aj}ngOnInit(){}onFileSelected(t){this.file=t.target.files[0],console.log(this.file)}onSubmit(t){this.createCuratorProfile(this.file),t.reset()}createCuratorProfile(t){this.dbOperations.getCurrentUser().subscribe(t=>{t?(this.curator.authorizorId=t.uid,this.curator.curatorId=Date.now+"",console.log("AUTHSTATE USER",t.uid),this.dbOperations.createCurator(this.curator,this.file)):console.log("AUTHSTATE USER EMPTY",t)},t=>{console.log("Please try again")})}}return t.\u0275fac=function(e){return new(e||t)(Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-add-curator-modal"]],decls:59,vars:6,consts:[[1,"create-profile","container"],[1,"profile-form"],[3,"ngSubmit"],["userForm","ngForm"],[1,"card","p-3","mt-5"],[1,"card"],[1,"container-fluid","p-0"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["type","text","name","firstName","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","lastName","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","file","name","profileImage","required","",1,"form-control",3,"change"],["userPhoto",""],["type","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","phoneNumber","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","role","required","",1,"form-control",3,"ngModel","ngModelChange"],["value","approve-content"],["value","select-content"],["type","password","name","password","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"next"],[1,"form-group","mb-0"],["type","submit",1,"btn","btn-light"]],template:function(t,e){if(1&t){const t=$s();js(0,"div",0),js(1,"div",1),js(2,"form",2,3),Xs("ngSubmit",(function(){on(t);const n=Fs(3);return e.onSubmit(n)})),js(4,"div",4),js(5,"div",5),js(6,"div",6),js(7,"div",7),js(8,"div",8),js(9,"div",9),js(10,"label"),ka(11,"First Name"),zs(),js(12,"input",10),Xs("ngModelChange",(function(t){return e.curator.firstName=t})),zs(),zs(),zs(),js(13,"div",8),js(14,"div",9),js(15,"label"),ka(16,"Last Name"),zs(),js(17,"input",11),Xs("ngModelChange",(function(t){return e.curator.lastName=t})),zs(),zs(),zs(),zs(),zs(),zs(),zs(),js(18,"div",4),js(19,"div",5),js(20,"div",9),js(21,"label"),ka(22,"Profile Image"),zs(),js(23,"input",12,13),Xs("change",(function(t){return e.onFileSelected(t)})),zs(),zs(),zs(),zs(),js(25,"div",4),js(26,"div",5),js(27,"div",9),js(28,"label"),ka(29,"Email"),zs(),js(30,"input",14),Xs("ngModelChange",(function(t){return e.curator.email=t})),zs(),zs(),zs(),zs(),js(31,"div",4),js(32,"div",5),js(33,"div",9),js(34,"label"),ka(35,"Phone Number"),zs(),js(36,"input",15),Xs("ngModelChange",(function(t){return e.curator.phoneNumber=t})),zs(),zs(),zs(),zs(),js(37,"div",4),js(38,"div",5),js(39,"div",9),js(40,"label"),ka(41,"Role"),zs(),js(42,"select",16),Xs("ngModelChange",(function(t){return e.curator.role=t})),js(43,"option",17),ka(44,"Approve"),zs(),js(45,"option",18),ka(46,"Select"),zs(),zs(),zs(),zs(),zs(),js(47,"div",4),js(48,"div",5),js(49,"div",9),js(50,"label"),ka(51,"Password"),zs(),js(52,"input",19),Xs("ngModelChange",(function(t){return e.curator.password=t})),zs(),zs(),zs(),zs(),js(53,"div",4),js(54,"div",20),js(55,"div",21),js(56,"button",22),js(57,"strong"),ka(58,"Create Curator Profile"),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs()}2&t&&(Cr(12),Us("ngModel",e.curator.firstName),Cr(5),Us("ngModel",e.curator.lastName),Cr(13),Us("ngModel",e.curator.email),Cr(6),Us("ngModel",e.curator.phoneNumber),Cr(6),Us("ngModel",e.curator.role),Cr(10),Us("ngModel",e.curator.password))},directives:[tA,Q_,Ww,j_,oA,Y_,Jw,bw,_w,Cw],styles:[""]}),t})();function Cj(t,e){if(1&t){const t=$s();js(0,"app-artwork-item",4),Xs("click",(function(){on(t);const n=e.$implicit;return ea().getCurrentUserUID(n.id)})),zs()}2&t&&Us("work",e.$implicit)}let Ej=(()=>{class t{constructor(t,e,n,i){this.ngZone=t,this.router=e,this.firestore=n,this.dbOperations=i,this.artworks=[],this.loading=!1,this.currentUser=""}ngOnInit(){this.currentUser=localStorage.getItem("currentUser")}ngAfterViewInit(){this.getAdminRole()}getArchivedArtWorks(t){t.includes("moderator")?this.dbOperations.artworksCollection().snapshotChanges().subscribe(t=>{this.artworks=t.map(t=>{const e=t.payload.doc.data(),n=t.payload.doc.id;return console.log(Object.assign({},e)),Object.assign({id:n},e)})}):t.includes("admin")?this.dbOperations.artworksCollection().ref.where("status","==","approved").where("scored","==","scored").onSnapshot(t=>{t.docs.forEach(t=>{const e=t.data();this.artworks.push(e)})}):this.dbOperations.artworksCollection().ref.where("status","==","featured").onSnapshot(t=>{t.forEach(t=>{const e=t.data();let n=Object.assign({id:t.id},e);this.artworks.push(n)})})}getCurrentUserUID(t){this.dbOperations.getCurrentUser().subscribe(e=>{e?(this.checkIfUserIsAdmin(e.uid,t),console.log("AUTHSTATE USER",e.uid)):console.log("AUTHSTATE USER EMPTY",e)},t=>{console.log("Please try again")})}checkIfUserIsAdmin(t,e){this.dbOperations.usersCollectionById(t).onSnapshot(t=>{null!=t&&t.forEach(t=>{const n=t.data();let i=Object.assign({},n);console.log(i.role);let r=i.role;this.ngZone.run(()=>{r.includes("artist")?this.router.navigateByUrl("/project/admin/artworks/"+e):this.router.navigateByUrl("/project/admin/scores/"+e)})})})}getAdminRole(){this.dbOperations.usersCollection().ref.where("userId","==",this.currentUser).onSnapshot(t=>{t.docs.forEach(t=>{const e=t.data();console.log("sign in trial "+e.userId);let n=e.role;this.ngZone.run(()=>{this.getArchivedArtWorks(n)})})})}}return t.\u0275fac=function(e){return new(e||t)(Ns(Su),Ns(Wg),Ns(n_),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-artworks"]],decls:4,vars:1,consts:[[1,"artworks"],[1,"container-fluid"],[1,"row"],["class","col-xs-12 col-sm-6 col-md-4 col-lg-4 col-xl-3 mt-3",3,"work","click",4,"ngFor","ngForOf"],[1,"col-xs-12","col-sm-6","col-md-4","col-lg-4","col-xl-3","mt-3",3,"work","click"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),js(2,"div",2),Ls(3,Cj,1,1,"app-artwork-item",3),zs(),zs(),zs()),2&t&&(Cr(3),Us("ngForOf",e.artworks))},directives:[pd,wj],styles:[".artworks[_ngcontent-%COMP%]{min-height:100vh;height:100%}"]}),t})();class Sj{constructor(){this.technique=new Tj,this.creativity=new Pj,this.wowFactor=new kj,this.vStory=new Rj,this.vCreativity=new Dj,this.vEdit=new Ij,this.vTechnical=new Oj}}class Mj{constructor(){this.vStory=new Rj,this.vCreativity=new Dj,this.vEdit=new Ij,this.vTechnical=new Oj}}class Tj{constructor(){this.composition=new Lj,this.lighting=new Lj,this.clarity=new Lj}}class Pj{constructor(){this.theme=new Lj,this.uniqueness=new Lj,this.message=new Lj,this.impression=new Lj}}class kj{constructor(){this.inspirational=new Lj,this.impact=new Lj,this.details=new Lj}}class Dj{constructor(){this.useofequipments=new Lj,this.useoftechniques=new Lj}}class Oj{constructor(){this.composition=new Lj,this.stability=new Lj,this.lighting=new Lj,this.audioClarity=new Lj,this.pictureClarity=new Lj}}class Rj{constructor(){this.message=new Lj}}class Ij{constructor(){this.scene=new Lj,this.execution=new Lj}}class Lj{}function Fj(t,e){if(1&t&&(js(0,"div",26),Hs(1,"img",27),zs()),2&t){const t=ea();Cr(1),aa("src",t.work.url,rr)}}function Nj(t,e){if(1&t){const t=$s();js(0,"div",26),js(1,"vg-player",28),Xs("onPlayerReady",(function(e){return on(t),ea().onPlayerReady(e)})),Hs(2,"vg-buffering"),js(3,"vg-controls"),Hs(4,"vg-play-pause"),Hs(5,"vg-playback-button"),Hs(6,"vg-time-display",29),js(7,"vg-scrub-bar"),Hs(8,"vg-scrub-bar-current-time"),Hs(9,"vg-scrub-bar-buffering-time"),zs(),Hs(10,"vg-time-display",30),Hs(11,"vg-mute"),Hs(12,"vg-volume"),Hs(13,"vg-fullscreen"),zs(),Hs(14,"video",31,32),zs(),zs()}if(2&t){const t=Fs(15),e=ea();Cr(14),Us("vgMedia",t)("src",e.video,rr)}}function Bj(t,e){if(1&t){const t=$s();js(0,"div",33),js(1,"form",34,35),Xs("ngSubmit",(function(){on(t);const e=Fs(2);return ea().onSubmit(e)})),js(3,"div",15),js(4,"h3"),ka(5,"TECHNIQUE"),zs(),js(6,"table"),js(7,"tr"),Hs(8,"th"),js(9,"th",36),ka(10,"2"),zs(),js(11,"th",36),ka(12,"4"),zs(),js(13,"th",36),ka(14,"6"),zs(),js(15,"th",36),ka(16,"8"),zs(),js(17,"th",36),ka(18,"10"),zs(),zs(),js(19,"tr"),js(20,"td"),ka(21,"Composition"),zs(),js(22,"td",36),js(23,"input",37),Xs("ngModelChange",(function(e){return on(t),ea().composition.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(24,"td",36),js(25,"input",38),Xs("ngModelChange",(function(e){return on(t),ea().composition.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(26,"td",36),js(27,"input",39),Xs("ngModelChange",(function(e){return on(t),ea().composition.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(28,"td",36),js(29,"input",40),Xs("ngModelChange",(function(e){return on(t),ea().composition.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(30,"td",36),js(31,"input",41),Xs("ngModelChange",(function(e){return on(t),ea().composition.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),js(32,"tr"),js(33,"td"),ka(34,"Lighting"),zs(),js(35,"td",36),js(36,"input",42),Xs("ngModelChange",(function(e){return on(t),ea().lighting.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(37,"td",36),js(38,"input",43),Xs("ngModelChange",(function(e){return on(t),ea().lighting.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(39,"td",36),js(40,"input",44),Xs("ngModelChange",(function(e){return on(t),ea().lighting.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(41,"td",36),js(42,"input",45),Xs("ngModelChange",(function(e){return on(t),ea().lighting.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(43,"td",36),js(44,"input",46),Xs("ngModelChange",(function(e){return on(t),ea().lighting.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),js(45,"tr"),js(46,"td"),ka(47,"Clarity"),zs(),js(48,"td",36),js(49,"input",47),Xs("ngModelChange",(function(e){return on(t),ea().clarity.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(50,"td",36),js(51,"input",48),Xs("ngModelChange",(function(e){return on(t),ea().clarity.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(52,"td",36),js(53,"input",49),Xs("ngModelChange",(function(e){return on(t),ea().clarity.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(54,"td",36),js(55,"input",50),Xs("ngModelChange",(function(e){return on(t),ea().clarity.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(56,"td",36),js(57,"input",51),Xs("ngModelChange",(function(e){return on(t),ea().clarity.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),zs(),zs(),js(58,"div",15),js(59,"h3"),ka(60,"CREATIVITY"),zs(),js(61,"table"),js(62,"tr"),Hs(63,"th"),js(64,"th",36),ka(65,"2"),zs(),js(66,"th",36),ka(67,"4"),zs(),js(68,"th",36),ka(69,"6"),zs(),js(70,"th",36),ka(71,"8"),zs(),js(72,"th",36),ka(73,"10"),zs(),zs(),js(74,"tr"),js(75,"td"),ka(76,"Theme"),zs(),js(77,"td",36),js(78,"input",52),Xs("ngModelChange",(function(e){return on(t),ea().theme.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(79,"td",36),js(80,"input",53),Xs("ngModelChange",(function(e){return on(t),ea().theme.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(81,"td",36),js(82,"input",54),Xs("ngModelChange",(function(e){return on(t),ea().theme.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(83,"td",36),js(84,"input",55),Xs("ngModelChange",(function(e){return on(t),ea().theme.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(85,"td",36),js(86,"input",56),Xs("ngModelChange",(function(e){return on(t),ea().theme.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),js(87,"tr"),js(88,"td"),ka(89,"Uniqueness"),zs(),js(90,"td",36),js(91,"input",57),Xs("ngModelChange",(function(e){return on(t),ea().uniqueness.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(92,"td",36),js(93,"input",57),Xs("ngModelChange",(function(e){return on(t),ea().uniqueness.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(94,"td",36),js(95,"input",57),Xs("ngModelChange",(function(e){return on(t),ea().uniqueness.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(96,"td",36),js(97,"input",57),Xs("ngModelChange",(function(e){return on(t),ea().uniqueness.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(98,"td",36),js(99,"input",57),Xs("ngModelChange",(function(e){return on(t),ea().uniqueness.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),js(100,"tr"),js(101,"td"),ka(102,"Message"),zs(),js(103,"td",36),js(104,"input",58),Xs("ngModelChange",(function(e){return on(t),ea().message.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(105,"td",36),js(106,"input",59),Xs("ngModelChange",(function(e){return on(t),ea().message.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(107,"td",36),js(108,"input",60),Xs("ngModelChange",(function(e){return on(t),ea().message.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(109,"td",36),js(110,"input",61),Xs("ngModelChange",(function(e){return on(t),ea().message.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(111,"td",36),js(112,"input",62),Xs("ngModelChange",(function(e){return on(t),ea().message.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),js(113,"tr"),js(114,"td"),ka(115,"Impression"),zs(),js(116,"td",36),js(117,"input",63),Xs("ngModelChange",(function(e){return on(t),ea().impression.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(118,"td",36),js(119,"input",64),Xs("ngModelChange",(function(e){return on(t),ea().impression.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(120,"td",36),js(121,"input",65),Xs("ngModelChange",(function(e){return on(t),ea().impression.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(122,"td",36),js(123,"input",66),Xs("ngModelChange",(function(e){return on(t),ea().impression.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(124,"td",36),js(125,"input",67),Xs("ngModelChange",(function(e){return on(t),ea().impression.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),zs(),zs(),js(126,"div",15),js(127,"h3"),ka(128,"WOW FACTOR"),zs(),js(129,"table"),js(130,"tr"),Hs(131,"th"),js(132,"th",36),ka(133,"2"),zs(),js(134,"th",36),ka(135,"4"),zs(),js(136,"th",36),ka(137,"6"),zs(),js(138,"th",36),ka(139,"8"),zs(),js(140,"th",36),ka(141,"10"),zs(),zs(),js(142,"tr"),js(143,"td"),ka(144,"Inspirational"),zs(),js(145,"td",36),js(146,"input",68),Xs("ngModelChange",(function(e){return on(t),ea().inspirational.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(147,"td",36),js(148,"input",69),Xs("ngModelChange",(function(e){return on(t),ea().inspirational.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(149,"td",36),js(150,"input",70),Xs("ngModelChange",(function(e){return on(t),ea().inspirational.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(151,"td",36),js(152,"input",71),Xs("ngModelChange",(function(e){return on(t),ea().inspirational.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(153,"td",36),js(154,"input",72),Xs("ngModelChange",(function(e){return on(t),ea().inspirational.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),js(155,"tr"),js(156,"td"),ka(157,"Impact"),zs(),js(158,"td",36),js(159,"input",73),Xs("ngModelChange",(function(e){return on(t),ea().impact.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(160,"td",36),js(161,"input",74),Xs("ngModelChange",(function(e){return on(t),ea().impact.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(162,"td",36),js(163,"input",75),Xs("ngModelChange",(function(e){return on(t),ea().impact.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(164,"td",36),js(165,"input",76),Xs("ngModelChange",(function(e){return on(t),ea().impact.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(166,"td",36),js(167,"input",77),Xs("ngModelChange",(function(e){return on(t),ea().impact.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),js(168,"tr"),js(169,"td"),ka(170,"Details"),zs(),js(171,"td",36),js(172,"input",78),Xs("ngModelChange",(function(e){return on(t),ea().details.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(173,"td",36),js(174,"input",79),Xs("ngModelChange",(function(e){return on(t),ea().details.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(175,"td",36),js(176,"input",80),Xs("ngModelChange",(function(e){return on(t),ea().details.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(177,"td",36),js(178,"input",81),Xs("ngModelChange",(function(e){return on(t),ea().details.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(179,"td",36),js(180,"input",82),Xs("ngModelChange",(function(e){return on(t),ea().details.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),zs(),zs(),js(181,"div",83),js(182,"div",84),js(183,"div",85),js(184,"button",86),ka(185,"Submit Scores"),Hs(186,"strong"),zs(),zs(),zs(),zs(),zs(),zs()}if(2&t){const t=ea();Cr(23),Us("ngModel",t.composition.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.composition.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.composition.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.composition.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.composition.excellent)("value",t.excellent)("checked",!1),Cr(5),Us("ngModel",t.lighting.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.lighting.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.lighting.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.lighting.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.lighting.excellent)("value",t.excellent)("checked",!1),Cr(5),Us("ngModel",t.clarity.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.clarity.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.clarity.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.clarity.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.clarity.excellent)("value",t.excellent)("checked",!1),Cr(21),Us("ngModel",t.theme.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.theme.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.theme.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.theme.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.theme.excellent)("value",t.excellent)("checked",!1),Cr(5),Us("ngModel",t.uniqueness.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.uniqueness.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.uniqueness.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.uniqueness.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.uniqueness.excellent)("value",t.excellent)("checked",!1),Cr(5),Us("ngModel",t.message.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.message.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.message.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.message.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.message.excellent)("value",t.excellent)("checked",!1),Cr(5),Us("ngModel",t.impression.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.impression.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.impression.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.impression.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.impression.excellent)("value",t.excellent)("checked",!1),Cr(21),Us("ngModel",t.inspirational.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.inspirational.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.inspirational.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.inspirational.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.inspirational.excellent)("value",t.excellent)("checked",!1),Cr(5),Us("ngModel",t.impact.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.impact.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.impact.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.impact.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.impact.excellent)("value",t.excellent)("checked",!1),Cr(5),Us("ngModel",t.details.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.details.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.details.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.details.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.details.excellent)("value",t.excellent)("checked",!1)}}function Uj(t,e){if(1&t){const t=$s();js(0,"div",87),js(1,"form",34,88),Xs("ngSubmit",(function(){on(t);const e=Fs(2);return ea().onSubmit(e)})),js(3,"div",15),js(4,"h3"),ka(5,"TECHNICAL"),zs(),js(6,"table"),js(7,"tr"),Hs(8,"th"),js(9,"th",36),ka(10,"2"),zs(),js(11,"th",36),ka(12,"4"),zs(),js(13,"th",36),ka(14,"6"),zs(),js(15,"th",36),ka(16,"8"),zs(),js(17,"th",36),ka(18,"10"),zs(),zs(),js(19,"tr"),js(20,"td"),ka(21,"Picture Clarity"),zs(),js(22,"td",36),js(23,"input",37),Xs("ngModelChange",(function(e){return on(t),ea().composition.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(24,"td",36),js(25,"input",38),Xs("ngModelChange",(function(e){return on(t),ea().composition.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(26,"td",36),js(27,"input",39),Xs("ngModelChange",(function(e){return on(t),ea().composition.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(28,"td",36),js(29,"input",40),Xs("ngModelChange",(function(e){return on(t),ea().composition.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(30,"td",36),js(31,"input",41),Xs("ngModelChange",(function(e){return on(t),ea().composition.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),js(32,"tr"),js(33,"td"),ka(34,"Picture Clarity"),zs(),js(35,"td",36),js(36,"input",89),Xs("ngModelChange",(function(e){return on(t),ea().pictureClarity.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(37,"td",36),js(38,"input",90),Xs("ngModelChange",(function(e){return on(t),ea().pictureClarity.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(39,"td",36),js(40,"input",91),Xs("ngModelChange",(function(e){return on(t),ea().pictureClarity.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(41,"td",36),js(42,"input",92),Xs("ngModelChange",(function(e){return on(t),ea().pictureClarity.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(43,"td",36),js(44,"input",93),Xs("ngModelChange",(function(e){return on(t),ea().pictureClarity.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),js(45,"tr"),js(46,"td"),ka(47,"Audio Clarity"),zs(),js(48,"td",36),js(49,"input",94),Xs("ngModelChange",(function(e){return on(t),ea().audioClarity.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(50,"td",36),js(51,"input",95),Xs("ngModelChange",(function(e){return on(t),ea().audioClarity.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(52,"td",36),js(53,"input",96),Xs("ngModelChange",(function(e){return on(t),ea().audioClarity.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(54,"td",36),js(55,"input",97),Xs("ngModelChange",(function(e){return on(t),ea().audioClarity.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(56,"td",36),js(57,"input",98),Xs("ngModelChange",(function(e){return on(t),ea().audioClarity.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),js(58,"tr"),js(59,"td"),ka(60,"Stability"),zs(),js(61,"td",36),js(62,"input",99),Xs("ngModelChange",(function(e){return on(t),ea().stability.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(63,"td",36),js(64,"input",100),Xs("ngModelChange",(function(e){return on(t),ea().stability.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(65,"td",36),js(66,"input",101),Xs("ngModelChange",(function(e){return on(t),ea().stability.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(67,"td",36),js(68,"input",102),Xs("ngModelChange",(function(e){return on(t),ea().stability.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(69,"td",36),js(70,"input",103),Xs("ngModelChange",(function(e){return on(t),ea().stability.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),js(71,"tr"),js(72,"td"),ka(73,"Lighting"),zs(),js(74,"td",36),js(75,"input",42),Xs("ngModelChange",(function(e){return on(t),ea().lighting.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(76,"td",36),js(77,"input",43),Xs("ngModelChange",(function(e){return on(t),ea().lighting.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(78,"td",36),js(79,"input",44),Xs("ngModelChange",(function(e){return on(t),ea().lighting.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(80,"td",36),js(81,"input",45),Xs("ngModelChange",(function(e){return on(t),ea().lighting.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(82,"td",36),js(83,"input",46),Xs("ngModelChange",(function(e){return on(t),ea().lighting.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),zs(),zs(),js(84,"div",15),js(85,"h3",104),ka(86,"Edit"),zs(),js(87,"table"),js(88,"tr"),Hs(89,"th"),js(90,"th",36),ka(91,"2"),zs(),js(92,"th",36),ka(93,"4"),zs(),js(94,"th",36),ka(95,"6"),zs(),js(96,"th",36),ka(97,"8"),zs(),js(98,"th",36),ka(99,"10"),zs(),zs(),js(100,"tr"),js(101,"td"),ka(102,"Scene"),zs(),js(103,"td",36),js(104,"input",105),Xs("ngModelChange",(function(e){return on(t),ea().scene.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(105,"td",36),js(106,"input",106),Xs("ngModelChange",(function(e){return on(t),ea().scene.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(107,"td",36),js(108,"input",107),Xs("ngModelChange",(function(e){return on(t),ea().scene.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(109,"td",36),js(110,"input",108),Xs("ngModelChange",(function(e){return on(t),ea().scene.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(111,"td",36),js(112,"input",109),Xs("ngModelChange",(function(e){return on(t),ea().scene.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),js(113,"tr"),js(114,"td"),ka(115,"Execution"),zs(),js(116,"td",36),js(117,"input",110),Xs("ngModelChange",(function(e){return on(t),ea().execution.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(118,"td",36),js(119,"input",111),Xs("ngModelChange",(function(e){return on(t),ea().execution.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(120,"td",36),js(121,"input",112),Xs("ngModelChange",(function(e){return on(t),ea().execution.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(122,"td",36),js(123,"input",113),Xs("ngModelChange",(function(e){return on(t),ea().execution.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(124,"td",36),js(125,"input",114),Xs("ngModelChange",(function(e){return on(t),ea().execution.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),zs(),zs(),js(126,"div",15),js(127,"h3"),ka(128,"CREATIVITY"),zs(),js(129,"table"),js(130,"tr"),Hs(131,"th"),js(132,"th",36),ka(133,"2"),zs(),js(134,"th",36),ka(135,"4"),zs(),js(136,"th",36),ka(137,"6"),zs(),js(138,"th",36),ka(139,"8"),zs(),js(140,"th",36),ka(141,"10"),zs(),zs(),js(142,"tr"),js(143,"td"),ka(144,"Use of Equipment"),zs(),js(145,"td",36),js(146,"input",115),Xs("ngModelChange",(function(e){return on(t),ea().useOfEquipments.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(147,"td",36),js(148,"input",116),Xs("ngModelChange",(function(e){return on(t),ea().useOfEquipments.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(149,"td",36),js(150,"input",117),Xs("ngModelChange",(function(e){return on(t),ea().useOfEquipments.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(151,"td",36),js(152,"input",118),Xs("ngModelChange",(function(e){return on(t),ea().useOfEquipments.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(153,"td",36),js(154,"input",119),Xs("ngModelChange",(function(e){return on(t),ea().useOfEquipments.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),js(155,"tr"),js(156,"td"),ka(157,"Use of Tecnique"),zs(),js(158,"td",36),js(159,"input",120),Xs("ngModelChange",(function(e){return on(t),ea().useOfTechniques.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(160,"td",36),js(161,"input",121),Xs("ngModelChange",(function(e){return on(t),ea().useOfTechniques.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(162,"td",36),js(163,"input",122),Xs("ngModelChange",(function(e){return on(t),ea().useOfTechniques.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(164,"td",36),js(165,"input",123),Xs("ngModelChange",(function(e){return on(t),ea().useOfTechniques.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(166,"td",36),js(167,"input",124),Xs("ngModelChange",(function(e){return on(t),ea().useOfTechniques.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),zs(),zs(),js(168,"div",15),js(169,"h3"),ka(170,"STORY"),zs(),js(171,"table"),js(172,"tr"),Hs(173,"th"),js(174,"th",36),ka(175,"2"),zs(),js(176,"th",36),ka(177,"4"),zs(),js(178,"th",36),ka(179,"6"),zs(),js(180,"th",36),ka(181,"8"),zs(),js(182,"th",36),ka(183,"10"),zs(),zs(),js(184,"tr"),js(185,"td"),ka(186,"Overall Message"),zs(),js(187,"td",36),js(188,"input",125),Xs("ngModelChange",(function(e){return on(t),ea().vMessage.poor=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(189,"td",36),js(190,"input",126),Xs("ngModelChange",(function(e){return on(t),ea().vMessage.fair=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(191,"td",36),js(192,"input",127),Xs("ngModelChange",(function(e){return on(t),ea().vMessage.satisfactory=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(193,"td",36),js(194,"input",128),Xs("ngModelChange",(function(e){return on(t),ea().vMessage.good=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),js(195,"td",36),js(196,"input",129),Xs("ngModelChange",(function(e){return on(t),ea().vMessage.excellent=e}))("change",(function(e){return on(t),ea().onItemChange(e.target.value)})),zs(),zs(),zs(),zs(),zs(),js(197,"div",83),js(198,"div",84),js(199,"div",85),js(200,"button",86),ka(201,"Submit Scores"),Hs(202,"strong"),zs(),zs(),zs(),zs(),zs(),zs()}if(2&t){const t=ea();Cr(23),Us("ngModel",t.composition.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.composition.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.composition.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.composition.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.composition.excellent)("value",t.excellent)("checked",!1),Cr(5),Us("ngModel",t.pictureClarity.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.pictureClarity.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.pictureClarity.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.pictureClarity.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.pictureClarity.excellent)("value",t.excellent)("checked",!1),Cr(5),Us("ngModel",t.audioClarity.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.audioClarity.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.audioClarity.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.audioClarity.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.audioClarity.excellent)("value",t.excellent)("checked",!1),Cr(5),Us("ngModel",t.stability.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.stability.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.stability.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.stability.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.stability.excellent)("value",t.excellent)("checked",!1),Cr(5),Us("ngModel",t.lighting.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.lighting.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.lighting.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.lighting.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.lighting.excellent)("value",t.excellent)("checked",!1),Cr(21),Us("ngModel",t.scene.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.scene.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.scene.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.scene.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.scene.excellent)("value",t.excellent)("checked",!1),Cr(5),Us("ngModel",t.execution.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.execution.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.execution.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.execution.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.execution.excellent)("value",t.excellent)("checked",!1),Cr(21),Us("ngModel",t.useOfEquipments.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.useOfEquipments.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.useOfEquipments.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.useOfEquipments.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.useOfEquipments.excellent)("value",t.excellent)("checked",!1),Cr(5),Us("ngModel",t.useOfTechniques.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.useOfTechniques.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.useOfTechniques.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.useOfTechniques.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.useOfTechniques.excellent)("value",t.excellent)("checked",!1),Cr(21),Us("ngModel",t.vMessage.poor)("value",t.poor)("checked",!1),Cr(2),Us("ngModel",t.vMessage.fair)("value",t.fair)("checked",!1),Cr(2),Us("ngModel",t.vMessage.satisfactory)("value",t.satisfactory)("checked",!1),Cr(2),Us("ngModel",t.vMessage.good)("value",t.good)("checked",!1),Cr(2),Us("ngModel",t.vMessage.excellent)("value",t.excellent)("checked",!1)}}let Vj=(()=>{class t{constructor(t,e,n,i){this.ngZone=t,this.router=e,this.route=n,this.dbOperations=i,this.work=new jb,this.interview=new zb,this.score=new Sj,this.vScore=new Mj,this.composition=new Lj,this.lighting=new Lj,this.clarity=new Lj,this.theme=new Lj,this.uniqueness=new Lj,this.message=new Lj,this.impression=new Lj,this.inspirational=new Lj,this.impact=new Lj,this.details=new Lj,this.vMessage=new Lj,this.useOfEquipments=new Lj,this.useOfTechniques=new Lj,this.execution=new Lj,this.scene=new Lj,this.audioClarity=new Lj,this.pictureClarity=new Lj,this.stability=new Lj,this.currentUser="",this.poor=2,this.fair=4,this.satisfactory=6,this.good=8,this.excellent=10,this.video="assets/videos/resilience.mp4",this.id=1601554584181,this.templateChecked=!0,this.role="",this.playlist=[{title:"Pale Blue Dot",src:"http://static.videogular.com/assets/videos/videogular.mp4",type:"video/mp4"},{title:"Big Buck Bunny",src:"http://static.videogular.com/assets/videos/big_buck_bunny_720p_h264.mov",type:"video/mp4"},{title:"Elephants Dream",src:"http://static.videogular.com/assets/videos/elephants-dream.mp4",type:"video/mp4"}],this.currentIndex=0,this.currentItem=this.playlist[this.currentIndex]}ngOnInit(){this.route.params.subscribe(t=>{this.id=+t.id,this.getArtWorkDetails(this.id.toString()),this.date=new Fd("en").transform(this.work.shotDate,"yyyy/MM/dd")})}ngAfterViewInit(){this.currentUser=localStorage.getItem("currentUser")}onSubmit(t){if(t.valid)if("video"===this.work.type){this.vScore.scoreId=this.id.toString(),this.vScore.vTechnical.composition=t.value.composition,this.vScore.vTechnical.stability=t.value.stability,this.vScore.vTechnical.pictureClarity=t.value.pictureClarity,this.vScore.vTechnical.lighting=t.value.lighting,this.vScore.vTechnical.audioClarity=t.value.audioClarity,this.vScore.vEdit.scene=t.value.scene,this.vScore.vEdit.execution=t.value.execution,this.vScore.vStory.message=t.value.vMessage,this.vScore.vCreativity.useoftechniques=t.value.useOfTechniques,this.vScore.vCreativity.useofequipments=t.value.useOfEquipments,this.vScore.scoredDate=(new Date).getDate().toString(),this.vScore.scoredTime=(new Date).getTime().toString(),this.vScore.scoredBy=this.currentUser,this.vScore.type="video";let e=t.value.pictureClarity+t.value.lighting+t.value.stability+t.value.audioClarity+t.value.composition;this.vScore.totalScore=t.value.useoftechniques+t.value.useofequipments+e+t.value.vMessage+(t.value.execution+t.value.scene),console.log(this.vScore.totalScore),console.log("score"+this.score),console.log(JSON.stringify(t.value)),console.log(e);const n=JSON.parse(JSON.stringify(this.vScore));this.dbOperations.scoresCollections().doc(this.vScore.scoreId).set(n).then(()=>{this.dbOperations.artworksCollection().doc(this.work.artworkId).update({status:"scored",updatedAt:(new Date).getDate()+""}).then(e=>{t.reset(),this.router.navigateByUrl("project/admin/score")}).catch(t=>{})}).catch(()=>{window.alert("Failed to save the score")})}else{this.score.scoreId=this.id.toString(),this.score.technique.composition=t.value.composition,this.score.technique.clarity=t.value.clarity,this.score.technique.lighting=t.value.lighting,this.score.creativity.message=t.value.message,this.score.creativity.theme=t.value.theme,this.score.creativity.uniqueness=t.value.uniqueness,this.score.creativity.impression=t.value.impression,this.score.wowFactor.details=t.value.details,this.score.wowFactor.impact=t.value.impact,this.score.wowFactor.inspirational=t.value.inspirational,this.score.scoredDate=(new Date).getDate().toString(),this.score.scoredTime=(new Date).getTime().toString(),this.score.scoredBy=this.currentUser,this.score.type="image";let e=t.value.composition+t.value.clarity+t.value.lighting,n=t.value.message+t.value.theme+t.value.uniqueness+t.value.impression;console.log(JSON.stringify(t.value.message)),console.log(JSON.stringify(t.value.theme)),console.log(JSON.stringify(t.value.uniqueness)),console.log(JSON.stringify(t.value.impression));let i=n+e+(t.value.details+t.value.impact+t.value.inspirational);this.score.totalScore=i,console.log("score "+Object.assign({},this.score)),console.log(JSON.stringify(t.value.composition)),console.log(JSON.stringify(i));const r=JSON.parse(JSON.stringify(this.score));this.dbOperations.scoresCollections().doc(this.score.scoreId).set(r).then(()=>{this.dbOperations.artworksCollection().doc(this.work.artworkId).update({status:"scored",updatedAt:(new Date).getDate()+""}).then(e=>{t.reset(),this.router.navigateByUrl("project/admin/score")}).catch(t=>{})}).catch(()=>{window.alert("Failed to save the score")})}}onItemChange(t){console.log(" Value is : ",t)}onPlayerReady(t){this.api=t,this.api.getDefaultMedia().subscriptions.loadedMetadata.subscribe(this.playVideo.bind(this))}playVideo(){this.api.play()}onClickPlaylistItem(t,e){this.currentIndex=e,this.currentItem=t}getArtWorkDetails(t){this.dbOperations.artworksCollection().ref.where("id","==",t).onSnapshot(t=>{t.docs.forEach(t=>{const e=t.data();this.video=e.url,this.work=e,this.getArtworkInterview(e.userId)})})}getArtworkInterview(t){this.dbOperations.interviewssCollection().ref.where("userId","==",t).onSnapshot(t=>{t.empty||t.forEach(t=>{this.interview=t.data()})})}}return t.\u0275fac=function(e){return new(e||t)(Ns(Su),Ns(Wg),Ns(km),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-score"]],viewQuery:function(t,e){var n;1&t&&Qc(RP,!0),2&t&&$c(n=tu())&&(e.accordion=n.first)},decls:131,vars:18,consts:[[1,"score","pt-3","pb-5"],[1,"container-fluid"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-8","col-xl-9"],[1,"artwork"],[1,"artwork-media"],["class","card",4,"ngIf"],[1,"container"],[1,"accordion-action-buttons","my-4"],[1,"btn","mx-3",3,"click"],["multi","",1,"accordion-headers-align"],["hideToggle","true"],["rules",""],[1,"artwork-info","mt-3"],[1,"col-xs-12","col-12-sm","col-md-6"],[1,"card","p-3"],[1,"artwork-title"],[1,"artwork-description"],[1,"artwork-interview","mt-3"],[1,"challanges"],[1,"experience"],[1,"life-before"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-4","col-xl-3"],[1,"score-forms"],["class","photo-score-form",4,"ngIf"],["class","video-score-form",4,"ngIf"],[1,"card"],["alt","",1,"img-fluid",3,"src"],[3,"onPlayerReady"],["vgProperty","current","vgFormat","mm:ss"],["vgProperty","total","vgFormat","mm:ss"],["id","singleVideo","preload","auto","crossorigin","",3,"vgMedia","src"],["media",""],[1,"photo-score-form"],["novalidate","",1,"form-group",3,"ngSubmit"],["photoScoresForm","ngForm"],["align","center"],["type","radio","name","composition",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","composition",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","composition",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","composition",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","composition",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","name","lighting",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","lighting",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","lighting",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","lighting",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","lighting",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","name","clarity",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","clarity",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","clarity",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","clarity",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","clarity",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","name","theme",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","theme",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","theme",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","theme",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","theme",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","name","uniqueness",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","name","message",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","message",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","message",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","message",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","message",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","name","impression",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","impression",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","impression",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","impression",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","impression",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","name","inspirational",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","inspirational",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","inspirational",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","inspirational",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","inspirational",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","name","impact",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","impact",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","impact",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","impact",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","impact",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","name","details",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","details",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","details",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","details",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","details",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],[1,"mt-5"],[1,"next"],[1,"form-group","mb-0"],["type","submit",1,"btn","btn-light"],[1,"video-score-form"],["videoScoresForm","ngForm"],["type","radio","name","pictureClarity",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","pictureClarity",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","pictureClarity",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","pictureClarity",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","pictureClarity",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","name","audioClarity",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","audioClarity",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","audioClarity",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","audioClarity",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","audioClarity",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","name","stability",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","stability",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","stability",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","stability",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","stability",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],[1,"p-3"],["type","radio","name","scene",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","scene",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","scene",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","scene",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","scene",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","name","execution",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","execution",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","execution",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","execution",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","execution",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","name","useOfEquipments",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","useOfEquipments",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","useOfEquipments",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","useOfEquipments",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","useOfEquipments",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","name","useOfTechniques",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","useOfTechniques",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","useOfTechniques",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","useOfTechniques",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","useOfTechniques",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","name","vMessage",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","fair","name","vMessage",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","satisfactory","name","vMessage",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","good","name","vMessage",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"],["type","radio","id","excellent","name","vMessage",1,"form-control",3,"ngModel","value","checked","ngModelChange","change"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),js(2,"div",2),js(3,"div",3),js(4,"div",4),js(5,"div",5),Ls(6,Fj,2,1,"div",6),Ls(7,Nj,16,2,"div",6),js(8,"div",7),js(9,"div",8),js(10,"button",9),Xs("click",(function(){return e.accordion.openAll()})),ka(11,"Expand All"),zs(),js(12,"button",9),Xs("click",(function(){return e.accordion.closeAll()})),ka(13,"Collapse All"),zs(),zs(),js(14,"mat-accordion",10),js(15,"mat-expansion-panel",11,12),js(17,"mat-expansion-panel-header"),js(18,"mat-panel-title"),js(19,"h4"),ka(20,"ARTWORK DETAILS"),zs(),zs(),zs(),js(21,"div",13),js(22,"div",2),js(23,"div",14),js(24,"div",15),js(25,"div",16),js(26,"h5"),js(27,"strong"),ka(28,"Title"),zs(),zs(),js(29,"p"),ka(30),zs(),zs(),js(31,"div",17),js(32,"h5"),js(33,"strong"),ka(34,"Decription"),zs(),zs(),js(35,"p"),ka(36),zs(),zs(),js(37,"div",17),js(38,"h5"),js(39,"strong"),ka(40,"Date Shot"),zs(),zs(),js(41,"p"),ka(42),zs(),zs(),js(43,"div",17),js(44,"h5"),js(45,"strong"),ka(46,"Place"),zs(),zs(),js(47,"p"),ka(48),zs(),zs(),zs(),zs(),zs(),zs(),zs(),js(49,"mat-expansion-panel",11,12),js(51,"mat-expansion-panel-header"),js(52,"mat-panel-title"),js(53,"h4"),ka(54,"INTERVIEW ANSWERS"),zs(),zs(),zs(),js(55,"div",18),js(56,"div",2),js(57,"div",14),js(58,"div",15),js(59,"div",19),js(60,"h5"),js(61,"strong"),ka(62,"Tell us challenges encountered in the process of taking this video/photo"),zs(),zs(),js(63,"p"),ka(64),zs(),zs(),js(65,"div",20),js(66,"h5"),js(67,"strong"),ka(68,"What are some of the challenges you encountered in the process of taking the photo(s)/video? "),zs(),zs(),js(69,"p"),ka(70),zs(),zs(),js(71,"div",21),js(72,"h5"),js(73,"strong"),ka(74,"Tell us your experience in the process of taking this video/photo"),zs(),zs(),js(75,"p"),ka(76),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),js(77,"div",13),js(78,"div",2),js(79,"div",14),js(80,"div",15),js(81,"div",16),js(82,"h5"),js(83,"strong"),ka(84,"Title"),zs(),zs(),js(85,"p"),ka(86),zs(),zs(),js(87,"div",17),js(88,"h5"),js(89,"strong"),ka(90,"Decription"),zs(),zs(),js(91,"p"),ka(92),zs(),zs(),js(93,"div",17),js(94,"h5"),js(95,"strong"),ka(96,"Date Shot"),zs(),zs(),js(97,"p"),ka(98),zs(),zs(),js(99,"div",17),js(100,"h5"),js(101,"strong"),ka(102,"Place"),zs(),zs(),js(103,"p"),ka(104),zs(),zs(),zs(),zs(),zs(),zs(),js(105,"div",18),js(106,"div",2),js(107,"div",14),js(108,"div",15),js(109,"div",19),js(110,"h5"),js(111,"strong"),ka(112,"Challenges"),zs(),zs(),js(113,"p"),ka(114),zs(),zs(),js(115,"div",20),js(116,"h5"),js(117,"strong"),ka(118,"Experience "),zs(),zs(),js(119,"p"),ka(120),zs(),zs(),js(121,"div",21),js(122,"h5"),js(123,"strong"),ka(124,"Routine prior to Covid - 19"),zs(),zs(),js(125,"p"),ka(126),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),js(127,"div",22),js(128,"div",23),Ls(129,Bj,187,150,"div",24),Ls(130,Uj,203,150,"div",25),zs(),zs(),zs(),zs(),zs()),2&t&&(Cr(6),Us("ngIf","image"==e.work.type),Cr(1),Us("ngIf","video"==e.work.type),Cr(23),Da(e.work.title),Cr(6),Da(e.work.description),Cr(6),Da(e.date),Cr(6),Oa(" ",e.work.place,""),Cr(16),Da(e.interview.challenges),Cr(6),Da(e.interview.experience),Cr(6),Da(e.interview.lifeBefore),Cr(10),Da(e.work.title),Cr(6),Da(e.work.description),Cr(6),Da(e.work.shotDate),Cr(6),Oa(" ",e.work.place,""),Cr(10),Da(e.interview.challenges),Cr(6),Da(e.interview.experience),Cr(6),Da(e.interview.lifeBefore),Cr(3),Us("ngIf","image"==e.work.type),Cr(1),Us("ngIf","video"==e.work.type))},directives:[md,RP,TP,kP,OP,IA,NA,YA,nx,ex,ZA,JA,ax,ox,ix,QA,rx,RA,tA,Q_,Ww,hw,j_,Y_,Jw],styles:[".score[_ngcontent-%COMP%]{min-height:100vh;color:#000}.score[_ngcontent-%COMP%]   .artwork[_ngcontent-%COMP%]{height:100%}.score[_ngcontent-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-media[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none}.score[_ngcontent-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-media[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.score[_ngcontent-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#fff}.score[_ngcontent-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-style:italic}.score[_ngcontent-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-interview[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#fff}.score[_ngcontent-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-interview[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-style:italic}.score[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#000}.score[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .score[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fff;text-align:center;width:100%}.score[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:teal}.score[_ngcontent-%COMP%]   .score-forms[_ngcontent-%COMP%], .score[_ngcontent-%COMP%]   .video-score-form[_ngcontent-%COMP%]{overflow-y:hidden}.score[_ngcontent-%COMP%]   .score-forms[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .score[_ngcontent-%COMP%]   .video-score-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:2em}.score[_ngcontent-%COMP%]   .score-forms[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%], .score[_ngcontent-%COMP%]   .video-score-form[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;border-radius:1em}mat-expansion-panel[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000}mat-expansion-panel[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#000}mat-expansion-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#000;font-size:1em;text-align:center}mat-expansion-panel[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#000;font-size:.8em}vg-player[_ngcontent-%COMP%]{width:100%}vg-player[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{height:500px;margin:0 auto}"]}),t})(),jj=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-profile"]],decls:2,vars:0,template:function(t,e){1&t&&(js(0,"p"),ka(1,"profile works!"),zs())},styles:[""]}),t})();function zj(t,e){if(1&t&&(js(0,"div",16),js(1,"div",17),Hs(2,"img",18),zs(),zs()),2&t){const t=ea();Cr(2),aa("src",t.work.url,rr)}}function Hj(t,e){if(1&t){const t=$s();js(0,"div",16),js(1,"vg-player",19),Xs("onPlayerReady",(function(e){return on(t),ea().onPlayerReady(e)})),Hs(2,"vg-buffering"),js(3,"vg-controls"),Hs(4,"vg-play-pause"),Hs(5,"vg-playback-button"),Hs(6,"vg-time-display",20),js(7,"vg-scrub-bar"),Hs(8,"vg-scrub-bar-current-time"),Hs(9,"vg-scrub-bar-buffering-time"),zs(),Hs(10,"vg-time-display",21),Hs(11,"vg-mute"),Hs(12,"vg-volume"),Hs(13,"vg-fullscreen"),zs(),Hs(14,"video",22,23),zs(),zs()}if(2&t){const t=Fs(15),e=ea();Cr(14),Us("vgMedia",t)("src",e.video,rr)}}let Gj=(()=>{class t{constructor(t,e){this.route=t,this.dbOperations=e,this.work=new jb,this.interview=new zb,this.video="http://static.videogular.com/assets/videos/elephants-dream.mp4"}ngOnInit(){this.route.params.subscribe(t=>{this.id=+t.id,this.getArtWorkDetails(this.id.toString())})}onPlayerReady(t){this.api=t,this.api.getDefaultMedia().subscriptions.loadedMetadata.subscribe(this.playVideo.bind(this))}playVideo(){this.api.play()}getArtWorkDetails(t){this.dbOperations.artworksCollection().ref.where("id","==",t).onSnapshot(t=>{t.docs.forEach(t=>{const e=t.data();this.video=e.url,this.work=e,this.getArtworkInterview(e.userId)})})}getArtworkInterview(t){this.dbOperations.interviewssCollection().ref.where("userId","==",t).onSnapshot(t=>{t.empty||t.forEach(t=>{this.interview=t.data()})})}}return t.\u0275fac=function(e){return new(e||t)(Ns(km),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-artworks-detail"]],decls:58,vars:9,consts:[[1,"artwork-detail","pb-3"],[1,"container-fluid"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-8","my-3"],[1,"artwork-media"],["class","card",4,"ngIf"],[1,"col-xs-12","col-sm-12","col-md-4"],[1,"artwork-info","mt-3"],[1,"col-xs-12","col-12-sm","col-md-12"],[1,"card","p-3"],[1,"artwork-title"],[1,"artwork-description"],[1,"artwork-interview","mt-3"],[1,"challanges"],[1,"experience"],[1,"life-before"],[1,"card"],[1,"img-fluid"],["alt","",1,"artwork-image",3,"src"],[3,"onPlayerReady"],["vgProperty","current","vgFormat","mm:ss"],["vgProperty","total","vgFormat","mm:ss"],["id","singleVideo","preload","auto","crossorigin","",3,"vgMedia","src"],["media",""]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),js(2,"div",2),js(3,"div",3),js(4,"div",4),Ls(5,zj,3,1,"div",5),Ls(6,Hj,16,2,"div",5),zs(),zs(),js(7,"div",6),js(8,"div",7),js(9,"div",2),js(10,"div",8),js(11,"div",9),js(12,"div",10),js(13,"h5"),js(14,"strong"),ka(15,"Title"),zs(),zs(),js(16,"p"),ka(17),zs(),zs(),js(18,"div",11),js(19,"h5"),js(20,"strong"),ka(21,"Decription"),zs(),zs(),js(22,"p"),ka(23),zs(),zs(),js(24,"div",11),js(25,"h5"),js(26,"strong"),ka(27,"Date Shot"),zs(),zs(),js(28,"p"),ka(29),zs(),zs(),js(30,"div",11),js(31,"h5"),js(32,"strong"),ka(33,"Place"),zs(),zs(),js(34,"p"),ka(35),zs(),zs(),zs(),zs(),zs(),zs(),js(36,"div",12),js(37,"div",2),js(38,"div",8),js(39,"div",9),js(40,"div",13),js(41,"h5"),js(42,"strong"),ka(43,"Challenges"),zs(),zs(),js(44,"p"),ka(45),zs(),zs(),js(46,"div",14),js(47,"h5"),js(48,"strong"),ka(49,"Experience "),zs(),zs(),js(50,"p"),ka(51),zs(),zs(),js(52,"div",15),js(53,"h5"),js(54,"strong"),ka(55,"Routine prior to Covid - 19"),zs(),zs(),js(56,"p"),ka(57),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs()),2&t&&(Cr(5),Us("ngIf","image"==e.work.type),Cr(1),Us("ngIf","video"==e.work.type),Cr(11),Da(e.work.title),Cr(6),Da(e.work.description),Cr(6),Da(e.work.shotDate),Cr(6),Oa(" ",e.work.place,""),Cr(10),Da(e.interview.challenges),Cr(6),Da(e.interview.experience),Cr(6),Da(e.interview.lifeBefore))},directives:[md,IA,NA,YA,nx,ex,ZA,JA,ax,ox,ix,QA,rx,RA],styles:[".artwork-detail[_ngcontent-%COMP%]{min-height:100vh}.artwork-detail[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700}.artwork-detail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.artwork-detail[_ngcontent-%COMP%]   .artwork-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#fff}.artwork-detail[_ngcontent-%COMP%]   .artwork-info[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-style:italic}.artwork-detail[_ngcontent-%COMP%]   .artwork-interview[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-color:#fff}.artwork-detail[_ngcontent-%COMP%]   .artwork-interview[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-style:italic}vg-player[_ngcontent-%COMP%]{width:100%}vg-player[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{height:500px;margin:0 auto}"]}),t})(),Wj=(()=>{class t{constructor(){}ngOnInit(){}onSubmit(t){}onSubmitMinorsConsent(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-term-modal"]],decls:101,vars:10,consts:[[1,"terms"],[3,"ngSubmit"],["termsForm","ngForm"],[1,"card","p-3","mt-5"],[1,"card"],[1,"container-fluid","p-0"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["type","text","name","firstName","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","lastName","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","telephone","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","email","name","date","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"minors-terms"],[1,"minors-consent-form"],["type","text","name","participant","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","guardian","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"confirm-terms"],[1,"container","p-5"],[1,"form-check"],[1,"form-check-label"],["type","checkbox","name","","id","","value","checkedValue","checked","",1,"form-check-input"],[1,"confirm-details"]],template:function(t,e){if(1&t){const t=$s();js(0,"div",0),js(1,"form",1,2),Xs("ngSubmit",(function(){on(t);const n=Fs(2);return e.onSubmit(n)})),js(3,"div",3),js(4,"div",4),js(5,"div",5),js(6,"div",6),js(7,"div",7),js(8,"div",8),js(9,"label"),ka(10,"First Name"),zs(),js(11,"input",9),Xs("ngModelChange",(function(t){return e.firstName=t})),zs(),zs(),zs(),js(12,"div",7),js(13,"div",8),js(14,"label"),ka(15,"Last Name"),zs(),js(16,"input",10),Xs("ngModelChange",(function(t){return e.lastName=t})),zs(),zs(),zs(),zs(),zs(),zs(),zs(),js(17,"div",3),js(18,"div",4),js(19,"div",8),js(20,"label"),ka(21,"Email"),zs(),js(22,"input",11),Xs("ngModelChange",(function(t){return e.email=t})),zs(),zs(),zs(),zs(),js(23,"div",3),js(24,"div",4),js(25,"div",8),js(26,"label"),ka(27,"Telephone"),zs(),js(28,"input",12),Xs("ngModelChange",(function(t){return e.telephone=t})),zs(),zs(),zs(),zs(),js(29,"div",3),js(30,"div",4),js(31,"div",8),js(32,"label"),ka(33,"Date"),zs(),js(34,"input",13),Xs("ngModelChange",(function(t){return e.date=t})),zs(),zs(),zs(),zs(),zs(),js(35,"div"),js(36,"p"),ka(37," By signing this form, I\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026 (First name, Last name) of \u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026.. (Town or City, Country) give Bobby Pall Photography and Mastercard Foundation permission to mention, refer to and use photograph(s) and video(s) submitted by myself publicly in connection with the work and mission of the COVID-19 Public Awareness Campaign. I provide Bobby Pall Photography and Mastercard Foundation consent to collect and use: "),zs(),js(38,"ol"),js(39,"li"),ka(40,"Photographs and videos submitted by myself;"),zs(),js(41,"li"),ka(42,"My first and last name; location (village/town, district, and country); and"),zs(),js(43,"li"),ka(44,"Quotes from interviews, videos and recordings of myself. "),zs(),zs(),js(45,"strong"),ka(46,"Use of Information"),zs(),js(47,"p"),ka(48," The photographs and videos submitted may be used by Bobby Pall Photography and/or Mastercard Foundation for marketing purposes, including communicating the success of Bobby Pall Photography and/or Mastercard Foundation programs as well as sharing learning with the broader international community. I agree that Bobby Pall Photography and Mastercard Foundation can use the above information on the Bobby Pall Photography and/or Mastercard Foundation\u2019s websites, the internet, on social media, in publications, photographs, print media, videos, documentaries, and podcasts. "),zs(),js(49,"strong"),ka(50,"Photographer/Videographer Consent"),zs(),js(51,"p"),ka(52," You are not obligated to give us your consent nor do you have to tell us anything that you are not comfortable communicating publicly. We want to tell your story and represent you in a way that is respectful and dignified. If you have any questions or concerns about your consent or the use of your photographs and/or videos, please do not hesitate to ask a Bobby Pall Photography representative before signing this form. "),zs(),ka(53," You can ask questions about the use of the content at any time by emailing "),js(54,"strong"),ka(55,"info@africanartincontext.com"),zs(),ka(56,", or "),js(57,"strong"),ka(58,"jngiabi@mastercardfdn.org"),zs(),ka(59,". "),js(60,"p"),ka(61," I have read this form and consent to the collection and use of the information described. I also release Bobby Pall Photography and Mastercard Foundation from all claims of any kind that I or my heirs, executors, administrators, legal representatives, successors or assigns ever had, now have, or may in the future have, arising from, connected with, or in any way related to the collection or use of the information described. "),zs(),zs(),js(62,"div",14),ka(63," *Please note that any participant under 18 years of age must have a parent or guardian provide consent and release on their behalf. "),zs(),js(64,"div",15),js(65,"form"),js(66,"div",3),js(67,"div",4),js(68,"div",8),js(69,"label"),ka(70,"Participant"),zs(),js(71,"input",16),Xs("ngModelChange",(function(t){return e.participant=t})),zs(),zs(),zs(),zs(),js(72,"div",3),js(73,"div",4),js(74,"div",8),js(75,"label"),ka(76,"Guardian"),zs(),js(77,"input",17),Xs("ngModelChange",(function(t){return e.guardian=t})),zs(),zs(),zs(),zs(),js(78,"div",18),js(79,"div",19),js(80,"div",20),ka(81," Sign this form by checking the boxes; "),js(82,"label",21),Hs(83,"input",22),ka(84," *I am over 18 years of age and the parent of the minor participant, I consent to the above on their behalf and I agree to be legally bound by the above release. "),zs(),zs(),js(85,"div",20),ka(86," Sign this form by checking the boxes; "),js(87,"label",21),Hs(88,"input",22),ka(89," I have read the Submission Guidelines and Rules (including the copyright conditions) below and agree to the terms and conditions of the photo(s) and video call for submission. "),zs(),zs(),zs(),zs(),js(90,"p"),ka(91," The following is required if the consent and release form has to be read to the individual or their parent or legal guardian: I certify that I have read this form to the participant or their parent or legal guardian and they have agreed to the terms and conditions. "),zs(),js(92,"div",23),js(93,"p"),ka(94),zs(),js(95,"p"),ka(96),zs(),js(97,"p"),ka(98,"email"),zs(),js(99,"p"),ka(100),zs(),zs(),zs(),zs(),zs()}2&t&&(Cr(11),Us("ngModel",e.firstName),Cr(5),Us("ngModel",e.lastName),Cr(6),Us("ngModel",e.email),Cr(6),Us("ngModel",e.telephone),Cr(6),Us("ngModel",e.date),Cr(37),Us("ngModel",e.participant),Cr(6),Us("ngModel",e.guardian),Cr(17),Da(e.date),Cr(2),Da(e.name),Cr(4),Da(e.telephone))},directives:[tA,Q_,Ww,j_,oA,Y_,Jw],styles:[""]}),t})();function qj(t,e){1&t&&Hs(0,"app-story",32),2&t&&Us("story",e.$implicit)}function $j(t,e){if(1&t&&(js(0,"div",3),js(1,"div",33),js(2,"div",34),js(3,"div",16),Hs(4,"img",35),zs(),zs(),js(5,"div",36),js(6,"div",4),js(7,"div",37),js(8,"div",16),Hs(9,"img",38),zs(),zs(),zs(),js(10,"div",4),js(11,"div",37),js(12,"div",16),Hs(13,"img",39),zs(),zs(),zs(),zs(),zs(),js(14,"div",33),js(15,"div",40),js(16,"div",16),Hs(17,"img",41),zs(),zs(),js(18,"div",40),js(19,"div",16),Hs(20,"img",42),zs(),zs(),js(21,"div",40),js(22,"div",16),Hs(23,"img",43),zs(),zs(),js(24,"div",40),js(25,"div",16),Hs(26,"img",44),zs(),zs(),js(27,"div",40),js(28,"div",16),Hs(29,"img",42),zs(),zs(),js(30,"div",40),js(31,"div",16),Hs(32,"img",45),zs(),zs(),zs(),zs()),2&t){const t=ea();Cr(4),aa("src",t.bigPhoto,rr),Cr(5),aa("src",t.images[0],rr),Cr(4),aa("src",t.images[6],rr),Cr(4),aa("src",t.images[2],rr),Cr(3),aa("src",t.images[3],rr),Cr(3),aa("src",t.images[1],rr),Cr(3),aa("src",t.images[5],rr),Cr(3),aa("src",t.images[4],rr),Cr(3),aa("src",t.images[7],rr)}}const Yj=function(t){return{"background-image":t,"background-repeat":"no-repeat","background-attachment":"fixed","background-size":"cover"}},Qj=function(){return["/create-profile"]};let Xj=(()=>{class t{constructor(t,e,n){this.config=t,this.matDialog=e,this.dbOperations=n,this.landingImages=[],this.artworks=[],this.stories=[],this.artwork=new jb,this.backgroundImgs=["1.png","2.png","3.png"],this.video="",this.mobileWidthThreshold=640,this.showMorePurpose=!1,this.inspirationMore=!1,this.showPurpose=!1,this.showInspiration=!1,this.headingSize=2,this.id=1597836027860,this.getScreenSize(),this.purposeOfCompetion(),this.getInspiration()}ngOnInit(){this.getArtWorkDetails(this.id.toString()),this.getStoriesData(),this.getStories()}carouselConfig(){this.config.interval=3e3,this.config.keyboard=!1,this.config.pauseOnHover=!1,this.config.wrap=!0}getStories(){this.dbOperations.artworksCollection().ref.where("status","==","spotlight").onSnapshot(t=>{this.stories=t.docChanges().map(t=>{const e=t.doc.data(),n=t.doc.id;return console.log(Object.assign({},e)+" stories"),Object.assign({id:n},e)})})}getArtWorkDetails(t){this.dbOperations.artworksCollection().ref.where("id","==",t).onSnapshot(t=>{t.docs.forEach(t=>{const e=t.data();console.log(e),this.video=e.url,this.artwork=e})})}onResize(t){let e=t.target.innerWidth;e<800&&(this.headingSize=1.5),e>800&&(this.headingSize=2.5),e>1e3&&(this.headingSize=3),e>1200&&(this.headingSize=4)}getScreenSize(){let t=window.innerWidth;t<800&&(this.headingSize=1.5),t>800&&(this.headingSize=2.5),t>1e3&&(this.headingSize=3),t>1200&&(this.headingSize=4)}getInspiration(){return this.inspiration="is a professional studio composed of highly experienced  professionals\n    formed in response to the need for consolidated offerings of consulting services within the creative\n    space. The team is composed of photographers, videographers, graphic designers, writers and professional\n    editors that provide a comprehensive range of photography, videography and desktop publishing services.\n    The establishment has been undertaking photography and videography services in Africa for over ten\n    years. BPP has also been commissioned to undertake projects revolving around corporate image branding,\n    book and press images, travel brochures, portraits and dynamic concepts for communication where reality\n    meets memories. Some of the clients include, the United Nations, Footprints Press, Nikon, and the Kenya\n    Red Cross Society. The elements that make BPP unique are commitment, innovation, creativity, professionalism, daring to do\n    more and thinking outside the norm, integrity and purpose, world class workmanship, high end\n    professional equipment and an understanding and belief that excellence is key.",this.inspiration.substring(0,600)}purposeOfCompetion(){return this.purpose="The goal is to engage young people across seven countries (Kenya, Uganda, Ethiopia,\n    Rwanda, Nigeria, Ghana and Senegal) to share stories about their personal experiences navigating life\n    during the global pandemic. The storytelling should take the form of photographs and videos. Bobby Pall\n    Photography (The Organizer) is partnering with the Foundation on this Campaign that provides\n    photographers and videographers with the opportunity to actively participate in the COVID-19 Recovery and\n    Resilience Programme and to acquire international exposure when their work is published in the\n    online/virtual\n    gallery. By choosing to participate in this Campaign, the Entrant agrees to the following official\n    guidelines and rules, which create a contract between him/her and the Organizer. The theme of the\n    photography and videography campaign is: \u2018African Resilience in the Wake of a Pandemic\u2019.\n    Please read the guidelines and rules carefully before submitting your entry",this.purpose.substring(0,600)}onMouseOver(t){this.hoveredImage=t}onMouseOut(t){this.hoveredImage=null}showHostProfile(){}lauchMoreInfoModal(t){const e=new XT;e.disableClose=!1,e.id="modal-component",e.height="60%",e.width="60%",e.data={info:t},this.matDialog.open(lP,e)}getStoriesData(){this.dbOperations.getStoriesData().snapshotChanges().subscribe(t=>{let e=t.payload.data();console.log(e),this.backgroundImage=e.backgroundImage,this.images=e.images,this.bigPhoto=e.bigPhoto,this.storyOne=e.storyOne,this.storyTwo=e.storyTwo})}}return t.\u0275fac=function(e){return new(e||t)(Ns(qO),Ns(sP),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-campaign"]],hostBindings:function(t,e){1&t&&Xs("resize",(function(t){return e.onResize(t)}),!1,Xn)},decls:71,vars:9,consts:[[1,"project",3,"resize"],[1,"campaign-landing",3,"ngStyle"],[1,"campaign-image"],[1,"container"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-7"],[1,"col-xs-12","col-sm-12","col-md-5"],[1,"call-theme","p-4"],[1,"title"],[1,"sub-title"],[1,"stories-bg","py-5"],[1,"stories"],[1,"m-3"],[1,"hr-rule","mt-1"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","col-xl-6","mt-3"],[1,"story","p-3"],[1,"card"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","col-xl-12"],[1,"story-img"],["alt","",3,"src"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","col-xl-12","mt-3"],[1,"stories-info"],[1,"photo-by","p-1"],[1,"mb-0"],[1,"tell","mt-5"],[1,"btn","btn-primary",3,"routerLink"],[1,"more-stories"],[1,"mt-5"],["class","col-xs-12 col-sm-12 col-md-6 col-lg-4 col-xl-4  mt-3",3,"story",4,"ngFor","ngForOf"],[1,"sample-images","py-5"],[1,"artistic-images"],["class","container",4,"ngIf"],[1,"col-xs-12","col-sm-12","col-md-6","col-lg-4","col-xl-4","mt-3",3,"story"],[1,"row","pr-3"],[1,"col-xs-12","col-sm-12","col-md-8","pr-0","mt-3"],["alt","bobby pall photography women during covid","title","woman pandemic",3,"src"],[1,"col-xs-12","col-sm-12","col-md-4","pr-0"],[1,"col-12","mt-3"],["alt","bobby pall photography resilience artist ","title","artist during covid19",3,"src"],["alt","bobby pall sharing stories during pandemic ","title","mothers covid19",3,"src"],[1,"col-xs-12","col-sm-6","col-md-4","col-lg-2","pr-0","mt-3"],["alt","bobby pall social distance during covid 19 ","title","social distance pandemic",3,"src"],["alt","bobby pall sharing challenges during pandemic ","title","home schooling during pandemic",3,"src"],["alt","bobby pall restaurants during pandemic","title","chef covid 19",3,"src"],["alt","house during covid 19 ","title","life in pandemic",3,"src"],["alt","bobby pall life during pandemic ","title","hygiene covid 19",3,"src"]],template:function(t,e){1&t&&(js(0,"div",0),Xs("resize",(function(t){return e.onResize(t)}),!1,Xn),js(1,"div",1),js(2,"div",2),js(3,"div",3),js(4,"div",4),Hs(5,"div",5),js(6,"div",6),js(7,"div",7),js(8,"h1",8),ka(9,"EVERYDAY, AFRICA IS OVERCOMING COVID-19 TO EMERGE MORE RESILIENT"),zs(),js(10,"h1",9),ka(11,"THIS IS OUR STORY"),zs(),zs(),zs(),zs(),zs(),zs(),zs(),js(12,"div",10),js(13,"div",11),js(14,"div",3),js(15,"h3",12),ka(16,"STORIES"),zs(),Hs(17,"hr",13),js(18,"div",4),js(19,"div",14),js(20,"div",15),js(21,"div",16),js(22,"div",4),js(23,"div",17),js(24,"div",18),Hs(25,"img",19),zs(),zs(),js(26,"div",20),js(27,"div",21),js(28,"p"),ka(29,'"Colonialism, civil wars, drought, Malaria, Ebola, HIV, we have seen it all! Africans will also conquer COVID-19 because resilience is part of our DNA" '),zs(),js(30,"div",22),js(31,"p",23),ka(32,"Name: John Otieno"),zs(),js(33,"p",23),ka(34,"Location: Limuru, Kenya."),zs(),js(35,"p"),ka(36,"Photography: Bobby Pall"),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),js(37,"div",14),js(38,"div",15),js(39,"div",16),js(40,"div",4),js(41,"div",17),js(42,"div",18),Hs(43,"img",19),zs(),zs(),js(44,"div",20),js(45,"div",21),js(46,"p"),ka(47,'\u201cMade for Africa by Africans. We too have standards! Africa has customized masks for her children." '),zs(),zs(),js(48,"div",22),js(49,"p",23),ka(50,"Name: Stephen Maswili"),zs(),js(51,"p",23),ka(52,"Location: Limuru, Kenya."),zs(),js(53,"p",23),ka(54,"Photography: Bobby Pall"),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs(),js(55,"div",24),js(56,"button",25),ka(57,"TELL US YOUR STORY "),zs(),zs(),zs(),zs(),zs(),js(58,"div",26),js(59,"h3",27),ka(60,"MORE STORIES"),zs(),js(61,"div",3),Hs(62,"hr",13),js(63,"div",4),Ls(64,qj,1,1,"app-story",28),zs(),zs(),zs(),js(65,"div",29),js(66,"div",30),js(67,"h3",27),ka(68,"FEATURED PHOTOS"),zs(),Hs(69,"hr",13),Ls(70,$j,33,9,"div",31),zs(),zs(),zs()),2&t&&(Cr(1),Us("ngStyle",Sc(6,Yj,"url("+e.backgroundImage+")")),Cr(24),aa("src",e.storyOne,rr),Cr(18),aa("src",e.storyTwo,rr),Cr(13),Us("routerLink",Ec(8,Qj)),Cr(8),Us("ngForOf",e.stories),Cr(6),Us("ngIf",e.images))},styles:['.project[_ngcontent-%COMP%]{color:#000}.project[_ngcontent-%COMP%]   .campaign-landing[_ngcontent-%COMP%]{min-height:90vh;background-color:#000;color:teal;padding-top:150px}.project[_ngcontent-%COMP%]   .campaign-landing[_ngcontent-%COMP%]   .call-theme[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6);margin:0 auto}.project[_ngcontent-%COMP%]   .campaign-landing[_ngcontent-%COMP%]   .call-theme[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .project[_ngcontent-%COMP%]   .campaign-landing[_ngcontent-%COMP%]   .call-theme[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{word-wrap:break-word}.project[_ngcontent-%COMP%]   .campaign-landing[_ngcontent-%COMP%]   .call-theme[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff}.project[_ngcontent-%COMP%]   .campaign-landing[_ngcontent-%COMP%]   .call-theme[_ngcontent-%COMP%]   .because[_ngcontent-%COMP%], .project[_ngcontent-%COMP%]   .campaign-landing[_ngcontent-%COMP%]   .call-theme[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{color:teal}.project[_ngcontent-%COMP%]   .campaign-landing[_ngcontent-%COMP%]   .call-theme[_ngcontent-%COMP%]   .hashtag[_ngcontent-%COMP%]{color:#fff}.project[_ngcontent-%COMP%]   .campaign-landing[_ngcontent-%COMP%]   .call-theme[_ngcontent-%COMP%]   .covid-hq[_ngcontent-%COMP%]{background:#fff;text-align:center;width:250px}.project[_ngcontent-%COMP%]   .campaign-landing[_ngcontent-%COMP%]   .call-theme[_ngcontent-%COMP%]   .covid-hq[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px}.project[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:bolder;font-size:2em;text-align:center}.project[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;background-color:#fff}.project[_ngcontent-%COMP%]   .goal[_ngcontent-%COMP%], .project[_ngcontent-%COMP%]   .mcf-foundation[_ngcontent-%COMP%]{background-color:#f5f5f5}.project[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%]{background-color:#0ff}.project[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%], .project[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{max-height:100vh;min-height:100vh;width:100%}.project[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6)}.project[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:bolder;height:inherit;text-align:center;padding-top:300px}.project[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";display:block;height:10px}.project[_ngcontent-%COMP%]   .landing-images[_ngcontent-%COMP%]{margin-top:1em;width:100%;padding-left:5%;padding-right:5%}.project[_ngcontent-%COMP%]   .landing-images[_ngcontent-%COMP%]   ngb-carousel[_ngcontent-%COMP%]{width:100%;padding:0}.project[_ngcontent-%COMP%]   .landing-images[_ngcontent-%COMP%]   ngb-carousel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.project[_ngcontent-%COMP%]   .landing-images[_ngcontent-%COMP%]   .carousel-control-next[_ngcontent-%COMP%]:hover, .project[_ngcontent-%COMP%]   .landing-images[_ngcontent-%COMP%]   .carousel-control-prev[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.7)}.project[_ngcontent-%COMP%]   .stories-bg[_ngcontent-%COMP%]{background-color:#f5f5f5}.project[_ngcontent-%COMP%]   .stories-bg[_ngcontent-%COMP%]   .story[_ngcontent-%COMP%]{background-color:#fff;height:100%}.project[_ngcontent-%COMP%]   .stories-bg[_ngcontent-%COMP%]   .story[_ngcontent-%COMP%]   .story-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.project[_ngcontent-%COMP%]   .stories-bg[_ngcontent-%COMP%]   .tell[_ngcontent-%COMP%]{text-align:center}.project[_ngcontent-%COMP%]   .stories-bg[_ngcontent-%COMP%]   .tell[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-content:center;border-radius:250px 750px 250px 750px/750px 250px 750px 250px;height:60px;border:3px solid;background-color:transparent;color:teal;font-weight:bolder;border-image-slice:1;border-image-source:linear-gradient(90deg,teal 0,#006464)}.project[_ngcontent-%COMP%]   .stories-bg[_ngcontent-%COMP%]   .photo-by[_ngcontent-%COMP%]{font-style:italic}.project[_ngcontent-%COMP%]   .short-info[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:transparent;border-radius:.5em;height:100px;width:100%}.project[_ngcontent-%COMP%]   .sample-images[_ngcontent-%COMP%]{text-align:center}.project[_ngcontent-%COMP%]   .sample-images[_ngcontent-%COMP%]   .artistic-images[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;width:100%;height:100%}.project[_ngcontent-%COMP%]   .sample-images[_ngcontent-%COMP%]   .artistic-images[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}']}),t})();function Kj(t,e){if(1&t){const t=$s();js(0,"div",15),js(1,"div",16),Hs(2,"img",17),zs(),js(3,"div",18),js(4,"div",19),js(5,"div",20),js(6,"h4",21),js(7,"strong"),ka(8),zs(),zs(),js(9,"p",22),ka(10),js(11,"strong"),ka(12,". . ."),zs(),zs(),js(13,"button",23),Xs("click",(function(){on(t);const n=e.$implicit;return ea().lauchHostModal(n)})),ka(14,"Read More"),zs(),zs(),zs(),zs(),zs()}if(2&t){const t=e.$implicit;Cr(2),Us("src",t.img,rr),Cr(6),Da(t.name),Cr(2),Oa("",t.bio.substring(0,100)," ")}}const Zj=function(){return["/project/home"]};let Jj=(()=>{class t{constructor(t,e){this.dbOperations=t,this.matDialog=e,this.hosts=[]}ngOnInit(){this.projectHost()}lauchHostModal(t){const e=new XT;e.disableClose=!1,e.id="modal-component",e.height="80%",e.width="400px",e.data={info:t.bio,img:t.img,name:t.name},this.matDialog.open(lP,e)}projectHost(){this.hosts=[{id:0,img:"assets/images/gallery/hosts/Bobby Pall.jpg",title:"Project Lead",name:"Bobby Pall",alt:"African art in context photographer and project manager",lessInfo:" Bobby Pall is a modern day photographic artist who believes ...",bio:"\n        Bobby Pall is a modern day photographic artist who believes that photography is the ideal medium for communicating today\u2019s issues. \n        My passion is to: \n        TOUCH those who encounter my work\n        MOVE to cause a change using the power of photography\n        INSPIRE to be part of a proactive community\n        I also seek to be a VOICE for those whose voices cannot be heard\n        I have exhibited widely across the globe, showcasing powerful photographic images that depict the importance of photography as a powerful medium of communication, one example is the South Sudan Photographic Exhibition (Forgotten Faces) that documented issues of civil war. I collaborated with the UN HABITAT to communicate Millennium Development Goals (MDGs) to the youth in the slums in Nairobi that culminated in an exhibition and a coffee table book. I also partnered with the Kenya Red Cross Society on their ground-breaking coffee table book that detailed their positive humanitarian efforts in Kenya. I have also exhibited in India, Italy, France, Canada and several African countries.\n        I am the author of Vanishing Songs of the Warriors, a coffee table book that focuses on the resilience, passion and beauty of indigenous communities. As Lead Photographer, I have also partnered with Footprints Press on the following coffee table books: Life Journeys; Scaling Heights, Life Journeys; Seeking Destiny, Wisdom of the Elders, Aspiration of a Generation; Youth of Kenya. These are books featuring role models of Kenya for posterity."},{id:1,img:"assets/images/gallery/hosts/George Muiruri.jpg",title:"Writer/Documentary Filmmaker",name:"George Muiruri",alt:"African art in context videographer",lessInfo:" I have had innumerable restarts in my life; start and ...",bio:"I have had innumerable restarts in my life; start and stop periods. Start periods that birthed new life; stop periods at junctions seeking direction.  Each, the genesis of a new opportunity, a new perception, a new idea, a new love, a new\u2026, a new\u2026 \n        I am a creator; a documentary filmmaker intertwined with a writer. The writer in me manifested three years before the filmmaker was born. Over the past 10 years of my filmmaking journey, I have had the good fortune of creating short documentary pieces for profit and non-profit organizations.\n        Covid-19 has brought me to another junction, only this time, this is not a restart. I already know what I need to do for the foreseeable future, and \u2018African Resilience in the Wake of a Pandemic\u2019, a photography and videography campaign under the Mastercard Foundation COVID-19 Public Awareness Campaign has provided the impetus. I am excited to be part of the Campaign.\n        "},{id:2,img:"assets/images/gallery/hosts/Edna Kalumbini.jpg",title:"Finance Specialist/Economist",name:"Edna Kalumbini, MA",alt:"African art in context finances",lessInfo:"I am Edna Kalumbini and I see myself as a high-impact,...",bio:"I am Edna Kalumbini and I see myself as a high-impact, solutions-oriented, team player and Finance Specialist. Accounting and management of the project accounts is my forte and I excel in delivering monthly financial reports, accounts reconciliation, planning and financial forecasting. My skills and expertise in bringing order to projects have benefited the organisations I have supported in the private sector and the non-profit sector. \n        I am now excited to be part of the team that gets to share with the world the beauty of African Art, shared by the Youth in Africa in \u2018African Resilience in the Wake of a Pandemic\u2019, a photography and videography campaign under the Mastercard Foundation COVID-19 Public Awareness Campaign. \n        "},{id:3,img:"assets/images/gallery/hosts/Lucy Mwangi.jpg",title:"Editor/Writer",name:"Lucy Mwangi",alt:"African art in context technical reviewer and editor",lessInfo:"My name is Lucy Mwangi and I am excited to provide a brief ...",bio:"   My name is Lucy Mwangi and I am excited to provide a brief insight into who I am and what drives me. I am a storytelling enthusiast that has lent her skills in the end-to-end production of over 20 publications that strive to tell the African story from an African perspective. Over the last two decades, I have partnered with research organisations, profit organisations, publishing houses, and independent writers/authors to provide editorial and communication expertise.\n        It is now a real pleasure to lend my skills and years of experience to ensure the success of \u2018African Resilience in the Wake of a Pandemic\u2019, a photography and videography campaign under the Mastercard Foundation COVID-19 Public Awareness Campaign. The Campaign is a great opportunity to witness and celebrate as the Youth of Africa use their creativity to open up about how Covid-19 has affected their lives. It is a privilege to work on this Campaign."},{id:4,img:"assets/images/gallery/hosts/Christine Kuriah.jpg",name:"Christine Njoki Kuriah, MPA",title:"Operations and Systems Development",alt:"African art in context technical reviewer and editor",lessInfo:"I am Christine Njoki Kuriah and I am delighted to tell ...",bio:"I am Christine Njoki Kuriah and I am delighted to tell you a little bit about myself. I am a passionate individual who champions causes that promote social justice and equality, civil rights and democracy. For the past two decades, I have partnered with organizations around the globe to bring my operations and systems development/ management and resource mobilization expertise to both the non - profit and public service sectors in the Healthcare, Education, Advocacy and Community Development fields.\n         Now, I am excited to use some of my professional skills and experience and be a part of \u2018African Resilience in the Wake of a Pandemic\u2019, photography and videography campaign under the MasterCard Foundation Covid - 19 Public Awareness Campaign. I get to see and hear, first - hand, the dynamic stories told by the Youth in Africa, through photographs and videos, about their deeply personal experiences as they navigate life through this global pandemic. What better way is there for them to express themselves in an honest and authentic way while letting us into their world as they convey their stories? I am honoured to be a part of this amazing Campaign.\n        "},{id:5,img:"assets/images/gallery/hosts/Xochitl Ramirez.jpg",name:"Xochitl Ramirez",alt:"African art in context designer and digital strategist",title:"Industrial Designer and, Public Policy and Social Project Developer",lessInfo:"My twenty(20) years as a Designer have taught me that ... ",bio:"My twenty(20) years as a Designer have taught me that being creative and designing out of the box is about the passion for creativity that one nurtures in their inner - most being and is not limited to the equipment or software at hand. I am a risk taker who is passionate about empowering all people regardless of race, age, or creeds. This is me, Xochitl Ramirez\u2014creativity and social development are my two great passions.\n          It is a privilege to be part of this interdisciplinary team that has taken on the task of ensuring the success of \u2018African Resilience in the Wake of a Pandemic\u2019, a photography and videography campaign under the Mastercard Foundation COVID - 19 Public Awareness Campaign. I am eager to participate in putting the creative storytelling capabilities of young African through the lens. \n        "}]}}return t.\u0275fac=function(e){return new(e||t)(Ns(O_),Ns(sP))},t.\u0275cmp=fe({type:t,selectors:[["app-team"]],decls:23,vars:5,consts:[[1,"team","py-5"],[1,"team-landing"],[1,"container","py-5"],[1,"hr-rule","mt-1"],[1,"host"],[1,"host-profile"],[1,"row"],["class","col-xs-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 mt-3",4,"ngFor","ngForOf"],[1,"partners","py-5"],[1,"container"],[1,"col-md-6"],[1,"bobby-pall","mt-5"],["src","assets/images/gallery/bobby-logo.png","alt","African art in context photographer and project manager","title","Bobby Pall",3,"routerLink"],[1,"mcf_logo",3,"routerLink"],["src","assets/images/mcf_logo.png","alt",""],[1,"col-xs-12","col-sm-12","col-md-6","col-lg-4","col-xl-4","mt-3"],[1,"p-5"],["alt","host.alt","title","host.name",1,"img-fluid",3,"src"],[1,"host-info"],[1,"card"],[1,"p-3"],[1,"name"],[1,"bio"],[1,"btn","bt",3,"click"]],template:function(t,e){1&t&&(js(0,"div",0),Hs(1,"div",1),js(2,"div",2),js(3,"h3"),ka(4,"THE TEAM"),zs(),Hs(5,"hr",3),js(6,"div",4),js(7,"div",5),js(8,"div",6),Ls(9,Kj,15,3,"div",7),zs(),zs(),zs(),zs(),js(10,"div",8),js(11,"div",9),js(12,"h3"),ka(13,"PARTNERS"),zs(),Hs(14,"hr",3),js(15,"div",4),js(16,"div",6),js(17,"div",10),js(18,"div",11),Hs(19,"img",12),zs(),zs(),js(20,"div",10),js(21,"div",13),Hs(22,"img",14),zs(),zs(),zs(),zs(),zs(),zs(),zs()),2&t&&(Cr(9),Us("ngForOf",e.hosts),Cr(10),Us("routerLink",Ec(3,Zj)),Cr(2),Us("routerLink",Ec(4,Zj)))},directives:[pd,qg],styles:[".team[_ngcontent-%COMP%]{text-align:center;height:100%;min-height:100%}.team[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2em}.team[_ngcontent-%COMP%]   .host[_ngcontent-%COMP%]   .host-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:100%;height:100%;width:100%}.team[_ngcontent-%COMP%]   .host[_ngcontent-%COMP%]   .host-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-content:center;border-radius:1em;height:60px;border:3px solid;background-color:transparent;color:#fff;font-weight:bolder;background-image:linear-gradient(90deg,teal 0,#006464)}.team[_ngcontent-%COMP%]   .partners[_ngcontent-%COMP%]{background-color:#f5f5f5}.team[_ngcontent-%COMP%]   .partners[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px}.team[_ngcontent-%COMP%]   .partners[_ngcontent-%COMP%]   .bobby-pall[_ngcontent-%COMP%], .team[_ngcontent-%COMP%]   .partners[_ngcontent-%COMP%]   .mcf_logo[_ngcontent-%COMP%]{text-align:center}"]}),t})(),tz=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-guidelines"]],decls:81,vars:0,consts:[[1,"guidelines"],[1,"rules","container","mt-5"],[1,"row"],[1,"col-md-6"],[1,"m-3"],["href","https://africanartincontext.com/"],["src","assets/images/gallery/sample/poster6.jpg"],[1,"submission"],[1,"container"],[1,"format"],[1,"mt-5"],["layout","row","layout-align","center center"],[1,"mcf","p-3"],["src","assets/images/mcf_logo.png","alt",""]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),js(2,"div",2),js(3,"div",3),js(4,"h3",4),ka(5,"Rules For Participation"),zs(),js(6,"ol"),js(7,"li"),ka(8,"Each Entrant must fill and submit an online registration form prior to submitting either or; "),js(9,"ul"),js(10,"li"),ka(11,"no more than two photographs"),zs(),js(12,"li"),ka(13,"a one minute (60 seconds) video"),zs(),zs(),zs(),js(14,"li"),ka(15,"All entries must be submitted directly on the website, "),js(16,"a",5),ka(17,"africanartincontext.com"),zs(),ka(18,", using the submission button."),zs(),js(19,"li"),ka(20,"Entrants must own the copyright and must have taken the photographs/videos themselves. They may have been taken at any time prior to the start of the Campaign."),zs(),js(21,"li"),ka(22,"Entrants should not forget to post their photos/videos if they have social media accounts, using the Campaign hashtags: #ItsUpToUs. Mastercard Foundation corporate social media may share and retweet the selected photos and videos on their corporate accounts"),zs(),zs(),zs(),js(23,"div",3),Hs(24,"img",6),zs(),zs(),zs(),js(25,"div",1),js(26,"div",2),js(27,"div",3),Hs(28,"img",6),zs(),js(29,"div",3),js(30,"h3",4),ka(31,"Conditions and Copyright"),zs(),js(32,"ul"),js(33,"li"),ka(34,"Mastercard Foundation respects the rights of the photographers and video-makers\u2019 and does not claim copyright over images/videos submitted to this Campaign. The author retains full copyright in each entry. Whenever the image/video is published, the author will be credited."),zs(),js(35,"li"),ka(36,"Participation in the Campaign grants Mastercard Foundation permission to exhibit and/or publish the photos/videos, either in part or in their entirety."),zs(),js(37,"li"),ka(38,"Mastercard Foundation has the right to apply minor changes or amendments without damaging the integrity of the project, e.g. change colours, cut the background or parts of it."),zs(),js(39,"li"),ka(40,"Mastercard Foundation does NOT own copyright and authors are free to use the photos/videos for other purposes at their choosing."),zs(),zs(),zs(),zs(),zs(),js(41,"div",7),js(42,"div",8),js(43,"div",9),js(44,"h3",10),ka(45,"Submission Format"),zs(),js(46,"ol"),js(47,"li"),ka(48,"Photographs must be submitted in "),js(49,"strong"),ka(50,".jpeg"),zs(),ka(51," and "),js(52,"strong"),ka(53,".png"),zs(),ka(54," format. Photos should be submitted with the highest quality possible regarding file size, bit depth and resolution. Both colour and/or black and white images will be accepted."),zs(),js(55,"li"),ka(56,"Videos must be submitted in "),js(57,"strong"),ka(58,".mp4"),zs(),ka(59," and "),js(60,"strong"),ka(61,".mov"),zs(),ka(62," format. They may not exceed 1 minute in run-time. Videos should be submitted with the highest quality possible regarding file size, bit depth and resolution."),zs(),js(63,"li"),ka(64," The material must not constitute copyright infringement or otherwise violate or infringe Mastercard Foundation or third party rights, including but not limited to trademark, privacy, publicity or other intellectual property rights."),zs(),js(65,"li"),ka(66,"The submission must not contain dates, texts, brand names, logos and/or trademarks."),zs(),js(67,"li"),ka(68,"The submission description and captions must be in English or contain English translations."),zs(),js(69,"li"),ka(70,"Filmmaker must have rights to use any soundtrack (music bed), sound-effects and any graphic/animation assets."),zs(),zs(),zs(),zs(),zs(),js(71,"footer",10),js(72,"div",8),js(73,"div",11),js(74,"p"),ka(75,"Brought to you by Mastercard Foundation in partnership with "),zs(),js(76,"div",12),js(77,"a",5),Hs(78,"img",13),zs(),js(79,"p"),ka(80,"The Mastercard Foundation"),zs(),zs(),zs(),zs(),zs(),zs())},styles:[""]}),t})(),ez=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-successful"]],decls:2,vars:0,template:function(t,e){1&t&&(js(0,"p"),ka(1,"successful works!"),zs())},styles:[""]}),t})();function nz(t,e){if(1&t&&(js(0,"div",9),Hs(1,"img",10),zs()),2&t){const t=ea();Cr(1),aa("src",t.work.url,rr)}}function iz(t,e){if(1&t){const t=$s();js(0,"div",9),js(1,"vg-player",11),Xs("onPlayerReady",(function(e){return on(t),ea().onPlayerReady(e)})),Hs(2,"vg-buffering"),js(3,"vg-controls"),Hs(4,"vg-play-pause"),Hs(5,"vg-playback-button"),Hs(6,"vg-time-display",12),js(7,"vg-scrub-bar"),Hs(8,"vg-scrub-bar-current-time"),Hs(9,"vg-scrub-bar-buffering-time"),zs(),Hs(10,"vg-time-display",13),Hs(11,"vg-mute"),Hs(12,"vg-volume"),Hs(13,"vg-fullscreen"),zs(),Hs(14,"video",14,15),zs(),zs()}if(2&t){const t=Fs(15),e=ea();Cr(14),Us("vgMedia",t)("src",e.video,rr)}}function rz(t,e){if(1&t&&(js(0,"div"),js(1,"p"),js(2,"strong"),ka(3,"Composition:"),zs(),ka(4),zs(),js(5,"p"),js(6,"strong"),ka(7,"Clarity:"),zs(),ka(8),zs(),js(9,"p"),js(10,"strong"),ka(11,"Lighting:"),zs(),ka(12),zs(),js(13,"p"),js(14,"strong"),ka(15,"Message:"),zs(),ka(16),zs(),js(17,"p"),js(18,"strong"),ka(19,"Theme:"),zs(),ka(20),zs(),js(21,"p"),js(22,"strong"),ka(23,"Uniqueness:"),zs(),ka(24),zs(),js(25,"p"),js(26,"strong"),ka(27,"Impression:"),zs(),ka(28),zs(),js(29,"p"),js(30,"strong"),ka(31,"Details:"),zs(),ka(32),zs(),js(33,"p"),js(34,"strong"),ka(35,"Impact:"),zs(),ka(36),zs(),js(37,"p"),js(38,"strong"),ka(39,"Inspirational:"),zs(),ka(40),zs(),js(41,"h4"),js(42,"strong"),ka(43,"Total Score:"),zs(),ka(44),zs(),zs()),2&t){const t=ea(2);Cr(4),Oa(" ",t.score.technique.composition," "),Cr(4),Oa(" ",t.score.technique.clarity," "),Cr(4),Oa(" ",t.score.technique.lighting," "),Cr(4),Oa(" ",t.score.creativity.message," "),Cr(4),Oa(" ",t.score.creativity.theme," "),Cr(4),Oa(" ",t.score.creativity.uniqueness," "),Cr(4),Oa(" ",t.score.creativity.impression," "),Cr(4),Oa(" ",t.score.wowFactor.details," "),Cr(4),Oa(" ",t.score.wowFactor.impact," "),Cr(4),Oa(" ",t.score.wowFactor.inspirational," "),Cr(4),Oa(" ",t.score.totalScore," ")}}function oz(t,e){if(1&t&&(js(0,"div"),js(1,"p"),js(2,"strong"),ka(3,"Composition:"),zs(),ka(4),zs(),js(5,"p"),js(6,"strong"),ka(7,"Stability:"),zs(),ka(8),zs(),js(9,"p"),js(10,"strong"),ka(11,"Picture Clarity:"),zs(),ka(12),zs(),js(13,"p"),js(14,"strong"),ka(15,"Lighting:"),zs(),ka(16),zs(),js(17,"p"),js(18,"strong"),ka(19,"Audio Clarity:"),zs(),ka(20),zs(),js(21,"p"),js(22,"strong"),ka(23,"Scene:"),zs(),ka(24),zs(),js(25,"p"),js(26,"strong"),ka(27,"Execution:"),zs(),ka(28),zs(),js(29,"p"),js(30,"strong"),ka(31,"Message:"),zs(),ka(32),zs(),js(33,"p"),js(34,"strong"),ka(35,"Use of Techniques:"),zs(),ka(36),zs(),js(37,"p"),js(38,"strong"),ka(39,"Use of Equipments:"),zs(),ka(40),zs(),js(41,"h4"),js(42,"strong"),ka(43,"Total Score:"),zs(),ka(44),zs(),zs()),2&t){const t=ea(2);Cr(4),Oa(" ",t.score.vTechnical.composition," "),Cr(4),Oa(" ",t.score.vTechnical.stability," "),Cr(4),Oa(" ",t.score.vTechnical.pictureClarity," "),Cr(4),Oa(" ",t.score.vTechnical.lighting," "),Cr(4),Oa(" ",t.score.vTechnical.audioClarity," "),Cr(4),Oa(" ",t.score.vEdit.scene," "),Cr(4),Oa(" ",t.score.vEdit.execution," "),Cr(4),Oa(" ",t.score.vStory.message," "),Cr(4),Oa(" ",t.score.vCreativity.useoftechniques," "),Cr(4),Oa(" ",t.score.vCreativity.useofequipments," "),Cr(4),Oa(" ",t.score.totalScore," ")}}function sz(t,e){if(1&t&&(js(0,"div",16),Ls(1,rz,45,11,"div",17),Ls(2,oz,45,11,"div",17),zs()),2&t){const t=ea();Cr(1),Us("ngIf","image"==t.score.type),Cr(1),Us("ngIf","video"==t.score.type)}}let az=(()=>{class t{constructor(t,e,n,i){this.ngZone=t,this.router=e,this.route=n,this.dbOperations=i,this.work=new jb,this.score=new Sj,this.currentUser="",this.video="assets/videos/resilience.mp4",this.id=1601554584181,this.templateChecked=!0,this.role=""}ngOnInit(){this.route.params.subscribe(t=>{this.id=+t.id,this.getArtWorkDetails(this.id.toString())})}ngAfterViewInit(){this.dbOperations.getCurrentUser().subscribe(t=>{this.currentUser=t.uid,this.getAdminRole()})}onPlayerReady(t){this.api=t,this.api.getDefaultMedia().subscriptions.loadedMetadata.subscribe(this.playVideo.bind(this))}playVideo(){this.api.play()}getArtWorkDetails(t){this.dbOperations.artworksCollection().ref.where("id","==",t).onSnapshot(t=>{t.docs.forEach(t=>{const e=t.data();this.video=e.url,this.work=e,this.getArtWorkScores(e.id)})})}getArtWorkScores(t){this.dbOperations.scoresCollections().ref.where("scoreId","==",t).onSnapshot(t=>{t.docs.forEach(t=>{const e=t.data();this.score=e,console.log(e)})})}getAdminRole(){this.dbOperations.usersCollection().ref.where("userId","==",this.currentUser).onSnapshot(t=>{t.docs.forEach(t=>{const e=t.data();console.log("sign in trial "+e.userId);let n=e.role;this.ngZone.run(()=>{n.includes("moderator")&&(this.role="moderator"),n.includes("admin")&&(this.role="admin"),n.includes("artist")&&(this.role="artist"),console.log("role "+this.role)})})})}}return t.\u0275fac=function(e){return new(e||t)(Ns(Su),Ns(Wg),Ns(km),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-artwork-score"]],decls:10,vars:3,consts:[[1,"artwork-score","pt-3","pb-5"],[1,"container-fluid"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-8","col-xl-9"],[1,"artwork"],[1,"artwork-media"],["class","card",4,"ngIf"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-4","col-xl-3"],["class","scores",4,"ngIf"],[1,"card"],["alt","",1,"img-fluid",3,"src"],[3,"onPlayerReady"],["vgProperty","current","vgFormat","mm:ss"],["vgProperty","total","vgFormat","mm:ss"],["id","singleVideo","preload","auto","crossorigin","",3,"vgMedia","src"],["media",""],[1,"scores"],[4,"ngIf"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),js(2,"div",2),js(3,"div",3),js(4,"div",4),js(5,"div",5),Ls(6,nz,2,1,"div",6),Ls(7,iz,16,2,"div",6),zs(),zs(),zs(),js(8,"div",7),Ls(9,sz,3,2,"div",8),zs(),zs(),zs(),zs()),2&t&&(Cr(6),Us("ngIf","image"==e.work.type),Cr(1),Us("ngIf","video"==e.work.type),Cr(2),Us("ngIf",e.score))},directives:[md,IA,NA,YA,nx,ex,ZA,JA,ax,ox,ix,QA,rx,RA],styles:[".artwork-score[_ngcontent-%COMP%]{color:#000}.artwork-score[_ngcontent-%COMP%], .artwork-score[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{min-height:100vh}"]}),t})();function lz(t,e){if(1&t&&(js(0,"div",3),js(1,"table",4),js(2,"tr"),js(3,"th",5),ka(4,"No."),zs(),js(5,"th",5),ka(6,"Date"),zs(),js(7,"th",5),ka(8,"Name"),zs(),js(9,"th",5),ka(10,"Country"),zs(),js(11,"th",5),ka(12,"Category"),zs(),js(13,"th",5),ka(14,"Score"),zs(),js(15,"th",5),ka(16,"Action"),zs(),zs(),js(17,"tr"),js(18,"td"),js(19,"p"),ka(20),zs(),zs(),js(21,"td"),js(22,"p"),ka(23),zs(),zs(),js(24,"td"),js(25,"p"),ka(26),zs(),zs(),js(27,"td"),js(28,"p"),ka(29),zs(),zs(),js(30,"td"),js(31,"p"),ka(32),zs(),zs(),js(33,"td"),js(34,"p"),ka(35),zs(),zs(),js(36,"td"),js(37,"div",6),js(38,"button",7),ka(39,"Spotlight"),zs(),js(40,"button",7),ka(41,"Exhibit"),zs(),zs(),zs(),zs(),zs(),zs()),2&t){const t=ea();Cr(20),Da(t.no),Cr(3),Da(t.scoredItem.date),Cr(3),Da(t.scoredItem.name),Cr(3),Da(t.scoredItem.country),Cr(3),Da(t.scoredItem.category),Cr(3),Da(t.scoredItem.totalScore)}}class cz{}let uz=(()=>{class t{constructor(t,e){this.ngZone=t,this.dbOperations=e,this.artwork=new jb,this.user=new gv,this.scoredItem=new cz}ngOnInit(){this.getArtWorkDetails(this.score.scoreId)}getArtWorkDetails(t){this.dbOperations.artworksCollection().ref.where("id","==",t).onSnapshot(t=>{t.docs.forEach(t=>{const e=t.data();this.ngZone.run(()=>{Op(e.shotDate).subscribe(t=>{this.scoredItem.date=new Fd("en").transform(this.artwork.id,"yyyy/MM/dd"),console.log(this.scoredItem.date)}),"image"===e.type&&Op("Photography").subscribe(t=>{this.scoredItem.category=t,console.log(this.scoredItem.category)}),"video"===e.type&&Op("Videography").subscribe(t=>{this.scoredItem.category=t,console.log(this.scoredItem.category)})}),this.getUserProfile(e.userId)})})}getUserProfile(t){this.dbOperations.usersCollectionById(t).onSnapshot(t=>{null!=t&&t.forEach(t=>{const e=t.data();let n=Object.assign({},e);this.ngZone.run(()=>{Op(n.country).subscribe(t=>{this.scoredItem.country=t,console.log(this.scoredItem.country)}),Op(n.firstName+" "+n.lastName).subscribe(t=>{this.scoredItem.name=t})})})})}}return t.\u0275fac=function(e){return new(e||t)(Ns(Su),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-scored-item"]],inputs:{score:"score"},decls:3,vars:1,consts:[[1,"scored-artworks"],[1,"scored-item"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[1,"table"],["align","center"],[1,"d-flex"],[1,"btn","mx-1"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),Ls(2,lz,42,6,"div",2),zs(),zs()),2&t&&(Cr(2),Us("ngIf",e.scoredItem))},directives:[md],styles:[".scored-artworks[_ngcontent-%COMP%], .scored-artworks[_ngcontent-%COMP%]   .scored-item[_ngcontent-%COMP%]{text-align:center}.scored-artworks[_ngcontent-%COMP%]   .scored-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .scored-artworks[_ngcontent-%COMP%]   .scored-item[_ngcontent-%COMP%]   vg-player[_ngcontent-%COMP%]{width:200px;margin:0 auto}.scored-artworks[_ngcontent-%COMP%]   .scored-item[_ngcontent-%COMP%]   vg-player[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;margin:0 auto}.scored-artworks[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;color:#fff;border-radius:.5em;background-color:teal}"]}),t})();function hz(t,e){if(1&t&&(js(0,"div"),Hs(1,"img",10),zs()),2&t){const t=ea(2);Cr(1),aa("src",t.scoredItem.url,rr)}}function dz(t,e){if(1&t){const t=$s();js(0,"div"),js(1,"vg-player",11),Xs("onPlayerReady",(function(e){return on(t),ea(2).onPlayerReady(e)})),Hs(2,"vg-buffering"),js(3,"vg-controls"),Hs(4,"vg-play-pause"),Hs(5,"vg-playback-button"),Hs(6,"vg-time-display",12),js(7,"vg-scrub-bar"),Hs(8,"vg-scrub-bar-current-time"),Hs(9,"vg-scrub-bar-buffering-time"),zs(),Hs(10,"vg-time-display",13),Hs(11,"vg-mute"),Hs(12,"vg-volume"),Hs(13,"vg-fullscreen"),zs(),Hs(14,"video",14,15),zs(),zs()}if(2&t){const t=Fs(15),e=ea(2);Cr(14),Us("vgMedia",t)("src",e.scoredItem.url,rr)}}function pz(t,e){if(1&t){const t=$s();js(0,"div",3),js(1,"table",4),js(2,"tr"),js(3,"th",5),ka(4,"No."),zs(),js(5,"th",5),ka(6,"Artwork"),zs(),js(7,"th",5),ka(8,"Date"),zs(),js(9,"th",5),ka(10,"Name"),zs(),js(11,"th",5),ka(12,"Country"),zs(),js(13,"th",5),ka(14,"Category"),zs(),js(15,"th",5),ka(16,"Score"),zs(),js(17,"th",5),ka(18,"Action"),zs(),zs(),js(19,"tr"),Hs(20,"td"),js(21,"td"),js(22,"div",6),Ls(23,hz,2,1,"div",7),Ls(24,dz,16,2,"div",7),zs(),zs(),js(25,"td"),js(26,"p"),ka(27),zs(),zs(),js(28,"td"),js(29,"p"),ka(30),zs(),zs(),js(31,"td"),js(32,"p"),ka(33),zs(),zs(),js(34,"td"),js(35,"p"),ka(36),zs(),zs(),js(37,"td"),js(38,"p"),ka(39),zs(),zs(),js(40,"td"),js(41,"div",8),js(42,"button",9),Xs("click",(function(){return on(t),ea().selectToSpotlight()})),ka(43),zs(),js(44,"button",9),Xs("click",(function(){return on(t),ea().declineSpotlight()})),ka(45),zs(),zs(),zs(),zs(),zs(),zs()}if(2&t){const t=ea();Cr(23),Us("ngIf","image"==t.artwork.type),Cr(1),Us("ngIf","video"==t.artwork.type),Cr(3),Da(t.scoredItem.date),Cr(3),Da(t.scoredItem.name),Cr(3),Da(t.scoredItem.country),Cr(3),Da(t.scoredItem.category),Cr(3),Da(t.scoredItem.totalScore),Cr(4),Da(t.spotlight),Cr(2),Da(t.decline)}}class fz{}let mz=(()=>{class t{constructor(t,e,n){this.router=t,this.ngZone=e,this.dbOperations=n,this.user=new gv,this.score=new Sj,this.scoredItem=new fz,this.spotlight="Spotlight",this.decline="Decline"}ngOnInit(){this.getArtWorkDetails(),this.getArtworkScore(),this.getUserProfile(this.artwork.userId)}getArtWorkDetails(){this.ngZone.run(()=>{Op(this.artwork.shotDate).subscribe(t=>{this.scoredItem.date=new Fd("en").transform(this.artwork.id,"yyyy/MM/dd")}),Op(this.artwork.url).subscribe(t=>{this.scoredItem.url=t}),"image"===this.artwork.type&&Op("Photography").subscribe(t=>{this.scoredItem.category=t}),"spotlight"===this.artwork.status?this.spotlight="Spotlight":"spotlight-declined"===this.artwork.status?this.decline="Declined":(this.spotlight="Spotlight",this.decline="Decline"),"video"===this.artwork.type&&Op("Videography").subscribe(t=>{this.scoredItem.category=t})})}getArtworkScore(){console.log("scoring"),this.dbOperations.scoresCollections().ref.where("scoreId","==",this.artwork.id).onSnapshot(t=>{t.empty?this.message="There are no scored to select":t.forEach(t=>{const e=t.data();this.score=e,this.scoredItem.totalScore=e.totalScore.toString(),console.log(e+" score")})})}getUserProfile(t){this.dbOperations.usersCollectionById(t).onSnapshot(t=>{null!=t&&t.forEach(t=>{const e=t.data();let n=Object.assign({},e);this.ngZone.run(()=>{Op(n.country).subscribe(t=>{this.scoredItem.country=t,console.log(this.scoredItem.country)}),Op(n.firstName+" "+n.lastName).subscribe(t=>{this.scoredItem.name=t})})})})}selectToSpotlight(){this.dbOperations.artworksCollection().doc(this.artwork.artworkId).update({status:"spotlight",updatedAt:(new Date).getTime()+""}).then(t=>{console.log("success")}).catch(t=>{console.log(t.message)})}declineSpotlight(){this.dbOperations.artworksCollection().doc(this.artwork.artworkId).update({status:"spotlight-declined",updatedAt:(new Date).getTime()+""}).then(t=>{}).catch(t=>{})}onPlayerReady(t){this.api=t,this.api.getDefaultMedia().subscriptions.loadedMetadata.subscribe(this.playVideo.bind(this))}playVideo(){this.api.pause()}}return t.\u0275fac=function(e){return new(e||t)(Ns(Wg),Ns(Su),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-select-item"]],inputs:{artwork:"artwork"},decls:3,vars:1,consts:[[1,"select-artworks"],[1,"select-item"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[1,"table"],["align","center"],[1,"filtering-image"],[4,"ngIf"],[1,"d-flex"],[1,"btn","mx-1",3,"click"],["alt","",3,"src"],[3,"onPlayerReady"],["vgProperty","current","vgFormat","mm:ss"],["vgProperty","total","vgFormat","mm:ss"],["id","singleVideo","preload","auto","crossorigin","",3,"vgMedia","src"],["media",""]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),Ls(2,pz,46,9,"div",2),zs(),zs()),2&t&&(Cr(2),Us("ngIf",e.scoredItem))},directives:[md,IA,NA,YA,nx,ex,ZA,JA,ax,ox,ix,QA,rx,RA],styles:[".select-artworks[_ngcontent-%COMP%], .select-artworks[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]{text-align:center}.select-artworks[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .select-artworks[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   vg-player[_ngcontent-%COMP%]{width:150px;margin:0 auto}.select-artworks[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   vg-player[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;margin:0 auto}.select-artworks[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;color:#f8e5e5;border-radius:.5em;background-color:teal}"]}),t})();function gz(t,e){if(1&t&&Hs(0,"app-select-item",5),2&t){const t=e.$implicit;Us("no",e.index)("artwork",t)}}let vz=(()=>{class t{constructor(t,e,n){this.ngZone=t,this.router=e,this.dbOperations=n,this.scored=[]}ngOnInit(){this.getScoredArtworks()}getScoredArtworks(){this.scored=[],this.dbOperations.artworksCollection().ref.where("status","==","scored").onSnapshot(t=>{let e=t.docChanges();e&&(t.empty?this.message="There are no scored to select":e.forEach(t=>{const e=t.doc.data();let n=Object.assign({},e);console.log(e),this.scored.push(n)}))})}}return t.\u0275fac=function(e){return new(e||t)(Ns(Su),Ns(Wg),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-select-artworks"]],decls:6,vars:2,consts:[[1,"select-artworks"],[1,"select-tables"],[3,"no","artwork",4,"ngFor","ngForOf"],[1,"empty-message","text-center"],[1,"message","display-4","pt-5","mt-5"],[3,"no","artwork"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),Ls(2,gz,1,2,"app-select-item",2),zs(),js(3,"div",3),js(4,"p",4),ka(5),zs(),zs(),zs()),2&t&&(Cr(2),Us("ngForOf",e.scored),Cr(3),Da(e.message))},directives:[pd,mz],styles:[".select-artworks[_ngcontent-%COMP%]{min-height:100vh;color:#000}.select-artworks[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]{min-height:100vh}"]}),t})();const yz=function(t){return["/project/admin/score/",t]};function bz(t,e){if(1&t&&Hs(0,"app-artwork-item",7),2&t){const t=e.$implicit;Us("work",t)("routerLink",Sc(2,yz,t.id))}}let _z=(()=>{class t{constructor(t,e){this.router=t,this.dbOperations=e,this.artworks=[],this.loading=!1,this.currentUser=""}ngOnInit(){}ngAfterViewInit(){this.getArtWorks()}getArtWorks(){this.artworks=[],this.dbOperations.artworksCollection().ref.where("status","==","approved").onSnapshot(t=>{t.empty?this.message="There are no artworks to score":t.docChanges().forEach(t=>{const e=t.doc.data();this.artworks.push(e)})})}}return t.\u0275fac=function(e){return new(e||t)(Ns(Wg),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-score-artworks"]],decls:8,vars:2,consts:[[1,"score-artworks"],[1,"container-fluid"],[1,"score-item"],[1,"row"],["class","col-xs-12 col-sm-6 col-md-4 col-lg-4 col-xl-3 mt-3",3,"work","routerLink",4,"ngFor","ngForOf"],[1,"emapty-message","text-center"],[1,"display-4","pt-5","mt-5"],[1,"col-xs-12","col-sm-6","col-md-4","col-lg-4","col-xl-3","mt-3",3,"work","routerLink"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),js(2,"div",2),js(3,"div",3),Ls(4,bz,1,4,"app-artwork-item",4),zs(),js(5,"div",5),js(6,"p",6),ka(7),zs(),zs(),zs(),zs(),zs()),2&t&&(Cr(4),Us("ngForOf",e.artworks),Cr(3),Da(e.message))},directives:[pd,wj,qg],styles:[".score-artworks[_ngcontent-%COMP%]{color:#000}.score-artworks[_ngcontent-%COMP%], .score-artworks[_ngcontent-%COMP%]   .score-item[_ngcontent-%COMP%]{min-height:100vh}"]}),t})();const wz=["pdfViewerContainer"],Az=function(t){const e=new t.EventBus(!0);var n;return(n=e).on("documentload",(function(){const t=document.createEvent("CustomEvent");t.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(t)})),n.on("pagerendered",(function(t){const e=document.createEvent("CustomEvent");e.initCustomEvent("pagerendered",!0,!0,{pageNumber:t.pageNumber,cssTransform:t.cssTransform}),t.source.div.dispatchEvent(e)})),n.on("textlayerrendered",(function(t){const e=document.createEvent("CustomEvent");e.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:t.pageNumber}),t.source.textLayerDiv.dispatchEvent(e)})),n.on("pagechanging",(function(t){const e=document.createEvent("UIEvents");e.initEvent("pagechanging",!0,!0),e.pageNumber=t.pageNumber,t.source.container.dispatchEvent(e)})),n.on("pagesinit",(function(t){const e=document.createEvent("CustomEvent");e.initCustomEvent("pagesinit",!0,!0,null),t.source.container.dispatchEvent(e)})),n.on("pagesloaded",(function(t){const e=document.createEvent("CustomEvent");e.initCustomEvent("pagesloaded",!0,!0,{pagesCount:t.pagesCount}),t.source.container.dispatchEvent(e)})),n.on("scalechange",(function(t){const e=document.createEvent("UIEvents");e.initEvent("scalechange",!0,!0),e.scale=t.scale,e.presetValue=t.presetValue,t.source.container.dispatchEvent(e)})),n.on("updateviewarea",(function(t){const e=document.createEvent("UIEvents");e.initEvent("updateviewarea",!0,!0),e.location=t.location,t.source.container.dispatchEvent(e)})),n.on("find",(function(t){if(t.source===window)return;const e=document.createEvent("CustomEvent");e.initCustomEvent("find"+t.type,!0,!0,{query:t.query,phraseSearch:t.phraseSearch,caseSensitive:t.caseSensitive,highlightAll:t.highlightAll,findPrevious:t.findPrevious}),window.dispatchEvent(e)})),n.on("attachmentsloaded",(function(t){const e=document.createEvent("CustomEvent");e.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:t.attachmentsCount}),t.source.container.dispatchEvent(e)})),n.on("sidebarviewchanged",(function(t){const e=document.createEvent("CustomEvent");e.initCustomEvent("sidebarviewchanged",!0,!0,{view:t.view}),t.source.outerContainer.dispatchEvent(e)})),n.on("pagemode",(function(t){const e=document.createEvent("CustomEvent");e.initCustomEvent("pagemode",!0,!0,{mode:t.mode}),t.source.pdfViewer.container.dispatchEvent(e)})),n.on("namedaction",(function(t){const e=document.createEvent("CustomEvent");e.initCustomEvent("namedaction",!0,!0,{action:t.action}),t.source.pdfViewer.container.dispatchEvent(e)})),n.on("presentationmodechanged",(function(t){const e=document.createEvent("CustomEvent");e.initCustomEvent("presentationmodechanged",!0,!0,{active:t.active,switchInProgress:t.switchInProgress}),window.dispatchEvent(e)})),n.on("outlineloaded",(function(t){const e=document.createEvent("CustomEvent");e.initCustomEvent("outlineloaded",!0,!0,{outlineCount:t.outlineCount}),t.source.container.dispatchEvent(e)})),e};var xz;let Cz,Ez;function Sz(){return"undefined"==typeof window}Sz()||(Cz=i("lRFz"),Ez=i("louq"),Cz.verbosity=Cz.VerbosityLevel.ERRORS);var Mz=function(t){return t[t.DISABLED=0]="DISABLED",t[t.ENABLED=1]="ENABLED",t[t.ENHANCED=2]="ENHANCED",t}({});let Tz=(()=>{let t=xz=class{constructor(t){if(this.element=t,this.isVisible=!1,this._cMapsUrl=void 0!==Cz?`https://unpkg.com/pdfjs-dist@${Cz.version}/cmaps/`:null,this._renderText=!0,this._renderTextMode=Mz.ENABLED,this._stickToPage=!1,this._originalSize=!0,this._page=1,this._zoom=1,this._zoomScale="page-width",this._rotation=0,this._showAll=!0,this._canAutoResize=!0,this._fitToPage=!1,this._externalLinkTarget="blank",this._showBorders=!1,this.isInitialized=!1,this.afterLoadComplete=new Fc,this.pageRendered=new Fc,this.textLayerRendered=new Fc,this.onError=new Fc,this.onProgress=new Fc,this.pageChange=new Fc(!0),Sz())return;let e;e=window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${Cz.version}/pdf.worker.min.js`,Cz.GlobalWorkerOptions.workerSrc=e}set cMapsUrl(t){this._cMapsUrl=t}set page(t){const e=t=parseInt(t,10)||1;this._pdf&&(t=this.getValidPageNumber(t)),this._page=t,e!==t&&this.pageChange.emit(t)}set renderText(t){this._renderText=t}set renderTextMode(t){this._renderTextMode=t}set originalSize(t){this._originalSize=t}set showAll(t){this._showAll=t}set stickToPage(t){this._stickToPage=t}set zoom(t){t<=0||(this._zoom=t)}get zoom(){return this._zoom}set zoomScale(t){this._zoomScale=t}get zoomScale(){return this._zoomScale}set rotation(t){"number"==typeof t&&t%90==0?this._rotation=t:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(t){this._externalLinkTarget=t}set autoresize(t){this._canAutoResize=Boolean(t)}set fitToPage(t){this._fitToPage=Boolean(t)}set showBorders(t){this._showBorders=Boolean(t)}static getLinkTarget(t){switch(t){case"blank":return Cz.LinkTarget.BLANK;case"none":return Cz.LinkTarget.NONE;case"self":return Cz.LinkTarget.SELF;case"parent":return Cz.LinkTarget.PARENT;case"top":return Cz.LinkTarget.TOP}return null}static setExternalLinkTarget(t){const e=xz.getLinkTarget(t);null!==e&&(Cz.externalLinkTarget=e)}ngAfterViewChecked(){if(this.isInitialized)return;const t=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=t?!1===this.isVisible&&null!=t&&(this.isVisible=!0,setTimeout(()=>{this.ngOnInit(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){!Sz()&&this.isVisible&&(this.isInitialized=!0,this.setupMultiPageViewer(),this.setupSinglePageViewer())}ngOnDestroy(){this.clear()}onPageResize(){this._canAutoResize&&this._pdf&&(this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.updateSize()},100))}get pdfLinkService(){return this._showAll?this.pdfMultiPageLinkService:this.pdfSinglePageLinkService}get pdfViewer(){return this.getCurrentViewer()}get pdfFindController(){return this._showAll?this.pdfMultiPageFindController:this.pdfSinglePageFindController}ngOnChanges(t){if(!Sz()&&this.isVisible)if("src"in t)this.loadPDF();else if(this._pdf){if("renderText"in t?(this.getCurrentViewer().textLayerMode=this._renderText?this._renderTextMode:Mz.DISABLED,this.resetPdfDocument()):"showAll"in t&&this.resetPdfDocument(),"page"in t){if(t.page.currentValue===this._latestScrolledPage)return;this.getCurrentViewer().scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){const t=this.getCurrentViewer();this._pdf.getPage(t.currentPageNumber).then(e=>{const n=this._rotation||e.rotate,i=e.getViewport({scale:this._zoom,rotation:n}).width*xz.CSS_UNITS;let r=this._zoom,o=!0;if(!this._originalSize||this._fitToPage&&i>this.pdfViewerContainer.nativeElement.clientWidth){const t=e.getViewport({scale:1,rotation:n});r=this.getScale(t.width,t.height),o=!this._stickToPage}t._setScale(r,o)})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._pdf.destroy(),this._pdf=null,this.pdfMultiPageViewer.setDocument(null),this.pdfSinglePageViewer.setDocument(null),this.pdfMultiPageLinkService.setDocument(null,null),this.pdfSinglePageLinkService.setDocument(null,null),this.pdfMultiPageFindController.setDocument(null),this.pdfSinglePageFindController.setDocument(null))}setupMultiPageViewer(){Cz.disableTextLayer=!this._renderText,xz.setExternalLinkTarget(this._externalLinkTarget);const t=Az(Ez);t.on("pagerendered",t=>{this.pageRendered.emit(t)}),t.on("pagechanging",t=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=setTimeout(()=>{this._latestScrolledPage=t.pageNumber,this.pageChange.emit(t.pageNumber)},100)}),t.on("textlayerrendered",t=>{this.textLayerRendered.emit(t)}),this.pdfMultiPageLinkService=new Ez.PDFLinkService({eventBus:t}),this.pdfMultiPageFindController=new Ez.PDFFindController({linkService:this.pdfMultiPageLinkService,eventBus:t});const e={eventBus:t,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfMultiPageLinkService,textLayerMode:this._renderText?this._renderTextMode:Mz.DISABLED,findController:this.pdfMultiPageFindController};this.pdfMultiPageViewer=new Ez.PDFViewer(e),this.pdfMultiPageLinkService.setViewer(this.pdfMultiPageViewer),this.pdfMultiPageFindController.setDocument(this._pdf)}setupSinglePageViewer(){Cz.disableTextLayer=!this._renderText,xz.setExternalLinkTarget(this._externalLinkTarget);const t=Az(Ez);t.on("pagechanging",t=>{t.pageNumber!=this._page&&(this.page=t.pageNumber)}),t.on("pagerendered",t=>{this.pageRendered.emit(t)}),t.on("textlayerrendered",t=>{this.textLayerRendered.emit(t)}),this.pdfSinglePageLinkService=new Ez.PDFLinkService({eventBus:t}),this.pdfSinglePageFindController=new Ez.PDFFindController({linkService:this.pdfSinglePageLinkService,eventBus:t});const e={eventBus:t,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfSinglePageLinkService,textLayerMode:this._renderText?this._renderTextMode:Mz.DISABLED,findController:this.pdfSinglePageFindController};this.pdfSinglePageViewer=new Ez.PDFSinglePageViewer(e),this.pdfSinglePageLinkService.setViewer(this.pdfSinglePageViewer),this.pdfSinglePageFindController.setDocument(this._pdf),this.pdfSinglePageViewer._currentPageNumber=this._page}getValidPageNumber(t){return t<1?1:t>this._pdf.numPages?this._pdf.numPages:t}getDocumentParams(){const t=typeof this.src;if(!this._cMapsUrl)return this.src;const e={cMapUrl:this._cMapsUrl,cMapPacked:!0};return"string"===t?e.url=this.src:"object"===t&&(void 0!==this.src.byteLength?e.data=this.src:Object.assign(e,this.src)),e}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.loadingTask=Cz.getDocument(this.getDocumentParams()),this.loadingTask.onProgress=t=>{this.onProgress.emit(t)};const t=this.src;this.loadingTask.promise.then(e=>{this._pdf=e,this.lastLoaded=t,this.afterLoadComplete.emit(e),this.pdfMultiPageViewer||(this.setupMultiPageViewer(),this.setupSinglePageViewer()),this.resetPdfDocument(),this.update()},t=>{this.onError.emit(t)})}update(){this.page=this._page,this.render()}render(){this._page=this.getValidPageNumber(this._page);const t=this.getCurrentViewer();0===this._rotation&&t.pagesRotation===this._rotation||setTimeout(()=>{t.pagesRotation=this._rotation}),this._stickToPage&&setTimeout(()=>{t.currentPageNumber=this._page}),this.updateSize()}getScale(t,e){const n=this._showBorders?2*xz.BORDER_WIDTH:0,i=this.pdfViewerContainer.nativeElement.clientWidth-n,r=this.pdfViewerContainer.nativeElement.clientHeight-n;if(0===r||0===e||0===i||0===t)return 1;let o=1;switch(this._zoomScale){case"page-fit":o=Math.min(r/e,i/t);break;case"page-height":o=r/e;break;case"page-width":default:o=i/t}return this._zoom*o/xz.CSS_UNITS}getCurrentViewer(){return this._showAll?this.pdfMultiPageViewer:this.pdfSinglePageViewer}resetPdfDocument(){this.pdfFindController.setDocument(this._pdf),this._showAll?(this.pdfSinglePageViewer.setDocument(null),this.pdfSinglePageLinkService.setDocument(null),this.pdfMultiPageViewer.setDocument(this._pdf),this.pdfMultiPageLinkService.setDocument(this._pdf,null)):(this.pdfMultiPageViewer.setDocument(null),this.pdfMultiPageLinkService.setDocument(null),this.pdfSinglePageViewer.setDocument(this._pdf),this.pdfSinglePageLinkService.setDocument(this._pdf,null))}};return t.\u0275fac=function(e){return new(e||t)(Ns(tl))},t.\u0275cmp=fe({type:t,selectors:[["pdf-viewer"]],viewQuery:function(t,e){var n;1&t&&Qc(wz,!0),2&t&&$c(n=tu())&&(e.pdfViewerContainer=n.first)},hostBindings:function(t,e){1&t&&Xs("resize",(function(){return e.onPageResize()}),!1,Xn)},inputs:{cMapsUrl:["c-maps-url","cMapsUrl"],page:"page",renderText:["render-text","renderText"],renderTextMode:["render-text-mode","renderTextMode"],originalSize:["original-size","originalSize"],showAll:["show-all","showAll"],stickToPage:["stick-to-page","stickToPage"],zoom:"zoom",zoomScale:["zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:["external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:["fit-to-page","fitToPage"],showBorders:["show-borders","showBorders"],src:"src"},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[Re],decls:3,vars:0,consts:[[1,"ng2-pdf-viewer-container"],["pdfViewerContainer",""],[1,"pdfViewer"]],template:function(t,e){1&t&&(js(0,"div",0,1),Hs(2,"div",2),zs())},styles:['.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:relative;height:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]     .textLayer{position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;opacity:.2;line-height:1}[_nghost-%COMP%]     .textLayer>span{color:transparent;position:absolute;white-space:pre;cursor:text;-webkit-transform-origin:0 0;transform-origin:0 0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::-moz-selection{background:#00f}[_nghost-%COMP%]     .textLayer ::selection{background:#00f}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;left:0;top:100%;right:0;bottom:0;z-index:-1;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}[_nghost-%COMP%]     .annotationLayer section{position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a, [_nghost-%COMP%]     .annotationLayer .linkAnnotation>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover, [_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover{opacity:.2;background:#ff0;box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{background-color:rgba(0,54,255,.13);border:1px solid transparent;box-sizing:border-box;font-size:9px;height:100%;margin:0;padding:0 3px;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select{background-color:rgba(0,54,255,.13);border:1px solid transparent;box-sizing:border-box;font-size:9px;height:100%;margin:0;padding:0 3px;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-color:rgba(0,54,255,.13);border:1px solid transparent;box-sizing:border-box;font-size:9px;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{font:message-box;font-size:9px;resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled]{background:0 0;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled]{background:0 0;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:0 0;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover{border:1px solid #000}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover{border:1px solid #000}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid #000}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus{background:0 0;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:0 0;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{background-color:#000;content:"";display:block;position:absolute;height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:#000;content:"";display:block;position:absolute;border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{-webkit-transform:rotate(45deg);transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:115%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;width:20em}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;z-index:200;max-width:20em;background-color:#ff9;box-shadow:0 2px 5px #888;border-radius:2px;padding:6px;margin-left:5px;cursor:pointer;font:message-box;font-size:9px;word-wrap:break-word}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:9px}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popup span{display:inline-block;margin-left:5px}[_nghost-%COMP%]     .annotationLayer .popup p{border-top:1px solid #333;margin-top:2px;padding-top:2px}[_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation{cursor:pointer}[_nghost-%COMP%]     .pdfViewer{padding-bottom:10px}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:1px auto -8px;position:relative;overflow:visible;border:9px solid rgba(0,0,0,.01);box-sizing:initial;background-clip:content-box;-webkit-border-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAQAAADYWf5HAAAA6UlEQVR4Xl2Pi2rEMAwE16fm1f7/r14v7w4rI0IzLAF7hLxNevBSEMEF5+OilNCsRd8ZMyn+a4NmsOT8WJw1lFbSYgGFzF2bLFoLjTClWjKKGRWpDYAGXUnZ4uhbBUzF3Oe/GG/ue2fn4GgsyXhNgysV2JnrhKEMg4fEZcALmiKbNhBBRFpSyDOj1G4QOVly6O1FV54ZZq8OVygrciDt6JazRgi1ljTPH0gbrPmHPXAbCiDd4GawIjip1TPh9tt2sz24qaCjr/jAb/GBFTbq9KZ7Ke/Cqt8nayUikZKsWZK7Fe6bg5dOUt8fZHWG2BHc+6EAAAAASUVORK5CYII=) 9 9 repeat;-o-border-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAQAAADYWf5HAAAA6UlEQVR4Xl2Pi2rEMAwE16fm1f7/r14v7w4rI0IzLAF7hLxNevBSEMEF5+OilNCsRd8ZMyn+a4NmsOT8WJw1lFbSYgGFzF2bLFoLjTClWjKKGRWpDYAGXUnZ4uhbBUzF3Oe/GG/ue2fn4GgsyXhNgysV2JnrhKEMg4fEZcALmiKbNhBBRFpSyDOj1G4QOVly6O1FV54ZZq8OVygrciDt6JazRgi1ljTPH0gbrPmHPXAbCiDd4GawIjip1TPh9tt2sz24qaCjr/jAb/GBFTbq9KZ7Ke/Cqt8nayUikZKsWZK7Fe6bg5dOUt8fZHWG2BHc+6EAAAAASUVORK5CYII=) 9 9 repeat;border-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAQAAADYWf5HAAAA6UlEQVR4Xl2Pi2rEMAwE16fm1f7/r14v7w4rI0IzLAF7hLxNevBSEMEF5+OilNCsRd8ZMyn+a4NmsOT8WJw1lFbSYgGFzF2bLFoLjTClWjKKGRWpDYAGXUnZ4uhbBUzF3Oe/GG/ue2fn4GgsyXhNgysV2JnrhKEMg4fEZcALmiKbNhBBRFpSyDOj1G4QOVly6O1FV54ZZq8OVygrciDt6JazRgi1ljTPH0gbrPmHPXAbCiDd4GawIjip1TPh9tt2sz24qaCjr/jAb/GBFTbq9KZ7Ke/Cqt8nayUikZKsWZK7Fe6bg5dOUt8fZHWG2BHc+6EAAAAASUVORK5CYII=) 9 9 repeat;background-color:#fff}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.removePageBorders{padding-bottom:0}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page{display:inline-block;vertical-align:middle;margin-left:-3.5px;margin-right:-3.5px}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:-3.5px;margin-right:-3.5px}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;left:0;top:0;right:0;bottom:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQAAP///wAAAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJBwAAACwAAAAAGAAYAAAFriAgjiQAQWVaDgr5POSgkoTDjFE0NoQ8iw8HQZQTDQjDn4jhSABhAAOhoTqSDg7qSUQwxEaEwwFhXHhHgzOA1xshxAnfTzotGRaHglJqkJcaVEqCgyoCBQkJBQKDDXQGDYaIioyOgYSXA36XIgYMBWRzXZoKBQUMmil0lgalLSIClgBpO0g+s26nUWddXyoEDIsACq5SsTMMDIECwUdJPw0Mzsu0qHYkw72bBmozIQAh+QQJBwAAACwAAAAAGAAYAAAFsCAgjiTAMGVaDgR5HKQwqKNxIKPjjFCk0KNXC6ATKSI7oAhxWIhezwhENTCQEoeGCdWIPEgzESGxEIgGBWstEW4QCGGAIJEoxGmGt5ZkgCRQQHkGd2CESoeIIwoMBQUMP4cNeQQGDYuNj4iSb5WJnmeGng0CDGaBlIQEJziHk3sABidDAHBgagButSKvAAoyuHuUYHgCkAZqebw0AgLBQyyzNKO3byNuoSS8x8OfwIchACH5BAkHAAAALAAAAAAYABgAAAW4ICCOJIAgZVoOBJkkpDKoo5EI43GMjNPSokXCINKJCI4HcCRIQEQvqIOhGhBHhUTDhGo4diOZyFAoKEQDxra2mAEgjghOpCgz3LTBIxJ5kgwMBShACREHZ1V4Kg1rS44pBAgMDAg/Sw0GBAQGDZGTlY+YmpyPpSQDiqYiDQoCliqZBqkGAgKIS5kEjQ21VwCyp76dBHiNvz+MR74AqSOdVwbQuo+abppo10ssjdkAnc0rf8vgl8YqIQAh+QQJBwAAACwAAAAAGAAYAAAFrCAgjiQgCGVaDgZZFCQxqKNRKGOSjMjR0qLXTyciHA7AkaLACMIAiwOC1iAxCrMToHHYjWQiA4NBEA0Q1RpWxHg4cMXxNDk4OBxNUkPAQAEXDgllKgMzQA1pSYopBgonCj9JEA8REQ8QjY+RQJOVl4ugoYssBJuMpYYjDQSliwasiQOwNakALKqsqbWvIohFm7V6rQAGP6+JQLlFg7KDQLKJrLjBKbvAor3IKiEAIfkECQcAAAAsAAAAABgAGAAABbUgII4koChlmhokw5DEoI4NQ4xFMQoJO4uuhignMiQWvxGBIQC+AJBEUyUcIRiyE6CR0CllW4HABxBURTUw4nC4FcWo5CDBRpQaCoF7VjgsyCUDYDMNZ0mHdwYEBAaGMwwHDg4HDA2KjI4qkJKUiJ6faJkiA4qAKQkRB3E0i6YpAw8RERAjA4tnBoMApCMQDhFTuySKoSKMJAq6rD4GzASiJYtgi6PUcs9Kew0xh7rNJMqIhYchACH5BAkHAAAALAAAAAAYABgAAAW0ICCOJEAQZZo2JIKQxqCOjWCMDDMqxT2LAgELkBMZCoXfyCBQiFwiRsGpku0EshNgUNAtrYPT0GQVNRBWwSKBMp98P24iISgNDAS4ipGA6JUpA2WAhDR4eWM/CAkHBwkIDYcGiTOLjY+FmZkNlCN3eUoLDmwlDW+AAwcODl5bYl8wCVYMDw5UWzBtnAANEQ8kBIM0oAAGPgcREIQnVloAChEOqARjzgAQEbczg8YkWJq8nSUhACH5BAkHAAAALAAAAAAYABgAAAWtICCOJGAYZZoOpKKQqDoORDMKwkgwtiwSBBYAJ2owGL5RgxBziQQMgkwoMkhNqAEDARPSaiMDFdDIiRSFQowMXE8Z6RdpYHWnEAWGPVkajPmARVZMPUkCBQkJBQINgwaFPoeJi4GVlQ2Qc3VJBQcLV0ptfAMJBwdcIl+FYjALQgimoGNWIhAQZA4HXSpLMQ8PIgkOSHxAQhERPw7ASTSFyCMMDqBTJL8tf3y2fCEAIfkECQcAAAAsAAAAABgAGAAABa8gII4k0DRlmg6kYZCoOg5EDBDEaAi2jLO3nEkgkMEIL4BLpBAkVy3hCTAQKGAznM0AFNFGBAbj2cA9jQixcGZAGgECBu/9HnTp+FGjjezJFAwFBQwKe2Z+KoCChHmNjVMqA21nKQwJEJRlbnUFCQlFXlpeCWcGBUACCwlrdw8RKGImBwktdyMQEQciB7oACwcIeA4RVwAODiIGvHQKERAjxyMIB5QlVSTLYLZ0sW8hACH5BAkHAAAALAAAAAAYABgAAAW0ICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWPM5wNiV0UDUIBNkdoepTfMkA7thIECiyRtUAGq8fm2O4jIBgMBA1eAZ6Knx+gHaJR4QwdCMKBxEJRggFDGgQEREPjjAMBQUKIwIRDhBDC2QNDDEKoEkDoiMHDigICGkJBS2dDA6TAAnAEAkCdQ8ORQcHTAkLcQQODLPMIgIJaCWxJMIkPIoAt3EhACH5BAkHAAAALAAAAAAYABgAAAWtICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWHM5wNiV0UN3xdLiqr+mENcWpM9TIbrsBkEck8oC0DQqBQGGIz+t3eXtob0ZTPgNrIwQJDgtGAgwCWSIMDg4HiiUIDAxFAAoODwxDBWINCEGdSTQkCQcoegADBaQ6MggHjwAFBZUFCm0HB0kJCUy9bAYHCCPGIwqmRq0jySMGmj6yRiEAIfkECQcAAAAsAAAAABgAGAAABbIgII4k0DRlmg6kYZCsOg4EKhLE2BCxDOAxnIiW84l2L4BLZKipBopW8XRLDkeCiAMyMvQAA+uON4JEIo+vqukkKQ6RhLHplVGN+LyKcXA4Dgx5DWwGDXx+gIKENnqNdzIDaiMECwcFRgQCCowiCAcHCZIlCgICVgSfCEMMnA0CXaU2YSQFoQAKUQMMqjoyAglcAAyBAAIMRUYLCUkFlybDeAYJryLNk6xGNCTQXY0juHghACH5BAkHAAAALAAAAAAYABgAAAWzICCOJNA0ZVoOAmkY5KCSSgSNBDE2hDyLjohClBMNij8RJHIQvZwEVOpIekRQJyJs5AMoHA+GMbE1lnm9EcPhOHRnhpwUl3AsknHDm5RN+v8qCAkHBwkIfw1xBAYNgoSGiIqMgJQifZUjBhAJYj95ewIJCQV7KYpzBAkLLQADCHOtOpY5PgNlAAykAEUsQ1wzCgWdCIdeArczBQVbDJ0NAqyeBb64nQAGArBTt8R8mLuyPyEAOwAAAAAAAAAAAA==) center no-repeat}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{margin-left:0;margin-right:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page, [_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .spread{display:block}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page, [_nghost-%COMP%]     .pdfPresentationMode .pdfViewer.removePageBorders .page{margin-left:auto;margin-right:auto}[_nghost-%COMP%]     .pdfPresentationMode:-ms-fullscreen .pdfViewer .page{margin-bottom:100%!important}[_nghost-%COMP%]     .pdfPresentationMode:-webkit-full-screen .pdfViewer .page{margin-bottom:100%;border:0}[_nghost-%COMP%]     .pdfPresentationMode:-moz-full-screen .pdfViewer .page, [_nghost-%COMP%]     .pdfPresentationMode:-webkit-full-screen .pdfViewer .page, [_nghost-%COMP%]     .pdfPresentationMode:fullscreen .pdfViewer .page{margin-bottom:100%;border:0}']}),t.CSS_UNITS=96/72,t.BORDER_WIDTH=9,t})(),Pz=(()=>{let t=class{};return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)}}),t})();function kz(t,e){if(1&t&&(js(0,"div"),Hs(1,"img",2),zs()),2&t){const t=ea();Cr(1),aa("src",t.artwork.url,rr)}}function Dz(t,e){if(1&t){const t=$s();js(0,"div"),js(1,"vg-player",3),Xs("onPlayerReady",(function(e){return on(t),ea().onPlayerReady(e)})),Hs(2,"vg-buffering"),js(3,"vg-controls"),Hs(4,"vg-play-pause"),Hs(5,"vg-time-display",4),Hs(6,"vg-fullscreen"),zs(),Hs(7,"video",5,6),zs(),zs()}if(2&t){const t=Fs(8),e=ea();Cr(7),Us("vgMedia",t)("src",e.artwork.url,rr)}}function Oz(t,e){if(1&t&&(js(0,"div"),Hs(1,"pdf-viewer",7),zs()),2&t){const t=ea();Cr(1),Us("src",t.consentForm)("original-size",!1)}}let Rz=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.artwork=new jb,this.modalType="",this.consentForm=""}ngOnInit(){this.artwork=this.data.artwork,this.modalType=this.data.modalType,"video"===this.modalType&&(this.consentForm=this.artwork.subjectConsentForm),"artist"===this.modalType&&(this.consentForm=this.artwork.artistConsentForm),"subject"===this.modalType&&(this.consentForm=this.artwork.subjectConsentForm)}onPlayerReady(t){this.api=t,this.api.getDefaultMedia().subscriptions.loadedMetadata.subscribe(this.playVideo.bind(this))}playVideo(){this.api.pause()}}return t.\u0275fac=function(e){return new(e||t)(Ns(eP),Ns(nP,8))},t.\u0275cmp=fe({type:t,selectors:[["app-artwork-modal"]],decls:4,vars:3,consts:[[1,"modal-data-viewer"],[4,"ngIf"],["alt","",3,"src"],[3,"onPlayerReady"],["vgProperty","total","vgFormat","mm:ss"],["id","singleVideo","preload","auto","crossorigin","",3,"vgMedia","src"],["media",""],[3,"src","original-size"]],template:function(t,e){1&t&&(js(0,"div",0),Ls(1,kz,2,1,"div",1),Ls(2,Dz,9,2,"div",1),Ls(3,Oz,2,2,"div",1),zs()),2&t&&(Cr(1),Us("ngIf","image"==e.artwork.type),Cr(1),Us("ngIf","video"==e.artwork.type),Cr(1),Us("ngIf",e.consentForm))},directives:[md,IA,NA,YA,nx,ZA,rx,RA,Tz],styles:[".modal-data-viewer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .modal-data-viewer[_ngcontent-%COMP%]   pdf-viewer[_ngcontent-%COMP%], .modal-data-viewer[_ngcontent-%COMP%]   vg-player[_ngcontent-%COMP%]{width:100%}"]}),t})();function Iz(t,e){if(1&t){const t=$s();js(0,"div"),js(1,"img",13),Xs("click",(function(){on(t);const e=ea();return e.lauchDialog(e.artwork,"image")})),zs(),zs()}if(2&t){const t=ea();Cr(1),aa("src",t.url,rr)}}function Lz(t,e){if(1&t){const t=$s();js(0,"div"),js(1,"vg-player",14),Xs("click",(function(){on(t);const e=ea();return e.lauchDialog(e.artwork,"video")}))("onPlayerReady",(function(e){return on(t),ea().onPlayerReady(e)})),Hs(2,"vg-buffering"),js(3,"vg-controls"),Hs(4,"vg-play-pause"),Hs(5,"vg-time-display",15),Hs(6,"vg-fullscreen"),zs(),Hs(7,"video",16,17),zs(),zs()}if(2&t){const t=Fs(8),e=ea();Cr(7),Us("vgMedia",t)("src",e.url,rr)}}const Fz=function(){return{"background-color":"lightgray"}},Nz=function(){return{"background-color":"white"}};let Bz=(()=>{class t{constructor(t,e,n,i){this.ngZone=t,this.matDialog=e,this.router=n,this.dbOperations=i,this.background="white",this.follow=!1}ngOnInit(){"image"===this.artwork.type&&(this.category="Photography"),"video"===this.artwork.type&&(this.category="Videography"),null!=this.artwork.subjectConsentForm&&(this.subjectConsent=this.artwork.subjectConsentForm),null!=this.artwork.artistConsentForm&&(this.artistConsent=this.artwork.artistConsentForm),this.url=this.artwork.url,this.date=new Fd("en").transform(this.artwork.id,"yyyy/MM/dd"),console.log(this.date),this.country=this.artwork.place,this.followUpBackground(this.artwork.status),this.getUserProfile(this.artwork.userId)}approveArtwork(){this.dbOperations.artworksCollection().doc(this.artwork.artworkId).update({status:"approved",updatedAt:(new Date).getDate()+""}).then(t=>{}).catch(t=>{})}followUpBackground(t){"follow-up"===t&&(this.follow=!0)}declineArtwork(){this.dbOperations.artworksCollection().doc(this.artwork.artworkId).update({status:"declined",updatedAt:(new Date).getDate()+""}).then(t=>{}).catch(t=>{})}followUpArtwork(){this.dbOperations.artworksCollection().doc(this.artwork.artworkId).update({status:"follow-up",updatedAt:(new Date).getDate()+""}).then(t=>{}).catch(t=>{})}getUserProfile(t){this.dbOperations.usersCollectionById(t).onSnapshot(t=>{null!=t&&t.forEach(t=>{const e=t.data();let n=Object.assign({},e);this.ngZone.run(()=>{Op(n.firstName+" "+n.lastName).subscribe(t=>{this.name=t})})})})}onPlayerReady(t){this.api=t,this.api.getDefaultMedia().subscriptions.loadedMetadata.subscribe(this.playVideo.bind(this))}playVideo(){this.api.pause()}lauchDialog(t,e){const n=new XT;n.disableClose=!1,n.id="modal-component",n.width="70%",n.height="90%",n.data={artwork:t,modalType:e},this.matDialog.open(Rz,n)}}return t.\u0275fac=function(e){return new(e||t)(Ns(Su),Ns(sP),Ns(Wg),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-filter-item"]],inputs:{artwork:"artwork"},decls:63,vars:19,consts:[[1,"filter-artworks"],[1,"filtering-table"],[1,"table-responsive"],[1,"table"],["align","center"],[3,"ngStyle"],[1,"filtering-image"],[4,"ngIf"],["width","20%",1,"pdf"],[2,"display","block","width","200px",3,"show-all","fit-to-page","src","original-size","click"],[1,"pdf"],[1,"d-flex"],[1,"btn","mx-1",3,"click"],["alt","",3,"src","click"],[3,"click","onPlayerReady"],["vgProperty","total","vgFormat","mm:ss"],["id","singleVideo","preload","auto","crossorigin","",3,"vgMedia","src"],["media",""]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),js(2,"div",2),js(3,"table",3),js(4,"tr"),js(5,"th",4),ka(6,"No."),zs(),js(7,"th",4),ka(8,"Artwork"),zs(),js(9,"th",4),ka(10,"Title"),zs(),js(11,"th",4),ka(12,"Description"),zs(),js(13,"th",4),ka(14,"Subject Consent"),zs(),js(15,"th",4),ka(16,"Artist Consent"),zs(),js(17,"th",4),ka(18,"Date"),zs(),js(19,"th",4),ka(20,"Name"),zs(),js(21,"th",4),ka(22,"Country"),zs(),js(23,"th",4),ka(24,"Category"),zs(),js(25,"th",4),ka(26,"Action"),zs(),zs(),js(27,"tr",5),Hs(28,"td"),js(29,"td"),js(30,"div",6),Ls(31,Iz,2,1,"div",7),Ls(32,Lz,9,2,"div",7),zs(),zs(),js(33,"td"),js(34,"p"),ka(35),zs(),zs(),js(36,"td"),js(37,"p"),ka(38),zs(),zs(),js(39,"td",8),js(40,"pdf-viewer",9),Xs("click",(function(){return e.lauchDialog(e.artwork,"subject")})),zs(),zs(),js(41,"td",10),js(42,"pdf-viewer",9),Xs("click",(function(){return e.lauchDialog(e.artwork,"artist")})),zs(),zs(),js(43,"td"),js(44,"p"),ka(45),zs(),zs(),js(46,"td"),js(47,"p"),ka(48),zs(),zs(),js(49,"td"),js(50,"p"),ka(51),zs(),zs(),js(52,"td"),js(53,"p"),ka(54),zs(),zs(),js(55,"td"),js(56,"div",11),js(57,"button",12),Xs("click",(function(){return e.approveArtwork()})),ka(58,"Approve"),zs(),js(59,"button",12),Xs("click",(function(){return e.declineArtwork()})),ka(60,"Decline"),zs(),js(61,"button",12),Xs("click",(function(){return e.followUpArtwork()})),ka(62,"Follow"),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs()),2&t&&(Cr(27),Us("ngStyle",e.follow?Ec(17,Fz):Ec(18,Nz)),Cr(4),Us("ngIf","image"==e.artwork.type),Cr(1),Us("ngIf","video"==e.artwork.type),Cr(3),Da(e.artwork.title),Cr(3),Da(e.artwork.description),Cr(2),Us("show-all",!1)("fit-to-page",!1)("src",e.subjectConsent)("original-size",!1),Cr(2),Us("show-all",!1)("fit-to-page",!1)("src",e.artistConsent)("original-size",!1),Cr(3),Da(e.date),Cr(3),Da(e.name),Cr(3),Da(e.country),Cr(3),Da(e.category))},directives:[Cd,md,Tz,IA,NA,YA,nx,ZA,rx,RA],styles:[".filter-artworks[_ngcontent-%COMP%], .filter-artworks[_ngcontent-%COMP%]   .filtering-image[_ngcontent-%COMP%]{text-align:center}.filter-artworks[_ngcontent-%COMP%]   .filtering-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .filter-artworks[_ngcontent-%COMP%]   .filtering-image[_ngcontent-%COMP%]   vg-player[_ngcontent-%COMP%]{width:200px;margin:0 auto}.filter-artworks[_ngcontent-%COMP%]   .filtering-image[_ngcontent-%COMP%]   vg-player[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;margin:0 auto}.filter-artworks[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;color:#fff;border-radius:.5em;background-color:teal}"]}),t})();function Uz(t,e){1&t&&Hs(0,"app-filter-item",5),2&t&&Us("artwork",e.$implicit)}let Vz=(()=>{class t{constructor(t,e,n,i){this.ngZone=t,this.router=e,this.firestore=n,this.dbOperations=i,this.artworks=[],this.loading=!1,this.currentUser=""}ngOnInit(){this.getArtWorks()}ngAfterViewInit(){}getArtWorks(){this.dbOperations.artworksCollection().ref.where("status","==","filter").onSnapshot(t=>{null!=t&&(null!=t.docChanges()?(this.artworks=[],t.forEach(t=>{const e=t.data();this.artworks.push(e)})):this.message="There are no artworks to filter")})}}return t.\u0275fac=function(e){return new(e||t)(Ns(Su),Ns(Wg),Ns(n_),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-filter-artworks"]],decls:6,vars:2,consts:[[1,"filter-artworks"],[1,"filter-tables"],[3,"artwork",4,"ngFor","ngForOf"],[1,"empty-message","text-center"],[1,"message","display-4","pt-5","mt-5"],[3,"artwork"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),Ls(2,Uz,1,1,"app-filter-item",2),js(3,"div",3),js(4,"p",4),ka(5),zs(),zs(),zs(),zs()),2&t&&(Cr(2),Us("ngForOf",e.artworks),Cr(3),Da(e.message))},directives:[pd,Bz],styles:[".filter-artworks[_ngcontent-%COMP%]{min-height:100vh;color:#000}.filter-artworks[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]{min-height:100vh}"]}),t})();function jz(t,e){if(1&t&&Hs(0,"app-scored-item",3),2&t){const t=e.$implicit;Us("no",e.index)("score",t)}}let zz=(()=>{class t{constructor(t,e,n,i){this.ngZone=t,this.router=e,this.route=n,this.dbOperations=i,this.scores=[]}ngOnInit(){this.getScoredArtworks()}getScoredArtworks(){this.scores=[],this.dbOperations.scoresCollections().snapshotChanges().subscribe(t=>{this.scores=t.map(t=>{const e=t.payload.doc.data();return console.log(Object.assign({},e)),Object.assign({},e)})})}}return t.\u0275fac=function(e){return new(e||t)(Ns(Su),Ns(Wg),Ns(km),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-scored-artworks"]],decls:3,vars:1,consts:[[1,"scored-artworks"],[1,"scores-tables"],[3,"no","score",4,"ngFor","ngForOf"],[3,"no","score"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),Ls(2,jz,1,2,"app-scored-item",2),zs(),zs()),2&t&&(Cr(2),Us("ngForOf",e.scores))},directives:[pd,uz],styles:[".scored-artworks[_ngcontent-%COMP%]{min-height:100vh;color:#000}.scored-artworks[_ngcontent-%COMP%]   .scored-item[_ngcontent-%COMP%]{min-height:100vh}"]}),t})(),Hz=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-sign-in"]],decls:2,vars:0,template:function(t,e){1&t&&(js(0,"p"),ka(1,"sign-in works!"),zs())},styles:[""]}),t})();function Gz(t,e){1&t&&(js(0,"div"),ka(1," Your first name cannot be empty "),zs())}function Wz(t,e){if(1&t&&(js(0,"div",23),Ls(1,Gz,2,0,"div",24),zs()),2&t){ea();const t=Fs(12);Cr(1),Us("ngIf",t.errors.required)}}function qz(t,e){1&t&&(js(0,"div"),ka(1," Your last name cannot be empty "),zs())}function $z(t,e){if(1&t&&(js(0,"div",23),Ls(1,qz,2,0,"div",24),zs()),2&t){ea();const t=Fs(21);Cr(1),Us("ngIf",t.errors.required)}}function Yz(t,e){1&t&&(js(0,"div"),ka(1," Your email is required "),zs())}function Qz(t,e){if(1&t&&(js(0,"div",23),Ls(1,Yz,2,0,"div",24),zs()),2&t){ea();const t=Fs(30);Cr(1),Us("ngIf",t.errors.required)}}function Xz(t,e){1&t&&(js(0,"div"),ka(1," Please tell us phone number "),zs())}function Kz(t,e){if(1&t&&(js(0,"div",23),Ls(1,Xz,2,0,"div",24),zs()),2&t){ea();const t=Fs(30);Cr(1),Us("ngIf",t.errors.required)}}function Zz(t,e){1&t&&(js(0,"div"),ka(1,"Message cannot be empty "),zs())}function Jz(t,e){if(1&t&&(js(0,"div",23),Ls(1,Zz,2,0,"div",24),js(2,"small",12),ka(3,"How can we help you?"),zs(),zs()),2&t){ea();const t=Fs(48);Cr(1),Us("ngIf",t.errors.required)}}const tH=function(t){return{"is-invalid":t}};class eH{}let nH=(()=>{class t{constructor(t){this.dbOperations=t,this.contact=new eH,this.disabled=!1,this.formWidth=100}ngOnInit(){this.getScreenSize()}onSubmit(t){this.disabled=!0,this.contact.time=Date.now()+"";let e=JSON.parse(JSON.stringify(this.contact));this.dbOperations.messageCollections().doc(this.dbOperations.generatePushId()).set(e).then(e=>{t.reset()}).catch(t=>{this.disabled=!1})}onResize(t){let e=t.target.innerWidth;e>800&&(this.formWidth=80),e>1e3&&(this.formWidth=70),e>1200&&(this.formWidth=60)}getScreenSize(){let t=window.innerWidth;t>800&&(this.formWidth=80),t>1e3&&(this.formWidth=70),t>1200&&(this.formWidth=60)}}return t.\u0275fac=function(e){return new(e||t)(Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-contact-us"]],hostBindings:function(t,e){1&t&&Xs("resize",(function(t){return e.onResize(t)}),!1,Xn)},decls:53,vars:28,consts:[[1,"contact",3,"resize"],[1,"message-form"],[1,"container-fluid","py-5"],[3,"ngSubmit"],["contactForm","ngForm"],[1,"card"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-6","mt-3"],[1,"form-group"],["type","text","name","firstName","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["firstName","ngModel"],["class","invalid-feedback",4,"ngIf"],[1,"help-text"],["type","text","name","lastName","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["lastName","ngModel"],[1,"card","mt-3"],["type","email","name","email","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["email","ngModel"],[1,"card","p-3","mt-3"],["maxlength","150","required","","name","challenges","id","challenges","rows","3",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["challenges","ngModel"],[1,"mt-3"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){if(1&t){const t=$s();js(0,"div",0),Xs("resize",(function(t){return e.onResize(t)}),!1,Xn),js(1,"div",1),js(2,"div",2),js(3,"form",3,4),Xs("ngSubmit",(function(){on(t);const n=Fs(4);return e.onSubmit(n)})),js(5,"div",5),js(6,"div",6),js(7,"div",7),js(8,"div",8),js(9,"label"),ka(10,"First Name"),zs(),js(11,"input",9,10),Xs("ngModelChange",(function(t){return e.contact.firstName=t})),zs(),Ls(13,Wz,2,1,"div",11),js(14,"small",12),ka(15,"Tell us your first name"),zs(),zs(),zs(),js(16,"div",7),js(17,"div",8),js(18,"label"),ka(19,"Last Name"),zs(),js(20,"input",13,14),Xs("ngModelChange",(function(t){return e.contact.lastName=t})),zs(),Ls(22,$z,2,1,"div",11),js(23,"small",12),ka(24,"Tell us your last name"),zs(),zs(),zs(),zs(),zs(),js(25,"div",15),js(26,"div",8),js(27,"label"),ka(28,"Email"),zs(),js(29,"input",16,17),Xs("ngModelChange",(function(t){return e.contact.email=t})),zs(),Ls(31,Qz,2,1,"div",11),js(32,"small",12),ka(33,"Enter your email"),zs(),zs(),zs(),js(34,"div",15),js(35,"div",8),js(36,"label"),ka(37,"Phone Number"),zs(),js(38,"input",16,17),Xs("ngModelChange",(function(t){return e.contact.phoneNumber=t})),zs(),Ls(40,Kz,2,1,"div",11),js(41,"small",12),ka(42,"Enter your email"),zs(),zs(),zs(),js(43,"div",18),js(44,"div",8),js(45,"label"),ka(46,"Message"),zs(),js(47,"textarea",19,20),Xs("ngModelChange",(function(t){return e.contact.message=t})),zs(),Ls(49,Jz,4,1,"div",11),zs(),zs(),js(50,"div",21),js(51,"button",22),ka(52,"Submit"),zs(),zs(),zs(),zs(),zs(),zs()}if(2&t){const t=Fs(4),n=Fs(12),i=Fs(21),r=Fs(30),o=Fs(48);Cr(2),ga("width",e.formWidth,"%"),Cr(9),Us("ngModel",e.contact.firstName)("ngClass",Sc(18,tH,t.submitted&&n.invalid)),Cr(2),Us("ngIf",t.submitted&&n.invalid),Cr(7),Us("ngModel",e.contact.lastName)("ngClass",Sc(20,tH,t.submitted&&i.invalid)),Cr(2),Us("ngIf",t.submitted&&i.invalid),Cr(7),Us("ngModel",e.contact.email)("ngClass",Sc(22,tH,t.submitted&&r.invalid)),Cr(2),Us("ngIf",t.submitted&&r.invalid),Cr(7),Us("ngModel",e.contact.phoneNumber)("ngClass",Sc(24,tH,t.submitted&&r.invalid)),Cr(2),Us("ngIf",t.submitted&&r.invalid),Cr(7),Us("ngModel",e.contact.message)("ngClass",Sc(26,tH,t.submitted&&o.invalid)),Cr(2),Us("ngIf",t.submitted&&o.invalid),Cr(2),Us("disabled",e.disabled)}},directives:[tA,Q_,Ww,j_,oA,Y_,Jw,ud,md,pA],styles:[".contact[_ngcontent-%COMP%]{min-height:100vh;background-image:url(/assets/images/gallery/sample/picture7.png);background-size:cover;background-repeat:no-repeat;background-attachment:fixed;overflow:auto;max-height:100vh}.contact[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]{min-height:100vh;background-color:rgba(0,0,0,.8)}.contact[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6);padding:1em;border:none;color:#f5f5f5;border-radius:1em}.contact[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .contact[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.9);border-radius:.5em;border-color:teal;color:#fff}.contact[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:teal}@media (max-width:300px){.contact[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}@media (max-width:400px){.contact[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}@media (max-width:700px){.contact[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}@media (max-width:800px){.contact[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}.contact[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}"]}),t})();function iH(t,e){if(1&t&&(js(0,"div",3),js(1,"div",4),js(2,"div",5),js(3,"p",6),js(4,"strong"),ka(5,"Name:"),zs(),ka(6),zs(),js(7,"p",6),js(8,"strong"),ka(9,"Email:"),zs(),ka(10),zs(),js(11,"p",6),js(12,"strong"),ka(13,"Phone Number:"),zs(),ka(14),zs(),js(15,"div",7),js(16,"p",6),js(17,"strong"),ka(18,"Message:"),zs(),zs(),js(19,"p",8),ka(20),zs(),zs(),zs(),zs(),zs()),2&t){const t=e.$implicit;Cr(6),Oa(" ",t.firstName+" "+t.lastName,""),Cr(4),Oa(" ",t.email,""),Cr(4),Oa(" ",t.phoneNumber,""),Cr(6),Oa(" ",t.message," ")}}let rH=(()=>{class t{constructor(t){this.dbOperations=t,this.messages=[]}ngOnInit(){this.getMessages()}getMessages(){this.dbOperations.messageCollections().ref.orderBy("time").onSnapshot(t=>{t.docs.forEach(t=>{const e=t.data();this.messages.push(e)})})}}return t.\u0275fac=function(e){return new(e||t)(Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-messages"]],decls:3,vars:1,consts:[[1,"messages"],[1,"conatainer-fluid","p-0"],["class","row","class","col-md-12 mt-3",4,"ngFor","ngForOf"],[1,"col-md-12","mt-3"],[1,"message"],[1,"card","p-3"],[1,"mb-0"],[1,"msg-text"],[1,"msg","mb-0"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),Ls(2,iH,21,4,"div",2),zs(),zs()),2&t&&(Cr(2),Us("ngForOf",e.messages))},directives:[pd],styles:[".messages[_ngcontent-%COMP%]{min-height:100vh}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{color:#000}"]}),t})();function oH(t,e){if(1&t&&(js(0,"div",3),js(1,"div",4),js(2,"div",5),js(3,"p",6),js(4,"strong"),ka(5,"Name: "),zs(),ka(6),zs(),js(7,"p",6),js(8,"strong"),ka(9,"Email: "),zs(),ka(10),zs(),js(11,"p",6),js(12,"strong"),ka(13,"Phone Number: "),zs(),ka(14),zs(),js(15,"p",6),js(16,"strong"),ka(17,"Place: "),zs(),ka(18),zs(),js(19,"p",6),js(20,"strong"),ka(21,"Nationality: "),zs(),ka(22),zs(),js(23,"p",6),js(24,"strong"),ka(25,"Birth Date: "),zs(),ka(26),zs(),js(27,"p",6),js(28,"strong"),ka(29,"Address: "),zs(),ka(30),zs(),zs(),zs(),zs()),2&t){const t=e.$implicit;Cr(6),Da(t.firstName+" "+t.lastName),Cr(4),Da(t.email),Cr(4),Da(t.phoneNumber),Cr(4),Da(t.country),Cr(4),Da(t.nationality),Cr(4),Da(t.birthDate),Cr(4),Da(t.address)}}let sH=(()=>{class t{constructor(t,e,n,i){this.ngZone=t,this.router=e,this.firestore=n,this.dbOperations=i,this.artists=[],this.submittingArtists=new Set,this.loading=!1,this.currentUser=""}ngOnInit(){this.getArtWorks()}ngAfterViewInit(){}getArtWorks(){this.dbOperations.artworksCollection().snapshotChanges().subscribe(t=>{t.map(t=>{const e=t.payload.doc.data();console.log(Object.assign({},e)),this.getSubmittingUsers(e.userId)})})}getSubmittingUsers(t){this.dbOperations.usersCollection().ref.where("userId","==",t).onSnapshot(t=>{if(t.empty)this.message="There are no artworks to filter";else{let e=t.docChanges();e&&e.forEach(t=>{const e=t.doc.data();let n=Object.assign({},e);this.artists.push(n),console.log(n)})}})}}return t.\u0275fac=function(e){return new(e||t)(Ns(Su),Ns(Wg),Ns(n_),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-submissions"]],decls:3,vars:1,consts:[[1,"submitting-artists"],[1,"row"],["class","col-md-3 mt-3",4,"ngFor","ngForOf"],[1,"col-md-3","mt-3"],[1,"card","p-3"],[1,"artist"],[1,"mb-0"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),Ls(2,oH,31,7,"div",2),zs(),zs()),2&t&&(Cr(2),Us("ngForOf",e.artists))},directives:[pd],styles:[".submitting-artists[_ngcontent-%COMP%]{min-height:100vh;color:#000}"]}),t})();const aH=["fileDropRef"],lH=function(t){return{width:t}};function cH(t,e){if(1&t&&(js(0,"div"),js(1,"div",5),Hs(2,"div",6),zs(),js(3,"small",7),ka(4),Oc(5,"number"),zs(),zs()),2&t){const t=e.ngIf;Cr(2),Us("ngStyle",Sc(5,lH,t+"%")),Rs("aria-valuenow",t),Cr(2),Oa("Uploading your submission ",Rc(5,3,t),"%")}}let uH=(()=>{class t{constructor(t,e,n,i,r,o,s,a){this.authService=t,this.ngZone=e,this.afAuth=n,this.router=i,this.snackBar=r,this.fauth=o,this.storage=s,this.dbOperations=a,this.progress=0,this.durationInSeconds=5,this.artwork=new jb,this.extraDetails=new zb,this.artworks=[],this.submittedWorks=[],this.files=[],this.pdfs=[],this.uploadedDocuments=0,this.uploadProgress=null,this.checkedTerms=!1,this.checkedPrivacy=!1,this.formWidth=100,this.answered=!1,this.currentUser="",this.disabled=!1,this.isLinear=!0}ngOnInit(){this.getScreenSize(),this.uploadArtwork(this.dbOperations.file,this.dbOperations.artwork,this.dbOperations.extraDetails)}uploadArtwork(t,e,n){return new Promise((i,r)=>{if(null!=t){let i="";const r=Date.now()+"";t.type.includes("video")&&(e.type="video",i=`artworks/videos/${Date.now()+""}_${t.name}`,console.log(i)),t.type.includes("image")&&(e.type="image",i=`artworks/images/${Date.now()+""}_${t.name}`,console.log(i));const o=this.storage.ref(i),s=this.storage.upload(i,t);this.percentage=s.percentageChanges(),s.snapshotChanges().pipe(Sf(()=>Object(vv.__awaiter)(this,void 0,void 0,(function*(){let i=yield o.getDownloadURL().toPromise();e.name=t.name,e.artworkId=this.dbOperations.generatePushId(),e.id=r,e.url=i,e.status="filter",e.createdAt=(new Date).toISOString(),e.updatedAt="",e.lastModified=(null==t?void 0:t.lastModified)+"",console.log(JSON.parse(JSON.stringify(e))),console.log(JSON.parse(JSON.stringify(n)));const s=JSON.parse(JSON.stringify(n)),a=JSON.parse(JSON.stringify(e));this.dbOperations.artworksCollection().doc(e.artworkId).set(a),this.dbOperations.interviewssCollection().doc(e.artworkId).set(s)})))).subscribe(t=>{this.uploadProgress=Op(Math.round(t.bytesTransferred/t.totalBytes*100)),console.log(this.uploadProgress),t.bytesTransferred==t.totalBytes&&this.router.navigateByUrl("/")})}return this.percentage})}onResize(t){let e=t.target.innerWidth;e>800&&(this.formWidth=80),e>1e3&&(this.formWidth=70),e>1200&&(this.formWidth=60)}getScreenSize(){let t=window.innerWidth;t>800&&(this.formWidth=80),t>1e3&&(this.formWidth=70),t>1200&&(this.formWidth=60)}openSnackBar(){this.snackBar.openFromComponent(t,{duration:1e3*this.durationInSeconds})}}return t.\u0275fac=function(e){return new(e||t)(Ns(R_),Ns(Su),Ns(a_),Ns(Wg),Ns(EF),Ns(a_),Ns(Ub),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-submit"]],viewQuery:function(t,e){var n;1&t&&Qc(aH,!0),2&t&&$c(n=tu())&&(e.fileDropEl=n.first)},hostBindings:function(t,e){1&t&&Xs("resize",(function(t){return e.onResize(t)}),!1,Xn)},inputs:{progress:"progress"},decls:6,vars:3,consts:[[1,"submission-progress","p-5",3,"resize"],[1,"card","m-5"],[1,"container-fluid"],[1,"submission-bg"],[4,"ngIf"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-striped",3,"ngStyle"],[1,"py-3","text-center"]],template:function(t,e){1&t&&(js(0,"div",0),Xs("resize",(function(t){return e.onResize(t)}),!1,Xn),js(1,"div",1),js(2,"div",2),js(3,"div",3),Ls(4,cH,6,7,"div",4),Oc(5,"async"),zs(),zs(),zs(),zs()),2&t&&(Cr(4),Us("ngIf",Rc(5,1,e.uploadProgress)))},directives:[md,Cd],pipes:[Dd,Hd],styles:[".submission-progress[_ngcontent-%COMP%]{min-height:100vh;max-height:100vh;background:#fff;color:teal}.submission-progress[_ngcontent-%COMP%]   .submission-bg[_ngcontent-%COMP%]{width:50%;margin:30% auto}.submission-progress[_ngcontent-%COMP%]   .submission-bg[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{border:none;height:100%}.submission-progress[_ngcontent-%COMP%]   .submission-bg[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{color:teal;width:100%;height:4em}"]}),t})();function hH(t,e){if(1&t&&(js(0,"div"),Hs(1,"img",13),zs()),2&t){const t=ea();Cr(1),aa("src",t.url,rr)}}function dH(t,e){if(1&t){const t=$s();js(0,"div"),js(1,"vg-player",14),Xs("onPlayerReady",(function(e){return on(t),ea().onPlayerReady(e)})),Hs(2,"vg-buffering"),js(3,"vg-controls"),Hs(4,"vg-play-pause"),Hs(5,"vg-time-display",15),Hs(6,"vg-fullscreen"),zs(),Hs(7,"video",16,17),zs(),zs()}if(2&t){const t=Fs(8),e=ea();Cr(7),Us("vgMedia",t)("src",e.url,rr)}}const pH=function(){return{"background-color":"lightgray"}},fH=function(){return{"background-color":"white"}};let mH=(()=>{class t{constructor(t,e,n){this.ngZone=t,this.router=e,this.dbOperations=n,this.background="white",this.follow=!1}ngOnInit(){"image"===this.artwork.type&&(this.category="Photography"),"video"===this.artwork.type&&(this.category="Videography"),null!=this.artwork.subjectConsentForm&&(this.subjectConsent=this.artwork.subjectConsentForm),null!=this.artwork.artistConsentForm&&(this.artistConsent=this.artwork.artistConsentForm),this.url=this.artwork.url,this.date=new Fd("en").transform(this.artwork.id,"yyyy/MM/dd"),console.log(this.date),this.country=this.artwork.place,this.followUpBackground(this.artwork.status),this.getUserProfile(this.artwork.userId)}approveArtwork(){this.dbOperations.artworksCollection().doc(this.artwork.artworkId).update({status:"approved",updatedAt:(new Date).getDate()+""}).then(t=>{}).catch(t=>{})}followUpBackground(t){"follow-up"===t&&(this.follow=!0)}declineArtwork(){this.dbOperations.artworksCollection().doc(this.artwork.artworkId).update({status:"declined",updatedAt:(new Date).getDate()+""}).then(t=>{}).catch(t=>{})}followUpArtwork(){this.dbOperations.artworksCollection().doc(this.artwork.artworkId).update({status:"follow-up",updatedAt:(new Date).getDate()+""}).then(t=>{}).catch(t=>{})}getUserProfile(t){this.dbOperations.usersCollectionById(t).onSnapshot(t=>{null!=t&&t.forEach(t=>{const e=t.data();let n=Object.assign({},e);this.ngZone.run(()=>{Op(n.firstName+" "+n.lastName).subscribe(t=>{this.name=t})})})})}onPlayerReady(t){this.api=t,this.api.getDefaultMedia().subscriptions.loadedMetadata.subscribe(this.playVideo.bind(this))}playVideo(){this.api.pause()}}return t.\u0275fac=function(e){return new(e||t)(Ns(Su),Ns(Wg),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-follow-item"]],inputs:{artwork:"artwork"},decls:59,vars:19,consts:[[1,"filter-artworks"],[1,"filtering-table"],[1,"table-responsive"],[1,"table"],["align","center"],[3,"ngStyle"],[1,"filtering-image"],[4,"ngIf"],["width","20%",1,"pdf"],[2,"display","block","width","200px",3,"show-all","fit-to-page","src","original-size"],[1,"pdf"],[1,"d-flex"],[1,"btn","mx-1",3,"click"],["alt","",3,"src"],[3,"onPlayerReady"],["vgProperty","total","vgFormat","mm:ss"],["id","singleVideo","preload","auto","crossorigin","",3,"vgMedia","src"],["media",""]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),js(2,"div",2),js(3,"table",3),js(4,"tr"),js(5,"th",4),ka(6,"No."),zs(),js(7,"th",4),ka(8,"Artwork"),zs(),js(9,"th",4),ka(10,"Title"),zs(),js(11,"th",4),ka(12,"Description"),zs(),js(13,"th",4),ka(14,"Subject Consent"),zs(),js(15,"th",4),ka(16,"Artist Consent"),zs(),js(17,"th",4),ka(18,"Date"),zs(),js(19,"th",4),ka(20,"Name"),zs(),js(21,"th",4),ka(22,"Country"),zs(),js(23,"th",4),ka(24,"Category"),zs(),js(25,"th",4),ka(26,"Action"),zs(),zs(),js(27,"tr",5),Hs(28,"td"),js(29,"td"),js(30,"div",6),Ls(31,hH,2,1,"div",7),Ls(32,dH,9,2,"div",7),zs(),zs(),js(33,"td"),js(34,"p"),ka(35),zs(),zs(),js(36,"td"),js(37,"p"),ka(38),zs(),zs(),js(39,"td",8),Hs(40,"pdf-viewer",9),zs(),js(41,"td",10),Hs(42,"pdf-viewer",9),zs(),js(43,"td"),js(44,"p"),ka(45),zs(),zs(),js(46,"td"),js(47,"p"),ka(48),zs(),zs(),js(49,"td"),js(50,"p"),ka(51),zs(),zs(),js(52,"td"),js(53,"p"),ka(54),zs(),zs(),js(55,"td"),js(56,"div",11),js(57,"button",12),Xs("click",(function(){return e.declineArtwork()})),ka(58,"Decline"),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs()),2&t&&(Cr(27),Us("ngStyle",e.follow?Ec(17,pH):Ec(18,fH)),Cr(4),Us("ngIf","image"==e.artwork.type),Cr(1),Us("ngIf","video"==e.artwork.type),Cr(3),Da(e.artwork.title),Cr(3),Da(e.artwork.description),Cr(2),Us("show-all",!1)("fit-to-page",!1)("src",e.subjectConsent)("original-size",!1),Cr(2),Us("show-all",!1)("fit-to-page",!1)("src",e.artistConsent)("original-size",!1),Cr(3),Da(e.date),Cr(3),Da(e.name),Cr(3),Da(e.country),Cr(3),Da(e.category))},directives:[Cd,md,Tz,IA,NA,YA,nx,ZA,rx,RA],styles:[".filter-artworks[_ngcontent-%COMP%], .filter-artworks[_ngcontent-%COMP%]   .filtering-image[_ngcontent-%COMP%]{text-align:center}.filter-artworks[_ngcontent-%COMP%]   .filtering-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .filter-artworks[_ngcontent-%COMP%]   .filtering-image[_ngcontent-%COMP%]   vg-player[_ngcontent-%COMP%]{width:200px;margin:0 auto}.filter-artworks[_ngcontent-%COMP%]   .filtering-image[_ngcontent-%COMP%]   vg-player[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;margin:0 auto}.filter-artworks[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;color:#fff;border-radius:.5em;background-color:teal}"]}),t})();function gH(t,e){1&t&&Hs(0,"app-follow-item",5),2&t&&Us("artwork",e.$implicit)}let vH=(()=>{class t{constructor(t,e,n){this.router=t,this.firestore=e,this.dbOperations=n,this.artworks=[],this.loading=!1,this.currentUser=""}ngOnInit(){this.getFollowUp()}getFollowUp(){this.dbOperations.artworksCollection().ref.where("status","==","follow-up").onSnapshot(t=>{null!=t&&t.forEach(t=>{const e=t.data();this.artworks.push(e)})})}}return t.\u0275fac=function(e){return new(e||t)(Ns(Wg),Ns(n_),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-follow-up"]],decls:6,vars:2,consts:[[1,"filter-artworks"],[1,"filter-tables"],[3,"artwork",4,"ngFor","ngForOf"],[1,"empty-message","text-center"],[1,"message","display-4","pt-5","mt-5"],[3,"artwork"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),Ls(2,gH,1,1,"app-follow-item",2),js(3,"div",3),js(4,"p",4),ka(5),zs(),zs(),zs(),zs()),2&t&&(Cr(2),Us("ngForOf",e.artworks),Cr(3),Da(e.message))},directives:[pd,mH],styles:[""]}),t})();function yH(t,e){if(1&t&&(js(0,"div",4),Hs(1,"img",12),zs()),2&t){const t=ea();Cr(1),aa("src",t.story.url,rr)}}function bH(t,e){if(1&t){const t=$s();js(0,"div"),js(1,"vg-player",13),Xs("onPlayerReady",(function(e){return on(t),ea().onPlayerReady(e)})),Hs(2,"vg-buffering"),js(3,"vg-controls"),Hs(4,"vg-play-pause"),Hs(5,"vg-time-display",14),Hs(6,"vg-fullscreen"),zs(),Hs(7,"video",15,16),zs(),zs()}if(2&t){const t=Fs(8),e=ea();Cr(7),Us("vgMedia",t)("src",e.story.url,rr)}}let _H=(()=>{class t{constructor(t){this.dbOperations=t,this.user=new gv}ngOnInit(){console.log(this.story),this.description=this.story.description.substring(0,20),this.getProfileDetails(this.story.userId)}getProfileDetails(t){this.dbOperations.usersCollection().ref.where("userId","==",t).onSnapshot(t=>{t.docs.forEach(t=>{const e=t.data();this.user=e})})}onPlayerReady(t){this.api=t,this.api.getDefaultMedia().subscriptions.loadedMetadata.subscribe(this.playVideo.bind(this))}playVideo(){this.api.pause()}}return t.\u0275fac=function(e){return new(e||t)(Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-story"]],inputs:{story:"story"},decls:16,vars:4,consts:[[1,"story"],[1,"card"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","col-xl-12"],[1,"story-img"],[1,"media"],["class","story-img",4,"ngIf"],[4,"ngIf"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","col-xl-12","mt-3"],[1,"photo-by","p-1"],[1,"stories-info","p-1"],[1,"mb-0"],["alt","",3,"src"],[3,"onPlayerReady"],["vgProperty","total","vgFormat","mm:ss"],["id","singleVideo","preload","auto","crossorigin","",3,"vgMedia","src"],["media",""]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),js(2,"div",2),js(3,"div",3),js(4,"div",4),js(5,"div",5),Ls(6,yH,2,1,"div",6),Ls(7,bH,9,2,"div",7),zs(),zs(),zs(),js(8,"div",8),Hs(9,"div",9),js(10,"div",10),js(11,"p",11),js(12,"strong"),ka(13),zs(),zs(),js(14,"p"),ka(15),zs(),zs(),zs(),zs(),zs(),zs()),2&t&&(Cr(6),Us("ngIf","image"==e.story.type),Cr(1),Us("ngIf","video"==e.story.type),Cr(6),Da(e.story.title),Cr(2),Da(e.story.description))},directives:[md,IA,NA,YA,nx,ZA,rx,RA],styles:[".story[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]{height:250px;background-color:#000}.story[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]   .story-img[_ngcontent-%COMP%]{text-align:center;display:block;margin:auto}.story[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:250px}.story[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]   vg-player[_ngcontent-%COMP%]{height:250px;margin-left:auto;margin-right:auto;display:block}.story[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]   vg-player[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;margin:0 auto}.story[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;color:#fff;border-radius:.5em;background-color:teal}"]}),t})();function wH(t,e){if(1&t&&(js(0,"div"),Hs(1,"img",10),zs()),2&t){const t=ea(2);Cr(1),aa("src",t.scoredItem.url,rr)}}function AH(t,e){if(1&t){const t=$s();js(0,"div"),js(1,"vg-player",11),Xs("onPlayerReady",(function(e){return on(t),ea(2).onPlayerReady(e)})),Hs(2,"vg-buffering"),js(3,"vg-controls"),Hs(4,"vg-play-pause"),Hs(5,"vg-playback-button"),Hs(6,"vg-time-display",12),js(7,"vg-scrub-bar"),Hs(8,"vg-scrub-bar-current-time"),Hs(9,"vg-scrub-bar-buffering-time"),zs(),Hs(10,"vg-time-display",13),Hs(11,"vg-mute"),Hs(12,"vg-volume"),Hs(13,"vg-fullscreen"),zs(),Hs(14,"video",14,15),zs(),zs()}if(2&t){const t=Fs(15),e=ea(2);Cr(14),Us("vgMedia",t)("src",e.scoredItem.url,rr)}}function xH(t,e){if(1&t){const t=$s();js(0,"div",3),js(1,"table",4),js(2,"tr"),js(3,"th",5),ka(4,"No."),zs(),js(5,"th",5),ka(6,"Artwork"),zs(),js(7,"th",5),ka(8,"Title"),zs(),js(9,"th",5),ka(10,"Description"),zs(),js(11,"th",5),ka(12,"Date"),zs(),js(13,"th",5),ka(14,"Name"),zs(),js(15,"th",5),ka(16,"Country"),zs(),js(17,"th",5),ka(18,"Category"),zs(),js(19,"th",5),ka(20,"Score"),zs(),js(21,"th",5),ka(22,"Action"),zs(),zs(),js(23,"tr"),Hs(24,"td"),js(25,"td"),js(26,"div",6),Ls(27,wH,2,1,"div",7),Ls(28,AH,16,2,"div",7),zs(),zs(),js(29,"td"),js(30,"p"),ka(31),zs(),zs(),js(32,"td"),js(33,"p"),ka(34),zs(),zs(),js(35,"td"),js(36,"p"),ka(37),zs(),zs(),js(38,"td"),js(39,"p"),ka(40),zs(),zs(),js(41,"td"),js(42,"p"),ka(43),zs(),zs(),js(44,"td"),js(45,"p"),ka(46),zs(),zs(),js(47,"td"),js(48,"p"),ka(49),zs(),zs(),js(50,"td"),js(51,"div",8),js(52,"button",9),Xs("click",(function(){return on(t),ea().exhibitArtwork()})),ka(53),zs(),zs(),zs(),zs(),zs(),zs()}if(2&t){const t=ea();Cr(27),Us("ngIf","image"==t.artwork.type),Cr(1),Us("ngIf","video"==t.artwork.type),Cr(3),Da(t.scoredItem.title),Cr(3),Da(t.scoredItem.description),Cr(3),Da(t.scoredItem.date),Cr(3),Da(t.scoredItem.name),Cr(3),Da(t.scoredItem.country),Cr(3),Da(t.scoredItem.category),Cr(3),Da(t.scoredItem.totalScore),Cr(4),Da(t.exhibit)}}class CH{}let EH=(()=>{class t{constructor(t,e,n){this.router=t,this.ngZone=e,this.dbOperations=n,this.user=new gv,this.score=new Sj,this.scoredItem=new CH,this.exhibit="Exhibit",this.decline="Decline"}ngOnInit(){this.getArtWorkDetails(),this.getArtworkScore(),this.getUserProfile(this.artwork.userId),this.getExhibitedWorks(this.artwork.artworkId)}getArtWorkDetails(){this.ngZone.run(()=>{Op(this.artwork.shotDate).subscribe(t=>{this.scoredItem.date=new Fd("en").transform(this.artwork.id,"yyyy/MM/dd")}),Op(this.artwork.url).subscribe(t=>{this.scoredItem.url=t}),Op(this.artwork.title).subscribe(t=>{this.scoredItem.title=t}),Op(this.artwork.description).subscribe(t=>{this.scoredItem.description=t}),"image"===this.artwork.type&&Op("Photography").subscribe(t=>{this.scoredItem.category=t}),"exhibited"===this.artwork.status?this.exhibit="Exhibited":"exhibition-declined"===this.artwork.status?this.decline="Declined":(this.exhibit="Exhibit",this.decline="Decline"),"video"===this.artwork.type&&Op("Videography").subscribe(t=>{this.scoredItem.category=t})})}getExhibitedWorks(t){this.dbOperations.artworksCollection().ref.where("artworkId","==",t).onSnapshot(t=>{console.log(t.size+" exhibited"),t.docChanges().map(t=>{const e=t.doc.data();console.log(Object.assign({},e)+"videos"),"exhibited"===e.status&&(this.exhibit="Exhibited")})})}getArtworkScore(){console.log("scoring"),this.dbOperations.scoresCollections().ref.where("scoreId","==",this.artwork.id).onSnapshot(t=>{t.empty?this.message="There are no scored to select":t.forEach(t=>{const e=t.data();this.score=e,this.scoredItem.totalScore=e.totalScore.toString()})})}getUserProfile(t){this.dbOperations.usersCollectionById(t).onSnapshot(t=>{null!=t&&t.forEach(t=>{const e=t.data();let n=Object.assign({},e);this.ngZone.run(()=>{Op(n.country).subscribe(t=>{this.scoredItem.country=t,console.log(this.scoredItem.country)}),Op(n.firstName+" "+n.lastName).subscribe(t=>{this.scoredItem.name=t})})})})}declineExhibtion(){this.dbOperations.artworksCollection().doc(this.artwork.artworkId).update({status:"exhibition-declined",updatedAt:(new Date).getTime()+""}).then(t=>{console.log("success")}).catch(t=>{console.log(t.message)})}exhibitArtwork(){this.dbOperations.artworksCollection().doc(this.artwork.artworkId).update({status:"exhibited",updatedAt:(new Date).getTime()+""}).then(t=>{this.exhibit="Exhibited"}).catch(t=>{})}onPlayerReady(t){this.api=t,this.api.getDefaultMedia().subscriptions.loadedMetadata.subscribe(this.playVideo.bind(this))}playVideo(){this.api.pause()}}return t.\u0275fac=function(e){return new(e||t)(Ns(Wg),Ns(Su),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-exhit-item"]],inputs:{artwork:"artwork"},decls:3,vars:1,consts:[[1,"select-artworks"],[1,"select-item"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[1,"table"],["align","center"],[1,"filtering-image"],[4,"ngIf"],[1,"d-flex"],[1,"btn","mx-1",3,"click"],["alt","",3,"src"],[3,"onPlayerReady"],["vgProperty","current","vgFormat","mm:ss"],["vgProperty","total","vgFormat","mm:ss"],["id","singleVideo","preload","auto","crossorigin","",3,"vgMedia","src"],["media",""]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),Ls(2,xH,54,10,"div",2),zs(),zs()),2&t&&(Cr(2),Us("ngIf",e.scoredItem))},directives:[md,IA,NA,YA,nx,ex,ZA,JA,ax,ox,ix,QA,rx,RA],styles:[".select-artworks[_ngcontent-%COMP%], .select-artworks[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]{text-align:center}.select-artworks[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .select-artworks[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   vg-player[_ngcontent-%COMP%]{width:150px;margin:0 auto}.select-artworks[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]   vg-player[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;margin:0 auto}.select-artworks[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:center;color:#f8e5e5;border-radius:.5em;background-color:teal}"]}),t})();function SH(t,e){if(1&t&&Hs(0,"app-exhit-item",5),2&t){const t=e.$implicit;Us("no",e.index)("artwork",t)}}let MH=(()=>{class t{constructor(t,e,n){this.ngZone=t,this.router=e,this.dbOperations=n,this.scored=[]}ngOnInit(){this.getScoredArtworks()}getScoredArtworks(){this.scored=[],this.dbOperations.artworksCollection().ref.where("status","==","exhibited").onSnapshot(t=>{let e=t.docChanges();e&&(t.empty?this.message="There are no scored to select":e.forEach(t=>{const e=t.doc.data();let n=Object.assign({},e);this.scored.push(n)}))})}}return t.\u0275fac=function(e){return new(e||t)(Ns(Su),Ns(Wg),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-exhit-artworks"]],decls:6,vars:2,consts:[[1,"select-artworks"],[1,"select-tables"],[3,"no","artwork",4,"ngFor","ngForOf"],[1,"empty-message","text-center"],[1,"message","display-4","pt-5","mt-5"],[3,"no","artwork"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"div",1),Ls(2,SH,1,2,"app-exhit-item",2),zs(),js(3,"div",3),js(4,"p",4),ka(5),zs(),zs(),zs()),2&t&&(Cr(2),Us("ngForOf",e.scored),Cr(3),Da(e.message))},directives:[pd,EH],styles:[".select-artworks[_ngcontent-%COMP%]{min-height:100vh;color:#000}.select-artworks[_ngcontent-%COMP%]   .select-item[_ngcontent-%COMP%]{min-height:100vh}"]}),t})();const TH=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"stories",component:Xj},{path:"home",component:dx},{path:"team",component:Jj},{path:"successful",component:ez},{path:"guidelines",component:VL},{path:"categories",component:PC},{path:"dashboard",component:FC},{path:"add-artworks",component:HU},{path:"submit",component:uH},{path:"contact",component:nH},{path:"tips",component:yj},{path:"admin",component:GU},{path:"admin/artists",component:BC},{path:"admin/artworks",component:Ej},{path:"admin/messages",component:rH},{path:"admin/score",component:_z},{path:"admin/submissions",component:sH},{path:"admin/exhibit",component:MH},{path:"admin/scored-artworks",component:zz},{path:"admin/select-artworks",component:vz},{path:"admin/filter-artworks",component:Vz},{path:"admin/follow-up",component:vH},{path:"admin/categories/photos",component:PC},{path:"admin/categories/videos",component:PC},{path:"profile/:id",component:jj},{path:"admin/score/:id",component:Vj},{path:"admin/artwork-score/:id",component:az},{path:"admin/artworks/:id",component:Gj},{path:"admin/artists",component:BC},{path:"admin/artists/:id",component:jj},{path:"admin/team/profile/:id",component:jj},{path:"gallery",component:SC,children:[{path:"",loadChildren:()=>TC}]},{path:"**",component:UC}];let PH=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd,sv.forChild(TH),vA,FA,lx,zL,BA,ZL,pV,vj,IV,hN,UB,uj,RL,MU,DT,hC,LP,GN,Pz,xF]]}),t})();function kH(t,e){1&t&&(js(0,"div"),ka(1," Your email cannot be empty "),zs())}function DH(t,e){if(1&t&&(js(0,"div",14),Ls(1,kH,2,0,"div",15),zs()),2&t){ea();const t=Fs(10);Cr(1),Us("ngIf",t.errors.required)}}function OH(t,e){1&t&&(js(0,"div"),ka(1," Your password cannot be empty "),zs())}function RH(t,e){if(1&t&&(js(0,"div",14),Ls(1,OH,2,0,"div",15),js(2,"small",9),ka(3,"Enter a password you can remember"),zs(),zs()),2&t){ea();const t=Fs(19);Cr(1),Us("ngIf",t.errors.required)}}!function(t,e,n){const i=t.\u0275cmp;i.directiveDefs=()=>e.map(me),i.pipeDefs=()=>n.map(ge)}(Xj,[ud,hd,pd,md,Ed,Cd,bd,_d,wd,Ad,xd,Xg,qg,$g,Qg,Og,tA,_w,Cw,j_,lw,pw,B_,bw,xw,hw,Y_,Q_,oA,hA,pA,mA,sA,cA,Jw,Xw,Ww,OA,RA,IA,YA,QA,XA,ZA,JA,tx,ex,nx,ix,rx,ox,sx,ax,jL,NA,KL,XL,qL,QL,YL,$L,nC,Kx,sV,aV,oV,cV,hV,lV,gj,mj,RV,bV,_V,RT,AV,xV,wV,uN,TB,PB,cB,CB,fB,mB,gB,vB,yB,BB,DB,KV,QV,ej,ZV,JV,tj,qT,cj,lj,LV,OO,DO,PO,kO,TO,RO,FO,BO,VO,HO,GO,QO,YO,JO,wR,_R,HR,CR,tI,ZR,JR,KR,XR,QR,yI,_I,bI,wI,AI,DI,EI,SI,MI,TI,PI,kI,VI,HI,$I,hL,mL,fL,_L,kL,AL,tL,JI,ZI,KI,dU,rU,_U,bU,CU,SU,EU,oU,uU,sU,hU,uC,aC,RP,TP,PP,kP,OP,DP,EP,NN,UN,IN,MN,LN,VN,zN,DN,RN,Tz,AF,sH,rH,nH,Rz,HU,SC,Hz,uH,dx,MH,EH,mH,xC,_H,VC,PC,UC,BC,jC,wC,FC,VL,GU,yj,Ej,wj,xj,Vj,Gj,jj,Wj,lP,Jj,tz,Xj,ez,zz,az,uz,Vz,_z,vz,Bz,mz,vH],[Dd,Ld,Od,Vd,Yd,Hd,Gd,Id,Wd,Fd,Bd,Ud,jd,KA]);const IH=function(t){return{"is-invalid":t}};let LH=(()=>{class t{constructor(t,e,n,i,r,o){this.authService=t,this.ngZone=e,this.matDialog=n,this.dbOperations=i,this.afAuth=r,this.router=o,this.user=new gv,this.submissionUser=new gv,this.maxDate=null,this.minDate=new Date(1995,0,1),this.genders=["Male","Female","Other","Prefer not to say"],this.formWidth=100,this.headingSize="2.0em",this.social=[],this.disableProfileCreate=!0}ngOnInit(){this.getScreenSize();let t=Date.now()-108864e7,e=new Date(t),n=e.getFullYear(),i=e.getDate(),r=e.getMonth();this.maxDate=new Date(n,i,r)}onFileSelected(t){this.file=t.target.files[0],console.log(this.file)}OnDateChange(t){let e=new Fd("en").transform(t,"yyyy/MM/dd");console.log(t);let n=Math.abs(Date.now()-t.getTime());Math.floor(n/864e5/365.25),this.user.birthDate=e.toString()}selectOption(t){console.log(t),this.user.gender=t}creatAcountAndGoForward(){this.authService.checkIfUserExists(this.user).then(()=>{})}onSubmit(){this.social.push(this.facebook),this.social.push(this.instagram),this.social.push(this.others),this.social.push(this.youtube),this.user.socialMedia=this.social,console.log(this.user),this.authService.saveUserProfileInfo(this.user)}lauchCuratorModal(){const t=new XT;t.disableClose=!1,t.id="modal-component",t.height="80%",t.width="50%",this.matDialog.open(Wj,t)}onResize(t){let e=t.target.innerWidth;e>800&&(this.formWidth=80),e>1e3&&(this.formWidth=70),e>1200&&(this.formWidth=60)}getScreenSize(){let t=window.innerWidth;t>800&&(this.formWidth=80),t>1e3&&(this.formWidth=70),t>1200&&(this.formWidth=60)}}return t.\u0275fac=function(e){return new(e||t)(Ns(R_),Ns(Su),Ns(sP),Ns(O_),Ns(a_),Ns(Wg))},t.\u0275cmp=fe({type:t,selectors:[["app-create-profile"]],hostBindings:function(t,e){1&t&&Xs("resize",(function(t){return e.onResize(t)}),!1,Xn)},decls:24,vars:12,consts:[[1,"create-profile",3,"resize"],[1,"profile-bg"],[1,"container-fluid","py-5"],["firstForm","ngForm"],[1,"card","mt-3"],[1,"form-group"],["type","email","name","email","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["email","ngModel"],["class","invalid-feedback",4,"ngIf"],[1,"help-text"],["type","password","name","password","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["password","ngModel"],[1,"move","mt-3"],["mat-button","",1,"btn",3,"click"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){if(1&t&&(js(0,"div",0),Xs("resize",(function(t){return e.onResize(t)}),!1,Xn),js(1,"div",1),js(2,"div",2),js(3,"form",null,3),js(5,"div",4),js(6,"div",5),js(7,"label"),ka(8,"Email"),zs(),js(9,"input",6,7),Xs("ngModelChange",(function(t){return e.user.email=t})),zs(),Ls(11,DH,2,1,"div",8),js(12,"small",9),ka(13,"Enter your email"),zs(),zs(),zs(),js(14,"div",4),js(15,"div",5),js(16,"label"),ka(17,"Password"),zs(),js(18,"input",10,11),Xs("ngModelChange",(function(t){return e.user.password=t})),zs(),Ls(20,RH,4,1,"div",8),zs(),zs(),js(21,"div",12),js(22,"button",13),Xs("click",(function(){return e.creatAcountAndGoForward()})),ka(23,"Next"),zs(),zs(),zs(),zs(),zs(),zs()),2&t){const t=Fs(4),n=Fs(10),i=Fs(19);Cr(2),ga("width",e.formWidth,"%"),Cr(7),Us("ngModel",e.user.email)("ngClass",Sc(8,IH,t.submitted&&n.invalid)),Cr(2),Us("ngIf",t.submitted&&n.invalid),Cr(7),Us("ngModel",e.user.password)("ngClass",Sc(10,IH,t.submitted&&i.invalid)),Cr(2),Us("ngIf",t.submitted&&i.invalid)}},directives:[tA,Q_,Ww,j_,oA,Y_,Jw,ud,md,rF],styles:[".create-profile[_ngcontent-%COMP%]{min-height:100vh;background-image:url(/assets/images/gallery/sample/picture7.png);background-size:cover;background-repeat:no-repeat;background-attachment:fixed;overflow:auto;max-height:100vh}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]{min-height:100vh;background-color:rgba(0,0,0,.8)}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-horizontal-stepper[_ngcontent-%COMP%]{background-color:transparent}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6);padding:1em;border:none;color:#f5f5f5;border-radius:1em}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.9);border-radius:.5em;border-color:teal;color:#fff}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:2em}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:teal;color:#fff;border:none;width:100%}@media (max-width:300px){.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}@media (max-width:400px){.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}@media (max-width:700px){.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}@media (max-width:800px){.create-profile[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}"]}),t})(),FH=(()=>{class t{constructor(t,e,n){this.dbOperations=t,this.router=e,this.route=n,this.images=[],this.videos=[],this.imageUsers=[],this.videoUsers=[],this.splash="",this.id=1595330004864}ngOnInit(){this.getImages(),this.getVideos(),this.generate();let t=document.querySelector("a-scene");t&&t.hasLoaded&&this.playVideoWhenUserEntersRoom()}getExhibitions(){this.dbOperations.artworksCollection().ref.where("status","==","exhibited").onSnapshot(t=>{t.docChanges().map(t=>{const e=t.doc.data();return Object.assign({},e)})})}getGalleryVideo(){this.router.navigateByUrl("/project/home/"+this.id)}getImages(){this.dbOperations.artworksCollection().ref.where("type","==","image").where("status","==","exhibited").onSnapshot(t=>{this.images=t.docChanges().map(t=>{const e=t.doc.data();return console.log(e.id+"images id"),this.getExhibitingImageProfiles(e.userId),e}),console.log(this.images.length+" images")})}getVideos(){this.dbOperations.artworksCollection().ref.where("type","==","video").where("status","==","exhibited").onSnapshot(t=>{this.videos=t.docChanges().map(t=>{const e=t.doc.data();return console.log(e.id+" video id"),this.getExhibitingVideoProfiles(e.userId),e}),console.log(this.videos.length+" videos")})}getExhibitingVideoProfiles(t){this.dbOperations.usersCollection().ref.where("userId","==",t).onSnapshot(t=>{t.docChanges().map(t=>{const e=t.doc.data();return console.log(e.code+" user code"),this.videoUsers.push(e.firstName+" "+e.lastName),e}),console.log(this.videos.length+" users")})}getExhibitingImageProfiles(t){this.dbOperations.usersCollection().ref.where("userId","==",t).onSnapshot(t=>{t.docChanges().map(t=>{const e=t.doc.data();return this.imageUsers.push(e.firstName+" "+e.lastName),console.log(e.code+" user code"),e})})}generate(){const t=[4,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,4,1,1,1,1,1,1,1,1,1,4];document.querySelector("a-scene").addEventListener("render-target-loaded",()=>{const e=document.querySelector("#walls");let n;for(var i=0;i<29;i++){console.log(i);for(var r=0;r<29;r++){const o=29*r+i,s=`${3*(i-14.5)} 1.5 ${3*(r-14.5)}`;if(1===t[o]||2==t[o]||3===t[o]||4===t[o]){let t=document.createElement("a-box");e.appendChild(t),t.setAttribute("width",3..toString()),t.setAttribute("height",25..toString()),t.setAttribute("depth",3..toString()),t.setAttribute("position",s),t.setAttribute("color","#fff"),t.setAttribute("material","src: #wall; repeat: 1 1"),t.setAttribute("static-body","")}8===t[o]&&(n=s),9===t[o]&&console.log(s)}}document.querySelector("#player").setAttribute("position",n)})}playVideoWhenUserEntersRoom(){let t=document.getElementById("theaterVideo1"),e=document.getElementById("theaterVideo2"),n=document.getElementById("theaterVideo3"),i=document.getElementById("theaterVideo4"),r=document.getElementById("theaterVideo5"),o=document.getElementById("theaterVideo6"),s=document.getElementById("theaterVideo7"),a=document.getElementById("theaterVideo8"),l=document.getElementById("theaterVideo9"),c=document.getElementById("theaterVideo10"),u=document.getElementById("theaterVideo11"),h=document.getElementById("theaterVideo12");t.pause(),e.pause(),n.pause(),i.pause(),r.pause(),o.pause(),s.pause(),a.pause(),l.pause(),c.pause(),u.pause(),h.pause()}exitSplashDisplay(){this.splash="none"}}return t.\u0275fac=function(e){return new(e||t)(Ns(O_),Ns(Wg),Ns(km))},t.\u0275cmp=fe({type:t,selectors:[["app-virtual-gallery"]],decls:153,vars:64,consts:[[1,"vr-gallery"],[1,"splash"],[1,"splash__card","p-y"],[1,"title","text-center"],[1,"splash__button",3,"click"],["id","ceiling","src","assets/images/other/ceiling.jpg"],["id","floor","src","assets/images/other/tiles.jpg"],["id","wall","src","assets/images/other/wall-concrete.jpg"],["id","wall-secret","src","assets/images/other/wall-concrete-secret.jpg"],["id","wall-brick","src","assets/images/other/brick.jpg"],["id","room-sign-1","src","assets/images/other/room-sign-1.png"],["id","room-sign-2","src","assets/images/other/room-sign-2.png"],["id","sky","src","assets/images/other/wall-concrete.jpg"],["id","example0","crossorigin","anonymous",3,"src"],["id","example1","crossorigin","anonymous",3,"src"],["id","example2","crossorigin","anonymous",3,"src"],["id","example3","crossorigin","anonymous",3,"src"],["id","example4","crossorigin","anonymous",3,"src"],["id","example5","crossorigin","anonymous",3,"src"],["id","example6","crossorigin","anonymous",3,"src"],["id","example7","crossorigin","anonymous",3,"src"],["id","example8","crossorigin","anonymous",3,"src"],["id","example9","crossorigin","anonymous",3,"src"],["id","example10","crossorigin","anonymous",3,"src"],["id","example11","crossorigin","anonymous",3,"src"],["id","example12","crossorigin","anonymous",3,"src"],["id","example13","crossorigin","anonymous",3,"src"],["id","example14","crossorigin","anonymous",3,"src"],["id","example15","crossorigin","anonymous",3,"src"],["id","example16","crossorigin","anonymous",3,"src"],["id","example17","crossorigin","anonymous",3,"src"],["id","example18","crossorigin","anonymous",3,"src"],["id","example19","crossorigin","anonymous",3,"src"],["id","example20","crossorigin","anonymous",3,"src"],["id","example21","crossorigin","anonymous",3,"src"],["id","example22","crossorigin","anonymous",3,"src"],["id","example23","crossorigin","anonymous",3,"src"],["id","example24","crossorigin","anonymous",3,"src"],["id","example25","crossorigin","anonymous",3,"src"],["id","example26","crossorigin","anonymous",3,"src"],["id","example27","crossorigin","anonymous",3,"src"],["id","example28","crossorigin","anonymous",3,"src"],["id","example29","crossorigin","anonymous",3,"src"],["id","example30","crossorigin","anonymous",3,"src"],["id","example31","crossorigin","anonymous",3,"src"],["id","example32","crossorigin","anonymous",3,"src"],["id","example33","crossorigin","anonymous",3,"src"],["id","example34","crossorigin","anonymous",3,"src"],["id","example35","crossorigin","anonymous",3,"src"],["id","example36","crossorigin","anonymous",3,"src"],["id","example37","crossorigin","anonymous",3,"src"],["id","example38","crossorigin","anonymous",3,"src"],["id","example39","crossorigin","anonymous",3,"src"],["id","example40","crossorigin","anonymous",3,"src"],["id","example41","crossorigin","anonymous",3,"src"],["id","example42","crossorigin","anonymous",3,"src"],["id","example43","crossorigin","anonymous",3,"src"],["id","example44","crossorigin","anonymous",3,"src"],["id","example45","crossorigin","anonymous",3,"src"],["id","example46","crossorigin","anonymous",3,"src"],["id","example47","crossorigin","anonymous",3,"src"],["id","example48","crossorigin","anonymous",3,"src"],["id","example49","crossorigin","anonymous",3,"src"],["id","theaterVideo1","preload","true","loop","true","crossorigin","anonymous",3,"src"],["id","theaterVideo2","preload","true","loop","true","crossorigin","anonymous",3,"src"],["id","theaterVideo3","preload","true","loop","true","crossorigin","anonymous",3,"src"],["id","theaterVideo4","preload","true","loop","true","crossorigin","anonymous",3,"src"],["id","theaterVideo5","preload","true","loop","true","crossorigin","anonymous",3,"src"],["id","theaterVideo6","preload","true","loop","true","crossorigin","anonymous",3,"src"],["id","theaterVideo7","preload","true","loop","true","crossorigin","anonymous",3,"src"],["id","theaterVideo8","preload","true","loop","true","crossorigin","anonymous",3,"src"],["id","theaterVideo9","preload","true","loop","true","crossorigin","anonymous",3,"src"],["id","theaterVideo10","preload","true","loop","true","crossorigin","anonymous",3,"src"],["id","theaterVideo11","preload","true","loop","true","crossorigin","anonymous",3,"src"],["id","theaterVideo12","preload","true","loop","true","crossorigin","anonymous",3,"src"],["id","rig","movement-controls","fly: true"],["camera","","id","player","look-controls",""],["static-body","","position","-41.9 3 30","rotation","0 90 0","src","#example0","width","5","height","5"],["static-body","","position","-41.9 3 20","rotation","0 90 0","src","#example1","width","5","height","5"],["static-body","","position","-41.9 3 3","rotation","0 90 0","src","#example2","width","5","height","5"],["static-body","","position","-41.9 3 -10","rotation","0 90 0","src","#example3","width","5","height","5"],["static-body","","position","-41.9 3 -25","rotation","0 90 0","src","#example4","width","5","height","5"],["static-body","","position","-41.9 3 -35","rotation","0 90 0","src","#example5","width","5","height","5"],["static-body","","position","38.9 3 4","rotation","0 -90 0","src","#example6","width","5","height","5"],["static-body","","position","38.9 3 -3","rotation","0 -90 0","src","#example7","width","5","height","5"],["static-body","","position","38.9 3 -10","rotation","0 -90 0","src","#example8","width","5","height","5"],["static-body","","position","38.9 3 -23","rotation","0 -90 0","src","#example9","width","5","height","5"],["static-body","","position","38.9 3 -30","rotation","0 -90 0","src","#example10","width","5","height","5"],["static-body","","position","38.9 3 -37","rotation","0 -90 0","src","#example11","width","5","height","5"],["position","35 3 -14.9","rotation","0 -180 0","src","#example12","width","5","height","5"],["position","27 3 -14.9","rotation","0 -180 0","src","#example13","width","5","height","5"],["position","20 3 -14.9","rotation","0 -180 0","src","#example14","width","5","height","5"],["position","13 3 -14.9","rotation","0 -180 0","src","#example15","width","5","height","5"],["position","6 3 -14.9","rotation","0 -180 0","src","#example16","width","5","height","5"],["position","-1 3 -14.9","rotation","0 -180 0","src","#example17","width","5","height","5"],["position","-30 3 -14.9","rotation","0 -180 0","src","#example18","width","5","height","5"],["position","-37 3 -14.9","rotation","0 -180 0","src","#example19","width","5","height","5"],["position","35 3 -18.8","rotation","0 180 0","src","#example20","width","5","height","5"],["position","27 3 -18.8","rotation","0 180 0","src","#example21","width","5","height","5"],["position","20 3 -18.8","rotation","0 180 0","src","#example22","width","5","height","5"],["position","13 3 -18.8","rotation","0 180 0","src","#example23","width","5","height","5"],["position","6 3 -18.8","rotation","0 180 0","src","#example24","width","5","height","5"],["position","-1 3 -18.8","rotation","0 180 0","src","#example25","width","5","height","5"],["position","-30 3 -18.8","rotation","0 180 0","src","#example26","width","5","height","5"],["position","-37 3 -18.8","rotation","0 180 0","src","#example27","width","5","height","5"],["position","-30 3 12.2","rotation","0 180 0","src","#example28","width","5","height","5"],["position","-37 3 12.2","rotation","0 180 0","src","#example29","width","5","height","5"],["position","35 3 8.8","rotation","0 180 0","src","#example30","width","5","height","5"],["position","27 3 8.8","rotation","0 180 0","src","#example31","width","5","height","5"],["position","20 3 8.8","rotation","0 180 0","src","#example32","width","5","height","5"],["position","13 3 8.8","rotation","0 180 0","src","#example33","width","5","height","5"],["position","6 3 8.8","rotation","0 180 0","src","#example34","width","5","height","5"],["position","-1 3 8.8","rotation","0 180 0","src","#example35","width","5","height","5"],["position","-30 3 8.8","rotation","0 180 0","src","#example36","width","5","height","5"],["position","-37 3 8.8","rotation","0 180 0","src","#example37","width","5","height","5"],["position","-30 3 8.8","rotation","0 180 0","src","#example38","width","5","height","5"],["position","-37 3 8.8","rotation","0 180 0","src","#example39","width","5","height","5"],["link","on: click; href: gallery/1607104326188 ","src","#theaterVideo1","videoplayer","","visible","true","autoplay","true","webkit-playsinline","","playsinline","","position","-3 3 12.2","width","8","height","6"],["link","on: click; href: gallery/1608564062897 ","src","#theaterVideo2","videoplayer","","visible","true","autoplay","true","webkit-playsinline","","playsinline","","position","6 3 12.2","width","8","height","6"],["link","on: click; href: gallery/1608593601299 ","src","#theaterVideo3","videoplayer","","visible","true","autoplay","true","webkit-playsinline","","playsinline","","position","15 3 12.2","width","8","height","6"],["link","on: click; href: gallery/1608625657409 ","src","#theaterVideo4","videoplayer","","visible","true","autoplay","true","webkit-playsinline","","playsinline","","position","24 3 12.2","width","8","height","6"],["link","on: click; href: gallery/1608628035551 ","src","#theaterVideo5","videoplayer","","visible","true","autoplay","true","webkit-playsinline","","playsinline","","position","33 3 12.2","width","8","height","6"],["link","on: click; href: gallery/1608754647331 ","src","#theaterVideo6","videoplayer","","visible","true","autoplay","true","webkit-playsinline","","playsinline","","position","38.9 3 30","width","8","height","6","rotation","0 -90 0"],["link","on: click; href: gallery/1608825268302 ","src","#theaterVideo7","videoplayer","","visible","true","autoplay","true","webkit-playsinline","","playsinline","","position","38.9 3 18","width","8","height","6","rotation","0 -90 0"],["link","on: click; href: gallery/1608830492163 ","src","#theaterVideo8","videoplayer","","visible","true","autoplay","true","webkit-playsinline","","playsinline","","position","33 3 35.8","width","8","height","6","rotation","0 -180 0"],["link","on: click; href: gallery/1608863626178 ","src","#theaterVideo9","videoplayer","","visible","true","autoplay","true","webkit-playsinline","","playsinline","","position","24 3 35.8","width","8","height","6","rotation","0 -180 0"],["link","on: click; href: gallery/1609004947682 ","src","#theaterVideo10","videoplayer","","visible","true","autoplay","true","webkit-playsinline","","playsinline","","position","15 3 35.8","width","8","height","6","rotation","0 -180 0"],["link","on: click; href: gallery/1609064181626 ","src","#theaterVideo11","videoplayer","","visible","true","autoplay","true","webkit-playsinline","","playsinline","","position","6 3 35.8","width","8","height","6","rotation","0 -180 0"],["link","on: click; href: gallery/1609351927868 ","src","#theaterVideo12","videoplayer","","visible","true","autoplay","true","webkit-playsinline","","playsinline","","position","-3 3 35.8","width","8","height","6","rotation","0 -180 0"],["position","34 3 -41.9","rotation","0 -180 0","src","#example40","width","5","height","5"],["position","27 3 -41.9","rotation","0 -180 0","src","#example41","width","5","height","5"],["position","20 3 -41.9","rotation","0 -180 0","src","#example42","width","5","height","5"],["position","13 3 -41.9","rotation","0 -180 0","src","#example43","width","5","height","5"],["position","6 3 -41.9","rotation","0 -180 0","src","#example44","width","5","height","5"],["position","-1 3 -41.9","rotation","0 -180 0","src","#example45","width","5","height","5"],["position","-8 3 -41.9","rotation","0 -180 0","src","#example46","width","5","height","5"],["position","-15 3 -41.9","rotation","0 -180 0","src","#example47","width","5","height","5"],["position","-22 3 -41.9","rotation","0 -180 0","src","#example48","width","5","height","5"],["position","-29 3 -41.9","rotation","0 -180 0","src","#example49","width","5","height","5"],["position","-36 3 -41.9","rotation","0 -180 0","src","#example50","width","5","height","5"],["id","ground","position","-2 -11 -1","static-body","","material","src: #floor; repeat: 30 30","height","85","width","85","rotation","-90 0 0"],["id","walls"],["position","-2 14.5 -1","rotation","90 0 0","height","85","width","85","static-body","","material","src: #ceiling; repeat: 10 10"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"a-scene"),js(2,"div",1),js(3,"div",2),js(4,"div",3),js(5,"h1"),ka(6,"African Art In Context "),Hs(7,"br"),ka(8," Virtual Gallery"),zs(),zs(),js(9,"p"),ka(10,"You can move around with W-A-S-D keys (desktop), by tapping the screen (mobile) or with the button on your Google Cardboard."),zs(),js(11,"button",4),Xs("click",(function(){return e.exitSplashDisplay()})),ka(12,"Enter"),zs(),zs(),zs(),js(13,"a-assets"),Hs(14,"img",5),Hs(15,"img",6),Hs(16,"img",7),Hs(17,"img",8),Hs(18,"img",9),Hs(19,"img",10),Hs(20,"img",11),Hs(21,"img",12),Hs(22,"img",13),Hs(23,"img",14),Hs(24,"img",15),Hs(25,"img",16),Hs(26,"img",17),Hs(27,"img",18),Hs(28,"img",19),Hs(29,"img",20),Hs(30,"img",21),Hs(31,"img",22),Hs(32,"img",23),Hs(33,"img",24),Hs(34,"img",25),Hs(35,"img",26),Hs(36,"img",27),Hs(37,"img",28),Hs(38,"img",29),Hs(39,"img",30),Hs(40,"img",31),Hs(41,"img",32),Hs(42,"img",33),Hs(43,"img",34),Hs(44,"img",35),Hs(45,"img",36),Hs(46,"img",37),Hs(47,"img",38),Hs(48,"img",39),Hs(49,"img",40),Hs(50,"img",41),Hs(51,"img",42),Hs(52,"img",43),Hs(53,"img",44),Hs(54,"img",45),Hs(55,"img",46),Hs(56,"img",47),Hs(57,"img",48),Hs(58,"img",49),Hs(59,"img",50),Hs(60,"img",51),Hs(61,"img",52),Hs(62,"img",53),Hs(63,"img",54),Hs(64,"img",55),Hs(65,"img",56),Hs(66,"img",57),Hs(67,"img",58),Hs(68,"img",59),Hs(69,"img",60),Hs(70,"img",61),Hs(71,"img",62),Hs(72,"video",63),Hs(73,"video",64),Hs(74,"video",65),Hs(75,"video",66),Hs(76,"video",67),Hs(77,"video",68),Hs(78,"video",69),Hs(79,"video",70),Hs(80,"video",71),Hs(81,"video",72),Hs(82,"video",73),Hs(83,"video",74),zs(),js(84,"a-entity",75),Hs(85,"a-entity",76),zs(),Hs(86,"a-image",77),Hs(87,"a-image",78),Hs(88,"a-image",79),Hs(89,"a-image",80),Hs(90,"a-image",81),Hs(91,"a-image",82),Hs(92,"a-image",83),Hs(93,"a-image",84),Hs(94,"a-image",85),Hs(95,"a-image",86),Hs(96,"a-image",87),Hs(97,"a-image",88),Hs(98,"a-image",89),Hs(99,"a-image",90),Hs(100,"a-image",91),Hs(101,"a-image",92),Hs(102,"a-image",93),Hs(103,"a-image",94),Hs(104,"a-image",95),Hs(105,"a-image",96),Hs(106,"a-image",97),Hs(107,"a-image",98),Hs(108,"a-image",99),Hs(109,"a-image",100),Hs(110,"a-image",101),Hs(111,"a-image",102),Hs(112,"a-image",103),Hs(113,"a-image",104),Hs(114,"a-image",105),Hs(115,"a-image",106),Hs(116,"a-image",107),Hs(117,"a-image",108),Hs(118,"a-image",109),Hs(119,"a-image",110),Hs(120,"a-image",111),Hs(121,"a-image",112),Hs(122,"a-image",113),Hs(123,"a-image",114),Hs(124,"a-image",115),Hs(125,"a-image",116),Hs(126,"a-video",117),Hs(127,"a-video",118),Hs(128,"a-video",119),Hs(129,"a-video",120),Hs(130,"a-video",121),Hs(131,"a-video",122),Hs(132,"a-video",123),Hs(133,"a-video",124),Hs(134,"a-video",125),Hs(135,"a-video",126),Hs(136,"a-video",127),Hs(137,"a-video",128),Hs(138,"a-image",129),Hs(139,"a-image",130),Hs(140,"a-image",131),Hs(141,"a-image",132),Hs(142,"a-image",133),Hs(143,"a-image",134),Hs(144,"a-image",135),Hs(145,"a-image",136),Hs(146,"a-image",137),Hs(147,"a-image",138),Hs(148,"a-image",139),Hs(149,"a-plane",140),ka(150,") "),Hs(151,"a-entity",141),Hs(152,"a-plane",142),zs(),zs()),2&t&&(Cr(2),ga("display",e.splash),Cr(20),aa("src",e.images[0].url,rr),Cr(1),aa("src",e.images[1].url,rr),Cr(1),aa("src",e.images[2].url,rr),Cr(1),aa("src",e.images[3].url,rr),Cr(1),aa("src",e.images[4].url,rr),Cr(1),aa("src",e.images[5].url,rr),Cr(1),aa("src",e.images[6].url,rr),Cr(1),aa("src",e.images[7].url,rr),Cr(1),aa("src",e.images[8].url,rr),Cr(1),aa("src",e.images[9].url,rr),Cr(1),aa("src",e.images[10].url,rr),Cr(1),aa("src",e.images[11].url,rr),Cr(1),aa("src",e.images[12].url,rr),Cr(1),aa("src",e.images[13].url,rr),Cr(1),aa("src",e.images[14].url,rr),Cr(1),aa("src",e.images[15].url,rr),Cr(1),aa("src",e.images[16].url,rr),Cr(1),aa("src",e.images[17].url,rr),Cr(1),aa("src",e.images[18].url,rr),Cr(1),aa("src",e.images[19].url,rr),Cr(1),aa("src",e.images[20].url,rr),Cr(1),aa("src",e.images[21].url,rr),Cr(1),aa("src",e.images[22].url,rr),Cr(1),aa("src",e.images[23].url,rr),Cr(1),aa("src",e.images[24].url,rr),Cr(1),aa("src",e.images[25].url,rr),Cr(1),aa("src",e.images[26].url,rr),Cr(1),aa("src",e.images[27].url,rr),Cr(1),aa("src",e.images[28].url,rr),Cr(1),aa("src",e.images[29].url,rr),Cr(1),aa("src",e.images[30].url,rr),Cr(1),aa("src",e.images[31].url,rr),Cr(1),aa("src",e.images[32].url,rr),Cr(1),aa("src",e.images[33].url,rr),Cr(1),aa("src",e.images[34].url,rr),Cr(1),aa("src",e.images[35].url,rr),Cr(1),aa("src",e.images[36].url,rr),Cr(1),aa("src",e.images[37].url,rr),Cr(1),aa("src",e.images[38].url,rr),Cr(1),aa("src",e.images[39].url,rr),Cr(1),aa("src",e.images[40].url,rr),Cr(1),aa("src",e.images[41].url,rr),Cr(1),aa("src",e.images[42].url,rr),Cr(1),aa("src",e.images[43].url,rr),Cr(1),aa("src",e.images[44].url,rr),Cr(1),aa("src",e.images[45].url,rr),Cr(1),aa("src",e.images[46].url,rr),Cr(1),aa("src",e.images[47].url,rr),Cr(1),aa("src",e.images[48].url,rr),Cr(1),aa("src",e.images[49].url,rr),Cr(1),aa("src",e.videos[0].url,rr),Cr(1),aa("src",e.videos[1].url,rr),Cr(1),aa("src",e.videos[2].url,rr),Cr(1),aa("src",e.videos[3].url,rr),Cr(1),aa("src",e.videos[4].url,rr),Cr(1),aa("src",e.videos[5].url,rr),Cr(1),aa("src",e.videos[6].url,rr),Cr(1),aa("src",e.videos[7].url,rr),Cr(1),aa("src",e.videos[8].url,rr),Cr(1),aa("src",e.videos[9].url,rr),Cr(1),aa("src",e.videos[10].url,rr),Cr(1),aa("src",e.videos[11].url,rr))},styles:[".vr-gallery[_ngcontent-%COMP%]{min-height:100vh;max-height:100vh}.vr-gallery[_ngcontent-%COMP%]   .splash[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100vh;background-color:rgba(0,0,0,.7);z-index:99999;display:flex;align-items:center;justify-content:center}.vr-gallery[_ngcontent-%COMP%]   .splash__card[_ngcontent-%COMP%]{max-width:50%;background-color:#f1f1f1;text-align:center;padding:15px;border-radius:4px}@media only screen and (max-width:700px){.vr-gallery[_ngcontent-%COMP%]   .splash__card[_ngcontent-%COMP%]{max-width:88%}}.vr-gallery[_ngcontent-%COMP%]   .splash__button[_ngcontent-%COMP%]{padding:20px 30px;border:none;background-color:#000;color:#fff;cursor:pointer;font-size:18px;text-transform:uppercase;font-weight:700;border-radius:4px}.vr-gallery[_ngcontent-%COMP%]   .splash__img[_ngcontent-%COMP%]{max-width:100%;display:block;height:160px;margin:20px auto}.vr-gallery[_ngcontent-%COMP%]   .vr-loader[_ngcontent-%COMP%]{display:none}.mainUI[_ngcontent-%COMP%]{border:0 solid pink;position:fixed;top:0;width:99%;height:99%;z-index:1}.mainUI[_ngcontent-%COMP%], .regionUI[_ngcontent-%COMP%]{pointer-events:none}.regionUI[_ngcontent-%COMP%]{border:0 solid #ff0;position:absolute;display:flex;flex-direction:row}.buttonUI[_ngcontent-%COMP%]{border:0 solid #0f0;display:flex;flex-direction:column;justify-content:center;pointer-events:auto;-webkit-filter:drop-shadow(0 0 20px #fff);filter:drop-shadow(0 0 20px white)}.skyColor[_ngcontent-%COMP%]{-webkit-filter:hue-rotate(240deg) saturate(100%) brightness(100%) drop-shadow(0 0 20px #fff);filter:hue-rotate(240deg) saturate(100%) brightness(100%) drop-shadow(0 0 20px white)}.baseColor[_ngcontent-%COMP%]{-webkit-filter:hue-rotate(24deg) saturate(68%) brightness(100%) drop-shadow(0 0 20px #fff);filter:hue-rotate(24deg) saturate(68%) brightness(100%) drop-shadow(0 0 20px white)}.grayColor[_ngcontent-%COMP%]{-webkit-filter:hue-rotate(0deg) saturate(0) brightness(100%) drop-shadow(0 0 20px #fff);filter:hue-rotate(0deg) saturate(0) brightness(100%) drop-shadow(0 0 20px white)}"]}),t})();function NH(t,e){1&t&&(js(0,"div"),ka(1," Your first name cannot be empty "),zs())}function BH(t,e){if(1&t&&(js(0,"div",33),Ls(1,NH,2,0,"div",34),zs()),2&t){ea();const t=Fs(12);Cr(1),Us("ngIf",t.errors.required)}}function UH(t,e){1&t&&(js(0,"div"),ka(1," Your last name cannot be empty "),zs())}function VH(t,e){if(1&t&&(js(0,"div",33),Ls(1,UH,2,0,"div",34),zs()),2&t){ea();const t=Fs(21);Cr(1),Us("ngIf",t.errors.required)}}function jH(t,e){if(1&t&&(js(0,"option"),ka(1),zs()),2&t){const t=e.$implicit;Cr(1),Oa(" ",t," ")}}function zH(t,e){1&t&&(js(0,"div"),ka(1," Please select your gender "),zs())}function HH(t,e){if(1&t&&(js(0,"div",33),Ls(1,zH,2,0,"div",34),js(2,"small",11),ka(3,"Select your gender"),zs(),zs()),2&t){ea();const t=Fs(43);Cr(1),Us("ngIf",t.errors.required)}}function GH(t,e){1&t&&(js(0,"div"),ka(1," Phone number cannot be empty "),zs())}function WH(t,e){if(1&t&&(js(0,"div",33),Ls(1,GH,2,0,"div",34),js(2,"small",11),ka(3,"What is your phone number?"),zs(),zs()),2&t){ea();const t=Fs(53);Cr(1),Us("ngIf",t.errors.required)}}function qH(t,e){1&t&&(js(0,"div"),ka(1," Country of residence cannot be empty "),zs())}function $H(t,e){if(1&t&&(js(0,"div",33),Ls(1,qH,2,0,"div",34),js(2,"small",11),ka(3,"Tell us the country of your residence"),zs(),zs()),2&t){ea();const t=Fs(68);Cr(1),Us("ngIf",t.errors.required)}}function YH(t,e){1&t&&(js(0,"div"),ka(1," Nationality cannot be empty "),zs())}function QH(t,e){if(1&t&&(js(0,"div",33),Ls(1,YH,2,0,"div",34),js(2,"small",11),ka(3,"Tell us your nationality"),zs(),zs()),2&t){ea();const t=Fs(74);Cr(1),Us("ngIf",t.errors.required)}}const XH=function(t){return{"is-invalid":t}};let KH=(()=>{class t{constructor(t,e,n,i,r){this.ngZone=t,this.authService=e,this.dbOperations=n,this.afAuth=i,this.router=r,this.maxDate=null,this.minDate=new Date(1985,0,1),this.genders=["Male","Female","Other","Prefer not to say"],this.formWidth=100,this.headingSize="2.0em",this.currentUser=""}ngOnInit(){this.getScreenSize(),this.currentUser=localStorage.getItem("currentUser"),this.user=this.authService.user;let t=Date.now()-108864e7,e=new Date(t),n=e.getFullYear(),i=e.getDate(),r=e.getMonth();this.maxDate=new Date(n,i,r)}saveUserProfileInfo(){this.authService.saveUserProfileInfo(this.user)}selectOption(t){console.log(t),this.user.gender=t}OnDateChange(t){let e=new Fd("en").transform(t,"yyyy/MM/dd");console.log(t);let n=Math.abs(Date.now()-t.getTime());Math.floor(n/864e5/365.25),this.user.birthDate=e.toString()}onResize(t){let e=t.target.innerWidth;e>800&&(this.formWidth=80),e>1e3&&(this.formWidth=70),e>1200&&(this.formWidth=60)}getScreenSize(){let t=window.innerWidth;t>800&&(this.formWidth=80),t>1e3&&(this.formWidth=70),t>1200&&(this.formWidth=60)}}return t.\u0275fac=function(e){return new(e||t)(Ns(Su),Ns(R_),Ns(O_),Ns(a_),Ns(Wg))},t.\u0275cmp=fe({type:t,selectors:[["app-profile-info"]],hostBindings:function(t,e){1&t&&Xs("resize",(function(t){return e.onResize(t)}),!1,Xn)},decls:79,vars:38,consts:[[1,"create-profile",3,"resize"],[1,"profile-bg"],[1,"container-fluid","py-5"],["secondForm","ngForm"],[1,"card"],[1,"row"],[1,"col-xs-12","col-sm-12","col-md-6","mt-3"],[1,"form-group"],["type","text","name","firstName","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["firstName","ngModel"],["class","invalid-feedback",4,"ngIf"],[1,"help-text"],["type","text","name","lastName","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["lastName","ngModel"],[1,"card","mt-3"],["name","birthDate","matInput","",1,"form-control",3,"min","max","matDatepicker","dateInput"],["matSuffix","",3,"for"],["picker",""],["name","gender","required","",1,"form-control",3,"ngModel","ngClass","change","ngModelChange"],["gender","ngModel"],["value",""],[4,"ngFor","ngForOf"],["type","text","name","phoneNumber","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["phoneNumber","ngModel"],[1,"address","mt-3"],["type","text","name","firstAddress","required","",1,"form-control",3,"ngModel","ngModelChange"],["firstAddress","ngModel"],["type","text","name","country","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["country","ngModel"],["type","text","name","nationality",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["nationality","ngModel"],[1,"move","mt-3"],["mat-button","",1,"btn",3,"click"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){if(1&t&&(js(0,"div",0),Xs("resize",(function(t){return e.onResize(t)}),!1,Xn),js(1,"div",1),js(2,"div",2),js(3,"form",null,3),js(5,"div",4),js(6,"div",5),js(7,"div",6),js(8,"div",7),js(9,"label"),ka(10,"First Name"),zs(),js(11,"input",8,9),Xs("ngModelChange",(function(t){return e.user.firstName=t})),zs(),Ls(13,BH,2,1,"div",10),js(14,"small",11),ka(15,"Tell us your first name"),zs(),zs(),zs(),js(16,"div",6),js(17,"div",7),js(18,"label"),ka(19,"Last Name"),zs(),js(20,"input",12,13),Xs("ngModelChange",(function(t){return e.user.lastName=t})),zs(),Ls(22,VH,2,1,"div",10),js(23,"small",11),ka(24,"Tell us your last name"),zs(),zs(),zs(),zs(),zs(),js(25,"div",14),js(26,"div",7),js(27,"div"),js(28,"label"),ka(29,"Date Of Birth "),zs(),zs(),js(30,"div"),js(31,"mat-form-field"),js(32,"input",15),Xs("dateInput",(function(t){return e.OnDateChange(t.value)})),zs(),Hs(33,"mat-datepicker-toggle",16),Hs(34,"mat-datepicker",null,17),zs(),zs(),js(36,"small",11),ka(37,"Choose your date of birth"),zs(),zs(),zs(),js(38,"div",14),js(39,"div",7),js(40,"label"),ka(41,"Gender"),zs(),js(42,"select",18,19),Xs("change",(function(t){return e.selectOption(t.target.value)}))("ngModelChange",(function(t){return e.user.gender=t})),js(44,"option",20),ka(45,"Select an option"),zs(),Ls(46,jH,2,1,"option",21),zs(),Ls(47,HH,4,1,"div",10),zs(),zs(),js(48,"div",14),js(49,"div",7),js(50,"label"),ka(51,"Phone Number"),zs(),js(52,"input",22,23),Xs("ngModelChange",(function(t){return e.user.phoneNumber=t})),zs(),Ls(54,WH,4,1,"div",10),zs(),zs(),js(55,"div",24),js(56,"div",4),js(57,"div",7),js(58,"label"),ka(59,"Street Address 1"),zs(),js(60,"input",25,26),Xs("ngModelChange",(function(t){return e.user.address=t})),zs(),js(62,"small",11),ka(63,"Your street address"),zs(),zs(),js(64,"div",7),js(65,"label"),ka(66,"Country of Residence"),zs(),js(67,"input",27,28),Xs("ngModelChange",(function(t){return e.user.country=t})),zs(),Ls(69,$H,4,1,"div",10),js(70,"div",7),js(71,"label"),ka(72,"Nationality"),zs(),js(73,"input",29,30),Xs("ngModelChange",(function(t){return e.user.nationality=t})),zs(),Ls(75,QH,4,1,"div",10),zs(),zs(),zs(),zs(),js(76,"div",31),js(77,"button",32),Xs("click",(function(){return e.saveUserProfileInfo()})),ka(78,"Submit your profile info"),zs(),zs(),zs(),zs(),zs(),zs()),2&t){const t=Fs(4),n=Fs(12),i=Fs(21),r=Fs(35),o=Fs(43),s=Fs(53),a=Fs(68),l=Fs(74);Cr(2),ga("width",e.formWidth,"%"),Cr(9),Us("ngModel",e.user.firstName)("ngClass",Sc(26,XH,t.submitted&&n.invalid)),Cr(2),Us("ngIf",t.submitted&&n.invalid),Cr(7),Us("ngModel",e.user.lastName)("ngClass",Sc(28,XH,t.submitted&&i.invalid)),Cr(2),Us("ngIf",t.submitted&&i.invalid),Cr(10),Us("min",e.minDate)("max",e.maxDate)("matDatepicker",r),Cr(1),Us("for",r),Cr(9),Us("ngModel",e.user.gender)("ngClass",Sc(30,XH,t.submitted&&o.invalid)),Cr(4),Us("ngForOf",e.genders),Cr(1),Us("ngIf",t.submitted&&o.invalid),Cr(5),Us("ngModel",e.user.phoneNumber)("ngClass",Sc(32,XH,t.submitted&&s.invalid)),Cr(2),Us("ngIf",t.submitted&&s.invalid),Cr(6),Us("ngModel",e.user.address),Cr(7),Us("ngModel",e.user.country)("ngClass",Sc(34,XH,t.submitted&&a.invalid)),Cr(2),Us("ngIf",t.submitted&&a.invalid),Cr(4),Us("ngModel",e.user.nationality)("ngClass",Sc(36,XH,t.submitted&&l.invalid)),Cr(2),Us("ngIf",t.submitted&&l.invalid)}},directives:[tA,Q_,Ww,j_,oA,Y_,Jw,ud,md,CB,BB,CU,SU,yB,_U,bw,_w,Cw,pd,rF],styles:[".create-profile[_ngcontent-%COMP%]{min-height:100vh;background-image:url(/assets/images/gallery/sample/picture7.png);background-size:cover;background-repeat:no-repeat;background-attachment:fixed;overflow:auto;max-height:100vh}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]{min-height:100vh;background-color:rgba(0,0,0,.8)}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-horizontal-stepper[_ngcontent-%COMP%]{background-color:transparent}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6);padding:1em;border:none;color:#f5f5f5;border-radius:1em}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.9);border-radius:.5em;border-color:teal;color:#fff}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:2em}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:teal;color:#fff;border:none;width:100%}@media (max-width:300px){.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}@media (max-width:400px){.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}@media (max-width:700px){.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}@media (max-width:800px){.create-profile[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}"]}),t})(),ZH=(()=>{class t{constructor(t,e,n,i,r){this.ngZone=t,this.authService=e,this.dbOperations=n,this.afAuth=i,this.router=r,this.formWidth=100,this.headingSize="2.0em",this.currentUser="",this.social=[]}ngOnInit(){this.user=this.authService.user,this.getScreenSize(),this.currentUser=localStorage.getItem("currentUser")}saveUserSocialMediaInfo(){this.social.push(this.facebook),this.social.push(this.instagram),this.social.push(this.others),this.social.push(this.youtube),this.user.socialMedia=this.social,this.authService.saveUserSociaMediaInfo(this.user)}skipSocialMedia(){this.authService.skipSocialMedia()}onResize(t){let e=t.target.innerWidth;e>800&&(this.formWidth=80),e>1e3&&(this.formWidth=70),e>1200&&(this.formWidth=60)}getScreenSize(){let t=window.innerWidth;t>800&&(this.formWidth=80),t>1e3&&(this.formWidth=70),t>1200&&(this.formWidth=60)}}return t.\u0275fac=function(e){return new(e||t)(Ns(Su),Ns(R_),Ns(O_),Ns(a_),Ns(Wg))},t.\u0275cmp=fe({type:t,selectors:[["app-social-media-info"]],hostBindings:function(t,e){1&t&&Xs("resize",(function(t){return e.onResize(t)}),!1,Xn)},decls:44,vars:6,consts:[[1,"create-profile",3,"resize"],[1,"profile-bg"],[1,"container-fluid","py-5"],["thirdForm","ngForm"],[1,"social-media-handles"],[1,"row"],[1,"col-md-6","mt-3"],[1,"card"],[1,"form-group"],["type","text","name","facebook","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"help-text"],["type","text","name","instagram",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","youtube","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","others","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"next"],[1,"form-group","mt-3"],[1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(js(0,"div",0),Xs("resize",(function(t){return e.onResize(t)}),!1,Xn),js(1,"div",1),js(2,"div",2),js(3,"form",null,3),js(5,"div",4),js(6,"div",5),js(7,"div",6),js(8,"div",7),js(9,"div",8),js(10,"label"),ka(11,"Facebook"),zs(),js(12,"input",9),Xs("ngModelChange",(function(t){return e.facebook=t})),zs(),js(13,"small",10),ka(14,"Link to your facebook page"),zs(),zs(),zs(),zs(),js(15,"div",6),js(16,"div",7),js(17,"div",8),js(18,"label"),ka(19,"Instagram"),zs(),js(20,"input",11),Xs("ngModelChange",(function(t){return e.instagram=t})),zs(),js(21,"small",10),ka(22,"Your instagram username"),zs(),zs(),zs(),zs(),zs(),js(23,"div",5),js(24,"div",6),js(25,"div",7),js(26,"div",8),js(27,"label"),ka(28,"You Tube"),zs(),js(29,"input",12),Xs("ngModelChange",(function(t){return e.youtube=t})),zs(),js(30,"small",10),ka(31,"Link to your youtube channel"),zs(),zs(),zs(),zs(),js(32,"div",6),js(33,"div",7),js(34,"div",8),js(35,"label"),ka(36,"Others"),zs(),js(37,"input",13),Xs("ngModelChange",(function(t){return e.others=t})),zs(),js(38,"small",10),ka(39,"Provide us with any social media account"),zs(),zs(),zs(),zs(),zs(),zs(),js(40,"div",14),js(41,"div",15),js(42,"button",16),Xs("click",(function(){return e.saveUserSocialMediaInfo()})),ka(43,"Proceed to submit"),zs(),zs(),zs(),zs(),zs(),zs(),zs()),2&t&&(Cr(2),ga("width",e.formWidth,"%"),Cr(10),Us("ngModel",e.facebook),Cr(8),Us("ngModel",e.instagram),Cr(9),Us("ngModel",e.youtube),Cr(8),Us("ngModel",e.others))},directives:[tA,Q_,Ww,j_,oA,Y_,Jw],styles:[".create-profile[_ngcontent-%COMP%]{min-height:100vh;background-image:url(/assets/images/gallery/sample/picture7.png);background-size:cover;background-repeat:no-repeat;background-attachment:fixed;overflow:auto;max-height:100vh}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]{min-height:100vh;background-color:rgba(0,0,0,.8)}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-horizontal-stepper[_ngcontent-%COMP%]{background-color:transparent}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6);padding:1em;border:none;color:#f5f5f5;border-radius:1em}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.9);border-radius:.5em;border-color:teal;color:#fff}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:2em}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:teal;color:#fff;border:none;width:100%}@media (max-width:300px){.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}@media (max-width:400px){.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}@media (max-width:700px){.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}@media (max-width:800px){.create-profile[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}.create-profile[_ngcontent-%COMP%]   .profile-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%}}"]}),t})();const JH=["fileDropRef"];let tG=(()=>{class t{constructor(t,e,n,i,r,o){this.snackBar=t,this.router=e,this.matDialog=n,this.fauth=i,this.storage=r,this.dbOperations=o,this.progress=0,this.artwork=new jb,this.extraDetails=new zb,this.artworks=[],this.submittedWorks=[],this.files=[],this.pdfs=[],this.uploadedDocuments=0,this.checkedTerms=!1,this.checkedPrivacy=!1,this.formWidth=100,this.answered=!1,this.currentUser="",this.disabled=!1,this.submit=!0}ngOnInit(){this.getScreenSize(),this.getCurrentUser(),console.log(localStorage.getItem("currentUser"))}onResize(t){let e=t.target.innerWidth;e>800&&(this.formWidth=80),e>1e3&&(this.formWidth=70),e>1200&&(this.formWidth=60)}getScreenSize(){let t=window.innerWidth;t>800&&(this.formWidth=80),t>1e3&&(this.formWidth=70),t>1200&&(this.formWidth=60)}onSubmit(){this.goForward()}goForward(){null!=this.artworkFile?this.artworkFile.type.includes("video")||this.artworkFile.type.includes("image")?this.dbOperations.file=this.artworkFile:window.alert("Please upload photography/videography artwork"):(this.submit=!1,window.alert("Please upload photography/videography artwork")),null!=this.consentForm?this.dbOperations.consentForm=this.consentForm:(this.submit=!1,window.alert("Please upload your consent form")),this.submit&&(this.dbOperations.temporaryArtwork=this.artwork,this.router.navigateByUrl("/artwork-info"))}checkReadTermsValue(){console.log(this.checkedTerms),this.checkedTerms=!this.checkedTerms}checkReadPrivacy(){this.checkedPrivacy=!this.checkedPrivacy}getCurrentUser(){this.currentUser=localStorage.getItem("currentUser")}onFileSelected(t){let e=t.target.files[0];e.type.includes("video")||e.type.includes("image")?(this.submit=!0,this.artworkFile=e):window.alert("Please upload photography/videography artwork")}onSubjectConsentSelected(t){let e=t.target.files[0];e.name.substring(e.name.lastIndexOf(".")+1),this.submit=!0,this.consentForm=e}downloadConsentForm(){this.storage.ref("consent/PARTICIPANT CONSENT AND RELEASE FORM.pdf").getDownloadURL().subscribe(t=>{console.log(t),Object(FP.saveAs)(t,"subject-consent-form.pdf");var e=new XMLHttpRequest;e.responseType="blob",e.onload=function(t){var n=e.response;Object(FP.saveAs)(n,"PARTICIPANT CONSENT AND RELEASE FORM.pdf")}})}downloadArtistCOnsentForm(){this.storage.ref("consent/PARTICIPANT CONSENT AND RELEASE FORM.pdf").getDownloadURL().subscribe(t=>{console.log(t),Object(FP.saveAs)(t,"PARTICIPANT CONSENT AND RELEASE FORM.pdf");var e=new XMLHttpRequest;e.responseType="blob",e.onload=function(t){}})}OnDateChange(t){this.artwork.shotDate=t}}return t.\u0275fac=function(e){return new(e||t)(Ns(EF),Ns(Wg),Ns(sP),Ns(a_),Ns(Ub),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-upload-files"]],viewQuery:function(t,e){var n;1&t&&Qc(JH,!0),2&t&&$c(n=tu())&&(e.fileDropEl=n.first)},hostBindings:function(t,e){1&t&&Xs("resize",(function(t){return e.onResize(t)}),!1,Xn)},inputs:{progress:"progress"},decls:28,vars:2,consts:[[1,"add-artwork",3,"resize"],[1,"artwork-bg"],[1,"container-fluid"],[1,"artwork-form","py-5"],["firstForm","ngForm"],[1,"artwork-type"],[1,"card","p-3","mt-3"],[1,"form-group"],["type","file","id","file","name","image","autocomplete","off",1,"form-control",3,"change"],["userPhoto",""],[1,"help-text"],[1,"pdf-consent","hand","p-2","mt-3","d-flex",3,"click"],["src","assets/images/pdf.png","alt",""],[1,"m-2"],[1,"move","mt-3"],["mat-button","",1,"btn",3,"click"]],template:function(t,e){1&t&&(js(0,"div",0),Xs("resize",(function(t){return e.onResize(t)}),!1,Xn),js(1,"div",1),js(2,"div",2),js(3,"div",3),js(4,"form",null,4),js(6,"div",5),js(7,"div",6),js(8,"div",7),js(9,"label"),ka(10,"Browse a photograph or video to submit"),zs(),js(11,"input",8,9),Xs("change",(function(t){return e.onFileSelected(t)})),zs(),js(13,"small",10),ka(14,"Select a photo or video from your device"),zs(),zs(),zs(),zs(),js(15,"div",6),js(16,"div",7),js(17,"input",8,9),Xs("change",(function(t){return e.onSubjectConsentSelected(t)})),zs(),js(19,"small",10),ka(20,"Please download, fill and upload the consent form"),zs(),js(21,"div",11),Xs("click",(function(){return e.downloadConsentForm()})),Hs(22,"img",12),js(23,"p",13),ka(24,"Download the participant consent and release form"),zs(),zs(),zs(),zs(),js(25,"div",14),js(26,"button",15),Xs("click",(function(){return e.onSubmit()})),ka(27,"Next"),zs(),zs(),zs(),zs(),zs(),zs(),zs()),2&t&&(Cr(2),ga("width",e.formWidth,"%"))},directives:[tA,Q_,Ww,rF],styles:[".add-artwork[_ngcontent-%COMP%]{min-height:100vh;max-height:100vh;background-image:url(/assets/images/gallery/sample/picture7.png);background-size:cover;background-repeat:no-repeat;background-attachment:fixed;overflow:auto}.add-artwork[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{margin-right:8px}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.8);height:100%;min-height:100vh}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%;height:100%}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .hand[_ngcontent-%COMP%]:hover{cursor:pointer;cursor:hand}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6);padding:1em;border:none;color:#f5f5f5;border-radius:1em}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.9);border-radius:.5em;border-color:teal;color:#fff}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:2em}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f5f5f5}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .pdf-consent[_ngcontent-%COMP%]{background-color:teal}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .pdf-consent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:teal;color:#fff;border:none;width:100%}"]}),t})();const eG=["fileDropRef"];function nG(t,e){1&t&&(js(0,"div"),ka(1,"Please tell us your country "),zs())}function iG(t,e){if(1&t&&(js(0,"div",20),Ls(1,nG,2,0,"div",21),js(2,"small",10),ka(3,"Tell us your country"),zs(),zs()),2&t){ea();const t=Fs(24);Cr(1),Us("ngIf",t.errors.required)}}function rG(t,e){1&t&&(js(0,"div"),ka(1,"Add a title to your submission "),zs())}function oG(t,e){if(1&t&&(js(0,"div",20),Ls(1,rG,2,0,"div",21),js(2,"small",10),ka(3,"What is the title of this submission?"),zs(),zs()),2&t){ea();const t=Fs(31);Cr(1),Us("ngIf",t.errors.required)}}function sG(t,e){1&t&&(js(0,"div"),ka(1,"Add a description to your submission "),zs())}function aG(t,e){if(1&t&&(js(0,"div",20),Ls(1,sG,2,0,"div",21),js(2,"small",10),ka(3,"Describe your submission in 150 words"),zs(),zs()),2&t){ea();const t=Fs(38);Cr(1),Us("ngIf",t.errors.required)}}const lG=function(t){return{"is-invalid":t}};let cG=(()=>{class t{constructor(t,e,n,i){this.router=t,this.fauth=e,this.storage=n,this.dbOperations=i,this.progress=0,this.artwork=new jb,this.extraDetails=new zb,this.artworks=[],this.submittedWorks=[],this.files=[],this.pdfs=[],this.uploadedDocuments=0,this.checkedTerms=!1,this.checkedPrivacy=!1,this.formWidth=100,this.answered=!1,this.currentUser="",this.disabled=!1,this.submit=!1}ngOnInit(){this.getScreenSize(),this.getCurrentUser(),console.log(localStorage.getItem("currentUser"))}onResize(t){let e=t.target.innerWidth;e>800&&(this.formWidth=80),e>1e3&&(this.formWidth=70),e>1200&&(this.formWidth=60)}getScreenSize(){let t=window.innerWidth;t>800&&(this.formWidth=80),t>1e3&&(this.formWidth=70),t>1200&&(this.formWidth=60)}OnDateChange(t){this.artwork.shotDate=t}goForward(){console.log(this.artwork),console.log("consent form "+this.dbOperations.consentForm),console.log(this.dbOperations.temporaryArtwork),console.log(this.dbOperations.file),this.dbOperations.temporaryArtwork=this.artwork,this.router.navigateByUrl("/confirm-submission")}getCurrentUser(){this.currentUser=localStorage.getItem("currentUser")}}return t.\u0275fac=function(e){return new(e||t)(Ns(Wg),Ns(a_),Ns(Ub),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-artwork-info"]],viewQuery:function(t,e){var n;1&t&&Qc(eG,!0),2&t&&$c(n=tu())&&(e.fileDropEl=n.first)},hostBindings:function(t,e){1&t&&Xs("resize",(function(t){return e.onResize(t)}),!1,Xn)},inputs:{progress:"progress"},decls:44,vars:20,consts:[[1,"add-artwork",3,"resize"],[1,"artwork-bg"],[1,"container-fluid"],[1,"artwork-form","py-5"],["secondForm","ngForm"],[1,"card","p-3","mt-3"],[1,"form-group"],["matInput","",1,"form-control",3,"matDatepicker","dateInput"],["matSuffix","",3,"for"],["picker",""],[1,"help-text"],["type","text","name","place","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["place","ngModel"],["class","invalid-feedback",4,"ngIf"],["type","text","name","title","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["title","ngModel"],["type","text","name","description","maxlength","150","required","",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["description","ngModel"],[1,"move","mt-3"],[1,"btn","btn-primary",3,"disabled","click"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){if(1&t&&(js(0,"div",0),Xs("resize",(function(t){return e.onResize(t)}),!1,Xn),js(1,"div",1),js(2,"div",2),js(3,"div",3),js(4,"form",null,4),js(6,"div",5),js(7,"div",6),js(8,"div"),js(9,"label"),ka(10,"Date Shot"),zs(),zs(),js(11,"mat-form-field"),js(12,"input",7),Xs("dateInput",(function(t){return e.OnDateChange(t.value)})),zs(),Hs(13,"mat-datepicker-toggle",8),Hs(14,"mat-datepicker",null,9),zs(),zs(),js(16,"div"),js(17,"small",10),ka(18,"Which date did you shoot this? "),zs(),zs(),zs(),js(19,"div",5),js(20,"div",6),js(21,"label"),ka(22,"Town/Country"),zs(),js(23,"input",11,12),Xs("ngModelChange",(function(t){return e.artwork.place=t})),zs(),Ls(25,iG,4,1,"div",13),zs(),zs(),js(26,"div",5),js(27,"div",6),js(28,"label"),ka(29,"Title"),zs(),js(30,"input",14,15),Xs("ngModelChange",(function(t){return e.artwork.title=t})),zs(),Ls(32,oG,4,1,"div",13),zs(),zs(),js(33,"div",5),js(34,"div",6),js(35,"label"),ka(36,"Description"),zs(),js(37,"input",16,17),Xs("ngModelChange",(function(t){return e.artwork.description=t})),zs(),Ls(39,aG,4,1,"div",13),zs(),zs(),js(40,"div",18),js(41,"div",6),js(42,"button",19),Xs("click",(function(){return e.goForward()})),ka(43,"Next"),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs()),2&t){const t=Fs(5),n=Fs(15),i=Fs(24),r=Fs(31),o=Fs(38);Cr(2),ga("width",e.formWidth,"%"),Cr(10),Us("matDatepicker",n),Cr(1),Us("for",n),Cr(10),Us("ngModel",e.artwork.place)("ngClass",Sc(14,lG,t.submitted&&i.invalid)),Cr(2),Us("ngIf",t.submitted&&i.invalid),Cr(5),Us("ngModel",e.artwork.title)("ngClass",Sc(16,lG,t.submitted&&r.invalid)),Cr(2),Us("ngIf",t.submitted&&r.invalid),Cr(5),Us("ngModel",e.artwork.description)("ngClass",Sc(18,lG,t.submitted&&o.invalid)),Cr(2),Us("ngIf",t.submitted&&o.invalid),Cr(3),Us("disabled",e.disabled)}},directives:[tA,Q_,Ww,CB,BB,CU,SU,yB,_U,j_,oA,Y_,Jw,ud,md,pA],styles:[".add-artwork[_ngcontent-%COMP%]{min-height:100vh;max-height:100vh;background-image:url(/assets/images/gallery/sample/picture7.png);background-size:cover;background-repeat:no-repeat;background-attachment:fixed;overflow:auto}.add-artwork[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{margin-right:8px}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.8);height:100%;min-height:100vh}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%;height:100%}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .hand[_ngcontent-%COMP%]:hover{cursor:pointer;cursor:hand}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6);padding:1em;border:none;color:#f5f5f5;border-radius:1em}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.9);border-radius:.5em;border-color:teal;color:#fff}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:2em}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f5f5f5}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .pdf-consent[_ngcontent-%COMP%]{background-color:teal}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .pdf-consent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:teal;color:#fff;border:none;width:100%}"]}),t})(),uG=(()=>{class t{constructor(t,e,n,i,r,o){this.snackBar=t,this.router=e,this.matDialog=n,this.fauth=i,this.storage=r,this.dbOperations=o,this.durationInSeconds=5,this.extraDetails=new zb,this.artworks=[],this.submittedWorks=[],this.files=[],this.pdfs=[],this.uploadedDocuments=0,this.checkedTerms=!1,this.checkedPrivacy=!1,this.formWidth=100,this.answered=!1,this.currentUser="",this.disabled=!1}ngOnInit(){this.getScreenSize(),this.getCurrentUser(),console.log(localStorage.getItem("currentUser"))}onResize(t){let e=t.target.innerWidth;e>800&&(this.formWidth=80),e>1e3&&(this.formWidth=70),e>1200&&(this.formWidth=60)}getScreenSize(){let t=window.innerWidth;t>800&&(this.formWidth=80),t>1e3&&(this.formWidth=70),t>1200&&(this.formWidth=60)}onSubmit(){this.dbOperations.artwork=this.artwork,this.dbOperations.extraDetails=this.extraDetails,this.dbOperations.uploadSubjectConsentForm(this.dbOperations.consentForm,this.dbOperations.temporaryArtwork,this.dbOperations.file,this.dbOperations.extraDetails)}checkReadTermsValue(){console.log(this.checkedTerms),this.checkedTerms=!this.checkedTerms}checkReadPrivacy(){this.checkedPrivacy=!this.checkedPrivacy}getCurrentUser(){this.currentUser=localStorage.getItem("currentUser")}}return t.\u0275fac=function(e){return new(e||t)(Ns(EF),Ns(Wg),Ns(sP),Ns(a_),Ns(Ub),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-confirm-submission"]],hostBindings:function(t,e){1&t&&Xs("resize",(function(t){return e.onResize(t)}),!1,Xn)},decls:49,vars:6,consts:[[1,"add-artwork",3,"resize"],[1,"artwork-bg"],[1,"container-fluid"],[1,"artwork-form","py-5"],["thirdForm","ngForm"],[1,"card","p-3","mt-3"],[1,"form-group"],["maxlength","150","required","","name","challenges","id","challenges","rows","3",1,"form-control",3,"ngModel","ngModelChange"],["challenges","ngModel"],[1,"help-text"],["maxlength","150","required","","name","experience","id","experience","rows","3",1,"form-control",3,"ngModel","ngModelChange"],["experience","ngModel"],["maxlength","150","required","","name","lifeBefore","id","lifeBefore","rows","3",1,"form-control",3,"ngModel","ngModelChange"],["lifeBefore","ngModel"],[1,"confirm-terms","mt-3"],[1,"form-check"],[1,"form-check-label"],["type","checkbox","name","read","value","checked",1,"form-check-input",3,"change"],["type","checkbox","name","terms","value","checked",1,"form-check-input",3,"change"],[1,"next"],[1,"form-group","mt-3"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(t,e){1&t&&(js(0,"div",0),Xs("resize",(function(t){return e.onResize(t)}),!1,Xn),js(1,"div",1),js(2,"div",2),js(3,"div",3),js(4,"form",null,4),js(6,"div"),js(7,"div",5),js(8,"div",6),js(9,"label"),ka(10,"Challenges"),zs(),js(11,"textarea",7,8),Xs("ngModelChange",(function(t){return e.extraDetails.challenges=t})),zs(),js(13,"small",9),ka(14,"What are some of the challenges you encountered in the process of taking the photo(s)/video?"),zs(),zs(),zs(),js(15,"div",5),js(16,"div",6),js(17,"label"),ka(18,"Experience"),zs(),js(19,"textarea",10,11),Xs("ngModelChange",(function(t){return e.extraDetails.experience=t})),zs(),js(21,"small",9),ka(22,"Tell us your experience in the process of taking this video/photo"),zs(),zs(),zs(),js(23,"div",5),js(24,"div",6),js(25,"label"),ka(26,"Prior to Covid - 19"),zs(),js(27,"textarea",12,13),Xs("ngModelChange",(function(t){return e.extraDetails.lifeBefore=t})),zs(),js(29,"small",9),ka(30,"Please describe to us your normal routine prior to Covid - 19"),zs(),zs(),zs(),zs(),js(31,"div",14),js(32,"div",2),js(33,"div",15),js(34,"p"),ka(35,"Please check the boxes below:"),zs(),js(36,"label",16),js(37,"input",17),Xs("change",(function(){return e.checkReadTermsValue()})),zs(),js(38,"p"),ka(39,"I have read the Submission Guidelines and Rules (including the copyright conditions) below and agree to the terms and conditions of the photo(s) and video call for submission."),zs(),zs(),zs(),js(40,"div",15),js(41,"label",16),js(42,"input",18),Xs("change",(function(){return e.checkReadPrivacy()})),zs(),js(43,"p"),ka(44,"I have read the Submission Guidelines and Rules (including the copyright conditions) below and agree to the terms and conditions of the photo(s) and video call for submission."),zs(),zs(),zs(),zs(),zs(),js(45,"div",19),js(46,"div",20),js(47,"button",21),Xs("click",(function(){return e.onSubmit()})),ka(48,"Proceed to submit"),zs(),zs(),zs(),zs(),zs(),zs(),zs(),zs()),2&t&&(Cr(2),ga("width",e.formWidth,"%"),Cr(9),Us("ngModel",e.extraDetails.challenges),Cr(8),Us("ngModel",e.extraDetails.experience),Cr(8),Us("ngModel",e.extraDetails.lifeBefore),Cr(20),Us("disabled",e.disabled))},directives:[tA,Q_,Ww,j_,pA,oA,Y_,Jw],styles:[".add-artwork[_ngcontent-%COMP%]{min-height:100vh;max-height:100vh;background-image:url(/assets/images/gallery/sample/picture7.png);background-size:cover;background-repeat:no-repeat;background-attachment:fixed;overflow:auto}.add-artwork[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{margin-right:8px}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.8);height:100%;min-height:100vh}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{width:100%;height:100%}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .hand[_ngcontent-%COMP%]:hover{cursor:pointer;cursor:hand}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.6);padding:1em;border:none;color:#f5f5f5;border-radius:1em}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.9);border-radius:.5em;border-color:teal;color:#fff}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:2em}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f5f5f5}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .pdf-consent[_ngcontent-%COMP%]{background-color:teal}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   .pdf-consent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.add-artwork[_ngcontent-%COMP%]   .artwork-bg[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:teal;color:#fff;border:none;width:100%}"]}),t})();const hG=[{path:"",redirectTo:"project",pathMatch:"full"},{path:"gallery",component:FH},{path:"gallery/:id",component:(()=>{class t{constructor(t,e){this.route=t,this.dbOperations=e,this.video=""}ngOnInit(){this.route.params.subscribe(t=>{this.id=+t.id,this.getVideos(this.id.toString()),this.generate()})}getVideos(t){console.log(t),this.dbOperations.artworksCollection().ref.where("type","==","video").onSnapshot(t=>{t.docChanges().map(t=>{const e=t.doc.data();this.video=e.url,console.log(Object.assign({},e))})})}generate(){const t=[4,1,1,1,1,1,1,1,2,4,0,0,0,0,0,0,0,2,4,0,0,0,0,0,0,0,2,4,0,0,0,0,0,0,0,2,4,0,0,0,0,0,0,0,2,4,0,0,0,0,0,0,0,2,4,0,0,0,8,0,0,0,2,4,0,0,0,0,0,0,0,2,4,0,0,0,0,0,0,0,2];document.querySelector("a-scene").addEventListener("render-target-loaded",()=>{const e=document.querySelector("#walls");let n;for(var i=0;i<9;i++){console.log(i);for(var r=0;r<9;r++){const o=9*r+i,s=`${3*(i-4.5)} 1.5 ${3*(r-4.5)}`;if(1===t[o]||2==t[o]||3===t[o]||4===t[o]){let t=document.createElement("a-box");e.appendChild(t),t.setAttribute("width",3..toString()),t.setAttribute("height",25..toString()),t.setAttribute("depth",3..toString()),t.setAttribute("position",s),t.setAttribute("color","#fff"),t.setAttribute("material","src: #wall; repeat: 4 4"),t.setAttribute("static-body","")}8===t[o]&&(n=s),9===t[o]&&console.log(s)}}document.querySelector("#player").setAttribute("position",n)})}}return t.\u0275fac=function(e){return new(e||t)(Ns(km),Ns(O_))},t.\u0275cmp=fe({type:t,selectors:[["app-vr-video"]],decls:18,vars:1,consts:[[1,"vr-gallery"],["cursor","rayOrigin: mouse","videoplayer",""],["id","floor","src","assets/images/other/tiles.jpg"],["id","ceiling","src","assets/images/other/ceiling.jpg"],["id","wall","src","assets/images/other/wall-concrete.jpg"],["id","wall-secret","src","assets/images/other/wall-concrete-secret.jpg"],["id","wall-brick","src","assets/images/other/brick.jpg"],["id","room-sign-1","src","assets/images/other/room-sign-1.png"],["id","room-sign-2","src","assets/images/other/room-sign-2.png"],["id","sky","src","assets/images/other/wall-concrete.jpg"],["id","theaterVideo","autoplay","","preload","true","loop","true","crossorigin","anonymous",3,"src"],["id","player","camera","user-height: 1.6","wasd-controls","acceleration: 200","look-controls","","mouse-cursor","","listener","","position","0 9 0"],["src","#theaterVideo","videoplayer","","visible","true","autoplay","true","webkit-playsinline","","playsinline","","position","-1 1.5 -11.5","width","10","height","8"],["id","ground","position","-2 -11 -1","static-body","","material","src: #floor; repeat: 30 30","height","85","width","85","rotation","-90 0 0"],["id","walls"],["position","-2 14.5 -1","rotation","90 0 0","height","85","width","85","static-body","","material","src: #ceiling; repeat: 10 10"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"a-scene",1),js(2,"a-assets"),Hs(3,"img",2),Hs(4,"img",3),Hs(5,"img",4),Hs(6,"img",5),Hs(7,"img",6),Hs(8,"img",7),Hs(9,"img",8),Hs(10,"img",9),Hs(11,"video",10),zs(),Hs(12,"a-entity",11),Hs(13,"a-video",12),Hs(14,"a-plane",13),ka(15,") "),Hs(16,"a-entity",14),Hs(17,"a-plane",15),zs(),zs()),2&t&&(Cr(11),aa("src",e.video,rr))},styles:[""]}),t})()},{path:"create-profile",component:LH},{path:"artist-profile",component:KH},{path:"social-links",component:ZH},{path:"confirm-submission",component:uG},{path:"artwork-info",component:cG},{path:"upload-files",component:tG},{path:"sorry",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-sorry"]],decls:3,vars:0,consts:[[1,"sorry","text-center"],[1,"display-4"]],template:function(t,e){1&t&&(js(0,"div",0),js(1,"p",1),ka(2,"Thank you for checking with"),zs(),zs())},styles:[".sorry[_ngcontent-%COMP%]{text-align:center;padding:20%;color:teal}"]}),t})()},{path:"auth",component:wA,children:[{path:"",loadChildren:()=>_A}]},{path:"project",component:xC,children:[{path:"",loadChildren:()=>PH}]}];let dG=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[sv,sv.forRoot(hG)],sv]}),t})(),pG=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=fe({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&Hs(0,"router-outlet")},directives:[Xg],styles:[""]}),t})();class fG{constructor(t,e,n,i){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=i}call(t,e){return e.subscribe(new mG(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class mG extends m{constructor(t,e,n,i,r){super(t),this.keySelector=e,this.elementSelector=n,this.durationSelector=i,this.subjectSelector=r,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(t){let e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}_group(t,e){let n=this.groups;n||(n=this.groups=new Map);let i,r=n.get(e);if(this.elementSelector)try{i=this.elementSelector(t)}catch(o){this.error(o)}else i=t;if(!r){r=this.subjectSelector?this.subjectSelector():new C,n.set(e,r);const t=new vG(e,r,this);if(this.destination.next(t),this.durationSelector){let t;try{t=this.durationSelector(new vG(e,r))}catch(o){return void this.error(o)}this.add(t.subscribe(new gG(e,r,this)))}}r.closed||r.next(i)}_error(t){const e=this.groups;e&&(e.forEach((e,n)=>{e.error(t)}),e.clear()),this.destination.error(t)}_complete(){const t=this.groups;t&&(t.forEach((t,e)=>{t.complete()}),t.clear()),this.destination.complete()}removeGroup(t){this.groups.delete(t)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class gG extends m{constructor(t,e,n){super(e),this.key=t,this.group=e,this.parent=n}_next(t){this.complete()}_unsubscribe(){const{parent:t,key:e}=this;this.key=this.parent=null,t&&t.removeGroup(e)}}class vG extends b{constructor(t,e,n){super(),this.key=t,this.groupSubject=e,this.refCountSubscription=n}_subscribe(t){const e=new d,{refCountSubscription:n,groupSubject:i}=this;return n&&!n.closed&&e.add(new yG(n)),e.add(i.subscribe(t)),e}}class yG extends d{constructor(t){super(),this.parent=t,t.count++}unsubscribe(){const t=this.parent;t.closed||this.closed||(super.unsubscribe(),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}const bG=new Bt("angularfire2.analytics.analyticsCollectionEnabled"),_G=new Bt("angularfire2.analytics.appVersion"),wG=new Bt("angularfire2.analytics.appName"),AG=new Bt("angularfire2.analytics.debugMode"),xG=new Bt("angularfire2.analytics.config");let CG,EG;const SG={};let MG=(()=>{class t{constructor(t,e,n,r,o,s,a,l,c){this.options=t,EG||(Xd(l)?(CG=window.gtag||function(){window.dataLayer.push(arguments)},window.dataLayer=window.dataLayer||[],EG=c.runOutsideAngular(()=>new Promise(t=>{window.gtag=(...e)=>{"js"==e[0]&&t(),CG(...e)}}))):(CG=()=>{},EG=Promise.resolve()));let u=SG[t.measurementId];return u||(u=Op(void 0).pipe(Av(new Yv(c).outsideAngular),vf(()=>Xd(l)?i.e(6).then(i.bind(null,"AAub")):Vp()),F(()=>ey(t,c,e)),F(t=>t.analytics()),df(t=>{!1===n&&t.setAnalyticsCollectionEnabled(!1)}),s_({bufferSize:1,refCount:!1})),SG[t.measurementId]=u),a&&this.updateConfig(a),o&&this.updateConfig({app_name:o}),r&&this.updateConfig({app_version:r}),s&&this.updateConfig({debug_mode:1}),Kv(this,u,c)}updateConfig(t){return Object(vv.__awaiter)(this,void 0,void 0,(function*(){yield EG,CG("config",this.options.measurementId,Object.assign(Object.assign({},t),{update:!0}))}))}}return t.\u0275fac=function(e){return new(e||t)(Yt(Zv),Yt(Jv,8),Yt(bG,8),Yt(_G,8),Yt(wG,8),Yt(AG,8),Yt(xG,8),Yt(hu),Yt(Su))},t.\u0275prov=ut({factory:function(){return new t(Yt(Zv),Yt(Jv,8),Yt(bG,8),Yt(_G,8),Yt(wG,8),Yt(AG,8),Yt(xG,8),Yt(hu),Yt(Su))},token:t,providedIn:"any"}),t})(),TG=(()=>{class t{constructor(t,e,n,i,r,o,s,a){if(!e||!Xd(r))return this;s.runOutsideAngular(()=>{const r=e.events.pipe(Hp(t=>t instanceof Gf)),l=e.events.pipe(Hp(t=>t instanceof Df));var c;this.disposable=l.pipe(d_(r),vf(([t,e])=>{const r=t.url,o=e.snapshot.routeConfig&&e.snapshot.routeConfig.path||r,s={screen_name:o,page_path:r,firebase_event_origin:"auto",firebase_screen:o,outlet:e.snapshot.outlet};n&&(s.page_title=n.getTitle());const l=e.snapshot.component,c=e.snapshot.routeConfig,u=c&&c.loadChildren;if("string"==typeof u)return Op(Object.assign(Object.assign({},s),{screen_class:u.split("#")[1]}));if("string"==typeof l)return Op(Object.assign(Object.assign({},s),{screen_class:l}));if(l){const t=i.resolveComponentFactory(l);return Op(Object.assign(Object.assign({},s),{screen_class:t.selector}))}if(u){const t=u();return(t instanceof b?t:V(Promise.resolve(t))).pipe(F(t=>{if(!(t instanceof te)){const e=[].concat.apply([],(t.__annotations__||[]).map(t=>t.declarations)),n=[].concat.apply([],e.map(t=>(t.__annotations__||[]).map(t=>t.selector)));return Object.assign(Object.assign({},s),{screen_class:n[0]||"???"})}{const n=t.create(a),i=n.injector.get(Ng)[0][0].component;try{const t=n.componentFactoryResolver.resolveComponentFactory(i);return Object.assign(Object.assign({},s),{screen_class:t.selector})}catch(e){return Object.assign(Object.assign({},s),{screen_class:"???"})}}}))}return Op(Object.assign(Object.assign({},s),{screen_class:"???"}))}),F(t=>Object.assign({firebase_screen_class:t.screen_class,firebase_screen_id:OG(t)},t)),df(e=>{"primary"==e.outlet&&(t.setCurrentScreen(e.screen_name),t.updateConfig({page_path:e.page_path,screen_class:e.screen_class}),n&&t.updateConfig({page_title:e.page_title}))}),(c=t=>t.outlet,t=>t.lift(new fG(c,void 0,void 0,void 0))),j(t=>t.pipe(wf(void 0),t=>t.lift(new Nx))),F(([t,e])=>t?Object.assign({firebase_previous_class:t.screen_class,firebase_previous_screen:t.screen_name,firebase_previous_id:t.firebase_screen_id},e):e),df(t=>o&&console.info("screen_view",t)),df(e=>s.runOutsideAngular(()=>t.logEvent("screen_view",e)))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Yt(MG),Yt(Wg,8),Yt(Dp,8),Yt(Ja),Yt(hu),Yt(AG,8),Yt(Su),Yt(As))},t.\u0275prov=ut({factory:function(){return new t(Yt(MG),Yt(Wg,8),Yt(Dp,8),Yt(Ja),Yt(hu),Yt(AG,8),Yt(Su),Yt(Ut))},token:t,providedIn:"any"}),t})(),PG=(()=>{class t{constructor(t,e,n){const r=new Yv(e);Kd(n)||e.runOutsideAngular(()=>{this.disposable=V(i.e(1).then(i.bind(null,"6nsN"))).pipe(Av(r.outsideAngular),vf(()=>t.app),F(t=>t.auth()),vf(t=>new b(t.onAuthStateChanged.bind(t))),vf(e=>t.setUserId(e?e.uid:null))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Yt(MG),Yt(Su),Yt(hu))},t.\u0275prov=ut({factory:function(){return new t(Yt(MG),Yt(Su),Yt(hu))},token:t,providedIn:"any"}),t})(),kG=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const DG={},OG=t=>{const e=[t.screen_class,t.outlet].join("#");if(DG.hasOwnProperty(e))return DG[e];{const t=kG++;return DG[e]=t,t}};let RG=(()=>{class t{constructor(t,e,n){}}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)(Yt(MG),Yt(TG,8),Yt(PG,8))},providers:[MG]}),t})(),IG=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[WT,fT],fT]}),t})(),LG=(()=>{class t{}return t.\u0275mod=ye({type:t}),t.\u0275inj=ht({factory:function(e){return new(e||t)},imports:[[Qd,fT],fT]}),t})(),FG=(()=>{class t{}return t.\u0275mod=ye({type:t,bootstrap:[pG]}),t.\u0275inj=ht({factory:function(e){return new(e||t)},providers:[O_,R_],imports:[[iy.initializeApp(eh),Pp,dG,vA,UB,GN,MU,DT,RG,hT,l_,iy,D_,i_,Vb,_A,PH,TC,oF,aP,LG,IG,EB]]}),t})();(function(){if(Di)throw new Error("Cannot enable prod mode after platform setup.");ki=!1})(),Mp().bootstrapModule(FG).catch(t=>console.error(t))},zVF4:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=i("mrSG"),o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},s=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},l=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],r=0;r<t.length;r+=3){var o=t[r],s=r+1<t.length,a=s?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=(15&a)<<2|c>>6,h=63&c;l||(h=64,s||(u=64)),i.push(n[o>>2],n[(3&o)<<4|a>>4],n[u],n[h])}return i.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(l(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,i=0;n<t.length;){var r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){var o=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){var s=((7&r)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],r=0;r<t.length;){var o=n[t.charAt(r++)],s=r<t.length?n[t.charAt(r)]:0,a=++r<t.length?n[t.charAt(r)]:64,l=++r<t.length?n[t.charAt(r)]:64;if(++r,null==o||null==s||null==a||null==l)throw Error();i.push(o<<2|s>>4),64!==a&&(i.push(s<<4&240|a>>2),64!==l&&i.push(a<<6&192|l))}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){try{return c.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,i){n?e.reject(n):e.resolve(i),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,i))}},t}();function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function f(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}var m=function(t){function e(n,i){var r=t.call(this,i)||this;return r.code=n,r.name="FirebaseError",Object.setPrototypeOf(r,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,g.prototype.create),r}return r.__extends(e,t),e}(Error),g=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=e[0]||{},r=this.service+"/"+t,o=this.errors[t],s=o?v(o,i):"Error",a=this.serviceName+": "+s+" ("+r+").",l=new m(r,a),c=0,u=Object.keys(i);c<u.length;c++){var h=u[c];"_"!==h.slice(-1)&&(h in l&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),l[h]=i[h])}return l},t}();function v(t,e){return t.replace(y,(function(t,n){var i=e[n];return null!=i?String(i):"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;function b(t){return JSON.parse(t)}var _=function(t){var n={},i={},r={},o="";try{var s=t.split(".");n=b(u(s[0])||""),i=b(u(s[1])||""),o=s[2],r=i.d||{},delete i.d}catch(e){}return{header:n,claims:i,data:r,signature:o}},w=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++)n[i]=4294967295&((h=n[i-3]^n[i-8]^n[i-14]^n[i-16])<<1|h>>>31);var r,o,s=this.chain_[0],a=this.chain_[1],l=this.chain_[2],c=this.chain_[3],u=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(r=c^a&(l^c),o=1518500249):(r=a^l^c,o=1859775393):i<60?(r=a&l|c&(a|l),o=2400959708):(r=a^l^c,o=3395469782);var h=(s<<5|s>>>27)+r+u+o+n[i]&4294967295;u=c,c=l,l=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=0,r=this.buf_,o=this.inbuf_;i<e;){if(0===o)for(;i<=n;)this.compress_(t,i),i+=this.blockSize;if("string"==typeof t){for(;i<e;)if(r[o]=t.charCodeAt(i),++i,++o===this.blockSize){this.compress_(r),o=0;break}}else for(;i<e;)if(r[o]=t[i],++i,++o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var i=0;for(n=0;n<5;n++)for(var r=24;r>=0;r-=8)t[i]=this.chain_[n]>>r&255,++i;return t},t}(),A=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,n,i){var r,o=this;if(void 0===t&&void 0===n&&void 0===i)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,i=["next","error","complete"];n<i.length;n++){var r=i[n];if(r in t&&"function"==typeof t[r])return!0}return!1}(t)?t:{next:t,error:n,complete:i}).next&&(r.next=x),void 0===r.error&&(r.error=x),void 0===r.complete&&(r.complete=x);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(e){}})),this.observers.push(r),s},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,n){var i=this;this.task.then((function(){if(void 0!==i.observers&&void 0!==i.observers[t])try{n(i.observers[t])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function x(){}function C(t,e,n){var i="";switch(e){case 1:i=n?"first":"First";break;case 2:i=n?"second":"Second";break;case 3:i=n?"third":"Third";break;case 4:i=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+i+" argument "}n.CONSTANTS=o,n.Deferred=d,n.ErrorFactory=g,n.FirebaseError=m,n.MAX_VALUE_MILLIS=144e5,n.RANDOM_FACTOR=.5,n.Sha1=w,n.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},n.assert=s,n.assertionError=a,n.async=function(t,e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},n.base64=c,n.base64Decode=u,n.base64Encode=function(t){var e=l(t);return c.encodeByteArray(e,!0)},n.calculateBackoffMillis=function(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var i=e*Math.pow(n,t),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)},n.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.createSubscribe=function(t,e){var n=new A(t,e);return n.subscribe.bind(n)},n.decode=_,n.deepCopy=function(t){return h(void 0,t)},n.deepExtend=h,n.errorPrefix=C,n.getUA=p,n.isAdmin=function(t){var e=_(t).claims;return"object"==typeof e&&!0===e.admin},n.isBrowser=function(){return"object"==typeof self&&self.self===self},n.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},n.isElectron=function(){return p().indexOf("Electron/")>=0},n.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},n.isIE=function(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},n.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!=indexedDB},n.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())},n.isNode=f,n.isNodeSdk=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},n.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},n.isSafari=function(){return!f()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},n.isUWP=function(){return p().indexOf("MSAppHost/")>=0},n.isValidFormat=function(t){var e=_(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},n.isValidTimestamp=function(t){var e=_(t).claims,n=Math.floor((new Date).getTime()/1e3),i=0,r=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?i=e.nbf:e.hasOwnProperty("iat")&&(i=e.iat),r=e.hasOwnProperty("exp")?e.exp:i+86400),!!n&&!!i&&!!r&&n>=i&&n<=r},n.issuedAtTime=function(t){var e=_(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},n.jsonEval=b,n.map=function(t,e,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i},n.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},i=0,r=Object.entries(t);i<r.length;i++){var o=r[i];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},n.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},n.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},n.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e},n.stringToByteArray=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);if(r>=55296&&r<=56319){var o=r-55296;i++,s(i<t.length,"Surrogate pair missing trail surrogate."),r=65536+(o<<10)+(t.charCodeAt(i)-56320)}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},n.stringify=function(t){return JSON.stringify(t)},n.validateArgCount=function(t,e,n,i){var r;if(i<e?r="at least "+e:i>n&&(r=0===n?"none":"no more than "+n),r)throw new Error(t+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".")},n.validateCallback=function(t,e,n,i){if((!i||n)&&"function"!=typeof n)throw new Error(C(t,e,i)+"must be a valid function.")},n.validateContextObject=function(t,e,n,i){if((!i||n)&&("object"!=typeof n||null===n))throw new Error(C(t,e,i)+"must be a valid context object.")},n.validateIndexedDBOpenable=function(){return new Promise((function(t,e){try{var n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=window.indexedDB.open(i);r.onsuccess=function(){r.result.close(),n||window.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=function(){n=!1},r.onerror=function(){var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))},n.validateNamespace=function(t,e,n,i){if((!i||n)&&"string"!=typeof n)throw new Error(C(t,e,i)+"must be a valid firebase namespace.")}},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);